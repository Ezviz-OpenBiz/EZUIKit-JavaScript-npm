/*
* ezuikit.js v8.2.0-beta.7
* ezuikit javascript for npm
* Copyright (c) 2025-11-23 Ezviz-OpenBiz
* Released under the MIT License.
*/
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("abortcontroller-polyfill"),require("formdata-polyfill");var e=require("deepmerge"),t=require("@ezuikit/utils-tools"),n=require("screenfull"),i=require("@ezuikit/utils-i18n"),r=require("@ezuikit/utils-logger"),o=require("debounce-promise"),a=require("@ezuikit/utils-collect"),s=require("@ezuikit/player-ezopen/dist/adapter.js"),l=require("delegate");function c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(':root{--ezplayer-default-color:#fff;--ezplayer-primary-color:#407aff;--ezplayer-active-color:var(--ezplayer-primary-color,#407aff);--ezplayer-disabled-color:#aaa;--ezplayer-font-size:14px;--ezplayer-icon-font-size:24px;--ezplayer-btn-height:var(--ezplayer-icon-font-size,24px);--ezplayer-border-radius:8px;--ezplayer-control-space:16px;--ezplayer-header-height:46px;--ezplayer-footer-height:80px;--ezplayer-fullscreen-control-space:26px;--ezplayer-panel-bg-color:rgba(0,0,0,.7);--ezplayer-mobile-control-space:16px;--ezplayer-mobile-header-height:45px;--ezplayer-mobile-footer-height:54px;--ezplayer-mobile-fullscreen-header-height:75px;--ezplayer-mobile-fullscreen-footer-height:110px;--ezplayer-mobile-fullscreen-control-space:26px;--ezplayer-mobile-extend-bg-color:#f5f7fa;--ezplayer-mobile-extend-default-color:#2c2c2c}body.ezplayer-body-mobile-noscroll{background-color:#000!important;height:100vh;overflow:hidden;touch-action:none}.ezplayer,.ezplayer-mobile-extend{background-color:#000;box-sizing:border-box;color:var(--ezplayer-default-color,#fff);display:flex;flex-direction:column;font-size:14px;font-size:var(--ezplayer-font-size,14px);padding:0;position:relative;--webkit-tap-highlight-color:transparent;outline:none}.ezplayer *,.ezplayer-mobile-extend *{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezplayer:-webkit-full-screen{height:100%!important;width:100%!important}.ezplayer *{box-sizing:border-box}.ezplayer li,.ezplayer ul{box-sizing:border-box;list-style:none;margin:0;padding:0}.ezplayer-control{align-items:center;cursor:pointer;display:inline-flex;justify-content:center}.ezplayer-control-block,.ezplayer-control-text{cursor:unset}.ezplayer-control-block{align-items:center;box-sizing:border-box;color:var(--ezplayer-default-color,#fff);display:flex;flex-direction:column;justify-content:center;margin:0;padding:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezplayer-btn,.ezplayer-icon,.ezplayer-text{display:inline-flex;transition:color .2s ease-in-out}.ezplayer-btn{cursor:pointer}.ezplayer-btn,.ezplayer-text{font-size:var(--ezplayer-font-size,14px)}.ezplayer-btn{align-items:center;border:1px solid var(--ezplayer-default-color,#fff);border-radius:12px;border-radius:calc(var(--ezplayer-btn-height, 24px)/2);display:inline-flex;height:var(--ezplayer-btn-height,26px);justify-content:center;padding:2px 10px;white-space:nowrap}.ezplayer-active{border-color:var(--ezplayer-active-color,#0099e5)!important;color:var(--ezplayer-active-color,#0099e5)!important}.ezplayer-disabled,.ezplayer-disabled .ezplayer-btn,.ezplayer-disabled .ezplayer-icon,.ezplayer-disabled .ezplayer-text{border-color:var(--ezplayer-disabled-color,#aaa)!important;color:var(--ezplayer-disabled-color)!important;cursor:not-allowed!important}.ezplayer-hide{display:none!important}.ezplayer-hide-transition{opacity:0!important;pointer-events:none!important}.ezplayer-overflow-hidden{overflow:hidden}.ezplayer-global-fullscreen .ezplayer-footer,.ezplayer-global-fullscreen .ezplayer-header,.ezplayer-global-fullscreen .ezplayer-rec-footer{display:none}.ezplayer-mobile .ezplayer-control-global-fullscreen{display:none!important}.ezplayer-mobile.ezplayer-fullscreen.ezplayer-angle-0,.ezplayer-mobile.ezplayer-fullscreen.ezplayer-angle-180{background-color:#000!important;bottom:0!important;height:100vw!important;height:var(--ezplayer-mobile-inner-width,100vw)!important;left:0!important;overflow:hidden;padding-right:env(safe-area-inset-bottom);position:fixed!important;right:0!important;top:0!important;transform:rotate(90.001deg) translateY(-100%)!important;-webkit-transform:rotate(90.001deg) translateY(-100%)!important;transform-origin:0 0!important;-webkit-transform-origin:0 0!important;width:100vh!important;width:var(--ezplayer-mobile-inner-height,100vh)!important;z-index:9999}.ezplayer-mobile.ezplayer-fullscreen.ezplayer-angle-270,.ezplayer-mobile.ezplayer-fullscreen.ezplayer-angle-90{background-color:#000!important;bottom:0!important;height:100vh!important;height:var(--ezplayer-mobile-inner-height,100vh)!important;left:0!important;overflow:hidden;position:fixed!important;right:0!important;top:0!important;transform:rotate(0deg) translateY(0)!important;-webkit-transform:rotate(0deg) translateY(0)!important;transform-origin:0 0!important;-webkit-transform-origin:0 0!important;width:100vw!important;width:var(--ezplayer-mobile-inner-width,100vw)!important;z-index:9999}.ezplayer-footer,.ezplayer-header{align-items:center;box-sizing:border-box;color:var(--ezplayer-default-color,#fff);display:flex;flex-wrap:nowrap;font-size:24px;justify-content:space-between;left:0;opacity:1;position:absolute;right:0;transition:opacity .3s ease;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;z-index:20}.ezplayer-footer-left,.ezplayer-footer-right,.ezplayer-header-left,.ezplayer-header-right{display:inline-flex;flex-direction:row;flex-wrap:nowrap}.ezplayer-footer-left,.ezplayer-header-left{padding-left:20px}.ezplayer-footer-left .ezplayer-control,.ezplayer-header-left .ezplayer-control{margin-right:16px}.ezplayer-footer-left .ezplayer-control:last-child,.ezplayer-header-left .ezplayer-control:last-child{margin-right:0!important}.ezplayer-footer-right,.ezplayer-header-right{padding-right:20px}.ezplayer-footer-right .ezplayer-control,.ezplayer-header-right .ezplayer-control{margin-left:16px}.ezplayer-footer-right .ezplayer-control:first-child,.ezplayer-header-right .ezplayer-control:first-child{margin-left:0!important}.ezplayer-footer .ezplayer-control,.ezplayer-header .ezplayer-control{padding:2px}.ezplayer-footer .ezplayer-control-text+.ezplayer-control-text,.ezplayer-header .ezplayer-control-text+.ezplayer-control-text{margin-left:8px}.ezplayer-footer-more,.ezplayer-header-more{align-items:center;display:flex;flex-direction:row}.ezplayer-header{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAuCAMAAADeMYNYAAAAbFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0Iv+qAAAAJHRSTlOBdGtiTDoxGxIJy8bCvbm0sKyno56alZGMiHtbV1JFQSomIQDNbq/TAAAAPklEQVQI1xXBhQHAIAAEsau7uwv778iTkFNQUlHT0NLRMzAyMbOwsuHseOproAcnF6HePEQa68vHT6KpZmosd8UCpGNSKboAAAAASUVORK5CYII=");box-sizing:border-box;height:46px;margin:0;top:0}.ezplayer-header-left,.ezplayer-header-right{max-width:50%}.ezplayer-control-rec .ezplayer-icon:first-child{margin-left:0}.ezplayer-footer{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAABQCAQAAAByztdQAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAD/h4/MvwAAAAd0SU1FB+kGBAsQDlySUqoAAAABb3JOVAHPoneaAAAAHElEQVQI12NgYGRiYGZiYGJiYEZiYJLECw5q9QCpgAFr/pGonwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyNS0wNi0wNFQxMToxNTo1OCswMDowMBLJutIAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjUtMDYtMDRUMTE6MTU6NTgrMDA6MDBjlAJuAAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDI1LTA2LTA0VDExOjE2OjE0KzAwOjAwnFz8PAAAAABJRU5ErkJggg==");bottom:0;box-sizing:border-box;height:80px;margin:0;padding-top:20px}.ezplayer-mobile .ezplayer-footer,.ezplayer-mobile .ezplayer-header{font-size:24px}.ezplayer-mobile .ezplayer-footer-left .ezplayer-control,.ezplayer-mobile .ezplayer-footer-right .ezplayer-control,.ezplayer-mobile .ezplayer-header-left .ezplayer-control,.ezplayer-mobile .ezplayer-header-right .ezplayer-control{height:24px;padding:0}.ezplayer-mobile .ezplayer-footer-left,.ezplayer-mobile .ezplayer-header-left{padding-left:15px}.ezplayer-mobile .ezplayer-footer-left .ezplayer-control,.ezplayer-mobile .ezplayer-header-left .ezplayer-control{margin-right:15px}.ezplayer-mobile .ezplayer-footer-right,.ezplayer-mobile .ezplayer-header-right{padding-right:15px}.ezplayer-mobile .ezplayer-footer-right .ezplayer-control,.ezplayer-mobile .ezplayer-header-right .ezplayer-control{margin-left:15px}.ezplayer-mobile .ezplayer-footer .ezplayer-control,.ezplayer-mobile .ezplayer-header .ezplayer-control{height:24px;min-width:24px}.ezplayer-mobile .ezplayer-footer .ezplayer-control-text,.ezplayer-mobile .ezplayer-header .ezplayer-control-text{font-size:14px}.ezplayer-mobile .ezplayer-header{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAtCAMAAACzkkr1AAAAV1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOl5NtAAAAHXRSTlOWj4JzaV9YUUQ9MywlGxQKioZ8eW9kTUk4IA8FAKPHi9EAAABMSURBVAjXJcKFDcAwAAOwjKHM+P+dUzTL+C0LWwvnsK7sPULAtnGM2HdOCcfB58nXxTmjFNw3Pw/XivdlIVhKbg1KsdbcO4zhMTDnB9pJBB0jNaXIAAAAAElFTkSuQmCC");background:linear-gradient(180deg,rgba(0,0,0,.6),transparent);height:45px;margin:0;padding:0}.ezplayer-mobile .ezplayer-footer{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAA2CAQAAABHVIAUAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAD/h4/MvwAAAAd0SU1FB+kHGQYOGOvM7YUAAAABb3JOVAHPoneaAAAAFUlEQVQY02NkYGRgYGFgxkUwjShZAMFnAW71uqvOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTA3LTI1VDA2OjE0OjAwKzAwOjAwy873zwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0wNy0yNVQwNjoxNDowMCswMDowMLqTT3MAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMDctMjVUMDY6MTQ6MjQrMDA6MDBb7E3CAAAAAElFTkSuQmCC");background:linear-gradient(180deg,transparent,rgba(0,0,0,.6));height:54px;padding-top:0}.ezplayer-mobile.ezplayer-fullscreen .ezplayer-header{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAABLCAQAAADw6J4LAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAACYktHRAD/h4/MvwAAAAd0SU1FB+kHGQYYHh43/WcAAAABb3JOVAHPoneaAAAAKUlEQVQY02NkOM3AwMLwF5X4h5dLOyXD13JmBiaG/8wMjAz/GRkYGRgADI9KMQ6gLKQAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjUtMDctMjVUMDY6MjQ6MTQrMDA6MDBqybVDAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDI1LTA3LTI1VDA2OjI0OjE0KzAwOjAwG5QN/wAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyNS0wNy0yNVQwNjoyNDozMCswMDowMPrrD04AAAAASUVORK5CYII=");background:linear-gradient(180deg,rgba(0,0,0,.8),transparent);height:75px}.ezplayer-mobile.ezplayer-fullscreen .ezplayer-footer{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAABuCAMAAAA6XjI3AAAAaVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnbPKNAAAAI3RSTlMAQrRXSTozKxUHxb+spqCNh4F1ZVAgDbqTenBqJRvKm5dgXO7N8BQAAABzSURBVBjThcRFDsQwFATRH2Z2mHP/Q447bmuWKT2VfJdIYg0DxTHt2g59T9sGUSQRDmFoBRJYjvPn+6SUKHNPPOt54L6h62hdYdEWaFuaZ2gaacxrqV9VJZX5JNPruuA8oSypKCjPyXVp1EbIMkpTOg7tB7gTDCt3nEtMAAAAAElFTkSuQmCC");background:linear-gradient(180deg,transparent 9%,rgba(0,0,0,.8));height:110px;padding-top:18px}.ezplayer-mobile.ezplayer-fullscreen .ezplayer-footer-left,.ezplayer-mobile.ezplayer-fullscreen .ezplayer-header-left{padding-left:50px}.ezplayer-mobile.ezplayer-fullscreen .ezplayer-footer-left .ezplayer-control,.ezplayer-mobile.ezplayer-fullscreen .ezplayer-header-left .ezplayer-control{margin-right:30px}.ezplayer-mobile.ezplayer-fullscreen .ezplayer-footer-right,.ezplayer-mobile.ezplayer-fullscreen .ezplayer-header-right{padding-right:50px}.ezplayer-mobile.ezplayer-fullscreen .ezplayer-footer-right .ezplayer-control,.ezplayer-mobile.ezplayer-fullscreen .ezplayer-header-right .ezplayer-control{margin-left:30px}.ezplayer-fullscreen:not(.ezplayer-mobile) .ezplayer-footer-left .ezplayer-control,.ezplayer-fullscreen:not(.ezplayer-mobile) .ezplayer-header-left .ezplayer-control{margin-right:26px}.ezplayer-fullscreen:not(.ezplayer-mobile) .ezplayer-footer-right .ezplayer-control,.ezplayer-fullscreen:not(.ezplayer-mobile) .ezplayer-header-right .ezplayer-control{margin-left:26px}.ezplayer-content{align-items:center;justify-content:center}.ezplayer-content,.ezplayer-content-wrapper{box-sizing:border-box;display:flex;flex:1 1 auto;height:100%;margin:0;outline:none;overflow:hidden;padding:0;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;z-index:0}.ezplayer-content-wrapper{background-color:#000}.ezplayer-content-video{align-items:center;box-sizing:border-box;display:flex;flex:1 1 auto;height:100%;justify-content:center;margin:0;outline:none;padding:0;width:100%}.ezplayer-mobile-extend{background-color:#639;background-color:var(--ezplayer-mobile-extend-bg-color,#f5f7fa);color:var(--ezplayer-mobile-extend-default-color,#2c2c2c);display:flex;flex-direction:column}.ezplayer-mobile-extend-controls{background-color:#639;display:flex;height:66px;justify-content:space-around}.ezplayer-mobile-extend-controls .ezplayer-control{width:75px}.ezplayer-mobile-extend-control-panel{align-items:center;display:flex;flex-direction:column;min-height:390px}.ezplayer-mobile-extend-control-top{align-items:center;display:flex;height:36px;justify-content:space-between;padding-top:10px}.ezplayer-mobile-extend-control-top-left{display:inline-flex;padding-left:15px}.ezplayer-mobile-extend-control-top-right{display:inline-flex;justify-content:flex-end;padding-right:15px}.ezplayer-mobile-extend-control-content{display:flex;flex:1 1 auto;flex-direction:column;width:100%}.ezplayer-rec-footer{background-color:#000;box-sizing:border-box;display:block;height:36px;position:relative}.ezplayer-rec-footer-has-date-picker{padding-right:56px}.ezplayer-rec-footer-time-line{height:36px;overflow:hidden;width:100%}.ezplayer-rec-footer-date-picker{align-items:center;display:flex;height:36px;justify-content:flex-end;padding-right:20px;position:absolute;right:0;top:0;width:56px}.ezplayer-rec-footer-date-picker .ezplayer-icon-date{font-size:20px;margin-top:-5px}.drag-scroll{box-sizing:border-box;margin:0;padding:0}.drag-scroll-container{cursor:grab;height:450px;overflow:hidden;position:relative;-webkit-tap-highlight-color:transparent}.drag-scroll-container,.drag-scroll-content{box-sizing:border-box;display:flex;flex-direction:column;margin:0;padding:0;width:100%}.drag-scroll-content{gap:18px;height:auto;transform:translateZ(0);will-change:transform}.drag-scroll-scrollbar{background-color:#0000001a;border-radius:3px;bottom:0;box-sizing:border-box;opacity:0;position:absolute;right:0;top:0;transition:opacity .3s;width:6px}.drag-scroll-scrollbar.drag-scroll-show{opacity:1}.drag-scroll-scrollbar-thumb{background:linear-gradient(180deg,#4a90e2,#357abd);border-radius:3px;box-sizing:border-box;position:absolute;transition:height .2s;width:100%}.epicker-body-noscroll{overflow:hidden;touch-action:none}.epicker{box-shadow:0 9px 28px 8px #0000000d;display:none;margin:0;opacity:0;padding:0;position:absolute;transition:opacity .3s ease;vertical-align:top;z-index:1000}.epicker,.epicker-body{box-sizing:border-box;flex-direction:column}.epicker-body{display:flex}.epicker.epicker-mobile .epicker-mask{background-color:#0000004d;bottom:0;box-sizing:border-box;height:100%;left:0;position:fixed;right:0;top:0;width:100%;z-index:9998}.epicker.epicker-mobile .epicker-body{align-items:center;bottom:0;left:0;position:fixed;right:0;z-index:9999}.ez-time-line-container{box-sizing:border-box;display:block;height:300px;min-width:190px;overflow:hidden;padding-right:29%;position:relative;text-align:left;white-space:nowrap;width:52%!important}.ez-time-line-time-scale-area{border-bottom:none;border-right:12px solid #bdcdff;border-top:none;box-sizing:border-box;color:#666;font-size:12px;height:60px;margin:0;padding:0;position:relative}.ez-time-line-time-label{height:14px;left:45%;line-height:14px;position:relative;top:53px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ez-time-line-time-unavail{background-color:#ddd;box-sizing:border-box;left:100%;position:absolute;width:12px}.ez-time-line-current{box-sizing:border-box;height:29px;min-width:80px;padding-left:2.66666%;position:absolute;text-align:left;top:40px;width:23%;z-index:1}.ez-time-line-current-content{height:58px;position:relative;width:100%}.ez-time-line-current-tip{align-items:center;display:inline-flex;font-size:58px;position:absolute;width:58px;z-index:1}.ez-time-line-current-tip-line{background-color:#648ffc;border-radius:1px;height:1.5px;position:absolute;top:50%;transform:translateY(-50%);width:102%}.ez-time-line-current-value{color:#fff;font-size:12px;height:58px;line-height:58px;pointer-events:none;position:absolute;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:52px;z-index:1}.ez-time-line-time-cover-fold{align-items:flex-end;color:#fff;display:inline-flex;height:60px;position:absolute;right:-90px;transform:translate(22px);width:90px}.ez-time-line-time-cover-fold-img{border-radius:6px;height:50px;overflow:hidden;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:90px}.ez-time-line-time-cover-fold-img img{height:50px;-o-object-fit:cover;object-fit:cover;width:90px}.ez-time-line-time-cover-fold-img:before{background-color:rgba(0,0,0,.3);content:"";height:50px;left:0;position:absolute;top:0;width:90px;z-index:1}.ez-time-line-time-cover-fold-len{font-size:12px;font-size:11px;left:2px;position:absolute;top:2px;z-index:2}.ez-time-line-time-cover-fold-time{font-size:12px;font-size:11px;position:absolute;right:2px;top:2px;z-index:2}.ez-time-line-time-cover-fold-pause{bottom:2px;color:#fff;display:inline-flex;font-size:20px;position:absolute;right:0;z-index:2}.ez-time-line-cover-fold-placeholder{display:flex;height:60px;justify-content:center;position:absolute;width:90px}.ez-time-line-cover-fold-placeholder:after,.ez-time-line-cover-fold-placeholder:before{border-radius:6px;content:"";position:absolute}.ez-time-line-cover-fold-placeholder:before{background-color:#ededed;height:30px;top:0;width:70px}.ez-time-line-cover-fold-placeholder:after{background-color:#ccc;height:40px;top:5px;width:80px}.ez-time-line-item-cover-placeholder{align-items:center;background:linear-gradient(180deg,#b7c3cf,#d4d1d1 100%);color:#fff;display:flex;font-size:20px;height:100%;justify-content:center;left:0;position:absolute;top:0;width:100%;z-index:1}.ez-time-line-op{position:absolute;right:10%;top:50%;transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;user-select:none}.ez-time-line-op-wrapper{display:inline-flex;flex-direction:column}.ez-time-line-icon-plus{margin-bottom:40px}.ez-time-line-icon-minus:not(.ez-time-line-disabled),.ez-time-line-icon-plus:not(.ez-time-line-disabled){align-items:center;border:1px solid #999;border-radius:8px;box-sizing:border-box;cursor:pointer;display:inline-flex;font-size:16px;height:30px;justify-content:center;padding:7px;transition:color .3s ease,border-color .3s ease;width:30px}.ez-time-line-icon-minus:not(.ez-time-line-disabled):active,.ez-time-line-icon-plus:not(.ez-time-line-disabled):active{border-color:#369fff;color:#369fff}.ez-time-line-disabled{border-color:#dedede!important;cursor:not-allowed!important}.ez-time-line-picker.epicker.epicker-mobile .epicker-body{align-items:normal;background-color:#fff;height:550px;max-height:70%}.ez-time-line-picker-container{box-sizing:border-box;display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.ez-time-line-picker-header{color:#2c2c2c;display:flex;font-size:18px;font-weight:500;height:65px;letter-spacing:0;line-height:45px;padding:10px 70px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ez-time-line-picker-close,.ez-time-line-picker-header{align-items:center;box-sizing:border-box;justify-content:center}.ez-time-line-picker-close{color:#20262c;cursor:pointer;display:inline-flex;font-size:24px;height:24px;left:15px;position:absolute;top:20px;transition:color .3s ease;width:24px}.ez-time-line-picker-close:active{color:#f05757}.ez-time-line-picker-content{box-sizing:border-box;flex:1 1 auto;overflow-x:hidden;overflow-y:auto}.ez-time-line-picker-item{margin-bottom:20px;padding-left:10px;padding-right:10px}.ez-time-line-picker-item-title{color:#666;font-size:14px;font-weight:400;letter-spacing:0;line-height:20px;margin-bottom:10px;padding-left:1.5%}.ez-time-line-picker-item-list{display:flex;flex-wrap:wrap}.ez-time-line-picker-item-content{background-color:#ddd;border-radius:8px;display:flex;margin:0 1.5% 10px;overflow:hidden;padding-top:18.769%;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:30.333%}.ez-time-line-picker-item-content:before{background-color:rgba(0,0,0,.3);content:"";height:100%;left:0;position:absolute;top:0;width:100%}.ez-time-line-picker-item-time{left:5px}.ez-time-line-picker-item-duration,.ez-time-line-picker-item-time{color:#fff;font-size:12px;font-size:11px;font-weight:400;letter-spacing:0;line-height:13px;position:absolute;top:5px;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:2}.ez-time-line-picker-item-duration{right:5px}.ez-time-line-picker-item-cover{height:100%;left:0;-o-object-fit:cover;object-fit:cover;position:absolute;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;z-index:0}.ez-time-line-picker .ez-time-line-item-cover-placeholder{font-size:30px;z-index:1}.ezplayer .ezplayer-progress{align-items:center;background-color:var(--ezplayer-panel-bg-color,rgba(0,0,0,.7));border-radius:var(--ezplayer-border-radius,8px);box-sizing:border-box;cursor:default;display:flex;flex-direction:column;justify-content:center;padding:36px 9px 11px;position:relative;width:38px}.ezplayer .ezplayer-progress,.ezplayer .ezplayer-progress-text{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezplayer .ezplayer-progress-text{font-size:12px;height:17px;left:0;line-height:17px;position:absolute;text-align:center;top:10px;width:100%}.ezplayer .ezplayer-progress-minus,.ezplayer .ezplayer-progress-plus{display:flex;height:25px;justify-content:center}.ezplayer .ezplayer-progress-minus .ezplayer-icon,.ezplayer .ezplayer-progress-plus .ezplayer-icon{color:#fff;cursor:pointer;display:inline-block;font-size:20px;height:20px;text-align:center;transition:color .3s ease,border-color .3s ease;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:20px}.ezplayer .ezplayer-progress-minus .ezplayer-icon:active,.ezplayer .ezplayer-progress-plus .ezplayer-icon:active{color:var(--ezplayer-primary-color,#407aff)}@media (hover:hover){.ezplayer .ezplayer-progress-minus .ezplayer-icon:hover,.ezplayer .ezplayer-progress-plus .ezplayer-icon:hover{color:var(--ezplayer-primary-color,#407aff)}}.ezplayer .ezplayer-progress-plus{padding-bottom:5px}.ezplayer .ezplayer-progress-minus{padding-top:5px}.ezplayer .ezplayer-progress-slider{background-color:hsla(0,0%,100%,.75);border-radius:2px;cursor:pointer;flex:1 1 auto;position:relative;width:4px}.ezplayer .ezplayer-progress-slider-fill{background-color:var(--ezplayer-primary-color,#407aff);border-radius:4px;bottom:0;height:0;left:0;position:absolute;width:100%}.ezplayer .ezplayer-progress-slider-handle{align-items:center;background-color:var(--ezplayer-primary-color,#407aff);border-radius:50%;cursor:pointer;display:inline-flex;height:12px;justify-content:center;left:50%;position:absolute;top:0;transform:translate(-50%,-50%);width:12px}.ezplayer .ezplayer-progress-slider-handle:hover{box-shadow:0 0 2px var(--ezplayer-primary-color,#407aff)}.ezplayer .ezplayer-progress-slider-handle:before{background-color:#fff;border-radius:50%;content:"";display:inline;height:6px;width:6px}.ezplayer-icon{align-items:center;color:inherit;display:inline-flex;font-size:var(--ezplayer-icon-font-size,24px);font-style:normal;line-height:0;text-align:center;text-rendering:optimizeLegibility;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.ezplayer-select-panel{background-color:var(--ezplayer-panel-bg-color,rgba(0,0,0,.7));border-radius:var(--ezplayer-border-radius,8px);color:var(--ezplayer-default-color,#fff);display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto;position:relative}.ezplayer-select-btn{width:50px}.ezplayer-select-btn span{display:inline-block;font-size:12px;font-size:calc(var(--ezplayer-font-size, 14px) - 2px);line-height:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ezplayer-select-list{align-items:center;display:flex;flex-direction:column;font-size:var(--ezplayer-font-size,14px);list-style:none;margin:0;padding:12px 0!important;width:100%}.ezplayer-select-option{box-sizing:border-box;cursor:pointer;display:inline-flex;height:28px;justify-content:center;line-height:18px;list-style:none;padding:5px 20px!important;transition:color .3s ease;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ezplayer-select-option span{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ezplayer-select-option:hover{color:var(--ezplayer-active-color)}.ezplayer-select-cancel,.ezplayer-select-close{display:none}.ezplayer-select-cancel{font-size:var(--ezplayer-font-size,14px)}.ezplayer-mobile .epicker-mobile.ezplayer-select-picker .ezplayer-select-panel{background-color:transparent;max-width:400px;padding-bottom:calc(54px + env(safe-area-inset-bottom));width:90%}.ezplayer-mobile .epicker-mobile.ezplayer-select-picker .ezplayer-select-list{align-items:center;background-color:#fff;border-radius:var(--ezplayer-border-radius,8px);display:flex;flex-direction:column;font-size:var(--ezplayer-font-size,14px);max-height:70vh;max-height:calc(90vh - 108px);overflow-x:hidden;overflow-y:auto;padding:20px 0!important}.ezplayer-mobile .epicker-mobile.ezplayer-select-picker .ezplayer-select-cancel,.ezplayer-mobile .epicker-mobile.ezplayer-select-picker .ezplayer-select-option{align-items:center;box-sizing:border-box;color:#2c2c2c;display:inline-flex;height:36px;justify-content:center;line-height:26px;padding:5px 20px!important}.ezplayer-mobile .epicker-mobile.ezplayer-select-picker .ezplayer-select-option{--webkit-tap-highlight-color:transparent!important}.ezplayer-mobile .epicker-mobile.ezplayer-select-picker .ezplayer-select-option:hover{color:#2c2c2c}.ezplayer-mobile .epicker-mobile.ezplayer-select-picker .ezplayer-select-option:active{background-color:#f8f8f8}.ezplayer-mobile .epicker-mobile.ezplayer-select-picker .ezplayer-select-cancel{background-color:#fff;border-radius:var(--ezplayer-border-radius,8px);display:flex;height:54px;margin-top:8px}.ezplayer-mobile .epicker-mobile.ezplayer-select-picker .ezplayer-select-cancel:active{color:var(--ezplayer-active-color)}.ezplayer-mobile.ezplayer-fullscreen .epicker-mobile.ezplayer-select-picker .epicker-body{bottom:0;left:unset;right:0;top:0;width:240px}.ezplayer-mobile.ezplayer-fullscreen .epicker-mobile.ezplayer-select-picker .ezplayer-select-panel{align-items:center;background-color:var(--ezplayer-panel-bg-color,rgba(0,0,0,.7));border-bottom-right-radius:0;border-top-right-radius:0;height:100%;justify-content:center;padding-bottom:env(safe-area-inset-bottom);width:100%}.ezplayer-mobile.ezplayer-fullscreen .epicker-mobile.ezplayer-select-picker .ezplayer-select-list{background-color:transparent;border-radius:0;color:#fff;height:auto;margin:0;max-height:100%;width:100%}.ezplayer-mobile.ezplayer-fullscreen .epicker-mobile.ezplayer-select-picker .ezplayer-select-option,.ezplayer-mobile.ezplayer-fullscreen .epicker-mobile.ezplayer-select-picker .ezplayer-select-option:hover{color:#fff}.ezplayer-mobile.ezplayer-fullscreen .epicker-mobile.ezplayer-select-picker .ezplayer-select-option:active{background-color:transparent;color:var(--ezplayer-active-color)}.ezplayer-mobile.ezplayer-fullscreen .epicker-mobile.ezplayer-select-picker .ezplayer-select-cancel{display:none}.ezplayer-mobile.ezplayer-fullscreen .epicker-mobile.ezplayer-select-picker .ezplayer-select-close{display:inline-flex;left:10px;position:absolute;top:10px}.ezplayer-mobile.ezplayer-fullscreen .epicker-mobile.ezplayer-select-picker .ezplayer-select-close:active{color:var(--ezplayer-active-color)}.ezplayer-control-fullscreen .ezplayer-icon-exit-fullscreen,.ezplayer-control-global-fullscreen .ezplayer-icon-exit-global-fullscreen{display:none}.ezplayer-fullscreen .ezplayer-icon-exit-fullscreen{display:inline-flex}.ezplayer-fullscreen .ezplayer-icon-fullscreen{display:none}.ezplayer-global-fullscreen .ezplayer-icon-exit-global-fullscreen{display:inline-flex}.ezplayer-global-fullscreen .ezplayer-icon-global-fullscreen{display:none}.ezplayer-loading{background-color:rgba(0,0,0,.5);bottom:0;color:#fff;display:none;font-size:14px;height:100%;left:0;position:absolute;right:0;top:0;transition:transform .3s cubic-bezier(.78,.14,.15,.86);vertical-align:middle;width:100%;z-index:4}.ezplayer-loading-dot{display:inline-block;font-size:25px;height:25px;position:relative;width:25px}.ezplayer-loading-dot-item{background-color:#fff;border-radius:2px;display:block;height:10px;position:absolute;transform-origin:50% 50%;width:10px}.ezplayer-loading-dot-item:first-child{animation:animationShape1 2s linear 0s infinite normal;left:0;opacity:1;top:0}.ezplayer-loading-dot-item:nth-child(2){animation:animationShape2 2s linear 0s infinite normal;left:15px;opacity:.8;top:0}.ezplayer-loading-dot-item:nth-child(3){animation:animationShape3 2s linear 0s infinite normal;left:0;opacity:.5;top:15px}.ezplayer-loading-dot-item:nth-child(4){animation:animationShape4 2s linear 0s infinite normal;left:15px;opacity:.3;top:15px}.ezplayer-loading-dot-load{animation:rotation 1s infinite}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.ezplayer-load-blur{background:#fff;opacity:.5}}@keyframes ezdSpinMove{to{opacity:1}}@keyframes ezdRotate{to{transform:rotate(405deg)}}@keyframes rotation{0%{transform:rotate(0)}to{transform:rotate(1turn)}}@keyframes animationShape1{0%{transform:translate(0)}25%{transform:translateY(15px)}50%{transform:translate(15px,15px)}75%{transform:translate(15px)}to{transform:translate(translate)}}@keyframes animationShape2{0%{transform:translate(0)}25%{transform:translate(-15px)}50%{transform:translate(-15px,15px)}75%{transform:translateY(15px)}}@keyframes animationShape3{0%{transform:translate(0)}25%{transform:translate(15px)}50%{transform:translate(15px,-15px)}75%{transform:translateY(-15px)}}@keyframes animationShape4{0%{transform:translate(0)}25%{transform:translateY(-15px)}50%{transform:translate(-15px,-15px)}75%{transform:translate(-15px)}}.ezplayer-loading-text{margin-top:20px}.ezplayer-message{background-color:rgba(0,0,0,.4);bottom:0;color:#fff;display:none;font-size:16px;height:100%;left:0;overflow:hidden;position:absolute;right:0;top:0;width:100%;z-index:5}.ezplayer-message-content{align-items:center;display:flex;flex-direction:column;justify-content:center}.ezplayer-message-msg{display:-webkit-box;margin-top:15px;max-width:500px;overflow:hidden;word-break:break-all;-webkit-line-clamp:2;-webkit-box-orient:vertical;padding:0 20px}.ezplayer-message-error{color:#ff4d4f}.ezplayer-toast{background-color:rgba(0,0,0,.8);border-radius:var(--ezplayer-border-radius,8px);box-shadow:0 9px 28px 8px rgba(0,0,0,.05),0 3px 16px 0 rgba(0,0,0,.03),0 3px 7px -4px rgba(0,0,0,.05);color:#fff;display:flex;font-size:14px;left:50%;line-height:22px;max-width:450px;overflow:hidden;padding:9px 16px;position:absolute;top:50px;transform:translateX(-50%);z-index:6}.ezplayer-toast-content{padding-left:24px;position:relative}.ezplayer-toast .ezplayer-icon{font-size:16px;left:0;position:absolute;top:3px}.ezplayer-toast .ezplayer-icon-info-circle{color:var(--ezplayer-default-color,#fff)}.ezplayer-toast .ezplayer-icon-warn-circle{color:#faad14}.ezplayer-toast .ezplayer-icon-close-circle{color:#ff4d4f}.ezplayer-mobile .ezplayer-toast{font-size:12px;line-height:20px}.ezplayer-mobile .ezplayer-toast-content{padding-left:20px}.ezplayer-mobile .ezplayer-toast .ezplayer-icon{font-size:14px}.ezplayer-poster{bottom:0;display:none;height:100%;left:0;overflow:hidden;position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;z-index:2}.ezplayer-poster img{border:0;font-size:0;height:100%;outline:none;pointer-events:none;width:100%}.ezplayer-icon-volume{position:relative}.ezplayer-icon-volume svg .ezplayer-icon-volume-high,.ezplayer-icon-volume svg .ezplayer-icon-volume-low,.ezplayer-icon-volume svg .ezplayer-icon-volume-muted{display:none}.ezplayer-icon-volume.ezplayer-icon-volume-high svg .ezplayer-icon-volume-high,.ezplayer-icon-volume.ezplayer-icon-volume-high svg .ezplayer-icon-volume-low,.ezplayer-icon-volume.ezplayer-icon-volume-low svg .ezplayer-icon-volume-low,.ezplayer-icon-volume.ezplayer-icon-volume-muted svg .ezplayer-icon-volume-muted,.ezplayer-icon-volume.ezplayer-icon-volume-zero svg .ezplayer-icon-volume-muted{display:inline}.ezplayer-volume-progress{height:126px}.ezplayer-control-rec{box-sizing:border-box;display:inline-flex;flex-direction:row}.ezplayer-control-rec .ezplayer-icon-cloud-rec,.ezplayer-control-rec .ezplayer-icon-cloud-record,.ezplayer-control-rec .ezplayer-icon-sdk{color:#d4d7dd;cursor:pointer;margin-left:5px}.ezplayer-mobile-extend .ezplayer-control-rec{background-color:#f4f6fc;border:1px solid #ededed;border-radius:18px;height:30px}.ezplayer-mobile-extend .ezplayer-icon-cloud-rec,.ezplayer-mobile-extend .ezplayer-icon-cloud-record,.ezplayer-mobile-extend .ezplayer-icon-sdk{cursor:pointer;font-size:20px;margin-left:1px;padding:2px 7px}.ezplayer-mobile-extend .ezplayer-icon-cloud-rec.ezplayer-active,.ezplayer-mobile-extend .ezplayer-icon-cloud-record.ezplayer-active,.ezplayer-mobile-extend .ezplayer-icon-sdk.ezplayer-active{background-color:#fff;border-radius:12px;box-shadow:0 1px 4px 0 hsla(0,0%,68%,.2)}.ezplayer-mobile .ezplayer-icon-cloud-rec,.ezplayer-mobile .ezplayer-icon-cloud-record,.ezplayer-mobile .ezplayer-icon-sdk{margin-left:10px}.ezplayer-more-panel{align-items:center;background-color:var(--ezplayer-panel-bg-color,rgba(0,0,0,.7));border-radius:var(--ezplayer-border-radius,8px);cursor:default;display:flex;flex-direction:row;padding:8px 10px}.ezplayer-more .ezplayer-control{margin-left:var(--ezplayer-control-space,16px)}.ezplayer-more .ezplayer-control:first-child{margin-left:0}.ezplayer-medium-height .ezplayer-zoom-panel,.ezplayer-mini-height .ezplayer-zoom-panel{height:100%;padding-bottom:var(--ezplayer-footer-height,80px);padding-top:0}.ezplayer-mini-height .ezplayer-zoom-panel{padding-bottom:calc(var(--ezplayer-footer-height, 80px) - 20px)}.ezplayer-mini-height .ezplayer-progress-slider{display:none!important}.ezplayer-mini-height .ezplayer-progress-plus{padding-bottom:0}.ezplayer-mini-height .ezplayer-progress-minus{padding-top:0}.ezplayer-zoom-panel{bottom:0;display:inline-flex;flex-direction:column;height:100%;justify-content:flex-end;left:20px;padding-bottom:calc(var(--ezplayer-footer-height, 80px) + 20px);padding-top:10%;pointer-events:none;position:absolute;top:0;z-index:23}.ezplayer-zoom-panel .ezplayer-progress{height:200px;max-height:95%;pointer-events:auto}.ezplayer-mobile .ezplayer-zoom-panel{padding-bottom:calc(var(--ezplayer-mobile-footer-height, 54px) + 10px);padding-top:5%}.ezplayer-mobile.ezplayer-fullscreen .ezplayer-zoom-panel{padding-bottom:var(--ezplayer-mobile-fullscreen-footer-height,110px);padding-top:var(--ezplayer-mobile-fullscreen-header-height,75px)}.ezplayer-icon-talk-growth-dot1,.ezplayer-icon-talk-growth-dot2,.ezplayer-icon-talk-growth-dot3,.ezplayer-icon-talk-growth-dot4{color:var(--ezplayer-default-color,#fff)}.ezplayer-control-talk.ezplayer-active.ezplayer-talk-gain-deafening .ezplayer-icon-talk-growth-dot1,.ezplayer-control-talk.ezplayer-active.ezplayer-talk-gain-deafening .ezplayer-icon-talk-growth-dot2,.ezplayer-control-talk.ezplayer-active.ezplayer-talk-gain-deafening .ezplayer-icon-talk-growth-dot3,.ezplayer-control-talk.ezplayer-active.ezplayer-talk-gain-deafening .ezplayer-icon-talk-growth-dot4,.ezplayer-control-talk.ezplayer-active.ezplayer-talk-gain-high .ezplayer-icon-talk-growth-dot2,.ezplayer-control-talk.ezplayer-active.ezplayer-talk-gain-high .ezplayer-icon-talk-growth-dot3,.ezplayer-control-talk.ezplayer-active.ezplayer-talk-gain-high .ezplayer-icon-talk-growth-dot4,.ezplayer-control-talk.ezplayer-active.ezplayer-talk-gain-low .ezplayer-icon-talk-growth-dot4,.ezplayer-control-talk.ezplayer-active.ezplayer-talk-gain-normal .ezplayer-icon-talk-growth-dot3,.ezplayer-control-talk.ezplayer-active.ezplayer-talk-gain-normal .ezplayer-icon-talk-growth-dot4{color:var(--ezplayer-active-color,#407aff)}.ezplayer-record-timer{align-items:center;background-color:#ff4c5c;border-radius:24px;color:#fff;display:inline-flex;flex-direction:row;left:50%;padding:2px 6px;position:absolute;top:60px;transform:translateX(-50%);-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:3}.ezplayer-record-timer .ezplayer-icon-record-circle{font-size:14px}.ezplayer-record-timer-time{font-weight:400;letter-spacing:1px;line-height:20px;margin-left:2px}.ezplayer-select-definition .ezplayer-select-panel{width:100px}.ezplayer-control-definition .ezplayer-select-btn{width:75px}.ezplayer-control-device{width:100%}.ezplayer-control-device span{display:inline;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ezplayer-pause{bottom:0;color:#fff!important;cursor:pointer!important;height:100%;left:0;overflow:hidden;position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;z-index:3}.ezplayer-pause-circle{align-items:center;background-color:rgba(0,0,0,.4);border-radius:50%;cursor:pointer;display:flex;font-size:20px;height:50px;justify-content:center;transition:transform .3s ease,opacity 1s ease;width:50px}.ezplayer-pause-circle:hover{opacity:.85}.ezplayer-pause-circle .ezplayer-icon-pause,.ezplayer-pause-circle .ezplayer-icon-play{font-size:32px}.ezplayer-pause-transform .ezplayer-pause-circle{opacity:0;transform:scale(1.1)}.ez-ptz-container{background:hsla(0,0%,100%,.8);border:1px solid hsla(0,0%,100%,.8);border-radius:100%;box-shadow:0 0 33px 4px rgba(0,0,0,.15);cursor:pointer;font-size:14px;height:80px;overflow:hidden;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:80px}.ez-ptz-icon{display:inline-block;height:0;position:absolute;width:0}.ez-ptz-icon.ez-ptz-icon-icon-active{border-bottom-color:#407aff}.ez-ptz-direction-top{border-bottom:8px solid #999;top:2px}.ez-ptz-direction-bottom,.ez-ptz-direction-top{border-left:4px solid transparent;border-right:4px solid transparent;left:calc(50% - 4px)}.ez-ptz-direction-bottom{border-top:8px solid #999;bottom:2px}.ez-ptz-direction-right{border-left:8px solid #999;right:2px}.ez-ptz-direction-left,.ez-ptz-direction-right{border-bottom:4px solid transparent;border-top:4px solid transparent;top:calc(50% - 4px)}.ez-ptz-direction-left{border-right:8px solid #999;left:2px}.ez-ptz-direction-top-left{top:calc(25% - 4px)}.ez-ptz-direction-left-bottom,.ez-ptz-direction-top-left{background:#999;border-radius:50%;height:4px;left:16px;width:4px}.ez-ptz-direction-bottom-right,.ez-ptz-direction-left-bottom{bottom:calc(25% - 4px)}.ez-ptz-direction-bottom-right,.ez-ptz-direction-right-top{background:#999;border-radius:50%;height:4px;right:16px;width:4px}.ez-ptz-direction-right-top{top:calc(25% - 4px)}.ez-ptz-direction-center{background:#407aff;border-radius:100%;height:23px;left:calc(50% - 12.4px);position:absolute;top:calc(50% - 12.4px);width:23px}.ez-ptz-container-wrap{align-items:center;box-sizing:content-box!important;display:flex;flex-direction:column;justify-content:center;width:100%}.ez-ptz-speed-container{width:100%}.ez-ptz-speed-progress-line{background:#fff;display:flex;height:1px;justify-content:space-between;margin:16px 0 8px}.ez-ptz-speed-progress-line-dot{background:#fff;border:2px solid #fff;border-radius:50%;cursor:pointer;height:9px;margin:-3px 0;width:9px}.ez-ptz-speed-progress-line-dot.ez-ptz-speed-active{border-color:#407aff}.ez-ptz-speed-progress-points{display:flex;justify-content:space-between}.ez-ptz-speed-progress-points-fast,.ez-ptz-speed-progress-points-mid,.ez-ptz-speed-progress-points-slow{color:#fff;cursor:pointer}.ez-ptz-btn-container{display:flex;justify-content:space-between;margin-top:14px;width:100%}.ez-ptz-btn-focal,.ez-ptz-btn-zoom{border:1px solid hsla(0,0%,100%,.5);border-radius:10px;box-sizing:content-box;display:flex;height:20px;padding-bottom:0}.ez-ptz-btn-focal-add,.ez-ptz-btn-focal-sub,.ez-ptz-btn-zoom-add,.ez-ptz-btn-zoom-sub{cursor:pointer;height:20px;text-align:center}.ez-ptz-btn-focal-add,.ez-ptz-btn-zoom-add{border-right:1px solid hsla(0,0%,100%,.5)}.ez-mobile-ptz{box-sizing:border-box}.ez-mobile-ptz-content{align-items:center;display:flex;justify-content:center}.ez-mobile-ptz-wrap{background-image:linear-gradient(180deg,#f6f8ff,hsla(0,0%,93%,.42) 50%);border-radius:100%;box-sizing:border-box;display:inline-block;overflow:hidden;padding:24px}.ez-mobile-ptz-container{background:hsla(0,0%,100%,.8);border:1px solid hsla(0,0%,100%,.8);border-radius:100%;box-sizing:border-box;cursor:pointer;height:260px;margin:auto;overflow:hidden;position:relative;width:260px}.ez-mobile-ptz-center{background:#fff;border:2px solid #eee;border-radius:100%;cursor:pointer;height:52px;left:calc(50% - 26px);position:absolute;top:calc(50% - 26px);width:52px}.ez-mobile-ptz-top{border-bottom:6px solid #aaa;border-left:6px solid transparent;border-right:6px solid transparent;cursor:pointer;display:inline-block;height:0;left:calc(50% - 6px);position:absolute;top:10px;width:0}.ez-mobile-ptz-top.ez-mobile-ptz-active{border-bottom-color:#1890ff}.ez-mobile-ptz-left{border-bottom:6px solid transparent;border-right:6px solid #aaa;border-top:6px solid transparent;cursor:pointer;display:inline-block;height:0;left:10px;position:absolute;top:calc(50% - 6px);width:0}.ez-mobile-ptz-left.ez-mobile-ptz-active{border-right-color:#1890ff}.ez-mobile-ptz-bottom{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #aaa;bottom:10px;display:inline-block;height:0;left:calc(50% - 6px);position:absolute;width:0}.ez-mobile-ptz-bottom.ez-mobile-ptz-active{border-top-color:#1890ff}.ez-mobile-ptz-right{border-bottom:6px solid transparent;border-left:6px solid #aaa;border-top:6px solid transparent;display:inline-block;height:0;position:absolute;right:10px;top:calc(50% - 6px);width:0}.ez-mobile-ptz-right.ez-mobile-ptz-active{border-left-color:#1890ff}.ezplayer-medium-height .ezplayer-ptz-panel,.ezplayer-mini-height .ezplayer-ptz-panel{padding-bottom:0;padding-top:0;right:0;z-index:22}.ezplayer-medium-height .ezplayer-ptz-panel .ezplayer-ptz-turntable,.ezplayer-mini-height .ezplayer-ptz-panel .ezplayer-ptz-turntable{border-bottom-right-radius:0;border-top-right-radius:0;max-height:none}.ezplayer-mini-height .ez-ptz-btn-container,.ezplayer-mini-height .ez-ptz-speed-container{display:none!important}.ezplayer-ptz-panel{box-sizing:border-box;flex-direction:column;max-width:70%;padding-bottom:var(--ezplayer-footer-height,80px);padding-top:var(--ezplayer-header-height,46px);pointer-events:none;position:absolute;right:10px;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:150px;z-index:3}.ezplayer-ptz-panel,.ezplayer-ptz-panel .ezplayer-ptz-turntable{align-items:center;display:flex;height:100%;justify-content:center}.ezplayer-ptz-panel .ezplayer-ptz-turntable{background-color:var(--ezplayer-panel-bg-color,rgba(0,0,0,.7));border-radius:var(--ezplayer-border-radius,8px);flex:1 1 auto;max-height:283px;padding:20px;pointer-events:auto;width:100%}.ezplayer-mobile .ezplayer-control-ptz,.ezplayer-mobile .ezplayer-ptz-panel{display:none}.ezplayer-mobile.ezplayer-fullscreen .ezplayer-control-ptz,.ezplayer-mobile.ezplayer-fullscreen .ezplayer-ptz-panel{display:inline-flex}.ezplayer-mobile.ezplayer-fullscreen .ezplayer-ptz-panel{padding-bottom:calc(var(--ezplayer-mobile-fullscreen-footer-height, 110px) - 20px);padding-top:var(--ezplayer-mobile-fullscreen-header-height,75px)}.ezplayer-mobile.ezplayer-fullscreen.ezplayer-medium-height .ezplayer-ptz-panel,.ezplayer-mobile.ezplayer-fullscreen.ezplayer-mini-height .ezplayer-ptz-panel{padding-bottom:0;padding-top:0}.ezplayer-mobile-extend .ezplayer-mobile-date-filter{align-items:center;background:#f4f6fc;border:1px solid #ededed;border-radius:8px;box-sizing:border-box;color:#2c2c2c;display:inline-flex;font-family:PingFang SC;font-size:16px;font-weight:500;height:36px;justify-content:center;letter-spacing:0;line-height:20px;padding:6px 10px}.ezplayer-mobile-extend .ezplayer-mobile-date-filter-value{margin-right:5px}.ezplayer-mobile-extend .ezplayer-icon-filter{font-size:20px}.ezplayer-control-time-line{overflow:hidden;padding-right:40px;position:relative}.ezplayer-control-time-line .ezplayer-time-line-scale-add,.ezplayer-control-time-line .ezplayer-time-line-scale-sub{align-items:center;background-color:#333;border-radius:2px;color:var(--ezplayer-default-color,#fff);cursor:pointer;display:inline-flex;height:14px;justify-content:center;overflow:hidden;position:absolute;right:0;transition:color .3s ease;width:14px}.ezplayer-control-time-line .ezplayer-icon-add,.ezplayer-control-time-line .ezplayer-icon-reduce{font-size:12px;font-weight:500}.ezplayer-control-time-line .ezplayer-icon-add:hover,.ezplayer-control-time-line .ezplayer-icon-reduce:hover{color:var(--ezplayer-primary-color,#407aff)}.ezplayer-control-time-line .ezplayer-time-line-scale-add{top:2px}.ezplayer-control-time-line .ezplayer-time-line-scale-sub{bottom:2px}.ezplayer-mobile-extend .ezplayer-control-time-line{display:block;height:300px;margin-top:10px;padding-right:0}');var d,u={exports:{}};var p,h,m=(d||(d=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new r(i,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,a=new Array(o);r<o;r++)a[r]=i[r].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},s.prototype.emit=function(e,t,i,r,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,d=this._events[s],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,r),!0;case 5:return d.fn.call(d.context,t,i,r,o),!0;case 6:return d.fn.call(d.context,t,i,r,o,a),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var p,h=d.length;for(c=0;c<h;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,i);break;case 4:d[c].fn.call(d[c].context,t,i,r);break;default:if(!l)for(p=1,l=new Array(u-1);p<u;p++)l[p-1]=arguments[p];d[c].fn.apply(d[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||r&&!s.once||i&&s.context!==i||a(this,o);else{for(var l=0,c=[],d=s.length;l<d;l++)(s[l].fn!==t||r&&!s[l].once||i&&s[l].context!==i)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(u)),u.exports),A=c(m);function f(){if(h)return p;function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function t(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}(t))||n){i&&(t=i);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}h=1;var n=function(){function e(){this.pickers=[]}var n=e.prototype;return n.add=function(e){this.pickers.push(e)},n.remove=function(e){var t=this.pickers.indexOf(e);t>-1?this.pickers.splice(t,1):console.warn("Picker not found in the provider.")},n.closeOther=function(e){for(var n,i=t(this.pickers);!(n=i()).done;){var r,o,a,s,l=n.value;!l||e.target===l.$container||(null==(o=l.$container)||null==(r=o.contains)?void 0:r.call(o,e.target))||e.target===l.$wrapperContent||(null==(s=l.$wrapperContent)||null==(a=s.contains)?void 0:a.call(s,e.target))||(l.open=!1)}},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e}(),i=n.getInstance();function r(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}var o=["top","tl","tr","bottom","bl","br"],a="epicker",s={getPopupContainer:function(){return document.body},wrapClassName:"",open:!1,placement:"br",offset:[0,0],zIndex:1e3,content:"",trigger:"click",mouseLeaveDelay:.1,mouseEnterDelay:.1,isMobile:!1},l=function(){function e(e,t){var n,r;this._open=!1,this._OpenChange=!1,this._animationTimer=null,this._disabled=!1,this._timer=null,this._options=Object.assign({},s,t||{}),this._options.isMobile&&(this._options.trigger="click"),i.add(this),this.$container="function"==typeof e?e():e,this.$wrapperContent=document.createElement("div"),this._initContentStyle(),"function"==typeof this._options.getPopupContainer?this._$popupContainer=this._options.getPopupContainer():this._$popupContainer=document.body,["INPUT","CANVAS","VIDEO","IMG"].includes(null==(n=this._$popupContainer)?void 0:n.tagName)&&(console.warn("popup container node does not support child elements, default body!"),this._$popupContainer=document.body),this._$popupContainer!==document.body&&(this._$popupContainer.style.position="relative"),null==(r=this._$popupContainer)||r.appendChild(this.$wrapperContent),this._onContentClick=this._onContentClick.bind(this),this._onShow=this._onShow.bind(this),this._onWrapperShow=this._onWrapperShow.bind(this),this._onHide=this._onHide.bind(this),this._onDocumentClick=this._onDocumentClick.bind(this),this._eventListener(),this.open=!!this._options.open}var t=e.prototype;return t.setPlacement=function(e){this._disabled||(o.includes(e)?this._options.placement=e:console.warn(e+" is not a valid placement"),this._setPlacement())},t.destroy=function(){this._animationTimerClear(),this._removeHtml(),i.remove(this)},t.innerHTML=function(e){this.$body&&(this.$body.innerHTML=e||"",this._setPlacement())},t._onOpenChange=function(e){null==this._options.onOpenChange||this._options.onOpenChange.call(this._options,!!e)},t._animationTimerClear=function(){this._animationTimer&&(clearTimeout(this._animationTimer),this._animationTimer=null)},t._removeHtml=function(){var e,t,n,i,r,o,s,l,c,d,u,p,h;(null==(e=this.$wrapperContent)||e.removeEventListener("click",this._onContentClick),null==(n=this.$container)||null==(t=n.removeEventListener)||t.call(n,"click",this._onContentClick),"click"===this._options.trigger&&(null==(r=this.$container)||null==(i=r.removeEventListener)||i.call(r,"click",this._onShow)),"hover"===this._options.trigger)&&(null==(s=this.$container)||null==(o=s.removeEventListener)||o.call(s,"mouseenter",this._onShow),null==(c=this.$container)||null==(l=c.removeEventListener)||l.call(c,"mouseover",this._onShow),null==(u=this.$container)||null==(d=u.removeEventListener)||d.call(u,"mouseleave",this._onHide),null==(p=this.$wrapperContent)||p.removeEventListener("mouseenter",this._onWrapperShow),null==(h=this.$wrapperContent)||h.removeEventListener("mouseleave",this._onHide));this._options.isMobile||(window.removeEventListener("blur",this._onHide),document.removeEventListener("visibilitychange",this._onHide),window.removeEventListener("resize",this._onHide),document.removeEventListener("click",this._onDocumentClick)),this._$mask&&(this._$mask.removeEventListener("click",this._onHide),this._$mask.remove(),this._$mask=null),this._options.isMobile&&document.body.classList.remove(a+"-body-noscroll"),this.$wrapperContent&&(this.$wrapperContent.remove(),this.$wrapperContent=null)},t._setPlacement=function(){var e,t;if(this._open&&!this._options.isMobile&&this.$container){var n,i=null==(t=this.$container)||null==(e=t.getBoundingClientRect)?void 0:e.call(t),r=this.$wrapperContent.getBoundingClientRect(),o=this._$popupContainer.getBoundingClientRect(),a=i.left-o.left,s=-(i.right-o.right),l=i.y-o.y,c=a+(i.width-r.width)/2,d=l-r.height,u=l+i.height;if(/^t/.test(this._options.placement)){var p,h,m;switch(this._options.placement){case"top":n=void 0;break;case"tl":n=void 0,c=a;break;case"tr":c=void 0,n=s}this.$wrapperContent.style.cssText+="\n        "+(void 0!==n?"right: "+(n+((null==(p=this._options.offset)?void 0:p[0])||0))+"px;":"")+"\n        "+(void 0!==c?"left: "+(c+((null==(h=this._options.offset)?void 0:h[0])||0))+"px;":"")+"\n        top: "+(d+((null==(m=this._options.offset)?void 0:m[1])||0))+"px;\n        z-index:"+this._options.zIndex+";\n      "}else if(/^b/.test(this._options.placement)){var A,f,v;switch(this._options.placement){case"bottom":n=void 0;break;case"bl":n=void 0,c=a;break;case"br":c=void 0,n=s}this.$wrapperContent&&(this.$wrapperContent.style.cssText+="\n          "+(void 0!==n?"right: "+(n+((null==(A=this._options.offset)?void 0:A[0])||0))+"px;":"")+"\n          "+(void 0!==c?"left: "+(c+((null==(f=this._options.offset)?void 0:f[0])||0))+"px;":"")+"\n          top: "+(u+((null==(v=this._options.offset)?void 0:v[1])||0))+"px;\n          z-index:"+this._options.zIndex+";\n        ")}}},t._initContentStyle=function(){if(this.$wrapperContent&&(this.$wrapperContent.classList.add(""+a,a+"-wrapper",a+"-"+this._options.placement),this.$wrapperContent.style.display="none",this._options.isMobile&&(this.$wrapperContent.classList.add(a+"-mobile"),this._$mask=document.createElement("div"),this._$mask.classList.add(a+"-mask"),this.$wrapperContent.appendChild(this._$mask)),this.$body=document.createElement("div"),this.$body.classList.add(a+"-body"),this.$wrapperContent.appendChild(this.$body),"string"==typeof this._options.content?this.innerHTML(this._options.content):"function"==typeof this._options.content&&this.innerHTML(null==this._options.content?void 0:this._options.content.call(this._options)),"string"==typeof this._options.wrapClassName))try{var e,t;null==(t=this.$wrapperContent)||(e=t.classList).add.apply(e,[].concat(this._options.wrapClassName.split(" ")))}catch(e){}},t._eventListener=function(){var e,t,n,i,r,o,a,s,l,c;(this.$wrapperContent.addEventListener("click",this._onContentClick),null==(t=this.$container)||null==(e=t.addEventListener)||e.call(t,"click",this._onContentClick),"click"===this._options.trigger&&(null==(i=this.$container)||null==(n=i.addEventListener)||n.call(i,"click",this._onShow)),"hover"===this._options.trigger)&&(null==(o=this.$container)||null==(r=o.addEventListener)||r.call(o,"mouseenter",this._onShow),null==(s=this.$container)||null==(a=s.addEventListener)||a.call(s,"mouseover",this._onShow),null==(c=this.$container)||null==(l=c.addEventListener)||l.call(c,"mouseleave",this._onHide),this.$wrapperContent.addEventListener("mouseenter",this._onWrapperShow),this.$wrapperContent.addEventListener("mouseleave",this._onHide));this._$mask&&this._$mask.addEventListener("click",this._onHide),this._options.isMobile||(window.addEventListener("blur",this._onHide),document.addEventListener("visibilitychange",this._onHide),window.addEventListener("resize",this._onHide),document.addEventListener("click",this._onDocumentClick))},t._onContentClick=function(e){i.closeOther(e)},t._onShow=function(){this._disabled||(this.open=!0)},t._onWrapperShow=function(){this._disabled||this._onShow()},t._onHide=function(e){this._open&&!this._disabled&&((null==e?void 0:e.target)===this._$mask&&(null==e||e.stopPropagation()),this.open=!1)},t._onDocumentClick=function(e){var t;if(!this.$wrapperContent.contains(e.target)&&this.$wrapperContent!==e.target&&!(null==(t=this.$container)?void 0:t.contains(e.target))&&this.$container!==e.target){if(this._disabled)return;this._onHide()}},r(e,[{key:"open",get:function(){return this._open},set:function(e){var t=this;this._disabled||this._open!==!!e&&(this._animationTimerClear(),this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=e?setTimeout((function(){t.$wrapperContent&&(t.$wrapperContent.style.display="inline-flex",t.$wrapperContent.style.pointerEvents="",t._options.isMobile&&document.body.classList.add(a+"-body-noscroll"),t._animationTimer=setTimeout((function(){t._animationTimerClear(),t.$wrapperContent.style.opacity="1"}),0),requestAnimationFrame((function(){t._setPlacement()})),t._OpenChange=e,t._onOpenChange(e))}),1e3*(this._options.mouseEnterDelay<0?0:this._options.mouseEnterDelay)):setTimeout((function(){t.$wrapperContent&&(t.$wrapperContent.style.opacity="0",t.$wrapperContent.style.pointerEvents="none",t._options.isMobile&&document.body.classList.remove(a+"-body-noscroll"),t._animationTimer=setTimeout((function(){t._animationTimerClear(),t.$wrapperContent.style.display="none"}),301),t._OpenChange=e,t._onOpenChange(e))}),1e3*(this._options.mouseLeaveDelay<0?0:this._options.mouseLeaveDelay)),this._OpenChange===e&&this._timer&&(clearTimeout(this._timer),this._timer=null),this._open=!!e)}},{key:"disabled",get:function(){return this._disabled},set:function(e){var t,n,i,r,o,s;e?null==(i=this.$container)||null==(n=i.classList)||null==(t=n.add)||t.call(n,a+"-disabled"):null==(s=this.$container)||null==(o=s.classList)||null==(r=o.remove)||r.call(o,a+"-disabled");this._disabled=e}}]),e}();return l.VERSION="1.1.5",p=l}var v,g,y=c(f());function T(){if(g)return v;g=1;if("undefined"!=typeof Element&&!Element.prototype.matches){const e=Element.prototype;e.matches=(null==e?void 0:e.matchesSelector)||(null==e?void 0:e.mozMatchesSelector)||(null==e?void 0:e.msMatchesSelector)||(null==e?void 0:e.oMatchesSelector)||(null==e?void 0:e.webkitMatchesSelector)}var e="function"==typeof Element.prototype.closest?function(e,t){return e&&e.closest(t)}:function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}return null};function t(e,t,i,r,o){const a=n.apply(this,arguments);return e.addEventListener(i,a,o),{destroy:function(){e.removeEventListener(i,a,o)}}}function n(t,n,i,r){return function(i){i.delegateTarget=e(i.target,n),i.delegateTarget&&r.call(t,i)}}return v=function(e,n,i,r,o){return"function"==typeof e.addEventListener?t.apply(null,arguments):"function"==typeof i?t.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return t(e,n,i,r,o)})))},v}var _,b,C,S=c(T()),E={};function w(){if(b)return _;function e(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}b=1;var t={content:"",width:"100%",height:"400px",readonly:!1,hideScrollbar:!1},n="drag-scroll";return _=function(){function i(e,i){if(void 0===i&&(i={}),this._indicatorTimeout=null,this._$scrollbar=null,this._$scrollbarThumb=null,this._readonly=!1,!e)throw new Error("container is required");if(["VIDEO","CANVAS","IMG","TEXTAREA","INPUT"].includes(e.tagName))throw new Error("container cannot be 'VIDEO', 'CANVAS', 'IMG', 'TEXTAREA', 'INPUT' element");this.$container=e,this.options=Object.assign({},t,i),this.$container.classList.add(n,n+"-container"),this.$content=document.createElement("div"),this.$content.classList.add(n+"-content"),this.innerHtml(this.options.content),this.$container.appendChild(this.$content),this.isDragging=!1,this._startY=0,this.currentY=0,this.velocity=0,this._animationId=null,this._lastTimestamp=0,this._spring=.25,this._friction=.92,this._bounceDamping=.6,this._maxVelocity=30,this.options.hideScrollbar||this._renderScrollbar(),this._onMouseDown=this._onMouseDown.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this.readonly=this.options.readonly,this._init()}var r=i.prototype;return r.resize=function(e,t){var n="";/^\d+(\.\d+)?$/.test(e+"")?n="width: "+e+"px;":"string"==typeof e&&(n="width: "+e+";"),/^\d+(\.\d+)?$/.test(t+"")?n+="height: "+t+"px;":"string"==typeof t&&(n+="height: "+t+";"),this.$container.style.cssText+=n,this._applyTransform()},r.innerHtml=function(e){this.$content.innerHTML="function"==typeof e?e():e,this._applyTransform()},r.scrollToY=function(e,t){void 0===t&&(t=!0);var n=this.$content.scrollHeight-this.$container.clientHeight;e<0||e>n||(this.currentY=e,this.velocity=0,this._applyTransform(),t&&this._updateState())},r.destroy=function(){var e,t,n;this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=null),this._indicatorTimeout&&(clearTimeout(this._indicatorTimeout),this._indicatorTimeout=null),this.$container&&(this.$container.style.cursor="default"),null==(e=this._$scrollbarThumb)||e.remove(),this._$scrollbarThumb=null,null==(t=this._$scrollbar)||t.remove(),this._$scrollbar=null,null==(n=this.$content)||n.remove(),this.$content=null,this._removeEventListeners()},r._renderScrollbar=function(){this._$scrollbar=document.createElement("div"),this._$scrollbar.className=n+"-scrollbar",this._$scrollbarThumb=document.createElement("div"),this._$scrollbarThumb.className=n+"-scrollbar-thumb",this._$scrollbar.appendChild(this._$scrollbarThumb),this.$container.appendChild(this._$scrollbar)},r._init=function(){this.resize(this.options.width,this.options.height),this._addEventListeners(),this._updateScrollbar(),this._animationId=requestAnimationFrame(this._animate.bind(this))},r._addEventListeners=function(){this.$container.addEventListener("pointerdown",this._onMouseDown),document.addEventListener("pointermove",this._onMouseMove),document.addEventListener("pointerup",this._onMouseUp),document.addEventListener("pointercancel",this._onMouseUp)},r._removeEventListeners=function(){this.$container.removeEventListener("touchmove",this._onTouchMove),this.$container.removeEventListener("pointerdown",this._onMouseDown),document.removeEventListener("pointermove",this._onMouseMove),document.removeEventListener("pointerup",this._onMouseUp),document.removeEventListener("pointercancel",this._onMouseUp)},r._onMouseDown=function(e){this.canDrag&&(this._startDrag(e.clientY),null==this.options.onDragStart||this.options.onDragStart.call(this.options,e))},r._onTouchMove=function(e){e.preventDefault()},r._startDrag=function(e){var t,i;this.canDrag&&(this.isDragging=!0,this._startY=e,this.velocity=0,null==(i=this._$scrollbar)||null==(t=i.classList)||t.add(n+"-show"),this.$container.style.cursor="grabbing")},r._onMouseMove=function(e){this.canDrag&&this.isDragging&&(this._drag(e.clientY),null==this.options.onDragging||this.options.onDragging.call(this.options,0,this.currentY))},r._drag=function(e){if(this.canDrag){var t=this._startY-e;this._startY=e,this.currentY+=t,this.velocity=t,this.velocity=Math.max(Math.min(this.velocity,this._maxVelocity),-this._maxVelocity),this._applyTransform(),this._updateState()}},r._onMouseUp=function(e){this.canDrag&&this.isDragging&&(this.isDragging=!1,this._endDrag(),null==this.options.onDragEnd||this.options.onDragEnd.call(this.options,e))},r._endDrag=function(){var e=this;this.$container.style.cursor="grab",setTimeout((function(){var t;e.isDragging||null==(t=e._$scrollbar)||t.classList.remove(n+"-show")}),1500)},r._applyTransform=function(){if(this.$content.offsetHeight<=this.$container.clientHeight)this.$content.style.transform="translate3d(0, 0, 0)";else{var e=this.$content.scrollHeight-this.$container.clientHeight;this.currentY<0?(this.currentY=0,this.velocity*=this._bounceDamping):this.currentY>e&&(this.currentY=e,this.velocity*=this._bounceDamping),this.$content.style.transform="translate3d(0, "+-this.currentY+"px, 0)",this._updateScrollbar()}},r._animate=function(e){if(void 0===e&&(e=0),this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=null),!(this.$content.offsetHeight<=this.$container.clientHeight)){this._lastTimestamp||(this._lastTimestamp=e);var t=Math.min(e-this._lastTimestamp,100)/16;if(this._lastTimestamp=e,!this.isDragging){this.velocity*=this._friction,this.currentY+=this.velocity;var n=this.$content.scrollHeight-this.$container.clientHeight;this.currentY<0?this.velocity-=this.currentY*this._spring*t:this.currentY>n&&(this.velocity-=(this.currentY-n)*this._spring*t),this._applyTransform(),this._updateState(),Math.abs(this.velocity)<.1&&this.currentY>=0&&this.currentY<=n&&(this.velocity=0)}}},r._updateScrollbar=function(){var e=this.$container.clientHeight,t=this.$content.scrollHeight,n=t-e;if(n<=0)this._$scrollbarThumb&&(this._$scrollbarThumb.style.height="0");else{var i=Math.max(e/t*e,20),r=this.currentY/n*(e-i);this._$scrollbarThumb&&(this._$scrollbarThumb.style.height=i+"px",this._$scrollbarThumb.style.transform="translateY("+r+"px)")}},r._updateState=function(){null==this.options.onChange||this.options.onChange.call(this.options,{x:0,y:this.currentY,velocity:+this.velocity.toFixed(1)})},e(i,[{key:"width",get:function(){return this.$container.clientWidth}},{key:"height",get:function(){return this.$container.clientHeight}},{key:"readonly",get:function(){return this._readonly},set:function(e){this._readonly!==e&&(this.$container.style.cursor=e?"not-allowed":"grab",this._readonly=e),this.$container.removeEventListener("touchmove",this._onTouchMove),e||this.$container.addEventListener("touchmove",this._onTouchMove,{passive:!1})}},{key:"canDrag",get:function(){var e=this.$content.offsetHeight;return!this.readonly&&e>this.$container.clientHeight}}]),i}()}
/*
* @ezuikit/control-time-line v1.0.2
* Copyright (c) 2025-11-16 Ezviz-OpenBiz
* Released under the MIT License.
*/var k=function(){if(C)return E;C=1;var t=e,n=i,r=f(),o=w(),a=T(),s={zh:{title:"{{len}}",foldTitle:"{{len}}"},en:{title:"Includes {{len}} {{unit}}",foldTitle:"{{len}} {{unit}}"}},l={current:new Date,language:"zh",timeSections:[],readOnly:!1,className:"",timeWidth:0,width:"100%",timePointColor:"#1890ff",timeTextColor:"#FFF",timeScaleColor:"#FFF",timeSectionColor:"rgba(24, 144, 255, 0.5)",timeAxisBgColor:"#000",onChange:function(){},onDragStart:function(){},onDragging:function(){},onDragEnd:function(){},onDestroy:function(){}},c=function(){function e(e,i){if(this._current=new Date,this._readOnly=!1,this._width=0,this._height=0,this._destroyed=!1,this._timeWidth=0,this._timeSections=[],this.$container=e,!e)throw new Error("container is required");var r,o;this.options=t(l,i,{clone:!1}),this.options.timeSections&&Array.isArray(this.options.timeSections)&&(this._timeSections=this.options.timeSections),this.options.readOnly&&(this.readOnly=this.options.readOnly),this.options.className&&this.$container.classList.add(this.options.className),this.$container.style.position="relative",this.options.current&&(r=this.options.current,null!=(o=Date)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](r):r instanceof o)?this._current=this.options.current||new Date:this._current=new Date,this.i18n=new n(t(s,this.options.locales||{},{clone:!1}),{defaultLocale:this.options.language||"zh"}),this._timeWidth=this.options.timeWidth||0,this._resize(this.options.width||"100%",this.options.height)}var i,r,o=e.prototype;return o.setReadOnly=function(e){this.readOnly=e},o.update=function(e){this._current=e},o.updateTimeSections=function(e){e&&Array.isArray(e)&&(this._timeSections=e)},o.resize=function(e,t){this._resize(e,t)},o._resize=function(e,t){var n="";/^\d+(\.\d+)?$/.test(e+"")?n+="width: "+e+"px;":e&&(n+="width: "+e+";"),/^\d+(\.\d+)?$/.test(t+"")?n+="height: "+t+"px;":t&&(n+="height: "+t+";"),this.$container&&(this.$container.style.cssText+=n),this._width=Math.floor(this.$container.clientWidth),this._height=Math.floor(this.$container.clientHeight)},o.setTimeWidth=function(e){[0,1,2,3,4,5].includes(e)&&(this._timeWidth=e)},o.destroy=function(){this._current=null,null==this.options.onDestroy||this.options.onDestroy.call(this.options),this._timeSections=[],this._readOnly=!1,this._destroyed=!0},i=e,(r=[{key:"current",get:function(){return this._current},set:function(e){this._current=e}},{key:"readOnly",get:function(){return this._readOnly},set:function(e){this._readOnly!==e&&(this._readOnly=e,this.$container.style.cursor=e?"not-allowed":"pointer")}},{key:"timeSections",get:function(){return this._timeSections}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"timeWidth",get:function(){return this._timeWidth}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,r),e}();c.LOCALES=s;var d=function(){function e(){}return e.toDate=function(e){var t,n,i=null;return"string"==typeof e&&e.includes(":")?i=new Date(e):"string"!=typeof e&&"number"!=typeof e||!/\d/.test(e+"")||10!==(e+"").length?"string"!=typeof e&&"number"!=typeof e||!/\d/.test(e+"")||13!==(e+"").length?(t=e,i=(null!=(n=Date)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)?e:new Date):i=new Date(+e):i=new Date(1e3*+e),i},e.formatDateToHHmmss=function(t){var n=e.toDate(t);if(n){var i=n.getHours(),r=n.getMinutes(),o=n.getSeconds();return(i>9?i:"0"+i)+":"+(r>9?r:"0"+r)+":"+(o>9?o:"0"+o)}return"00:00:00"},e.subTime=function(e){return+e>9?e+"":"0"+e},e.tranTime=function(t,n){void 0===n&&(n="YYYY-MM-DD HH:mm:ss");var i=e.toDate(t);return i?"YYYY-MM-DD"===n?i.getFullYear()+"-"+e.subTime(i.getMonth()+1)+"-"+e.subTime(i.getDate()):"HH:mm:ss"===n?e.subTime(i.getHours())+":"+e.subTime(i.getMinutes())+":"+e.subTime(i.getSeconds()):"HH"===n?e.subTime(i.getHours()):"mm:ss"===n?e.subTime(i.getMinutes())+":"+e.subTime(i.getSeconds()):"HH:mm"===n?e.subTime(i.getHours())+":"+e.subTime(i.getMinutes()):"YYYYMMDDTHHmmssZ"===n?i.getFullYear()+""+e.subTime(i.getMonth()+1)+e.subTime(i.getDate())+"T"+e.subTime(i.getHours())+e.subTime(i.getMinutes())+e.subTime(i.getSeconds())+"Z":i.getFullYear()+"-"+e.subTime(i.getMonth()+1)+"-"+e.subTime(i.getDate())+" "+e.subTime(i.getHours())+":"+e.subTime(i.getMinutes())+":"+e.subTime(i.getSeconds()):""},e.timeToSecond=function(e){var t=e.split(":");return 60*Number(t[0])*60+60*Number(t[1])+(Number(t[2])||0)},e.minuteToTime=function(e){var t=Math.floor(e/60),n=e%60;return(t>9?t:"0"+t)+":"+(n>9?n:"0"+n)},e.timeToMinute=function(e){var t=e.split(":");return 60*Number(t[0])+Number(t[1])},e.isOverlap=function(e,t,n,i){return Math.max(e,n)<=Math.min(t,i)},e.tranTimeToString=function(t,n){var i,r,o=Math.floor((null==(i=e.toDate(n))?void 0:i.getTime())-(null==(r=e.toDate(t))?void 0:r.getTime()))/1e3,a=o%60,s=Math.floor(o/60);return(s>0?e.subTime(s)+"'":"0'")+e.subTime(a)+"''"},e}(),u=[[1,10,10," 1"],[60,20,5," 1"],[600,20,6," 10"],[3600,30,6," 1"],[14400,40,2," 4"],[43200,80,2," 12"]],p=[[1,10,10," 1"],[10,20,5," 10"],[30,20,6," 30"],[60,30,6," 1"],[120,40,2," 2"],[240,80,2," 4"]];function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h.apply(this,arguments)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}var A=Object.assign({},l,{height:400,width:"100%",timeWidth:0,readOnly:!1,timePointColor:"#648FFC",timeTextColor:"#666666",timeScaleColor:"transparent",timeSectionColor:"#369FFF",timeAxisBgColor:"#BDCDFF",currentTimeBgColor:"#648FFC",currentTimeColor:"#FFFFFF",showTimeWidthBtn:!0}),v=function(e){function n(n,i){var r;return(r=e.call(this,n,t(A,i,{clone:!1}))||this)._isTouchStart=!1,r._dragScroll=null,r._moveStartX=0,r._moveStartY=0,r.state={start:"00:00:00",end:"24:00:00",current:null,timeArr:[],availTimeLine:[],index:0},r._plusClick=r._plusClick.bind(r),r._minusClick=r._minusClick.bind(r),r._onPickerClose=r._onPickerClose.bind(r),r._onClickItem=r._onClickItem.bind(r),r._onClickCoverFold=r._onClickCoverFold.bind(r),r._onImageError=r._onImageError.bind(r),r._render(),r.options.timeSections&&Array.isArray(r.options.timeSections)&&r.updateTimeSections(r.options.timeSections),r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,e);var i,s,l=n.prototype;return l.setReadOnly=function(t){e.prototype.setReadOnly.call(this,t),this._dragScroll&&(this._dragScroll.readonly=t)},l.setTimeWidth=function(t){p[t]&&(e.prototype.setTimeWidth.call(this,t),this._matchTimeDot())},l.updateTimeSections=function(t,n){e.prototype.updateTimeSections.call(this,t);var i=t.map((function(e){return h({},e,{startTime:d.formatDateToHHmmss(e.startTime),endTime:d.formatDateToHHmmss(e.endTime)})}));if(i.length>0){void 0===n&&(n=i.length-1);var r=this.state.current;this._setState({availTimeLine:i,start:i[n].startTime,end:i[n].endTime,current:null===r?i[n].startTime:r}),this._matchTimeDot()}else this._setState({availTimeLine:[],current:d.formatDateToHHmmss(this.current||(new Date).getTime())}),this._matchTimeDot()},l.update=function(e){var t;e&&!(null==(t=this._dragScroll)?void 0:t.isDragging)&&(this._setState({current:d.tranTime(e,"HH:mm:ss")}),this._currentOffsetH())},l.destroy=function(){var t,n,i;if(this._scrollTimer&&(clearInterval(this._scrollTimer),this._scrollTimer=null),this._$currentTime)try{this.$container.removeChild(this._$currentTime),this._$currentTime=null}catch(e){}if(this._$itemList&&this._imageRemoveErrorEvent(this._$itemList.querySelectorAll("img.ez-time-line-img")||[]),this._$itemContainer&&this._$itemList)try{this._$itemContainer.removeChild(this._$itemList),this._$itemList=null}catch(e){}if(this._$itemContainer)try{this.$container.removeChild(this._$itemContainer),this._$itemContainer=null}catch(e){}if(this._$op)try{this.$container.removeChild(this._$op),this._$op=null}catch(e){}this._picker&&(this._imageRemoveErrorEvent((null==(i=this._picker.$body)||null==(n=i.querySelectorAll)?void 0:n.call(i,"img"))||[]),this._picker.destroy(),this._picker=null),this._removeEventListener(),null==(t=this._dragScroll)||t.destroy(),this._dragScroll=null,e.prototype.destroy.call(this)},l._setState=function(e){var t=this;Object.keys(e).forEach((function(n){var i,r;"current"===n&&e[n]?(t._setCurrentDOM(e[n]),t.state.current===e[n]||(null==(i=t._dragScroll)?void 0:i.isDragging)||(t.state[n]=e[n],t.current=new Date(d.tranTime((null==(r=t.timeSections[0])?void 0:r.endTime)||(new Date).getTime(),"YYYY-MM-DD")+" "+e[n]),null==t.options.onChange||t.options.onChange.call(t.options,t.current))):t.state[n]=e[n]}))},l._setCurrentDOM=function(e){this._$currentTime&&(this._$currentTime.querySelector(".ez-time-line-current-value").innerHTML=e)},l._matchTimeDot=function(){for(var e=this._scaleWidth,t=[],n=d.timeToMinute("24:00:00"),i=n=Math.floor(n/e)*e;i>=0;){var r=0,o=0;i==n&&(r=70),0==i&&(o=this.$container.clientHeight-70);var a=d.minuteToTime(i);t.push({id:i,current:a,label:"a"+i,marginTop:r,marginBottom:o,recArr:[],coverArr:this._filterTimeSectionsByTime(a)}),i-=e}this._setState({timeArr:t}),this._matchRecTimeDot()},l._matchRecTimeDot=function(){var e=this.state,t=e.availTimeLine,n=e.timeArr,i=this._scaleWidth,r=t.length;if(0===r)for(var o=0;o<n.length;o++)n[o].recArr=[];else{for(var a=0;a<n.length;a++)n[a].recArr=[];for(var s=0;s<r;s++){var l,c,u=t[s],p=d.timeToSecond(u.startTime),h=d.timeToSecond(u.endTime),m=Math.floor(p/(60*i))*i;l=(p-60*m)/i;var A=Math.floor(h/(60*i))*i;c=(h-60*A)/i;for(var f=0;f<n.length;f++)if(n[f].id==m&&n[f].id==A){var v=c-l,g=60-c;n[f].recArr.push({height:v,top:g})}else n[f].id==m?n[f].recArr.push({height:60-l,top:0}):n[f].id==A?n[f].recArr.push({height:c,top:60-c}):n[f].id>m&&n[f].id<A&&n[f].recArr.push({height:60,top:0})}}this._setState({timeArr:n}),this._renderDateLine()},l._renderDateLine=function(){var e=this,t=this.state.timeArr,n=this._$itemList;this._imageRemoveErrorEvent(n.querySelectorAll("img.ez-time-line-img")||[]),n.innerHTML="",t.forEach((function(t,i){var r=document.createElement("div");r.setAttribute("class","ez-time-line-time-scale-area"),t.marginTop&&(r.style.cssText+="margin-top: "+t.marginTop+"px;"),t.marginBottom&&(r.style.cssText+="margin-bottom: "+t.marginBottom+"px;"),r.style.cssText+="border-right-color: "+(e.options.timeAxisBgColor||"rgba(189, 205, 255, 1)")+";",r.setAttribute("data-time",t.current),r.setAttribute("data-index",i+""),document.createElement("div").setAttribute("class","ez-time-line-scale");var o="";t.coverArr.length&&(o+='\n            <div class="ez-time-line-time-cover-fold '+(t.coverArr.length>1?"ez-time-line-time-cover-fold-multiple":"")+'"\n            data-start="'+t.current+'">\n              '+(t.coverArr.length>1?'<div class="ez-time-line-cover-fold-placeholder" style="color: #FFF"></div>':"")+'\n              <div class="ez-time-line-time-cover-fold-img">\n                <img src="'+e._setImageScr(t.coverArr[0].coverPic)+'" class="ez-time-line-img"/>\n                <span class="ez-time-line-time-cover-fold-len">\n                '+(t.coverArr.length>1?e.i18n.t("foldTitle",{len:t.coverArr.length,unit:"videos"}):""+d.tranTime(t.coverArr[0].startTime,"HH:mm"))+"\n                </span>\n                "+(1===t.coverArr.length?'<span class="ez-time-line-time-cover-fold-time">'+d.tranTimeToString(t.coverArr[0].startTime,t.coverArr[0].endTime)+"</span>":"")+'\n                <span class="ez-time-line-time-cover-fold-pause"><svg viewBox="0 0 20 20" fill="currentColor" width="1em" height="1em" focusable="false" aria-hidden="true" data-icon="pause">\n\t\t  <path d="M9.43914 2.47881L13.4688 8.4912C14.3594 9.81998 13.4071 11.6047 11.8074 11.6047L3.74811 11.6047C2.14849 11.6047 1.19616 9.81998 2.08675 8.4912L6.11641 2.47881C6.90863 1.2968 8.64693 1.2968 9.43914 2.47881Z" fill-rule="evenodd" transform="matrix(0,1,-1,0,16.5781,2.22229)" />\n    </svg>\n  </span>\n              </div>\n            </div>'),t.recArr.forEach((function(t){o+='<div class="ez-time-line-time-unavail"\n                              style="height: '+t.height+"px;background-color:"+(e.options.timeSectionColor||"#369FFF")+"; top: "+t.top+'px">\n                        </div>'})),o+="<div id="+t.label+' class="ez-time-line-time-label" style="color: '+(e.options.timeTextColor||"#666")+'">'+t.current+"</div>",r.innerHTML=o,n.appendChild(r),e._imageErrorEvent(n.querySelectorAll("img.ez-time-line-img")||[])})),this._currentOffsetH()},l._currentOffsetH=function(){var e=this.state.current;if(e){var t,n=(86400-d.timeToSecond(e)||0)/this._scaleWidth;null==(t=this._dragScroll)||t.scrollToY(n+60,!1)}},l._render=function(){var e=this;if(this._$currentTime=document.createElement("div"),this._$currentTime.classList.add("ez-time-line-current"),this._$currentTime.innerHTML='<div class="ez-time-line-current-content" style="color: '+(this.options.currentTimeBgColor||"#648FFC")+'">\n      <span class="ez-time-line-current-tip"><svg viewBox="0 0 57 24" fill="currentColor" width="1em" height="1em" focusable="false" aria-hidden="true" data-icon="tip">\n        <path class="ez-time-line-icon-tip" fill-rule="evenodd" d="m4,0l44,0c2.2091,0 4,1.7909 4,4l0,3.8218l4.9399,3.3572c0.5839,0.3968 0.5839,1.2574 0,1.6542l-4.9399,3.3572l0,3.8096c0,2.2091 -1.7909,4 -4,4l-44,0c-2.2091,0 -4,-1.7909 -4,-4l0,-16c0,-2.2091 1.7909,-4 4,-4z"/>\n  </svg></span>\n      <span class="ez-time-line-current-tip-line" style="background-color: '+(this.options.timePointColor||"#648FFC")+';"></span>\n      <div class="ez-time-line-current-value" style="color: '+(this.options.currentTimeColor||"#FFFFFF")+'">00:00:00</div>\n    </div>',this.$container.appendChild(this._$currentTime),this._$itemContainer=document.createElement("div"),this._$itemContainer.classList.add("ez-time-line-container"),this.$container.appendChild(this._$itemContainer),this._dragScroll=new o(this._$itemContainer,{hideScrollbar:!0,onChange:function(t){var n=e._offsetYToTime(t.y);n[1]!==e.state.current&&e._setCurrentDOM(n[0]>=86400?"23:59:59":n[1])},onDragStart:function(t){e._moveStartX=t.clientX,e._moveStartY=t.clientY,null==e.options.onDragStart||e.options.onDragStart.call(e.options,e.state.current)},onDragging:function(){null==e.options.onDragging||e.options.onDragging.call(e.options,e.state.current)},onDragEnd:function(){var t,n=e._offsetYToTime(null==(t=e._dragScroll)?void 0:t.currentY);n[1]!==e.state.current&&e._setState({current:n[0]>=86400?"23:59:59":n[1]}),null==e.options.onDragEnd||e.options.onDragEnd.call(e.options,e.state.current)}}),/\d/.test(this.options.height))this._$itemContainer.style.cssText+="height: "+this.options.height+"px";else if("string"==typeof this.options.height)this._$itemContainer.style.cssText+="height: "+this.options.height;else{var t=this.$container.clientHeight;this._$itemContainer.style.cssText+="height: "+t+"px"}this._$itemList=document.createElement("div"),this._$itemList.classList.add("ez-time-line-item"),this._dragScroll.$content.appendChild(this._$itemList),this.options.showTimeWidthBtn&&(this._$op=document.createElement("div"),this._$op.classList.add("ez-time-line-op"),this._$op.innerHTML='<span class="ez-time-line-op-wrapper"><span class="ez-time-line-icon-plus">\n  <svg viewBox="0 0 16 16" fill="currentColor" width="1em" height="1em" focusable="false" aria-hidden="true" data-icon="plus">\n    <path d="M0 0L10.6667 0" stroke="rgb(44,44,44)" stroke-linecap="round" stroke-width="1.5" transform="matrix(0,1,-1,0,8,2.66663)"/>\n    <path d="M2.66669 8L13.3334 8" stroke="rgb(44,44,44)" stroke-linecap="round" stroke-width="1.5"/>\n  </svg>\n  </span> <span class="ez-time-line-icon-minus">\n    <svg viewBox="0 0 16 16" fill="currentColor" width="1em" height="1em" focusable="false" aria-hidden="true" data-icon="minus">\n      <path d="M2.66669 8L13.3334 8" stroke="rgb(44,44,44)" stroke-linecap="round" stroke-width="1.5"/>\n    </svg>\n  </span></span>',this.$container.appendChild(this._$op)),this._picker=new r(null,{isMobile:!0,wrapClassName:"ez-time-line-picker",onOpenChange:function(t){var n,i;null==(i=e.options)||null==(n=i.onPickerOpenChange)||n.call(i,t)}}),this._addEventListener()},l._addEventListener=function(){var e,t;this.options.showTimeWidthBtn&&this._$op&&(null==(e=this._$op.querySelector(".ez-time-line-icon-plus"))||e.addEventListener("click",this._plusClick,!1),null==(t=this._$op.querySelector(".ez-time-line-icon-minus"))||t.addEventListener("click",this._minusClick,!1)),this._matchTimeDot(),this._picker&&(this._delegatePickerClose=a(this._picker.$body,".ez-time-line-picker-close","click",this._onPickerClose,!1),this._delegateItemContent=a(this._picker.$body,".ez-time-line-picker-item-content","click",this._onClickItem,!1),this._delegateCoverFold=a(this._$itemList,".ez-time-line-time-cover-fold","click",this._onClickCoverFold,!1))},l._removeEventListener=function(){var e,t,n,i;this.options.showTimeWidthBtn&&this._$op&&(null==(e=this._$op.querySelector(".ez-time-line-icon-plus"))||e.removeEventListener("click",this._plusClick),null==(t=this._$op.querySelector(".ez-time-line-icon-minus"))||t.removeEventListener("click",this._minusClick)),this._picker&&(null==(i=this._picker.$body)||null==(n=i.querySelector(".ez-time-line-picker-close"))||n.removeEventListener("click",this._onPickerClose),this._delegateItemContent&&(this._delegateItemContent.forEach((function(e){e.destroy()})),this._delegateItemContent=null),this._delegatePickerClose&&(this._delegatePickerClose.forEach((function(e){e.destroy()})),this._delegatePickerClose=null),this._delegateCoverFold&&(this._delegateCoverFold.forEach((function(e){e.destroy()})),this._delegateCoverFold=null))},l._plusClick=function(){var e=this.timeWidth+1;e>0&&e<p.length&&this.setTimeWidth(e)},l._minusClick=function(){var e=this.timeWidth-1;e>=0&&e<p.length&&this.setTimeWidth(Math.floor(e))},l._timeSectionsToGroupsByHour=function(e){var t={};return e.forEach((function(e,n){var i=d.tranTime(e.startTime,"HH");t[+i]?t[+i].push(h({},e,{_index:n})):t[+i]=[h({},e,{_index:n})]})),t},l._filterTimeSectionsByTime=function(e){if(!e)return[];var t=d.timeToSecond(e+":00"),n=d.timeToSecond(e+":00")+60*this._scaleWidth;return this.timeSections.filter((function(e){var i=d.timeToSecond(d.tranTime(e.startTime,"HH:mm:ss"));return i>=t&&i<n}))},l._renderPickerContent=function(e){var t,n,i,r,o=this,a=this._filterTimeSectionsByTime(e),s=this._timeSectionsToGroupsByHour(a);null==(n=this._picker)||null==(t=n.innerHTML)||t.call(n,'<div class="ez-time-line-picker-container">\n        <div class="ez-time-line-picker-header">\n          <span class="ez-time-line-picker-close">\n    <svg viewBox="0 0 24 24" fill="none" width="1em" height="1em" stroke="currentColor" focusable="false" aria-hidden="true" data-icon="close">\n\t    <path d="M0 0L15.9998 0" stroke-linecap="round" stroke-width="1.5" transform="matrix(0.707099,0.707114,-0.707114,0.707099,6.34277,6.34326)" />\n\t\t  <path d="M0 0L15.9998 0" stroke-linecap="round" stroke-width="1.5" transform="matrix(0.707099,-0.707114,0.707114,0.707099,6.34277,17.6567)" />\n    </svg>\n  </span>\n          '+this.i18n.t("title",{len:a.length,unit:a.length>1?"videos":"video"})+'\n        </div>\n        <div class="ez-time-line-picker-content">\n          <div class="ez-time-line-picker-list">\n             '+Object.keys(s).reverse().map((function(e){return'<div class="ez-time-line-picker-item">\n                  <div class="ez-time-line-picker-item-title">'+e+':00</div>\n                  <div class="ez-time-line-picker-item-list">\n                    '+s[e].reverse().map((function(e){return'<div class="ez-time-line-picker-item-content"\n                                      data-start="'+d.tranTime(e.startTime,"YYYYMMDDTHHmmssZ")+'"\n                                      data-end="'+d.tranTime(e.endTime,"YYYYMMDDTHHmmssZ")+'"\n                                      data-index="'+e._index+'">\n                                    <span class="ez-time-line-picker-item-time">'+d.tranTime(e.startTime,"HH:mm")+'</span>\n                                    <span class="ez-time-line-picker-item-duration">\n                                      '+d.tranTimeToString(e.startTime,e.endTime)+'\n                                    </span>\n                                  <img class="ez-time-line-picker-item-cover" src="'+o._setImageScr(e.coverPic)+'"/>\n                                </div>'})).join("")+"\n                  </div>\n              </div>"})).join("")+"\n          </div>\n          </div>\n        </div>\n      </div>"),(null==(i=this._picker)?void 0:i.$body)&&this._imageErrorEvent((null==(r=this._picker)?void 0:r.$body.querySelectorAll("img"))||[])},l._imageErrorEvent=function(e){var t=this;void 0===e&&(e=[]),Array.from(e).forEach((function(e){e.hasAttribute("data-error")||e.addEventListener("error",t._onImageError)}))},l._imageRemoveErrorEvent=function(e){var t=this;void 0===e&&(e=[]),Array.from(e).forEach((function(e){e.removeEventListener("error",t._onImageError)}))},l._onImageError=function(e){var t=e.target;if(!t.hasAttribute("data-error")){var n,i=document.createElement("div");i.classList.add("ez-time-line-item-cover-placeholder"),i.innerHTML='\n    <svg viewBox="0 0 19.1613 19.4583" fill="currentColor" width="1em" height="1em" focusable="false" aria-hidden="true" data-icon="picture">\n        <path xmlns="http://www.w3.org/2000/svg" id="" d="M15.3276 2.63477L3.83173 2.63477C2.70848 2.63477 1.79541 3.55027 1.79541 4.68419L1.79541 14.7737C1.79541 15.9076 2.70848 16.8231 3.83173 16.8231L15.3276 16.8231C16.4504 16.8231 17.364 15.9074 17.364 14.7737L17.364 4.68419C17.364 3.55027 16.4509 2.63477 15.3276 2.63477ZM3.83247 3.851L15.3284 3.851C15.7936 3.851 16.1671 4.22551 16.1671 4.68429L16.1671 14.7738C16.1671 15.2323 15.7932 15.6071 15.3284 15.6071L3.83247 15.6071C3.36725 15.6071 2.99373 15.2326 2.99373 14.7738L2.99373 12.2622L6.7356 9.56381L6.78139 9.53916C6.84532 9.51493 6.91856 9.52524 6.9742 9.56947L13.2644 14.5698L13.3381 14.62C13.5918 14.7666 13.9197 14.7063 14.105 14.4658C14.3089 14.2014 14.263 13.8192 14.0026 13.6122L7.71239 8.61184L7.60526 8.5346C7.12945 8.22451 6.51026 8.23473 6.04222 8.57224L2.99373 10.7706L2.99373 4.68429C2.99373 4.22551 3.36725 3.851 3.83247 3.851ZM10.5794 7.29679C10.5794 6.06542 11.5624 5.0672 12.7749 5.0672C13.9875 5.0672 14.9705 6.06542 14.9705 7.29679C14.9705 8.52817 13.9875 9.52639 12.7749 9.52639C11.5624 9.52639 10.5794 8.52817 10.5794 7.29679ZM13.7722 7.2967C13.7722 6.73699 13.3254 6.28325 12.7742 6.28325C12.223 6.28325 11.7762 6.73699 11.7762 7.2967C11.7762 7.85642 12.223 8.31015 12.7742 8.31015C13.3254 8.31015 13.7722 7.85642 13.7722 7.2967Z" fill-rule="evenodd"/>\n    </svg>\n    ',null==(n=t.parentNode)||n.appendChild(i),t.remove()}},l._onPickerClose=function(){this._picker&&(this._picker.open=!1)},l._onClickItem=function(e){var t,n,i=null==(n=e.delegateTarget)||null==(t=n.getAttribute)?void 0:t.call(n,"data-index");this._picker&&(this._picker.open=!1),null==this.options.onPickerSelect||this.options.onPickerSelect.call(this.options,this.timeSections[+i])},l._onClickCoverFold=function(e){var t,n,i;e.preventDefault();var r=null==(i=e.delegateTarget)||null==(n=i.parentElement)||null==(t=n.getAttribute)?void 0:t.call(n,"data-time"),o=Math.abs(this._moveStartX-e.clientX),a=Math.abs(this._moveStartY-e.clientY);this._picker&&r&&!(o>=1||a>=1)&&(this._renderPickerContent(r),this._picker.open=!0)},l._setImageScr=function(e){if(e){var t="x=200&"+(this.options.coverQuery||"");return e+(e.includes("?")?"&":"?")+t}return""},l._offsetYToTime=function(e){var t,n=e;e<60&&(n=60,null==(t=this._dragScroll)||t.scrollToY(n));var i=86400-Math.floor((n-60)*this._scaleWidth);return[i,d.subTime(Math.floor(i/3600))+":"+d.subTime(Math.floor(i%3600/60))+":"+d.subTime(i%60)]},i=n,(s=[{key:"_scaleWidth",get:function(){return(p[this.timeWidth]||p[0])[0]}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,s),n}(c);function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g.apply(this,arguments)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}var _={height:36,dpr:window.devicePixelRatio||2,scaleOffsetTop:4,showYearMonthDay:!0},b=function(e){function n(n,i){var r;return(r=e.call(this,n,t(_,i,{clone:!0}))||this)._$canvas=null,r._ctx=null,r._timeWidthArray=u[0],r._centerPositionX=0,r._isMouseDown=!1,r._mousePosition=0,r._oldTime=null,r._isOver=!1,r._moved=!1,r._isCtrlKeyDown=!1,r._lastTouchDist=0,r.$container=n,r._mousemoveFun=r._mousemoveFun.bind(r),r._mouseoverFun=r._mouseoverFun.bind(r),r._mouseleaveFun=r._mouseleaveFun.bind(r),r._mousedownFun=r._mousedownFun.bind(r),r._mouseUpFun=r._mouseUpFun.bind(r),r._mousewheelFun=r._mousewheelFun.bind(r),r._touchstartFun=r._touchstartFun.bind(r),r._touchmoveFun=r._touchmoveFun.bind(r),r._touchendFun=r._touchendFun.bind(r),r._ctrlKeyDownFun=r._ctrlKeyDownFun.bind(r),r._ctrlKeyUpFun=r._ctrlKeyUpFun.bind(r),r._init(),r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(n,e);var i,r,o=n.prototype;return o._init=function(){this._$canvas=document.createElement("canvas"),this._ctx=this._$canvas.getContext("2d"),this.readOnly||(this._$canvas.style.cssText+="cursor: pointer;"),this.$container.appendChild(this._$canvas),this.resize(this.width,this.height),this._update({current:this.current,timeWidth:this.timeWidth,timeSections:this.timeSections}),this._addEventListener()},o.resize=function(t,n){e.prototype.resize.call(this,t,n),this._$canvas&&t&&(this._$canvas.width=this.width*this.options.dpr,this._$canvas.style.cssText+="width: "+this.width+"px;"),this._$canvas&&n&&(this._$canvas.height=this.height*this.options.dpr,this._$canvas.style.cssText+="height: "+this.height+"px;"),this._draw()},o.setTimeWidth=function(e){this._update({timeWidth:e})},o.updateTimeSections=function(e){this._update({timeSections:e})},o.update=function(e){e&&!this._isMouseDown&&this._update({current:new Date(d.tranTime(e,"YYYY-MM-DD HH:mm:ss"))})},o._update=function(t){var n,i,r;void 0===t&&(t={}),(null==t?void 0:t.current)&&(n=t.current,null!=(i=Date)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i)&&(this.current=t.current),(null==t?void 0:t.timeSections)&&e.prototype.updateTimeSections.call(this,this._mergeTimeSections(t.timeSections)),"number"==typeof(null==t?void 0:t.timeWidth)&&(null==t?void 0:t.timeWidth)<u.length&&(e.prototype.setTimeWidth.call(this,t.timeWidth),this._timeWidthArray=u[Math.floor(this.timeWidth)]),"number"==typeof(null==t?void 0:t.timeWidth)&&this._timeWidthArray&&this._timeWidthArray[3]&&(null==(r=this._$canvas)||r.setAttribute("data-title",this._timeWidthArray[3])),this._draw()},o.setReadOnly=function(t){e.prototype.setReadOnly.call(this,t),this._$canvas&&(this._$canvas.style.cssText+="cursor: "+(t?"not-allowed":"pointer"))},o.destroy=function(){if(this._removeEventListener(),this._$canvas)try{this.$container.removeChild(this._$canvas),this._$canvas=null}catch(e){}e.prototype.destroy.call(this)},o._draw=function(){this._ctx&&(this._ctx.fillStyle=this.options.timeAxisBgColor,this._ctx.fillRect(0,0,this.width*this.options.dpr,this.height*this.options.dpr)),this._drawSections(),this._drawScale()},o._drawScale=function(){var e=1*this.options.dpr;this._centerPositionX=parseInt(this.width*this.options.dpr/2+"");for(var t={x:this.width*this.options.dpr/2,y:this.height*this.options.dpr},n=Math.floor(this.current.getTime()/1e3),i=(n-Math.floor(new Date(d.tranTime(new Date(1e3*n),"YYYY-MM-DD")+" 00:00:00").getTime()/1e3))%this._timeWidthArray[0],r=this.height*this.options.dpr/20,o=this._curScaleSpacing*this.options.dpr,a=Math.floor(this._centerPositionX+(this._timeWidthArray[0]-i)/this._timeWidthArray[0]*o),s=n-i,l=s+this._timeWidthArray[0],c=a-o;c>0;c-=o)0==(s-Math.floor(new Date(d.tranTime(new Date(1e3*s),"YYYY-MM-DD")+" 00:00:00").getTime()/1e3))%(this._timeWidthArray[0]*this._timeWidthArray[2])?(this._drawSolidLine(c,r,c,r+(this.options.scaleOffsetTop+4)*this.options.dpr,e),this._drawTextString(d.tranTime(new Date(1e3*s)),c,r+(this.options.scaleOffsetTop+4+4)*this.options.dpr,"center")):this._drawSolidLine(c,r,c,r+this.options.scaleOffsetTop*this.options.dpr,e),s-=this._timeWidthArray[0];for(var u=a;u<=this.width*this.options.dpr;u+=o)0==(l-Math.floor(new Date(d.tranTime(new Date(1e3*l),"YYYY-MM-DD")+" 00:00:00").getTime()/1e3))%(this._timeWidthArray[0]*this._timeWidthArray[2])?(this._drawSolidLine(u,r,u,r+(this.options.scaleOffsetTop+4)*this.options.dpr,e),this._drawTextString(d.tranTime(new Date(1e3*l)),u,r+(this.options.scaleOffsetTop+4+4)*this.options.dpr,"center")):this._drawSolidLine(u,r,u,r+this.options.scaleOffsetTop*this.options.dpr,e),l+=this._timeWidthArray[0];this._drawSolidLine(t.x,0,t.x,t.y,e,this.options.timePointColor)},o._drawSolidLine=function(e,t,n,i,r,o){this._ctx&&(this._ctx.save(),this._ctx.strokeStyle=null!=o?o:this.options.timeScaleColor,this._ctx.lineWidth=r,this._ctx.beginPath(),this._ctx.moveTo(e,t),this._ctx.lineTo(n,i),this._ctx.stroke(),this._ctx.restore())},o._drawTextString=function(e,t,n,i){if(this._ctx){var r=e.split(" ");this._ctx.font=12*this.options.dpr*1+"px serif",this._ctx.fillStyle=this.options.timeTextColor,this._ctx.textAlign=i||"left",this._timeWidthArray[0]%60==0&&(r[1]=r[1].replace(/:00$/,"")),this._ctx.fillText(r[1],t,n+8*this.options.dpr),!this.options.showYearMonthDay||"00:00:00"!==r[1]&&"00:00"!==r[1]&&this._timeWidthArray[0]*this._timeWidthArray[2]!=86400||(this._ctx.textAlign=i||"left",this._ctx.fillText(r[0],t,n+18*this.options.dpr))}},o._drawSections=function(){for(var e=this.timeSections||[],t=0;t<e.length;t++){var n=this._findPosition(e[t]);this._ctx&&d.isOverlap(0,this.width*this.options.dpr,n.x1,n.x2)&&(this._ctx.fillStyle=this.options.timeSectionColor,this._ctx.fillRect(n.x1,0,n.x2-n.x1,this.height*this.options.dpr))}},o._findPosition=function(e){var t=(parseInt((e.startTime-this.current.getTime())/1e3+"",10)/this._timeWidthArray[0]*this._curScaleSpacing+this.width/2)*this.options.dpr;return{x1:t,x2:t+parseInt((e.endTime-e.startTime)/1e3+"",10)/this._timeWidthArray[0]*this._curScaleSpacing*this.options.dpr}},o._mergeTimeSections=function(e){if(0===e.length)return e;for(var t=[(e=e.map((function(e){return 10===(e.startTime+"").length&&(e.startTime=1e3*e.startTime),10===(e.endTime+"").length&&(e.endTime=1e3*e.endTime),g({},e,{startTime:e.startTime,endTime:e.endTime})})))[0]],n=1;n<e.length;n++){var i=t[t.length-1],r=e[n];i.endTime>=r.startTime?i.endTime=Math.max(i.endTime,r.endTime):t.push(r)}return t},o._addEventListener=function(){this._$canvas&&(this._$canvas.addEventListener("mousemove",this._mousemoveFun),this._$canvas.addEventListener("mouseover",this._mouseoverFun),this._$canvas.addEventListener("mouseleave",this._mouseleaveFun),this._$canvas.addEventListener("mousedown",this._mousedownFun),this._$canvas.addEventListener("mouseup",this._mouseUpFun),this._$canvas.addEventListener("wheel",this._mousewheelFun),this.$container.addEventListener("wheel",(function(e){e.preventDefault()}),{passive:!1}),this._$canvas.addEventListener("keydown",this._ctrlKeyDownFun),this._$canvas.addEventListener("keyup",this._ctrlKeyUpFun),document.addEventListener("keydown",this._ctrlKeyDownFun,!1),document.addEventListener("keyup",this._ctrlKeyUpFun,!1),this._$canvas.addEventListener("touchstart",this._touchstartFun,{passive:!1}),this._$canvas.addEventListener("touchmove",this._touchmoveFun,{passive:!1}),this._$canvas.addEventListener("touchend",this._touchendFun,{passive:!1}))},o._removeEventListener=function(){this._$canvas&&(this._$canvas.removeEventListener("mousemove",this._mousemoveFun),this._$canvas.removeEventListener("mouseover",this._mouseoverFun),this._$canvas.removeEventListener("mouseleave",this._mouseleaveFun),this._$canvas.removeEventListener("mousedown",this._mousedownFun),this._$canvas.removeEventListener("mouseup",this._mouseUpFun),this._$canvas.removeEventListener("wheel",this._mousewheelFun),this._$canvas.removeEventListener("keydown",this._ctrlKeyDownFun),this._$canvas.removeEventListener("keyup",this._ctrlKeyUpFun),document.removeEventListener("keydown",this._ctrlKeyDownFun),document.removeEventListener("keyup",this._ctrlKeyUpFun),this._$canvas.removeEventListener("touchstart",this._touchstartFun),this._$canvas.removeEventListener("touchmove",this._touchmoveFun),this._$canvas.removeEventListener("touchend",this._touchendFun))},o._mousedownFun=function(e){this.readOnly||(this._isMouseDown=!0,this._mousePosition=e.pageX,this._oldTime=this.current,null==this.options.onDragStart||this.options.onDragStart.call(this.options,this.current))},o._mouseoverFun=function(){this.readOnly||(this._isOver=!0)},o._mouseleaveFun=function(e){this.readOnly||(this._isOver=!1,this._moveEndOrTouchEndFun(e))},o._mouseUpFun=function(e){this._moveEndOrTouchEndFun(e)},o._mousemoveFun=function(e){if(!this.readOnly)if(this._isMouseDown&&this._isOver)this._moveUpdateFun(e.pageX);else{var t=parseInt(this.$container.offsetLeft+"",10);this._mousePosition=e.pageX-t,this._update()}},o._mousewheelFun=function(e){e.preventDefault(),this.readOnly},o._ctrlKeyDownFun=function(e){(e.ctrlKey||"Control"===e.key)&&(this._isCtrlKeyDown=!0)},o._ctrlKeyUpFun=function(e){(e.ctrlKey||"Control"===e.key)&&(this._isCtrlKeyDown=!1)},o._getTouchDistance=function(e){var t=e[0],n=e[1],i=n.clientX-t.clientX,r=n.clientY-t.clientY;return Math.sqrt(i*i+r*r)},o._touchstartFun=function(e){if(!this.readOnly)if(this._oldTime=this.current,this._isOver=!0,1===e.touches.length){var t=e.touches[0];this._isMouseDown=!0,this._mousePosition=t.clientX}else 2===e.touches.length&&(this._lastTouchDist=this._getTouchDistance(e.touches))},o._touchmoveFun=function(e){if(e.preventDefault(),e.stopPropagation(),!this.readOnly)if(1===e.touches.length){var t=e.touches[0];this._moveUpdateFun(t.clientX)}else 2===e.touches.length&&(this._getTouchDistance(e.touches),this._lastTouchDist)},o._touchendFun=function(e){this.readOnly||this._moveEndOrTouchEndFun(e)},o._moveEndOrTouchEndFun=function(e){e.preventDefault(),this.readOnly||this._isMouseDown&&(this._isMouseDown=!1,this._moved&&(this._moved=!1,this._update({current:this.current}),this._oldTime=this.current,null==this.options.onDragEnd||this.options.onDragEnd.call(this.options,this.current,this._isOver)),this._isOver&&Math.abs(this._mousePosition-(e.pageX||0))>5&&(null==this.options.onChange||this.options.onChange.call(this.options,this.current)),this._mousePosition=0,this._lastTouchDist=0)},o._moveUpdateFun=function(e){var t=this._mousePosition-e;if(0!==t){if(this._oldTime){var n=this._oldTime.getTime()+1e3*parseInt(t/this._curScaleSpacing*this._timeWidthArray[0]+"",10);this._update({current:new Date(n)}),null==this.options.onDragging||this.options.onDragging.call(this.options,new Date(n))}this._moved=!0}},i=n,(r=[{key:"_curScaleSpacing",get:function(){var e,t;return Math.floor((null==(e=this._timeWidthArray)?void 0:e[1])-(null==(t=this._timeWidthArray)?void 0:t[1])*+(this.timeWidth%1/2).toFixed(2))}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,r),n}(c);return b.TIME_WIDTH=u,E.BaseTimeLine=c,E.MobileTimeLine=v,E.TimeLine=b,E}(),P="ezplayer",D=0,L=1,z=2,x=["width","height","playing","volume","muted","loading","recType","isCurrentFullscreen","orientationAngle","zooming","zoom","recording","recordList","speed","urlInfo","videoLevelList","videoLevel"],O="CLEAR_TIMER_HEADER_FOOTER_ANIMATION",I=["rec","cloudRec","cloudRecord"],R=["deviceID","deviceName"],M=["capturePicture","volume","ptz","record","talk","definition","speed","globalFullscreen"],N={loading:"loading",play:"play",capturePicture:"capturePicture",volumechange:"volumechange",zoomChange:"zoomChange",zoomingChange:"zoomingChange",zoomTranslateChange:"zoomTranslateChange",audioInfo:"audioInfo",videoInfo:"videoInfo",firstFrameDisplay:"firstFrameDisplay",fullscreen:"fullscreen",exitFullscreen:"exitFullscreen",fullscreenChange:"fullscreenChange",resize:"resize",orientationChange:"orientationChange",audioCodecUnsupported:"audioCodecUnsupported",changeTheme:"changeTheme",recTypeChange:"recTypeChange",definitionChange:"definitionChange",speedChange:"speedChange",recordingChange:"recordingChange",talkingChange:"talkingChange",talkVolumeChange:"talkVolumeChange",setLoggerOptions:"setLoggerOptions",records:"records",ptzSpeedChange:"ptzSpeedChange",setVideoLevelList:"setVideoLevelList",currentVideoLevel:"currentVideoLevel",currentVideoLevelAuto:"currentVideoLevelAuto",setAllDayRecTimes:"setAllDayRecTimes",getOSDTime:"getOSDTime",control:{play:"Control.play",playDestroy:"Control.playDestroy",capturePicture:"Control.capturePicture",capturePictureResult:"Control.capturePictureResult",capturePictureDestroy:"Control.capturePictureDestroy",volumechange:"Control.volumechange",volumePanelOpenChange:"Control.volumePanelOpenChange",volumeDestroy:"Control.volumeDestroy",controlsBarOpenChange:"Control.controlsBarOpenChange",headerMoreShowControlsChange:"Control.headerMoreShowControlsChange",headerMorePanelOpenChange:"Control.headerMorePanelOpenChange",footerMoreShowControlsChange:"Control.footerMoreShowControlsChange",footerMorePanelOpenChange:"Control.footerMorePanelOpenChange",deviceDestroy:"Control.deviceDestroy",recTypeChange:"Control.recTypeChange",recDestroy:"Control.recDestroy",definitionChange:"Control.definitionChange",definitionList:"Control.definitionList",definitionPanelOpenChange:"Control.definitionPanelOpenChange",definitionDestroy:"Control.definitionDestroy",speedChange:"Control.speedChange",speedPanelOpenChange:"Control.speedPanelOpenChange",speedDestroy:"Control.speedDestroy",ptzPanelOpenChange:"Control.ptzPanelOpenChange",ptzSpeedChange:"Control.ptzSpeedChange",ptzError:"Control.ptzError",ptzDestroy:"Control.ptzDestroy",recordingChange:"Control.recordingChange",recordDestroy:"Control.recordDestroy",talkingChange:"Control.talkingChange",talkError:"Control.talkError",talkDestroy:"Control.talkDestroy",zoomChange:"Control.zoomChange",zoomPanelOpenChange:"Control.zoomPanelOpenChange",zoomDestroy:"Control.zoomDestroy",fullscreenDestroy:"Control.fullscreenDestroy",globalFullscreenDestroy:"Control.globalFullscreenDestroy",datePanelOpenChange:"Control.datePanelOpenChange",dateChange:"Control.dateChange",dateDestroy:"Control.datePanelDestroy",timeLineChange:"Control.timeLineChange",timeLinePanelOpenChange:"Control.timeLinePanelOpenChange",timeLineDestroy:"Control.timeLineDestroy",beforeMountControls:"Control.beforeMountControls",mountedControls:"Control.mountedControls",beforeUnmountControls:"Control.beforeUnmountControls",unmountedControls:"Control.unmountedControls",posterDestroy:"Control.posterDestroy",loadingDestroy:"Control.loadingDestroy",messageDestroy:"Control.messageDestroy",contentDestroy:"Control.contentDestroy",contentRerender:"Control.contentRerender"},theme:{beforeDestroy:"Theme.beforeDestroy",destroyed:"Theme.destroyed",mobileExtendDestroy:"Theme.mobileExtendDestroy",recFooterDestroy:"Theme.recFooterDestroy"},message:"message"};
/*
* @ezuikit/player-theme v2.0.0-beta.4
* Copyright (c) 2025-11-17 Ezviz-OpenBiz
* Released under the MIT License.
*/function F(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}var U=function(e){function t(t){var n,i,r,o;return(n=e.call(this)||this).locale=null,n.__options={},n._disabled=!1,n._active=!1,n.__options=t,n.locale=(r=n.__options.locales,void 0===(o=n.__options.language)&&(o="zh"),(null==r?void 0:r[o])||(null==r?void 0:r.zh)||{}),n.$container=document.createElement(t.tagName||"span"),n.$container.classList.add(P+"-control"),"text"===(null==t?void 0:t.controlType)?n.$container.classList.add(P+"-control-text"):"block"===(null==t?void 0:t.controlType)?n.$container.classList.add(P+"-control-block"):n.$container.classList.add(P+"-control-btn"),(null==t?void 0:t.classNameSuffix)&&n.$container.classList.add(P+"-control-"+(null==t?void 0:t.classNameSuffix)),(null==t?void 0:t.className)&&n.$container.classList.add(t.className),t.getPopupContainer?n.$popupContainer=null==t.getPopupContainer?void 0:t.getPopupContainer.call(t):n.$popupContainer=document.body,n.$popupContainer.appendChild(n.$container),n._onDBlClick=n._onDBlClick.bind(n),n._onClick(),"block"!==(null==(i=n.__options)?void 0:i.controlType)&&n.$container.addEventListener("dblclick",n._onDBlClick),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e);var n=t.prototype;return n.reset=function(e){this._camelCaseName&&this.emit("Control."+this._camelCaseName+"Reset",e)},n.resetPopupContainer=function(e,t,n){e!==this.$popupContainer&&(this.$popupContainer.contains(this.$container)&&this.$popupContainer.removeChild(this.$container),this.$popupContainer=e,"prepend"===t?this.$popupContainer.prepend(this.$container):"before"===t?n&&this.$popupContainer.insertBefore(this.$container,n):this.$popupContainer.appendChild(this.$container),this._camelCaseName&&this.emit("Control."+this._camelCaseName+"ResetContainer",this.__options.classNameSuffix,e))},n.hide=function(){this.$container&&(this.$container.style.display="none",this.$container.classList.add(P+"-hide"))},n.destroy=function(){var e,t,n;this._camelCaseName&&this.emit("Control."+this._camelCaseName+"Destroy"),"block"!==(null==(e=this.__options)?void 0:e.controlType)&&this.$container.addEventListener("dblclick",this._onDBlClick),this._active=!1,this.removeAllListeners(),null==(n=this.$container)||null==(t=n.remove)||t.call(n),this.$container=null},n._updateDisabledState=function(e){var t,n;e?null==(t=this.$container)||t.classList.add(P+"-disabled"):null==(n=this.$container)||n.classList.remove(P+"-disabled")},n._updateActiveState=function(e){var t,n;e?null==(t=this.$container)||t.classList.add(P+"-active"):null==(n=this.$container)||n.classList.remove(P+"-active")},n._onClick=function(){var e=this;this.$container.addEventListener("click",(function(t){var n;(null==(n=e.$container)?void 0:n.classList.contains(P+"-disabled"))||null==e._onControlClick||e._onControlClick.call(e,t)}))},n._onDBlClick=function(e){e.stopPropagation(),e.preventDefault()},n._onControlClick=function(e){null==this.__options.onClick||this.__options.onClick.call(this.__options,e)},F(t,[{key:"active",get:function(){return this._active},set:function(e){this._disabled&&!this._active||(this._active=e,this._updateActiveState(e))}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this._updateDisabledState(e)}},{key:"_camelCaseName",get:function(){return this.__options.classNameSuffix?this.__options.classNameSuffix.replace(/[-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""})).replace(/^(.)/,(function(e){return e.toLowerCase()})):null}}]),t}(A);function B(){return B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},B.apply(this,arguments)}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}var Y={},Z=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,Object.assign({},Y,B({},t,{tagName:"div",controlType:"block",classNameSuffix:"loading"})))||this)._options=Object.assign({},t),n.$container.classList.add(P+"-loading",P+"-hide"),n._html(),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e);var n=t.prototype;return n._html=function(){var e;"function"==typeof this._options.render?this.$container.innerHTML=this._options.render():this.$container.innerHTML='\n          <span class="'+P+"-loading-dot "+P+'-loading-dot-load">\n            <i class="'+P+'-loading-dot-item"></i>\n            <i class="'+P+'-loading-dot-item"></i>\n            <i class="'+P+'-loading-dot-item"></i>\n            <i class="'+P+'-loading-dot-item"></i>\n          </span>\n        <div class="'+P+'-loading-text">'+((null==(e=this.locale)?void 0:e.LOADING)||"loading...")+"</div>\n        "},n.show=function(e){e&&(this.$container.innerHTML=e),this.$container.style.display="flex",this.$container.classList.remove(P+"-hide"),this.$popupContainer.classList.add(P+"-has-loading")},n.hide=function(){e.prototype.hide.call(this),this.$popupContainer.classList.remove(P+"-has-loading")},t}(U);function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},H.apply(this,arguments)}function G(e,t){return G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},G(e,t)}var Q={poster:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD//gAfQ29tcHJlc3NlZCBieSBqcGVnLXJlY29tcHJlc3P/2wCEAAkJCQkJCQoLCwoODw0PDhQSERESFB4WFxYXFh4uHSEdHSEdLikxKCUoMSlJOTMzOUlUR0NHVGZbW2aBeoGoqOIBCQkJCQkJCgsLCg4PDQ8OFBIRERIUHhYXFhcWHi4dIR0dIR0uKTEoJSgxKUk5MzM5SVRHQ0dUZltbZoF6gaio4v/CABEIA/0HHgMBIgACEQEDEQH/xAAZAAEBAQEBAQAAAAAAAAAAAAAAAQIEAwf/2gAIAQEAAAAA+WgAgAQAACTxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHUAEACAAAE8YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdQBAAgAAAPPzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOoCABAAAAGfEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6ggAIAAAATxgAAAAAAAAAAAAAAAAAAAAAAAAAAAAADqIACAAAACPLIAAAAAAAAAAAAAAAAAAAAAAAAAAAAADqgAIAAAAEMeYAAAAAAAAAAAAAAAAAAAAAAAAAAAAADpACAAAABAz5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOkAgAAAAQCeUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6QIAAAAEAHjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOkIAAAAEAEeeQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOkQAAAAQAQYwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0oAAAAIAIDGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOgAAAAIAIBnzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6AAAACACAGfMAAAAAAAAAAAAAAAAAAAAAAAAAAAAADoAAAAgAgBE8wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOgAAAIAIAQTzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6AAACACACBPMAAAAAAAAAAAAAAAAAAAAAAAAAAAAADoAAAgAgAgE8wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOgAAIAIAIAZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0AAEAEAEAImAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOgABABACAEGcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdAAIAIAQAgMwCAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6ABABACACBbAJEkAAAAAAAAAAAAAAAAAAAAAAAAAAAAdACACACAEDWjAEDMgAAAAAAAAAAAAAAAAAAAAAAAAAAAOgEAEAEAIGtoYBAJJAAAAAAAAAAAAAAAAAAAAAAAAAAAB0CACACAEBvREyEAgzAAAAAAAAAAAAAAAAAAAAAAAAAAADoQAQAQAgLuoJkICBc5AAAAAAAAAAAAAAAAAAAAAAAAAAAdEAEAIAQC+iAzBAIKkyAAAAAAAAAAAAAAAAAAAAAAAAAAB7gEAIAQA9ADAQEFQzAAAAAAAAAAAAAAAAAAAAAAAAAAAe4EAIAIAboCZEAgqDMAAAAAAAAAAAAAAAAAAAAAAAAAAD3CAEAEAJrYCSEAgqBMgAAAAAAAAAAAAAAAAAAAAAAAAAB7kAEAIARfQAmRAQLASQAAAAAAAAAAAAAAAAAAAAAAAAAAe8AEAIAQb0AjJAIKgIkAAAAAAAAAAAAAAAAAAAAAAAAAAPYAgBACCvQBEiAQVAQkAAAAAAAAAAAAAAAAAAAAAAAAAAPYCAEAIKa0AjJAQKgQMgAAAAAAAAAAAAAAAAAAAAAAAAAHsEAIAQKNaBCRAIKgIEgAAAAAAAAAAAAAAAAAAAAAAAAAD2IAIAQUR6UQMkBBUBASAAAAAAAAAAAAAAAAAAAAAAAAAAPaACAEFEL6CBIgEFQICIAAAAAAAAAAAAAAAAAAAAAAAAAA9QCAEFEDWyCIgEFQECEAAAAAAAAAAAAAAAAAAAAAAAAAAeoEAIKIBraCIQECwEBCAAAAAAAAAAAAAAAAAAAAAAAAAAPUIAQUIA1tBEQCCoCBBAAAAAAAAAAAAAAAAAAAAAAAAAAHqQAgoQBGthEQCCoCBAgAAAAAAAAAAAAAAAAAAAAAAAAAD1gBBQgBDWyEIBBUCAgQAAAAAAAAAAAAAAAAAAAAAAAAAB6AEFEAIF9IEQCCoCBAgAAAAAAAAAAAAAAAAAAAAAAAAAB6AQUQAgD0CEBAsBAQIAAAAAAAAAAAAAAAAAAAAAAAAAAegQUQAgCPSkIBBUCAgQAAAAAAAAAAAAAAAAAAAAAAAAAAehBRACAINbQgEFQECAgAAAAAAAAAAAAAAAAAAAAAAAAAA9IKEAQAgXYQECwEBAgAAAAAAAAAAAAAAAAAAAAAAAAAAbKEAQAgDWiAQVAQIEAAAAAAAAAAAAAAAAAAAAAAAAAABuhAEAIAi+iAQVAQICAAAAAAAAAAAAAAAAAAAAAAAAAAA9BACAIAgb1AIKgQECAAAAAAAAAAAAAAAAAAAAAAAAAAAeiAEAQBALsCCoCBAQAAAAAAAAAAAAAAAAAAAAAAAAAADYBAEAIAXYQLAQECAAAAAAAAAAAAAAAAAAAAAAAAAAANgQBACAA1oQVAQIEAAAAAAAAAAAAAAAAAAAAAAAAAAANhAEAIAAXaCoCBAQAAAAAAAAAAAAAAAAAAAAAAAAAAA2QAgCAAAugsBAQIAAAAAAAAAAAAAAAAAAAAAAAAAW6qkSSwAgCAAAFtVAQIEAAAAAAAAAAAAAAAAAAAAAAAADWta1SgDlAQBAAAALdQEBBAAAAAAAAAAAAAAAAAAAAAAAAF1vdUFAHKCAIAAAAFqkBCAAAAAAAAAAAAAAAAAAAAAAAANem6CgoByiAEAAAAAKAQAAAAAAAAAAAAAAAAAAAAAAABdetFCgoByoAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABd+ihQUFAcgBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADfpSgoUFAcgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANemgUKCgoHGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAu/QBQUFBQcYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAF9dAChQUFBxgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA160AKCgoKHGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG/SgAUKCgocYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9NqABQUFBRxgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALvZQAFBQoKOMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC72FAAUKCgpxgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAemqFAAUFCgpxgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3soUABQoKCuMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANegoUABQUKCuMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAX0oUKAAoUFBeMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAu6oUUABQUKByAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG9FChQAFCgoOQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABrYUKKAAoKChyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXahRQoAChQUOQAAAAAAAAAAAAAAAAAAAAAAAAAAAAADdKKFCgAUFBRyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAuxQooUABQoKOQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGtBRQoUACgoKcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXSihRQoACgoU5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA2UKKFCgAUFBXIAAAAAAAAAAAAAAAAAAAAAAAAAAAAALtFFCihQAFBQrkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGtIoUUKFAAUKC8gAAAAAAAAAAAAAAAAAAAAAAAAAAAABdKiihRQoACgoXkAAAAAAAAAAAAAAAAAAAAAAAAAAAAALpSUKKFCgAKFBygAAAAAAAAAAAAAAAAAAAAAAAAAAAAGqVFFCihQAFBQ5QAAAAAAAAAAAAAAAAAAAAAAAAAAAADYpFFFChQAFChygAAAAAAAAAAAAAAAAAAAAAAAAAAAALaKihRQooACgo5QAAAAAAAAAAAAAAAAAAAAAAAAAAAAFtCoooUUKAAoUcoAAAAAAAAAAAAAAAAAAAAAAAAAAAADRRUUKKFCgAUFOUAAAAAAAAAAAAAAAAAAAAAAAAAAAAC0oVFFCihQAFCnKAAAAAAAAAAAAAAAAAAAAAAAAAAAABaKKihRQoUACgrlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtCioooUUKAAoLygAAAAAAAAAAAAAAAAAAAAAAAAAAAAVRRUUKKFCgAUF5QAAAAAAAAAAAAAAAAAAAAAAAAAAAAKUUVFFCihQAFBzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUooqKFFChQAFDmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoooqKKFFCgAKHMAAAAAAAAAAAAAAAAAAAAAAAAAAAABRRRSUKKFCgAKOYAAAAAAAAAAAAAAAAAAAAAAAAAAAABRRRUUUKKFAAUcwAAAAAAAAAAAAAAAAAAAAAAAAAAAACiiikUUUKFAAU5gAAAAAAAAAAAAAAAAAAAAAAAAAAAACiiioooUKKAApzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFFFFIooUUKAArmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFFFFRQooUKABXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKKKFRRQooUABeYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKKKKihRQoUABzgAAAAAAAAAAAAAAAAAAAAAAAAAAAABRQoqKKFFCgAOcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFFFFRQooUKABzgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoUUVFFCihQAOcAAAAAAAAAAAAAAAAAAAAAAAAAAAAACiiiooUUKFABzgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUKKKiihRQoAOcAAAAAAAAAAAAAAAAAAAAAAAAAAAAABRRRSUKKFCgBzgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFFFFRRQooUAOcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAooopFFFChQBzgAAAAAAAAAAAAAAAAAAAAAAAAAAAAACiiioooUKKAOcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUUUUiihRQoBzgAAAAAAAAAAAAAAAAAAAAAAAAAAAAABRRRUUKKFCgOcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKKKFRRQooUBzgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoooqKFFChQOcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFFCioooUUKBzgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUUUVFCihQoOcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAChRRUUUKKFBzgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKKKKihRQoUOcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoooqKKFFChzgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFFFFJQooUKOcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUUUBQBQKH/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAQID/9oACAECEAAAAOoCAASAAAAAAAAAAAAAAANgQAAyAAAAAAAAAAAAAAA2EAACQAAAAAAAAAAAAAADZAAAJAAAAAAAAAAAAAAANwAAAZAAAAAAAAAAAAAAA0AAAJAAAAAAAAAAAAAAANAAAIQAAAAAAAAAAAAAADQAAIEAAAAAAAAAAAAAAA0AAIBAAAAAAAAAAAAAAANAAIAQAAAAAAAAAAAAAADQAIAEAAAAAAAAAAAAAAA0AIAAIAAAAAAAAAAAAAANAIABSBAAAAAAAAAAAAAANAQAFEsBAAAAAAAAAAAAAA0EABNBAIAAAAAAAAAAAAADRAARoJYEAAAAAAAAAAAAAAoAELqBAQAAAAAAAAAAAAACgAgtCAgAAAAAAAAAAAAACgCLDQICAAAAAAAAAAAAAAKAiwNBAQAAAAAAAAAAAAAAoIsA0ECAAAAAAAAAAAAAACiLADQgIAAAAAAAAAAAAAAKiwANEBAAAAAAAAAAAAAAAAAC1AgAAAAAAAAAAAAAAAAAtgIAAAAAAAAAAAAAAAAAFBAAAAAAAAAAAAAAAAAAKEAAAAAAAAAAAAAAAAAAUgAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAtKMAAAAAAAAAAAAAAAAAaoFOYAAAAAAAAAAAAAAAAtoBTmAAAAAAAAAAAAAAAAaFAK5gAAAAAAAAAAAAAAAWgoBeYAAAAAAAAAAAAAAALQKAXmAAAAAAAAAAAAAAAFoBQDAAAAAAAAAAAAAAAAtAFAMAAAAAAAAAAAAAAAFUAKAwAAAAAAAAAAAAAAAUoAoDAAAAAAAAAAAAAAACigBQMAAAAAAAAAAAAAAAUFAFAwAAAAAAAAAAAAAABQUAKDAAAAAAAAAAAAAAACgoAoMAAAAAAAAAAAAAAAKCgBQwAAAAAAAAAAAAAAAUFAFDAAAAAAAAAAAAAAABQUAKMAAAAAAAAAAAAAAACgoAUwAAAAAAAAAAAAAAAFBQBTAAAAAAAAAAAAAAAAUFACsAAAAAAAAAAAAAAAAoKAKwAAAAAAAAAAAAAAACgoAXAAAAAAAAAAAAAAAAWUFAFwAAAAAAAAAAAAAAABQUAMgAAAAAAAAAAAAAAAsoKAMgAAAAAAAAAAAAAAAKCgDIAAAAAAAAAAAAAAABQUAyAAAAAAAAAAAAAAAAUFAMgAAAAAAAAAAAAAAACgoDIAAAAAAAAAAAAAAAAoKAyAAAAAAAAAAAAAAAAFBQMgAAAAAAAAAAAAAAAAoKDIAAAAAAAAAAAAAAAAKCgyAAAAAAAAAAAAAAAABQUMgAAAAAAAAAAAAAAAAUFDIAAAAAAAAAAAAAAAAAoD//EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAgBAxAAAADAAoigoAAAAAAAAAAAAAADIBSKAoAAAAAAAAAAAAAADIFIoAoAAAAAAAAAAAAAADIUigAUAAAAAAAAAAAAAADJSKAAUAAAAAAAAAAAAAADNIoAAoAAAAAAAAAAAAAACIUAAoAAAAAAAAAAAAAAAyUAApKAAAAAAAAAAAAAAAzQABUUAAAAAAAAAAAAAAAgABUUAAAAAAAAAAAAAAAIABUUAAAAAAAAAAAAAAACABUUAAAAAAAAAAAAAAAAgBUUBAoAAAAAAAAAAAAAAgFJQEBQAAAAAAAAAAAAAAgUlAJKFAAAAAAAAAAAAAACCooBIooAAAAAAAAAAAAAAIqKAGVCgAAAAAAAAAAAAAAIoAIBQAAAAAAAAAAAAAAIoACAoAAAAAAAAAAAAAAAAAM0KAAAAAAAAAAAAAAAAACBQAAAAAAAAAAAAAAAAAIKAAAAAAAAAAAAAAAAAAgoAAAAAAAAAAAAAAAAACFAAAAAAAAAAAAAAAAAAEUAAAAAAAAAAAAAAAAAASgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAloAAAAAAAAAAAAAAAAEQA0AAAAAAAAAAAAAAAAEgANAAAAAAAAAAAAAAAAElgANAAAAAAAAAAAAAAAAIlQANAAAAAAAAAAAAAAAAgSwANAAAAAAAAAAAAAAABASoANAAAAAAAAAAAAAAACAJYANAAAAAAAAAAAAAAABAIsANAAAAAAAAAAAAAAAEsASoA0AAAAAAAAAAAAAAAJYAlgDQAAAAAAAAAAAAAAAIAlQDQAAAAAAAAAAAAAAASwBLANAAAAAAAAAAAAAAAAQBKgNAAAAAAAAAAAAAAAAlgCWA0AAAAAAAAAAAAAAAAQCVA0AAAAAAAAAAAAAAABLAEsDQAAAAAAAAAAAAAAAAgEqDQAAAAAAAAAAAAAAACWAJYNAAAAAAAAAAAAAAAAEsAlQ0AAAAAAAAAAAAAAAASwBLDQAAAAAAAAAAAAAAAAlgEWNAAAAAAAAAAAAAAAACWAJU0AAAAAAAAAAAAAAAAEsASzQAAAAAAAAAAAAAAAAEASqAAAAAAAAAAAAAAAACWAJaAAAAAAAAAAAAAAAAAgCWgAAAAAAAAAAAAAAAASwBNAAAAAAAAAAAAAAAAACATQAAAAAAAAAAAAAAAACWAKAAAAAAAAAAAAAAAAAEAoAAAAAAAAAAAAAAAABLAKAAAAAAAAAAAAAAAAAJYCgAAAAAAAAAAAAAAAACWAoAAAAAAAAAAAAAAAAASwKAAAAAAAAAAAAAAAAAAg//EACgQAAEEAQIFBAMBAAAAAAAAAAEAAhFwMTBREhNAQYADECBQIWBh0P/aAAgBAQABPwD5QPeAoC/HURoOEi5SINyPFyOEi5Tcjs3I+5HYPmScm5HZuR1yOuR2Lkdi5Di5Di5Di5Di5Di5DchuR3vBUFQbdgrhRAnQgKFBtYNUAe51ItINJQAHRxZ4b8j0JFlgSgI+Z6IiyQJQEaB6MiyAI60ixgI0TbTRpHpjYY+iNhNGkbkPUmwG3IMaR8vRnSNtNzcjc3I3NyNzcjc3IM+ZIxcjbkFyi5AYuVpuWZuQGLlBuUG5QVNYQdlwO2XLcuU5co7rlHdcr+rlHdco7rlO3C5blwO2XC7Y/UzVQBPZD0yh6Q3QY3ZQB2+4BqUMcUPTHcoNA7ffypp8NJQYO6AA/RZUqVKlTSwYSg0C4Qw90ABcIYSgALhAJQaBcQZvcQEoNi4g2UBFxNbvcYbvcbWxcbRFxgXG0XGBcYE3IBFxgXGB5jgXGLkFxi5B5jjzHFyDzHFyD/AKp0pUqVKlSpUqVKlSpUqVK//EAB0RAAMAAgIDAAAAAAAAAAAAAAABEWBwEpCAoLD/2gAIAQIBAT8A30/QDhCeJ8zFLca7Hl0RQhCIiIjijjk8Jl8JuCfXf//EABoRAAICAwAAAAAAAAAAAAAAAAARAaAQYLD/2gAIAQMBAT8AtfzYjYxjyx7Q+5f/AP/Z"},K=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,Object.assign({},Q,H({},t,{tagName:"div",controlType:"block",classNameSuffix:"poster"})))||this)._options=Object.assign({},Q,t),n.$container.classList.add(P+"-poster",P+"-hide"),n._imgLoadErrorEvent=n._imgLoadErrorEvent.bind(n),n._options.poster&&n.setPoster(n._options.poster),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,e);var n=t.prototype;return n._imgLoadErrorEvent=function(e){var t;null==this._options.onLoadImgError||this._options.onLoadImgError.call(this._options,(null==(t=e.target)?void 0:t.getAttribute("src"))||"")},n.setPoster=function(e){var t;""!==(e=null!=e?e:this._options.poster)?(this.$container.innerHTML='<img class="'+P+'-poster-img" src="'+e+'" />',null==(t=this.$container.querySelector("."+P+"-poster-img"))||t.addEventListener("error",this._imgLoadErrorEvent)):this.$container.innerHTML=""},n.show=function(){this.$container&&(this.$container.style.display="flex",this.$container.classList.remove(P+"-hide"))},n.hide=function(){var t,n;e.prototype.hide.call(this),null==(n=this.$container)||null==(t=n.querySelector("."+P+"-poster-img"))||t.removeEventListener("error",this._imgLoadErrorEvent)},n.destroy=function(){this.hide(),e.prototype.destroy.call(this)},t}(U),W='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" focusable="false" aria-hidden="true" data-icon="play">\n      <rect x="6.5" y="5.5" rx="1.25" width="2.5" height="13"/>\n      <rect x="15" y="5.5" rx="1.25" width="2.5" height="13"/>\n    </svg>',q='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor"  focusable="false" aria-hidden="true" data-icon="pause"> <path d="M17.5 13.66L9.1 19.26C7.78 20.14 6 19.19 6 17.59L6 6.4C6 4.8 7.78 3.85 9.1 4.73L17.5 10.33C18.69 11.12 18.69 12.87 17.5 13.66Z" /></svg>',J=function(e){return'<svg  width="1em" height="1em" viewBox="0 0 24 24" stroke="currentColor" fill="none" focusable="false" aria-hidden="true" data-icon="volume">\n     \t<path class="'+e+'-icon-volume-muted" d="M20.57 9.69L16.07 14.19" stroke-width="1.500000" stroke-linejoin="round" stroke-linecap="round"/>\n     \t<path class="'+e+'-icon-volume-muted" d="M20.57 14.19L16.07 9.69" stroke-width="1.500000" stroke-linejoin="round" stroke-linecap="round"/>\n      \x3c!--  --\x3e\n      <path class="'+e+'-icon-volume-low" d="M15.53 15.97C16.69 15.25 17.49 13.75 17.49 12C17.49 10.25 16.69 8.75 15.53 8.02" stroke-width="1.500000" stroke-linejoin="round" stroke-linecap="round"/>\n     \t\x3c!--  --\x3e\n      <path class="'+e+'-icon-volume-high" d="M18.5 19.06C20.31 17.5 21.49 14.93 21.49 12C21.49 9.07 20.31 6.48 18.49 4.93" stroke-width="1.500000" stroke-linejoin="round" stroke-linecap="round"/>\n     \t<path d="M5.87 8.62L9.85 5.25C10.5 4.7 11.49 5.16 11.49 6.01L11.49 17.98C11.49 18.83 10.5 19.29 9.85 18.74L5.87 15.37" stroke-width="1.500000" stroke-linejoin="round" stroke-linecap="round"/>\n     \t<path d="M5.87 15.37L3.49 15.37C2.94 15.37 2.49 14.92 2.49 14.37L2.49 9.62C2.49 9.07 2.94 8.62 3.49 8.62L5.87 8.62" stroke-width="1.500000" stroke-linejoin="round" stroke-linecap="round"/>\n    </svg>'},X='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" focusable="false" aria-hidden="true" data-icon="mobile-fullscreen">\n      <path d="M4 2.9082L11 2.9082C12.5188 2.9082 13.75 4.1394 13.75 5.6582L13.75 17.6582C13.75 19.177 12.5188 20.4082 11 20.4082L4 20.4082C2.4812 20.4082 1.25 19.177 1.25 17.6582L1.25 5.6582C1.25 4.1394 2.4812 2.9082 4 2.9082ZM4 4.4082L11 4.4082C11.6903 4.4082 12.25 4.9679 12.25 5.6582L12.25 17.6582C12.25 18.3485 11.6903 18.9082 11 18.9082L4 18.9082C3.30969 18.9082 2.75 18.3485 2.75 17.6582L2.75 5.6582C2.75 4.9679 3.30969 4.4082 4 4.4082ZM22.1511 18.3113C22.1511 19.3595 21.2467 20.1652 20.1509 20.2362L19.993 20.2413L15.2939 20.2413C14.8798 20.2413 14.5439 19.9055 14.5439 19.4913C14.5439 19.1116 14.8262 18.7979 15.1921 18.7482L15.2939 18.7413L19.993 18.7413C20.344 18.7413 20.5962 18.5592 20.6432 18.3732L20.6511 18.3113L20.6511 12.4895C20.6511 12.3048 20.4338 12.1042 20.1062 12.066L19.993 12.0594L15.2939 12.0594C14.8798 12.0594 14.5439 11.7238 14.5439 11.3094C14.5439 10.9298 14.8262 10.616 15.1921 10.5663L15.2939 10.5594L19.993 10.5594C21.1055 10.5594 22.0605 11.3175 22.145 12.3416L22.1511 12.4895L22.1511 18.3113ZM10.3225 16.1035C10.3225 15.6893 9.98669 15.3535 9.57251 15.3535L5.84644 15.3535L5.74463 15.3604C5.37854 15.41 5.09644 15.7239 5.09644 16.1035C5.09644 16.5177 5.43225 16.8535 5.84644 16.8535L9.57251 16.8535L9.67432 16.8467C10.0404 16.797 10.3225 16.4832 10.3225 16.1035Z" clip-rule="evenodd" fill-rule="evenodd"/>\n    </svg>',ee='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" focusable="false" aria-hidden="true" data-icon="webFullscreen">\n  \t<path d="M18.4009 2.40125L5.59972 2.40125C4.74849 2.39276 3.9297 2.72729 3.32788 3.32935C2.72607 3.9314 2.39188 4.75031 2.40062 5.6015L2.40062 18.4015C2.3922 19.2527 2.7267 20.0715 3.32874 20.6733C3.93079 21.2751 4.74969 21.6093 5.60091 21.6006L18.4009 21.6006C19.2519 21.609 20.0705 21.2747 20.6723 20.6729C21.2741 20.0711 21.6084 19.2525 21.6 18.4015L21.6 5.60034C21.6084 4.74933 21.2741 3.93073 20.6723 3.32892C20.0705 2.72711 19.2519 2.39282 18.4009 2.40125ZM18.401 20.3213C19.4246 20.3213 20.321 19.4249 20.321 18.4014L20.321 5.60022C20.321 4.5766 19.4246 3.68024 18.401 3.68024L5.59987 3.68024C4.57631 3.68024 3.67993 4.5766 3.67993 5.60022L3.67993 18.4014C3.67993 19.4249 4.57631 20.3213 5.59987 20.3213L18.401 20.3213ZM14.5599 5.27087L18.3997 5.27087L18.3997 5.27209C18.7849 5.27087 19.0405 5.52527 19.0405 5.91168L19.0405 9.75153C19.0405 10.1331 18.7849 10.3887 18.401 10.3911C18.0158 10.3887 17.7602 10.1331 17.7602 9.75153L17.7602 7.44763L14.0487 11.1591C13.9313 11.2808 13.7695 11.3494 13.6005 11.3494C13.4315 11.3494 13.2697 11.2808 13.1523 11.1591C13.0292 11.0428 12.9594 10.8809 12.9594 10.7115C12.9594 10.5421 13.0292 10.3802 13.1523 10.2639L16.8638 6.55005L14.5599 6.55005C14.1735 6.54883 13.9179 6.29443 13.9203 5.91046C13.9179 5.52411 14.1735 5.26971 14.5599 5.27087ZM10.594 12.6625L6.88254 16.3751L6.88254 14.0712C6.88254 13.686 6.62695 13.4304 6.24297 13.4304C5.85898 13.4304 5.60338 13.686 5.60219 14.0712L5.60219 17.9111C5.60219 18.2939 5.85898 18.5483 6.24297 18.5507L10.0828 18.5507C10.4668 18.5483 10.7224 18.2939 10.7224 17.9099C10.7224 17.5247 10.4668 17.2691 10.0816 17.2703L7.77771 17.2703L11.4904 13.5588C11.6133 13.4421 11.6829 13.2801 11.6829 13.1107C11.6829 12.9412 11.6133 12.7791 11.4904 12.6625C11.3737 12.5396 11.2117 12.47 11.0422 12.47C10.8727 12.47 10.7107 12.5396 10.594 12.6625Z" clip-rule="evenodd" fill-rule="evenodd"/>\n   </svg>',te='\n  <svg width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" focusable="false" aria-hidden="true" data-icon="exitWebFullscreen">\n  \t<path  d="M18.4009 2.40125L5.59978 2.40125C4.74855 2.39276 3.92976 2.72729 3.32794 3.32935C2.72614 3.9314 2.39194 4.75031 2.40068 5.6015L2.40068 18.4015C2.39226 19.2527 2.72676 20.0715 3.3288 20.6733C3.93085 21.2751 4.74976 21.6093 5.60097 21.6006L18.4009 21.6006C19.252 21.609 20.0706 21.2747 20.6723 20.6729C21.2741 20.0711 21.6085 19.2525 21.6 18.4015L21.6 5.60034C21.6085 4.74933 21.2741 3.93073 20.6723 3.32892C20.0706 2.72711 19.252 2.39282 18.4009 2.40125ZM18.4012 20.3212C19.4247 20.3212 20.3211 19.4248 20.3211 18.4012L20.3211 5.6001C20.3211 4.57648 19.4247 3.68011 18.4012 3.68011L5.59999 3.68011C4.57643 3.68011 3.68005 4.57648 3.68005 5.6001L3.68005 18.4012C3.68005 19.4248 4.57643 20.3212 5.59999 20.3212L18.4012 20.3212ZM17.4401 11.3494L13.6002 11.3494L13.6002 11.3483C13.215 11.3494 12.9594 11.095 12.9594 10.7087L12.9594 6.86877C12.9594 6.48718 13.215 6.23163 13.599 6.22925C13.9842 6.23163 14.2398 6.48718 14.2398 6.86877L14.2398 9.17273L17.9512 5.46124C18.0686 5.3396 18.2304 5.27087 18.3994 5.27087C18.5685 5.27087 18.7303 5.3396 18.8476 5.46124C18.9708 5.57751 19.0406 5.73944 19.0406 5.90881C19.0406 6.07825 18.9708 6.24011 18.8476 6.35645L15.1362 10.0703L17.4401 10.0703C17.8265 10.0715 18.082 10.3259 18.0797 10.7099C18.082 11.0963 17.8265 11.3506 17.4401 11.3494ZM6.69115 18.358L10.4026 14.6454L10.4026 16.9493C10.4026 17.3345 10.6582 17.5901 11.0422 17.5901C11.4262 17.5901 11.6818 17.3345 11.683 16.9493L11.683 13.1094C11.683 12.7266 11.4262 12.4722 11.0422 12.4698L7.20233 12.4698C6.81834 12.4722 6.56276 12.7266 6.56276 13.1106C6.56276 13.4958 6.81834 13.7514 7.20354 13.7502L9.50746 13.7502L5.79478 17.4617C5.67188 17.5784 5.60228 17.7404 5.60228 17.9099C5.60228 18.0793 5.67188 18.2413 5.79478 18.358C5.91145 18.481 6.07349 18.5505 6.24297 18.5505C6.41243 18.5505 6.57446 18.481 6.69115 18.358Z" clip-rule="evenodd" fill-rule="evenodd"/>\n</svg>',ne='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" focusable="false" aria-hidden="true" data-icon="fullscreen">\n      <path d="M8 4L6 4C4.89 4 4 4.89 4 6L4 8" stroke-width="1.5" stroke-linejoin="round" stroke-linecap="round"/>\n     \t<path d="M4 16L4 18C4 19.1 4.89 20 6 20L8 20" stroke-width="1.5" stroke-linejoin="round" stroke-linecap="round"/>\n     \t<path d="M16 20L18 20C19.1 20 20 19.1 20 18L20 16" stroke-width="1.5" stroke-linejoin="round" stroke-linecap="round"/>\n     \t<path d="M20 8L20 6C20 4.89 19.1 4 18 4L16 4" stroke-width="1.5" stroke-linejoin="round" stroke-linecap="round"/>\n    </svg>',ie='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" focusable="false" aria-hidden="true" data-icon="exitFullscreen">\n        <path d="M4 8L6 8C7.1 8 8 7.1 8 6L8 4"  stroke-width="1.488819" stroke-linejoin="round" stroke-linecap="round"/>\n     \t<path d="M8 20L8 18C8 16.89 7.1 16 6 16L4 16"  stroke-width="1.488819" stroke-linejoin="round" stroke-linecap="round"/>\n     \t<path d="M20 16L18 16C16.89 16 16 16.89 16 18L16 20"  stroke-width="1.488819" stroke-linejoin="round" stroke-linecap="round"/>\n     \t<path d="M16 4L16 6C16 7.1 16.89 8 18 8L20 8"  stroke-width="1.488819" stroke-linejoin="round" stroke-linecap="round"/>\n    </svg>',re='<svg width="1em" height="1em" viewBox="0 0 24 24" stroke="currentColor" focusable="false" aria-hidden="true" data-icon="close"><path d="M6.34 6.34L17.65 17.65" stroke-width="1.5" stroke-linecap="round"/><path d="M6.34 17.65L17.65 6.34" stroke-width="1.5" stroke-linecap="round"/></svg>',oe='<svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" focusable="false" aria-hidden="true" data-icon="close-circle">\n  <path d="M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM10.5844 5.40312C10.6531 5.40312 10.7094 5.45937 10.7094 5.52812C10.7094 5.55781 10.7 5.5875 10.6812 5.60938L8.64844 8.03125L10.6781 10.4516C10.6969 10.475 10.7078 10.5031 10.7078 10.5328C10.7078 10.6031 10.6516 10.6578 10.5828 10.6578L9.55156 10.6531L8 8.80312L6.44844 10.6547L5.41563 10.6594C5.34688 10.6594 5.29063 10.6031 5.29063 10.5344C5.29063 10.5047 5.30156 10.4766 5.32031 10.4531L7.35313 8.03281L5.32031 5.61094C5.30156 5.5875 5.29063 5.55937 5.29063 5.52969C5.29063 5.45937 5.34688 5.40469 5.41563 5.40469L6.44844 5.40937L8 7.25937L9.55313 5.40781L10.5844 5.40312Z" fill-rule="evenodd" />\n  </svg>',ae='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" focusable="false" aria-hidden="true" data-icon="ptz">\n      <circle cx="12" cy="12" r="2.771739" stroke-width="1.5"/>\n      <path d="M9.06 5.14L10.76 3.8C11.48 3.23 12.51 3.23 13.23 3.8L14.93 5.14" stroke-width="1.5" stroke-linecap="round"/>\n      <path d="M4.87 14.93L3.54 13.23C2.97 12.51 2.97 11.48 3.54 10.76L4.87 9.06" stroke-width="1.5" stroke-linecap="round"/>\n      <path d="M18.91 14.93L20.24 13.23C20.81 12.51 20.81 11.48 20.24 10.76L18.91 9.06" stroke-width="1.5" stroke-linecap="round"/>\n      <path d="M9.06 18.69L10.76 20.02C11.48 20.59 12.51 20.59 13.23 20.02L14.93 18.69" stroke-width="1.5" stroke-linecap="round"/>\n    </svg>',se='<svg width="1em" height="1em" viewBox="0 0 20 20" fill="currentColor" focusable="false" aria-hidden="true" data-icon="sdk">\n      <path d="M6.20253 2.50012L11.6496 2.50012C12.2335 2.50012 12.7939 2.72827 13.2069 3.13391L15.3547 5.24329C15.7677 5.64893 16 6.19934 16 6.77271L16 15.1062C16 16.3011 15.0142 17.2694 13.7975 17.2694L6.20253 17.2694C4.98578 17.2694 4 16.3011 4 15.1062L4 4.66333C4 3.46826 4.98578 2.50012 6.20253 2.50012ZM8.07051 6.09814C8.02467 5.76025 7.73502 5.49976 7.38452 5.49976C7.00217 5.49976 6.69221 5.80969 6.69221 6.19202L6.69221 8.49976L6.69853 8.59375C6.74437 8.93164 7.03403 9.19202 7.38452 9.19202C7.76688 9.19202 8.07683 8.88208 8.07683 8.49976L8.07683 6.19202L8.07051 6.09814ZM9.69238 5.49976C10.0429 5.49976 10.3325 5.76025 10.3784 6.09814L10.3847 6.19202L10.3847 8.49976C10.3847 8.88208 10.0747 9.19202 9.69238 9.19202C9.34189 9.19202 9.05223 8.93164 9.00639 8.59375L9.00008 8.49976L9.00008 6.19202C9.00008 5.80969 9.31003 5.49976 9.69238 5.49976ZM12.686 6.09814C12.6402 5.76025 12.3505 5.49976 12 5.49976C11.6176 5.49976 11.3077 5.80969 11.3077 6.19202L11.3077 8.49976L11.314 8.59375C11.3598 8.93164 11.6495 9.19202 12 9.19202C12.3824 9.19202 12.6923 8.88208 12.6923 8.49976L12.6923 6.19202L12.686 6.09814Z" clip-rule="evenodd" fill-rule="evenodd"/>\n    </svg>',le='<svg width="1em" height="1em" viewBox="0 0 20 20" fill="currentColor" focusable="false" aria-hidden="true" data-icon="cloud">\n      <path d="M9.76489 4.00439C7.65723 4.08447 5.79883 5.23486 4.89697 6.94995L4.78638 7.17236C2.60205 7.62524 1 9.40649 1 11.5239C1 14.0032 3.17749 16 5.84619 16L9.32983 16L9.32983 13.3784L7.66479 13.3784C7.21924 13.3784 6.99634 12.8398 7.31128 12.5249L9.63892 10.197C9.83423 10.002 10.1509 10.002 10.3462 10.197L12.6738 12.5249C12.9888 12.8398 12.7659 13.3784 12.3203 13.3784L10.6553 13.3784L10.6553 16L14.9846 16C17.1948 16 19 14.3445 19 12.2856L18.9954 12.1052C18.9058 10.3704 17.533 8.95557 15.7456 8.63818L15.6372 8.62036L15.6152 8.4624C15.2087 5.93188 12.8438 4 10 4L9.76489 4.00439Z" clip-rule="evenodd" fill-rule="evenodd"/>\n    </svg>',ce='<svg width="1em" height="1em" viewBox="0 0 20 20" fill="currentColor" focusable="false" aria-hidden="true" data-icon="cloud-record">\n      <path d="M9.76489 4.00439C7.65723 4.08447 5.79883 5.23486 4.89697 6.94995L4.78638 7.17236C2.60205 7.62524 1 9.40649 1 11.5239C1 14.0032 3.17749 16 5.84619 16L14.9846 16C17.1948 16 19 14.3445 19 12.2856L18.9954 12.1052C18.9058 10.3704 17.533 8.95557 15.7456 8.63818L15.6372 8.62036L15.6152 8.4624C15.2087 5.93188 12.8438 4 10 4L9.76489 4.00439ZM10.8674 13.9116L6.89038 13.9116C6.26294 13.9116 5.75391 13.3889 5.75391 12.7449L5.75391 9.24487C5.75391 8.60034 6.26294 8.07812 6.89038 8.07812L10.8674 8.07812C11.4954 8.07812 12.0039 8.60034 12.0039 9.24487L12.0039 10.2937C12.2932 10.0627 12.9229 9.63184 13.4836 9.271C13.8145 9.05811 14.2461 9.24219 14.2461 9.63599L14.2461 12.3655C14.2461 12.759 13.8142 12.9434 13.4836 12.7307C12.9321 12.3755 12.303 11.9438 12.0039 11.707L12.0039 12.7449C12.0039 13.3889 11.4954 13.9116 10.8674 13.9116Z" clip-rule="evenodd" fill-rule="evenodd"/>\n    </svg>',de='<svg width="1em" height="1em" viewBox="0 0 20 20" fill="currentColor" focusable="false" aria-hidden="true" data-icon="filter">\n      <path d="M12.57 9.92L16.31 5.76C16.55 5.49 16.69 5.15 16.69 4.79C16.69 3.98 16.03 3.33 15.23 3.33L4.79 3.33C4.43 3.33 4.09 3.46 3.82 3.7L3.72 3.79C3.21 4.33 3.19 5.18 3.7 5.75L7.38 9.91L7.38 15.66C7.38 16.11 7.7 16.51 8.14 16.63L11.32 17.43C11.95 17.59 12.57 17.11 12.57 16.46L12.57 9.92ZM4.88 4.83L8.88 9.35L8.88 15.27L11.07 15.82L11.07 9.34L15.13 4.83L4.88 4.83Z" fill-rule="evenodd"/>\n    </svg>',ue='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" focusable="false" aria-hidden="true" data-icon="more">\n      <path d="M4 6.8L20.8 6.8" stroke-width="1.5" stroke-linecap="round"/>\n      <path d="M4 12.39L12.4 12.39" stroke-width="1.5" stroke-linecap="round"/>\n      <path d="M4 18L8.19 18" stroke-width="1.5" stroke-linecap="round"/>\n    </svg>',pe='<svg width="1em" height="1em" viewBox="0 0 20 20" fill="currentColor" focusable="false" aria-hidden="true" data-icon="more-dot">\n        <path d="M8.75 3.75C8.75 3.05964 9.30964 2.5 10 2.5C10.6904 2.5 11.25 3.05964 11.25 3.75C11.25 4.44036 10.6904 5 10 5C9.30964 5 8.75 4.44036 8.75 3.75ZM8.75 10C8.75 9.30964 9.30964 8.75 10 8.75C10.6904 8.75 11.25 9.30964 11.25 10C11.25 10.6904 10.6904 11.25 10 11.25C9.30964 11.25 8.75 10.6904 8.75 10ZM10 15C9.30964 15 8.75 15.5596 8.75 16.25C8.75 16.9404 9.30964 17.5 10 17.5C10.6904 17.5 11.25 16.9404 11.25 16.25C11.25 15.5596 10.6904 15 10 15Z" fill-rule="evenodd" />\n    </svg>',he='<svg width="1em" height="1em" viewBox="0 0 20 20"  focusable="false" aria-hidden="true" data-icon="minus-circle">\n        \t\t<path fill="currentColor" d="M10 3.75C13.4518 3.75 16.25 6.54822 16.25 10C16.25 13.4518 13.4518 16.25 10 16.25C6.54822 16.25 3.75 13.4518 3.75 10C3.75 6.54822 6.54822 3.75 10 3.75ZM10 5C7.23857 5 5 7.23858 5 10C5 12.7614 7.23857 15 10 15C12.7614 15 15 12.7614 15 10C15 7.23858 12.7614 5 10 5Z" fill-rule="evenodd" />\n\t\t        <path stroke="currentColor" d="M7.46729 10.0588L12.4673 10.0588" stroke-linecap="round" stroke-width="1.25" />\n    </svg>',me='<svg width="1em" height="1em" viewBox="0 0 20 20"  focusable="false" aria-hidden="true" data-icon="plus-circle">\n      <path fill="currentColor" d="M10 3.75C13.4518 3.75 16.25 6.54822 16.25 10C16.25 13.4518 13.4518 16.25 10 16.25C6.54822 16.25 3.75 13.4518 3.75 10C3.75 6.54822 6.54822 3.75 10 3.75ZM10 5C7.23857 5 5 7.23858 5 10C5 12.7614 7.23857 15 10 15C12.7614 15 15 12.7614 15 10C15 7.23858 12.7614 5 10 5Z" fill-rule="evenodd" />\n      <path stroke="currentColor" d="M7.46729 10.0588L12.4673 10.0588" stroke-linecap="round" stroke-width="1.25" />\n      <path stroke="currentColor" d="M0 0L5 0" stroke-linecap="round" stroke-width="1.25" transform="matrix(0,1,-1,0,9.96729,7.55884)" />\n    </svg>',Ae='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" focusable="false" aria-hidden="true" data-icon="record">\n      <path d="M4.53 19C3.03 19 1.8 17.74 1.8 16.2L1.8 7.8C1.8 6.25 3.03 5 4.53 5L14.08 5C15.58 5 16.8 6.25 16.8 7.8L16.8 16.2C16.8 17.74 15.58 19 14.08 19L4.53 19Z" stroke-width="1.5" stroke-linejoin="round"/>\n      <path d="M17.25 13.64C17.94 14.2 18.97 15.03 20.36 16.15C21.09 16.74 22.19 16.21 22.19 15.27L22.19 8.72C22.19 7.78 21.09 7.25 20.36 7.84C18.99 8.94 17.96 9.77 17.28 10.32" stroke-width="1.5" stroke-linejoin="round" stroke-linecap="round"/>\n    </svg>',fe='<svg width="1em" height="1em" viewBox="0 0 14 14" fill="currentColor" stroke="none" focusable="false" aria-hidden="true" data-icon="record-circle">\n\t\t<path d="M7.00044 2.5C9.70278 2.5 11.8935 4.69068 11.8935 7.39302C11.8935 10.0954 9.70278 12.286 7.00044 12.286C4.2981 12.286 2.10742 10.0954 2.10742 7.39302C2.10742 4.69068 4.2981 2.5 7.00044 2.5ZM7.00044 3.5C4.85039 3.5 3.10742 5.24296 3.10742 7.39302C3.10742 9.54307 4.85039 11.286 7.00044 11.286C9.15049 11.286 10.8935 9.54307 10.8935 7.39302C10.8935 5.24296 9.15049 3.5 7.00044 3.5ZM9.50049 7.39252C9.50049 6.01181 8.3812 4.89252 7.00049 4.89252C5.61978 4.89252 4.50049 6.01181 4.50049 7.39252C4.50049 8.77323 5.61978 9.89252 7.00049 9.89252C8.3812 9.89252 9.50049 8.77323 9.50049 7.39252Z" fill-rule="evenodd" />\n  </svg>\n  ',ve='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" focusable="false" aria-hidden="true" data-icon="talk">\n      \t<path stroke="none" d="M12.22 18.95C12.65 18.95 13.01 19.21 13.07 19.54L13.08 19.64L13.08 21.78C13.08 22.16 12.69 22.47 12.22 22.47C11.78 22.47 11.42 22.21 11.37 21.87L11.36 21.78L11.36 19.64C11.36 19.26 11.74 18.95 12.22 18.95Z" fill-rule="evenodd"/>\n        <path d="M19.53 11.37L19.53 11.58C19.53 15.74 16.15 19.11 11.99 19.11C7.83 19.11 4.46 15.74 4.46 11.58L4.46 11.43" fill="none" stroke-width="1.5" stroke-linecap="round"/>\n        <path stroke="none" d="M12.05 1.52C9.3 1.52 7.07 3.58 7.07 6.12L7.07 12.07C7.07 14.61 9.3 16.67 12.05 16.67C14.79 16.67 17.02 14.61 17.02 12.07L17.02 6.12C17.02 3.58 14.79 1.52 12.05 1.52ZM8.57 12.07L8.57 6.12C8.57 5.94 8.59 5.75 8.63 5.57C8.67 5.36 8.74 5.16 8.83 4.96C8.86 4.89 8.9 4.82 8.93 4.75C9.09 4.46 9.3 4.21 9.55 3.97C9.64 3.89 9.73 3.81 9.83 3.74C10.08 3.55 10.35 3.4 10.66 3.28C10.79 3.23 10.93 3.19 11.06 3.15C11.38 3.07 11.71 3.02 12.05 3.02C12.38 3.02 12.71 3.07 13.03 3.15C13.17 3.19 13.3 3.23 13.43 3.28C13.74 3.4 14.02 3.55 14.27 3.74C14.36 3.81 14.45 3.89 14.54 3.97C14.79 4.21 15 4.46 15.16 4.75C15.2 4.82 15.23 4.89 15.26 4.96C15.35 5.16 15.42 5.36 15.46 5.57C15.5 5.75 15.52 5.94 15.52 6.12L15.52 12.07C15.52 12.26 15.5 12.44 15.46 12.63C15.42 12.83 15.35 13.04 15.26 13.24C15.23 13.31 15.2 13.38 15.16 13.45C15 13.73 14.79 13.99 14.54 14.22C14.45 14.3 14.36 14.38 14.27 14.45C14.02 14.64 13.74 14.79 13.43 14.91C13.3 14.96 13.17 15.01 13.03 15.05C12.71 15.13 12.38 15.17 12.05 15.17C11.71 15.17 11.38 15.13 11.06 15.05C10.93 15.01 10.79 14.96 10.66 14.91C10.35 14.79 10.08 14.64 9.83 14.45C9.73 14.38 9.64 14.3 9.55 14.22C9.3 13.99 9.09 13.73 8.93 13.45C8.9 13.38 8.86 13.31 8.83 13.24C8.74 13.04 8.67 12.83 8.63 12.63C8.59 12.44 8.57 12.26 8.57 12.07Z" fill-rule="evenodd"/>\n      </svg>',ge=function(e){return'<svg width="1em" height="1em" viewBox="0 0 24 24" focusable="false" aria-hidden="true" data-icon="talk-growth">\n      \t\t<g fill="currentColor" stroke="currentColor">\n            <path stroke="none" d="M9.22313 18.9543C9.6588 18.9543 10.0189 19.2133 10.0759 19.5494L10.0837 19.6428L10.0837 21.7847C10.0837 22.1649 9.69841 22.4732 9.22313 22.4732C8.78745 22.4732 8.42739 22.2142 8.37041 21.8781L8.36255 21.7847L8.36255 19.6428C8.36255 19.2626 8.74784 18.9543 9.22313 18.9543Z" fill-rule="evenodd" />\n            <path d="M16.5323 11.3779L16.5323 11.5872C16.5323 15.7472 13.1599 19.1197 8.99981 19.1197C4.83971 19.1197 1.46729 15.7472 1.46729 11.5872L1.46729 11.4335" fill-rule="evenodd" fill="none" stroke-width="1.5" />\n            <path stroke="none" d="M4.07861 6.12978C4.07861 3.589 6.30476 1.5293 9.05085 1.5293C11.7969 1.5293 14.0231 3.589 14.0231 6.12978L14.0231 12.075C14.0231 14.6158 11.7969 16.6755 9.05085 16.6755C6.30476 16.6755 4.07861 14.6158 4.07861 12.075L4.07861 6.12978ZM5.57861 12.075L5.57861 6.12978C5.57861 5.94083 5.597 5.75561 5.63376 5.57412C5.67605 5.36539 5.74265 5.16158 5.83357 4.9627C5.86625 4.8912 5.90164 4.82121 5.93974 4.75272C6.09781 4.4685 6.30245 4.21019 6.55365 3.97777C6.64206 3.89597 6.73424 3.81921 6.83019 3.7475C7.0816 3.55959 7.3589 3.40632 7.66207 3.28767C7.79552 3.23545 7.93107 3.19114 8.06871 3.15475C8.38503 3.07111 8.71241 3.0293 9.05085 3.0293C9.38929 3.0293 9.71668 3.07112 10.033 3.15475C10.1706 3.19114 10.3062 3.23545 10.4396 3.28767C10.7428 3.40632 11.0201 3.55959 11.2715 3.74749C11.3675 3.81921 11.4596 3.89596 11.548 3.97777C11.7993 4.2102 12.0039 4.46853 12.162 4.75276C12.2001 4.82124 12.2354 4.89122 12.2681 4.9627C12.359 5.16157 12.4256 5.36536 12.4679 5.57407C12.5047 5.75558 12.5231 5.94082 12.5231 6.12978L12.5231 12.075C12.5231 12.264 12.5047 12.4492 12.4679 12.6307C12.4256 12.8394 12.359 13.0432 12.2681 13.2421C12.2355 13.3136 12.2001 13.3835 12.162 13.452C12.0039 13.7362 11.7993 13.9946 11.548 14.227C11.4596 14.3088 11.3675 14.3856 11.2715 14.4573C11.0201 14.6452 10.7428 14.7985 10.4396 14.9171C10.3062 14.9693 10.1706 15.0136 10.033 15.05C9.71667 15.1337 9.38929 15.1755 9.05085 15.1755C8.71241 15.1755 8.38503 15.1337 8.06871 15.05C7.93107 15.0136 7.79552 14.9693 7.66207 14.9171C7.3589 14.7985 7.0816 14.6452 6.83019 14.4573C6.73424 14.3856 6.64206 14.3088 6.55365 14.227C6.30244 13.9946 6.09779 13.7363 5.93972 13.452C5.90163 13.3836 5.86625 13.3136 5.83357 13.2421C5.74265 13.0432 5.67605 12.8394 5.63377 12.6307C5.597 12.4492 5.57861 12.264 5.57861 12.075Z" fill-rule="evenodd" />\n          </g>\n          <g class="'+e+'-icon-talk-growth-dot">\n            <path class="'+e+'-icon-talk-growth-dot1" d="M19.1333 6.40039L22.8667 6.40039" stroke="currentColor" stroke-linecap="round" stroke-width="1.86666667" />\n            <path class="'+e+'-icon-talk-growth-dot2" d="M19.1333 10.1338L21.9331 10.1338" stroke="currentColor" stroke-linecap="round" stroke-width="1.86666667" />\n            <path class="'+e+'-icon-talk-growth-dot3" d="M19.1333 13.8672L20.9995 13.8672" stroke="currentColor" stroke-linecap="round" stroke-width="1.86666667" />\n            <path class="'+e+'-icon-talk-growth-dot4" d="M19.1333 17.6001L20.0669 17.6001" stroke="currentColor" stroke-linecap="round" stroke-width="1.86666667" />\n          </g>\n      </svg>'},ye='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" focusable="false" aria-hidden="true" data-icon="capture-picture">\n      \t<path d="M6.94 7.51C7.34 7.51 7.7 7.28 7.86 6.91L8.43 5.6C8.59 5.23 8.95 5 9.35 5L14.69 5C15.04 5 15.37 5.18 15.55 5.49L16.45 7.02C16.63 7.33 16.96 7.51 17.31 7.51L18.5 7.51C19.6 7.51 20.5 8.41 20.5 9.51L20.5 17C20.5 18.1 19.6 19 18.5 19L5.5 19C4.39 19 3.5 18.1 3.5 17L3.5 9.51C3.5 8.41 4.39 7.51 5.5 7.51L6.94 7.51Z" stroke-width="1.5"/>\n\t      <circle cx="12" cy="12.525146" r="3.068097" stroke-width="1.5"/>\n    </svg>',Te='<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" focusable="false" aria-hidden="true" data-icon="zoom">\n      <ellipse cx="10.914795" cy="11.25" rx="8.004043" ry="8.25" stroke-width="1.5"/>\n      <path d="M14.31 11.04L8.05 11.14" stroke-width="1.5" stroke-linejoin="round" stroke-linecap="round"/>\n      <path d="M11.13 14.22L11.23 7.95" stroke-width="1.5" stroke-linejoin="round" stroke-linecap="round"/>\n      <path d="M16.45 17.83L19.36 20.83" stroke-width="1.5" stroke-linejoin="round" stroke-linecap="round"/>\n    </svg>',_e='<svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" focusable="false" aria-hidden="true" data-icon="info-circle">\n  <path d="M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM7.25 5.25C7.25 5.66421 7.58579 6 8 6C8.41421 6 8.75 5.66421 8.75 5.25C8.75 4.83579 8.41421 4.5 8 4.5C7.58579 4.5 7.25 4.83579 7.25 5.25ZM8.5 7.125C8.5 7.05625 8.44375 7 8.375 7L7.625 7C7.55625 7 7.5 7.05625 7.5 7.125L7.5 11.375C7.5 11.4438 7.55625 11.5 7.625 11.5L8.375 11.5C8.44375 11.5 8.5 11.4438 8.5 11.375L8.5 7.125Z" fill-rule="evenodd"/>\n      </svg>',be='<svg width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" focusable="false" aria-hidden="true" data-icon="info-circle">\n  <path d="M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM7.5 8.875C7.5 8.94375 7.55625 9 7.625 9L8.375 9C8.44375 9 8.5 8.94375 8.5 8.875L8.5 4.625C8.5 4.55625 8.44375 4.5 8.375 4.5L7.625 4.5C7.55625 4.5 7.5 4.55625 7.5 4.625L7.5 8.875ZM7.25 10.75C7.25 11.1642 7.58579 11.5 8 11.5C8.41421 11.5 8.75 11.1642 8.75 10.75C8.75 10.3358 8.41421 10 8 10C7.58579 10 7.25 10.3358 7.25 10.75Z" fill-rule="evenodd" />\n          </svg>',Ce='<svg width="1em" height="1em" viewBox="0 0 20 20" fill="currentColor" focusable="false" aria-hidden="true" data-icon="date">\n    <g>\n    <path d="m13.35,5.9c-0.3,0 -0.5,-0.2 -0.5,-0.5l0,-3.3c0,-0.3 0.2,-0.5 0.5,-0.5s0.5,0.2 0.5,0.5l0,3.3c0,0.3 -0.3,0.5 -0.5,0.5z" />\n    <path d="m6.65,5.9c-0.3,0 -0.5,-0.2 -0.5,-0.5l0,-3.3c0,-0.3 0.2,-0.5 0.5,-0.5s0.5,0.2 0.5,0.5l0,3.3c0,0.3 -0.2,0.5 -0.5,0.5z" />\n    <path d="m17.45,8.4l-15,0c-0.3,0 -0.5,-0.2 -0.5,-0.5s0.2,-0.5 0.5,-0.5l15,0c0.3,0 0.5,0.2 0.5,0.5s-0.2,0.5 -0.5,0.5z" />\n    <path d="m15.85,18.4l-11.7,0c-1.2,0 -2.2,-1 -2.2,-2.2l0,-10.8c0,-1.2 1,-2.2 2.2,-2.2l11.7,0c1.2,0 2.2,1 2.2,2.2l0,10.8c-0.1,1.3 -1,2.2 -2.2,2.2zm-11.7,-14.1c-0.6,0 -1.2,0.5 -1.2,1.2l0,10.8c0,0.6 0.5,1.2 1.2,1.2l11.7,0c0.6,0 1.2,-0.5 1.2,-1.2l0,-10.9c0,-0.6 -0.5,-1.2 -1.2,-1.2l-11.7,0l0,0.1z" />\n    <path d="m9.95,12c-0.4,0 -0.7,-0.3 -0.7,-0.7c0,-0.2 0.1,-0.4 0.2,-0.5s0.3,-0.2 0.5,-0.2l0,0l0,0c0.4,0 0.7,0.3 0.7,0.7s-0.3,0.7 -0.7,0.7z" />\n    <path d="m14.15,12c-0.4,0 -0.7,-0.3 -0.7,-0.7c0,-0.2 0.1,-0.4 0.2,-0.5c0.1,-0.1 0.3,-0.2 0.5,-0.2c0.4,0 0.7,0.3 0.7,0.7s-0.3,0.7 -0.7,0.7zm0,-1c-0.2,0 -0.3,0.1 -0.3,0.3c0,0.2 0.3,0.4 0.5,0.2c0.1,-0.1 0.1,-0.1 0.1,-0.2c0,-0.2 -0.1,-0.3 -0.3,-0.3z" />\n    <path d="m5.85,15.3c-0.4,0 -0.7,-0.3 -0.7,-0.7c0,-0.2 0.1,-0.4 0.2,-0.5c0.1,-0.1 0.3,-0.2 0.5,-0.2l0,0l0,0c0.4,0 0.7,0.3 0.7,0.7c0,0.4 -0.3,0.7 -0.7,0.7z" />\n    <path d="m9.95,15.3c-0.4,0 -0.7,-0.3 -0.7,-0.7c0,-0.2 0.1,-0.4 0.2,-0.5c0.1,-0.1 0.3,-0.2 0.5,-0.2l0,0l0,0c0.4,0 0.7,0.3 0.7,0.7c0.1,0.4 -0.3,0.7 -0.7,0.7z" />\n    </g>\n  </svg>',Se='<svg fill="currentColor" width="1em" height="1em" viewBox="0 0 20 20" focusable="false" aria-hidden="true" data-icon="add">\n  <path d="M10.5859 2.96875L9.41406 2.96875C9.3099 2.96875 9.25781 3.02083 9.25781 3.125L9.25781 9.25781L3.4375 9.25781C3.38542 9.25781 3.34635 9.27083 3.32031 9.29688C3.29427 9.32292 3.28125 9.36198 3.28125 9.41406L3.28125 10.5859C3.28125 10.6901 3.33333 10.7422 3.4375 10.7422L9.25781 10.7422L9.25781 16.875C9.25781 16.9792 9.3099 17.0312 9.41406 17.0312L10.5859 17.0312C10.6901 17.0312 10.7422 16.9792 10.7422 16.875L10.7422 10.7422L16.5625 10.7422C16.6667 10.7422 16.7188 10.6901 16.7188 10.5859L16.7188 9.41406C16.7188 9.3099 16.6667 9.25781 16.5625 9.25781L10.7422 9.25781L10.7422 3.125C10.7422 3.07292 10.7292 3.03385 10.7031 3.00781C10.6771 2.98177 10.638 2.96875 10.5859 2.96875Z" fill-rule="evenodd" /></svg>',Ee='<svg fill="currentColor" width="1em" height="1em" viewBox="0 0 20 20" focusable="false" aria-hidden="true" data-icon="reduce">\n   \t<path  d="M3.4375 9.25781L16.5625 9.25781C16.6667 9.25781 16.7188 9.3099 16.7188 9.41406L16.7188 10.5859C16.7188 10.6901 16.6667 10.7422 16.5625 10.7422L3.4375 10.7422C3.33333 10.7422 3.28125 10.6901 3.28125 10.5859L3.28125 9.41406C3.28125 9.3099 3.33333 9.25781 3.4375 9.25781Z" fill-rule="evenodd" />\n  </svg>';function we(e,t,n){void 0===n&&(n={});var i="";return n&&Object.keys(n).forEach((function(e){void 0!==n[e]&&null!==n[e]&&(i+=e+'="'+n[e]+'"')})),'<span class="'+P+"-icon "+P+"-icon-"+t+'" '+i+">"+e+"</span>"}var ke=function(e){return void 0===e&&(e={}),we(W,"play",e)},Pe=function(e){return void 0===e&&(e={}),we(q,"pause",e)},De=function(e){return void 0===e&&(e={}),we(J(P),"volume",e)},Le=function(e){return void 0===e&&(e={}),we(X,"mobile-fullscreen",e)},ze=function(e){return void 0===e&&(e={}),we(te,"exit-fullscreen",e)},xe=function(e){return void 0===e&&(e={}),we(ee,"fullscreen",e)},Oe=function(e){return void 0===e&&(e={}),we(ie,"exit-global-fullscreen",e)},Ie=function(e){return void 0===e&&(e={}),we(ne,"global-fullscreen",e)},Re=function(e){return void 0===e&&(e={}),we(ye,"capture-picture",e)},Me=function(e){return void 0===e&&(e={}),we(ae,"ptz",e)},Ne=function(e){return void 0===e&&(e={}),we(Ae,"record",e)},$e=function(e){return void 0===e&&(e={}),we(fe,"record-circle",e)},Fe=function(e){return void 0===e&&(e={}),we(ve,"talk",e)},je=function(e){return void 0===e&&(e={}),we(ge(P),"talk-growth",e)},Ue=function(e){return void 0===e&&(e={}),we(Te,"zoom",e)},Be=function(e){return void 0===e&&(e={}),we(ue,"more",e)},Ve=function(e){return void 0===e&&(e={}),we(pe,"more-dot",e)},Ye=function(e){return void 0===e&&(e={}),we(he,"minus-circle",e)},Ze=function(e){return void 0===e&&(e={}),we(me,"plus-circle",e)},He=function(e){return void 0===e&&(e={}),we(se,"sdk",e)},Ge=function(e){return void 0===e&&(e={}),we(le,"cloud-rec",e)},Qe=function(e){return void 0===e&&(e={}),we(ce,"cloud-record",e)},Ke=function(e){return void 0===e&&(e={}),we(re,"close",e)},We=function(e){return void 0===e&&(e={}),we(oe,"close-circle",e)},qe=function(e){return void 0===e&&(e={}),we(be,"warn-circle",e)},Je=function(e){return void 0===e&&(e={}),we(_e,"info-circle",e)},Xe=function(e){return void 0===e&&(e={}),we(Ce,"date",e)},et=function(e){return void 0===e&&(e={}),we(de,"filter",e)},tt=function(e){return void 0===e&&(e={}),we(Se,"add",e)},nt=function(e){return void 0===e&&(e={}),we(Ee,"reduce",e)};function it(){return it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},it.apply(this,arguments)}function rt(e,t){return rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rt(e,t)}var ot={},at=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,Object.assign({},ot,it({},t,{tagName:"div",controlType:"block"})))||this).options=Object.assign({},ot,t),n.$container.classList.add(P+"-message",P+"-hide"),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,e);var n=t.prototype;return n.info=function(e,t){void 0===t&&(t=2),this._toast(e,"info",t)},n.warn=function(e,t){void 0===t&&(t=2),this._toast(e,"warn",t)},n.toastError=function(e,t){void 0===t&&(t=2),this._toast(e,"error",t)},n.error=function(e,t){void 0===t&&(t=0),this._show(this._getIcon("error")+'<div class="'+P+'-message-msg">'+(e||"")+"</div>",t,"error")},n._toast=function(e,t,n){var i=this;void 0===t&&(t="info"),void 0===n&&(n=2),this._toastTimer&&clearTimeout(this._toastTimer),this._toastTimer=null,this.options.rootContainer&&(this._$toast||(this._$toast=document.createElement("div"),this._$toast.classList.add(P+"-toast")),this._$toast.innerHTML='<div class="'+P+'-toast-content">'+this._getIcon(t)+'<span class="'+P+"-toast-msg "+P+"-toast-"+t+'">'+(e||"")+"</span></div>",this.options.rootContainer.appendChild(this._$toast),n>0&&(this._toastTimer=setTimeout((function(){var e;null==(e=i._$toast)||e.remove(),i._$toast=null,i._toastTimer&&clearTimeout(i._toastTimer),i._toastTimer=null}),1e3*n)))},n._show=function(e,t,n){var i=this;void 0===t&&(t=0),void 0===n&&(n="info"),this._timer&&(clearTimeout(this._timer),this._timer=null),this.$popupContainer.classList.add(P+"-has-message",P+"-has-message-"+n),"function"==typeof this.options.render?this.$container.innerHTML=this.options.render(e,t,n):this.$container.innerHTML='<div class="'+P+"-message-content "+P+"-message-"+n+'">'+(e||"")+"</div>",this.$container.style.display="flex",this.$container.classList.remove(P+"-hide"),t>0&&(this._timer=setTimeout((function(){i.hide(),i._timer&&clearTimeout(i._timer),i._timer=null}),1e3*t))},n.destroy=function(){var t;this._timer&&(clearTimeout(this._timer),this._timer=null),this._toastTimer&&clearTimeout(this._toastTimer),this._toastTimer=null,null==(t=this._$toast)||t.remove(),this._$toast=null,this.hide(),e.prototype.destroy.call(this)},n.hide=function(){var t=this;this.$container.innerHTML="",Array.from(this.$popupContainer.classList).forEach((function(e){new RegExp("^"+P+"-has-message","ig").test(e)&&t.$popupContainer.classList.remove(e)})),e.prototype.hide.call(this)},n._getIcon=function(e){var t=Je();switch(e){case"warn":t=qe();break;case"error":t=We();break;default:t=Je()}return t},t}(U);function st(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}function lt(){return lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lt.apply(this,arguments)}function ct(e,t){return ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ct(e,t)}var dt=function(e){function t(t){var n;return(n=e.call(this,lt({},t,{tagName:"span",controlType:"button",classNameSuffix:"play"}))||this)._playing=!1,n._options=t,n._playing=!!t.props.playing,n.on(N.play,(function(e){n._playing!==e&&(n._playing=e,n._render())})),n._render(),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,e);var n=t.prototype;return n._onControlClick=function(e){this._playing=!this._playing,this.emit(N.control.play,this._playing),null==this._options.onClick||this._options.onClick.call(this._options,e,this._playing),this._render()},n._render=function(){var e,t;this._playing?this.$container.innerHTML=ke({title:null==(e=this.locale)?void 0:e.BTN_PLAY}):this.$container.innerHTML=Pe({title:null==(t=this.locale)?void 0:t.BTN_PAUSE})},st(t,[{key:"playing",get:function(){return this._playing}}]),t}(U);function ut(e,t){var n=null,i=0;return function(){for(var r=this,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];var l=Date.now(),c=t-(l-i);c<=0?(i=l,e.apply(this,a)):n||(n=setTimeout((function(){i=Date.now(),n=null,e.apply(r,a)}),c))}}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ht(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(e,t):void 0}}(e))||t){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var mt=function(){function e(){}return e.orientationEventListener=function(t){var n=null,i=function(){var t,n;if(null==(t=screen)?void 0:t.orientation)return{angle:screen.orientation.angle,type:screen.orientation.type||screen.mozOrientation||screen.msOrientation};if(void 0!==(null==(n=window)?void 0:n.orientation)){var i=window.orientation;return{angle:i>=0?i:360+i,type:90===Math.abs(i)?"landscape":"portrait"}}return e.isMobile?{angle:window.innerWidth>window.innerHeight?90:0,type:window.innerWidth>window.innerHeight?"landscape":"portrait"}:{angle:0,type:"unknow"}},r=i(),o=function(){var e=null==i?void 0:i();e.angle===r.angle&&e.type===r.type||(null==t||t(e),r=e)},a=function(){n&&clearTimeout(n),o&&(n=setTimeout(o,200))};return screen.orientation?screen.orientation.addEventListener("change",o):"onorientationchange"in window?window.addEventListener("orientationchange",o):e.isMobile&&window.addEventListener("resize",a),[r,function(){screen.orientation&&o?screen.orientation.removeEventListener("change",o):"onorientationchange"in window&&o?window.removeEventListener("orientationchange",o):e.isMobile&&window.removeEventListener("resize",a),o=null,a=null,i=null,n&&(clearTimeout(n),n=null)}]},e.resizeObserver=function(e,t){var n=function(n,i){for(var r,o=ht(n);!(r=o()).done;){r.value.target===e&&t&&t(n,i)}},i=new ResizeObserver(ut(n,50));return i.observe(e),{unobserve:function(){try{null==i||i.unobserve(e)}catch(e){}n=null},disconnect:function(){null==i||i.disconnect(),i=null,n=null}}},e}();function At(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}mt.isMobile=t.isMobile();var ft={step:.01,range:[0,1],draggable:!0,disabled:!1,showPercent:!1,showPlus:!1,showMinus:!1,isRotated:!1,onChange:function(){},renderText:function(e,t){return(100*t).toFixed(0)}},vt=function(){function e(e){var t,n;if(this._percent=0,this._value=0,this._disabled=!1,this._delegateSliderMouseDown=null,this._delegateSliderHandleMouseDown=null,this._delegateProgressMouseDown=null,this._delegatePlusClick=null,this._delegateMinusClick=null,this._isRotated=!1,this.options=Object.assign({},ft,e),2!==(null==(t=this.options.range)?void 0:t.length))throw new Error("Progress range must be an array with two elements.");if(this.options.range[0]>=this.options.range[1])throw new Error("Progress range first element must be less than the second element.");this._isRotated=this.options.isRotated||!1,this.$container=e.container,this._render(),this._eventListeners();var i=null!=(n=this.options.defaultValue)?n:this.options.range[0];this._value=+i.toFixed(2),this._percent=+((i-this.options.range[0])/(this.options.range[1]-this.options.range[0])).toFixed(2),this._updateUI(),this.disabled=this.options.disabled}var t=e.prototype;return t.isRotate=function(e){this._isRotated=e},t.destroy=function(){var e,t,n,i,r,o,a,s,l,c;null==(t=this._delegateSliderMouseDown)||null==(e=t.destroy)||e.call(t),this._delegateSliderMouseDown=null,null==(i=this._delegateSliderHandleMouseDown)||null==(n=i.destroy)||n.call(i),this._delegateSliderHandleMouseDown=null,null==(o=this._delegateProgressMouseDown)||null==(r=o.destroy)||r.call(o),this._delegateProgressMouseDown=null,null==(s=this._delegatePlusClick)||null==(a=s.destroy)||a.call(s),this._delegatePlusClick=null,null==(c=this._delegateMinusClick)||null==(l=c.destroy)||l.call(c),this._delegateMinusClick=null,this.$content&&this.$container.removeChild(this.$content),this.$content=null},t._updateValuePercent=function(e,t){if("percent"===e){if(t<0||t>1)return;this._percent!==t&&(this._percent=+t.toFixed(2),this._convertPercentToValue(this._percent),null==this.options.onChange||this.options.onChange.call(this.options,this._value,this._percent,this.options.range),this._updateUI())}else if("value"===e){if(t<this.options.range[0]||t>this.options.range[1])return;this._value!==t&&(this._value=+t.toFixed(2),this._convertValueToPercent(this._value),null==this.options.onChange||this.options.onChange.call(this.options,this._value,this._percent,this.options.range),this._updateUI())}},t._convertPercentToValue=function(e){this._value=+(this.options.range[0]+(this.options.range[1]-this.options.range[0])*e).toFixed(2)},t._convertValueToPercent=function(e){this._percent=+((e-this.options.range[0])/(this.options.range[1]-this.options.range[0])).toFixed(2)},t._render=function(){var e;this.$content=document.createElement("div"),this.$content.className=P+"-progress "+(null!=(e=this.options.className)?e:""),this.$content.innerHTML=(this.options.showPercent?'<div class="'+P+'-progress-text">'+(null==this.options.renderText?void 0:this.options.renderText.call(this.options,this._value,this._percent,this.options.range))+"</div>":"")+"\n            "+(this.options.showPlus?'<div class="'+P+'-progress-plus">\n              '+Ze()+"\n            </div>":"")+'\n            <div class="'+P+'-progress-slider">\n                <div class="'+P+'-progress-slider-fill"></div>\n                <div class="'+P+'-progress-slider-handle" style="top: 100%"></div>\n            </div>\n            '+(this.options.showMinus?'<div class="'+P+'-progress-minus">\n            '+Ye()+"\n            </div>":""),this.$container.appendChild(this.$content)},t._updateUI=function(){var e=this.$content;if(null==e||e.setAttribute("data-value",this._value+""),e.querySelector("."+P+"-progress-slider-fill")){var t=+(100*this._percent).toFixed(0);this.options.showPercent&&(e.querySelector("."+P+"-progress-text").innerHTML=null==this.options.renderText?void 0:this.options.renderText.call(this.options,this._value,this._percent,this.options.range)),e.querySelector("."+P+"-progress-slider-fill").style.height=t+"%",e.querySelector("."+P+"-progress-slider-handle").style.top=100-t+"%"}},t._eventListeners=function(){var e=this,t=window.PointerEvent?"pointerdown":"mousedown";if(this._delegateSliderMouseDown=S(this.$content,"."+P+"-progress-slider",t,(function(t){var n,i;if(t.stopPropagation(),!t.delegateTarget.classList.contains(P+"-disabled")&&!e._disabled){var r=e.$content.querySelector("."+P+"-progress-slider").getBoundingClientRect(),o=0;if(mt.isMobile&&e._isRotated)o=+(Math.max(0,Math.min(t.clientX-r.x,r.width))/r.width).toFixed(2);else o=+(Math.max(0,Math.min(r.height-(t.clientY-r.y),r.height))/r.height).toFixed(2);e._convertPercentToValue(o),null==(i=e.options)||null==(n=i.onProgressClick)||n.call(i,e._value,o,e.options.range),e.percent=o}})),this._delegateSliderHandleMouseDown=S(this.$content,"."+P+"-progress-slider-handle",t,(function(t){if(t.stopPropagation(),e.options.draggable&&!t.delegateTarget.classList.contains(P+"-disabled")&&!e._disabled){var n=e._isRotated?t.clientX:t.clientY,i=e.$content.querySelector("."+P+"-progress-slider-fill").offsetHeight,r=e.$content.querySelector("."+P+"-progress-slider").offsetHeight,o=ut((function(t){if(t.stopPropagation(),e.options.draggable&&!e._disabled){var o=n-(e._isRotated?t.clientX:t.clientY),a=i+(e._isRotated?-o:o);a=Math.max(0,Math.min(a,r)),e.percent=+(a/r).toFixed(2)}}),20),a=e.$content,s=window.PointerEvent?"pointermove":"mousemove",l=window.PointerEvent?"pointerup":"mouseup",c=window.PointerEvent?"pointerleave":"mouseleave";a.addEventListener(s,o),a.addEventListener(l,d),a.addEventListener(c,d)}function d(){a.removeEventListener(s,o),o=null,a.removeEventListener(l,d),a.removeEventListener(c,d)}})),this.options.showPlus){var n=window.PointerEvent?"pointerdown":"click";this._delegatePlusClick=S(this.$content,"."+P+"-progress-plus",n,(function(t){if(t.stopPropagation(),!t.delegateTarget.classList.contains(P+"-disabled")&&!e._disabled){var n=e._value+e.options.step;n<=e.options.range[1]?e.value=n:e.value=e.options.range[1],null==e.options.onPlusClick||e.options.onPlusClick.call(e.options,e.value,e.percent,e.options.range)}}))}if(this.options.showMinus){var i=window.PointerEvent?"pointerdown":"click";this._delegateMinusClick=S(this.$content,"."+P+"-progress-minus",i,(function(t){if(t.stopPropagation(),!t.delegateTarget.classList.contains(P+"-disabled")&&!e._disabled){var n=e._value-e.options.step;n>=e.options.range[0]?e.value=n:e.value=e.options.range[0],null==e.options.onMinusClick||e.options.onMinusClick.call(e.options,e.value,e.percent,e.options.range)}}),!0)}["mousedown","touchstart","touchmove","dblclick"].forEach((function(t){S(e.$container,"."+P+"-progress",t,(function(e){e.stopPropagation(),e.preventDefault()}))}))},At(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e}},{key:"value",get:function(){return this._value},set:function(e){this._updateValuePercent("value",e)}},{key:"percent",get:function(){return this._percent},set:function(e){this._updateValuePercent("percent",e)}}]),e}();function gt(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}function yt(){return yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},yt.apply(this,arguments)}function Tt(e,t){return Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tt(e,t)}var _t={volume:.8,muted:!1,open:!1,trigger:"hover",onOpenChange:function(){},onChange:function(){}},bt=function(t){function n(n){var i,r,o,a,s,l,c;(void 0===n&&(n={}),(i=t.call(this,yt({},n,{tagName:"span",classNameSuffix:"volume",controlType:"button"}))||this)._muted=!1,i._volume=0,i._lastVolume=0,i._progress=null,i._options=e(_t,n,{clone:!1}),i._render(),i._volume=(null==(r=i._options.props)?void 0:r.volume)>=1?1:(null==(o=i._options.props)?void 0:o.volume)<=0?0:+(null==(a=i._options.props)?void 0:a.volume.toFixed(2)),i._lastVolume=i._volume,i._muted=!!(null==(s=i._options.props)?void 0:s.muted)||!1,mt.isMobile||"ezopen"===i._options.PLAY_TYPE)||(i.picker=new y(i.$container,{getPopupContainer:function(){return i.$container},trigger:i._options.trigger,open:i._options.open,offset:[0,-10],placement:"top",onOpenChange:function(e){null==i._options.onOpenChange||i._options.onOpenChange.call(i._options,e,i._muted?i._lastVolume:i.volume,i._muted),i.emit(N.control.volumePanelOpenChange,e,i._lastVolume,i._muted)}}),i._progress=new vt({container:i.picker.$body,defaultValue:(null==(l=i._options.props)?void 0:l.muted)?0:null==(c=i._options.props)?void 0:c.volume,range:[0,1],step:.1,showPercent:!0,className:P+"-volume-progress",onProgressClick:function(){i.muted=!1},onChange:function(e){e!==i._volume&&(i.volume=e)}}));return i._updateUI(),i._addEventListener(),i.on(N.audioCodecUnsupported,(function(){i.disabled=!0})),i.on(N.volumechange,(function(e,t){i._muted!==t&&(i.muted=t),i._lastVolume!==e&&(i.volume=e)})),i}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(n,t);var i=n.prototype;return i.destroy=function(){var e,n,i;null==(n=this._progress)||null==(e=n.destroy)||e.call(n),this._progress=null,null==(i=this.picker)||i.destroy(),this.picker=null,t.prototype.destroy.call(this)},i._toggleMute=function(){if(!this.disabled){var e;if(0===this._lastVolume)return this.volume=(null==(e=this._options.props)?void 0:e.volume)||.5,void(this.muted=!1);this.muted?this.muted=!1:this.muted=!0}},i._updateUI=function(){var e,t;(this._$content.classList.remove(P+"-icon-volume-muted"),this._$content.classList.remove(P+"-icon-volume-zero"),this._$content.classList.remove(P+"-icon-volume-low"),this._$content.classList.remove(P+"-icon-volume-high"),this._muted)?(this._volume=0,this._$content.classList.add(P+"-icon-volume-muted"),this._$content.setAttribute("title",(null==this||null==(e=this.locale)?void 0:e.BTN_MUTED)||"muted")):(this._$content.classList.remove(P+"-icon-volume-muted"),0===this._volume?this._$content.classList.add(P+"-icon-volume-zero"):this._volume<=.5?this._$content.classList.add(P+"-icon-volume-low"):this._$content.classList.add(P+"-icon-volume-high"),this._$content.setAttribute("title",(null==this||null==(t=this.locale)?void 0:t.BTN_VOLUME)||"volume"))},i._render=function(){var e;this.$container.innerHTML=De({title:null==(e=this.locale)?void 0:e.BTN_VOLUME})},i._onControlClick=function(){},i._addEventListener=function(){var e=this;S(this.$container,"."+P+"-control-volume","mousedown",(function(){e.$container.classList.contains(P+"-disabled")||e._toggleMute()}))},gt(n,[{key:"muted",get:function(){return this._muted},set:function(e){this._muted!==e&&(e?(this._volume=0,this._progress&&(this._progress.value=0)):(this._volume=this._lastVolume,this._progress&&(this._progress.value=this._lastVolume)),this._muted=e,null==this._options.onChange||this._options.onChange.call(this._options,this.volume,e),this.emit(N.control.volumechange,this.volume,e)),this._updateUI()}},{key:"volume",get:function(){return this._lastVolume},set:function(e){if(e>=0&&e<=1){var t=+e.toFixed(2);this._lastVolume!==t&&(this._volume=t,this._lastVolume=this._volume,this._progress&&(this._progress.value=t),null==this._options.onChange||this._options.onChange.call(this._options,t,this._muted),this.emit(N.control.volumechange,t,this._muted)),this._updateUI()}}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this.picker&&(this.picker.disabled=e),this._updateDisabledState(e)}},{key:"_$content",get:function(){return this.$container.querySelector("."+P+"-icon-volume")}}]),n}(U);function Ct(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function St(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Ct(o,i,r,a,s,"next",e)}function s(e){Ct(o,i,r,a,s,"throw",e)}a(void 0)}))}}function Et(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var wt={prefix:"ezplayer"},kt=function(){function e(){this.fullscreens=[]}var t=e.prototype;return t.add=function(e,t){if(e){var n=this.fullscreens.findIndex((function(t){return t.element===e}));n>=0?(this.fullscreens[n].onChange||(this.fullscreens[n].onChange=[]),this.fullscreens[n].onChange.push(t)):this.fullscreens.push({element:e,onChange:[t]})}},t.getChanges=function(e){var t=this.fullscreens.find((function(t){return t.element===e}));return t&&(null==t?void 0:t.onChange)||[]},t.remove=function(e,t){var n=this.fullscreens.findIndex((function(t){return t.element===e}));if(n>=0){var i,r=null==(i=this.fullscreens[n].onChange)?void 0:i.find((function(e){return e===t}));if(r){var o,a=null==(o=this.fullscreens[n].onChange)?void 0:o.filter((function(e){return e!==r}));this.fullscreens[n].onChange=a}(!this.fullscreens[n].onChange||this.fullscreens[n].onChange&&0===this.fullscreens[n].onChange.length)&&this.fullscreens.splice(n,1)}},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e}(),Pt=kt.getInstance(),Dt=function(){function e(e,t){void 0===t&&(t={}),this._isCurrentFullscreen=!1,this._isFullscreen=!1,this._currentFullscreenElementList=[],this.$container=e,this._options=Object.assign({},wt,t),this._options.onChange&&mt.isMobile&&Pt.add(this.$container,this._options.onChange),this._isFullscreen=!!this._options.isFullscreen,this._fullscreenchange2=this._fullscreenchange2.bind(this),n.isEnabled&&n.on("change",this._fullscreenchange2)}var t=e.prototype;return t.fullscreen=function(){return St((function(){return Et(this,(function(e){switch(e.label){case 0:return mt.isMobile?(this._fullscreenchange(this.$container,!0),[3,3]):[3,1];case 1:return[4,n.request(this.$container)];case 2:return[2,e.sent()];case 3:return[2]}}))})).call(this)},t.exitFullscreen=function(){return St((function(){return Et(this,(function(e){switch(e.label){case 0:return mt.isMobile?(this._fullscreenchange(this.$container,!1),[3,3]):[3,1];case 1:return this._isFullscreen?[4,n.exit()]:[3,3];case 2:return[2,e.sent()];case 3:return[2]}}))})).call(this)},t.toggle=function(){return St((function(){return Et(this,(function(e){switch(e.label){case 0:return mt.isMobile?(this._fullscreenchange(this.$container,!this._isCurrentFullscreen),[3,3]):[3,1];case 1:return[4,n.toggle(this.$container)];case 2:return[2,e.sent()];case 3:return[2]}}))})).call(this)},t.destroy=function(){n.isEnabled&&n.off("change",this._fullscreenchange2),mt.isMobile&&this._options.onChange&&Pt.remove(this.$container,this._options.onChange),this._fullscreenchange2=null},t._fullscreenchange2=function(){this._fullscreenchange()},t._fullscreenchange=function(e,t){var i,r,o,a=this;if(this._isFullscreen=n.isFullscreen,e)this._isCurrentFullscreen=!!t,this._currentFullscreenElementList=[];else if(this._isFullscreen){var s=n.element,l=this._currentFullscreenElementList.indexOf(s);s&&-1===l?this._currentFullscreenElementList.unshift(s):s&&l>=1&&this._currentFullscreenElementList.shift();var c=this._currentFullscreenElementList.indexOf(this.$container);this._isCurrentFullscreen=c>=0}else this._isCurrentFullscreen=!1,this._currentFullscreenElementList=[];this._isCurrentFullscreen?null==(i=this.$container)||i.classList.add(this._options.prefix+"-fullscreen"):(null==(r=this.$container)||r.classList.remove(this._options.prefix+"-fullscreen"),null==(o=this.$container)||o.classList.remove(this._options.prefix+"-global-fullscreen"));mt.isMobile?Pt.getChanges(this.$container).forEach((function(e){e({isCurrentFullscreen:a._isCurrentFullscreen,isFullscreen:a._isFullscreen,isMobile:mt.isMobile})})):null==this._options.onChange||this._options.onChange.call(this._options,{isCurrentFullscreen:this._isCurrentFullscreen,isFullscreen:this._isFullscreen,isMobile:mt.isMobile}),mt.isMobile&&(this._isCurrentFullscreen?document.body.classList.add(this._options.prefix+"-body-mobile-noscroll"):document.body.classList.remove(this._options.prefix+"-body-mobile-noscroll"))},e}();function Lt(){return Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lt.apply(this,arguments)}function zt(e,t){return zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zt(e,t)}var xt=function(e){function t(t){var n,i,r;if((n=e.call(this,Lt({tagName:"span",classNameSuffix:"fullscreen",controlType:"button"},t))||this).isCurrentFullscreen=!1,n.options=t,n.isCurrentFullscreen=!!(null==(i=t.props)?void 0:i.isCurrentFullscreen),n._$rootContainer=null==(r=n.options)?void 0:r.rootContainer,!n._$rootContainer)throw new Error("Fullscreen option fullscreenContainer is required!");return n._fullscreenChange=n._fullscreenChange.bind(n),n._fullscreenUtil=new Dt(n._$rootContainer,{onChange:n._fullscreenChange,isFullscreen:n.isCurrentFullscreen}),n._render(),n._event(),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)}(t,e);var n=t.prototype;return n.destroy=function(){var t;this.$container.innerHTML="",null==(t=this._fullscreenUtil)||t.destroy(),this._fullscreenUtil=null,e.prototype.destroy.call(this)},n._render=function(){var e,t,n;mt.isMobile?this.$container.innerHTML=Le({title:null==(e=this.locale)?void 0:e.BTN_FULLSCREEN}):this.$container.innerHTML=ze({title:null==(t=this.locale)?void 0:t.BTN_EXIT_FULLSCREEN})+xe({title:null==(n=this.locale)?void 0:n.BTN_FULLSCREEN})},n._fullscreenChange=function(e){this.isCurrentFullscreen=e.isCurrentFullscreen,this._render(),null==this.options.onChange||this.options.onChange.call(this.options,e)},n._onControlClick=function(){var e,t;this.isCurrentFullscreen?null==(e=this._fullscreenUtil)||e.exitFullscreen():null==(t=this._fullscreenUtil)||t.fullscreen()},n._event=function(){},t}(U);function Ot(){return Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ot.apply(this,arguments)}function It(e,t){return It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},It(e,t)}var Rt=function(e){function t(t){var n,i;return(n=e.call(this,Ot({},t,{tagName:"div",controlType:"block",classNameSuffix:"rec"}))||this)._options=t,n.recType=(null==(i=t.props)?void 0:i.recType)||"rec",n._onClickIcon(),n._onDBlClick=n._onDBlClick.bind(n),n.$container.addEventListener("dblclick",n._onDBlClick),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(t,e);var n=t.prototype;return n.destroy=function(){var t;this.$container.removeEventListener("dblclick",this._onDBlClick),null==(t=this._delegation)||t.destroy(),this._delegation=null,e.prototype.destroy.call(this)},n.addRecType=function(e){var t="";switch(e){case"rec":var n;t=He({title:null==(n=this.locale)?void 0:n.BTN_REC,"data-type":"rec"});break;case"cloudRec":var i;t=Ge({title:null==(i=this.locale)?void 0:i.BTN_CLOUDREC,"data-type":"cloudRec"});break;case"cloudRecord":var r;t=Qe({title:null==(r=this.locale)?void 0:r.BTN_CLOUDRECORD,"data-type":"cloudRecord"})}if(t){var o=this.$container.innerHTML;this.$container.innerHTML=o+t,this._activeIcon(this.recType)}},n._activeIcon=function(e){switch(this.$container.querySelectorAll("."+P+"-icon").forEach((function(e){e.classList.remove(P+"-active")})),e){case"rec":var t;null==(t=this.$container.querySelector("."+P+"-icon-sdk"))||t.classList.add(P+"-active");break;case"cloudRec":var n;null==(n=this.$container.querySelector("."+P+"-icon-cloud-rec"))||n.classList.add(P+"-active");break;case"cloudRecord":var i;null==(i=this.$container.querySelector("."+P+"-icon-cloud-record"))||i.classList.add(P+"-active")}},n._onClickIcon=function(){var e=this;this._delegation=S(this.$container,"."+P+"-icon","click",(function(t){var n=t.delegateTarget;if(!n.classList.contains(P+"-disabled")){var i=n.getAttribute("data-type");e.recType!==i&&(e.recType=i,e._activeIcon(i),e.emit(N.control.recTypeChange,i),null==e._options.onChange||e._options.onChange.call(e._options,i))}}))},n._onControlClick=function(e){},t}(U),Mt={391001:"",395e3:"",395400:"",395402:"",395403:"",395404:"",395405:"",395406:"token",395407:"URL",395409:"",395410:"",395411:"",395412:"",395413:"",395415:"",395416:"",395451:"",395452:"",395454:"",395455:"",395456:"",395457:"",395458:"",395459:"",395460:"",395492:"",395500:"",395501:"",395503:"",395504:"",395505:"",395506:"NVR",395507:"4GAPPAPP",395530:"",395544:"",395545:"",395546:"",395547:"",395556:"",395557:"",395558:"",395560:"",395561:"",395562:"",395563:"",395564:"",395566:"",395567:"",395568:"",395569:"",395600:"",395601:"",395602:"",395610:"",395620:"",395701:"",395702:"",395703:"",396001:"",396099:"",396101:"",396102:"",396103:"",396104:"",396105:"",396106:"",396107:"",396108:"",396109:"",396110:"",396501:"",396502:"",396503:"",396504:"",396505:"",396506:"",396508:"",396509:"",396510:"",396511:"",396512:"",396513:"",396514:"",396515:"",396516:"",396517:"",396518:"",396519:"",396520:"",396700:"",396701:"",397001:"",397002:"",397003:"",397004:"",397005:"",397006:"",397007:"",399e3:"",399001:"",399002:"",399016:"token",399048:"",399049:"",399030:"",3810001:"",3810002:"",3810005:"",3820002:"",3820006:"",3820007:"",3820008:"",3820014:"",3820032:"",3849999:"",386e4:"",3860001:"",3860002:"",3860003:"",3860004:"",3860005:"",3860006:"",3860009:"",3860020:"",BTN_RETRY:"",BTN_RELOAD:"",LOADING:"...",TIMEFORMAT_ERROR:"",USE_MULTITHREADING_WARING:",",OPEN_INSTRUCTIONS:"",INIT_FINSHED:"",INIT_SUCCESS:"",GET_PLAYURL_FAILED:"",VIDEO_LOADING:"",DISCONNECT:"",DEVICE_ENCRYPTED:"",NO_RECORD:"",PLAY_FAILED:"",PLAY_SUCCESS:"",STOP_SUCCESS:"",CHANGE_PLAYURL_SUCCESS:"",CHANGE_PLAYURL_FAILED:"",GET_OSD_TIME:"OSD",GET_OSD_TIME_FAILED:"OSD",SET_POSTER:"",RESIZE:"",SPEED:"",SPEED_RATE:"",SPEED_CANCEL:"",GET_SPEED:"",MAX_SPEED_LIMIT:"4",MIN_SPEED_LIMIT:"0.5",SEEK_CANNOT_CROSS_DAYS:"seek",SEEK_TIMEFORMAT_ERROR:"seek",PAUSE:"",PAUSE_FAILED:"",RESUME:"",RESUME_FAILED:"",CALL_END:"",USER_DO_NOT_OWN_DEVICE:"loadingSetTextWithBtn",NO_CLOUD_RECORD:"",CHANGE_VIDEO_LEVEL:"",CHANGE_VIDEO_LEVEL_FAIL:"",GET_VIDEO_LEVEL_LIST:"",PLEASE_INPUT_RIGHT_VIDEO_LEVEL:"",VIDEO_LEVEL_NOT_SUPPORT:"",VIDEO_LEVEL_AUTO:"",VIDEO_LEVEL_FLUENT:"",VIDEO_LEVEL_STANDARD:"",VIDEO_LEVEL_HEIGH:"",VIDEO_LEVEL_SUPER:"",VIDEO_LEVEL_EXTREME:"",VIDEO_LEVEL_3K:"3K",VIDEO_LEVEL_4k:"4K",RESET_THEME:"",BTN_PLAY:"",BTN_PAUSE:"",BTN_VOLUME:"",BTN_MUTED:"",BTN_RECORDVIDEO:"",BTN_CAPTURE:"",BTN_TALK:"",BTN_ZOOM:"",BTN_3D_ZOOM:"3D",BTN_PTZ:"",BTN_GLOBAL_FULLSCREEN:"",BTN_EXIT_GLOBAL_FULLSCREEN:"",BTN_FULLSCREEN:"",BTN_EXIR_FULLSCREEN:"",BTN_HD:"",BTN_SPEED:"",BTN_CLOUDREC:"",BTN_CLOUDRECORD:"",BTN_REC:"",BTN_CALENDAR:"",BTN_MORE:"",DEVICE_NAME:"",DEVICE_ID:"",CAPTURE_SUCCESS:"",CAPTURE_FAILED:"",START_RECORD_SUCCESS:"",START_RECORD_FAILED:"",STOP_RECORD_SUCCESS:"",STOP_RECORD_FAILED:"",RECORD_TIPS:"",RECORDS:"",OPEN_SOUND:"",CLOSE_SOUND:"",SOUND_OPENED:"",ZOOM:"",START_ZOOM:"",CLOSE_ZOOM:"",ZOOM_ADD:"+",ZOOM_SUB:"-",ZOOM_ADD_MAX:"{{zoom}}X",ZOOM_SUB_MIN:"{{zoom}}X",ZOOM_LIMIT_MAX:"{{zoom}}X",ZOOM_LIMIT_MIN:"{{zoom}}X",ZOOM_NOT_ENABLED:"","3D_ZOOM":"3D","3D_ZOOM_DISABLE":"3D","3D_ZOOM_FAILED":"3D",START_3D_ZOOM:"3D",CLOSE_3D_ZOOM:"3D",DEVICE_NOT_SUPPORT_3D_ZOOM:"3D","3D_ZOOM_ACTIVED":"3D","3D_ZOOM_NOT_ACTIVED":"3D","3D_ZOOM_CLOSED":"3D",CHANGE_ZOOM_TYPE:"",FULLSCREEN:"",FULLSCREEN_EXIT:"",GET_WEB_FULLSCREEN_STATUS:"",WEB_FULLSCREEN:"",WEB_FULLSCREEN_EXIT:"",DESTROY:"",GET_CAPACITY:"",GET_PTZ_STATUS:"",GET_PTZ_STATUS_FAILED:"Theme",MOBILE_HIDE_PTZ:"",OPTION_PTZ_FAILED:"Theme",MOBILE_PTZ_TIPS:"",PTZ_FAST:"",PTZ_MID:"",PTZ_SLOW:"",PTZ_SPEED:"",DEVICE_ZOOM:"/",DEVICE_FOCUS:"",NOT_SUPPORT_DEVICE_ZOOM:"",NOT_SUPPORT_FOCUS:"",MIRROR:"",MIRROR_TYPE_ERROR:"",CHANGE_FEC_TYPE:"",DEVICE_NOT_SUPPORT:"",TYPE_NOT_SUPPORT:"",FEC_SUPPORT_VERSION:"V3",NO_CANVAS_ID:"canvas id",SET_FEC_PARAMS:"3D",GET_FEC_PARAMS:"3D",SET_FEC_PARAMS_FAILED:"3D",GET_FEC_PARAMS_FAILED:"3D",GET_FEC_PARAMS_SUPPORT_VERSION:"V33D",SET_WATERMARK:"",FETCH_THEME_FAILED:"",cancel:"",ok:"",close:""},Nt={391001:"Illegal streaming address or port",395e3:"Internal service exception, please try again later",395400:"Preview streaming parameter exception",395402:"Device has no recording in the current time period, please select another time period",395403:"Service exception, please try again or contact customer service",395404:"The device is not online, Please optimize the network and restart the device to try again",395405:"Device side network is poor, please check and optimize the network and restart the device to try again",395406:"Token expired, please try again",395407:"Client URL format error",395409:"Service exception, please try again or contact customer service",395410:"Service exception, please try again or contact customer service",395411:"No permission to view the current device",395412:"Service exception, please try again or contact customer service",395413:"Service exception, please try again or contact customer service",395415:"Device channel error",395416:"The current number of viewing channels has reached the maximum limit of the device. Please restart the device or contact the device after-sales service",395451:"The device does not support this bitstream type. Please check the device channel support or contact the hardware after-sales service",395452:"The network on the device side is poor. Please check and optimize the network and restart the device to try again",395454:"The network on the device side is poor. Please check and optimize the network and restart the device to try again",395455:"The device channel is abnormal. Please check the channel configuration and try again",395456:"The device channel is abnormal. Please check the channel configuration and try again",395457:"Service exception, please try again or contact customer service",395458:"Service exception, please try again or contact customer service",395459:"Service exception, please try again or contact customer service",395460:"Service exception, please try again or contact customer service",395492:"Service exception, please try again or contact customer service",395500:"Service exception, please try again or contact customer service",395501:"Service exception, please try again or contact customer service",395503:"Service exception, please try again or contact customer service",395504:"Service exception, please try again or contact customer service",395505:"Service exception, please try again or contact customer service",395506:"Direct streaming of this device is not supported at present, please try again or contact customer service after connecting to NVR",395507:"Device 4G unlimited traffic package only supports EZVIZ Cloud Video APP, please contact APP customer service to change the package",395530:"Service exception, please try again or contact customer service",395544:"Video source does not exist, please check device configuration",395545:"Service exception, please try again or contact customer service",395546:"The number of simultaneous viewers has reached the maximum limit of the account, please contact customer service",395547:"The number of simultaneous viewers has reached the maximum limit of the account, please contact customer service",395556:"Service exception, please try again or contact customer service",395557:"Device streaming failed, please contact hardware after-sales",395558:"Error in finding the start time of recording",395560:"Service exception, please try again or contact customer service",395561:"Service exception, please try again or contact customer service",395562:"Service exception, please try again or contact customer service",395563:"Service exception, please try again or contact customer service",395564:"Service exception, please try again or contact customer service",395566:"Service exception, please try again or contact customer service",395567:"Service exception, please try again or contact customer service",395568:"Service exception, please try again or contact customer service",395569:"Service exception, please try again or contact customer service",395600:"Service exception, please try again or contact customer service",395601:"Service exception, please try again or contact customer service",395602:"Service exception, please try again or contact customer service",395610:"Service exception, please try again or contact customer service",395620:"Service exception, please try again or contact customer service",395701:"Service exception, please try again or contact customer service",395702:"Service exception, please try again or contact customer service",395703:"Service exception, please try again or contact customer service",396001:"Service exception, please try again or contact customer service",396099:"Service exception, please try again or contact customer service",396101:"Service exception, please try again or contact customer service",396102:"Service exception, please try again or contact customer service",396103:"Service exception, please try again or contact customer service",396104:"Service exception, please try again or contact customer service",396105:"Device abnormality, please try again or contact customer service",396106:"Device channel abnormality, please check the channel configuration and try again",396107:"Device abnormality, please try again or contact customer service",396108:"Service exception, please try again or contact customer service",396109:"Service exception, please try again or contact customer service",396110:"Device abnormality, please try again or contact customer service",396501:"Device abnormality, please try again or contact customer service",396502:"Device abnormality, please try again or contact customer service",396503:"Device abnormality, please try again or contact customer service",396504:"Device abnormality, please try again or contact customer service",396505:"Device abnormality, please try again or contact customer service",396506:"Device abnormality, please try again or contact customer service",396508:"Device abnormality, please try again or contact customer service",396509:"Device abnormality, please try again or contact customer service",396510:"Device abnormality, please try again or contact customer service",396511:"Device abnormality, please try again or contact customer service",396512:"Device abnormality, please try again or contact customer service",396513:"Device abnormality, please try again or contact customer service",396514:"Device abnormality, please try again or contact customer service",396515:"Device abnormality, please try again or contact customer service",396516:"Device abnormality, please try again or contact customer service",396517:"Device abnormality, please try again or contact customer service",396518:"Device abnormality, please try again or contact customer service",396519:"Device network abnormality, please check and optimize the network and restart the device to try again",396520:"Device network abnormality, please check and optimize the network and restart the device to try again",396700:"Service exception, please try again or contact customer service",396701:"Playback ends",397001:"Service exception, please try again or contact customer service",397002:"Service exception, please try again or contact customer service",397003:"Service exception, please try again or contact customer service",397004:"Service exception, please try again or contact customer service",397005:"Device streaming connection is disconnected, please check the network and try again",397006:"Service exception, please try again or contact customer service",397007:"Service exception, please try again or contact customer service",399e3:"Service exception, please try again or contact customer service",399001:"Client network timeout",399002:"Service exception, please try again or contact customer service",399016:"Token invalid, please update and retry",399048:"The number of simultaneous viewers has reached the maximum account limit, please contact customer service",399049:"The number of simultaneous viewers has reached the maximum account limit, please contact customer service",399030:"Stream retrieval failed, please try again",3810001:"Operation failed",3810002:"Account exception, operation failed",3810005:"Account exception, operation failed",3820002:"Device does not exist, please check the device connection status",3820006:"Operation failed, please check the network condition of the device",3820007:"Operation failed, please check the network condition of the device",3820008:"The operation is too frequent, please try again later",3820014:"Operation failed",3820032:"The channel does not exist. Please check the device connection status",3849999:"Operation failed, please try again",386e4:"Operation failed, the device does not support this operation",3860001:"Operation failed, user does not have permission",3860002:"The device has been rotated to the upper limit position",3860003:"The device has been rotated to the lower limit position",3860004:"The device has rotated to the left limit position",3860005:"The device has been rotated to the right limit position",3860006:"Operation failed, please try again",3860009:"The device is currently in operation",3860020:"Operation failed",BTN_RETRY:"Retry",BTN_RELOAD:"Reload",LOADING:"loading...",TIMEFORMAT_ERROR:"The time format is wrong, please confirm",USE_MULTITHREADING_WARING:"Your current browser can enable the multi-threaded feature of Google Labs to get a better playback experience and avoid browser freezes and crashes. For details, see:",OPEN_INSTRUCTIONS:"Enablement instructions",INIT_FINSHED:"Initialize the player completed",INIT_SUCCESS:"Initialize the player successfully",GET_PLAYURL_FAILED:"Failed to obtain the playback address",VIDEO_LOADING:"Video loading",DISCONNECT:"Connection disconnected, please try again",DEVICE_ENCRYPTED:"Device encrypted",NO_RECORD:"No video clips found",PLAY_FAILED:"Play failed, please check the device and client network",PLAY_SUCCESS:"Play successfully",STOP_SUCCESS:"Stop successfully",CHANGE_PLAYURL_SUCCESS:"Switch the playback address successfully",CHANGE_PLAYURL_FAILED:"Switch the playback address failed",GET_OSD_TIME:"Get OSD time",GET_OSD_TIME_FAILED:"Failed to get OSD time",SET_POSTER:"Set the player cover",RESIZE:"Adjust the player size",SPEED:"speeds",SPEED_RATE:"X",SPEED_CANCEL:"Cancel",GET_SPEED:"Get the current playback rate",MAX_SPEED_LIMIT:"The maximum playback speed is 4 times the speed",MIN_SPEED_LIMIT:"The minimum playback speed is 0.5 times the speed",SEEK_CANNOT_CROSS_DAYS:"The seek time cannot cross dates",SEEK_TIMEFORMAT_ERROR:"The seek time format is wrong",PAUSE:"Pause",PAUSE_FAILED:"Pause failed",RESUME:"Resume playback",RESUME_FAILED:"Resume playback failed",CALL_END:"Call ended",USER_DO_NOT_OWN_DEVICE:"loadingSetTextWithBtn",NO_CLOUD_RECORD:"The device has no cloud recorded video on that day",CHANGE_VIDEO_LEVEL:"Switch definition",CHANGE_VIDEO_LEVEL_FAIL:"Switch definition failed",GET_VIDEO_LEVEL_LIST:"Get the definition list supported by the device",PLEASE_INPUT_RIGHT_VIDEO_LEVEL:"Please enter the correct definition",VIDEO_LEVEL_NOT_SUPPORT:"The current device does not support this definition",VIDEO_LEVEL_AUTO:"Auto",VIDEO_LEVEL_FLUENT:"Fluent",VIDEO_LEVEL_STANDARD:"Standard",VIDEO_LEVEL_HEIGH:"heigh",VIDEO_LEVEL_SUPER:"Super",VIDEO_LEVEL_EXTREME:"Extreme",VIDEO_LEVEL_3K:"3K",VIDEO_LEVEL_4k:"4K",RESET_THEME:"Reset theme",BTN_PLAY:"Play",BTN_PAUSE:"Pause",BTN_VOLUME:"Volume",BTN_MUTED:"Muted",BTN_RECORDVIDEO:"Screen recording",BTN_CAPTURE:"Screenshot",BTN_TALK:"Intercom",BTN_ZOOM:"Electronic zoom",BTN_3D_ZOOM:"3D positioning",BTN_PTZ:"PTZ control",BTN_GLOBAL_FULLSCREEN:"Global fullscreen",BTN_EXIT_GLOBAL_FULLSCREEN:"Exit global fullscreen",BTN_FULLSCREEN:"Fullscreen",BTN_EXIR_FULLSCREEN:"Exit fullscreen",BTN_EXPEND:"Global full screen",BTN_WEBEXPEND:"Web page full screen",BTN_HD:"Image definition",BTN_SPEED:"Playback speed",BTN_CLOUDREC:"Cloud storage playback",BTN_CLOUDRECORD:"Cloud recording",BTN_REC:"Local storage",BTN_CALENDAR:"Calendar",BTN_MORE:"More",DEVICE_NAME:"Device name",DEVICE_ID:"Device serial number",CAPTURE_SUCCESS:"Screenshot successful",CAPTURE_FAILED:"Screenshot failed",START_RECORD_SUCCESS:"Start recording successful",START_RECORD_FAILED:"Screenshot failed",STOP_RECORD_SUCCESS:"Stop recording successful",STOP_RECORD_FAILED:"Stop recording failed",RECORD_TIPS:"Today's recording",RECORDS:" in total",OPEN_SOUND:"Turn on sound",CLOSE_SOUND:"Turn off sound",SOUND_OPENED:"There is already a picture playing sound at the moment",ZOOM:"Electronic zoom",START_ZOOM:"Turn on electronic zoom",CLOSE_ZOOM:"Turn off electronic zoom",ZOOM_ADD:"+",ZOOM_SUB:"-",ZOOM_ADD_MAX:"It has been enlarged to a maximum magnification of {{zoom}}X",ZOOM_SUB_MIN:"It has been reduced to the minimum multiple of {{zoom}}X",ZOOM_LIMIT_MAX:"Exceeding maximum magnification of {{zoom}}X",ZOOM_LIMIT_MIN:"Exceeding the minimum magnification of {{zoom}}X",ZOOM_NOT_ENABLED:"Zoom not enabled","3D_ZOOM":"3D positioning","3D_ZOOM_DISABLE":"3D positioning function not enabled","3D_ZOOM_FAILED":"3D positioning failed, please try again",START_3D_ZOOM:"Turn on 3D positioning",CLOSE_3D_ZOOM:"Turn off 3D positioning",DEVICE_NOT_SUPPORT_3D_ZOOM:"Current device does not support 3D positioning function","3D_ZOOM_ACTIVED":"3D positioning is already enabled","3D_ZOOM_NOT_ACTIVED":"3D positioning function is not enabled","3D_ZOOM_CLOSED":"3D positioning is already disabled",CHANGE_ZOOM_TYPE:"Change zoom mode",FULLSCREEN:"Global full screen",FULLSCREEN_EXIT:"Exit global full screen",GET_WEB_FULLSCREEN_STATUS:"Get browser web page full screen status",WEB_FULLSCREEN:"Turn on web page full screen",WEB_FULLSCREEN_EXIT:"Exit full screen webpage",DESTROY:"Destroy",GET_CAPACITY:"Get device capability level",GET_PTZ_STATUS:"Get current PTZ status",GET_PTZ_STATUS_FAILED:"Theme module is not loaded, PTZ status cannot be obtained",MOBILE_HIDE_PTZ:"Mobile terminal, PTZ is not displayed in non-full screen state",OPTION_PTZ_FAILED:"Theme module is not loaded, PTZ cannot be operated",MOBILE_PTZ_TIPS:"Adjust camera angle by manipulating gimbal",PTZ_FAST:"F",PTZ_MID:"M",PTZ_SLOW:"S",PTZ_SPEED:"Adjust the PTZ rotation speed",DEVICE_ZOOM:"Control the device to zoom in/out of the screen",DEVICE_FOCUS:"Adjusting the device's focal length",NOT_SUPPORT_DEVICE_ZOOM:"Device does not support physical zoom",NOT_SUPPORT_FOCUS:"Device does not support adjusting the focal length",MIRROR:"Mirror flip",MIRROR_TYPE_ERROR:"Flip parameter type error",CHANGE_FEC_TYPE:"Switch fisheye correction type",DEVICE_NOT_SUPPORT:"Device does not support fisheye mode",TYPE_NOT_SUPPORT:"Fisheye correction type is not supported temporarily",FEC_SUPPORT_VERSION:"Currently only V3 software solution supports fisheye correction",NO_CANVAS_ID:"Fisheye correction type requires split screen, but the correct split screen canvas id is not passed",SET_FEC_PARAMS:"Set 3D correction perspective parameters",GET_FEC_PARAMS:"Get 3D correction perspective parameters",SET_FEC_PARAMS_FAILED:"This correction type cannot set 3D correction perspective parameters",GET_FEC_PARAMS_FAILED:"This correction type cannot get 3D correction perspective parameters",GET_FEC_PARAMS_SUPPORT_VERSION:"Currently only V3 software solution supports fisheye correction Get 3D correction perspective parameters",SET_WATERMARK:"Set watermark",FETCH_THEME_FAILED:"Failed to fetch theme template",cancel:"Cancel",ok:"Ok",close:"Close"},$t={autoFocus:3,footer:{btnList:[{iconId:"play",part:"left",isrender:1},{iconId:"volume",part:"left",defaultActive:1,isrender:1},{iconId:"fullscreen",part:"right",defaultActive:0,isrender:1},{iconId:"globalFullscreen",part:"right",defaultActive:0,isrender:1}]}},Ft={pcLive:{autoFocus:3,header:{btnList:[{iconId:"deviceID",part:"left",isrender:1},{iconId:"deviceName",part:"left",isrender:1}]},footer:{btnList:[{iconId:"play",part:"left",isrender:1},{iconId:"capturePicture",part:"left",isrender:1},{iconId:"sound",part:"left",isrender:1},{iconId:"pantile",part:"left",isrender:1},{iconId:"recordvideo",part:"left",isrender:1},{iconId:"talk",part:"left",isrender:1},{iconId:"zoom",part:"left",isrender:1},{iconId:"hd",part:"right",isrender:1},{iconId:"webExpend",part:"right",isrender:1},{iconId:"expend",part:"right",isrender:1}]}},pcRec:{header:{btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:1},{iconId:"cloudRecord",part:"right",defaultActive:0,isrender:1},{iconId:"rec",part:"right",defaultActive:0,isrender:1}]},footer:{btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},mobileLive:{header:{btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1}]},footer:{btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1}]}},mobileRec:{header:{btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"rec",part:"right",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:1},{iconId:"cloudRecord",part:"right",defaultActive:0,isrender:1}]},footer:{btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1}]}},security:{header:{btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1}]},footer:{btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1}]}},voice:{header:{btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1}]},footer:{btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1}]}}};function jt(e,t){return jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jt(e,t)}var Ut=function(e){function t(t){var n;((n=e.call(this)||this)._scaleMode=0,n._originWidth=0,n._originHeight=0,n._width=0,n._height=0,n.options=t,n._scaleMode=t.scaleMode||0,n.$wrapper=document.createElement("div"),n.$wrapper.className=P+"-content-wrapper",n.$content=document.createElement("div"),n.$content.className=P+"-content",n.$video=document.createElement("div"),n.$video.className=P+"-content-video",n.$content.appendChild(n.$video),n.$wrapper.appendChild(n.$content),"function"==typeof t.getContainer)&&t.getContainer().appendChild(n.$wrapper);return n.on(N.videoInfo,(function(e,t){n._rerender(e,t)})),n.on(N.resize,(function(){n._rerender()})),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(t,e);var n=t.prototype;return n._rerender=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.$wrapper.clientWidth,i=this.$wrapper.clientHeight;if(this._width!==n||this._height!==i||this._originWidth!==e||this._originHeight!==t){this._width=n,this._height=i,e>0&&t>0&&(this._originWidth=e,this._originHeight=t);var r="contain";if(this._scaleMode===D&&(r="fill"),this._scaleMode===z&&(r="cover"),n>0&&i>0&&this._originWidth>0&&this._originHeight>0&&this.$video){var o=(n-this._originWidth)/2,a=(i-this._originHeight)/2,s=n/this._originWidth,l=i/this._originHeight,c=s>l?l:s;this._scaleMode!==L&&s!==l&&(c=s+","+l),this._scaleMode===z&&(c=s>l?s:l),this.$video.style.cssText+="\n        width: "+this._originWidth+"px;\n        height: "+this._originHeight+"px;\n        position: absolute;\n        object-fit:"+r+";\n        left: "+o+"px;\n        top: "+a+"px;\n        transform-origin: 50% 50%;\n        transform: scale("+c+");\n      ",this.emit(N.control.contentRerender,{scaleMode:this._scaleMode,objectFill:r,scale:c,width:this._originWidth,height:this._originHeight})}}},n.setScaleMode=function(e){void 0===e&&(e=0),this._scaleMode=e,this._rerender()},n.destroy=function(){var e;this.$video&&(this.$video.remove(),this.$video=null),this.$content&&(this.$content.remove(),this.$content=null),null==(e=this.$wrapper)||e.remove(),this.$wrapper=null,this.emit(N.control.contentDestroy),this.removeAllListeners()},t}(A);function Bt(){return Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Bt.apply(this,arguments)}function Vt(e,t){return Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vt(e,t)}var Yt=function(e){function t(t){var n;return(n=e.call(this,Bt({},t,{tagName:"span",controlType:"button",classNameSuffix:"more"}))||this).list=[],n.options=t,n._render(),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(t,e);var n=t.prototype;return n._render=function(){var e,t,n=this;this.$container.innerHTML=mt.isMobile?Be({title:null==(e=this.locale)?void 0:e.BTN_MORE}):Ve({title:null==(t=this.locale)?void 0:t.BTN_MORE}),this.picker=new y(this.$container,{getPopupContainer:function(){return n.$container},trigger:mt.isMobile?"click":"hover",wrapClassName:P+"-more "+this.options.wrapClassName,open:!!this.options.open,isMobile:!1,offset:this.options.offset||[0,0],placement:this.options.placement||"tr",onOpenChange:this.options.onOpenChange}),this.picker.$body&&(this.$panel=document.createElement("div"),this.$panel.classList.add(P+"-more-panel"),this.picker.$body.appendChild(this.$panel),this.picker.$body.addEventListener("dblclick",this._onDBlClick))},n.add=function(e,t,n){this.list.unshift({part:t,key:e,control:n})},n.remove=function(e){var t=this.list.findIndex((function(t){return t.control===e}));-1!==t&&this.list.splice(t,1)},n.destroy=function(){var t;(this.list=[],this.picker)&&(null==(t=this.picker.$body)||t.removeEventListener("dblclick",this._onDBlClick),this.picker.destroy(),this.picker=null);e.prototype.destroy.call(this)},n._onControlClick=function(e){},t}(U);function Zt(e,t){var n;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=this;clearTimeout(n),n=setTimeout((function(){return e.apply(a,r)}),t)}}var Ht=[N.getOSDTime,N.setAllDayRecTimes,N.talkVolumeChange];function Gt(e,t){Object.values(t).forEach((function(t){var n=t;Ht.includes(n)||("string"==typeof n?e.on(n,(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];try{e.logger.log("[Event]",n,JSON.stringify(i))}catch(t){var o;(o=e.logger).warn.apply(o,[].concat(["[Event]",n],i))}})):"[object Object]"===Object.prototype.toString.call(n)&&Gt(e,t))}))}function Qt(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}function Kt(){return Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Kt.apply(this,arguments)}function Wt(e,t){return Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wt(e,t)}var qt,Jt,Xt={open:!1,max:8},en=function(e){function t(t){var n;return(n=e.call(this,Kt({},t,{tagName:"span",controlType:"button",classNameSuffix:"zoom"}))||this)._value=1,n._isRotated=!1,n._options=Object.assign({},Xt,t||{}),n._render(),n.emit(N.zoomChange,(function(e){n._progress&&(n.value=e)})),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(t,e);var n=t.prototype;return n._render=function(){var e,t,n,i,r=this;this.$container.innerHTML=Ue({title:null==(e=this.locale)?void 0:e.BTN_ZOOM}),this._$zoomPanel=document.createElement("div"),this._$zoomPanel.className=P+"-zoom-panel "+P+"-hide",null==(t=this._options.rootContainer)||t.appendChild(this._$zoomPanel);var o=this._options.max<=1?8:Math.floor(this._options.max);this._isRotated=!!(null==(n=this._options.props)?void 0:n.isCurrentFullscreen)&&[0,180].includes(null==(i=this._options.props)?void 0:i.orientationAngle),this._progress=new vt({container:this._$zoomPanel,defaultValue:1,range:[1,o],step:1,showMinus:!0,showPlus:!0,showPercent:!0,isRotated:this._isRotated,onChange:function(e,t,n){e!==r._value&&(r._value=e,null==r._options.onChange||r._options.onChange.call(r._options,e,t,n),r.emit(N.control.zoomChange,e,t,n))},renderText:function(e){return e+"X"}})},n.reset=function(t){var n,i;this.active&&(null==(i=this._$zoomPanel)||null==(n=i.classList)||n.add(P+"-hide"),this._progress.value=1,this.active=!1,e.prototype.reset.call(this,t))},n.destroy=function(){var t;this._options.rootContainer&&this._$zoomPanel&&(null==(t=this._options.rootContainer)||t.removeChild(this._$zoomPanel),this._$zoomPanel=null);e.prototype.destroy.call(this)},n._onControlClick=function(t){this.active=!this.active,e.prototype._onControlClick.call(this,t)},Qt(t,[{key:"value",get:function(){return this._value},set:function(e){this._progress&&this._value!==e&&(this._progress.value=e,this._value=e)}},{key:"active",get:function(){return this._active},set:function(e){var t,n,i,r;(this._active=e,this._updateActiveState(e),this.active)?(null==(n=this._$zoomPanel)||null==(t=n.classList)||t.remove(P+"-hide"),this.emit(N.control.zoomPanelOpenChange,!0)):(null==(r=this._$zoomPanel)||null==(i=r.classList)||i.add(P+"-hide"),this._progress.value=1,this.emit(N.control.zoomPanelOpenChange,!1))}},{key:"isRotated",get:function(){return this._isRotated},set:function(e){this._progress&&this._progress.isRotate(e)}}]),t}(U);function tn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}
/*
* @ezuikit/control-zoom v0.0.2
* Copyright (c) 2025-11-12 Ezviz-OpenBiz
* Released under the MIT License.
*/var nn=function(){if(Jt)return qt;function e(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}Jt=1;var t=[0,0],n={initialZoom:1,defaultCursor:"pointer",scrollVelocity:.1,animDuration:.25,allowZoom:!0,allowPan:!0,onChange:function(){},onTranslateChange:function(){},onTap:function(){},max:8,min:1,zoomStep:.1,allowTouchEvents:!1,allowWheel:!0,ignoredMouseButtons:[],doubleTouchMaxDelay:300,decelerationDuration:750},i=function(){function i(e,i){var r=this;this._dragging=!1,this.destroy=function(){r.setAllowZoom(!1),r.reset(),r.removeEventListeners()},this.setTransform=function(e){r.transform=e},this.getTransform=function(){return r.transform},this.updateTranslate=function(){var e=0,t=0;e=r.percentPos[0]<0?r.percentPos[0]<-.5*(r.zoom-1)?-.5*(r.zoom-1):r.percentPos[0]:r.percentPos[0]>.5*(r.zoom-1)?.5*(r.zoom-1):r.percentPos[0],t=r.percentPos[1]<0?r.percentPos[1]<-.5*(r.zoom-1)?-.5*(r.zoom-1):r.percentPos[1]:r.percentPos[1]>.5*(r.zoom-1)?.5*(r.zoom-1):r.percentPos[1],r.percentPos=[e,t]},this.update=function(){r.container&&(r.updateTranslate(),r.container.style.transition="transform ease-out "+r.transition+"s",r.container.style.transform="translate3d("+100*r.percentPos[0]+"%, "+100*r.percentPos[1]+"%, 0) scale("+r.zoom+")")},this.setAllowZoom=function(e){r.options.allowZoom=e},this.setZoom=function(e,t){e=parseFloat(e.toFixed(r.getPrecision(r.options.zoomStep))),r.zoom!==e&&(r.zoom=e,r.update(),null==r.options.onChange||r.options.onChange.call(r.options,+r.zoom.toFixed(r.getPrecision(r.options.zoomStep)),t))},this.getZoom=function(){return r.zoom},this.setPos=function(e){var t,n,i=null==(t=r.container)?void 0:t.clientWidth,o=null==(n=r.container)?void 0:n.clientHeight;+r.pos[0]===e[0]&&+r.pos[1]===e[1]||(r.percentPos=[e[0]/i,e[1]/o],r.update(),null==r.options.onTranslateChange||r.options.onTranslateChange.call(r.options,{posX:e[0],posY:e[1]}))},this.setTransitionDuration=function(e){r.transition=e,r.update()},this.setCursor=function(e){r.container&&(r.container.style.cssText+="cursor:"+e+";",r.cursor=e)},this.zoomIn=function(e){var t,n,i=r.pos[0],o=r.pos[1],a=r.zoom,s=a+e<(null!=(t=r.options.max)?t:8)?a+e:null!=(n=r.options.max)?n:8;s!==a&&(i=i*(s-1)/(a>1?a-1:a),o=o*(s-1)/(a>1?a-1:a)),r.setZoom(s),r.setPos([i,o]),r.setTransitionDuration(r.options.animDuration)},this.zoomOut=function(e){var t,n,i=r.pos[0],o=r.pos[1],a=r.zoom,s=a-e>(null!=(t=r.options.min)?t:1)?a-e:null!=(n=r.options.min)?n:1;s!==a&&(i=i*(s-1)/(a-1),o=o*(s-1)/(a-1)),r.setZoom(s),r.setPos([i,o]),r.setTransitionDuration(r.options.animDuration)},this.zoomToZone=function(e,t,n,i){var o;if(r.container){var a,s=r.pos[0],l=r.pos[1],c=(null==(o=r.container)?void 0:o.parentNode).getBoundingClientRect(),d=r.zoom,u=c.width/n,p=c.height/i,h=Math.min(u,p,null!=(a=r.options.max)?a:8),m=r.container.getBoundingClientRect(),A=[m.width/d/2,m.height/d/2],f=[e+n/2,t+i/2];s=(A[0]-f[0])*h,l=(A[1]-f[1])*h,r.setZoom(h),r.setPos([s,l]),r.setTransitionDuration(r.options.animDuration)}},this.getNewPosition=function(e,n,i){var o=[r.zoom,r.pos[0],r.pos[1]][0];if(1===i||!r)return t;var a=[r.container.clientWidth,r.container.clientHeight],s=a[0],l=a[1];if(i>o)return[0,0];var c=-(e-s/2)/(s/2)*i/2,d=-(n-l/2)/(l/2)*i/2;return c>i/2-.5&&(c=3.5),d>i/2-.5&&(d=3.5),[s*c,l*d]},this.fullZoomInOnPosition=function(e,t){var i,o=null!=(i=r.options.max)?i:n.max;r.setZoom(null!=o?o:n.max),r.setPos(r.getNewPosition(e,t,o)),r.setTransitionDuration(r.options.animDuration)},this.getLimitedShift=function(e,t,n,i,r){if(e>0){if(i>t)return 0;if(i+e>t)return t-i}else if(e<0){if(r<n)return 0;if(r+e<n)return n-r}return e},this.getCursor=function(e,t){return e&&t?"move":e?"ew-resize":t?"ns-resize":"auto"},this.move=function(e,t,n){if(void 0===n&&(n=0),r.container){var i=r.pos[0],o=r.pos[1],a=r.container.getBoundingClientRect(),s=r.container.parentNode.getBoundingClientRect(),l=r.transform?t:e,c=r.transform?e:t,d=r.transform?[a.height>s.bottom-s.top,c>0&&a.top-s.top<0,c<0&&a.bottom-s.bottom>0]:[a.width>s.right-s.left,l>0&&a.left-s.left<0,l<0&&a.right-s.right>0],u=d[0]||d[1]||d[2];u&&(r.transform?i+=r.getLimitedShift(c,s.top,s.bottom,a.top,a.bottom):i+=r.getLimitedShift(l,s.left,s.right,a.left,a.right));var p=r.transform?[a.width>s.right-s.left,l>0&&a.right-s.right<0,l<0&&a.left-s.left>0]:[a.height>s.bottom-s.top,c>0&&a.top-s.top<0,c<0&&a.bottom-s.bottom>0],h=p[0]||p[1]||p[2];if(h)if(r.transform){o+=function(e,t,n,i,r){if(e>0){if(r<n+1)return 0;if(r+e<n+1)return n-r}else if(e<0){if(i+1>t)return 0;if(i+1+e>t)return t-i}return e}(l,s.left,s.right,a.left,a.right)}else o+=r.getLimitedShift(c,s.top,s.bottom,a.top,a.bottom);var m=r.getCursor(u,h);r.setPos([i,o]),r.setCursor(m),r.setTransitionDuration(n)}},this.isDoubleTapping=function(){var e,t,n,i,o=(new Date).getTime();return o-(null!=(e=r.lastTouchTime)?e:0)<(null!=(t=r.options.doubleTouchMaxDelay)?t:300)&&o-(null!=(n=r.lastDoubleTapTime)?n:0)>(null!=(i=r.options.doubleTouchMaxDelay)?i:750)?(r.lastDoubleTapTime=o,!0):(r.lastTouchTime=o,!1)},this.startDeceleration=function(e,t){var n=null,i=function(o){null===n&&(n=o);var a,s,l,c=o-n,d=((null!=(a=r.options.decelerationDuration)?a:750)-c)/(null!=(s=r.options.decelerationDuration)?s:750),u=[e*d,t*d],p=u[0],h=u[1];c<(null!=(l=r.options.decelerationDuration)?l:750)&&Math.max(Math.abs(p),Math.abs(h))>1?(r.move(p,h,0),r.lastRequestAnimationId=requestAnimationFrame(i)):r.lastRequestAnimationId=null};r.lastRequestAnimationId=requestAnimationFrame(i)},this.reset=function(){r.setZoom(r.options.initialZoom,!0),r.cursor=r.options.defaultCursor,r.setTransitionDuration(r.options.animDuration),r.setPos(t)},this.addScale=function(e){void 0===e&&(e=1),r.handleZoomAdd(e)},this.handleZoomAdd=function(e){if(void 0===e&&(e=1),r.options.allowZoom&&r.options.allowWheel){var t,n=parseFloat((r.zoom+e).toFixed(r.getPrecision(r.options.zoomStep)));n>(null!=(t=r.options.max)?t:8)&&(n=8),r.setZoom(n),r.setPos(r.pos),r.setTransitionDuration(.05)}},this.subScale=function(e){void 0===e&&(e=1),r.handleZoomSub(e)},this.handleZoomSub=function(e){if(void 0===e&&(e=1),r.options.allowZoom&&r.options.allowWheel){var t=parseFloat((r.zoom-e).toFixed(r.getPrecision(r.options.zoomStep)));t<1&&(t=1),r.setZoom(t),r.setPos(r.pos),r.setTransitionDuration(.05)}},this.handleMouseWheel=function(e){if(e.preventDefault(),r.options.allowZoom&&r.options.allowWheel){var t,n,i=e.deltaY<0?r.options.scrollVelocity:0-r.options.scrollVelocity,o=parseFloat(Math.max(Math.min(r.zoom+i,null!=(t=r.options.max)?t:8),null!=(n=r.options.min)?n:1).toFixed(r.getPrecision(r.options.zoomStep)));r.setZoom(o),r.setTransitionDuration(.05)}},this.handleMouseStart=function(e){var t;e.preventDefault(),r.options.allowPan&&!(null==(t=r.options.ignoredMouseButtons)?void 0:t.includes(e.button))&&(r._dragging=!0,r.lastRequestAnimationId&&cancelAnimationFrame(r.lastRequestAnimationId),r.lastCursor=r.getCoordinates(e))},this.handleMouseMove=function(e){e.preventDefault(),r.options.allowPan&&r.lastCursor&&r._dragging&&r._touchOrMouseDrag(e)},this.handleMouseStop=function(e){e.preventDefault(),r.lastShift&&(r.startDeceleration(r.lastShift[0],r.lastShift[1]),r.lastShift=null),r.lastCursor=null,r.setCursor("auto"),r._dragging=!1},this.handleTouchStart=function(e){var t=r.isDoubleTapping();r.isMultiTouch=e.touches.length,r.options.allowTouchEvents||e.preventDefault(),r.lastRequestAnimationId&&cancelAnimationFrame(r.lastRequestAnimationId);var n=r.getCoordinates(e.touches[0]),i=n[0],o=n[1];if(r.isMultiTouch>1)r.lastCursor=[i,o];else if(t&&r.options.allowZoom)if(1===r.zoom){var a=r.container.getBoundingClientRect();a.top,a.left;var s,l,c=a.x,d=a.y;i=(l=[i-(c=(s=r.transform?[d,c]:[c,d])[0]),o-(d=s[1])])[0],o=l[1],r.fullZoomInOnPosition(i,o)}else r.reset();else r._tapStartTime=(new Date).getTime(),r.options.allowPan&&(r.lastCursor=[i,o])},this.handleTouchMove=function(e){if(r.options.allowTouchEvents||e.preventDefault(),r.lastCursor)if(1===r.isMultiTouch)r._touchOrMouseDrag(e.touches[0]),r.lastTouchDistance=null;else if(r.isMultiTouch>1){var t=r.zoom,n=r.getCoordinates(e.touches[0]),i=n[0],o=n[1],a=r.getCoordinates(e.touches[1]),s=a[0],l=a[1],c=Math.sqrt(Math.pow(s-i,2)+Math.pow(l-o,2));if(r.lastTouchDistance&&c&&c!==r.lastTouchDistance){var d,u,p;if(r.options.allowZoom)if((t+=(c-r.lastTouchDistance)/100)>(null!=(d=r.options.max)?d:8))t=null!=(p=r.options.max)?p:8;else if(t<(null!=(u=r.options.min)?u:1)){var h;t=null!=(h=r.options.min)?h:1}r.setZoom(t),r.setTransitionDuration(0)}r.lastCursor=[i,o],r.lastTouchDistance=c}},this.handleTouchStop=function(){r.lastShift&&(r.startDeceleration(r.lastShift[0],r.lastShift[1]),r.lastShift=null),r._tapStartTime&&(new Date).getTime()-r._tapStartTime<200&&(null==r.options.onTap||r.options.onTap.call(r.options)),r._tapStartTime=void 0,r.lastCursor=null,r.lastTouchDistance=null,r.isMultiTouch=0},this.container=e,this.options=Object.assign({},n,i||{}),this.percentPos=t,this.transition=this.options.animDuration,this.zoom=1,this.cursor="auto",this.lastCursor=[0,0],this.lastShift=null,this.lastTouchDistance=null,this.lastRequestAnimationId=null,this.lastTouchTime=(new Date).getTime(),this.lastDoubleTapTime=(new Date).getTime(),this.transform=!1,this.isMultiTouch=1,this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseStart=this.handleMouseStart.bind(this),this.handleMouseStop=this.handleMouseStop.bind(this),this.handleMouseWheel=this.handleMouseWheel.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchStop=this.handleTouchStop.bind(this),this.getZoom=this.getZoom.bind(this),this.setZoom=this.setZoom.bind(this)}var r=i.prototype;return r.setUpEventListeners=function(){var e=this.container;window.matchMedia("(pointer: fine)").matches?(this.options.allowWheel&&(null==e||e.addEventListener("wheel",this.handleMouseWheel,{passive:!1})),null==e||e.addEventListener("mousedown",this.handleMouseStart,{passive:!1}),null==e||e.addEventListener("mousemove",this.handleMouseMove,{passive:!1}),null==e||e.addEventListener("mouseup",this.handleMouseStop,{passive:!1}),null==e||e.addEventListener("mouseleave",this.handleMouseStop,{passive:!1})):(null==e||e.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),null==e||e.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),null==e||e.addEventListener("touchend",this.handleTouchStop,{passive:!1}),null==e||e.addEventListener("touchcancel",this.handleTouchStop,{passive:!1}))},r.removeEventListeners=function(){var e=this.container;window.matchMedia("(pointer: fine)").matches?(this.options.allowWheel&&(null==e||e.removeEventListener("wheel",this.handleMouseWheel)),null==e||e.removeEventListener("mousedown",this.handleMouseStart),null==e||e.removeEventListener("mousemove",this.handleMouseMove),null==e||e.removeEventListener("mouseup",this.handleMouseStop),null==e||e.removeEventListener("mouseleave",this.handleMouseStop)):(null==e||e.removeEventListener("touchstart",this.handleTouchStart),null==e||e.removeEventListener("touchmove",this.handleTouchMove),null==e||e.removeEventListener("touchend",this.handleTouchStop),null==e||e.removeEventListener("touchcancel",this.handleTouchStop))},r.getPrecision=function(e){void 0===e&&(e=1);var t=e.toString();return t.includes(".")?t.split(".")[1].length:1},r.getCoordinates=function(e){var t=this.container.clientHeight,n=this.container.clientTop,i=this.container.clientLeft,r=this.transform?[e.clientY,t-e.clientX]:[e.clientX-n,e.clientY-i];return[r[0],r[1]]},r._touchOrMouseDrag=function(e){if(this.lastCursor){var t=this.getCoordinates(e),n=t[0],i=t[1],r=n-this.lastCursor[0],o=i-this.lastCursor[1];this.move(r,o,0),this.lastCursor=[n,i],this.lastShift=[r,o]}},e(i,[{key:"pos",get:function(){return[this.container.clientWidth*this.percentPos[0],this.container.clientHeight*this.percentPos[1]]}}]),i}();return i.VERSION="0.0.2",qt=i}(),rn=tn(nn);function on(){return on=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},on.apply(this,arguments)}function an(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function sn(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){an(o,i,r,a,s,"next",e)}function s(e){an(o,i,r,a,s,"throw",e)}a(void 0)}))}}function ln(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function cn(e,t){return sn((function(){var n,i,r;return ln(this,(function(o){switch(o.label){case 0:return r=e.options.env.domain+"/api/service/media/template/getDetail?accessToken="+(e.options.accessToken||(null==(i=e.options.token)||null==(n=i.httpToken)?void 0:n.url))+"&id="+t,[4,fetch(r,{method:"GET"}).then((function(e){return sn((function(){return ln(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))()})).then((function(e){if(e.meta){var t,n,i,r;if((null==(n=e.data)||null==(t=n.footer)?void 0:t.btnList)&&mt.isMobile)null==(r=e.data)||null==(i=r.footer)||i.btnList.forEach((function(t,n){var i,r;"webExpend"===t.iconId?(null==(r=e.data)||null==(i=r.footer)?void 0:i.btnList)[n]={}:"expend"===t.iconId&&(t.iconId="webExpend")}));return e.data||null}return null}))];case 1:return[2,o.sent()]}}))}))()}function dn(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function un(){return un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},un.apply(this,arguments)}function pn(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var hn={sound:"volume",webExpend:"fullscreen",expend:"globalFullscreen",pantile:"ptz",recordvideo:"record",hd:"definition"};function mn(e){return[e.filter((function(e){return"left"===e.part})),e.filter((function(e){return"right"===e.part}))]}function An(e,t){return(n=function(){var n,i,r;return pn(this,(function(o){switch(o.label){case 0:return n=t,"string"==typeof t&&t.length<32?"simple"===t?[2,null]:(n=Ft[t],t||(null==(i=e.logger)||i.warn("Theme template "+t+" is not exist!"),n=null),[2,n]):[3,1];case 1:if("string"!=typeof t||32!==t.length)return[3,6];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,cn(e,t)];case 3:return(r=o.sent())?[2,r]:(e.emit(N.message,e.i18n.t("FETCH_THEME_FAILED"),"themeError"),[3,5]);case 4:return o.sent(),e.emit(N.message,e.i18n.t("FETCH_THEME_FAILED"),"themeError"),[3,5];case 5:return[3,7];case 6:return"[object Object]"===Object.prototype.toString.call(t)?[2,t]:[2,null];case 7:return[2]}}))},function(){var e=this,t=arguments;return new Promise((function(i,r){var o=n.apply(e,t);function a(e){dn(o,i,r,a,s,"next",e)}function s(e){dn(o,i,r,a,s,"throw",e)}a(void 0)}))})();var n}function fn(e,t){void 0===t&&(t=.8);return/^#([A-Fa-f0-9]{3,4}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/.test(e)?function(e,t){return void 0===t&&(t=.8),3!==(e=e.replace(/^#/,"")).length&&4!==e.length||(e=e.split("").map((function(e){return e+e})).join("")),"rgba("+parseInt(e.substring(0,2),16)+", "+parseInt(e.substring(2,4),16)+", "+parseInt(e.substring(4,6),16)+", "+t+")"}(e,t):/^rgba?\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*(,\s*[\d.]+)?\s*\)$/.test(e)?function(e,t){void 0===t&&(t=.8);var n=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)\)/);return n?"rgba("+n[1]+", "+n[2]+", "+n[3]+", "+t+")":""}(e,t):""}var vn=function(){function e(e){if(void 0===e&&(e={}),this._options=e,this.$container=document.createElement("div"),this._defaultClass=P+"-"+this._options.cType,this._options.cType&&this.$container.classList.add(this._defaultClass),(null==e?void 0:e.className)&&this.$container.classList.add(e.className),(null==e?void 0:e.color)&&(this.$container.style.cssText+="--"+P+"-default-color: "+e.color+";"),(null==e?void 0:e.activeColor)&&(this.$container.style.cssText+="--"+P+"-active-color: "+e.activeColor+";"),null==e?void 0:e.backgroundColor){var t=fn(null==e?void 0:e.backgroundColor);t?"header"===this._options.cType?t="background: linear-gradient(0deg, transparent 0, "+t+");":"footer"===this._options.cType&&(t="background: linear-gradient(180deg, transparent 0, "+t+");"):t="background: "+(null==e?void 0:e.backgroundColor)+";",this.$container.style.cssText+=t+";"}e.getPopupContainer?this.$popupContainer=null==e.getPopupContainer?void 0:e.getPopupContainer.call(e):this.$popupContainer=document.body,this.$left=document.createElement("div"),this.$left.classList.add(this._defaultClass+"-left"),this.$right=document.createElement("div"),this.$right.classList.add(this._defaultClass+"-right"),this.$container.appendChild(this.$left),this.$container.appendChild(this.$right),this.$popupContainer.appendChild(this.$container)}return e.prototype.destroy=function(){var e;null==(e=this.$popupContainer)||e.removeChild(this.$container)},e}();function gn(){return gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gn.apply(this,arguments)}function yn(e,t){return yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yn(e,t)}var Tn=function(e){function t(t){return void 0===t&&(t={}),e.call(this,gn({},t,{cType:"footer"}))||this}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(t,e),t}(vn);function _n(){return _n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_n.apply(this,arguments)}function bn(e,t){return bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bn(e,t)}var Cn=function(e){function t(t){return void 0===t&&(t={}),e.call(this,_n({},t,{cType:"header"}))||this}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bn(e,t)}(t,e),t}(vn);function Sn(){return Sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sn.apply(this,arguments)}function En(e,t){return En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},En(e,t)}var wn=function(e){function t(t){return e.call(this,Sn({},t,{controlType:"button",classNameSuffix:"global-fullscreen"}))||this}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(t,e);var n=t.prototype;return n._render=function(){var e,t;this.$container.innerHTML=Oe({title:null==(e=this.locale)?void 0:e.BTN_EXIT_GLOBAL_FULLSCREEN})+Ie({title:null==(t=this.locale)?void 0:t.BTN_GLOBAL_FULLSCREEN})},n._onControlClick=function(){var e,t;this.isCurrentFullscreen&&this._$rootContainer.classList.contains(P+"-global-fullscreen")?(this._$rootContainer.classList.remove(P+"-global-fullscreen"),null==(e=this._fullscreenUtil)||e.exitFullscreen()):(this._$rootContainer.classList.add(P+"-global-fullscreen"),null==(t=this._fullscreenUtil)||t.fullscreen())},t}(xt);function kn(){return kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kn.apply(this,arguments)}function Pn(e,t){return Pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pn(e,t)}var Dn,Ln=function(e){function t(t){var n;return(n=e.call(this,kn({},t,{tagName:"span",classNameSuffix:"capture-picture"}))||this)._timer=null,n.options=t,n._render(),"function"==typeof n.options.onCapture&&n.on(N.control.capturePictureResult,n.options.onCapture),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pn(e,t)}(t,e);var n=t.prototype;return n.destroy=function(){this._timer&&(clearTimeout(this._timer),this._timer=null),e.prototype.destroy.call(this)},n._render=function(){var e;this.$container.innerHTML=Re({title:null==(e=this.locale)?void 0:e.BTN_CAPTURE})},n._onControlClick=function(t){var n,i,r=this;this.active=!0,this.emit(N.control.capturePicture,{type:null!=(n=this.options.type)?n:"download",quality:this.options.quality||.9,cloudRecUpload:null==(i=this.options.cloudRecUpload)||i}),this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=setTimeout((function(){r._timer&&(clearTimeout(r._timer),r._timer=null),r.active=!1}),200),e.prototype._onControlClick.call(this,t)},t}(U),zn={};var xn=function(){if(Dn)return zn;Dn=1;var n=e,i=t,r={language:"zh",env:{domain:"https://open.ys7.com"},accessToken:"",speed:2,locales:{zh:{GET_PTZ_STATUS:"",GET_PTZ_STATUS_FAILED:"Theme",MOBILE_HIDE_PTZ:"",OPTION_PTZ_FAILED:"Theme",MOBILE_PTZ_TIPS:"",PTZ_FAST:"",PTZ_MID:"",PTZ_SLOW:"",PTZ_SPEED:"",DEVICE_ZOOM:"/",DEVICE_FOCUS:""},en:{GET_PTZ_STATUS:"Get current PTZ status",GET_PTZ_STATUS_FAILED:"Theme module is not loaded, PTZ status cannot be obtained",MOBILE_HIDE_PTZ:"Mobile terminal, PTZ is not displayed in non-full screen state",OPTION_PTZ_FAILED:"Theme module is not loaded, PTZ cannot be operated",MOBILE_PTZ_TIPS:"Adjust camera angle by manipulating gimbal",PTZ_FAST:"F",PTZ_MID:"M",PTZ_SLOW:"S",PTZ_SPEED:"Adjust the PTZ rotation speed",DEVICE_ZOOM:"Control the device to zoom in/out of the screen",DEVICE_FOCUS:"Adjusting the device's focal length"}}},o={1:1,2:3,3:7,slow:1,mid:3,fast:7},a="ez-ptz",s="ez-mobile-ptz",l=a+"-speed-active",c=a+"-direction",d=function(){function e(e,t){var i,a,s;if(void 0===t&&(t={}),!e)throw new Error("Ptz container is required");(this.options=n(r,t,{clone:!1}),null==(i=this.options.locales)?void 0:i[this.options.language])?this.locale=null==(a=this.options.locales)?void 0:a[this.options.language]:this.locale=null==(s=this.options.locales)?void 0:s.zh;this.$container=e,this.speed=o[this.options.speed||2]}var t=e.prototype;return t.updateOptions=function(e){this.options=n(this.options,e,{clone:!1})},t.destroy=function(){},e}();function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}var p=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this)._touchstart=i._touchstart.bind(i),i._touchend=i._touchend.bind(i),i._render(),i}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e);var n=t.prototype;return n.destroy=function(){this._removeEventListener(),this.$content&&(this.$content.remove(),this.$content=null),e.prototype.destroy.call(this)},n._render=function(){this.$content=document.createElement("div"),this.$content.classList.add(s+"-content"),this.$content.innerHTML='\n      <div class="'+s+'-wrap">\n        <div class="'+s+'-container">\n          <div class="'+s+"-center "+s+'-center"></div>\n          <div class="'+s+"-icon "+s+"-top "+s+'-default"></div>\n          <div class="'+s+"-icon "+s+"-left "+s+'-default"></div>\n          <div class="'+s+"-icon "+s+"-bottom "+s+'-default"></div>\n          <div class="'+s+"-icon "+s+"-right "+s+'-default"></div>\n        </div>\n      </div>\n    ',this.$container.appendChild(this.$content),this._addEventListener()},n._addEventListener=function(){var e=this.$content.querySelector("."+s+"-wrap"),t="PointerEvent"in window?"pointerdown":"touchstart",n="PointerEvent"in window?"pointerup":"touchend";e&&(e.addEventListener(t,this._touchstart),e.addEventListener(n,this._touchend))},n._touchstart=function(e){e.preventDefault(),this._handlePtzTouch(e,"start")},n._touchend=function(e){e.preventDefault(),this._handlePtzTouch(e,"stop")},n._removeEventListener=function(){var e=this.$content.querySelector("."+s+"-wrap"),t="PointerEvent"in window?"pointerdown":"touchstart",n="PointerEvent"in window?"pointerup":"touchend";e&&(e.removeEventListener(t,this._touchstart),e.removeEventListener(n,this._touchend))},n._handlePtzTouch=function(e,t){var n,i,r,o,a,l,c;if(!this.options.accessToken&&!(null==(i=this.options.token)||null==(n=i.deviceToken)?void 0:n.video))throw new Error("Ptz accessToken or token.deviceToken.video is required");var d,u=this.$content.querySelector("."+s+"-wrap"),p=u.getBoundingClientRect(),h=p.left+130,m=p.top+130,A=(e.x||(null==(r=e.changedTouches[0])?void 0:r.clientX))-h,f=(e.y||(null==(o=e.changedTouches[0])?void 0:o.clientY))-m,v=0,g=(null==(a=this.options.env)?void 0:a.domain)+"/api/lapp/device/ptz/start",y=this.options.accessToken||(null==(c=this.options.token)||null==(l=c.deviceToken)?void 0:l.video),T=u.querySelectorAll("."+s+"-icon");(Math.abs(A)>Math.abs(f)?A>0?(v=3,T[3].className=T[3].className.replace(s+"-default",s+"-active")):(v=2,T[1].className=T[1].className.replace(s+"-default",s+"-active")):f>0?(v=1,T[2].className=T[2].className.replace(s+"-default",s+"-active")):(v=0,T[0].className=T[0].className.replace(s+"-default",s+"-active")),u.style.cssText="background-image:linear-gradient("+(0===v?180:1===v?0:2===v?90:270)+"deg, #c0ddf1 0%, rgba(100,143,252,0.00) 50%)","stop"===t)&&(g=(null==(d=this.options.env)?void 0:d.domain)+"/api/lapp/device/ptz/stop",u.style.cssText="",T[3].className=T[3].className.replace(s+"-active",s+"-default"),T[1].className=T[1].className.replace(s+"-active",s+"-default"),T[2].className=T[2].className.replace(s+"-active",s+"-default"),T[0].className=T[0].className.replace(s+"-active",s+"-default"));var _=null==this.options.onDirection?void 0:this.options.onDirection.call(this.options,{direction:v,speed:this.speed,type:t}),b=new FormData;b.append("deviceSerial",this.options.deviceSerial+""),b.append("channelNo",this.options.channelNo+""),b.append("speed","1"),b.append("direction",v+""),b.append("accessToken",y),fetch(g,{method:"POST",body:b}).then((function(e){return e.json()})).then((function(e){200===e.code||[60005,60002,60003,60004].includes(+e.code)&&(u.style.cssText="background-image:linear-gradient("+(0===v?180:1===v?0:2===v?90:270)+"deg, #f45656 0%, rgba(100,143,252,0.00) 50%)"),null==_||_(e)})).catch((function(e){})).finally((function(){_=null}))},t}(d);function h(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){h(o,i,r,a,s,"next",e)}function s(e){h(o,i,r,a,s,"throw",e)}a(void 0)}))}}function A(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function v(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var g=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,n)||this)._isMobile=i.isMobile(),r._isRotate=!1,r._clearTimer=null,r._$wrapper=document.createElement("div"),r._$wrapper.className=a+"-container-wrap",r._$directionCircleContainer=document.createElement("div"),r._$directionCircleContainer.classList.add(a+"-container"),r._$directionCircleContainer.innerHTML='\n        <div class="'+a+"-main "+c+'-center"></div>\n        <div class="'+a+"-icon "+c+'-top" data-direction="0"></div>\n        <div class="'+a+"-icon "+c+'-top-left" data-direction="4"></div>\n        <div class="'+a+"-icon "+c+'-left" data-direction="2"></div>\n        <div class="'+a+"-icon "+c+'-left-bottom" data-direction="5"></div>\n        <div class="'+a+"-icon "+c+'-bottom" data-direction="1"></div>\n        <div class="'+a+"-icon "+c+'-bottom-right" data-direction="7"></div>\n        <div class="'+a+"-icon "+c+'-right" data-direction="3"></div>\n        <div class="'+a+"-icon "+c+'-right-top" data-direction="6"></div>\n    ',r._$wrapper.appendChild(r._$directionCircleContainer),r._$speedContainer=document.createElement("div"),r._$speedContainer.classList.add(a+"-speed-container"),r._$speedContainer.innerHTML='\n        <div class="'+a+'-speed-progress" title="'+r.locale.PTZ_SPEED+'">\n          <div class="'+a+'-speed-progress-line">\n            <div class="'+a+"-speed-progress-line-dot "+(1===r.speed?l:"")+'" data-id="slow" data-index="1" data-value="1"></div>\n            <div class="'+a+"-speed-progress-line-dot "+(3===r.speed?l:"")+'" data-id="mid" data-index="2" data-value="3"></div>\n            <div class="'+a+"-speed-progress-line-dot "+(7===r.speed?l:"")+'" data-id="fast" data-index="3" data-value="7"></div>\n          </div>\n          <div class="'+a+'-speed-progress-points">\n            <div class="'+a+'-speed-progress-points-slow">\n            '+r.locale.PTZ_SLOW+'\n            </div>\n            <div class="'+a+'-speed-progress-points-mid">\n            '+r.locale.PTZ_MID+'\n            </div>\n            <div class="'+a+'-speed-progress-points-fast">\n              '+r.locale.PTZ_FAST+"\n            </div>\n          </div>\n        </div>\n    ",r._$wrapper.appendChild(r._$speedContainer),r._$btnContainer=document.createElement("div"),r._$btnContainer.classList.add(a+"-btn-container"),r._$btnContainer.innerHTML='\n        <div class="'+a+'-btn-zoom" title="'+r.locale.DEVICE_ZOOM+'" style="user-select: none;">\n          <div class="'+a+'-btn-zoom-add" style="user-select: none;">\n            <svg viewBox="0 0 1088 1024" version="1.1" width="20" height="20">\n              <path d="M563.2 198.4c179.2 0 326.4 147.2 326.4 326.4s-147.2 326.4-326.4 326.4S230.4 704 230.4 524.8s147.2-326.4 332.8-326.4z m0 64c-147.2 0-262.4 115.2-262.4 262.4s115.2 262.4 262.4 262.4 262.4-115.2 262.4-262.4S704 262.4 563.2 262.4z" fill="#ffffff"></path>\n              <path d="M691.2 556.8H428.8c-19.2 0-32-12.8-32-32s12.8-32 32-32h262.4c19.2 0 32 12.8 32 32s-12.8 32-32 32z" fill="#ffffff">\n              </path>\n              <path d="M556.8 691.2c-19.2 0-32-12.8-32-32V396.8c0-19.2 12.8-32 32-32s32 12.8 32 32v262.4c0 19.2-12.8 32-32 32z" fill="#ffffff"></path>\n            </svg>\n          </div>\n          <div class="'+a+'-btn-zoom-sub" style="user-select: none;">\n            <svg viewBox="0 0 1088 1024" version="1.1" width="20" height="20">\n              <path d="M569.6 838.4c-172.8 0-307.2-140.8-307.2-307.2s140.8-307.2 307.2-307.2 307.2 140.8 307.2 307.2-140.8 307.2-307.2 307.2z m0-64c134.4 0 249.6-108.8 249.6-249.6S704 281.6 569.6 281.6 320 396.8 320 531.2s108.8 243.2 249.6 243.2z" fill="#ffffff"></path>\n              <path d="M691.2 563.2H448c-19.2 0-32-12.8-32-32s12.8-38.4 32-38.4h249.6c19.2 0 32 12.8 32 32s-19.2 38.4-38.4 38.4z" fill="#ffffff"></path>\n            </svg>\n          </div>\n        </div>\n        <div class="'+a+'-btn-focal" title="'+r.locale.DEVICE_FOCUS+'" style="user-select: none;">\n          <div class="'+a+'-btn-focal-add" style="user-select: none;">\n            <svg viewBox="0 0 1088 1024" version="1.1" width="20" height="20">\n              <path d="M646.4 825.6H320c-44.8 0-83.2-38.4-83.2-83.2V409.6c0-44.8 38.4-83.2 83.2-83.2h326.4c44.8 0 83.2 38.4 83.2 83.2v326.4c0 51.2-38.4 89.6-83.2 89.6zM320 390.4c-12.8 0-19.2 6.4-19.2 19.2v326.4c0 12.8 6.4 19.2 19.2 19.2h326.4c12.8 0 19.2-6.4 19.2-19.2V409.6c0-12.8-6.4-19.2-19.2-19.2H320z" fill="#ffffff"></path>\n              <path d="M396.8 358.4V281.6c0-25.6 25.6-51.2 51.2-51.2h326.4c25.6 0 51.2 25.6 51.2 51.2v326.4c0 25.6-25.6 51.2-51.2 51.2H704l-6.4-268.8" fill="#ffffff"></path>\n            </svg>\n          </div>\n          <div class="'+a+'-btn-focal-sub" style="user-select: none;">\n            <svg viewBox="0 0 1088 1024" version="1.1" width="20" height="20">\n              <path d="M320 358.4h326.4c25.6 0 51.2 25.6 51.2 51.2v326.4c0 25.6-25.6 51.2-51.2 51.2H320c-25.6 0-51.2-25.6-51.2-51.2V409.6c0-25.6 25.6-51.2 51.2-51.2z" fill="#ffffff"></path>\n              <path d="M774.4 697.6H704c-19.2 0-32-12.8-32-32s12.8-32 32-32h70.4c12.8 0 19.2-6.4 19.2-19.2V281.6c0-12.8-6.4-19.2-19.2-19.2H448c-12.8 0-19.2 6.4-19.2 19.2v70.4c0 19.2-12.8 32-32 32s-32-12.8-32-25.6V281.6c0-44.8 38.4-83.2 83.2-83.2h326.4c44.8 0 83.2 38.4 83.2 83.2v326.4c0 51.2-38.4 89.6-83.2 89.6z" fill="#ffffff"></path>\n            </svg>\n          </div>\n        </div>\n      ',r._$wrapper.appendChild(r._$btnContainer),t.appendChild(r._$wrapper),r._$directionCircleContainer.onmousedown=function(e){e.preventDefault(),e.stopPropagation(),r._handlePtzTouch(e,"start")},r._$directionCircleContainer.onmouseup=function(e){e.preventDefault(),e.stopPropagation(),r._handlePtzTouch(e,"stop")},r._$directionCircleContainer.ontouchstart=function(e){e.preventDefault(),e.stopPropagation(),r._handlePtzTouch(e,"start")},r._$directionCircleContainer.ontouchend=function(e){e.preventDefault(),e.stopPropagation(),r._handlePtzTouch(e,"stop")},r._onSwitchSpeed=function(e){var t=Array.from(r._$speedContainer.querySelectorAll("."+a+"-speed-progress-line-dot"));if(t.includes(e.target)&&!e.target.classList.contains(l)){t.forEach((function(t){t===e.target?t.classList.add(l):t.classList.remove(l)}));var n=e.target.getAttribute("data-value"),i=e.target.getAttribute("data-index");r.speed=+n,null==r.options.onSpeedChange||r.options.onSpeedChange.call(r.options,+i)}},r._$speedContainer.onmouseup=r._onSwitchSpeed,r._isMobile&&(r._$speedContainer.ontouchend=r._onSwitchSpeed),r._$btnContainer.querySelector("."+a+"-btn-zoom-add")&&(r._$btnContainer.querySelector("."+a+"-btn-zoom-add").onmousedown=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("zoom","add","start")},r._$btnContainer.querySelector("."+a+"-btn-zoom-add").onmouseup=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("zoom","add","stop")}),r._$btnContainer.querySelector("."+a+"-btn-zoom-sub")&&(r._$btnContainer.querySelector("."+a+"-btn-zoom-sub").onmousedown=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("zoom","sub","start")},r._$btnContainer.querySelector("."+a+"-btn-zoom-sub").onmouseup=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("zoom","sub","stop")}),r._$btnContainer.querySelector("."+a+"-btn-focal-add")&&(r._$btnContainer.querySelector("."+a+"-btn-focal-add").onmousedown=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("focal","add","start")},r._$btnContainer.querySelector("."+a+"-btn-focal-add").onmouseup=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("focal","add","stop")}),r._$btnContainer.querySelector("."+a+"-btn-focal-sub")&&(r._$btnContainer.querySelector("."+a+"-btn-focal-sub").onmousedown=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("focal","sub","start")},r._$btnContainer.querySelector("."+a+"-btn-focal-sub").onmouseup=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("focal","sub","stop")}),r._isMobile&&(r._$btnContainer.querySelector("."+a+"-btn-zoom-add")&&(r._$btnContainer.querySelector("."+a+"-btn-zoom-add").ontouchstart=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("zoom","add","start")},r._$btnContainer.querySelector("."+a+"-btn-zoom-add").ontouchend=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("zoom","add","stop")}),r._$btnContainer.querySelector("."+a+"-btn-zoom-sub")&&(r._$btnContainer.querySelector("."+a+"-btn-zoom-sub").ontouchstart=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("zoom","sub","start")},r._$btnContainer.querySelector("."+a+"-btn-zoom-sub").ontouchend=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("zoom","sub","stop")}),r._$btnContainer.querySelector("."+a+"-btn-focal-add")&&(r._$btnContainer.querySelector("."+a+"-btn-focal-add").ontouchstart=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("focal","add","start")},r._$btnContainer.querySelector("."+a+"-btn-focal-add").ontouchend=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("focal","add","stop")}),r._$btnContainer.querySelector("."+a+"-btn-focal-sub")&&(r._$btnContainer.querySelector("."+a+"-btn-focal-sub").ontouchstart=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("focal","sub","start")},r._$btnContainer.querySelector("."+a+"-btn-focal-sub").ontouchend=function(e){e.preventDefault(),e.stopPropagation(),r._handleBtnTouch("focal","sub","stop")})),r}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e);var n=t.prototype;return n.destroy=function(){this._clearTimer&&(clearTimeout(this._clearTimer),this._clearTimer=null),this._$directionCircleContainer&&(this._$directionCircleContainer.remove(),this._$directionCircleContainer=null),this._$speedContainer&&(this._onSwitchSpeed=null,this._$speedContainer.remove(),this._$speedContainer=null),this._$btnContainer&&(this._$btnContainer.remove(),this._$btnContainer=null),this._$wrapper&&(this._$wrapper.remove(),this._$wrapper=null),e.prototype.destroy.call(this)},n._handlePtzTouch=function(e,t){var n,i,r,o,a,s=this;if(!this.options.accessToken&&!(null==(i=this.options.token)||null==(n=i.deviceToken)?void 0:n.video))throw new Error("Ptz accessToken or token.deviceToken.video is required");this._ptzQueue||(this._ptzQueue=Promise.resolve());var l=this._$directionCircleContainer.getBoundingClientRect(),c=l.left+(this._$directionCircleContainer.clientWidth+2)/2,d=l.top+(this._$directionCircleContainer.clientHeight+2)/2,u=e.x||e.changedTouches[0].clientX,p=e.y||e.changedTouches[0].clientY,h=0,A=(null==(r=this.options.env)?void 0:r.domain)+"/api/lapp/device/ptz/start",f=this.options.accessToken||(null==(a=this.options.token)||null==(o=a.deviceToken)?void 0:o.video),g=0;function y(e,t){var n=Math.atan2(t,e);n<0&&(n+=2*Math.PI);var i=n*(180/Math.PI)-225-12.5;return i<0&&(i+=360),Math.floor(i/45)+1}var T,_=u-c,b=p-d;if(this.isRotate)switch(y(_,b)){case 1:h=2,g=90;break;case 2:h=4,g=135;break;case 3:h=0,g=180;break;case 4:h=6,g=225;break;case 5:h=3,g=270;break;case 6:h=7,g=315;break;case 7:h=1,g=0;break;case 8:h=5,g=45}else switch(y(_,b)){case 1:h=0,g=180;break;case 2:h=6,g=225;break;case 3:h=3,g=270;break;case 4:h=7,g=315;break;case 5:h=1,g=0;break;case 6:h=5,g=45;break;case 7:h=2,g=90;break;case 8:h=4,g=135}(this._clearTimer&&(clearTimeout(this._clearTimer),this._clearTimer=null),this._$directionCircleContainer.style.cssText="start"===t?"background-image:linear-gradient("+g+"deg, #4277FF 0%, rgba(100,143,252,0.00) 30%)":"","stop"===t)&&(A=(null==(T=this.options.env)?void 0:T.domain)+"/api/lapp/device/ptz/stop");var C=null==this.options.onDirection?void 0:this.options.onDirection.call(this.options,{areaId:y(_,b),direction:h,backDeg:g,isRotate:this.isRotate,speed:this.speed,type:t}),S=new FormData;S.append("deviceSerial",this.options.deviceSerial+""),S.append("channelNo",this.options.channelNo+""),S.append("speed",this.speed+""),S.append("direction",h+""),S.append("accessToken",f),this._ptzQueue=this._ptzQueue.then((function(){return m((function(){var e;return v(this,(function(n){switch(n.label){case 0:return e=this,[4,fetch(A,{method:"POST",body:S}).then((function(e){return m((function(){return v(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))()})).then((function(t){var n;null==C||C(t);var i=t.code||(null==t||null==(n=t.result)?void 0:n.code);return[6e4,60001,60002,60003,60004,60005,60006,10002].includes(+i)&&(e._$directionCircleContainer.style.cssText="background-image:linear-gradient("+g+"deg, #f45656 0%, rgba(100,143,252,0.00) 30%)"),t})).catch((function(e){})).finally((function(){C=null,"stop"===t&&(e._clearTimer=setTimeout((function(){e._$directionCircleContainer.style.cssText=""}),1e3))}))];case 1:return[2,n.sent()]}}))})).call(s)})),"stop"===t&&(this._ptzQueue=this._ptzQueue.finally((function(){})))},n._handleBtnTouch=function(e,t,n){var i,r,o,a,s=this;if(!this.options.accessToken&&!(null==(i=this.options.token)?void 0:i.deviceToken.video))throw new Error("Ptz accessToken or token.deviceToken.video is required");this._ptzOperation||(this._ptzOperation=Promise.resolve());var l=8;l="zoom"===e?"add"===t?8:9:"add"===t?10:11;var c,d=(null==(r=this.options.env)?void 0:r.domain)+"/api/lapp/device/ptz/start",u=this.options.accessToken||(null==(a=this.options.token)||null==(o=a.deviceToken)?void 0:o.video);"stop"===n&&(d=(null==(c=this.options.env)?void 0:c.domain)+"/api/lapp/device/ptz/stop");var p=null==this.options.onDirection?void 0:this.options.onDirection.call(this.options,{btn:e,option:t,type:n}),h=new FormData;h.append("deviceSerial",this.options.deviceSerial+""),h.append("channelNo",this.options.channelNo+""),h.append("speed",this.speed+""),h.append("direction",l+""),h.append("accessToken",u),this._ptzOperation=this._ptzOperation.then((function(){return m((function(){return v(this,(function(e){switch(e.label){case 0:return[4,fetch(d,{method:"POST",body:h}).then((function(e){return m((function(){return v(this,(function(t){switch(t.label){case 0:return[4,e.json()];case 1:return[2,t.sent()]}}))}))()})).then((function(e){return null==p||p(e),e})).catch((function(e){})).finally((function(){p=null}))];case 1:return[2,e.sent()]}}))}))()})),"stop"===n&&(this._ptzOperation=this._ptzOperation.finally((function(){s._ptzOperation=null})))},A(t,[{key:"isRotate",get:function(){return this._isRotate},set:function(e){this._isRotate=e}}]),t}(d);return zn.BasePtz=d,zn.MobilePtz=p,zn.Ptz=g,zn}();function On(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}function In(){return In=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},In.apply(this,arguments)}function Rn(e,t){return Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Rn(e,t)}var Mn=function(e){function t(t){var n;return(n=e.call(this,In({},t,{tagName:"span",controlType:"button",classNameSuffix:"ptz"}))||this)._isRotated=!1,n._options=t,n._render(),n._onDBlPanelClick=n._onDBlPanelClick.bind(n),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}(t,e);var n=t.prototype;return n.destroy=function(){var t,n,i;this._ptzControl&&(this._ptzControl.destroy(),this._ptzControl=null),this._ptzControl1&&(this._ptzControl1.destroy(),this._ptzControl1=null),null==(t=this.$panel)||t.removeEventListener("dblclick",this._onDBlPanelClick),null==(i=this.$panel)||null==(n=i.remove)||n.call(i),e.prototype.destroy.call(this)},n._render=function(){var e;this.$container.innerHTML=Me({title:null==(e=this.locale)?void 0:e.BTN_PTZ}),this._renderPanel()},n._renderPanel=function(){this._options.rootContainer&&(this.$panel=document.createElement("div"),this.$panel.classList.add(P+"-ptz-panel",P+"-hide"),this._options.rootContainer.appendChild(this.$panel),this.$turntable=document.createElement("div"),this.$turntable.classList.add(P+"-ptz-turntable"),this.$panel.appendChild(this.$turntable),this._ptzControl=new xn.Ptz(this.$turntable,In({},this._options,{onSpeedChange:this._onSpeedChange.bind(this),onDirection:this._onDirection.bind(this)})),this.$panel.addEventListener("dblclick",this._onDBlPanelClick))},n.renderMobileExtend=function(e){this._ptzControl1||(this._ptzControl1=new xn.MobilePtz(e,In({},this._options,{onSpeedChange:this._onSpeedChange.bind(this),onDirection:this._onDirection.bind(this)})))},n.updateOptions=function(e){this._ptzControl&&this._ptzControl.updateOptions(e),this._ptzControl1&&this._ptzControl.updateOptions(e)},n._onSpeedChange=function(e){this.emit(N.control.ptzSpeedChange,e),null==this._options.onSpeedChange||this._options.onSpeedChange.call(this._options,e)},n._onDirection=function(e){var t=this;return function(n){var i,r=+(n.code||(null==n||null==(i=n.result)?void 0:i.code));"start"===e.type&&200!==r&&t.emit(N.control.ptzError,{code:r,localeKey:"zoom"===e.btn&&6e4===r?"NOT_SUPPORT_DEVICE_ZOOM":"focal"===e.btn&&60006===r?"NOT_SUPPORT_FOCUS":"38"+r,msg:n.msg})}},n._onControlClick=function(t){e.prototype._onControlClick.call(this,t),this.active=!this.active},n._onDBlPanelClick=function(e){e.stopPropagation(),e.preventDefault()},n.reset=function(e){this.active=!1},On(t,[{key:"isRotated",get:function(){return this._isRotated},set:function(e){this._ptzControl.isRotate=e,this._isRotated=e}},{key:"active",get:function(){return this._active},set:function(e){this._disabled&&!this._active||(this._active=e,this._updateActiveState(e),this._active?this.$panel.classList.remove(P+"-hide"):this.$panel.classList.add(P+"-hide"))}}]),t}(U);function Nn(e,t){void 0===t&&(t="MM:SS");var n=Math.floor(e/3600),i=Math.floor(e%3600/60),r=e%60,o=function(e){return e.toString().padStart(2,"0")};return t.replace("HH",o(n)).replace("MM",o(i)).replace("SS",o(r))}function $n(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}function Fn(){return Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fn.apply(this,arguments)}function jn(e,t){return jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jn(e,t)}var Un={maxDuration:3600},Bn=function(e){function t(t){var n;return(n=e.call(this,Fn({},t,{tagName:"span",controlType:"button",classNameSuffix:"record"}))||this)._seconds=0,n._options=Object.assign({},Un,t),n._render(),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(t,e);var n=t.prototype;return n._render=function(){var e;this.$container.innerHTML=Ne({title:null==(e=this.locale)?void 0:e.BTN_RECORDVIDEO})},n._renderTimer=function(){var e,t,n=this;this._timerNode=document.createElement("span"),this._timerNode.className=P+"-record-timer",null==(t=this._options)||null==(e=t.rootContainer)||e.appendChild(this._timerNode),this._timerNode.innerHTML=$e()+'<span class="'+P+'-record-timer-time">'+Nn(this._seconds)+"<span>";var i=this._timerNode.querySelector("."+P+"-record-timer-time");this._timer=setInterval((function(){n._seconds++,n._seconds>=n._options.maxDuration?n._destroyTimer():i&&(i.innerHTML=""+Nn(n._seconds))}),1e3)},n.reset=function(){this.active&&(this.active=!1,e.prototype.reset.call(this))},n.destroy=function(){this._destroyTimer(),e.prototype.destroy.call(this)},n._destroyTimer=function(){this._seconds=0,this._timer&&(clearInterval(this._timer),this._timer=null),this._timerNode&&(this._timerNode.remove(),this._timerNode=null),this._active=!1},n._onControlClick=function(t){this.active=!this.active,e.prototype._onControlClick.call(this,t)},$n(t,[{key:"active",get:function(){return this._active},set:function(e){this._disabled&&!this._active||this._active!==e&&(this._active=e,this._updateActiveState(e),this.active?this._renderTimer():this._destroyTimer(),this.emit(N.control.recordingChange,this._active))}}]),t}(U);function Vn(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Yn(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}function Zn(){return Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zn.apply(this,arguments)}function Hn(e,t){return Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Hn(e,t)}function Gn(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var Qn=function(e){function t(t){var n;return(n=e.call(this,Zn({},t,{tagName:"span",controlType:"button",classNameSuffix:"talk"}))||this)._value=0,n._options=t,n._render(),n.on(N.talkingChange,(function(e){n.active!==e&&(n.active=e,n._render())})),n.on(N.talkVolumeChange,(function(e){var t,i;n.value=e,null==(i=n._options)||null==(t=i.onChange)||t.call(i,e)})),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hn(e,t)}(t,e);var n=t.prototype;return n._render=function(){var e,t;this.$container.innerHTML=this.active?je({title:null==(e=this.locale)?void 0:e.BTN_TALK}):Fe({title:null==(t=this.locale)?void 0:t.BTN_TALK})},n.reset=function(t){this.active&&(this._value=0,this.active=!1,this._render(),this.emit(N.control.talkingChange,!1),e.prototype.reset.call(this,t))},n.destroy=function(){this.active&&this.reset(),e.prototype.destroy.call(this)},n._onControlClick=function(t){var n,i=this;return(n=function(){return Gn(this,(function(n){return e.prototype._onControlClick.call(i,t),this.active=!this.active,this.emit(N.control.talkingChange,this.active),this._render(),[2]}))},function(){var e=this,t=arguments;return new Promise((function(i,r){var o=n.apply(e,t);function a(e){Vn(o,i,r,a,s,"next",e)}function s(e){Vn(o,i,r,a,s,"throw",e)}a(void 0)}))}).call(this)},Yn(t,[{key:"value",get:function(){return this._value},set:function(e){if(this.active&&!(e<0||e>1)){this._value=e;var t="silent";e>0&&e<.25?t="low":e>=.25&&e<.5?t="normal":e>=.5&&e<.75?t="high":e>=.75&&(t="deafening");var n=Array.from(this.$container.classList).find((function(e){return e.startsWith(P+"-talk-gain-")}));n&&this.$container.classList.remove(n),this.$container.classList.add(P+"-talk-gain-"+t)}}}]),t}(U);function Kn(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}function Wn(){return Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Wn.apply(this,arguments)}function qn(e,t){return qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qn(e,t)}var Jn={fieldNames:{label:"label",value:"value"},renderLabel:function(e){return"<span>"+(e||"")+"</span>"},onChange:function(){},onOpenChange:function(){}},Xn=function(t){function n(n){var i,r,o,a;(i=t.call(this,Wn({tagName:"span",type:"button",controlType:"button"},Jn,n))||this)._options=e(Jn,n,{clone:!1}),i.list=n.list||[],void 0===n.value&&null===n.value||(i._value=n.value+"");var s=null!=(a=null==(r=i._options.fieldNames)?void 0:r.value)?a:"value";return i._picker=new y(i.$container,{getPopupContainer:function(){return mt.isMobile?n.rootContainer:i.$container},trigger:mt.isMobile?"click":"hover",isMobile:mt.isMobile,wrapClassName:P+"-select-picker "+P+"-select-"+n.classNameSuffix,open:i._options.open,offset:[0,-10],placement:"top",onOpenChange:function(e){var t=i.list.find((function(e){return e[s]+""===i.value}));null==i._options.onOpenChange||i._options.onOpenChange.call(i._options,e,i.value,t)}}),i.list&&i.updateOptions(i.list),i._onSelectChange(),i._activeOption(),i._onDBlPanelClick=i._onDBlPanelClick.bind(i),null==(o=i._picker.$body)||o.addEventListener("dblclick",i._onDBlPanelClick),i}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}(n,t);var i=n.prototype;return i.updateOptions=function(e){var t=this;if(void 0===e&&(e=[]),(null==e?void 0:e.length)>0&&this._picker){var n,i,r,o,a,s,l=null!=(a=null==(n=this._options.fieldNames)?void 0:n.label)?a:"label",c=null!=(s=null==(i=this._options.fieldNames)?void 0:i.value)?s:"value";null==(o=this._picker)||o.innerHTML('<div class="'+P+'-select-panel">\n            <ul class="'+P+'-select-list">\n              '+e.map((function(e){return'\n                    <li class="'+P+"-select-option "+(+e[c]===t.value?P+"-active":"")+'" data-value="'+e[c]+'">\n                      <span>'+e[l]+"</span>\n                    </li>\n                  "})).join("")+"\n            </ul>\n            "+(mt.isMobile?'<div class="'+P+'-select-cancel">\n                  <span>'+((null==(r=this.locale)?void 0:r.cancel)||"")+"</span>\n                </div>":"")+"\n            "+(mt.isMobile?'<span class="'+P+'-select-close">'+Ke()+"</span>":"")+"\n          <div>"),this.list=e,this._activeOption()}else if(0===(null==e?void 0:e.length)){var d,u;null==(u=this._picker)||null==(d=u.innerHTML)||d.call(u,"")}},i._render=function(e){var t;if(0!==this.list.length){var n,i=null!=(n=null==(t=this._options.fieldNames)?void 0:t.label)?n:"label";if(this.$container.querySelector("."+P+"-select-btn"))this.$container.querySelector("."+P+"-select-btn").innerHTML=null==this._options.renderLabel?void 0:this._options.renderLabel.call(this._options,null==e?void 0:e[i],e,this.list);else{var r=document.createElement("span");r.classList.add(P+"-btn",P+"-select-btn"),r.innerHTML=null==this._options.renderLabel?void 0:this._options.renderLabel.call(this._options,null==e?void 0:e[i],e,this.list),this.$container.appendChild(r),this._options.title&&r.setAttribute("title",this._options.title)}}},i._activeOption=function(){var e=this;if(this._picker){var t,n,i,r,o=null!=(r=null==(t=this._options.fieldNames)?void 0:t.value)?r:"value",a=null==(n=this._picker.$body)?void 0:n.querySelector("."+P+"-active");null==a||a.classList.remove(P+"-active");var s=null==(i=this._picker.$body)?void 0:i.querySelector("."+P+'-select-option[data-value="'+this.value+'"]');null==s||s.classList.add(P+"-active");var l=this.list.find((function(t){return t[o]+""===e.value}));this._render(l)}},i._onSelectChange=function(){var e=this;if(this._picker){var t,n,i=null!=(n=null==(t=this._options.fieldNames)?void 0:t.value)?n:"value";this._delegationOption=S(this._picker.$body,"."+P+"-select-option","click",(function(t){var n=t.delegateTarget;if(t.stopPropagation(),!n.classList.contains(P+"-disabled")){var r=n.getAttribute("data-value");if(e.value!==r){e.value=r;var o=e.list.find((function(t){return t[i]+""===e.value}));null==e._options.onChange||e._options.onChange.call(e._options,e.value,o),e._picker.open=!1}}})),this._delegationClose=S(this._picker.$body,"."+P+"-select-close","click",(function(t){t.stopPropagation(),e._picker.open=!1})),this._delegationCancel=S(this._picker.$body,"."+P+"-select-cancel","click",(function(t){t.stopPropagation(),e._picker.open=!1}))}},i.destroy=function(){var e,n,i,r,o,a,s,l;(null==(n=this._delegationOption)||null==(e=n.destroy)||e.call(n),this._delegationOption=null,null==(r=this._delegationClose)||null==(i=r.destroy)||i.call(r),this._delegationClose=null,null==(a=this._delegationCancel)||null==(o=a.destroy)||o.call(a),this._delegationCancel=null,this._picker)&&(null==(s=this._picker.$body)||s.removeEventListener("dblclick",this._onDBlPanelClick),null==(l=this._picker)||l.destroy(),this._picker=null);t.prototype.destroy.call(this)},i._onDBlPanelClick=function(e){e.stopPropagation(),e.preventDefault()},i._onControlClick=function(e){null==this._options.onClick||this._options.onClick.call(this._options,e)},Kn(n,[{key:"value",get:function(){return this._value},set:function(e){this.value!==e&&(this._value=e,this._activeOption())}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this._picker.disabled=e,this._updateDisabledState(e)}}]),n}(U);function ei(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ti(){return ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ti.apply(this,arguments)}function ni(e,t){return ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ni(e,t)}var ii=["VIDEO_LEVEL_FLUENT","VIDEO_LEVEL_STANDARD","VIDEO_LEVEL_HEIGH","VIDEO_LEVEL_SUPER","VIDEO_LEVEL_EXTREME","VIDEO_LEVEL_3K","VIDEO_LEVEL_4k"],ri={value:1,list:[]};function oi(e,t){return void 0===t&&(t={}),e.map((function(e){var n=+e.level,i=e.name;return i||(i=null==t?void 0:t[ii[n]]),"VIDEO_LEVEL_AUTO"===i?i=null==t?void 0:t[i]:ii.includes(i)&&(i=null==t?void 0:t[ii[n]]),{name:i,level:e.level+"",streamTypeIn:e.streamTypeIn,type:e.type}}))}var ai=function(e){function t(t){var n,i,r,o;return void 0===t&&(t={}),(n=e.call(this,ti({},ri,{value:null==(i=t.props)?void 0:i.videoLevel},t,{fieldNames:{label:"name",value:"level"},list:oi((null==t?void 0:t.list)||(null==(r=t.props)?void 0:r.videoLevelList)||[],(null==t?void 0:t.locales[t.language])||{}),title:null==t||null==(o=t.locales[t.language])?void 0:o.BTN_HD,controlType:"button",classNameSuffix:"definition",renderLabel:function(e,i,r){var o;if("auto"===(null==i?void 0:i.level)){var a,s=r.find((function(e){return e.level===ei(n)._level}));return"<span>"+(null==t||null==(a=t.locales[t.language])?void 0:a.VIDEO_LEVEL_AUTO)+"("+((null==s?void 0:s.name)||"")+")</span>"}return"<span>"+(e||(null==(o=r[0])?void 0:o.name)||"")+"</span>"},onChange:function(e,i){var r;null==t||null==(r=t.onChange)||r.call(t,e,i),"auto"===e?ei(n).emit(N.control.definitionChange,"auto",ei(n)._level):(ei(n)._level=e,ei(n).emit(N.control.definitionChange,e,i))},onOpenChange:function(e,i,r){var o;null==t||null==(o=t.onOpenChange)||o.call(t,e,i,r),ei(n).emit(N.control.definitionPanelOpenChange,e,i,r)}}))||this)._level="",n.options=t||{},n.on(N.setVideoLevelList,(function(t){e.prototype.updateOptions.call(ei(n),oi(t,n.locale))})),n.on(N.currentVideoLevel,(function(e,i){var r,o="object"==(void 0===e?"undefined":(r=e)&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r)?e.level:e;if(n._level=i+"","auto"===o){var a,s=n.list.find((function(e){return e.level===n._level}));n.$container.querySelector("."+P+"-select-btn").innerHTML="\n          <span>"+(null==t||null==(a=t.locales[t.language])?void 0:a.VIDEO_LEVEL_AUTO)+"("+((null==s?void 0:s.name)||"")+")</span>\n        "}else n.value!==n._level+""&&(n.value=n._level+"")})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ni(e,t)}(t,e),t.prototype.reset=function(t){e.prototype.reset.call(this,t)},t}(Xn);function si(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function li(){return li=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},li.apply(this,arguments)}function ci(e,t){return ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ci(e,t)}var di,ui,pi={list:[.5,1,2,4].reverse().map((function(e){return{label:e+"x",value:e}}))},hi=function(e){function t(t){var n,i,r;return(n=e.call(this,li({},pi,t,{value:(t.props.speed||1)+"",classNameSuffix:"speed",controlType:"button",title:null==t||null==(r=t.locales)||null==(i=r[t.language])?void 0:i.BTN_SPEED,onChange:function(e,i){var r;e=+e,null==t||null==(r=t.onChange)||r.call(t,e,i),si(n).emit(N.control.speedChange,e,i)},onOpenChange:function(e,i,r){var o;i=+i,null==t||null==(o=t.onOpenChange)||o.call(t,e,i,r),si(n).emit(N.control.speedPanelOpenChange,e,i,r)}}))||this).on(N.speedChange,(function(e){n.value!==e+""&&(n.value=e+"")})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ci(e,t)}(t,e),t.prototype.reset=function(t){this.value="1",e.prototype.reset.call(this,t)},t}(Xn);var mi=function(){if(ui)return di;function e(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function t(t){return function(){var n=this,i=arguments;return new Promise((function(r,o){var a=t.apply(n,i);function s(t){e(a,r,o,s,l,"next",t)}function l(t){e(a,r,o,s,l,"throw",t)}s(void 0)}))}}function n(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}ui=1;var i=function(){function e(){}return e.loadScript=function(i){return t((function(){return n(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){return e.LoadedScr.includes(i)?t(i):e.LoadingScrQueue[i]?e.LoadingScrQueue[i].push(t):(e.LoadingScrQueue[i]=[t],i.includes(".js")?((r=document.createElement("script")).src=i,r.async=!0):i.includes(".css")&&((r=document.createElement("link")).rel="stylesheet",r.href=i),r.onload=function(){e.LoadedScr.push(i),e.LoadingScrQueue[i].forEach((function(e){return e(i)})),e.LoadingScrQueue[i]=[]},r.onerror=function(){return n(new Error("Failed to load "+i))},void document.head.appendChild(r));var r}))];case 1:return[2,t.sent()]}}))}))()},e.loadScriptsBatch=function(i){return t((function(){return n(this,(function(t){switch(t.label){case 0:return[4,Promise.all(i.map(e.loadScript))];case 1:return[2,t.sent()]}}))}))()},e.remove=function(e){e.forEach((function(e){var t=document.querySelector('script[src="'+e+'"]')||document.querySelector('link[href="'+e+'"]');t&&t.remove()}))},e.clear=function(){e.remove(e.LoadedScr)},e}();function r(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}i.LoadedScr=[],i.LoadingScrQueue={};var o={staticPath:".",place:"top-right",language:"zh-CN",current:new Date,maxDate:new Date};return di=function(){function e(e,t){var n=this;this._open=!1,this._change=!0,this.$container=e,this.options=Object.assign({},o,t),this.options.staticPath=(this.options.staticPath||"").replace(/\/$/,""),this.options.current&&(this._date=this.options.current),this._init(),this.$container.addEventListener("click",(function(){n._open?n.hide():n.show()})),document.body.addEventListener("click",(function(e){n.$container.contains(e.target)||n.hide()}))}var t=e.prototype;return t._init=function(){var e=this;this.$container.style.cssText+=";position: relative;",this.$container.classList.add("datepicker-inline-"+this.options.place),i.loadScriptsBatch([this.options.staticPath+"/rec/jquery.min.js",this.options.staticPath+"/rec/datepicker.min.css"]).then((function(){i.loadScriptsBatch([e.options.staticPath+"/rec/datepicker.js"]).then((function(){i.loadScriptsBatch([e.options.staticPath+"/rec/datepicker.zh-CN.js",e.options.staticPath+"/rec/datepicker.en-US.js"]).then((function(){window.$(e.$container).datepicker({date:e.options.current,language:e.options.language,endDate:e.options.maxDate,inline:!0}),e.hide(),window.$(e.$container).on("pick.datepicker",(function(t){var n,i,r,o,a,s;"year"===t.view&&(null==(n=e._date)?void 0:n.getFullYear())!==t.date.getFullYear()?null==e.options.onYearChange||e.options.onYearChange.call(e.options,t.date):"month"!==t.view||(null==(i=e._date)?void 0:i.getMonth())===t.date.getMonth()&&(null==(r=e._date)?void 0:r.getFullYear())===t.date.getFullYear()?!["day","pick"].includes(t.view||t.type)||(null==(o=e._date)?void 0:o.getDate())===t.date.getDate()&&(null==(a=e._date)?void 0:a.getMonth())===t.date.getMonth()&&(null==(s=e._date)?void 0:s.getFullYear())===t.date.getFullYear()||(e._change&&(null==e.options.onChange||e.options.onChange.call(e.options,t.date)),e._date=new Date(t.date.getTime())):null==e.options.onMonthChange||e.options.onMonthChange.call(e.options,t.date),"day"===t.view&&e.hide(),e._change=!0}))}))}))}))},t.setDate=function(e,t){void 0===t&&(t=!0),this.$container.querySelector(".datepicker-inline")&&(this._change=t,window.$(this.$container).datepicker("setDate",e))},t.hide=function(){var e=this.$container.querySelector(".datepicker-inline");e&&(this._open&&(this._open=!1,null==this.options.onPanelChange||this.options.onPanelChange.call(this.options,!1,this._date)),e.classList.add("datepicker-hide"))},t.show=function(){var e,t,n=this.$container.querySelector(".datepicker-inline");n&&(this._open||(this._open=!0,null==this.options.onPanelChange||this.options.onPanelChange.call(this.options,!0,this._date)),this._date&&this.setDate(this._date,!1),null==(e=(t=window.$(this.$container)).datepicker)||e.call(t,"showView"),"bottom-left"===this.options.place?n.style.cssText+="top: "+(this.$container.clientHeight+10)+"px; bottom: auto; right: auto; left: 0px":n.style.cssText+="bottom: "+(this.$container.clientHeight+10)+"px; top: auto",n.classList.remove("datepicker-hide"))},t.destroy=function(){this.hide(),this._date=void 0,window.$(this.$container).datepicker("destroy")},r(e,[{key:"date",get:function(){return this._date}}]),e}()}(),Ai=tn(mi),fi=function(){function e(){}return e.formate=function(t,n,i){void 0===i&&(i=0);var r=t;"string"==typeof t?r=e.strToDate(t):"number"==typeof t&&(r=new Date(t));var o=(r=new Date(r.getTime()-3600*i*1e3)).getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),l=String(r.getHours()).padStart(2,"0"),c=String(r.getMinutes()).padStart(2,"0"),d=String(r.getSeconds()).padStart(2,"0");switch(n){case"YYYY-MM-DD hh:mm:ss":return o+"-"+a+"-"+s+" "+l+":"+c+":"+d;case"YYYYMMDDhhmmss":return""+o+a+s+l+c+d;case"YYYY/MM/DD hh:mm:ss":return o+"/"+a+"/"+s+" "+l+":"+c+":"+d;case"YYYYMMDDThhmmssZ":return""+o+a+s+"T"+l+c+d+"Z";case"YYYY/MM/DD":return o+"/"+a+"/"+s;case"YYYYMMDD":return""+o+a+s;case"YYYY-MM-DD":return o+"-"+a+"-"+s;case"YYYY":return""+o;case"MM":return""+a;case"DD":return""+s;case"hh:mm:ss":return l+":"+c+":"+d;case"hh":return""+l;case"mm":return""+c;case"ss":return""+d;default:throw new Error("Unsupported format type")}},e.diff=function(t,n,i){var r=t;"string"==typeof t?r=e.strToDate(t):"number"==typeof t&&(r=new Date(t));var o=n;"string"==typeof n?r=e.strToDate(n):"number"==typeof n&&(r=new Date(n));var a=r.getTime()-o.getTime();switch(i){case"year":return r.getFullYear()-o.getFullYear();case"month":var s=12*(r.getFullYear()-o.getFullYear())+(r.getMonth()-o.getMonth());return r.getDate()<o.getDate()&&s--,s;case"day":return a/60/60/24;case"hour":return a/60/60;case"minute":return a/60;case"second":return a;default:throw new Error("Unsupported diff type")}},e.now=function(){return Date.now()},e.strToDate=function(e){var t=(e+"").replace(/-/gi,"").replace(/:/gi,"").replace(/\//gi,"").replace(/ /gi,"").replace(/T|Z/gi,"");if(10===(e+"").length)return new Date(+e);if(13===(e+"").length)return new Date(+e);var n=t.slice(0,4),i=t.slice(4,6),r=t.slice(6,8),o=t.slice(8,10),a=t.slice(10,12),s=t.slice(12,14);return new Date(n+"/"+i+"/"+r+" "+o+":"+a+":"+s)},e.padStart=function(e){return e<10?"0"+e:e+""},e}();function vi(){return vi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vi.apply(this,arguments)}function gi(e,t){return gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gi(e,t)}var yi=function(e){function n(t){var n,i,r,o;return(n=e.call(this,vi({},t,{tagName:"span",controlType:"button",classNameSuffix:"date"}))||this).options=t,n._value=fi.formate((null==(o=n.options.props)||null==(r=o.urlInfo)||null==(i=r.searchParams)?void 0:i.begin)||new Date,"YYYY-MM-DD"),n._render(),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gi(e,t)}(n,e);var i=n.prototype;return i._render=function(){var e,n,i=this;t.isMobile()?this.$container.innerHTML='\n        <span class="'+P+'-mobile-date-filter" title="'+((null==(e=this.locale)?void 0:e.BTN_CALENDAR)||"")+'">\n          <span class="'+P+'-mobile-date-filter-value">'+this._getDateStr()+"</span>\n          "+et()+"\n        <span>":this.$container.innerHTML=Xe({title:null==(n=this.locale)?void 0:n.BTN_CALENDAR});this.dataPickerUtil=new Ai(this.$container,{staticPath:this.options.staticPath,language:"zh"===this.options.language?"zh-CN":"en-US",current:new Date(this._value+" 00:00:00"),maxDate:this.options.maxDate||new Date,place:t.isMobile()?"bottom-left":"top-right",onChange:function(e){e&&i._value!==fi.formate(e,"YYYY-MM-DD")&&(i._value=fi.formate(e,"YYYY-MM-DD"),null==i.options.onChange||i.options.onChange.call(i.options,e),i.emit(N.control.dateChange,e),e&&i.$container.querySelector("."+P+"-mobile-date-filter-value")&&(i.$container.querySelector("."+P+"-mobile-date-filter-value").innerHTML=i._getDateStr()))},onPanelChange:function(e,t){null==i.options.onPanelChange||i.options.onPanelChange.call(i.options,e,t),i.emit(N.control.datePanelOpenChange,e,t)}})},i.setDate=function(e,t){var n;void 0===t&&(t=!0),null==(n=this.dataPickerUtil)||n.setDate(e,t),e&&!t&&this._value!==fi.formate(e,"YYYY-MM-DD")&&(this._value=fi.formate(e,"YYYY-MM-DD"),e&&this.$container.querySelector("."+P+"-mobile-date-filter-value")&&(this.$container.querySelector("."+P+"-mobile-date-filter-value").innerHTML=this._getDateStr()))},i.reset=function(){var t;null==(t=this.dataPickerUtil)||t.hide(),e.prototype.reset.call(this)},i.destroy=function(){this.dataPickerUtil&&(this.dataPickerUtil.destroy(),this.dataPickerUtil=null),e.prototype.destroy.call(this)},i._getDateStr=function(){var e=this._value.split("-");return e[1]+"."+e[2]},i._onControlClick=function(t){e.prototype._onControlClick.call(this,t)},n}(U);function Ti(){return Ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ti.apply(this,arguments)}function _i(e,t){return _i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_i(e,t)}var bi=function(e){function n(t){var n,i,r;return(n=e.call(this,Ti({},t,{tagName:"div",controlType:"block",classNameSuffix:"time-line"}))||this)._$add=null,n._$reduce=null,n._currentTime=0,n.records=[],n._currentTime=0,n._options=t,n.records=(null==(r=n._options)||null==(i=r.props)?void 0:i.recordList)||[],n._render(),n.on(N.setAllDayRecTimes,(function(e){var t,i;n.records=e,null==(i=n.timeLineUtil)||null==(t=i.updateTimeSections)||t.call(i,e)})),n.on(N.getOSDTime,(function(e){if(e){var t,i,r=new Date(1e3*e);n._currentTime=r.getTime(),null==(i=n.timeLineUtil)||null==(t=i.update)||t.call(i,r)}})),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_i(e,t)}(n,e);var i=n.prototype;return i._render=function(){var e,n,i=this,r={language:this._options.language||"zh",coverQuery:this._options.coverQuery||"",onChange:function(e){i._currentTime!==(null==e?void 0:e.getTime())&&(null==i._options.onChange||i._options.onChange.call(i._options,e),i.emit(N.control.timeLineChange,e))},onPickerOpenChange:function(e){i.emit(N.control.timeLinePanelOpenChange,e)},onPickerSelect:function(e){var t=null;try{t=10===(e.startTime+"").length?new Date(1e3*e.startTime):(e.startTime,new Date(e.startTime)),null==i._options.onChange||i._options.onChange.call(i._options,t),i.emit(N.control.timeLineChange,t)}catch(e){}}};t.isMobile()?this.timeLineUtil=new k.MobileTimeLine(this.$container,r):(this.timeLineUtil=new k.TimeLine(this.$container,r),this._renderAddReduce()),null==(n=this.timeLineUtil)||null==(e=n.updateTimeSections)||e.call(n,this.records),this.timeLineUtil.update(new Date)},i.setWidth=function(e){t.isMobile()||this.timeLineUtil.resize(e)},i._renderAddReduce=function(){var e=this;this._$add=document.createElement("span"),this._$add.classList.add(P+"-time-line-scale-add"),this._$add.innerHTML=tt(),this._$add.addEventListener("click",(function(){if(e.timeLineUtil){var t=Math.floor(e.timeLineUtil.timeWidth);e.timeLineUtil.setTimeWidth(t+1)}})),this._$reduce=document.createElement("span"),this._$reduce.classList.add(P+"-time-line-scale-sub"),this._$reduce.innerHTML=nt(),this._$reduce.addEventListener("click",(function(){if(e.timeLineUtil){var t=Math.floor(e.timeLineUtil.timeWidth);e.timeLineUtil.setTimeWidth(t-1)}})),this.$container.appendChild(this._$add),this.$container.appendChild(this._$reduce)},i.destroy=function(){this._$add&&(this._$add.remove(),this._$add=null),this._$reduce&&(this._$reduce.remove(),this._$reduce=null),this.timeLineUtil&&(this.timeLineUtil.destroy(),this.timeLineUtil=null),e.prototype.destroy.call(this)},i._onControlClick=function(e){null==this._options.onClick||this._options.onClick.call(this._options,e)},n}(U);function Ci(){return Ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ci.apply(this,arguments)}function Si(e,t){return Si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Si(e,t)}var Ei=function(e){function t(t){var n;return(n=e.call(this,Ci({},t,{tagName:"span",controlType:"text",classNameSuffix:"device"}))||this)._render(),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Si(e,t)}(t,e);var n=t.prototype;return n._render=function(){var e,t;this.$container.innerHTML='<span class="'+P+"-text "+P+'-text-device">'+this._splicingString(this.__options.deviceName,null==(t=this.__options.props)||null==(e=t.urlInfo)?void 0:e.deviceSerial)+"</span>"},n.update=function(e,t){if(this.$container.querySelector("."+P+"-text-device")){var n=this.$container.querySelector("."+P+"-text-device"),i=this._splicingString(e,t);null==n||n.setAttribute("title",i),n.innerHTML=i}},n._splicingString=function(e,t){return(e||"")+(t?e?"("+t+")":""+t:"")},t}(U),wi={play:dt,volume:bt,device:Ei,capturePicture:Ln,ptz:Mn,record:Bn,talk:Qn,zoom:en,definition:ai,fullscreen:xt,globalFullscreen:wn,rec:Rt,speed:hi,date:yi,timeLine:bi};function ki(e,t){return ki=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ki(e,t)}var Pi=function(e){function t(t,n){var i;return void 0===n&&(n={hasDatePicker:!0}),(i=e.call(this)||this).options=n,i.$container=t,i.$popupContainer=document.createElement("div"),i.$popupContainer.classList.add(P+"-rec-footer"),i.options.hasDatePicker&&i.$popupContainer.classList.add(P+"-rec-footer-has-date-picker"),i.$container.appendChild(i.$popupContainer),i.$timeLineContainer=document.createElement("div"),i.$timeLineContainer.classList.add(P+"-rec-footer-time-line"),i.options.hasDatePicker&&(i.$popupContainer.appendChild(i.$timeLineContainer),i.$datePickerContainer=document.createElement("div"),i.$datePickerContainer.classList.add(P+"-rec-footer-date-picker"),i.$popupContainer.appendChild(i.$datePickerContainer)),i.$popupContainer.addEventListener("dblclick",(function(e){e.preventDefault(),e.stopPropagation()})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ki(e,t)}(t,e),t.prototype.destroy=function(){var e,t,n,i;(this.$datePickerContainer&&(this.$datePickerContainer.remove(),this.$datePickerContainer=null),this.$timeLineContainer)&&(null==(t=this.$timeLineContainer)||null==(e=t.remove)||e.call(t),this.$timeLineContainer=null);this.$popupContainer&&(null==(i=this.$popupContainer)||null==(n=i.remove)||n.call(i),this.$popupContainer=null);this.emit(N.theme.recFooterDestroy)},t}(A);function Di(e,t){return Di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Di(e,t)}var Li=function(e){function t(t){var n;return(n=e.call(this)||this)._$siblingContainer=t,n.render(),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Di(e,t)}(t,e);var n=t.prototype;return n.render=function(){this.$container||(this.$container=document.createElement("div"),this.$container.classList.add(P+"-mobile-extend"),null==this._$siblingContainer.insertAdjacentElement||this._$siblingContainer.insertAdjacentElement.call(this._$siblingContainer,"afterend",this.$container),this.$controlPanel=document.createElement("div"),this.$controlPanel.classList.add(P+"-mobile-extend-control-panel"),this.$container.appendChild(this.$controlPanel),this.$content=document.createElement("div"),this.$content.classList.add(P+"-mobile-extend-control-content"),this.$controlPanel.appendChild(this.$content),this.$top=document.createElement("div"),this.$top.classList.add(P+"-mobile-extend-control-top"),this.$content.appendChild(this.$top),this.$topLeft=document.createElement("div"),this.$topLeft.classList.add(P+"-mobile-extend-control-top-left"),this.$top.appendChild(this.$topLeft),this.$topRight=document.createElement("div"),this.$topRight.classList.add(P+"-mobile-extend-control-top-right"),this.$top.appendChild(this.$topRight))},n.destroy=function(){var e;null==(e=this.$container)||e.remove(),this.emit(N.theme.mobileExtendDestroy)},t}(A);function zi(){return zi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zi.apply(this,arguments)}function xi(e,t){return xi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xi(e,t)}var Oi={},Ii=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,Object.assign({},Oi,zi({},t,{tagName:"div",controlType:"block",classNameSuffix:"pause"})))||this)._timer=null,n._timer2=null,n._timer3=null,n._firstFlag=!1,n._options=Object.assign({},Oi,t),n.$container.classList.add(P+"-pause",P+"-hide"),n}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xi(e,t)}(t,e);var n=t.prototype;return n.show=function(e,t){var n,i,r=this;this.$container&&(this._firstFlag?this.$container.style.cssText+="pointer-events: none;":this._firstFlag=!0,this.$container.innerHTML=e?'<div class="'+P+'-pause-circle">'+ke()+"</div>":'<div class="'+P+'-pause-circle">'+Pe()+"</div>",this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer2&&(clearTimeout(this._timer2),this._timer2=null),null==(i=this.$container)||null==(n=i.classList)||n.remove(P+"-hide"),this._timer=setTimeout((function(){var e,n;r._timer&&(clearTimeout(r._timer),r._timer=null),t||(null==(n=r.$container)||null==(e=n.classList)||e.add(P+"-pause-transform"),r._timer2=setTimeout((function(){var e,t,n,i;r._timer2&&(clearTimeout(r._timer2),r._timer2=null),null==(t=r.$container)||null==(e=t.classList)||e.add(P+"-hide"),null==(i=r.$container)||null==(n=i.classList)||n.remove(P+"-pause-transform")}),300))}),10))},n.destroy=function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer2&&(clearTimeout(this._timer2),this._timer2=null),this._timer3&&(clearTimeout(this._timer3),this._timer3=null),this.hide(),e.prototype.destroy.call(this)},n._onControlClick=function(e){var t=this;if(e.stopPropagation(),e.preventDefault(),this._firstFlag){if(this._timer3)return clearTimeout(this._timer3),void(this._timer3=null);this._timer3=setTimeout((function(){t._timer3&&(clearTimeout(t._timer3),t._timer3=null),t.emit(N.control.play,!0,"pause")}),250)}},t}(U),Ri=function(e){if(e.controls){var t=Object.keys(e.controls).length>0||e._header||e._footer;if(e._interactiveResult&&(null==e._interactiveResult.cleanup||e._interactiveResult.cleanup.call(e._interactiveResult),e._interactiveResult=null),t&&e.emit(N.control.beforeUnmountControls),Object.keys(e.controls).length>0){for(var n in e.controls){var i,r;null==(i=(r=e.controls[n]).destroy)||i.call(r)}e.controls=null}e._pauseControl&&(null==e._pauseControl.destroy||e._pauseControl.destroy.call(e._pauseControl)),e._loadingControl&&(null==e._loadingControl.destroy||e._loadingControl.destroy.call(e._loadingControl)),e.messageControl&&(null==e.messageControl.destroy||e.messageControl.destroy.call(e.messageControl)),e.posterControl&&(null==e.posterControl.destroy||e.posterControl.destroy.call(e.posterControl)),e._headerMoreControl&&(null==e._headerMoreControl.destroy||e._headerMoreControl.destroy.call(e._headerMoreControl),e._headerMoreControl=null),e._footerMoreControl&&(null==e._footerMoreControl.destroy||e._footerMoreControl.destroy.call(e._footerMoreControl),e._footerMoreControl=null),e._recFooter&&(e._recFooter.destroy(),e._recFooter=null),e._mobileExtend&&(e._mobileExtend.destroy(),e._mobileExtend=null),e._header&&(e._header.destroy(),e._header=null),e._footer&&(e._footer.destroy(),e._footer=null),e._onPauseTimingFunc&&(e._onPauseTimingFunc=null),t&&e.emit(N.control.unmountedControls)}};function Mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ni(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function $i(){return $i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$i.apply(this,arguments)}function Fi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mi(e,t):void 0}}(e))||t){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ji(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var Ui=["ptz"];function Bi(e,t,n,i){if(void 0===i&&(i={}),e.$container)for(var r,o=Fi(n);!(r=o()).done;){var a,s,l,c,d,u,p=r.value;if(!(((null==(a=e.options.mobileExtendOptions)?void 0:a.controls)||[]).includes(p.iconId)&&"ptz"!==p.iconId||(null==(l=e.options.mobileExtendOptions)||null==(s=l.controls)?void 0:s.includes("rec"))&&I.includes(p.iconId))||!mt.isMobile)if(I.includes(p.iconId)&&e._header)Hi(e,e._header.$right,p.iconId,i);else if(R.includes(p.iconId))null!==e.options.deviceOptions&&((null==(c=e.controls)?void 0:c.deviceControl)||(e.controls.deviceControl=new wi.device($i({rootContainer:e.$container,getPopupContainer:function(){return t},recType:e.recType,language:e.options.language,locales:e.i18n.translations,type:e.options.type,deviceSerial:e.urlInfo.deviceSerial,channelNo:e.urlInfo.channelNo},(null==(d=e.options)?void 0:d.deviceOptions)||{},{props:i}))));else if(wi[p.iconId]){if(null!==e.options[p.iconId+"Options"])e.controls[p.iconId+"Control"]=new wi[p.iconId]($i({rootContainer:e.$container,getPopupContainer:function(){return t},language:e.options.language||"zh",locales:e.i18n.translations},Ui.includes(p.iconId)?{env:e.options.env,accessToken:e.options.accessToken,token:e.options.token,deviceSerial:e.urlInfo.deviceSerial,channelNo:e.urlInfo.channelNo}:{},{PLAY_TYPE:e.options.type},(null==(u=e.options)?void 0:u[p.iconId+"Options"])||{},{props:i}))}else e.logger.warn("["+p.iconId+"] control does not exist")}}function Vi(e,t){return(n=function(){var n,i,r,o,a,s,l,c,d,u,p,h,m,A,f,v,g,y,T,_,b,C,S,E,w,k,D,L;return ji(this,(function(z){switch(z.label){case 0:return[4,An(e,t)];case 1:if(s=z.sent(),Ri(e),"[object Object]"!==Object.prototype.toString.call(s))return[2];if(null!==e.options.loadingOptions&&(e._loadingControl=new Z($i({language:e.options.language,locales:e.i18n.translations},e.options.loadingOptions||{},{getPopupContainer:function(){return e.$container}}))),null!==e.options.pauseOptions&&(e._pauseControl=new Ii($i({language:e.options.language,locales:e.i18n.translations},e.options.pauseOptions||{},{getPopupContainer:function(){return e.contentControl.$wrapper}})),e.options.autoPlay||e._pauseControl.show(!1,!0)),null!==e.options.messageOptions&&(e.messageControl=new at($i({rootContainer:e.$container},e.options.messageOptions||{},{getPopupContainer:function(){return e.contentControl.$wrapper}}))),null!==e.options.posterOptions&&(e.posterControl=new K($i({},e.options.posterOptions||{},{getPopupContainer:function(){return e.contentControl.$video}}))),e.controls={},e.emit(N.control.beforeMountControls),l=function(e){var t,n,i,r={};r.autoFocus=null!=(i=null==e?void 0:e.autoFocus)?i:3,r.poster=(null==e?void 0:e.poster)||"";var o,a,s,l,c,d,u=[],p=[],h=((null==e||null==(t=e.header)?void 0:t.btnList)||[]).filter((function(e){return 1===e.isrender&&["deviceID","deviceName"].includes(e.iconId)?(u.push(e),!1):1===e.isrender&&I.includes(e.iconId)?(p.push(p[0]?un({},e,{part:p[0].part}):e),!1):1===e.isrender})).map((function(e){return hn[e.iconId]&&(e.iconId=hn[e.iconId]),e})),m=((null==e||null==(n=e.footer)?void 0:n.btnList)||[]).filter((function(e){return 1===e.isrender&&R.includes(e.iconId)?(u.push(e),!1):1===e.isrender&&I.includes(e.iconId)?(p.push(p[0]?un({},e,{part:p[0].part}):e),!1):1===e.isrender})).map((function(e){return hn[e.iconId]&&(e.iconId=hn[e.iconId]),e}));return h.length>0||u.length>0||p.length>0?(r.header={},r.header.color=null==e||null==(o=e.header)?void 0:o.color,r.header.backgroundColor=null==e||null==(a=e.header)?void 0:a.backgroundColor,r.header.activeColor=null==e||null==(s=e.header)?void 0:s.activeColor,r.header.btnList=[].concat(u||[],p||[],h||[])):r.header=void 0,m.length>0?(r.footer={},r.footer.color=null==e||null==(l=e.footer)?void 0:l.color,r.footer.backgroundColor=null==e||null==(c=e.footer)?void 0:c.backgroundColor,r.footer.activeColor=null==e||null==(d=e.footer)?void 0:d.activeColor,r.footer.btnList=m):r.footer=void 0,r}(s),e._themeData=l,l.poster&&e.setPoster(l.poster),e._playing||null==(n=e.posterControl)||n.show(),0===(c=x.reduce((function(t,n){return t[n]=e[n],t}),{})).width&&(c.width=Math.floor(e.$container.clientWidth)),0===c.height&&(c.height=Math.floor(e.$container.clientHeight)),l.header&&(e._header=new Cn({getPopupContainer:function(){return e.$container},color:l.header.color,activeColor:l.header.activeColor,backgroundColor:l.header.backgroundColor}),d=mn(l.header.btnList||[]),u=d[0],p=d[1],Bi(e,e._header.$left,u,c),Bi(e,e._header.$right,p,c)),l.footer&&(e._footer=new Tn({getPopupContainer:function(){return e.$container},color:l.footer.color,activeColor:l.footer.activeColor,backgroundColor:l.footer.backgroundColor}),(e._header||e._footer)&&0!==(null==l?void 0:l.autoFocus)&&(e._interactiveResult=function(e,t,n){void 0===t&&(t=3e3);var i=null,r=!1,o=!1,a=e.querySelector("."+P+"-header"),s=e.querySelector("."+P+"-footer"),l=function(){i&&(clearTimeout(i),i=null)},c=function(){null==l||l(),null==a||a.classList.remove(P+"-hide-transition"),null==s||s.classList.remove(P+"-hide-transition"),r||n(!0),r=!0},d=function(){o||(null==l||l(),e.classList.contains(P+"-player-pause")||(null==a||a.classList.add(P+"-hide-transition"),null==s||s.classList.add(P+"-hide-transition"),r&&n(!1),r=!1))},u=function(){null==c||c(),i=setTimeout((function(){null==l||l(),null==d||d()}),t)},p=function(e){var t;null==e||null==(t=e.stopPropagation)||t.call(e),null==l||l()},h=function(){r?null==d||d():null==u||u()},m=function(e){var t;null==e||null==(t=e.stopPropagation)||t.call(e),null==u||u()};if(u(),mt.isMobile&&h){var A="click";e.addEventListener(A,h),s&&s.addEventListener(A,m),a&&a.addEventListener(A,m)}else{var f,v,g,y,T=window.PointerEvent?"pointerdown":"click";e.addEventListener(T,u),e.addEventListener("mousemove",u),e.addEventListener("mouseleave",d),s&&(null==s||null==(f=s.addEventListener)||f.call(s,T,p),null==s||null==(v=s.addEventListener)||v.call(s,"mousemove",p)),a&&(null==a||null==(g=a.addEventListener)||g.call(a,T,p),null==a||null==(y=a.addEventListener)||y.call(a,"mousemove",p))}return{cleanup:function(){if(e){if(mt.isMobile&&h){var t="click";e.removeEventListener(t,h),s&&u&&s.removeEventListener(t,m),a&&u&&a.removeEventListener(t,m)}if(u){var n,i,r,A,f=window.PointerEvent?"pointerdown":"click";e.removeEventListener(f,u),e.removeEventListener("mousemove",u),e.removeEventListener("mouseleave",d),s&&l&&(null==s||null==(n=s.removeEventListener)||n.call(s,f,p),null==s||null==(i=s.removeEventListener)||i.call(s,"mousemove",p)),a&&l&&(null==a||null==(r=a.removeEventListener)||r.call(a,f,p),null==a||null==(A=a.removeEventListener)||A.call(a,"mousemove",p))}d&&e.removeEventListener("mouseleave",d),h=null,u=null,d=null,c=null,m=null,p=null,null==l||l(),l=null,o=!1}},clearTimeout:function(){null==l||l(),o=!0},setTimeoutShow:function(){null==u||u(),o=!1},hide:d}}(e.$container,1e3*((null==s?void 0:s.autoFocus)||3),(function(t){e.emit(N.control.controlsBarOpenChange,t)})),e._onPauseTimingFunc&&(e.removeListener(O,e._onPauseTimingFunc),e._onPauseTimingFunc=null),e._onPauseTimingFunc=function(t){var n,i,r,o;t?null==(i=e._interactiveResult)||null==(n=i.clearTimeout)||n.call(i):e._playing&&(null==(o=e._interactiveResult)||null==(r=o.setTimeoutShow)||r.call(o))},e.on(O,e._onPauseTimingFunc),e._onPauseTimingFunc(!e._playing)),(null==(h=e.controls)?void 0:h.volumeControl)&&(e.controls.volumeControl.disabled=!0),(null==(m=e.controls)?void 0:m.globalFullscreenControl)&&!e.playing&&(e.controls.globalFullscreenControl.disabled=!0),A=mn(l.footer.btnList||[]),f=A[0],v=A[1],Bi(e,e._footer.$left,f,c),Bi(e,e._footer.$right,v,c)),y=[].concat((null==(i=l.header)?void 0:i.btnList)||[],null!=(g=null==(r=l.footer)?void 0:r.btnList)?g:[]),T=y.some((function(e){return I.includes(e.iconId)})),mt.isMobile||null===e.options.timeLineOptions||e.options.disabledTimeLine||!T||(e._recFooter=new Pi(e.$container,{hasDatePicker:null!==e.options.dateOptions}),Yi(e,e._recFooter.$timeLineContainer,c),e._footer&&(e._footer.$container.style.cssText+="bottom: 36px;"),null!==e.options.dateOptions&&Zi(e,e._recFooter.$datePickerContainer,c)),mt.isMobile&&(null==(a=e.options.mobileExtendOptions)||null==(o=a.controls)?void 0:o.length)){if(!(w=y.some((function(e){return"ptz"===e.iconId})))&&!T)return[2];e._mobileExtend=new Li(e.$container),null!==e.options.dateOptions&&(null==(_=e.options.mobileExtendOptions)?void 0:_.controls.includes("date"))&&T&&Zi(e,e._mobileExtend.$topLeft,c),null!==e.options.recOptions&&(null==(b=e.options.mobileExtendOptions)?void 0:b.controls.includes("rec"))&&T&&[].concat((null==(k=l.header)?void 0:k.btnList)||[],null!=(L=null==(D=l.footer)?void 0:D.btnList)?L:[]).forEach((function(t){var n;I.includes(t.iconId)&&Hi(e,null==(n=e._mobileExtend)?void 0:n.$topRight,t.iconId,c)})),null===e.options.timeLineOptions&&e.options.disabledTimeLine||!(null==(C=e.options.mobileExtendOptions)?void 0:C.controls.includes("timeLine"))||!T||Yi(e,e._mobileExtend.$content,c),mt.isMobile&&(null==(E=e.options.mobileExtendOptions)||null==(S=E.controls)?void 0:S.includes("ptz"))&&w&&e.controls.ptzControl&&e.controls.ptzControl.renderMobileExtend(e._mobileExtend.$content)}return e.emit(N.control.mountedControls),e.playing||e._disabled(!0),function(e){var t,n,i,r,o,a,s,l,c,d,u,p,h,m,A;e._recFooter&&e._recFooter.on(N.theme.recFooterDestroy,(function(){e.emit(N.theme.recFooterDestroy)})),e._mobileExtend&&e._mobileExtend.on(N.theme.mobileExtendDestroy,(function(){e.emit(N.theme.mobileExtendDestroy)})),e._pauseControl&&e._pauseControl.on(N.control.play,(function(t,n){e.playing||(e.playing=t,e.emit(N.control.play,t,n))})),(null==(t=e.controls)?void 0:t.playControl)&&(e.controls.playControl.on(N.control.play,(function(t){e.playing!==t&&(e.playing=t,e.emit(N.control.play,t))})),e.controls.playControl.on(N.control.playDestroy,(function(){e.emit(N.control.playDestroy)}))),(null==(n=e.controls)?void 0:n.volumeControl)&&(e.controls.volumeControl.on(N.control.volumechange,(function(t,n){e.muted!==n&&(e.muted=n),e.volume!==t&&(e.volume=t),e.emit(N.control.volumechange,t,n)})),e.controls.volumeControl.on(N.control.volumePanelOpenChange,(function(t,n,i){e.emit(N.control.volumePanelOpenChange,t,n,i)})),e.controls.volumeControl.on(N.control.volumeDestroy,(function(){e.emit(N.control.volumeDestroy)}))),(null==(i=e.controls)?void 0:i.ptzControl)&&(e.controls.ptzControl.on(N.control.ptzPanelOpenChange,(function(t){mt.isMobile&&e.emit(O,t),e.emit(N.control.ptzPanelOpenChange,t)})),e.controls.ptzControl.on(N.control.ptzSpeedChange,(function(t){e.emit(N.control.ptzSpeedChange,t),e.emit(N.ptzSpeedChange,t)})),e.controls.ptzControl.on(N.control.ptzError,(function(t){e.emit(N.control.ptzError,t);var n=e.i18n.t(t.localeKey);/^\[missing/.test(n)&&(n=t.msg),e.emit(N.message,n+" ["+t.code+"]","ptzError",2)})),e.controls.ptzControl.on(N.control.ptzDestroy,(function(){e.emit(N.control.ptzDestroy)}))),(null==(r=e.controls)?void 0:r.recordControl)&&(e.controls.recordControl.on(N.control.recordingChange,(function(t){e.recording!==t&&e.emit(N.control.recordingChange,t)})),e.controls.recordControl.on(N.control.recordDestroy,(function(){e.emit(N.control.recordDestroy)}))),(null==(o=e.controls)?void 0:o.talkControl)&&(e.controls.talkControl.on(N.control.talkingChange,(function(t){e.talking!==t&&e.emit(N.control.talkingChange,t)})),e.controls.talkControl.on(N.control.talkDestroy,(function(){e.emit(N.control.talkDestroy)}))),(null==(a=e.controls)?void 0:a.zoomControl)&&(e.controls.zoomControl.on(N.control.zoomChange,(function(t,n,i){e.zoom!==t&&(e.zoom=t,e.emit(N.control.zoomChange,t))})),e.controls.zoomControl.on(N.control.zoomPanelOpenChange,(function(t,n){e.zooming!==t&&(e.zooming=t,e.emit(N.control.zoomPanelOpenChange,t))})),e.controls.zoomControl.on(N.control.zoomDestroy,(function(){e.zooming&&(e.zoom=1,e.zooming=!1),e.emit(N.control.zoomDestroy)}))),(null==(s=e.controls)?void 0:s.definitionControl)&&(e.controls.definitionControl.on(N.control.definitionPanelOpenChange,(function(t,n,i){e.emit(O,t,n),e.emit(N.control.definitionPanelOpenChange,t,n,i)})),e.controls.definitionControl.on(N.control.definitionChange,(function(t,n){e.emit(N.control.definitionChange,t,n)})),e.controls.definitionControl.on(N.control.definitionDestroy,(function(){e.emit(N.control.definitionDestroy)}))),(null==(l=e.controls)?void 0:l.speedControl)&&(e.controls.speedControl.on(N.control.speedPanelOpenChange,(function(t,n,i){e.emit(O,t,n),e.emit(N.control.speedPanelOpenChange,t,n,i)})),e.controls.speedControl.on(N.control.speedChange,(function(t,n){e.emit(N.control.speedChange,t,n)})),e.controls.speedControl.on(N.control.speedDestroy,(function(){e.emit(N.control.speedDestroy)}))),(null==(c=e.controls)?void 0:c.capturePictureControl)&&(e.controls.capturePictureControl.on(N.control.capturePicture,(function(t){e.emit(N.control.capturePicture,t)})),e.controls.capturePictureControl.on(N.control.capturePictureDestroy,(function(){e.emit(N.control.capturePictureDestroy)}))),(null==(d=e.controls)?void 0:d.fullscreenControl)&&e.controls.fullscreenControl.on(N.control.fullscreenDestroy,(function(){e.emit(N.control.fullscreenDestroy)})),(null==(u=e.controls)?void 0:u.globalFullscreenControl)&&e.controls.globalFullscreenControl.on(N.control.globalFullscreenDestroy,(function(){e.emit(N.control.globalFullscreenDestroy)})),(null==(p=e.controls)?void 0:p.deviceControl)&&e.controls.deviceControl.on(N.control.deviceDestroy,(function(){e.emit(N.control.deviceDestroy)})),(null==(h=e.controls)?void 0:h.recControl)&&(e.controls.recControl.on(N.control.recTypeChange,(function(t){var n;e.recType!==t&&(e.recType=t,e.emit(N.control.recTypeChange,t),(null==(n=e._headerMoreControl)?void 0:n.picker)&&(e._headerMoreControl.picker.open=!1))})),e.controls.recControl.on(N.control.recDestroy,(function(){e.emit(N.control.recDestroy)}))),(null==(m=e.controls)?void 0:m.timeLineControl)&&(e.controls.timeLineControl.on(N.control.timeLineChange,(function(t){e.emit(N.control.timeLineChange,t)})),e.controls.timeLineControl.on(N.control.timeLinePanelOpenChange,(function(t){var n,i,r;(null==(n=e.controls.dateControl)?void 0:n.dataPickerUtil)&&(null==(r=e.controls.dateControl)||null==(i=r.dataPickerUtil)||i.hide()),e.emit(N.control.timeLinePanelOpenChange,t)})),e.controls.timeLineControl.on(N.control.timeLineDestroy,(function(){e.emit(N.control.timeLineDestroy)}))),(null==(A=e.controls)?void 0:A.dateControl)&&(e.controls.dateControl.on(N.control.datePanelOpenChange,(function(t,n){e.emit(N.control.datePanelOpenChange,t,n)})),e.controls.dateControl.on(N.control.dateChange,(function(t){e.emit(N.control.dateChange,t)})),e.controls.dateControl.on(N.control.dateDestroy,(function(){e.emit(N.control.recDestroy)}))),e.contentControl&&e.contentControl.on(N.control.contentRerender,(function(t){e.emit(N.control.contentRerender,t)}))}(e),[2]}}))},function(){var e=this,t=arguments;return new Promise((function(i,r){var o=n.apply(e,t);function a(e){Ni(o,i,r,a,s,"next",e)}function s(e){Ni(o,i,r,a,s,"throw",e)}a(void 0)}))})();var n}var Yi=function(e,t,n){var i,r;(void 0===n&&(n={}),e.controls.timeLineControl||null===e.options.timeLineOptions)||(e.controls.timeLineControl=new wi.timeLine($i({getPopupContainer:function(){return t},language:e.options.language,locales:e.i18n.translations,coverQuery:(null==(i=e.urlInfo)?void 0:i.validateCode)?"decodekey="+e.urlInfo.validateCode:""},(null==(r=e.options)?void 0:r.timeLineOptions)||{},{props:n})))},Zi=function(e,t,n){var i;(void 0===n&&(n={}),e.controls.dateControl||null===e.options.dateOptions)||(e.controls.dateControl=new wi.date($i({getPopupContainer:function(){return t},language:e.options.language,locales:e.i18n.translations,staticPath:e.options.staticPath},(null==(i=e.options)?void 0:i.dateOptions)||{},{props:n})))},Hi=function(e,t,n,i){var r,o,a,s;(void 0===i&&(i={}),!(null==(r=e.controls)?void 0:r.recControl)&&null!==e.options.recOptions&&t)&&(e.controls.recControl=new wi.rec($i({getPopupContainer:function(){return t},recType:e.recType,language:e.options.language,locales:e.i18n.translations},(null==(s=e.options)?void 0:s.recOptions)||{},{props:i})));(null==(o=e.controls)?void 0:o.recControl)&&(null==(a=e.controls)?void 0:a.recControl).addRecType(n)};function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Qi(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Ki(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Qi(o,i,r,a,s,"next",e)}function s(e){Qi(o,i,r,a,s,"throw",e)}a(void 0)}))}}function Wi(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}function qi(){return qi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qi.apply(this,arguments)}function Ji(e,t){return Ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ji(e,t)}function Xi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gi(e,t):void 0}}(e))||t){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function er(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var tr={dblClickFullscreen:!0,language:"zh",autoPlay:!0,scaleMode:D,loggerOptions:{level:"INFO",showTime:!0},env:{domain:"https://open.ys7.com"},mobileExtendOptions:{controls:["ptz","timeLine","rec","date"]}},nr=function(n){function o(e){var i,r,o,a,s,l,c,d,u,p,h,m,A,f,v,g,y,T,_,b,C;((i=n.call(this)||this).options=tr,i.staticPath="",i.controls={},i._seekDate=null,i.recType="",i._headerMoreControl=null,i._footerMoreControl=null,i._header=null,i._footer=null,i._recFooter=null,i._mobileExtend=null,i._interactiveResult=null,i._themeData=null,i._fullscreen=null,i.zoomUtil=null,i._cleanupOrientation=null,i._cleanUpResizeObserver=null,i._width=0,i._height=0,i._isCurrentFullscreen=!1,i._orientationAngle=0,i._playing=!1,i._loading=!1,i._volume=0,i._muted=!1,i._zoom=1,i._zooming=!1,i._recording=!1,i._talking=!1,i._speed=1,i._videoLevelAuto=!1,i.videoLevelList=[],i.recordList=[],i._resizeOverflowTimer=null,i._onPauseTimingFunc=null,i.destroyed=!1,i.urlInfo=null,i.scaleMode=0,i._initOptions(e),"ezopen"===i.options.type)&&(i.urlInfo=t.parseEzopenUrl(i.options.url),(null==(d=i.urlInfo)||null==(c=d.searchParams)?void 0:c.spaceId)&&(i.options.spaceId=i.urlInfo.searchParams.spaceId),"rec"===i.urlInfo.type&&(i._seekDate=(null==(p=i.urlInfo)||null==(u=p.searchParams)?void 0:u.begin)?fi.strToDate(null==(m=i.urlInfo)||null==(h=m.searchParams)?void 0:h.begin):fi.strToDate(fi.formate(new Date,"YYYY/MM/DD")+" 00:00:00")));return i._getRecType(i.options.url),Gt(i,N),null==e.onInitializing||e.onInitializing.call(e,i),i.options.autoPlay&&(i.playing=!0),i._initClassName(),i.contentControl=new Ut({getContainer:function(){return i.$container},scaleMode:i.scaleMode}),function(e,t,n){e.zoomUtil=new rn(t,on({},n||{},{min:1,onChange:function(t,i){var r;t!==e._zoom&&(e.zoom=t,null==n||null==(r=n.onChange)||r.call(n,t,i))},onTranslateChange:function(t){var i;e.emit(N.zoomTranslateChange,t),null==n||null==(i=n.onTranslateChange)||i.call(n,t)},onTap:null==n?void 0:n.onTap}))}(i,i.contentControl.$content,qi({},i.options.zoomOptions||{},{onTap:function(){var e,t;null==(t=i._interactiveResult)||null==(e=t.setTimeoutShow)||e.call(t)}})),i._volume=null!=(f=null!=(A=null==(r=i.options.volumeOptions)?void 0:r.volume)?A:i.options.volume)?f:.8,i._muted=null!=(g=null!=(v=null==(o=i.options.volumeOptions)?void 0:o.muted)?v:i.options.muted)&&g,i._speed=null!=(T=null!=(y=null==(a=i.options.speedOptions)?void 0:a.value)?y:i.options.value)?T:1,i._mobileInnerWidthHeight=i._mobileInnerWidthHeight.bind(i),i._throttleMobileInnerWidthHeight=ut(i._mobileInnerWidthHeight,20).bind(i),i._onDblClickFullscreen=Zt(i._onDblClickFullscreen,20).bind(i),i._headerMoreControlShow=Zt(i._headerMoreControlShow.bind(i),200),i._footerMoreControlShow=Zt(i._footerMoreControlShow.bind(i),200),i.destroyed=!1,i._renderTheme(["flv","hls","mp4"].includes(e.type)?$t:null!=(b=null!=(_=null==(s=i.options)?void 0:s.template)?_:null==(l=i.options)?void 0:l.themeData)?b:null),i._addEventListener(),null==(C=i)||C.on(N.audioCodecUnsupported,(function(){var e;(null==(e=C.controls)?void 0:e.volumeControl)&&C.controls.volumeControl.emit(N.audioCodecUnsupported)})),null==C||C.on(N.message,(function(e,t,n){var i;if(/error$/gi.test(t)&&["ptzError","talkError","themeError","3DZoomError"].includes(t))null==(i=C.messageControl)||i.toastError(e,n);else if(/error$/gi.test(t)){var r;0===(n||0)&&(C.playing=!1),null==(r=C.messageControl)||r.error(e,n)}else if("warn"===t){var o;null==(o=C.messageControl)||o.warn(e,n)}else if("info"===t){var a;null==(a=C.messageControl)||a.info(e,n)}})),null==C||C.on(N.audioInfo,(function(e){var t;(null==C||null==(t=C.controls)?void 0:t.volumeControl)&&(e.audioFormatName||e.encType)&&(C.controls.volumeControl.disabled=!1)})),null==C||C.on(N.videoInfo,(function(e){var t,n;e&&(null==(n=C.contentControl)||null==(t=n.emit)||t.call(n,N.videoInfo,e.width,e.height))})),null==C||C.on(N.resize,(function(){var e,t;null==(t=C.contentControl)||null==(e=t.emit)||e.call(t,N.resize)})),null==C||C.on("getDeviceInfo",(function(e){})),null==C||C.on(N.firstFrameDisplay,(function(){C._disabled(!1)})),null==C||C.on(N.play,(function(e){var t,n;e&&(null==(n=C.messageControl)||n.hide()),(null==C||null==(t=C.controls)?void 0:t.globalFullscreenControl)&&(C.controls.globalFullscreenControl.disabled=!e)})),C.on(N.talkingChange,(function(e){var t,n,i,r;C._talking=e,e!==(null==(n=C.controls)||null==(t=n.talkControl)?void 0:t.active)&&(null==(r=C.controls)||null==(i=r.talkControl)||i.emit(N.talkingChange,e))})),C.on(N.talkVolumeChange,(function(e){var t,n,i;null==(i=C.controls)||null==(n=i.talkControl)||null==(t=n.emit)||t.call(n,N.talkVolumeChange,e)})),C.on(N.recordingChange,(function(e){var t,n;C._recording=e,e!==(null==(n=C.controls)||null==(t=n.recordControl)?void 0:t.active)&&(C.controls.recordControl.active=e)})),C.on(N.setVideoLevelList,(function(e){var t,n,i;null==(i=C.controls)||null==(n=i.definitionControl)||null==(t=n.emit)||t.call(n,N.setVideoLevelList,e||[])})),C.on(N.currentVideoLevel,(function(e,t){var n,i,r;null==(r=C.controls)||null==(i=r.definitionControl)||null==(n=i.emit)||n.call(i,N.currentVideoLevel,e,t)})),C.on(N.zoomingChange,(function(e){var t,n;(null==(n=C.controls)||null==(t=n.zoomControl)?void 0:t.active)!==e&&(C.controls.zoomControl.active=e)})),C.on(N.zoomChange,(function(e){var t,n;(null==(n=C.controls)||null==(t=n.zoomControl)?void 0:t.value)!==e&&(C.controls.zoomControl.value=e)})),C.on(N.speedChange,(function(e){var t,n,i;null==(i=C.controls)||null==(n=i.speedControl)||null==(t=n.emit)||t.call(n,N.speedChange,e)})),C.on(N.setAllDayRecTimes,(function(e){var t,n,i;null==(i=C.controls)||null==(n=i.timeLineControl)||null==(t=n.emit)||t.call(n,N.setAllDayRecTimes,e.list)})),C.on(N.getOSDTime,(function(e){var t,n,i;null==(i=C.controls)||null==(n=i.timeLineControl)||null==(t=n.emit)||t.call(n,N.getOSDTime,e.data)})),null==C||C.on(N.fullscreenChange,(function(e){var t,n,i,r;[0,180].includes(C.orientationAngle)&&e.isMobile&&e.isCurrentFullscreen?null==(n=C.zoomUtil)||null==(t=n.setTransform)||t.call(n,!0):null==(r=C.zoomUtil)||null==(i=r.setTransform)||i.call(r,!1)})),null==C||C.on(N.orientationChange,(function(e){var t,n,i,r;[0,180].includes(e)&&mt.isMobile&&C.isCurrentFullscreen?null==(n=C.zoomUtil)||null==(t=n.setTransform)||t.call(n,!0):null==(r=C.zoomUtil)||null==(i=r.setTransform)||i.call(r,!1)})),i}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ji(e,t)}(o,n);var a=o.prototype;return a.resize=function(e,t){!function(e,t,n){var i="";/^\d+(\.\d+)?$/.test(t+"")?i+="width: "+t+"px;":t&&(i+="width: "+t+";"),/^\d+(\.\d+)?$/.test(n+"")?i+="height: "+n+"px;":n&&(i+="height: "+n+";"),e.$container&&(e.$container.style.cssText+=i)}(this,e,t)},a.fullscreen=function(){return Ki((function(){var e;return er(this,(function(t){switch(t.label){case 0:return[4,null==(e=this._fullscreen)?void 0:e.fullscreen()];case 1:return[2,t.sent()]}}))})).call(this)},a.exitFullscreen=function(){return Ki((function(){var e;return er(this,(function(t){switch(t.label){case 0:return[4,null==(e=this._fullscreen)?void 0:e.exitFullscreen()];case 1:return[2,t.sent()]}}))})).call(this)},a.changeTheme=function(e){this._renderTheme(e),null==this.emit||this.emit.call(this,N.changeTheme,e)},a.setPoster=function(e){var t;null==(t=this.posterControl)||t.setPoster(e)},a.setLoggerOptions=function(e){var t;void 0===e&&(e={}),null==(t=this.logger)||t.setOptions(e),null==this||this.emit(N.setLoggerOptions,e)},a.setScaleMode=function(e){if([0,1,2].includes(+e)){var t,n;this.scaleMode=+e,null==(n=this.contentControl)||null==(t=n.setScaleMode)||t.call(n,+e);for(var i,r=this.$container.classList,o=Xi(r);!(i=o()).done;){var a=i.value;a.startsWith(P+"-scale-mode-")&&r.remove(a)}0===this.scaleMode?this.$container.classList.add(P+"-scale-mode-full"):1===this.scaleMode?this.$container.classList.add(P+"-scale-mode-auto"):2===this.scaleMode&&this.$container.classList.add(P+"-scale-mode-full-auto")}else{var s;null==(s=this.logger)||s.warn("scaleMode must be 0 | 1 | 2")}},a.destroy=function(){var e,t,n=this;this.$container&&!this.destroyed&&(this.emit(N.theme.beforeDestroy),this._removeEventListener(),Ri(this),null==(e=this.contentControl)||e.destroy(),this.contentControl=null,this._resizeOverflowTimer&&(clearTimeout(this._resizeOverflowTimer),this._resizeOverflowTimer=null),Array.from((null==(t=this.$container)?void 0:t.classList)||[]).forEach((function(e){new RegExp("^"+P+"-","g").test(e)&&n.$container.classList.remove(e)})),this.$container.classList.remove(""+P),this._themeData=null,this.i18n&&(this.i18n=null),this.recType="",this.emit(N.theme.destroyed),this.removeAllListeners(),this.logger&&(this.logger=null),this.destroyed=!0)},a._initOptions=function(t){var n,a,s,l;if(void 0===t&&(t={}),this.options=e(tr,t,{clone:!1}),"function"==typeof this.options.container?this.$container=this.options.container():this.$container=this.options.container,!this.$container)throw new Error("container option is required!");if(["VIDEO","CANVAS"].includes(this.$container.tagName))throw new Error("container node cannot be video or canvas!");this.staticPath=this.options.staticPath,this.logger=r(qi({},this.options.loggerOptions||{},{name:(null==(n=this.options.loggerOptions)?void 0:n.name)||this.options.type.toUpperCase()})),this.logger.log(navigator.userAgent||"unknown"),this.logger.log("[Theme Version] ",o.THEME_VERSION),"container"in this.options&&delete this.options.container;try{this.logger.log("[options] \n",JSON.stringify(this.options))}catch(e){this.logger.log("[options] \n",this.options)}var c,d=this.options.language||"zh",u=e({zh:Mt,en:Nt},this.options.locales||{},{clone:!1});(this.i18n=new i(u,{defaultLocale:d}),(null==(s=this.options.definitionOptions)||null==(a=s.list)?void 0:a.length)>0||(null==(l=this.options.videoLevelList)?void 0:l.length)>0)&&(this.videoLevelList=(null==(c=this.options.definitionOptions)?void 0:c.list)||this.options.videoLevelList);this.setScaleMode(this.options.scaleMode)},a._initClassName=function(){var e,t;this.$container.classList.add(P,mt.isMobile?P+"-mobile":P+"-pc"),["ezopen","flv","hls","mp4"].includes(this.options.type)&&this.$container.classList.add(P+"-"+this.options.type),["en","zh"].includes(this.options.language||"zh")&&this.$container.classList.add(P+"-lang-"+(this.options.language||"zh")),"string"==typeof this.options.className&&this.$container.classList.add(this.options.className),this.resize(null==(e=this.options)?void 0:e.width,null==(t=this.options)?void 0:t.height)},a._renderTheme=function(e){return Ki((function(){return er(this,(function(t){return Vi(this,e),[2]}))})).call(this)},a._mobileInnerWidthHeight=function(){if(mt.isMobile){var e,t,n,i,r=Math.floor(window.innerHeight),o=Math.floor(window.innerWidth);null==(t=this.$container)||null==(e=t.style)||e.setProperty("--"+P+"-mobile-inner-height",r+"px"),null==(i=this.$container)||null==(n=i.style)||n.setProperty("--"+P+"-mobile-inner-width",o+"px")}},a._addEventListener=function(){var e=this;this._fullscreen=new Dt(this.$container,{prefix:P,onChange:function(t){var n;(t.isCurrentFullscreen?e.emit(N.fullscreen):e._isCurrentFullscreen&&e.emit(N.exitFullscreen),e._isCurrentFullscreen=t.isCurrentFullscreen,e.emit(N.fullscreenChange,qi({},t,{orientationAngle:e._orientationAngle})),e._isRotated(),mt.isMobile&&!e._isCurrentFullscreen)&&((null==(n=e.controls)?void 0:n.ptzControl)&&e.controls.ptzControl.reset())}});var t=function(t){if(e.$container){var n;switch(null==(n=e.$container.classList)||n.remove(P+"-angle-0",P+"-angle-90",P+"-angle-180",P+"-angle-270"),t.angle){case 0:e.$container.classList.add(P+"-angle-0");break;case 90:e.$container.classList.add(P+"-angle-90");break;case 180:e.$container.classList.add(P+"-angle-180");break;case 270:e.$container.classList.add(P+"-angle-270")}e.orientationAngle!==t.angle&&e.emit(N.orientationChange,t.angle),e._orientationAngle=t.angle,e._mobileInnerWidthHeight(),e._isRotated()}},n=mt.orientationEventListener(t),i=n[0],r=n[1];this._cleanupOrientation=r,t(i),this._mobileInnerWidthHeight(),window.addEventListener("resize",this._throttleMobileInnerWidthHeight),this._cleanUpResizeObserver=mt.resizeObserver(this.$container,ut((function(){var t,n,i=Math.floor(e.$container.clientWidth),r=Math.floor(e.$container.clientHeight);(i>200&&i<=375?(e.$container.classList.add(P+"-medium-width"),e.$container.classList.remove(P+"-mini-width")):(i<=200?e.$container.classList.add(P+"-mini-width"):e.$container.classList.remove(P+"-mini-width"),e.$container.classList.remove(P+"-medium-width")),r>200&&r<=375?(e.$container.classList.add(P+"-medium-height"),e.$container.classList.remove(P+"-mini-height")):(r<=200?e.$container.classList.add(P+"-mini-height"):e.$container.classList.remove(P+"-mini-height"),e.$container.classList.remove(P+"-medium-height")),e.width!==i||e.height!==r)&&(e.emit(o.EVENTS.resize,{width:i,height:r,isCurrentFullscreen:e.isCurrentFullscreen,orientationAngle:e.orientationAngle}),e._width=i,e._height=r,(null==(n=e.controls)?void 0:n.timeLineControl)&&e.controls.timeLineControl.setWidth(i-20-36),e._headerMoreControlShow(),e._footerMoreControlShow());null==(t=e.$container)||t.classList.add(P+"-overflow-hidden"),e._resizeOverflowTimer&&(clearTimeout(e._resizeOverflowTimer),e._resizeOverflowTimer=null),e._resizeOverflowTimer=setTimeout((function(){var t;e._resizeOverflowTimer&&(clearTimeout(e._resizeOverflowTimer),e._resizeOverflowTimer=null),null==(t=e.$container)||t.classList.remove(P+"-overflow-hidden")}),200)}),20)),this.options.dblClickFullscreen&&!mt.isMobile&&this.$container.addEventListener("dblclick",this._onDblClickFullscreen)},a._headerMoreControlShow=function(){var e=this;if(this._header){var t,n,i,r,a=(null==(n=this._header)||null==(t=n.$left)?void 0:t.clientWidth)||0,s=(null==(r=this._header)||null==(i=r.$right)?void 0:i.clientWidth)||0,l=a+s+30>this._width;if(l){var c,d,u;if(!this._headerMoreControl&&(null==(c=this.controls)?void 0:c.recControl))this._headerMoreControl=new Yt({language:this.options.language,locales:this.i18n.translations,rootContainer:this.$container,getPopupContainer:function(){var t;return null==(t=e._header)?void 0:t.$right},placement:"br",controls:this.controls,open:!1,offset:[0,8],wrapClassName:P+"-header-more",onOpenChange:function(t){e.emit(N.control.headerMorePanelOpenChange,t)}}),null==(u=this.controls)||null==(d=u.recControl)||d.resetPopupContainer(this._headerMoreControl.$panel);this.emit(o.EVENTS.control.headerMoreShowControlsChange,l)}else if(this._width-a-s>100){var p,h,m,A,f;if(this._headerMoreControl&&(null==(p=this.controls)?void 0:p.recControl))null==(A=this.controls)||null==(m=A.recControl)||m.resetPopupContainer(null==(h=this._header)?void 0:h.$right),null==(f=this._headerMoreControl)||f.destroy(),this._headerMoreControl=null,this.emit(o.EVENTS.control.headerMoreShowControlsChange,!1)}}},a._footerMoreControlShow=function(){var e=this,t=function(){if(e._footer){var n,i,r=(null==(n=e._footer.$left)?void 0:n.clientWidth)||0,a=(null==(i=e._footer.$right)?void 0:i.clientWidth)||0;if(r+a+26>e._width){var s,l,c,d,u,p,h;!e._footerMoreControl&&(null==(s=e._footer)?void 0:s.$right)&&(e._footerMoreControl=new Yt({language:e.options.language,locales:e.i18n.translations,rootContainer:e.$container,getPopupContainer:function(){var t;return null==(t=e._footer)?void 0:t.$right},placement:"tr",controls:e.controls,open:!1,offset:[0,-8],wrapClassName:P+"-footer-more",onOpenChange:function(t){e.emit(N.control.footerMorePanelOpenChange,t)}}));var m=((null==(c=e._themeData)||null==(l=c.footer)?void 0:l.btnList)||[]).filter((function(t){var n,i=((null==(n=e._footerMoreControl)?void 0:n.list)||[]).findIndex((function(n){var i;return n.control===(null==(i=e.controls)?void 0:i[t.iconId+"Control"])}));return-1===i}));if(m.length<=0)return;if(0===(null==(u=e._footerMoreControl)||null==(d=u.list)?void 0:d.length))for(var A,f=Xi([m.pop(),m.pop()]);!(A=f()).done;){var v=A.value;if(v){var g,y,T,_,b,C=v.iconId+"Control";null==(T=e.controls)||null==(y=T[C])||null==(g=y.resetPopupContainer)||g.call(y,e._footerMoreControl.$panel,"prepend"),null==(b=e._footerMoreControl)||b.add(C,v.part,null==(_=e.controls)?void 0:_[C])}}else if(e._footerMoreControl){var S=m.pop();if(!S)return;var E,w,k,D,L,z=S.iconId+"Control";null==(k=e.controls)||null==(w=k[z])||null==(E=w.resetPopupContainer)||E.call(w,e._footerMoreControl.$panel,"prepend"),null==(L=e._footerMoreControl)||L.add(z,S.part,null==(D=e.controls)?void 0:D[z])}e.emit(o.EVENTS.control.footerMoreShowControlsChange,!!e._footerMoreControl,null==(h=e._footerMoreControl)||null==(p=h.list)?void 0:p.map((function(e){return e.key}))),e._footerMoreControl&&t()}else if(e._width-r-a>110){var x,O;if(null==(O=e._footerMoreControl)||null==(x=O.list)?void 0:x.length){var I,R,M,$,F,j=null==(I=e._footerMoreControl)?void 0:I.list.shift();if(j){var U,B,V;if("left"===j.part)null==(V=j.control)||null==(B=V.resetPopupContainer)||B.call(V,e._footer.$left,"append");else if("right"===j.part){var Y,Z,H,G,Q,K;if(0===(null==(Z=e._footerMoreControl)||null==(Y=Z.list)?void 0:Y.length))null==(G=j.control)||null==(H=G.resetPopupContainer)||H.call(G,e._footer.$right,"append");else null==(K=j.control)||null==(Q=K.resetPopupContainer)||Q.call(K,e._footer.$right,"before",e._footerMoreControl.$container)}null==(U=e._footerMoreControl)||U.remove(j.control)}if(1===(null==(M=e._footerMoreControl)||null==(R=M.list)?void 0:R.length)){var W,q,J,X=null==(W=e._footerMoreControl)?void 0:W.list.shift();if(X){var ee,te,ne;if("left"===X.part)null==(ne=X.control)||null==(te=ne.resetPopupContainer)||te.call(ne,e._footer.$left,"append");else if("right"===X.part){var ie,re;null==(re=X.control)||null==(ie=re.resetPopupContainer)||ie.call(re,e._footer.$right,"append")}null==(ee=e._footerMoreControl)||ee.remove(X.control)}null==(J=e._footerMoreControl)||null==(q=J.destroy)||q.call(J),e._footerMoreControl=null}e.emit(o.EVENTS.control.footerMoreShowControlsChange,!!e._footerMoreControl,null==(F=e._footerMoreControl)||null==($=F.list)?void 0:$.map((function(e){return e.key}))),t()}}}};t()},a._removeEventListener=function(){var e,t,n,i;this._isCurrentFullscreen&&(null==(i=this._fullscreen)||i.exitFullscreen());null==(e=this._fullscreen)||e.destroy(),this._fullscreen=null,null==this._cleanupOrientation||this._cleanupOrientation.call(this),this._cleanupOrientation=null,null==(n=this._cleanUpResizeObserver)||null==(t=n.unobserve)||t.call(n),this._cleanUpResizeObserver=null,window.removeEventListener("resize",this._throttleMobileInnerWidthHeight),this._throttleMobileInnerWidthHeight=null,this.options.dblClickFullscreen&&!mt.isMobile&&this.$container.removeEventListener("dblclick",this._onDblClickFullscreen)},a._setVideoLevelList=function(e){this.videoLevelList=e},a._disabled=function(e){var t=this;void 0===e&&(e=!0),M.forEach((function(n){var i;(null==(i=t.controls)?void 0:i[n+"Control"])&&(t.controls[n+"Control"].disabled=e)}))},a._onDblClickFullscreen=function(){this.isCurrentFullscreen?this.exitFullscreen():this.fullscreen()},a._getRecType=function(e){if("ezopen"===this.options.type&&/^ezopen:\/\//.test(e)){var n,i=t.parseEzopenUrl(e);if("rec"===i.type)return"cloud"===i.recType&&"7"===(null==i||null==(n=i.searchParams)?void 0:n.busType)?(this.recType="cloudRecord","cloudRecord"):"cloud"===i.recType?(this.recType="cloudRec","cloudRec"):(this.recType="rec","rec")}return this.recType="",""},a.resetControl=function(){var e=this;this.zooming&&1!==this.zoom&&(this.zoom=1),["ptz","talk","record","speed"].forEach((function(t){var n;(null==(n=e.controls)?void 0:n[t+"Control"])&&e.controls[t+"Control"].reset()}))},a._isRotated=function(){var e,t,n,i;mt.isMobile&&(this.isCurrentFullscreen&&[0,180].includes(this._orientationAngle)?((null==(e=this.controls)?void 0:e.ptzControl)&&(this.controls.ptzControl.isRotated=!0),(null==(t=this.controls)?void 0:t.zoomControl)&&(this.controls.zoomControl.isRotated=!0)):((null==(n=this.controls)?void 0:n.ptzControl)&&(this.controls.ptzControl.isRotated=!1),(null==(i=this.controls)?void 0:i.zoomControl)&&(this.controls.zoomControl.isRotated=!1)))},Wi(o,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"playing",get:function(){return this._playing},set:function(e){var t,n,i,r,o,a=this;if(this._playing!==e){var s,l,c,d;if(this._playing=e,e||(this.loading=!1,["ptz","talk","record"].forEach((function(e){var t;(null==(t=a.controls)?void 0:t[e+"Control"])&&a.controls[e+"Control"].reset()})),this._disabled(!0)),this.emit(N.play,e),null==(s=this.controls)?void 0:s.playControl)if(this.controls.playControl.playing!==e)null==(d=this.controls)||d.playControl.emit(N.play,e);null==(c=this._pauseControl)||null==(l=c.show)||l.call(c,e)}this._playing&&(null==(t=this.messageControl)||t.hide());this._playing?null==(i=this._interactiveResult)||null==(n=i.setTimeoutShow)||n.call(i):null==(o=this._interactiveResult)||null==(r=o.clearTimeout)||r.call(o)}},{key:"loading",get:function(){return this._loading},set:function(e){var t,n;(this._loading=e,e)?null==(t=this._loadingControl)||t.show():null==(n=this._loadingControl)||n.hide();this._loading!==e&&this.emit(N.loading,e)}},{key:"volume",get:function(){return this._volume},set:function(e){var t,n,i;e>=0&&e<=1&&(this._volume!==e&&(this._volume=e,this.emit(N.volumechange,e,this._muted),(null==(t=this.controls)?void 0:t.volumeControl)&&(null==(i=this.controls)||null==(n=i.volumeControl)?void 0:n.volume)!==e&&this.controls.volumeControl.emit(N.volumechange,e,this._muted)))}},{key:"muted",get:function(){return this._muted},set:function(e){var t,n,i;this._muted!==e&&(this._muted=e,this.emit(N.volumechange,this._volume,this._muted),(null==(t=this.controls)?void 0:t.volumeControl)&&(null==(i=this.controls)||null==(n=i.volumeControl)?void 0:n.muted)!==e&&this.controls.volumeControl.emit(N.volumechange,this._volume,e))}},{key:"zooming",get:function(){return this._zooming},set:function(e){var t,n,i,r,o,a,s,l,c,d;this._zooming!==e&&(this._zooming=e,this.emit(N.zoomingChange,e),this.zoomUtil&&(e?(null==(n=this.zoomUtil)||null==(t=n.setUpEventListeners)||t.call(n),null==(r=this.zoomUtil)||null==(i=r.setAllowZoom)||i.call(r,!0)):(null==(a=this.zoomUtil)||null==(o=a.reset)||o.call(a),null==(l=this.zoomUtil)||null==(s=l.removeEventListeners)||s.call(l),null==(d=this.zoomUtil)||null==(c=d.setAllowZoom)||c.call(d,!1))))}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t,n,i,r,o;if(!this._zooming)return null==(i=this.messageControl)||null==(n=i.info)||n.call(i,this.i18n.t("ZOOM_NOT_ENABLED")),void(null==(r=this.logger)||r.warn(this.i18n.t("ZOOM_NOT_ENABLED")));e=+e.toFixed(1);var a,s,l,c,d,u,p,h,m,A,f=null!=(o=null==(t=this.options.zoomOptions)?void 0:t.max)?o:Xt.max;if(e>f)return null==(s=this.messageControl)||null==(a=s.info)||a.call(s,this.i18n.t("ZOOM_LIMIT_MAX",{zoom:f})),void(null==(l=this.logger)||l.warn(this.i18n.t("ZOOM_LIMIT_MAX",{zoom:f})));if(e<1)return null==(d=this.messageControl)||null==(c=d.info)||c.call(d,this.i18n.t("ZOOM_LIMIT_MIN",{zoom:"1"})),void(null==(u=this.logger)||u.warn(this.i18n.t("ZOOM_LIMIT_MIN",{zoom:"1"})));if(e===f)null==(h=this.messageControl)||null==(p=h.info)||p.call(h,this.i18n.t("ZOOM_ADD_MAX",{zoom:f}));else if(1===e){var v,g;null==(g=this.messageControl)||null==(v=g.info)||v.call(g,this.i18n.t("ZOOM_SUB_MIN",{zoom:1}))}e!==this._zoom&&(this._zoom=e,this.emit(N.zoomChange,e),null==this||null==(A=this.zoomUtil)||null==(m=A.setZoom)||m.call(A,e))}},{key:"talking",get:function(){return this._talking}},{key:"speed",get:function(){return this._speed},set:function(e){(e=+e)!==this._speed&&(this._speed=e,this.emit(N.speedChange,e))}},{key:"talkGain",get:function(){var e,t,n;return(null==(t=this.controls)||null==(e=t.talkControl)?void 0:e.active)?(null==(n=this.controls)?void 0:n.talkControl).value:null}},{key:"recording",get:function(){return this._recording}},{key:"ptzing",get:function(){var e,t;return null==(t=this.controls)||null==(e=t.ptzControl)?void 0:e.active}},{key:"videoLevelAuto",get:function(){return this._videoLevelAuto}},{key:"isCurrentFullscreen",get:function(){return this._isCurrentFullscreen}},{key:"orientationAngle",get:function(){return this._orientationAngle}},{key:"hasHeaderMoreControl",get:function(){return!!this._headerMoreControl}},{key:"hasFooterMoreControl",get:function(){return!!this._footerMoreControl}}]),o}(A);nr.TEMPLATES=Ft,nr.EVENTS=N,nr.LOCALES={zh:Mt,en:Nt},nr.THEME_VERSION="2.0.0-beta.4",Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};const ir=(e,t,n,i)=>{var r=document.getElementsByTagName("head")[0].getElementsByTagName("script"),o=!1;if(n)o=n();else for(var a=0;a<r.length;a++)r[a].getAttribute("src")==e&&(o=!0,r[a].readyState?r[a].onreadystatechange=function(){"complete"!=r[a].readyState&&"loaded"!=r[a].readyState||(r[a].onreadystatechange=null,t(i))}:r[a].onload=()=>{t(i)});if(!o){try{if(!document.querySelector(`script[src="${e}"]`)){var s=document.createElement("script");s.setAttribute("src",e),s.setAttribute("crossorigin",!0),s.onload=()=>t(i),document.getElementsByTagName("head")[0].appendChild(s)}}catch(e){}setTimeout((()=>{t(i)}),15)}},rr=e=>{for(var t=document.getElementsByTagName("head")[0].getElementsByTagName("script"),n=0;n<t.length;n++)if(t[n].getAttribute("src")==e)return void document.getElementsByTagName("head")[0].removeChild(t[n])},or=(e,t)=>{var n=new RegExp("(\\?|#|&)"+e+"=(.*?)(#|&|$)"),i=(t||window.location.href).match(n);return decodeURIComponent(i?i[2]:"")},ar=(e,t)=>{var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)},sr=e=>({deviceSerial:e.split("/")[3],channelNo:e.split("/")[4].split(".")[0],validCode:2===e.split("/")[2].split("@").length?e.split("/")[2].split("@")[0]:"",hd:-1!==e.indexOf(".hd"),type:-1!==e.indexOf(".cloud.rec")?"cloud.rec":-1!==e.indexOf(".rec")?"rec":"live"}),lr=()=>!!window&&navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone|Opera Mini)/i);var cr={391001:"",391004:"",395e3:"",395400:"",395402:"",395403:"",395404:"",395405:"",395406:"token",395407:"URL",395409:"",395410:"",395411:"",395412:"",395413:"",395415:"",395416:"",395451:"",395452:"",395454:"",395455:"",395456:"",395457:"",395458:"",395459:"",395460:"",395492:"",395500:"",395501:"",395503:"",395504:"",395505:"",395506:"NVR",395507:"4GAPPAPP",395530:"",395544:"",395545:"",395546:"",395547:"",395556:"",395557:"",395558:"",395560:"",395561:"",395562:"",395563:"",395564:"",395566:"",395567:"",395568:"",395569:"",395600:"",395601:"",395602:"",395610:"",395620:"",395701:"",395702:"",395703:"",396001:"",396099:"",396101:"",396102:"",396103:"",396104:"",396105:"",396106:"",396107:"",396108:"",396109:"",396110:"",396501:"",396502:"",396503:"",396504:"",396505:"",396506:"",396508:"",396509:"",396510:"",396511:"",396512:"",396513:"",396514:"",396515:"",396516:"",396517:"",396518:"",396519:"",396520:"",396700:"",396701:"",397001:"",397002:"",397003:"",397004:"",397005:"",397006:"",397007:"",399e3:"",399001:"",399002:"",399016:"token",399048:"",399049:"",3810001:"",3810002:"",3810005:"",3820002:"",3820006:"",3820007:"",3820008:"",3820014:"",3820032:"",3849999:"",386e4:"",3860001:"",3860002:"",3860003:"",3860004:"",3860005:"",3860006:"",3860009:"",3860020:"",BTN_RETRY:"",BTN_RELOAD:"",LOADING:"",TIMEFORMAT_ERROR:"",USE_MULTITHREADING_WARING:",",OPEN_INSTRUCTIONS:"",INIT_FINSHED:"",INIT_SUCCESS:"",GET_PLAYURL_FAILED:"",VIDEO_LOADING:"",DISCONNECT:"",DEVICE_ENCRYPTED:"",NO_RECORD:"",PLAY_FAILED:"",PLAY_SUCCESS:"",STOP_SUCCESS:"",CHANGE_PLAYURL_SUCCESS:"",CHANGE_PLAYURL_FAILED:"",GET_OSD_TIME:"OSD",GET_OSD_TIME_FAILED:"OSD",SET_POSTER:"",RESIZE:"",SPEED:"",SPEED_RATE:"",SPEED_CANCEL:"",GET_SPEED:"",MAX_SPEED_LIMIT:"4",MIN_SPEED_LIMIT:"0.5",SEEK_CANNOT_CROSS_DAYS:"seek",SEEK_TIMEFORMAT_ERROR:"seek",PAUSE:"",PAUSE_FAILED:"",RESUME:"",RESUME_FAILED:"",CALL_END:"",USER_DO_NOT_OWN_DEVICE:"loadingSetTextWithBtn",NO_CLOUD_RECORD:"",CHANGE_VIDEO_LEVEL:"",CHANGE_VIDEO_LEVEL_FAIL:"",GET_VIDEO_LEVEL_LIST:"",PLEASE_INPUT_RIGHT_VIDEO_LEVEL:"",VIDEO_LEVEL_NOT_SUPPORT:"",VIDEO_LEVEL_AUTO:"",VIDEO_LEVEL_FLUENT:"",VIDEO_LEVEL_STANDARD:"",VIDEO_LEVEL_HEIGH:"",VIDEO_LEVEL_SUPER:"",VIDEO_LEVEL_EXTREME:"",VIDEO_LEVEL_3K:"3K",VIDEO_LEVEL_4k:"4K",RESET_THEME:"",BTN_PLAY:"/",BTN_SOUND:"",BTN_RECORDVIDEO:"",BTN_CAPTURE:"",BTN_TALK:"",BTN_ZOOM:"",BTN_3D_ZOOM:"3D",BTN_PTZ:"",BTN_EXPEND:"",BTN_WEBEXPEND:"",BTN_HD:"",BTN_SPEED:"",BTN_CLOUDREC:"",BTN_CLOUDRECORD:"",BTN_REC:"",DEVICE_NAME:"",DEVICE_ID:"",CAPTURE_SUCCESS:"",CAPTURE_FAILED:"",START_RECORD_SUCCESS:"",START_RECORD_FAILED:"",STOP_RECORD_SUCCESS:"",STOP_RECORD_FAILED:"",RECORD_TIPS:"",RECORDS:"",OPEN_SOUND:"",CLOSE_SOUND:"",SOUND_OPENED:"",ZOOM:"",START_ZOOM:"",CLOSE_ZOOM:"",ZOOM_ADD:"+",ZOOM_SUB:"-",ZOOM_ADD_MAX:"8.0X",ZOOM_SUB_MIN:"1.0X",ZOOM_LIMIT_MAX:"8.0X",ZOOM_LIMIT_MIN:"1.0X","3D_ZOOM":"3D","3D_ZOOM_DISABLE":"3D","3D_ZOOM_FAILED":"3D",START_3D_ZOOM:"3D",CLOSE_3D_ZOOM:"3D",DEVICE_NOT_SUPPORT_3D_ZOOM:"3D","3D_ZOOM_ACTIVED":"3D","3D_ZOOM_NOT_ACTIVED":"3D","3D_ZOOM_CLOSED":"3D",CHANGE_ZOOM_TYPE:"",FULLSCREEN:"",FULLSCREEN_EXIT:"",GET_WEB_FULLSCREEN_STATUS:"",WEB_FULLSCREEN:"",WEB_FULLSCREEN_EXIT:"",DESTROY:"",GET_CAPACITY:"",GET_PTZ_STATUS:"",GET_PTZ_STATUS_FAILED:"Theme",MOBILE_HIDE_PTZ:"",OPTION_PTZ_FAILED:"Theme",MOBILE_PTZ_TIPS:"",PTZ_FAST:"",PTZ_MID:"",PTZ_SLOW:"",PTZ_SPEED:"",DEVICE_ZOOM:"/",DEVICE_FOCUS:"",NOT_SUPPORT_DEVICE_ZOOM:"",NOT_SUPPORT_FOCUS:"",MIRROR:"",MIRROR_TYPE_ERROR:"",CHANGE_FEC_TYPE:"",DEVICE_NOT_SUPPORT:"",TYPE_NOT_SUPPORT:"",FEC_SUPPORT_VERSION:"V3",NO_CANVAS_ID:"canvas id",SET_FEC_PARAMS:"3D",GET_FEC_PARAMS:"3D",SET_FEC_PARAMS_FAILED:"3D",GET_FEC_PARAMS_FAILED:"3D",GET_FEC_PARAMS_SUPPORT_VERSION:"V33D",SET_WATERMARK:"",TALK_PERMISSION_DENIED:"",TALK_ERROR:"",TALK_TALKING:"",videoFormat:"",frameRate:"",systemFormat:"",resolution:"",bitrate:"",frameLostRate:"",lagRate:""},dr={391001:"Illegal streaming address or port",391004:"Failed to connect to streaming service",395e3:"Internal service exception, please try again later",395400:"Preview streaming parameter exception",395402:"Device has no recording in the current time period, please select another time period",395403:"Service exception, please try again or contact customer service",395404:"The device is not online, Please optimize the network and restart the device to try again",395405:"Device side network is poor, please check and optimize the network and restart the device to try again",395406:"Token expired, please try again",395407:"Client URL format error",395409:"Service exception, please try again or contact customer service",395410:"Service exception, please try again or contact customer service",395411:"No permission to view the current device",395412:"Service exception, please try again or contact customer service",395413:"Service exception, please try again or contact customer service",395415:"Device channel error",395416:"The current number of viewing channels has reached the maximum limit of the device. Please restart the device or contact the device after-sales service",395451:"The device does not support this bitstream type. Please check the device channel support or contact the hardware after-sales service",395452:"The network on the device side is poor. Please check and optimize the network and restart the device to try again",395454:"The network on the device side is poor. Please check and optimize the network and restart the device to try again",395455:"The device channel is abnormal. Please check the channel configuration and try again",395456:"The device channel is abnormal. Please check the channel configuration and try again",395457:"Service exception, please try again or contact customer service",395458:"Service exception, please try again or contact customer service",395459:"Service exception, please try again or contact customer service",395460:"Service exception, please try again or contact customer service",395492:"Service exception, please try again or contact customer service",395500:"Service exception, please try again or contact customer service",395501:"Service exception, please try again or contact customer service",395503:"Service exception, please try again or contact customer service",395504:"Service exception, please try again or contact customer service",395505:"Service exception, please try again or contact customer service",395506:"Direct streaming of this device is not supported at present, please try again or contact customer service after connecting to NVR",395507:"Device 4G unlimited traffic package only supports EZVIZ Cloud Video APP, please contact APP customer service to change the package",395530:"Service exception, please try again or contact customer service",395544:"Video source does not exist, please check device configuration",395545:"Service exception, please try again or contact customer service",395546:"The number of simultaneous viewers has reached the maximum limit of the account, please contact customer service",395547:"The number of simultaneous viewers has reached the maximum limit of the account, please contact customer service",395556:"Service exception, please try again or contact customer service",395557:"Device streaming failed, please contact hardware after-sales",395558:"Error in finding the start time of recording",395560:"Service exception, please try again or contact customer service",395561:"Service exception, please try again or contact customer service",395562:"Service exception, please try again or contact customer service",395563:"Service exception, please try again or contact customer service",395564:"Service exception, please try again or contact customer service",395566:"Service exception, please try again or contact customer service",395567:"Service exception, please try again or contact customer service",395568:"Service exception, please try again or contact customer service",395569:"Service exception, please try again or contact customer service",395600:"Service exception, please try again or contact customer service",395601:"Service exception, please try again or contact customer service",395602:"Service exception, please try again or contact customer service",395610:"Service exception, please try again or contact customer service",395620:"Service exception, please try again or contact customer service",395701:"Service exception, please try again or contact customer service",395702:"Service exception, please try again or contact customer service",395703:"Service exception, please try again or contact customer service",396001:"Service exception, please try again or contact customer service",396099:"Service exception, please try again or contact customer service",396101:"Service exception, please try again or contact customer service",396102:"Service exception, please try again or contact customer service",396103:"Service exception, please try again or contact customer service",396104:"Service exception, please try again or contact customer service",396105:"Device abnormality, please try again or contact customer service",396106:"Device channel abnormality, please check the channel configuration and try again",396107:"Device abnormality, please try again or contact customer service",396108:"Service exception, please try again or contact customer service",396109:"Service exception, please try again or contact customer service",396110:"Device abnormality, please try again or contact customer service",396501:"Device abnormality, please try again or contact customer service",396502:"Device abnormality, please try again or contact customer service",396503:"Device abnormality, please try again or contact customer service",396504:"Device abnormality, please try again or contact customer service",396505:"Device abnormality, please try again or contact customer service",396506:"Device abnormality, please try again or contact customer service",396508:"Device abnormality, please try again or contact customer service",396509:"Device abnormality, please try again or contact customer service",396510:"Device abnormality, please try again or contact customer service",396511:"Device abnormality, please try again or contact customer service",396512:"Device abnormality, please try again or contact customer service",396513:"Device abnormality, please try again or contact customer service",396514:"Device abnormality, please try again or contact customer service",396515:"Device abnormality, please try again or contact customer service",396516:"Device abnormality, please try again or contact customer service",396517:"Device abnormality, please try again or contact customer service",396518:"Device abnormality, please try again or contact customer service",396519:"Device network abnormality, please check and optimize the network and restart the device to try again",396520:"Device network abnormality, please check and optimize the network and restart the device to try again",396700:"Service exception, please try again or contact customer service",396701:"Playback ends",397001:"Service exception, please try again or contact customer service",397002:"Service exception, please try again or contact customer service",397003:"Service exception, please try again or contact customer service",397004:"Service exception, please try again or contact customer service",397005:"Device streaming connection is disconnected, please check the network and try again",397006:"Service exception, please try again or contact customer service",397007:"Service exception, please try again or contact customer service",399e3:"Service exception, please try again or contact customer service",399001:"Client network timeout",399002:"Service exception, please try again or contact customer service",399016:"Token invalid, please update and retry",399048:"The number of simultaneous viewers has reached the maximum account limit, please contact customer service",399049:"The number of simultaneous viewers has reached the maximum account limit, please contact customer service",3810001:"Operation failed",3810002:"Account exception, operation failed",3810005:"Account exception, operation failed",3820002:"Device does not exist, please check the device connection status",3820006:"Operation failed, please check the network condition of the device",3820007:"Operation failed, please check the network condition of the device",3820008:"The operation is too frequent, please try again later",3820014:"Operation failed",3820032:"The channel does not exist. Please check the device connection status",3849999:"Operation failed, please try again",386e4:"Operation failed, the device does not support this operation",3860001:"Operation failed, user does not have permission",3860002:"The device has been rotated to the upper limit position",3860003:"The device has been rotated to the lower limit position",3860004:"The device has rotated to the left limit position",3860005:"The device has been rotated to the right limit position",3860006:"Operation failed, please try again",3860009:"The device is currently in operation",3860020:"Operation failed",BTN_RETRY:"Retry",BTN_RELOAD:"Reload",LOADING:"Loading, please wait",TIMEFORMAT_ERROR:"The time format is wrong, please confirm",USE_MULTITHREADING_WARING:"Your current browser can enable the multi-threaded feature of Google Labs to get a better playback experience and avoid browser freezes and crashes. For details, see:",OPEN_INSTRUCTIONS:"Enablement instructions",INIT_FINSHED:"Initialize the player completed",INIT_SUCCESS:"Initialize the player successfully",GET_PLAYURL_FAILED:"Failed to obtain the playback address",VIDEO_LOADING:"Video loading",DISCONNECT:"Connection disconnected, please try again",DEVICE_ENCRYPTED:"Device encrypted",NO_RECORD:"No video clips found",PLAY_FAILED:"Play failed, please check the device and client network",PLAY_SUCCESS:"Play successfully",STOP_SUCCESS:"Stop successfully",CHANGE_PLAYURL_SUCCESS:"Switch the playback address successfully",CHANGE_PLAYURL_FAILED:"Switch the playback address failed",GET_OSD_TIME:"Get OSD time",GET_OSD_TIME_FAILED:"Failed to get OSD time",SET_POSTER:"Set the player cover",RESIZE:"Adjust the player size",SPEED:"speeds",SPEED_RATE:"X",SPEED_CANCEL:"Cancel",GET_SPEED:"Get the current playback rate",MAX_SPEED_LIMIT:"The maximum playback speed is 4 times the speed",MIN_SPEED_LIMIT:"The minimum playback speed is 0.5 times the speed",SEEK_CANNOT_CROSS_DAYS:"The seek time cannot cross dates",SEEK_TIMEFORMAT_ERROR:"The seek time format is wrong",PAUSE:"Pause",PAUSE_FAILED:"Pause failed",RESUME:"Resume playback",RESUME_FAILED:"Resume playback failed",CALL_END:"Call ended",USER_DO_NOT_OWN_DEVICE:"loadingSetTextWithBtn",NO_CLOUD_RECORD:"The device has no cloud recorded video on that day",CHANGE_VIDEO_LEVEL:"Switch definition",CHANGE_VIDEO_LEVEL_FAIL:"Switch definition failed",GET_VIDEO_LEVEL_LIST:"Get the definition list supported by the device",PLEASE_INPUT_RIGHT_VIDEO_LEVEL:"Please enter the correct definition",VIDEO_LEVEL_NOT_SUPPORT:"The current device does not support this definition",VIDEO_LEVEL_AUTO:"Auto",VIDEO_LEVEL_FLUENT:"Fluent",VIDEO_LEVEL_STANDARD:"Standard",VIDEO_LEVEL_HEIGH:"heigh",VIDEO_LEVEL_SUPER:"Super",VIDEO_LEVEL_EXTREME:"Extreme",VIDEO_LEVEL_3K:"3K",VIDEO_LEVEL_4k:"4K",RESET_THEME:"Reset theme",BTN_PLAY:"Play/end playback",BTN_SOUND:"Sound",BTN_RECORDVIDEO:"Screen recording",BTN_CAPTURE:"Screenshot",BTN_TALK:"Intercom",BTN_ZOOM:"Electronic zoom",BTN_3D_ZOOM:"3D positioning",BTN_PTZ:"PTZ control",BTN_EXPEND:"Global full screen",BTN_WEBEXPEND:"Web page full screen",BTN_HD:"Image definition",BTN_SPEED:"Playback speed",BTN_CLOUDREC:"Cloud storage playback",BTN_CLOUDRECORD:"Cloud recording",BTN_REC:"Local storage",DEVICE_NAME:"Device name",DEVICE_ID:"Device serial number",CAPTURE_SUCCESS:"Screenshot successful",CAPTURE_FAILED:"Screenshot failed",START_RECORD_SUCCESS:"Start recording successful",START_RECORD_FAILED:"Screenshot failed",STOP_RECORD_SUCCESS:"Stop recording successful",STOP_RECORD_FAILED:"Stop recording failed",RECORD_TIPS:"Today's recording",RECORDS:" in total",OPEN_SOUND:"Turn on sound",CLOSE_SOUND:"Turn off sound",SOUND_OPENED:"There is already a picture playing sound at the moment",ZOOM:"Electronic zoom",START_ZOOM:"Turn on electronic zoom",CLOSE_ZOOM:"Turn off electronic zoom",ZOOM_ADD:"+",ZOOM_SUB:"-",ZOOM_ADD_MAX:"It has been enlarged to a maximum magnification of 8.0X",ZOOM_SUB_MIN:"It has been reduced to the minimum multiple of 1.0X",ZOOM_LIMIT_MAX:"Exceeding maximum magnification of 8.0X",ZOOM_LIMIT_MIN:"Exceeding the minimum magnification of 1.0X","3D_ZOOM":"3D positioning","3D_ZOOM_DISABLE":"3D positioning function not enabled","3D_ZOOM_FAILED":"3D positioning failed, please try again",START_3D_ZOOM:"Turn on 3D positioning",CLOSE_3D_ZOOM:"Turn off 3D positioning",DEVICE_NOT_SUPPORT_3D_ZOOM:"Current device does not support 3D positioning function","3D_ZOOM_ACTIVED":"3D positioning is already enabled","3D_ZOOM_NOT_ACTIVED":"3D positioning function is not enabled","3D_ZOOM_CLOSED":"3D positioning is already disabled",CHANGE_ZOOM_TYPE:"Change zoom mode",FULLSCREEN:"Global full screen",FULLSCREEN_EXIT:"Exit global full screen",GET_WEB_FULLSCREEN_STATUS:"Get browser web page full screen status",WEB_FULLSCREEN:"Turn on web page full screen",WEB_FULLSCREEN_EXIT:"Exit full screen webpage",DESTROY:"Destroy",GET_CAPACITY:"Get device capability level",GET_PTZ_STATUS:"Get current PTZ status",GET_PTZ_STATUS_FAILED:"Theme module is not loaded, PTZ status cannot be obtained",MOBILE_HIDE_PTZ:"Mobile terminal, PTZ is not displayed in non-full screen state",OPTION_PTZ_FAILED:"Theme module is not loaded, PTZ cannot be operated",MOBILE_PTZ_TIPS:"Adjust camera angle by manipulating gimbal",PTZ_FAST:"F",PTZ_MID:"M",PTZ_SLOW:"S",PTZ_SPEED:"Adjust the PTZ rotation speed",DEVICE_ZOOM:"Control the device to zoom in/out of the screen",DEVICE_FOCUS:"Adjusting the device's focal length",NOT_SUPPORT_DEVICE_ZOOM:"Device does not support physical zoom",NOT_SUPPORT_FOCUS:"Device does not support adjusting the focal length",MIRROR:"Mirror flip",MIRROR_TYPE_ERROR:"Flip parameter type error",CHANGE_FEC_TYPE:"Switch fisheye correction type",DEVICE_NOT_SUPPORT:"Device does not support fisheye mode",TYPE_NOT_SUPPORT:"Fisheye correction type is not supported temporarily",FEC_SUPPORT_VERSION:"Currently only V3 software solution supports fisheye correction",NO_CANVAS_ID:"Fisheye correction type requires split screen, but the correct split screen canvas id is not passed",SET_FEC_PARAMS:"Set 3D correction perspective parameters",GET_FEC_PARAMS:"Get 3D correction perspective parameters",SET_FEC_PARAMS_FAILED:"This correction type cannot set 3D correction perspective parameters",GET_FEC_PARAMS_FAILED:"This correction type cannot get 3D correction perspective parameters",GET_FEC_PARAMS_SUPPORT_VERSION:"Currently only V3 software solution supports fisheye correction Get 3D correction perspective parameters",SET_WATERMARK:"Set watermark",TALK_PERMISSION_DENIED:"Permission denied",TALK_ERROR:"Talk failed, please check microphone or network",TALK_TALKING:"Currently devices that are talking to each other",videoFormat:"Video format",frameRate:"Frame fate",systemFormat:"System format",resolution:"Resolution",bitrate:"Bitrate",frameLostRate:"Frame Lost rate",lagRate:"Lag rate"};
/*
* TalkControl v0.0.2
* talk
* Copyright (c) 2025-11-20 Ezviz-OpenBiz
* Released under the MIT License.
*/
class ur{on(e,t){e&&t&&(this.events[e]=this.events[e]||[],this.events[e].push(t))}emit(e,t){e&&this.events[e]&&this.events[e].forEach((e=>e(t)))}off(e,t){e&&t&&this.events[e]&&this.events[e].splice(this.events[e].indexOf(t),1)}once(e,t){const n=this;this.on(e,(function i(){const r=Array.prototype.slice.call(arguments);t.apply(null,r),n.off(e,i)}))}removeAllListener(){this.events={}}constructor(){this.events={}}}!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).adapter=e()}((function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};t[a][0].call(d.exports,(function(e){return r(t[a][1][e]||e)}),d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){var i=(0,e("./adapter_factory.js").adapterFactory)({window:window});window.adapter=i,t.exports=i},{"./adapter_factory.js":2}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=
/*
   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
   *
   *  Use of this source code is governed by a BSD-style license
   *  that can be found in the LICENSE file in the root of the source
   *  tree.
   */
function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=i.log,c=i.detectBrowser(e),d={browserDetails:c,commonShim:l,extractVersion:i.extractVersion,disableLog:i.disableLog,disableWarnings:i.disableWarnings};switch(c.browser){case"chrome":if(!r||!r.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),d;n("adapter.js shimming chrome."),d.browserShim=r,r.shimGetUserMedia(e),r.shimMediaStream(e),r.shimPeerConnection(e),r.shimOnTrack(e),r.shimAddTrackRemoveTrack(e),r.shimGetSendersWithDtmf(e),r.shimGetStats(e),r.shimSenderReceiverGetStats(e),r.fixNegotiationNeeded(e),l.shimRTCIceCandidate(e),l.shimConnectionState(e),l.shimMaxMessageSize(e),l.shimSendThrowTypeError(e),l.removeAllowExtmapMixed(e);break;case"firefox":if(!a||!a.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),d;n("adapter.js shimming firefox."),d.browserShim=a,a.shimGetUserMedia(e),a.shimPeerConnection(e),a.shimOnTrack(e),a.shimRemoveStream(e),a.shimSenderGetStats(e),a.shimReceiverGetStats(e),a.shimRTCDataChannel(e),a.shimAddTransceiver(e),a.shimCreateOffer(e),a.shimCreateAnswer(e),l.shimRTCIceCandidate(e),l.shimConnectionState(e),l.shimMaxMessageSize(e),l.shimSendThrowTypeError(e);break;case"edge":if(!o||!o.shimPeerConnection||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),d;n("adapter.js shimming edge."),d.browserShim=o,o.shimGetUserMedia(e),o.shimGetDisplayMedia(e),o.shimPeerConnection(e),o.shimReplaceTrack(e),l.shimMaxMessageSize(e),l.shimSendThrowTypeError(e);break;case"safari":if(!s||!t.shimSafari)return n("Safari shim is not included in this adapter release."),d;n("adapter.js shimming safari."),d.browserShim=s,s.shimRTCIceServerUrls(e),s.shimCreateOfferLegacy(e),s.shimCallbacksAPI(e),s.shimLocalStreamsAPI(e),s.shimRemoteStreamsAPI(e),s.shimTrackEventTransceiver(e),s.shimGetUserMedia(e),l.shimRTCIceCandidate(e),l.shimMaxMessageSize(e),l.shimSendThrowTypeError(e),l.removeAllowExtmapMixed(e);break;default:n("Unsupported browser!")}return d};var i=c(e("./utils")),r=c(e("./chrome/chrome_shim")),o=c(e("./edge/edge_shim")),a=c(e("./firefox/firefox_shim")),s=c(e("./safari/safari_shim")),l=c(e("./common_shim"));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},n.shimOnTrack=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(i){var r;r=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===i.track.id})):{track:i.track};var o=new Event("track");o.track=i.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(i){var r;r=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===i.id})):{track:i};var o=new Event("track");o.track=i,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else a.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))},n.shimGetSendersWithDtmf=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){var r=n.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},n.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),i=n[0],r=n[1],o=n[2];if(arguments.length>0&&"function"==typeof i)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof i))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};return arguments.length>=2?t.apply(this,[function(e){r(s(a(e)))},i]):new Promise((function(n,i){t.apply(e,[function(e){n(s(a(e)))},i])})).then(r,o)}}},n.shimSenderReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,i=void 0,r=void 0;return this.getSenders().forEach((function(e){e.track===t&&(n?r=!0:n=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(i?r=!0:i=e),e.track===t})),r||n&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},n.shimAddTrackRemoveTrackWithNative=l,n.shimAddTrackRemoveTrack=function(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return l(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}i.apply(this,[t])};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var i=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((function(){i.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=s({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var i=d(e,n);t[0].apply(null,[i])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return d(e,t)}))}));e.RTCPeerConnection.prototype[t]=i[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,n=(t=arguments[0]).sdp,Object.keys(e._reverseStreams||[]).forEach((function(t){var i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})),o.apply(this,arguments)):o.apply(this,arguments);var e,t,n};var c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=c.get.apply(this);return""===e.type?e:d(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var n=void 0;Object.keys(this._streams).forEach((function(i){t._streams[i].getTracks().find((function(t){return e.track===t}))&&(n=t._streams[i])})),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function d(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}},n.shimPeerConnection=function(e){var t=a.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=s({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=i[t]}));var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},n.fixNegotiationNeeded=function(e){a.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){if("stable"===e.target.signalingState)return e}))};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils.js"));function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var i=this.getSenders();n.apply(this,arguments);var r=this.getSenders().filter((function(e){return-1===i.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(r)};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var i=t._shimmedLocalStreams[n].indexOf(e);-1!==i&&t._shimmedLocalStreams[n].splice(i,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),r.apply(this,arguments)}}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&"function"==typeof t&&(e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var i=n.video&&n.video.width,r=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},i&&(n.video.mandatory.maxWidth=i),r&&(n.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(n)}))})}},{}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices){var n=r.detectBrowser(e),a=function(e){if("object"!==(void 0===e?"undefined":i(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===i(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var a={};"number"==typeof r.ideal?(a[o("min",n)]=r.ideal,t.optional.push(a),(a={})[o("max",n)]=r.ideal,t.optional.push(a)):(a[o("",n)]=r.ideal,t.optional.push(a))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,r){if(n.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===i(e.audio)){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=a(e.audio)}if(e&&"object"===i(e.video)){var l=e.video.facingMode;l=l&&("object"===(void 0===l?"undefined":i(l))?l:{ideal:l});var c=n.version<66;if(l&&("user"===l.exact||"environment"===l.exact||"user"===l.ideal||"environment"===l.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||c)){delete e.video.facingMode;var d=void 0;if("environment"===l.exact||"environment"===l.ideal?d=["back","rear"]:"user"!==l.exact&&"user"!==l.ideal||(d=["front"]),d)return t.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return d.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&d.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=l.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=a(e.video),o("chrome: "+JSON.stringify(e)),r(e)}))}e.video=a(e.video)}return o("chrome: "+JSON.stringify(e)),r(e)},l=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,i){s(e,(function(e){t.webkitGetUserMedia(e,n,(function(e){i&&i(l(e))}))}))}.bind(t),t.mediaDevices.getUserMedia){var c=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return s(e,(function(e){return c(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(l(e))}))}))}}}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils.js")),o=r.log},{"../utils.js":15}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimRTCIceCandidate=function(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=o.default.parseCandidate(e.candidate),a=Object.assign(n,r);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,a.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},n.shimMaxMessageSize=function(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,i;if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),function(e){if(!e||!e.sdp)return!1;var t=o.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=o.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){var r,a=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),s=(e=a,i=65536,"firefox"===t.browser&&(i=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),i),l=function(e,n){var i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);var r=o.default.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?i=parseInt(r[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i}(arguments[0],a);r=0===s&&0===l?Number.POSITIVE_INFINITY:0===s||0===l?Math.max(s,l):Math.min(s,l);var c={};Object.defineProperty(c,"maxMessageSize",{get:function(){return r}}),this._sctp=c}return n.apply(this,arguments)}}},n.shimSendThrowTypeError=function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},a.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var i=arguments[0],r=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}},n.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}},n.removeAllowExtmapMixed=function(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),n.apply(this,arguments)}}}};var r,o=(r=e("sdp"))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils"))},{"./utils":15,sdp:17}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var r=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),n.shimPeerConnection=function(e){var t=a.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var i=(0,l.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,s.filterIceServers)(e.iceServers,t.version),a.log("ICE servers after filtering:",e.iceServers)),new i(e)},e.RTCPeerConnection.prototype=i.prototype},n.shimReplaceTrack=function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)};var o,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils")),s=e("./filtericeservers"),l=(o=e("rtcpeerconnection-shim"))&&o.__esModule?o:{default:o}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.filterIceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&i.deprecated("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof t;return r&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"))},{"../utils":15}],9:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}},{}],10:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=function(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},{}],11:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimOnTrack=function(e){"object"===(void 0===e?"undefined":i(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimPeerConnection=function(e){var t=a.detectBrowser(e);if("object"===(void 0===e?"undefined":i(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=i[t]})),t.version<68){var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),n=e[0],i=e[1],a=e[2];return o.apply(this,[n||null]).then((function(e){if(t.version<53&&!i)try{e.forEach((function(e){e.type=r[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,n){e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(i,a)}}},n.shimSenderGetStats=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},n.shimReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},n.shimRemoveStream=function(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;a.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})},n.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},n.shimAddTransceiver=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var i=t.apply(this,arguments);if(n){var r=i.sender,o=r.getParameters();"encodings"in o||(o.encodings=e.sendEncodings,this.setParametersPromises.push(r.setParameters(o).catch((function(){}))))}return i})}},n.shimCreateOffer=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}},n.shimCreateAnswer=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}},{}],13:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimGetUserMedia=function(e){var t=r.detectBrowser(e),n=e&&e.navigator,o=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":i(e))&&"object"===i(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},o&&o.prototype.getSettings){var l=o.prototype.getSettings;o.prototype.getSettings=function(){var e=l.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var c=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":i(e))&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[e])}}}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"))},{"../utils":15}],14:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimLocalStreamsAPI=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(i){return t.call(n,i,e)})),e.getVideoTracks().forEach((function(i){return t.call(n,i,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){var n=arguments[1];return n&&(this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var i=e.getTracks();this.getSenders().forEach((function(e){i.includes(e.track)&&t.removeTrack(e)}))}})}},n.shimRemoteStreamsAPI=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}},n.shimCallbacksAPI=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var l=function(e,t,n){var i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=l,l=function(e,t,n){var i=a.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=l,l=function(e,t,n){var i=s.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=l}},n.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,i=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return i(o(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t))},n.shimConstraints=o,n.shimRTCIceServerUrls=function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var i=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,i.push(a)):i.push(e.iceServers[o])}e.iceServers=i}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},n.shimTrackEventTransceiver=function(e){"object"===(void 0===e?"undefined":i(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var i=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveVideo||i||this.addTransceiver("video")}return t.apply(this,arguments)}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"));function o(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}},{"../utils":15}],15:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.extractVersion=o,n.wrapPeerConnectionEvent=function(e,t,n){if(e.RTCPeerConnection){var i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return r.apply(this,arguments);var o=function(e){var t=n(e);t&&i(t)};return this._eventMap=this._eventMap||{},this._eventMap[i]=o,r.apply(this,[e,o])};var o=i.removeEventListener;i.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var i=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},n.disableLog=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":i(e))+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},n.disableWarnings=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":i(e))+". Please use a boolean."):"adapter.js deprecation warnings "+(e?"disabled":"enabled")},n.log=function(){if("object"===("undefined"==typeof window?"undefined":i(window))){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},n.deprecated=function(e,t){},n.detectBrowser=function(e){var t=e.navigator,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=o(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=o(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=o(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=o(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n},n.compactObject=function e(t){return a(t)?Object.keys(t).reduce((function(n,i){var r=a(t[i]),o=r?e(t[i]):t[i],s=r&&!Object.keys(o).length;return void 0===o||s?n:Object.assign(n,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},i,o))}),{}):t},n.walkStats=s,n.filterStats=function(e,t,n){var i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===i&&n.trackId===t.id&&s(e,n,r)}))})),r};var r=!0;function o(e,t,n){var i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)}function a(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(i){i.endsWith("Id")?s(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach((function(t){s(e,e.get(t),n)}))})))}},{}],16:[function(e,t,n){var i=e("sdp");function r(e,t,n,r,o){var a=i.writeRtpDescription(e.kind,t);if(a+=i.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=i.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var l="msid:"+(r?r.id:"-")+" "+s+"\r\n";a+="a="+l,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+l,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+l,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),a}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},r=function(e,t,n,r){var o=i(e.parameters.apt,n),a=i(t.parameters.apt,r);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(i){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(i.name.toLowerCase()===a.name.toLowerCase()&&i.clockRate===a.clockRate){if("rtx"===i.name.toLowerCase()&&i.parameters&&a.parameters.apt&&!r(i,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(i.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<i.rtcpFeedback.length;t++)if(i.rtcpFeedback[t].type===e.type&&i.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var i=0;i<t.headerExtensions.length;i++){var r=t.headerExtensions[i];if(e.uri===r.uri){n.headerExtensions.push(r);break}}})),n}function a(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function l(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}t.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function c(t,n,i,r){var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=r,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var d=function(n){var r=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){r[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw l("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&e.urls;var r="string"==typeof i;return r&&(i=[i]),i=i.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=r?i[0]:i,!!i.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=i.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(d.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,i={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)i.iceTransport=this.transceivers[0].iceTransport,i.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();i.iceTransport=r.iceTransport,i.dtlsTransport=r.dtlsTransport}return t||this.transceivers.push(i),i},d.prototype.addTrack=function(t,n){if(this._isClosed)throw l("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var i;if(this.transceivers.find((function(e){return e.track===t})))throw l("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(i=this.transceivers[r]);return i||(i=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),i.track=t,i.stream=n,i.rtpSender=new e.RTCRtpSender(t,i.dtlsTransport),i.rtpSender},d.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var i=e.clone();e.getTracks().forEach((function(e,t){var n=i.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),i.getTracks().forEach((function(e){n.addTrack(e,i)}))}},d.prototype.removeTrack=function(t){if(this._isClosed)throw l("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw l("InvalidAccessError","Sender was not created by this connection.");var i=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(i)&&this.localStreams.indexOf(i)>-1&&this.localStreams.splice(this.localStreams.indexOf(i),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},d.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},d.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},d.prototype._createIceGatherer=function(t,n){var i=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;r.state=n?"completed":"gathering",null!==i.transceivers[t].bufferedCandidateEvents&&i.transceivers[t].bufferedCandidateEvents.push(e)},r.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),r},d.prototype._gather=function(t,n){var r=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(r.usingBundle&&n>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,l=!s||0===Object.keys(s).length;if(l)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),s.component=1,s.ufrag=o.getLocalParameters().usernameFragment;var c=i.writeCandidate(s);a.candidate=Object.assign(a.candidate,i.parseCandidate(c)),a.candidate.candidate=c,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var d=i.getMediaSections(r._localDescription.sdp);d[a.candidate.sdpMLineIndex]+=l?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",r._localDescription.sdp=i.getDescription(r._localDescription.sdp)+d.join("");var u=r.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),l||r._dispatchEvent("icecandidate",a),u&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var i=new e.RTCDtlsTransport(n);return i.ondtlsstatechange=function(){t._updateConnectionState()},i.onerror=function(){Object.defineProperty(i,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:i}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var i=this.transceivers[e].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,n,r){var a=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:i.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),r&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},d.prototype.setLocalDescription=function(e){var t,n,r=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(l("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,r.signalingState)||r._isClosed)return Promise.reject(l("InvalidStateError","Can not set local "+e.type+" in state "+r.signalingState));if("offer"===e.type)t=i.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=i.parseRtpParameters(e);r.transceivers[t].localCapabilities=n})),r.transceivers.forEach((function(e,t){r._gather(e.mid,t)}));else if("answer"===e.type){t=i.splitSections(r._remoteDescription.sdp),n=t.shift();var s=i.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var a=r.transceivers[t],l=a.iceGatherer,c=a.iceTransport,d=a.dtlsTransport,u=a.localCapabilities,p=a.remoteCapabilities;if(!(i.isRejected(e)&&0===i.matchPrefix(e,"a=bundle-only").length||a.rejected)){var h=i.getIceParameters(e,n),m=i.getDtlsParameters(e,n);s&&(m.role="server"),r.usingBundle&&0!==t||(r._gather(a.mid,t),"new"===c.state&&c.start(l,h,s?"controlling":"controlled"),"new"===d.state&&d.start(m));var A=o(u,p);r._transceive(a,A.codecs.length>0,!1)}}))}return r._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?r._updateSignalingState("have-local-offer"):r._updateSignalingState("stable"),Promise.resolve()},d.prototype.setRemoteDescription=function(r){var d=this;if(-1===["offer","answer"].indexOf(r.type))return Promise.reject(l("TypeError",'Unsupported type "'+r.type+'"'));if(!a("setRemoteDescription",r.type,d.signalingState)||d._isClosed)return Promise.reject(l("InvalidStateError","Can not set remote "+r.type+" in state "+d.signalingState));var u={};d.remoteStreams.forEach((function(e){u[e.id]=e}));var p=[],h=i.splitSections(r.sdp),m=h.shift(),A=i.matchPrefix(m,"a=ice-lite").length>0,f=i.matchPrefix(m,"a=group:BUNDLE ").length>0;d.usingBundle=f;var v=i.matchPrefix(m,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!v&&v.substr(14).split(" ").indexOf("trickle")>=0,h.forEach((function(a,l){var c=i.splitLines(a),h=i.getKind(a),v=i.isRejected(a)&&0===i.matchPrefix(a,"a=bundle-only").length,g=c[0].substr(2).split(" ")[2],y=i.getDirection(a,m),T=i.parseMsid(a),_=i.getMid(a)||i.generateIdentifier();if(v||"application"===h&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))d.transceivers[l]={mid:_,kind:h,protocol:g,rejected:!0};else{var b,C,S,E,w,k,P,D,L;!v&&d.transceivers[l]&&d.transceivers[l].rejected&&(d.transceivers[l]=d._createTransceiver(h,!0));var z,x,O=i.parseRtpParameters(a);v||(z=i.getIceParameters(a,m),(x=i.getDtlsParameters(a,m)).role="client"),P=i.parseRtpEncodingParameters(a);var I=i.parseRtcpParameters(a),R=i.matchPrefix(a,"a=end-of-candidates",m).length>0,M=i.matchPrefix(a,"a=candidate:").map((function(e){return i.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===r.type||"answer"===r.type)&&!v&&f&&l>0&&d.transceivers[l]&&(d._disposeIceAndDtlsTransports(l),d.transceivers[l].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[l].iceTransport=d.transceivers[0].iceTransport,d.transceivers[l].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[l].rtpSender&&d.transceivers[l].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[l].rtpReceiver&&d.transceivers[l].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==r.type||v)"answer"!==r.type||v||(C=(b=d.transceivers[l]).iceGatherer,S=b.iceTransport,E=b.dtlsTransport,w=b.rtpReceiver,k=b.sendEncodingParameters,D=b.localCapabilities,d.transceivers[l].recvEncodingParameters=P,d.transceivers[l].remoteCapabilities=O,d.transceivers[l].rtcpParameters=I,M.length&&"new"===S.state&&(!A&&!R||f&&0!==l?M.forEach((function(e){s(b.iceTransport,e)})):S.setRemoteCandidates(M)),f&&0!==l||("new"===S.state&&S.start(C,z,"controlling"),"new"===E.state&&E.start(x)),!o(b.localCapabilities,b.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&b.sendEncodingParameters[0].rtx&&delete b.sendEncodingParameters[0].rtx,d._transceive(b,"sendrecv"===y||"recvonly"===y,"sendrecv"===y||"sendonly"===y),!w||"sendrecv"!==y&&"sendonly"!==y?delete b.rtpReceiver:(L=w.track,T?(u[T.stream]||(u[T.stream]=new e.MediaStream),n(L,u[T.stream]),p.push([L,w,u[T.stream]])):(u.default||(u.default=new e.MediaStream),n(L,u.default),p.push([L,w,u.default]))));else{(b=d.transceivers[l]||d._createTransceiver(h)).mid=_,b.iceGatherer||(b.iceGatherer=d._createIceGatherer(l,f)),M.length&&"new"===b.iceTransport.state&&(!R||f&&0!==l?M.forEach((function(e){s(b.iceTransport,e)})):b.iceTransport.setRemoteCandidates(M)),D=e.RTCRtpReceiver.getCapabilities(h),t<15019&&(D.codecs=D.codecs.filter((function(e){return"rtx"!==e.name}))),k=b.sendEncodingParameters||[{ssrc:1001*(2*l+2)}];var N,$=!1;"sendrecv"===y||"sendonly"===y?($=!b.rtpReceiver,w=b.rtpReceiver||new e.RTCRtpReceiver(b.dtlsTransport,h),$&&(L=w.track,T&&"-"===T.stream||(T?(u[T.stream]||(u[T.stream]=new e.MediaStream,Object.defineProperty(u[T.stream],"id",{get:function(){return T.stream}})),Object.defineProperty(L,"id",{get:function(){return T.track}}),N=u[T.stream]):(u.default||(u.default=new e.MediaStream),N=u.default)),N&&(n(L,N),b.associatedRemoteMediaStreams.push(N)),p.push([L,w,N]))):b.rtpReceiver&&b.rtpReceiver.track&&(b.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===b.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),b.associatedRemoteMediaStreams=[]),b.localCapabilities=D,b.remoteCapabilities=O,b.rtpReceiver=w,b.rtcpParameters=I,b.sendEncodingParameters=k,b.recvEncodingParameters=P,d._transceive(d.transceivers[l],!1,$)}}})),void 0===d._dtlsRole&&(d._dtlsRole="offer"===r.type?"active":"passive"),d._remoteDescription={type:r.type,sdp:r.sdp},"offer"===r.type?d._updateSignalingState("have-remote-offer"):d._updateSignalingState("stable"),Object.keys(u).forEach((function(t){var n=u[t];if(n.getTracks().length){if(-1===d.remoteStreams.indexOf(n)){d.remoteStreams.push(n);var i=new Event("addstream");i.stream=n,e.setTimeout((function(){d._dispatchEvent("addstream",i)}))}p.forEach((function(e){var t=e[0],i=e[1];n.id===e[2].id&&c(d,t,i,[n])}))}})),p.forEach((function(e){e[2]||c(d,e[0],e[1],[])})),e.setTimeout((function(){d&&d.transceivers&&d.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&e.iceTransport.addRemoteCandidate({})}))}),4e3),Promise.resolve()},d.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},d.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},d.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},d.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(l("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter((function(e){return"audio"===e.kind})).length,a=n.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(o=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));o>0||a>0;)o>0&&(n._createTransceiver("audio"),o--),a>0&&(n._createTransceiver("video"),a--);var c=i.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(r,o){var a=r.track,s=r.kind,l=r.mid||i.generateIdentifier();r.mid=l,r.iceGatherer||(r.iceGatherer=n._createIceGatherer(o,n.usingBundle));var c=e.RTCRtpSender.getCapabilities(s);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var d=r.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];a&&t>=15019&&"video"===s&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new e.RTCRtpReceiver(r.dtlsTransport,s)),r.localCapabilities=c,r.sendEncodingParameters=d})),"max-compat"!==n._config.bundlePolicy&&(c+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),c+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){c+=r(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),c+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,c+="a="+i.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(c+="a=end-of-candidates\r\n"))}));var d=new e.RTCSessionDescription({type:"offer",sdp:c});return Promise.resolve(d)},d.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(l("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(l("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var a=i.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(a+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=i.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,i){if(!(i+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var l;e.stream&&("audio"===e.kind?l=e.stream.getAudioTracks()[0]:"video"===e.kind&&(l=e.stream.getVideoTracks()[0]),l&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var c=o(e.localCapabilities,e.remoteCapabilities);!c.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=r(e,c,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var c=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(c)},d.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(r,o){if(!n._remoteDescription)return o(l("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var c=0;c<n.transceivers.length;c++)if(n.transceivers[c].mid===e.sdpMid){a=c;break}var d=n.transceivers[a];if(!d)return o(l("OperationError","Can not add ICE candidate"));if(d.rejected)return r();var u=Object.keys(e.candidate).length>0?i.parseCandidate(e.candidate):{};if("tcp"===u.protocol&&(0===u.port||9===u.port))return r();if(u.component&&1!==u.component)return r();if((0===a||a>0&&d.iceTransport!==n.transceivers[0].iceTransport)&&!s(d.iceTransport,u))return o(l("OperationError","Can not add ICE candidate"));var p=e.candidate.trim();0===p.indexOf("a=")&&(p=p.substr(2)),(t=i.getMediaSections(n._remoteDescription.sdp))[a]+="a="+(u.type?p:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=i.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var h=0;h<n.transceivers.length&&(n.transceivers[h].rejected||(n.transceivers[h].iceTransport.addRemoteCandidate({}),(t=i.getMediaSections(n._remoteDescription.sdp))[h]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=i.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));h++);r()}))},d.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw l("InvalidAccessError","Invalid selector.");return n.getStats()}var i=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&i.push(e[t].getStats())}))})),Promise.all(i).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var i=n.prototype.getStats;n.prototype.getStats=function(){return i.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var i;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(i=e[n]).type]||i.type,t.set(n,e[n])})),t}))}}}));var u=["createOffer","createAnswer"];return u.forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(u=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),d}},{sdp:17}],17:[function(e,t,n){var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},i.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},i.getDescription=function(e){var t=i.splitSections(e);return t&&t[0]},i.getMediaSections=function(e){var t=i.splitSections(e);return t.shift(),t},i.matchPrefix=function(e,t){return i.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},i.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:n[t[i]]=t[i+1]}return n},i.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},i.parseIceOptions=function(e){return e.substr(14).split(" ")},i.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},i.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},i.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},i.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},i.parseFmtp=function(e){for(var t,n={},i=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<i.length;r++)n[(t=i[r].trim().split("="))[0].trim()]=t[1];return n},i.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},i.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},i.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},i.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},i.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},i.getMid=function(e){var t=i.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},i.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},i.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:i.matchPrefix(e+t,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},i.getIceParameters=function(e,t){var n=i.splitLines(e);return{usernameFragment:(n=n.concat(i.splitLines(t))).filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:n.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)}},i.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},i.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=i.splitLines(e)[0].split(" "),r=3;r<n.length;r++){var o=n[r],a=i.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=i.parseRtpMap(a),l=i.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=l.length?i.parseFmtp(l[0]):{},s.rtcpFeedback=i.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(i.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return i.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(i.parseExtmap(e))})),t},i.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=i.writeRtpMap(e),n+=i.writeFmtp(e),n+=i.writeRtcpFb(e)}));var r=0;return t.codecs.forEach((function(e){e.maxptime>r&&(r=e.maxptime)})),r>0&&(n+="a=maxptime:"+r+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=i.writeExtmap(e)})),n},i.parseRtpEncodingParameters=function(e){var t,n=[],r=i.parseRtpParameters(e),o=-1!==r.fecMechanisms.indexOf("RED"),a=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),l=s.length>0&&s[0].ssrc,c=i.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));c.length>0&&c[0].length>1&&c[0][0]===l&&(t=c[0][1]),r.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var i={ssrc:l,codecPayloadType:parseInt(e.parameters.apt,10)};l&&t&&(i.rtx={ssrc:t}),n.push(i),o&&((i=JSON.parse(JSON.stringify(i))).fec={ssrc:l,mechanism:a?"red+ulpfec":"red"},n.push(i))}})),0===n.length&&l&&n.push({ssrc:l});var d=i.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=d}))),n},i.parseRtcpParameters=function(e){var t={},n=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var r=i.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=r.length>0,t.compound=0===r.length;var o=i.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},i.parseMsid=function(e){var t,n=i.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var r=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return r.length>0?{stream:(t=r[0].value.split(" "))[0],track:t[1]}:void 0},i.parseSctpDescription=function(e){var t,n=i.parseMLine(e),r=i.matchPrefix(e,"a=max-message-size:");r.length>0&&(t=parseInt(r[0].substr(19),10)),isNaN(t)&&(t=65536);var o=i.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(i.matchPrefix(e,"a=sctpmap:").length>0){var a=i.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:t}}},i.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(e,t,n){var r=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||i.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(e,t,n,r){var o=i.writeRtpDescription(e.kind,t);if(o+=i.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=i.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),o},i.getDirection=function(e,t){for(var n=i.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return t?i.getDirection(t):"sendrecv"},i.getKind=function(e){return i.splitLines(e)[0].split(" ")[0].substr(2)},i.isRejected=function(e){return"0"===e.split(" ",2)[1]},i.parseMLine=function(e){var t=i.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},i.parseOLine=function(e){var t=i.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},i.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=i.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"==typeof t&&(t.exports=i)},{}]},{},[1])(1)}));var pr={1:"",2:"",3:"TTS",4:"TTS",5:"TTS",6:"",7:"URL",8:"TTStoken",9:"",10:"",11:"",12:"",13:"",14:"token",15:"session",16:"token",17:"",18:"",19:"",20:"",21:"token",22:"ticket",23:"ticket bizcode",24:"RPC Auth http",25:"RPC Case",26:"RPC /cas",27:"RPC",1003:""},hr={};function mr(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}fr.sessions={},fr.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||fr.extension.isInstalled()}return!0};var Ar={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout((function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var n=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var i=new Error("NavigatorUserMediaError");i.name="You cancelled the request for permission, giving up...",n(i)}else n(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&window.clearTimeout(t.data.id)}))}};function fr(e,t){if(void 0===fr.initDone)return e.error("Library not initialized"),{};if(!fr.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(fr.log("Library initialized: "+fr.initDone),(e=e||{}).success="function"==typeof e.success?e.success:fr.noop,e.error="function"==typeof e.error?e.error:fr.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:fr.noop,null===e.server||void 0===e.server)return e.error("Invalid server url"),{};var n=!1,i=null,r={},o=null,a=null,s=0,l=e.server;fr.isArray(l)?(fr.log("Multiple servers provided ("+l.length+"), will use the first that works"),l=null,a=e.server,fr.debug(a)):0===l.indexOf("ws")?(n=!0,fr.log("Using WebSockets to contact Janus: "+l)):(n=!1,fr.log("Using REST API to contact Janus: "+l));var c=e.iceServers;null==c&&(c=[{urls:"stun:stun.l.google.com:19302"}]);var d=e.iceTransportPolicy,u=e.bundlePolicy,p=e.ipv6;null==p&&(p=!1);var h=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(h=!0===e.withCredentials);var m=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(m=e.max_poll_events),m<1&&(m=1);var A=null;void 0!==e.token&&null!==e.token&&(A=e.token);var f=null;void 0!==e.apisecret&&null!==e.apisecret&&(f=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var v=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(v=e.keepAlivePeriod),isNaN(v)&&(v=25e3);var g=6e4;function y(e){var t={high:9e5,medium:3e5,low:1e5};return null!=e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(g=e.longPollTimeout),isNaN(g)&&(g=6e4);var T=!1,_=null,b={},C=this,S=0,E={};function w(){if(null!=_)if(fr.debug("Long poll..."),T){var t=l+"/"+_+"?rid="+(new Date).getTime();null!=m&&(t=t+"&maxev="+m),null!=A&&(t=t+"&token="+encodeURIComponent(A)),null!=f&&(t=t+"&apisecret="+encodeURIComponent(f)),fr.httpAPICall(t,{verb:"GET",withCredentials:h,success:k,timeout:g,error:function(t,n){if(fr.error(t+":",n),++S>3)return T=!1,void e.error("Lost connection to the server (is it down?)");w()}})}else fr.warn("Is the server down? (connected=false)")}function k(e,t){if(S=0,n||null==_||!0===t||w(),n||!fr.isArray(e))if("keepalive"!==e.rtcgw)if("ack"!==e.rtcgw)if("success"!==e.rtcgw)if("trickle"===e.rtcgw){if(null==(l=e.sender))return void fr.warn("Missing sender...");if(null==(d=b[l]))return void fr.debug("This handle is not attached to this session");var r=e.candidate;fr.debug("Got a trickled candidate on session "+_),fr.debug(r);var o=d.webrtcStuff;o.pc&&o.remoteSdp?(fr.debug("Adding remote candidate:",r),r&&!0!==r.completed?o.pc.addIceCandidate(r):o.pc.addIceCandidate(fr.endOfCandidates)):(fr.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),o.candidates||(o.candidates=[]),o.candidates.push(r),fr.debug(o.candidates))}else{if("webrtcup"===e.rtcgw)return fr.debug("Got a webrtcup event on session "+_),fr.debug(e),null==(l=e.sender)?void fr.warn("Missing sender..."):null==(d=b[l])?void fr.debug("This handle is not attached to this session"):void d.webrtcState(!0);if("hangup"===e.rtcgw){if(fr.debug("Got a hangup event on session "+_),fr.debug(e),null==(l=e.sender))return void fr.warn("Missing sender...");if(null==(d=b[l]))return void fr.debug("This handle is not attached to this session");d.webrtcState(!1,e.reason),d.hangup()}else if("detached"===e.rtcgw){if(fr.debug("Got a detached event on session "+_),fr.debug(e),null==(l=e.sender))return void fr.warn("Missing sender...");if(null==(d=b[l]))return;d.detached=!0,d.ondetached(),d.detach()}else if("media"===e.rtcgw){if(fr.debug("Got a media event on session "+_),fr.debug(e),null==(l=e.sender))return void fr.warn("Missing sender...");if(null==(d=b[l]))return void fr.debug("This handle is not attached to this session");d.mediaState(e.type,e.receiving)}else if("slowlink"===e.rtcgw){if(fr.debug("Got a slowlink event on session "+_),fr.debug(e),null==(l=e.sender))return void fr.warn("Missing sender...");if(null==(d=b[l]))return void fr.debug("This handle is not attached to this session");d.slowLink(e.uplink,e.lost)}else{var a,s;if("error"===e.rtcgw)return fr.error("Ooops: "+e.error.code+" "+e.error.reason),fr.debug(e),void(null!=(a=e.transaction)&&(null!=(s=E[a])&&s(e),delete E[a]));if("event"===e.rtcgw){var l;if(fr.debug("Got a plugin event on session "+_),fr.debug(e),null==(l=e.sender))return void fr.warn("Missing sender...");var c=e.plugindata;if(null==c)return void fr.warn("Missing plugindata...");fr.debug("  -- Event is coming from "+l+" ("+c.plugin+")");var d,u=c.data;if(fr.debug(u),null==(d=b[l]))return void fr.warn("This handle is not attached to this session");var p=e.jsep;null!=p&&(fr.debug("Handling SDP as well..."),fr.debug(p));var h=d.onmessage;null!=h?(fr.debug("Notifying application..."),h(u,p)):fr.debug("No provided notification callback")}else{if("timeout"===e.rtcgw)return fr.error("Timeout on session "+_),fr.debug(e),void(n&&i.close(3504,"Gateway timeout"));fr.warn("Unknown message/event  '"+e.rtcgw+"' on session "+_),fr.debug(e)}}}else fr.debug("Got a success on session "+_),null!=(a=e.transaction)&&(null!=(s=E[a])&&s(e),delete E[a]);else null!=(a=e.transaction)&&(null!=(s=E[a])&&s(e),delete E[a]);else fr.vdebug("Got a keepalive on session "+_);else for(var m=0;m<e.length;m++)k(e[m],!0)}function P(){if(null!==l&&n&&T){o=setTimeout(P,v);var e={rtcgw:"keepalive",session_id:_,transaction:fr.randomString(12)};null!=A&&(e.token=A),null!=f&&(e.apisecret=f),i.send(JSON.stringify(e))}}function D(c){var d=fr.randomString(12),u={rtcgw:"create",transaction:d,token:t.stream,device:t.deviceSerial,channel:t.channel,authBizType:"TALK"};if(c.reconnect&&(T=!1,u.rtcgw="claim",u.session_id=_,i&&(i.onopen=null,i.onerror=null,i.onclose=null,o&&(clearTimeout(o),o=null))),null!=A&&(u.token=A),null!=f&&(u.apisecret=f),null===l&&fr.isArray(a)&&(0===(l=a[s]).indexOf("ws")?(n=!0,fr.log("Server #"+(s+1)+": trying WebSockets to contact Janus ("+l+")")):(n=!1,fr.log("Server #"+(s+1)+": trying REST API to contact Janus ("+l+")"))),n)for(var p in i=fr.newWebSocket(l,"rtcgw-protocol"),r={error:function(){if(fr.error("Error connecting to the Janus WebSockets server... "+l),fr.isArray(a)&&!c.reconnect)return++s==a.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(l=null,void setTimeout((function(){D(c)}),200));c.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){E[d]=function(e){if(fr.debug(e),"success"!==e.rtcgw)return fr.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);o=setTimeout(P,v),T=!0,_=e.session_id?e.session_id:e.data.id,c.reconnect?fr.log("Claimed session: "+_):fr.log("Created session: "+_),fr.sessions[_]=C,c.success()},i.send(JSON.stringify(u))},message:function(e){k(JSON.parse(e.data))},close:function(){null!==l&&T&&(T=!1,e.error("Lost connection to the server (is it down?)"))}})i.addEventListener(p,r[p]);else fr.httpAPICall(l,{verb:"POST",withCredentials:h,body:u,success:function(e){if(fr.debug(e),"success"!==e.rtcgw)return fr.error("Ooops: "+e.error.code+" "+e.error.reason),void c.error(e.error.reason);T=!0,_=e.session_id?e.session_id:e.data.id,c.reconnect?fr.log("Claimed session: "+_):fr.log("Created session: "+_),fr.sessions[_]=C,w(),c.success()},error:function(e,t){if(fr.error(e+":",t),fr.isArray(a)&&!c.reconnect)return++s==a.length?void c.error("Error connecting to any of the provided Janus servers: Is the server down?"):(l=null,void setTimeout((function(){D(c)}),200));""===t?c.error(e+": Is the server down?"):c.error(e+": "+t)}})}function L(e,t){if((t=t||{}).success="function"==typeof t.success?t.success:fr.noop,t.error="function"==typeof t.error?t.error:fr.noop,!T)return fr.warn("Is the server down? (connected=false)"),void t.error("Is the server down? (connected=false)");var r=b[e];if(null==r||null===r.webrtcStuff||void 0===r.webrtcStuff)return fr.warn("Invalid handle"),void t.error("Invalid handle");var o=t.message,a=t.jsep,s=fr.randomString(12),c={rtcgw:"message",body:o,transaction:s};if(null!==r.token&&void 0!==r.token&&(c.token=r.token),null!=f&&(c.apisecret=f),null!=a&&(c.jsep=a),fr.debug("Sending message to plugin (handle="+e+"):"),fr.debug(c),n)return c.session_id=_,c.handle_id=e,E[s]=function(e){if(fr.debug("Message sent!"),fr.debug(e),"success"===e.rtcgw){var n=e.plugindata;if(null==n)return fr.warn("Request succeeded, but missing plugindata..."),void t.success();fr.log("Synchronous transaction successful ("+n.plugin+")");var i=n.data;return fr.debug(i),void t.success(i)}"ack"===e.rtcgw?t.success():void 0!==e.error&&null!==e.error?(fr.error("Ooops: "+e.error.code+" "+e.error.reason),t.error(e.error.code+" "+e.error.reason)):(fr.error("Unknown error"),t.error("Unknown error"))},void i.send(JSON.stringify(c));fr.httpAPICall(l+"/"+_+"/"+e,{verb:"POST",withCredentials:h,body:c,success:function(e){if(fr.debug("Message sent!"),fr.debug(e),"success"===e.rtcgw){var n=e.plugindata;if(null==n)return fr.warn("Request succeeded, but missing plugindata..."),void t.success();fr.log("Synchronous transaction successful ("+n.plugin+")");var i=n.data;return fr.debug(i),void t.success(i)}"ack"===e.rtcgw?t.success():void 0!==e.error&&null!==e.error?(fr.error("Ooops: "+e.error.code+" "+e.error.reason),t.error(e.error.code+" "+e.error.reason)):(fr.error("Unknown error"),t.error("Unknown error"))},error:function(e,n){fr.error(e+":",n),t.error(e+": "+n)}})}function z(e,t){if(T){var r=b[e];if(null!=r&&null!==r.webrtcStuff&&void 0!==r.webrtcStuff){var o={rtcgw:"trickle",candidate:t,transaction:fr.randomString(12)};if(null!==r.token&&void 0!==r.token&&(o.token=r.token),null!=f&&(o.apisecret=f),fr.vdebug("Sending trickle candidate (handle="+e+"):"),fr.vdebug(o),n)return o.session_id=_,o.handle_id=e,void i.send(JSON.stringify(o));fr.httpAPICall(l+"/"+_+"/"+e,{verb:"POST",withCredentials:h,body:o,success:function(e){fr.vdebug("Candidate sent!"),fr.vdebug(e),"ack"===e.rtcgw||fr.error("Ooops: "+e.error.code+" "+e.error.reason)},error:function(e,t){fr.error(e+":",t)}})}else fr.warn("Invalid handle")}else fr.warn("Is the server down? (connected=false)")}function x(e,t,n,i){var r=b[e];if(null!=r&&null!==r.webrtcStuff&&void 0!==r.webrtcStuff){var o=r.webrtcStuff,a=function(e){fr.log("Received state change on data channel:",e);var t=e.target.label,n=o.dataChannel[t]?o.dataChannel[t].readyState:"null";if(fr.log("State change on <"+t+"> data channel: "+n),"open"===n){if(o.dataChannel[t].pending&&o.dataChannel[t].pending.length>0){for(var i in fr.log("Sending pending messages on <"+t+">:",o.dataChannel[t].pending.length),o.dataChannel[t].pending){var a=o.dataChannel[t].pending[i];fr.log("Sending string on data channel <"+t+">: "+a),o.dataChannel[t].send(a)}o.dataChannel[t].pending=[]}r.ondataopen(t)}};o.dataChannel[t]=n||o.pc.createDataChannel(t,{ordered:!1}),o.dataChannel[t].onmessage=function(e){fr.log("Received message on data channel:",e);var t=e.target.label;r.ondata(e.data,t)},o.dataChannel[t].onopen=a,o.dataChannel[t].onclose=a,o.dataChannel[t].onerror=function(e){fr.error("Got error on data channel:",e)},o.dataChannel[t].pending=[],i&&o.dataChannel[t].pending.push(i)}else fr.warn("Invalid handle")}function O(e,t){(t=t||{}).success="function"==typeof t.success?t.success:fr.noop,t.error="function"==typeof t.error?t.error:fr.noop;var n=b[e];if(null==n||null===n.webrtcStuff||void 0===n.webrtcStuff)return fr.warn("Invalid handle"),void t.error("Invalid handle");var i=n.webrtcStuff,r=t.text;if(null==r)return fr.warn("Invalid text"),void t.error("Invalid text");var o=t.label?t.label:fr.dataChanDefaultLabel;return i.dataChannel[o]?"open"!==i.dataChannel[o].readyState?(i.dataChannel[o].pending.push(r),void t.success()):(fr.log("Sending string on data channel <"+o+">: "+r),i.dataChannel[o].send(r),void t.success()):(x(e,o,!1,r),void t.success())}function I(e,t){(t=t||{}).success="function"==typeof t.success?t.success:fr.noop,t.error="function"==typeof t.error?t.error:fr.noop;var n=b[e];if(null==n||null===n.webrtcStuff||void 0===n.webrtcStuff)return fr.warn("Invalid handle"),void t.error("Invalid handle");var i=n.webrtcStuff;if(null===i.dtmfSender||void 0===i.dtmfSender){if(void 0!==i.pc&&null!==i.pc){var r=i.pc.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));if(!r)return fr.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");i.dtmfSender=r.dtmf,i.dtmfSender&&(fr.log("Created DTMF Sender"),i.dtmfSender.ontonechange=function(e){fr.debug("Sent DTMF tone: "+e.tone)})}if(null===i.dtmfSender||void 0===i.dtmfSender)return fr.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}var o=t.dtmf;if(null==o)return fr.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");var a=o.tones;if(null==a)return fr.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");var s=o.duration;null==s&&(s=500);var l=o.gap;null==l&&(l=50),fr.debug("Sending DTMF string "+a+" (duration "+s+"ms, gap "+l+"ms)"),i.dtmfSender.insertDTMF(a,s,l),t.success()}function R(e,t){(t=t||{}).success="function"==typeof t.success?t.success:fr.noop,t.error="function"==typeof t.error?t.error:fr.noop;var r=!0;void 0!==t.asyncRequest&&null!==t.asyncRequest&&(r=!0===t.asyncRequest);var o=!0;void 0!==t.noRequest&&null!==t.noRequest&&(o=!0===t.noRequest),fr.log("Destroying handle "+e+" (async="+r+")"),Z(e);var a=b[e];if(null==a||a.detached)return delete b[e],void t.success();if(o)return delete b[e],void t.success();if(!T)return fr.warn("Is the server down? (connected=false)"),void t.error("Is the server down? (connected=false)");var s={rtcgw:"detach",transaction:fr.randomString(12)};if(null!==a.token&&void 0!==a.token&&(s.token=a.token),null!=f&&(s.apisecret=f),n)return s.session_id=_,s.handle_id=e,i.send(JSON.stringify(s)),delete b[e],void t.success();fr.httpAPICall(l+"/"+_+"/"+e,{verb:"POST",async:r,withCredentials:h,body:s,success:function(n){fr.log("Destroyed handle:"),fr.debug(n),"success"!==n.rtcgw&&fr.error("Ooops: "+n.error.code+" "+n.error.reason),delete b[e],t.success()},error:function(n,i){fr.error(n+":",i),delete b[e],t.success()}})}function M(e,t,n,i,r){return N.apply(this,arguments)}function N(){var e;return e=function*(e,t,n,i,r){var o=b[e];if(null==o||null===o.webrtcStuff||void 0===o.webrtcStuff)return fr.warn("Invalid handle"),void i.error("Invalid handle");var a=o.webrtcStuff;fr.debug("streamsDone:",r),r&&(fr.debug("  -- Audio tracks:",r.getAudioTracks()),fr.debug("  -- Video tracks:",r.getVideoTracks()));var s=!1;if(a.myStream&&n.update&&!a.streamExternal){if((!n.update&&H(n)||n.update&&(n.addAudio||n.replaceAudio))&&r.getAudioTracks()&&r.getAudioTracks().length)if(a.myStream.addTrack(r.getAudioTracks()[0]),fr.unifiedPlan){fr.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",r.getAudioTracks()[0]);var l=null;if((g=a.pc.getTransceivers())&&g.length>0)for(var h in g)if((_=g[h]).sender&&_.sender.track&&"audio"===_.sender.track.kind||_.receiver&&_.receiver.track&&"audio"===_.receiver.track.kind){l=_;break}let t=null;try{t=yield i.customizeStream(r)}catch(e){i.error(e)}var m,A,f,v;l&&l.sender?l.sender.replaceTrack((null==t||null==(A=t.getAudioTracks)||null==(m=A.call(t))?void 0:m[0])||r.getAudioTracks()[0]):a.pc.addTrack((null==t||null==(v=t.getAudioTracks)||null==(f=v.call(t))?void 0:f[0])||r.getAudioTracks()[0],t||r)}else fr.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",r.getAudioTracks()[0]),a.pc.addTrack(r.getAudioTracks()[0],r);if((!n.update&&Q(n)||n.update&&(n.addVideo||n.replaceVideo))&&r.getVideoTracks()&&r.getVideoTracks().length)if(a.myStream.addTrack(r.getVideoTracks()[0]),fr.unifiedPlan){fr.log((n.replaceVideo?"Replacing":"Adding")+" video track:",r.getVideoTracks()[0]);var g,T=null;if((g=a.pc.getTransceivers())&&g.length>0)for(var h in g){var _;if((_=g[h]).sender&&_.sender.track&&"video"===_.sender.track.kind||_.receiver&&_.receiver.track&&"video"===_.receiver.track.kind){T=_;break}}T&&T.sender?T.sender.replaceTrack(r.getVideoTracks()[0]):a.pc.addTrack(r.getVideoTracks()[0],r)}else fr.log((n.replaceVideo?"Replacing":"Adding")+" video track:",r.getVideoTracks()[0]),a.pc.addTrack(r.getVideoTracks()[0],r)}else a.myStream=r,s=!0;if(!a.pc){var C={iceServers:c,iceTransportPolicy:d,bundlePolicy:u};"chrome"===fr.webRTCAdapter.browserDetails.browser&&(C.sdpSemantics=fr.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var S={optional:[{DtlsSrtpKeyAgreement:!0}]};if(!0===p&&S.optional.push({googIPv6:!0}),i.rtcConstraints&&"object"==typeof i.rtcConstraints)for(var h in fr.debug("Adding custom PeerConnection constraints:",i.rtcConstraints),i.rtcConstraints)S.optional.push(i.rtcConstraints[h]);"edge"===fr.webRTCAdapter.browserDetails.browser&&(C.bundlePolicy="max-bundle"),fr.log("Creating PeerConnection"),fr.debug(S),a.pc=new RTCPeerConnection(C,S),a.pc.getStats&&(a.volume={},a.bitrate.value="0 kbits/sec"),fr.log("Preparing local SDP and gathering candidates (trickle="+a.trickle+")"),a.pc.oniceconnectionstatechange=function(e){a.pc&&o.iceState(a.pc.iceConnectionState)},a.pc.onicecandidate=function(t){if(null==t.candidate||"edge"===fr.webRTCAdapter.browserDetails.browser&&t.candidate.candidate.indexOf("endOfCandidates")>0)fr.log("End of candidates."),a.iceDone=!0,!0===a.trickle?z(e,{completed:!0}):function(e,t){(t=t||{}).success="function"==typeof t.success?t.success:fr.noop,t.error="function"==typeof t.error?t.error:fr.noop;var n=b[e];if(null!=n&&null!==n.webrtcStuff&&void 0!==n.webrtcStuff){var i=n.webrtcStuff;fr.log("Sending offer/answer SDP..."),null!==i.mySdp&&void 0!==i.mySdp?(i.mySdp={type:i.pc.localDescription.type,sdp:i.pc.localDescription.sdp},!1===i.trickle&&(i.mySdp.trickle=!1),fr.debug(t),i.sdpSent=!0,t.success(i.mySdp)):fr.warn("Local SDP instance is invalid, not sending anything...")}else fr.warn("Invalid handle, not sending anything")}(e,i);else{var n={candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex};!0===a.trickle&&z(e,n)}},a.pc.ontrack=function(e){fr.log("Handling Remote Track"),fr.debug(e),e.streams&&(a.remoteStream=e.streams[0],o.onremotestream(a.remoteStream),e.track.onended||(fr.log("Adding onended callback to track:",e.track),e.track.onended=function(e){fr.log("Remote track muted/removed:",e),a.remoteStream&&(a.remoteStream.removeTrack(e.target),o.onremotestream(a.remoteStream))},e.track.onmute=e.track.onended,e.track.onunmute=function(e){try{a.remoteStream.addTrack(e.target),o.onremotestream(a.remoteStream)}catch(e){fr.error(e)}}))}}if(s&&null!=r){fr.log("Adding local stream");var E=!0===i.simulcast2,w=r.getTracks();for(let t=0;t<w.length;t++){let n=w[t];if(E)if("audio"===n.kind)a.pc.addTrack(n,r);else{fr.log("Enabling rid-based simulcasting:",n);const e=y(i.simulcastMaxBitrates);a.pc.addTransceiver(n,{direction:"sendrecv",streams:[r],sendEncodings:[{rid:"h",active:!0,maxBitrate:e.high},{rid:"m",active:!0,maxBitrate:e.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:e.low,scaleResolutionDownBy:4}]})}else if("audio"===n.kind){var k,P;let t=null;try{t=yield i.customizeStream(r)}catch(e){i.error(e)}a.pc.addTrack((null==t||null==(P=t.getAudioTracks)||null==(k=P.call(t))?void 0:k[0])||n,t||r)}else a.pc.addTrack(n,r)}}(function(e){return"edge"==fr.webRTCAdapter.browserDetails.browser?(fr.warn("Edge doesn't support data channels yet"),!1):null!=e&&!0===e.data})(n)&&!a.dataChannel[fr.dataChanDefaultLabel]&&(fr.log("Creating data channel"),x(e,fr.dataChanDefaultLabel,!1),a.pc.ondatachannel=function(t){fr.log("Data channel created by Janus:",t),x(e,t.channel.label,t.channel)}),a.myStream&&o.onlocalstream(a.myStream),null==t?function(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:fr.noop,n.error="function"==typeof n.error?n.error:fr.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:fr.noop;var i=b[e];if(null==i||null===i.webrtcStuff||void 0===i.webrtcStuff)return fr.warn("Invalid handle"),void n.error("Invalid handle");var r=i.webrtcStuff,o=!0===n.simulcast;o?fr.log("Creating offer (iceDone="+r.iceDone+", simulcast="+o+")"):fr.log("Creating offer (iceDone="+r.iceDone+")");var a={};if(fr.unifiedPlan){var s=null,l=null,c=r.pc.getTransceivers();if(c&&c.length>0)for(var d in c){var u=c[d];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(l||(l=u))}var p=H(t),h=G(t);p||h?p&&h?s&&(s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",fr.log("Setting audio transceiver to sendrecv:",s)):p&&!h?s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",fr.log("Setting audio transceiver to sendonly:",s)):!p&&h&&(s?(s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",fr.log("Setting audio transceiver to recvonly:",s)):(s=r.pc.addTransceiver("audio",{direction:"recvonly"}),fr.log("Adding recvonly audio transceiver:",s))):t.removeAudio&&s&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive",fr.log("Setting audio transceiver to inactive:",s));var m=Q(t),A=K(t);m||A?m&&A?l&&(l.setDirection?l.setDirection("sendrecv"):l.direction="sendrecv",fr.log("Setting video transceiver to sendrecv:",l)):m&&!A?l&&(l.setDirection?l.setDirection("sendonly"):l.direction="sendonly",fr.log("Setting video transceiver to sendonly:",l)):!m&&A&&(l?(l.setDirection?l.setDirection("recvonly"):l.direction="recvonly",fr.log("Setting video transceiver to recvonly:",l)):(l=r.pc.addTransceiver("video",{direction:"recvonly"}),fr.log("Adding recvonly video transceiver:",l))):t.removeVideo&&l&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive",fr.log("Setting video transceiver to inactive:",l))}else a.offerToReceiveAudio=G(t),a.offerToReceiveVideo=K(t);!0===n.iceRestart&&(a.iceRestart=!0),fr.debug(a);var f=Q(t);if(f&&o&&"firefox"===fr.webRTCAdapter.browserDetails.browser){var v=r.pc.getSenders().find((function(e){return"video"==e.track.kind}));if(v){var g=v.getParameters();g||(g={});const e=y(n.simulcastMaxBitrates);g.encodings=[{rid:"h",active:!0,maxBitrate:e.high},{rid:"m",active:!0,maxBitrate:e.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:e.low,scaleResolutionDownBy:4}],v.setParameters(g)}}r.pc.createOffer(a).then((function(e){var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,fr.log("Setting local description"),f&&o&&("chrome"===fr.webRTCAdapter.browserDetails.browser||"safari"===fr.webRTCAdapter.browserDetails.browser?(fr.log("Enabling Simulcasting for Chrome (SDP munging)"),e.sdp=function(e){for(var t=e.split("\r\n"),n=!1,i=[-1],r=[-1],o=null,a=null,s=null,l=null,c=-1,d=0;d<t.length;d++)if(p=t[d].match(/m=(\w+) */)){if("video"===p[1]){if(!(i[0]<0)){c=d;break}n=!0}else if(i[0]>-1){c=d;break}}else if(n){var u=t[d].match(/a=ssrc-group:FID (\d+) (\d+)/);if(u)i[0]=u[1],r[0]=u[2],t.splice(d,1),d--;else{if(i[0]){if((m=t[d].match("a=ssrc:"+i[0]+" cname:(.+)"))&&(o=m[1]),(m=t[d].match("a=ssrc:"+i[0]+" msid:(.+)"))&&(a=m[1]),(m=t[d].match("a=ssrc:"+i[0]+" mslabel:(.+)"))&&(s=m[1]),(m=t[d].match("a=ssrc:"+i[0]+" label:(.+)"))&&(l=m[1]),0===t[d].indexOf("a=ssrc:"+r[0])){t.splice(d,1),d--;continue}if(0===t[d].indexOf("a=ssrc:"+i[0])){t.splice(d,1),d--;continue}}0!=t[d].length||(t.splice(d,1),d--)}}if(i[0]<0)for(c=-1,n=!1,d=0;d<t.length;d++){var p;if(p=t[d].match(/m=(\w+) */)){if("video"===p[1]){if(!(i[0]<0)){c=d;break}n=!0}else if(i[0]>-1){c=d;break}}else if(n){if(i[0]<0){var h=t[d].match(/a=ssrc:(\d+)/);if(h){i[0]=h[1],t.splice(d,1),d--;continue}}else{var m;if((m=t[d].match("a=ssrc:"+i[0]+" cname:(.+)"))&&(o=m[1]),(m=t[d].match("a=ssrc:"+i[0]+" msid:(.+)"))&&(a=m[1]),(m=t[d].match("a=ssrc:"+i[0]+" mslabel:(.+)"))&&(s=m[1]),(m=t[d].match("a=ssrc:"+i[0]+" label:(.+)"))&&(l=m[1]),0===t[d].indexOf("a=ssrc:"+r[0])){t.splice(d,1),d--;continue}if(0===t[d].indexOf("a=ssrc:"+i[0])){t.splice(d,1),d--;continue}}0!=t[d].length||(t.splice(d,1),d--)}}if(i[0]<0)return fr.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),e;for(c<0&&(c=t.length),i[1]=Math.floor(4294967295*Math.random()),i[2]=Math.floor(4294967295*Math.random()),r[1]=Math.floor(4294967295*Math.random()),r[2]=Math.floor(4294967295*Math.random()),d=0;d<i.length;d++)o&&(t.splice(c,0,"a=ssrc:"+i[d]+" cname:"+o),c++),a&&(t.splice(c,0,"a=ssrc:"+i[d]+" msid:"+a),c++),s&&(t.splice(c,0,"a=ssrc:"+i[d]+" mslabel:"+s),c++),l&&(t.splice(c,0,"a=ssrc:"+i[d]+" label:"+l),c++),o&&(t.splice(c,0,"a=ssrc:"+r[d]+" cname:"+o),c++),a&&(t.splice(c,0,"a=ssrc:"+r[d]+" msid:"+a),c++),s&&(t.splice(c,0,"a=ssrc:"+r[d]+" mslabel:"+s),c++),l&&(t.splice(c,0,"a=ssrc:"+r[d]+" label:"+l),c++);return t.splice(c,0,"a=ssrc-group:FID "+i[2]+" "+r[2]),t.splice(c,0,"a=ssrc-group:FID "+i[1]+" "+r[1]),t.splice(c,0,"a=ssrc-group:FID "+i[0]+" "+r[0]),t.splice(c,0,"a=ssrc-group:SIM "+i[0]+" "+i[1]+" "+i[2]),(e=t.join("\r\n")).endsWith("\r\n")||(e+="\r\n"),e}(e.sdp)):"firefox"!==fr.webRTCAdapter.browserDetails.browser&&fr.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),r.mySdp=e.sdp,r.pc.setLocalDescription(e).catch(n.error),r.mediaConstraints=a,r.iceDone||r.trickle?(fr.log("Offer ready"),fr.debug(n),n.success(e)):fr.log("Waiting for all candidates...")}),n.error)}(e,n,i):a.pc.setRemoteDescription(t).then((function(){if(fr.log("Remote description accepted!"),a.remoteSdp=t.sdp,a.candidates&&a.candidates.length>0){for(var r=0;r<a.candidates.length;r++){var o=a.candidates[r];fr.debug("Adding remote candidate:",o),o&&!0!==o.completed?a.pc.addIceCandidate(o):a.pc.addIceCandidate(fr.endOfCandidates)}a.candidates=[]}!function(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:fr.noop,n.error="function"==typeof n.error?n.error:fr.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:fr.noop;var i=b[e];if(null==i||null===i.webrtcStuff||void 0===i.webrtcStuff)return fr.warn("Invalid handle"),void n.error("Invalid handle");var r=i.webrtcStuff,o=!0===n.simulcast;o?fr.log("Creating answer (iceDone="+r.iceDone+", simulcast="+o+")"):fr.log("Creating answer (iceDone="+r.iceDone+")");var a=null;if(fr.unifiedPlan){a={};var s=null,l=null,c=r.pc.getTransceivers();if(c&&c.length>0)for(var d in c){var u=c[d];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(l||(l=u))}var p=H(t),h=G(t);if(p||h){if(p&&h){if(s)try{s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",fr.log("Setting audio transceiver to sendrecv:",s)}catch(e){fr.error(e)}}else if(p&&!h)try{s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",fr.log("Setting audio transceiver to sendonly:",s))}catch(e){fr.error(e)}else if(!p&&h)if(s)try{s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",fr.log("Setting audio transceiver to recvonly:",s)}catch(e){fr.error(e)}else s=r.pc.addTransceiver("audio",{direction:"recvonly"}),fr.log("Adding recvonly audio transceiver:",s)}else if(t.removeAudio&&s)try{s.setDirection?s.setDirection("inactive"):s.direction="inactive",fr.log("Setting audio transceiver to inactive:",s)}catch(e){fr.error(e)}var m=Q(t),A=K(t);if(m||A){if(m&&A){if(l)try{l.setDirection?l.setDirection("sendrecv"):l.direction="sendrecv",fr.log("Setting video transceiver to sendrecv:",l)}catch(e){fr.error(e)}}else if(m&&!A){if(l)try{l.setDirection?l.setDirection("sendonly"):l.direction="sendonly",fr.log("Setting video transceiver to sendonly:",l)}catch(e){fr.error(e)}}else if(!m&&A)if(l)try{l.setDirection?l.setDirection("recvonly"):l.direction="recvonly",fr.log("Setting video transceiver to recvonly:",l)}catch(e){fr.error(e)}else l=r.pc.addTransceiver("video",{direction:"recvonly"}),fr.log("Adding recvonly video transceiver:",l)}else if(t.removeVideo&&l)try{l.setDirection?l.setDirection("inactive"):l.direction="inactive",fr.log("Setting video transceiver to inactive:",l)}catch(e){fr.error(e)}}else a="firefox"==fr.webRTCAdapter.browserDetails.browser||"edge"==fr.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:G(t),offerToReceiveVideo:K(t)}:{mandatory:{OfferToReceiveAudio:G(t),OfferToReceiveVideo:K(t)}};fr.debug(a);var f=Q(t);if(f&&o&&"firefox"===fr.webRTCAdapter.browserDetails.browser){fr.log("Enabling Simulcasting for Firefox (RID)");var v=r.pc.getSenders()[1];fr.log(v);var g=v.getParameters();fr.log(g);const e=y(n.simulcastMaxBitrates);v.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:e.high},{rid:"medium",active:!0,priority:"medium",maxBitrate:e.medium},{rid:"low",active:!0,priority:"low",maxBitrate:e.low}]})}r.pc.createAnswer(a).then((function(e){fr.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,fr.log("Setting local description"),f&&o&&("chrome"===fr.webRTCAdapter.browserDetails.browser?fr.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):"firefox"!==fr.webRTCAdapter.browserDetails.browser&&fr.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),r.mySdp=e.sdp,r.pc.setLocalDescription(e).catch(n.error),r.mediaConstraints=a,r.iceDone||r.trickle?n.success(e):fr.log("Waiting for all candidates...")}),n.error)}(e,n,i)}),i.error)},N=function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){mr(o,i,r,a,s,"next",e)}function s(e){mr(o,i,r,a,s,"throw",e)}a(void 0)}))},N.apply(this,arguments)}function $(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:fr.noop,n.error="function"==typeof n.error?n.error:Y,n.customizeStream="function"==typeof n.customizeStream?n.customizeStream:fr.noop;var i=n.jsep;if(t&&i)return fr.error("Provided a JSEP to a createOffer"),void n.error("Provided a JSEP to a createOffer");if(!(t||i&&i.type&&i.sdp))return fr.error("A valid JSEP is required for createAnswer"),void n.error("A valid JSEP is required for createAnswer");n.media=n.media||{audio:!0,video:!0};var r=n.media,o=b[e];if(null==o||null===o.webrtcStuff||void 0===o.webrtcStuff)return fr.warn("Invalid handle"),void n.error("Invalid handle");var a,s=o.webrtcStuff;if(s.trickle=null==(a=n.trickle)||!0===a,void 0===s.pc||null===s.pc)r.update=!1,r.keepAudio=!1,r.keepVideo=!1;else if(void 0!==s.pc&&null!==s.pc){if(fr.log("Updating existing media session"),r.update=!0,null!==n.stream&&void 0!==n.stream)n.stream!==s.myStream&&fr.log("Renegotiation involves a new external stream");else{if(r.addAudio){if(r.keepAudio=!1,r.replaceAudio=!1,r.removeAudio=!1,r.audioSend=!0,s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length)return fr.error("Can't add audio stream, there already is one"),void n.error("Can't add audio stream, there already is one")}else r.removeAudio?(r.keepAudio=!1,r.replaceAudio=!1,r.addAudio=!1,r.audioSend=!1):r.replaceAudio&&(r.keepAudio=!1,r.addAudio=!1,r.removeAudio=!1,r.audioSend=!0);if(null===s.myStream||void 0===s.myStream?(r.replaceAudio&&(r.keepAudio=!1,r.replaceAudio=!1,r.addAudio=!0,r.audioSend=!0),H(r)&&(r.keepAudio=!1,r.addAudio=!0)):null===s.myStream.getAudioTracks()||void 0===s.myStream.getAudioTracks()||0===s.myStream.getAudioTracks().length?(r.replaceAudio&&(r.keepAudio=!1,r.replaceAudio=!1,r.addAudio=!0,r.audioSend=!0),H(r)&&(r.keepVideo=!1,r.addAudio=!0)):!H(r)||r.removeAudio||r.replaceAudio||(r.keepAudio=!0),r.addVideo){if(r.keepVideo=!1,r.replaceVideo=!1,r.removeVideo=!1,r.videoSend=!0,s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length)return fr.error("Can't add video stream, there already is one"),void n.error("Can't add video stream, there already is one")}else r.removeVideo?(r.keepVideo=!1,r.replaceVideo=!1,r.addVideo=!1,r.videoSend=!1):r.replaceVideo&&(r.keepVideo=!1,r.addVideo=!1,r.removeVideo=!1,r.videoSend=!0);null===s.myStream||void 0===s.myStream||null===s.myStream.getVideoTracks()||void 0===s.myStream.getVideoTracks()||0===s.myStream.getVideoTracks().length?(r.replaceVideo&&(r.keepVideo=!1,r.replaceVideo=!1,r.addVideo=!0,r.videoSend=!0),Q(r)&&(r.keepVideo=!1,r.addVideo=!0)):!Q(r)||r.removeVideo||r.replaceVideo||(r.keepVideo=!0),r.addData&&(r.data=!0)}if(H(r)&&r.keepAudio&&Q(r)&&r.keepVideo)return o.consentDialog(!1),void M(e,i,r,n,s.myStream)}if(r.update&&!s.streamExternal){if(r.removeAudio||r.replaceAudio){if(s.myStream&&s.myStream.getAudioTracks()&&s.myStream.getAudioTracks().length){var l=s.myStream.getAudioTracks()[0];fr.log("Removing audio track:",l),s.myStream.removeTrack(l);try{l.stop()}catch(k){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var c=!0;if(r.replaceAudio&&fr.unifiedPlan&&(c=!1),c)for(var d in s.pc.getSenders())(l=s.pc.getSenders()[d])&&l.track&&"audio"===l.track.kind&&(fr.log("Removing audio sender:",l),s.pc.removeTrack(l))}}if(r.removeVideo||r.replaceVideo){if(s.myStream&&s.myStream.getVideoTracks()&&s.myStream.getVideoTracks().length){l=s.myStream.getVideoTracks()[0],fr.log("Removing video track:",l),s.myStream.removeTrack(l);try{l.stop()}catch(P){}}if(s.pc.getSenders()&&s.pc.getSenders().length){var u=!0;if(r.replaceVideo&&fr.unifiedPlan&&(u=!1),u)for(var d in s.pc.getSenders())(l=s.pc.getSenders()[d])&&l.track&&"video"===l.track.kind&&(fr.log("Removing video sender:",l),s.pc.removeTrack(l))}}}if(null!==n.stream&&void 0!==n.stream){var p=n.stream;if(fr.log("MediaStream provided by the application"),fr.debug(p),r.update&&s.myStream&&s.myStream!==n.stream&&!s.streamExternal){try{var h=s.myStream.getTracks();for(var m in h){var A=h[m];fr.log(A),null!=A&&A.stop()}}catch(D){}s.myStream=null}return s.streamExternal=!0,o.consentDialog(!1),void M(e,i,r,n,p)}if(H(r)||Q(r)){if(!fr.isGetUserMediaAvailable())return void n.error("getUserMedia not available");var f={mandatory:{},optional:[]};o.consentDialog(!0);var v=H(r);!0===v&&null!=r&&null!=r&&"object"==typeof r.audio&&(v=r.audio);var g=Q(r);if(!0===g&&null!=r&&null!=r){var y=!0===n.simulcast,T=!0===n.simulcast2;if(!y&&!T||i||void 0!==r.video&&!1!==r.video||(r.video="hires"),r.video&&"screen"!=r.video&&"window"!=r.video)if("object"==typeof r.video)g=r.video;else{var _=0,C=0;"lowres"===r.video?(C=240,_=320):"lowres-16:9"===r.video?(C=180,_=320):"hires"===r.video||"hires-16:9"===r.video||"hdres"===r.video?(C=720,_=1280):"fhdres"===r.video?(C=1080,_=1920):"4kres"===r.video?(C=2160,_=3840):"stdres"===r.video?(C=480,_=640):"stdres-16:9"===r.video?(C=360,_=640):(fr.log("Default video setting is stdres 4:3"),C=480,_=640),fr.log("Adding media constraint:",r.video),g={height:{ideal:C},width:{ideal:_}},fr.log("Adding video constraint:",g)}else if("screen"===r.video||"window"===r.video){if(r.screenshareFrameRate||(r.screenshareFrameRate=3),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return void navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(t){o.consentDialog(!1),H(r)&&!r.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(o){t.addTrack(o.getAudioTracks()[0]),M(e,i,r,n,t)})):M(e,i,r,n,t)}),(function(e){o.consentDialog(!1),n.error(e)}));function L(t,a){o.consentDialog(!1),t?n.error(t):M(e,i,r,n,a)}function z(e,t,n){fr.log("Adding media constraint (screen capture)"),fr.debug(e),navigator.mediaDevices.getUserMedia(e).then((function(e){n?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(n){e.addTrack(n.getAudioTracks()[0]),t(null,e)})):t(null,e)})).catch((function(e){o.consentDialog(!1),t(e)}))}if("chrome"===fr.webRTCAdapter.browserDetails.browser){var S=fr.webRTCAdapter.browserDetails.version,E=33;window.navigator.userAgent.match("Linux")&&(E=35),S>=26&&S<=E?z(f={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:r.screenshareFrameRate,maxFrameRate:r.screenshareFrameRate,chromeMediaSource:"screen"}},audio:H(r)&&!r.keepAudio},L):fr.extension.getScreen((function(e,t){if(e)return o.consentDialog(!1),n.error(e);(f={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:r.screenshareFrameRate,maxFrameRate:r.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}}).video.mandatory.chromeMediaSourceId=t,z(f,L,H(r)&&!r.keepAudio)}))}else if("firefox"===fr.webRTCAdapter.browserDetails.browser){if(!(fr.webRTCAdapter.browserDetails.version>=33)){var w=new Error("NavigatorUserMediaError");return w.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",o.consentDialog(!1),void n.error(w)}z(f={video:{mozMediaSource:r.video,mediaSource:r.video},audio:H(r)&&!r.keepAudio},(function(e,t){if(L(e,t),!e)var n=t.currentTime,i=window.setInterval((function(){t||window.clearInterval(i),t.currentTime==n&&(window.clearInterval(i),t.onended&&t.onended()),n=t.currentTime}),500)}))}return}}null!=r&&"screen"===r.video||navigator.mediaDevices.enumerateDevices().then((function(t){var a=t.some((function(e){return"audioinput"===e.kind})),s=function(e){if(null==e)return!1;if("object"!=typeof e.video||"object"!=typeof e.video.mandatory)return!1;var t=e.video.mandatory;return t.chromeMediaSource?"desktop"===t.chromeMediaSource||"screen"===t.chromeMediaSource:t.mozMediaSource?"window"===t.mozMediaSource||"screen"===t.mozMediaSource:!!t.mediaSource&&("window"===t.mediaSource||"screen"===t.mediaSource)}(r)||t.some((function(e){return"videoinput"===e.kind})),l=H(r),c=Q(r),d=function(e){return null!=e&&!1!==e.audio&&!1!==e.audioSend&&void 0!==e.failIfNoAudio&&null!==e.failIfNoAudio&&!0===e.failIfNoAudio}(r),u=function(e){return null!=e&&!1!==e.video&&!1!==e.videoSend&&void 0!==e.failIfNoVideo&&null!==e.failIfNoVideo&&!0===e.failIfNoVideo}(r);if(l||c||d||u){var h=!!l&&a,m=!!c&&s;if(!h&&!m)return o.consentDialog(!1),n.error("No capture device found"),!1;if(!h&&d)return o.consentDialog(!1),n.error("Audio capture is required, but no capture device found"),!1;if(!m&&u)return o.consentDialog(!1),n.error("Video capture is required, but no capture device found"),!1}var A={audio:!(!a||r.keepAudio)&&v,video:!(!s||r.keepVideo)&&g};fr.debug("getUserMedia constraints",A),A.audio||A.video?navigator.mediaDevices.getUserMedia(A).then((function(t){o.consentDialog(!1),M(e,i,r,n,t)})).catch((function(e){o.consentDialog(!1),n.error({code:e.code,name:e.name,message:e.message})})):(o.consentDialog(!1),M(e,i,r,n,p))})).catch((function(e){o.consentDialog(!1),n.error("enumerateDevices error",e)}))}else M(e,i,r,n)}function F(e,t){(t=t||{}).success="function"==typeof t.success?t.success:fr.noop,t.error="function"==typeof t.error?t.error:Y;var n=t.jsep,i=b[e];if(null==i||null===i.webrtcStuff||void 0===i.webrtcStuff)return fr.warn("Invalid handle"),void t.error("Invalid handle");var r=i.webrtcStuff;if(null!=n){if(null===r.pc)return fr.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");r.pc.setRemoteDescription(n).then((function(){if(fr.log("Remote description accepted!"),r.remoteSdp=n.sdp,r.candidates&&r.candidates.length>0){for(var e=0;e<r.candidates.length;e++){var i=r.candidates[e];fr.debug("Adding remote candidate:",i),i&&!0!==i.completed?r.pc.addIceCandidate(i):r.pc.addIceCandidate(fr.endOfCandidates)}r.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}function j(e,t){var n=b[e];if(null==n||null===n.webrtcStuff||void 0===n.webrtcStuff)return fr.warn("Invalid handle"),0;var i=t?"remote":"local",r=n.webrtcStuff;return r.volume[i]||(r.volume[i]={value:0}),r.pc.getStats&&"chrome"===fr.webRTCAdapter.browserDetails.browser?!t||null!==r.remoteStream&&void 0!==r.remoteStream?t||null!==r.myStream&&void 0!==r.myStream?null===r.volume[i].timer||void 0===r.volume[i].timer?(fr.log("Starting "+i+" volume monitor"),r.volume[i].timer=setInterval((function(){r.pc.getStats((function(e){for(var n=e.result(),o=0;o<n.length;o++){var a=n[o];"ssrc"==a.type&&(t&&a.stat("audioOutputLevel")?r.volume[i].value=parseInt(a.stat("audioOutputLevel")):!t&&a.stat("audioInputLevel")&&(r.volume[i].value=parseInt(a.stat("audioInputLevel"))))}}))}),200),0):r.volume[i].value:(fr.warn("Local stream unavailable"),0):(fr.warn("Remote stream unavailable"),0):(fr.warn("Getting the "+i+" volume unsupported by browser"),0)}function U(e,t){var n=b[e];if(null==n||null===n.webrtcStuff||void 0===n.webrtcStuff)return fr.warn("Invalid handle"),!0;var i=n.webrtcStuff;return null===i.pc||void 0===i.pc?(fr.warn("Invalid PeerConnection"),!0):void 0===i.myStream||null===i.myStream?(fr.warn("Invalid local MediaStream"),!0):t?null===i.myStream.getVideoTracks()||void 0===i.myStream.getVideoTracks()||0===i.myStream.getVideoTracks().length?(fr.warn("No video track"),!0):!i.myStream.getVideoTracks()[0].enabled:null===i.myStream.getAudioTracks()||void 0===i.myStream.getAudioTracks()||0===i.myStream.getAudioTracks().length?(fr.warn("No audio track"),!0):!i.myStream.getAudioTracks()[0].enabled}function B(e,t,n){var i=b[e];if(null==i||null===i.webrtcStuff||void 0===i.webrtcStuff)return fr.warn("Invalid handle"),!1;var r=i.webrtcStuff;return null===r.pc||void 0===r.pc?(fr.warn("Invalid PeerConnection"),!1):void 0===r.myStream||null===r.myStream?(fr.warn("Invalid local MediaStream"),!1):t?null===r.myStream.getVideoTracks()||void 0===r.myStream.getVideoTracks()||0===r.myStream.getVideoTracks().length?(fr.warn("No video track"),!1):(r.myStream.getVideoTracks()[0].enabled=!n,!0):null===r.myStream.getAudioTracks()||void 0===r.myStream.getAudioTracks()||0===r.myStream.getAudioTracks().length?(fr.warn("No audio track"),!1):(r.myStream.getAudioTracks()[0].enabled=!n,!0)}function V(e){var t=b[e];if(null==t||null===t.webrtcStuff||void 0===t.webrtcStuff)return fr.warn("Invalid handle"),"Invalid handle";var n=t.webrtcStuff;return null===n.pc||void 0===n.pc?"Invalid PeerConnection":n.pc.getStats?null===n.bitrate.timer||void 0===n.bitrate.timer?(fr.log("Starting bitrate timer (via getStats)"),n.bitrate.timer=setInterval((function(){n.pc.getStats().then((function(e){e.forEach((function(e){if(e){var t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(n.bitrate.bsnow=e.bytesReceived,n.bitrate.tsnow=e.timestamp,null===n.bitrate.bsbefore||null===n.bitrate.tsbefore)n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow;else{var i=n.bitrate.tsnow-n.bitrate.tsbefore;"safari"==fr.webRTCAdapter.browserDetails.browser&&(i/=1e3);var r=Math.round(8*(n.bitrate.bsnow-n.bitrate.bsbefore)/i);"safari"===fr.webRTCAdapter.browserDetails.browser&&(r=parseInt(r/1e3)),n.bitrate.value=r+" kbits/sec",n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow}}}))}))}),1e3),"0 kbits/sec"):n.bitrate.value:(fr.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser")}function Y(e){fr.error("WebRTC error:",e)}function Z(e,t){fr.log("Cleaning WebRTC stuff");var r=b[e];if(null!=r){var o=r.webrtcStuff;if(null!=o){if(!0===t){var a={rtcgw:"hangup",transaction:fr.randomString(12)};null!==r.token&&void 0!==r.token&&(a.token=r.token),null!=f&&(a.apisecret=f),fr.debug("Sending hangup request (handle="+e+"):",a),n?(a.session_id=_,a.handle_id=e,i.send(JSON.stringify(a))):fr.httpAPICall(l+"/"+_+"/"+e,{verb:"POST",withCredentials:h,body:a})}o.remoteStream=null,o.volume&&(o.volume.local&&o.volume.local.timer&&clearInterval(o.volume.local.timer),o.volume.remote&&o.volume.remote.timer&&clearInterval(o.volume.remote.timer)),o.volume={},o.bitrate.timer&&clearInterval(o.bitrate.timer),o.bitrate.timer=null,o.bitrate.bsnow=null,o.bitrate.bsbefore=null,o.bitrate.tsnow=null,o.bitrate.tsbefore=null,o.bitrate.value=null;try{if(!o.streamExternal&&null!==o.myStream&&void 0!==o.myStream){fr.log("Stopping local stream tracks");var s=o.myStream.getTracks();for(var c in s){var d=s[c];fr.log(d),null!=d&&d.stop()}}}catch(e){}o.streamExternal=!1,o.myStream=null;try{o.pc.close()}catch(e){}o.pc=null,o.candidates=null,o.mySdp=null,o.remoteSdp=null,o.iceDone=!1,o.dataChannel={},o.dtmfSender=null}r.oncleanup()}}function H(e){return null==e||!1!==e.audio&&(void 0===e.audioSend||null===e.audioSend||!0===e.audioSend)}function G(e){return null==e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv)}function Q(e){return null==e||!1!==e.video&&(void 0===e.videoSend||null===e.videoSend||!0===e.videoSend)}function K(e){return null==e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv)}D(e),this.getServer=function(){return l},this.isConnected=function(){return T},this.reconnect=function(e){(e=e||{}).success="function"==typeof e.success?e.success:fr.noop,e.error="function"==typeof e.error?e.error:fr.noop,e.reconnect=!0,D(e)},this.getSessionId=function(){return _},this.destroy=function(t){!function(t){(t=t||{}).success="function"==typeof t.success?t.success:fr.noop;var a=!0;void 0!==t.asyncRequest&&null!==t.asyncRequest&&(a=!0===t.asyncRequest);var s=!0;void 0!==t.notifyDestroyed&&null!==t.notifyDestroyed&&(s=!0===t.notifyDestroyed);var c=!1;if(void 0!==t.cleanupHandles&&null!==t.cleanupHandles&&(c=!0===t.cleanupHandles),fr.log("Destroying session "+_+" (async="+a+")"),!T)return fr.warn("Is the server down? (connected=false)"),void t.success();if(null==_)return fr.warn("No session to destroy"),t.success(),void(s&&e.destroyed());if(c)for(var d in b)R(d,{noRequest:!0});var u={rtcgw:"destroy",transaction:fr.randomString(12)};if(null!=A&&(u.token=A),null!=f&&(u.apisecret=f),n){u.session_id=_;var p=function(){for(var e in r)i.removeEventListener(e,r[e]);i.removeEventListener("message",m),i.removeEventListener("error",v),o&&clearTimeout(o),i.close()},m=function(n){var i=JSON.parse(n.data);i.session_id==u.session_id&&i.transaction==u.transaction&&(p(),t.success(),s&&e.destroyed())},v=function(n){p(),t.error("Failed to destroy the server: Is the server down?"),s&&e.destroyed()};return i.addEventListener("message",m),i.addEventListener("error",v),void i.send(JSON.stringify(u))}fr.httpAPICall(l+"/"+_,{verb:"POST",async:a,withCredentials:h,body:u,success:function(n){fr.log("Destroyed session:"),fr.debug(n),_=null,T=!1,"success"!==n.rtcgw&&fr.error("Ooops: "+n.error.code+" "+n.error.reason),t.success(),s&&e.destroyed()},error:function(n,i){fr.error(n+":",i),_=null,T=!1,t.success(),s&&e.destroyed()}})}(t)},this.attach=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:fr.noop,e.error="function"==typeof e.error?e.error:fr.noop,e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:fr.noop,e.iceState="function"==typeof e.iceState?e.iceState:fr.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:fr.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:fr.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:fr.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:fr.noop,e.onlocalstream="function"==typeof e.onlocalstream?e.onlocalstream:fr.noop,e.onremotestream="function"==typeof e.onremotestream?e.onremotestream:fr.noop,e.ondata="function"==typeof e.ondata?e.ondata:fr.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:fr.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:fr.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:fr.noop,!T)return fr.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var t=e.plugin;if(null==t)return fr.error("Invalid plugin"),void e.error("Invalid plugin");var r=e.opaqueId,o=e.token?e.token:A,a=fr.randomString(12),s={rtcgw:"attach",plugin:t,opaque_id:r,transaction:a};if(null!=o&&(s.token=o),null!=f&&(s.apisecret=f),n)return E[a]=function(n){if("success"!==n.rtcgw)return fr.error("Ooops: "+n.error.code+" "+n.error.reason),void e.error("Ooops: "+n.error.code+" "+n.error.reason);var i=n.data.id;fr.log("Created handle: "+i);var r={session:C,plugin:t,id:i,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return i},getPlugin:function(){return t},getVolume:function(){return j(i,!0)},getRemoteVolume:function(){return j(i,!0)},getLocalVolume:function(){return j(i,!1)},isAudioMuted:function(){return U(i,!1)},muteAudio:function(){return B(i,!1,!0)},unmuteAudio:function(){return B(i,!1,!1)},isVideoMuted:function(){return U(i,!0)},muteVideo:function(){return B(i,!0,!0)},unmuteVideo:function(){return B(i,!0,!1)},getBitrate:function(){return V(i)},send:function(e){L(i,e)},data:function(e){O(i,e)},dtmf:function(e){I(i,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){$(i,!0,e)},createAnswer:function(e){$(i,!1,e)},handleRemoteJsep:function(e){F(i,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){Z(i,!0===e)},detach:function(e){R(i,e)}};b[i]=r,e.success(r)},s.session_id=_,void i.send(JSON.stringify(s));fr.httpAPICall(l+"/"+_,{verb:"POST",withCredentials:h,body:s,success:function(n){if(fr.debug(n),"success"!==n.rtcgw)return fr.error("Ooops: "+n.error.code+" "+n.error.reason),void e.error("Ooops: "+n.error.code+" "+n.error.reason);var i=n.data.id;fr.log("Created handle: "+i);var r={session:C,plugin:t,id:i,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return i},getPlugin:function(){return t},getVolume:function(){return j(i,!0)},getRemoteVolume:function(){return j(i,!0)},getLocalVolume:function(){return j(i,!1)},isAudioMuted:function(){return U(i,!1)},muteAudio:function(){return B(i,!1,!0)},unmuteAudio:function(){return B(i,!1,!1)},isVideoMuted:function(){return U(i,!0)},muteVideo:function(){return B(i,!0,!0)},unmuteVideo:function(){return B(i,!0,!1)},getBitrate:function(){return V(i)},send:function(e){L(i,e)},data:function(e){O(i,e)},dtmf:function(e){I(i,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){$(i,!0,e)},createAnswer:function(e){$(i,!1,e)},handleRemoteJsep:function(e){F(i,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){Z(i,!0===e)},detach:function(e){R(i,e)}};b[i]=r,e.success(r)},error:function(e,t){fr.error(e+":",t)}})}(e)}}fr.useDefaultDependencies=function(e){var t=e&&e.fetch||fetch,n=e&&e.Promise||Promise,i=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new i(e,t)},extension:e&&e.extension||Ar,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||window.adapter,httpAPICall:function(e,i){var r={method:i.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===i.verb&&(r.headers["Content-Type"]="application/json"),void 0!==i.withCredentials&&(r.credentials=!0===i.withCredentials?"include":i.withCredentials?i.withCredentials:"omit"),void 0!==i.body&&(r.body=JSON.stringify(i.body));var o=t(e,r).catch((function(e){return n.reject({message:"Probably a network error, is the server down?",error:e})}));if(void 0!==i.timeout){var a=new n((function(e,t){var n=setTimeout((function(){return clearTimeout(n),t({message:"Request timed out",timeout:i.timeout})}),i.timeout)}));o=n.race([o,a])}return o.then((function(e){return e.ok?typeof i.success==typeof fr.noop?e.json().then((function(e){i.success(e)})).catch((function(t){return n.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:n.reject({message:"API call failed",response:e})})).catch((function(e){typeof i.error==typeof fr.noop&&i.error(e.message||"<< internal error >>",e)})),o}}},fr.useOldDependencies=function(e){var t=e&&e.jQuery||jQuery,n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||Ar,webRTCAdapter:e&&e.adapter||adapter,httpAPICall:function(e,n){var i=void 0!==n.body?{contentType:"application/json",data:JSON.stringify(n.body)}:{},r=void 0!==n.withCredentials?{xhrFields:{withCredentials:n.withCredentials}}:{};return t.ajax(t.extend(i,r,{url:e,type:n.verb,cache:!1,dataType:"json",async:n.async,timeout:n.timeout,success:function(e){typeof n.success==typeof fr.noop&&n.success(e)},error:function(e,t,i){typeof n.error==typeof fr.noop&&n.error(t,i)}}))}}},fr.noop=function(){},fr.dataChanDefaultLabel="JanusDataChannel",fr.endOfCandidates=null,fr.init=function(e){if((e=e||{}).callback="function"==typeof e.callback?e.callback:fr.noop,!0===fr.initDone)e.callback();else{if("undefined"!=typeof console&&void 0!==console.log||(console={log:function(){}}),fr.trace=fr.noop,fr.debug=fr.noop,fr.vdebug=fr.noop,fr.log=fr.noop,fr.warn=fr.noop,fr.error=fr.noop,!0===e.debug||"all"===e.debug)fr.trace=console.trace.bind(console)||fr.noop,fr.debug=console.debug.bind(console)||fr.noop,fr.vdebug=console.debug.bind(console)||fr.noop,fr.log=console.log.bind(console)||fr.noop,fr.warn=console.warn.bind(console)||fr.noop,fr.error=console.error.bind(console)||fr.noop;else if(Array.isArray(e.debug))for(var t in e.debug)switch(e.debug[t]){case"trace":fr.trace=console.trace.bind(console)||fr.noop;break;case"debug":fr.debug=console.debug.bind(console)||fr.noop;break;case"vdebug":fr.vdebug=console.debug.bind(console)||fr.noop;break;case"log":fr.log=console.log.bind(console)||fr.noop;break;case"warn":fr.warn=console.warn.bind(console)||fr.noop;break;case"error":fr.error=console.error.bind(console)||fr.noop}var n=e.dependencies||fr.useDefaultDependencies();fr.isArray=n.isArray,fr.webRTCAdapter=n.webRTCAdapter,fr.httpAPICall=n.httpAPICall,fr.newWebSocket=n.newWebSocket,fr.extension=n.extension,fr.extension.init(),fr.listDevices=function(e,t){e="function"==typeof e?e:fr.noop,null==t&&(t={audio:!0,video:!0}),fr.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){fr.debug(n),e(n);try{var i=t.getTracks();for(var r in i){var o=i[r];null!=o&&o.stop()}}catch(e){}}))})).catch((function(t){fr.error(t),e([])})):(fr.warn("navigator.mediaDevices unavailable"),e([]))},fr.attachMediaStream=function(e,t){try{"chrome"===fr.webRTCAdapter.browserDetails.browser?fr.webRTCAdapter.browserDetails.version>=52?e.srcObject=t:fr.error("Error attaching stream to element"):e.srcObject=t}catch(e){}},fr.reattachMediaStream=function(e,t){try{"chrome"===fr.webRTCAdapter.browserDetails.browser?fr.webRTCAdapter.browserDetails.version>=52?e.srcObject=t.srcObject:void 0!==e.src?e.src=t.src:fr.error("Error reattaching stream to element"):e.srcObject=t.srcObject}catch(e){}};var i=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",r=window["on"+i];if(window.addEventListener(i,(function(e){for(var t in fr.log("Closing window"),fr.sessions)null!==fr.sessions[t]&&void 0!==fr.sessions[t]&&fr.sessions[t].destroyOnUnload&&(fr.log("Destroying session "+t),fr.sessions[t].destroy({asyncRequest:!1,notifyDestroyed:!1}));r&&"function"==typeof r&&r()})),fr.safariVp8=!1,"safari"===fr.webRTCAdapter.browserDetails.browser&&fr.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var t in RTCRtpSender.getCapabilities("video").codecs){var o=RTCRtpSender.getCapabilities("video").codecs[t];if(o&&o.mimeType&&"video/vp8"===o.mimeType.toLowerCase()){fr.safariVp8=!0;break}}fr.safariVp8?fr.log("This version of Safari supports VP8"):fr.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var a=new RTCPeerConnection({},{});a.createOffer({offerToReceiveVideo:!0}).then((function(e){fr.safariVp8=-1!==e.sdp.indexOf("VP8"),fr.safariVp8?fr.log("This version of Safari supports VP8"):fr.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),a.close(),a=null}))}if(fr.unifiedPlan=!1,"firefox"===fr.webRTCAdapter.browserDetails.browser&&fr.webRTCAdapter.browserDetails.version>=59)fr.unifiedPlan=!0;else if("chrome"===fr.webRTCAdapter.browserDetails.browser&&fr.webRTCAdapter.browserDetails.version<72)fr.unifiedPlan=!1;else if("undefined"==typeof RTCRtpTransceiver||"currentDirection"in RTCRtpTransceiver.prototype){const t=new RTCPeerConnection;try{t.addTransceiver("audio"),fr.unifiedPlan=!0}catch(e){}t.close()}else fr.unifiedPlan=!1;fr.initDone=!0,e.callback()}},fr.isWebrtcSupported=function(){return void 0!==window.RTCPeerConnection&&null!==window.RTCPeerConnection},fr.isGetUserMediaAvailable=function(){return void 0!==navigator.mediaDevices&&null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia&&null!==navigator.mediaDevices.getUserMedia},fr.randomString=function(e){for(var t="",n=0;n<e;n++){var i=Math.floor(62*Math.random());t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".substring(i,i+1)}return t};const vr={eventEmitter:null,language:"zh"};class gr{constructor(e){this.startTalk=(e,t)=>{const n=this;if("function"==typeof t&&!t())return void n.eventEmitter.emit("handleTalkError",{code:-1,msg:"startTalk terminate"});const{customizeStream:i,audio:r}=e;fr.isWebrtcSupported()&&(this.janus=new fr({server:e.rtcUrl,success:function(){n.janus&&n.janus.attach({plugin:"rtcgw.plugin.tts",opaqueId:n.opaqueId,success:function(t){n.tts=window.tts=t;let o={request:"start",url:e.talkLink,codec:"opus",dir:"sendrecv",audio_debug:1,url_version:"1"};"gb28181"===e.talkType&&(o.devProto="gb28181"),n.tts.createOffer({media:{audio:r||!0,video:!1,data:!1},simulcast:!1,simulcast2:!1,customizeStream:i,success:function(e){n.tts.send({message:o,jsep:e})},error:function(e){var t;n.eventEmitter.emit("handleTalkError",e),(null==(t=n.tts)?void 0:t.detach)&&n.tts.detach()}})},error:function(e){n.eventEmitter.emit("handleTalkError",e)},consentDialog:function(e){},iceState:function(e){},mediaState:function(e,t){},webrtcState:function(e){},slowLink:function(e,t){},onmessage:function(e,t){null!=t&&n.tts.handleRemoteJsep({jsep:t});let i=e.result;if(null!=i){if("done"===i)return null!==n.spinner&&void 0!==n.spinner&&n.spinner.stop(),void(n.spinner=null);"msg"===i&&n.eventEmitter.emit("handleTalkMessage",e),i.status}e.rtcgw&&"ttsup"===e.rtcgw&&n.eventEmitter.emit("handleTalkSuccess",e),e.code&&0!==e.code&&n.eventEmitter.emit("handleTalkError",{code:e.code,msg:n.i18n.t(e.code)})},onlocalstream:function(e){const t=document.getElementById("myaudio");t&&fr.attachMediaStream(t,e),"completed"!==n.tts.webrtcStuff.pc.iceConnectionState&&"connected"!==n.tts.webrtcStuff.pc.iceConnectionState&&(null==n.spinner?document.getElementById("audioright"):n.spinner.spin()),e.getAudioTracks()},onremotestream:function(e){const t=document.getElementById("peeraudio");t&&fr.attachMediaStream(t,e);let n=e.getAudioTracks();if(null==n||0===n.length);else{const e=document.getElementById("peeraudio");e&&e.play()}},ondataopen:function(e){},ondata:function(e){},oncleanup:function(){null!==n.spinner&&void 0!==n.spinner&&n.spinner.stop(),n.spinner=null}})},error:function(e){n.eventEmitter.emit("handleTalkError",e)}},{stream:e.stream,deviceSerial:e.deviceSerial,channel:e.channelNo}))},this.stopTalk=e=>{if("function"!=typeof e||e())if(this.tts&&(this.tts.detach(),this.tts=null),this.janus){try{this.janus.destroy({success:()=>{this.eventEmitter.emit("handleStopTalkSuccess",this.janus)},error:e=>{this.eventEmitter.emit("handleStopTalkError",e)}})}catch(e){this.eventEmitter.emit("handleStopTalkError",e)}this.janus=void 0,this.tts=null}else this.eventEmitter.emit("handleStopTalkError",{code:-1,msg:"stopTalk terminate"});else this.eventEmitter.emit("handleStopTalkError",{code:-1,msg:"stopTalk terminate"})},this.destroy=()=>{},this.tts=null,this.opaqueId="tts-"+fr.randomString(12),this.spinner=null,this.options=Object.assign({},vr,e||{}),this.eventEmitter=e.eventEmitter,this.i18n=new i({zh:pr,en:hr}),this.i18n.switchTranslation(this.options.language||"zh"),fr.init({debug:"all"})}}function yr(){return yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},yr.apply(this,arguments)}const Tr="stopTalk",_r="talkVolumeChange",br={deviceSerial:"",channelNo:"1",accessToken:"",env:{domain:"https://open.ys7.com"},capacity:{support_talk:null,support_switch_talkmode:null}};class Cr{updateOptions(e){this.options=Object.assign(this.options,e||{})}constructor(e){this.destroy=()=>{this.stopTalk(),document.body.removeChild(this.audioLeft),document.body.removeChild(this.audioRight)},this.startTalk=e=>{this.eventEmitter.emit("beforeTalk",{});const t=this;new Promise(((e,t)=>{var n,i,r,o;(null==(n=this.options.capacity)?void 0:n.support_switch_talkmode)&&"1"==this.options.capacity.support_switch_talkmode?fetch(this.options.env.domain+"/api/service/device/talkMode"+`?deviceSerial=${this.options.deviceSerial}`,{method:"GET",headers:{accessToken:(null==(r=this.options.token)||null==(i=r.deviceToken)?void 0:i.global)||(null==(o=this.options)?void 0:o.accessToken)}}).then((e=>e.json())).then((t=>{var n,i,r;t.meta&&200==t.meta.code?(null==(n=t.data)?void 0:n.valueInfo)&&0==t.data.valueInfo.mode?fetch(this.options.env.domain+"/api/v3/device/talkMode"+`?deviceSerial=${this.options.deviceSerial}&channelNo=${this.options.channelNo}&mode=1`,{method:"PUT",headers:{accessToken:(null==(r=this.options.token)||null==(i=r.deviceToken)?void 0:i.video)||this.options.accessToken}}).then((e=>e.json())).then((t=>{t.meta&&200==t.meta.code?e({}):e({code:-1,msg:"",res:t})})).catch((t=>{e({code:-1,msg:"",res:t})})):e({}):e({code:-1,msg:"",res:t})})).catch((t=>{e({code:-1,msg:"",res:t})})):e({code:-1,msg:""})})).then((n=>{var i,r,o;if((null==(i=this.options.capacity)?void 0:i.support_talk)&&(!this.options.capacity||"3"!==this.options.capacity.support_talk&&"1"!==this.options.capacity.support_talk))return!1;const a=new FormData;a.append("accessToken",(null==(o=this.options.token)||null==(r=o.deviceToken)?void 0:r.video)||this.options.accessToken),a.append("deviceSerial",this.options.deviceSerial),a.append("channelNo",this.options.channelNo),fetch(this.options.env.domain+"/api/lapp/live/talk/url",{method:"POST",body:a}).then((e=>e.json())).then((n=>{if(200==n.code){const o=n.data;if(o){var i,r;let n=o.rtcUrl;-1===n.indexOf("ws")&&(n=n.replace("https","wss").replace("rtcgw","rtcgw-ws")),this.talkOptions.rtcUrl=n,this.talkOptions.ttsUrl="tts://"+o.ttsUrl,this.talkOptions.deviceSerial=this.options.deviceSerial,this.talkOptions.channelNo=this.options.channelNo,this.talkOptions.talkLink=this.talkOptions.ttsUrl.split("?")[0]+"/talk?dev="+this.talkOptions.deviceSerial+"&chann="+this.talkOptions.channelNo+"&encodetype=2",o.ttsUrl.indexOf("gb28181")>-1&&(this.talkOptions.talkType="gb28181"),e&&e(o.ttsUrl.indexOf("gb28181")>-1||-1!==this.talkOptions.deviceSerial.indexOf(":")),this.talkOptions.stream=o.stream?o.stream:(null==(r=this.options.token)||null==(i=r.streamToken)?void 0:i.talk)||this.options.accessToken,this.ttsTalk.startTalk(yr({},this.talkOptions,{customizeStream:t._customizeStream.bind(t),audio:!this.microphoneId||{deviceId:this.microphoneId}})),this.isTalking=!0,this.observeVolumeChange({interval:100}),this.eventEmitter&&this.eventEmitter.emit("startTalk",{eventType:"startTalk",code:0,target:this,msg:""})}}else this.eventEmitter&&this.eventEmitter.emit("startTalk",{eventType:"startTalk",code:-1,target:this,msg:n.msg});this.ttsTalk.eventEmitter.on("handleTalkSuccess",(e=>{this.isTalking=!0,this.observeVolumeChange({interval:100}),this.eventEmitter&&this.eventEmitter.emit("startTalk",{eventType:"startTalk",code:0,target:this,msg:""})})),this.ttsTalk.eventEmitter.on("handleTalkError",(e=>{this.eventEmitter&&this.eventEmitter.emit("startTalk",{eventType:"startTalk",code:e.code,target:this,msg:e.msg})}))}))})).catch((e=>{}))},this.stopTalk=()=>{var e;try{this.ttsTalk.stopTalk(),this.isTalking=!1}catch(e){var t;null==(t=this.eventEmitter)||t.emit(Tr,{eventType:Tr,code:-1,msg:""})}this.gainNode=null,this.volumeChangeInterval&&(clearInterval(this.volumeChangeInterval),this.volumeChangeInterval=null),this.eventEmitter&&setTimeout((()=>{var e;null==(e=this.eventEmitter)||e.emit(_r,{eventType:_r,code:0,target:this,data:0,msg:""})}),200);const n=document.getElementById("myaudio").srcObject;n&&n.getTracks()[0].stop(),null==(e=this.eventEmitter)||e.emit(Tr,{eventType:Tr,code:0,target:this,msg:""})},this.changeTalkChannelNo=e=>{this.talkOptions.channelNo=e},this._customizeStream=e=>new Promise(((t,n)=>{const i=new window.AudioContext;this.gainNode=i.createGain();const r=i.createMediaStreamSource(e);var o;this.gainNode.gain.value=null!=(o=this.volumeGain)?o:1;const a=i.createMediaStreamDestination();r.connect(this.gainNode),this.gainNode.connect(a),t(a.stream)})),this.setVolumeGain=e=>{const t=e;return"number"==typeof t&&t>=0?(this.volumeGain=Math.min(t,10),this.gainNode&&(this.gainNode.gain.value=this.volumeGain),{code:0,msg:"",res:null}):{code:-1,msg:"",res:null}},this.observeVolumeChange=e=>{const{interval:t}=e;this.volumeChangeInterval&&(clearInterval(this.volumeChangeInterval),this.volumeChangeInterval=null),this.volumeChangeInterval=setInterval((()=>{var e,t,n,i,r;null==(r=window.tts)||null==(i=r.webrtcStuff)||null==(n=i.pc)||null==(t=n.getStats)||null==(e=t.call(n))||e.then((e=>{e.forEach((e=>{var t;"media-source"===e.type&&(null==(t=this.eventEmitter)||t.emit("talkVolumeChange",{eventType:"talkVolumeChange",code:0,target:this,data:e.audioLevel,msg:""}))}))}))}),t)},this.getMicrophonePermission=()=>new Promise(((e,t)=>{navigator.mediaDevices.getUserMedia({audio:!0}).then((t=>{t.getTracks().forEach((e=>{e.stop()})),e({code:0,msg:"",res:null})})).catch((t=>{e({code:-1,msg:"",res:t})}))})),this.getMicrophonesList=()=>new Promise(((e,t)=>{navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((t=>{const n=[];t.forEach((e=>{"audioinput"==e.kind&&n.push(e)})),e({code:0,msg:"",res:n})})):e({code:-1,msg:"",res:null})})),this.setProfile=e=>{const{microphoneId:t}=e;t!==this.microphoneId&&(this.microphoneId=t,this.isTalking&&(this.stopTalk(),setTimeout((()=>{this.ttsTalk.startTalk(yr({},this.talkOptions,{customizeStream:this._customizeStream.bind(this),audio:!this.microphoneId||{deviceId:this.microphoneId}})),this.isTalking=!0}),300)))},this.options=Object.assign({},br,e||{}),this.gainNode=null,this.volumeGain=null,this.volumeChangeInterval=null,this.microphoneId=null,this.eventEmitter=new ur,this.ttsTalk=new gr({eventEmitter:this.eventEmitter}),this.isTalking=!1;const t=document.createElement("div");t.id="audioleft";const n=document.createElement("audio");n.id="myaudio",n.muted=!0,n.setAttribute("autoplay","true"),n.setAttribute("controls","true"),t.appendChild(n),t.style.display="none";const i=document.createElement("div");i.id="audioright",i.style.display="none";const r=document.createElement("audio");r.id="peeraudio",r.setAttribute("autoplay","true"),r.setAttribute("controls","true"),i.appendChild(r),this.talkOptions={rtcUrl:"",talkLink:"",ttsUrl:"",stream:"",deviceSerial:this.options.deviceSerial,channelNo:this.options.channelNo},this.audioLeft=t,this.audioRight=i,document.body.appendChild(t),document.body.appendChild(i)}}Cr.VERSION="0.0.2";const Sr=()=>{var e=window.navigator.userAgent.toLowerCase(),t=(/version.*safari/.test(e),/chrome/.test(e));/gecko/.test(e)&&/webkit/.test(e);if(lr())return!1;if(t){function n(){for(var e=window.navigator.userAgent.split(" "),t="",n=0;n<e.length;n++)/chrome/i.test(e[n])&&(t=e[n]);return!!t&&Number(t.split("/")[1].split(".")[0])}return n()>91&&!!window.SharedArrayBuffer}return!1},Er=e=>{if(e&&e.retcode)return String(e.retcode);if(e&&e.code){return`1${String(e.code).padStart(5,"0")}`}if(e&&e.errorCode){return`39${String(e.errorCode).padStart(4,"0")}`}return"400001"};function wr(){var e,t={},n=navigator.userAgent.toLowerCase();if((e=n.match(/rv:([\d.]+)\) like gecko/))||(e=n.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=n.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=n.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=n.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=n.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=n.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),t.chrome){let e=t.chrome,n=e.indexOf(".");return Number(e.substring(0,n))}return-1}function kr(e){return wr()>=94}function Pr(e){if(wr()>=107){let e={codec:"hvc1.1.6.L123.00",hardwareAcceleration:"prefer-hardware"};window.VideoDecoder&&VideoDecoder.isConfigSupported(e).then((e=>{e.supported}))}}const Dr="https://open.ys7.com",Lr="ezuikit_addressList",zr="ezuikit_reloadAddressList",xr={loggerOptions:{level:"INFO",showTime:!0,name:"ezuikit"},autoplay:!0,env:{domain:Dr},host:Dr.replace("https://",""),streamInfoCBType:1,videoLevelList:null},Or=[16,8,4,2,1,.5],Ir=[{videoLevel:1,streamTypeIn:1,type:"compatible"},{videoLevel:2,streamTypeIn:1,type:"compatible"}],Rr={auto:"VIDEO_LEVEL_AUTO",0:"VIDEO_LEVEL_FLUENT",1:"VIDEO_LEVEL_STANDARD",2:"VIDEO_LEVEL_HEIGH",3:"VIDEO_LEVEL_SUPER",4:"VIDEO_LEVEL_EXTREME",5:"VIDEO_LEVEL_3K",6:"VIDEO_LEVEL_4k"},Mr={init:"init",decoderLoad:"decoderLoad",decoderLoaded:"decoderLoaded",firstFrameDisplay:"firstFrameDisplay",streamInfoCB:"streamInfoCB",videoInfo:"videoInfo",audioInfo:"audioInfo",play:"play",stop:"stop",changeVideoLevel:"changeVideoLevel",reSetTheme:"reSetTheme",changePlayUrl:"changePlayUrl",getOSDTime:"getOSDTime",capturePicture:"capturePicture",startSave:"startSave",stopSave:"stopSave",openSound:"openSound",closeSound:"closeSound",enable3DZoom:"enable3DZoom",close3DZoom:"close3DZoom",changeZoomType:"changeZoomType",setPoster:"setPoster",resize:"resize",fast:"fast",slow:"slow",speedChange:"speedChange",seek:"seek",fullscreen:"fullscreen",exitFullscreen:"exitFullscreen",fullscreenChange:"fullscreenChange",destroy:"destroy",getDeviceCapacity:"getDeviceCapacity",pause:"pause",resume:"resume",getVideoLevelList:"getVideoLevelList",setVideoLevelList:"setVideoLevelList",currentVideoLevel:"currentVideoLevel",autoVideoLevel:"autoVideoLevel",getVideoLevel:"getVideoLevel",getPtzStatus:"getPtzStatus",getPlayRate:"getPlayRate",setMirrorFlip:"setMirrorFlip",setFECCorrectType:"setFECCorrectType",setFEC3DViewParam:"setFEC3DViewParam",getFEC3DViewParam:"getFEC3DViewParam",setWaterMarkFont:"setWaterMarkFont",talkVolumeChange:"talkVolumeChange",startTalk:"startTalk",stopTalk:"stopTalk",talkSuccess:"talkSuccess",talkError:"talkError",recTypeChange:"recTypeChange",recTimeChange:"recTimeChange",setLoggerOptions:"setLoggerOptions",setDisplayRegion:"setDisplayRegion",setAllDayRecTimes:"setAllDayRecTimes",setRecTimes:"setRecTimes",changeTheme:"changeTheme",date:{openDatePanel:"openDatePanel",closeDatePanel:"closeDatePanel",recStartTimeChange:"recStartTimeChange"},ptz:{openPtz:"openPtz",closePtz:"closePtz",ptzDirection:"ptzDirection",ptzSpeedChange:"ptzSpeedChange",ptzBtnClick:"ptzBtnClick"},zoom:{startZoom:"startZoom",closeZoom:"closeZoom",onZoomChange:"onZoomChange",openZoom:"openZoom",closeZoom:"closeZoom"},timeLine:{timeWidthChange:"timeWidthChange"},http:{getCloudRecordTimes:"getCloudRecordTimes",getLocalRecTimes:"getLocalRecTimes",getCloudRecTimes:"getCloudRecTimes",getDeviceInfo:"getDeviceInfo",getDeviceList:"getDeviceList",setVideoLevel:"setVideoLevel",getDeviceSupportQuality:"getDeviceSupportQuality",getStreamAddressList:"getStreamAddressList"}};class Nr{static formate(e,t,n=0){let i=e;"string"==typeof e?i=Nr.strToDate(e):"number"==typeof e&&(i=new Date(e)),i=new Date(i.getTime()-3600*n*1e3);const r=i.getFullYear(),o=String(i.getMonth()+1).padStart(2,"0"),a=String(i.getDate()).padStart(2,"0"),s=String(i.getHours()).padStart(2,"0"),l=String(i.getMinutes()).padStart(2,"0"),c=String(i.getSeconds()).padStart(2,"0");switch(t){case"YYYY-MM-DD hh:mm:ss":return`${r}-${o}-${a} ${s}:${l}:${c}`;case"YYYYMMDDhhmmss":return`${r}${o}${a}${s}${l}${c}`;case"YYYY/MM/DD hh:mm:ss":return`${r}/${o}/${a} ${s}:${l}:${c}`;case"YYYYMMDDThhmmssZ":return`${r}${o}${a}T${s}${l}${c}Z`;case"YYYY/MM/DD":return`${r}/${o}/${a}`;case"YYYYMMDD":return`${r}${o}${a}`;case"YYYY-MM-DD":return`${r}-${o}-${a}`;case"YYYY":return`${r}`;case"MM":return`${o}`;case"DD":return`${a}`;case"hh:mm:ss":return`${s}:${l}:${c}`;case"hh":return`${s}`;case"mm":return`${l}`;case"ss":return`${c}`;default:throw new Error("Unsupported format type")}}static diff(e,t,n){let i=e;"string"==typeof e?i=Nr.strToDate(e):"number"==typeof e&&(i=new Date(e));let r=t;"string"==typeof t?i=Nr.strToDate(t):"number"==typeof t&&(i=new Date(t));const o=i.getTime()-r.getTime();switch(n){case"year":return i.getFullYear()-r.getFullYear();case"month":let e=12*(i.getFullYear()-r.getFullYear())+(i.getMonth()-r.getMonth());return i.getDate()<r.getDate()&&e--,e;case"day":return o/60/60/24;case"hour":return o/60/60;case"minute":return o/60;case"second":return o;default:throw new Error("Unsupported diff type")}}static now(){return Date.now()}static strToDate(e){const t=(e+"").replace(/-/gi,"").replace(/:/gi,"").replace(/\//gi,"").replace(/ /gi,"").replace(/T|Z/gi,"");if(10===(e+"").length)return new Date(1e3*+e);if(13===(e+"").length)return new Date(+e);var n=t.slice(0,4),i=t.slice(4,6),r=t.slice(6,8),o=t.slice(8,10),a=t.slice(10,12),s=t.slice(12,14);return new Date(n+"/"+i+"/"+r+" "+o+":"+a+":"+s)}static padStart(e){return e<10?"0"+e:e+""}}function $r(){return $r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$r.apply(this,arguments)}function Fr(e,t=0){return(e||[]).map((e=>$r({},e,{startTime:e.startTime-3600*(t||0),endTime:e.endTime-3600*(t||0)}))).sort(((e,t)=>e.startTime-t.startTime))}function jr(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Ur(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){jr(o,i,r,a,s,"next",e)}function s(e){jr(o,i,r,a,s,"throw",e)}a(void 0)}))}}function Br(){return Br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Br.apply(this,arguments)}const Vr="/api/service/appKey/get",Yr="/api/lapp/device/info",Zr="/api/service/media/stream/server/info?version=2.0&protocol=4",Hr="/api/lapp/device/capacity",Gr="/api/v3/device/setVideoLevel",Qr="/api/lapp/live/url/ezopen",Kr="/api/service/cloudrecord/video/info/list",Wr="/api/lapp/video/by/time",qr="/api/v3/device/local/video/unify/query",Jr="/api/lapp/device/ptz/mirror",Xr="/api/service/device/capacity/video/quality";class eo{updateOptions(t){this._options=e(this._options,t,{clone:!1}),this._options.baseURL||(this._options.baseURL=Dr),this._options.baseURL=this._options.baseURL.replace(/\/$/,"")}_fetch(e,t={}){var n=this;return Ur((function*(){const i=/http[s]?:\/\//.test(e)?e:`${n._options.baseURL}${e}`,r=new AbortController,o=r.signal;n.controllers.push(r);const a=null===(null==t?void 0:t.headers)?{}:Br({clientType:"ezuikit"},n._options.accessToken?{accessToken:n._options.accessToken}:{},{deviceSerial:n._options.deviceSerial,localIndex:n._options.channelNo},(null==t?void 0:t.headers)||{}),s=Br({},t||{},{headers:Br({},a),signal:o});return"base"!==n._options.sdkType&&(delete s.headers,delete s.signal),fetch(i,s).finally((()=>{const e=n.controllers.findIndex((e=>e===r));e>-1&&n.controllers.splice(e,1)}))}))()}get(e,t={}){return this._fetch(e,Br({},t||{},{method:"get"}))}post(e,t={}){return this._fetch(e,Br({},t||{},{method:"post"}))}put(e,t={}){return this._fetch(e,Br({},t||{},{method:"put"}))}delete(e,t={}){return this._fetch(e,Br({},t||{},{method:"delete"}))}getAppKey(){var e=this;return Ur((function*(){var t,n;return"custom"===e._options.sdkType?new Promise((e=>{e({meta:{code:200,message:"",moreInfo:{}},data:{appKey:"ezuikit-custom"}})})):e.get(`${Vr}?checkToken=${e._options.accessToken||(null==(n=e._options.token)||null==(t=n.deviceToken)?void 0:t.video)}&sn=${e._options.deviceSerial}&cno=${e._options.channelNo}`,{headers:null}).then((e=>e.json())).catch((()=>""))}))()}getDeviceInfo(){var e=this;return Ur((function*(){var t,n;const i=new FormData;return i.append("accessToken",e._options.accessToken||(null==(n=e._options.token)||null==(t=n.deviceToken)?void 0:t.global)||""),i.append("deviceSerial",e._options.deviceSerial),e.post(Yr,{body:i,headers:null}).then((e=>e.json())).then((e=>200==+e.code?e.data:{}))}))()}getDeviceCapacity(){var e=this;return Ur((function*(){var t,n;let i=new FormData;return i.append("accessToken",e._options.accessToken||(null==(n=e._options.token)||null==(t=n.deviceToken)?void 0:t.video)||""),i.append("deviceSerial",e._options.deviceSerial),e.post(Hr,{body:i,headers:null}).then((e=>e.json())).then((e=>200==+e.code?e.data:{})).catch((()=>({})))}))()}getStreamAddressList(){var e=this;return Ur((function*(){var t,n;return"custom"===e._options.sdkType?new Promise((e=>{e([0,{domain:"",port:0,backups:[]}])})):e.get(Zr,{headers:{accessToken:e._options.accessToken||(null==(n=e._options.token)||null==(t=n.deviceToken)?void 0:t.video)}}).then((e=>e.json())).then((t=>{if(t.meta&&200==t.meta.code){var n;let r={};try{r=JSON.parse(localStorage.getItem(Lr)||"{}")}catch(e){}let o=t=>{const n=e._options.deviceSerial+"_"+e._options.channelNo,i=new Date;r[n]=[{domain:t.domain?t.domain:t.addr?t.addr:"",port:t.port,expire:new Date(i.setHours(i.getHours()+12)).Format("yyyyMMddThhmmssZ")}],Array.isArray(t.backups)&&t.backups.map((e=>{r[n].push({domain:e.domain?e.domain:e.addr?e.addr:"",port:e.port,expire:new Date(i.setHours(i.getHours()+12)).Format("yyyyMMddThhmmssZ")})}));try{window.localStorage.setItem(Lr,JSON.stringify(r))}catch(e){}},a=(e,t)=>{if(e.length!==t.length)return!1;let n=[...e].sort(((e,t)=>e.domain>t.domain?1:-1)),i=[...t].sort(((e,t)=>e.domain>t.domain?1:-1));for(let e=0;e<n.length;e++)if(n[e].domain!==i[e].domain)return!1;return!0};if(t.data&&Array.isArray(r[e._options.deviceSerial+"_"+e._options.channelNo])){let n=Array.isArray(t.data.backups)?[...t.data.backups]:[];var i;if(n.push({domain:t.data.domain,port:t.data.port}),a(r[e._options.deviceSerial+"_"+e._options.channelNo],n))(null==(i=r[e._options.deviceSerial+"_"+e._options.channelNo][0])?void 0:i.expire)<=(new Date).Format("yyyyMMddThhmmssZ")&&o(t.data);else o(t.data)}return o=null,a=null,[(null==(n=r[e._options.deviceSerial+"_"+e._options.channelNo])?void 0:n.length)||0,t.data]}return[0,{}]}))}))()}getDeviceSupportQuality(e={}){var t=this;return Ur((function*(){var n,i;const r=e.accessToken||t._options.accessToken||(null==(i=t._options.token)||null==(n=i.deviceToken)?void 0:n.video),o=e.channelNo||t._options.channelNo;let a=[];return t.get(Xr+`?accessToken=${r}&deviceSerial=${t._options.deviceSerial}&channelNo=${o}`,{headers:null}).then((e=>e.json())).then((e=>((e.meta&&200===e.meta.code&&e.data&&e.data.length>0?e.data:Ir).map((e=>{e.videoLevel>6||e.videoLevel<0||a.push({name:Rr[e.videoLevel],level:e.videoLevel,streamTypeIn:e.streamTypeIn,type:e.type})})),a.sort(((e,t)=>e.level>t.level?1:-1))))).catch((()=>(Ir.map((e=>{a.push({name:Rr[e.videoLevel],level:e.videoLevel,streamTypeIn:e.streamTypeIn,type:"compatible"})})),a)))}))()}getDeviceList(e={}){var t=this;return Ur((function*(){var n,i;const r=e.accessToken||t._options.accessToken||(null==(i=t._options.token)||null==(n=i.deviceToken)?void 0:n.video),o=e.deviceSerial||t._options.deviceSerial;return t.post(`/api/lapp/device/camera/list?accessToken=${r}&deviceSerial=${o}`).then((e=>e.json())).then((e=>200==+(null==e?void 0:e.code)?e.data:[])).catch((()=>[]))}))()}setVideoLevel(e){var t=this;return Ur((function*(){var n,i,r,o;const a=new FormData;return a.append("videoLevel",e+""),"custom"===t._options.sdkType&&(a.append("accessToken",t._options.accessToken),a.append("deviceSerial",t._options.deviceSerial),a.append("localIndex",t._options.channelNo+"")),+e<0?{}:t.post(`${Gr}?accessToken=${t._options.accessToken||(null==(i=t._options.token)||null==(n=i.deviceToken)?void 0:n.video)}`,{headers:{accessToken:t._options.accessToken||(null==(o=t._options.token)||null==(r=o.deviceToken)?void 0:r.video)},body:a}).then((e=>e.json())).then((e=>e))}))()}getEzopenUrl(e){var t=this;return Ur((function*(){var n,i,r,o,a;let s=new FormData;if(s.append("isFlv","false"),s.append("userAgent",(null==(i=window)||null==(n=i.navigator)?void 0:n.userAgent)||""),s.append("isHttp","false"),s.append("needStreamToken",(null==(r=t._options)?void 0:r.accessToken)?"1":"0"),s.append("accessToken",t._options.accessToken||(null==(a=t._options.token)||null==(o=a.deviceToken)?void 0:o.video)||""),s.append("ezopen",e),t._options.ezopenParams&&"[object Object]"===Object.prototype.toString.call(t._options.ezopenParams))for(var l in t._options.ezopenParams)s.append(l,t._options.ezopenParams[l]);return t.post(Qr,{body:s,headers:{sdkVersion:"8.2.2"}}).then((e=>e.json())).then((n=>{if(200==+(null==n?void 0:n.code)||0==n.retcode){var i,r,o;let s="",l="";const c=null==(o=t._options)||null==(r=o.token)||null==(i=r.streamToken)?void 0:i[n.data.indexOf("live")>-1||n.data.indexOf("cloud")>-1?"live":"rec"];if(n.ext&&n.ext.token)s+=n.data,l=t._options.accessToken?n.ext.token:c;else if(n.data){var a;if("string"==typeof n.data&&c)s+=n.data,l=c;else s+=(null==(a=n.data)?void 0:a.url)||"",l=t._options.accessToken?n.data.token:c}if(s="live"===(-1!==e.indexOf("live")?"live":"playback")?s+"&ssn="+(l||"")+"&auth=1&biz=4&cln=100":s+"&ssn="+(l||"")+"&auth=1&cln=100",t._options.wsParams&&"[object Object]"===Object.prototype.toString.call(t._options.wsParams))for(const e in t._options.wsParams)s+="&"+e+"="+t._options.wsParams[e]||"";return s.replace(/&&/gi,"&")}return n})).catch((()=>""))}))()}getCloudRecordTimes(e){var t=this;return Ur((function*(){var n,i;const r={startTime:e.begin?Nr.formate(e.begin,"YYYY-MM-DD hh:mm:ss"):void 0,endTime:e.end?Nr.formate(e.end,"YYYY-MM-DD hh:mm:ss"):void 0,spaceId:e.spaceId||void 0},o=Object.keys(r).reduce(((e,t)=>null==r[t]?e:e+=`&${t}=${encodeURIComponent(r[t])}`),"").replace("&","");return t.get(Kr+`?${o}`,{headers:{accessToken:(null==(i=t._options.token)||null==(n=i.deviceToken)?void 0:n.global)||t._options.accessToken}}).then((e=>e.json())).then((t=>{var n;if(200==+(null==t||null==(n=t.meta)?void 0:n.code)){const n=Fr((t.data||[]).map((e=>(e.endTime=parseInt(Nr.strToDate(e.stopTime).getTime()/1e3+"",10),e.startTime=parseInt(Nr.strToDate(e.startTime).getTime()/1e3+"",10),e.busType=7,e.iStorageVersion=e.istorageVersion,e))));return n.length>0&&(n[0].startTime<parseInt(Nr.strToDate(Nr.formate(e.begin,"YYYY-MM-DD hh:mm:ss")).getTime()/1e3+"",10)&&(n[0].startTime=parseInt(Nr.strToDate(Nr.formate(e.begin,"YYYY-MM-DD hh:mm:ss")).getTime()/1e3+"",10)),n[n.length-1].endTime>parseInt(Nr.strToDate(Nr.formate(e.end,"YYYY-MM-DD hh:mm:ss")).getTime()/1e3+"",10)&&(n[n.length-1].endTime=parseInt(Nr.strToDate(Nr.formate(e.end,"YYYY-MM-DD hh:mm:ss")).getTime()/1e3+"",10))),n}return[]})).catch((()=>[]))}))()}getCloudTimes(e){var t=this;return Ur((function*(){var n,i;const r=new FormData;r.append("recType",e.url&&-1===e.url.indexOf(".cloud")?"2":"1"),r.append("version","2.0"),r.append("deviceSerial",t._options.deviceSerial),r.append("channelNo",t._options.channelNo+""),r.append("accessToken",t._options.accessToken||(null==(i=t._options.token)||null==(n=i.deviceToken)?void 0:n.video)||""),e.begin&&r.append("startTime",Nr.strToDate(e.begin+"").getTime()+""),e.end&&r.append("endTime",Nr.strToDate(e.end+"").getTime()+"");let o=[];const a=Ur((function*(e){try{yield t.post(`${Wr}`,{headers:null,body:e}).then((e=>e.json())).then(Ur((function*(t){if(200==+t.code&&t.data){var n,i,r,s,l;let d=[];if(Array.isArray(t.data))d=t.data;else if((null==(n=t.data)?void 0:n.files)&&(null==(r=t.data)||null==(i=r.files)?void 0:i.length)>0){var c;d=(null==(c=t.data)?void 0:c.files)||[]}if(o=o.concat(d),!(null==(s=t.data)?void 0:s.isAll)&&(null==(l=t.data)?void 0:l.nextFileTime))return e.append("startTime",t.data.nextFileTime),yield a(e)}})))}catch(e){}}));yield a(r),o=o.map((e=>Br({},e,{endTime:parseInt(e.endTime/1e3+"",10),startTime:parseInt(e.startTime/1e3+"",10)})));const s=Fr(o,t._options.timeZone||0);return s.length>0&&(s[0].startTime<parseInt(Nr.strToDate(e.begin+"").getTime()/1e3+"",10)&&(s[0].startTime=parseInt(Nr.strToDate(e.begin+"").getTime()/1e3+"",10)),s[s.length-1].endTime>parseInt(Nr.strToDate(e.end+"").getTime()/1e3+"",10)&&(s[s.length-1].endTime=parseInt(Nr.strToDate(e.end+"").getTime()/1e3+"",10))),s}))()}getLocalRecTimes(e){var t=this;return Ur((function*(){if("custom"===t._options.sdkType){var n,i;const r=new FormData;r.append("recType","2"),r.append("version","2.0"),r.append("deviceSerial",t._options.deviceSerial),r.append("channelNo",t._options.channelNo+""),r.append("accessToken",t._options.accessToken||(null==(i=t._options.token)||null==(n=i.deviceToken)?void 0:n.video)||""),e.begin&&r.append("startTime",Nr.strToDate(e.begin+"").getTime()+""),e.end&&r.append("endTime",Nr.strToDate(e.end+"").getTime()+"");let o=[];const a=Ur((function*(e){try{yield t.post(`${Wr}`,{body:e}).then((e=>e.json())).then(Ur((function*(t){if(200==+t.code&&t.data){var n,i,r,s,l;let d=[];if(Array.isArray(t.data))d=t.data;else if((null==(n=t.data)?void 0:n.files)&&(null==(r=t.data)||null==(i=r.files)?void 0:i.length)>0){var c;d=(null==(c=t.data)?void 0:c.files)||[]}if(o=o.concat(d),!(null==(s=t.data)?void 0:s.isAll)&&(null==(l=t.data)?void 0:l.nextFileTime))return e.append("startTime",t.data.nextFileTime),yield a(e)}})))}catch(e){}}));yield a(r),o=o.map((e=>Br({},e,{endTime:parseInt(e.endTime/1e3+"",10),startTime:parseInt(e.startTime/1e3+"",10)})));const s=Fr(o||[],t._options.timeZone||0);return s.length>0&&(s[0].startTime<parseInt(Nr.strToDate(e.begin+"").getTime()/1e3+"",10)&&(s[0].startTime=parseInt(Nr.strToDate(e.begin+"").getTime()/1e3+"",10)),s[s.length-1].endTime>parseInt(Nr.strToDate(e.end+"").getTime()/1e3+"",10)&&(s[s.length-1].endTime=parseInt(Nr.strToDate(e.end+"").getTime()/1e3+"",10))),s}{const n=parseInt(Nr.strToDate(e.begin+"").getTime()/1e3+"",10),i=parseInt(Nr.strToDate(e.end+"").getTime()/1e3+"",10),r=Ur((function*(e){let n=[];try{var i,o,a,s,l,c;const u=yield t.get(`${qr}?startTime=${e.startTime}&endTime=${e.endTime}&pageSize=${e.pageSize||200}`,{headers:{accessToken:t._options.accessToken||(null==(o=t._options.token)||null==(i=o.deviceToken)?void 0:i.video),deviceSerial:t._options.deviceSerial}}).then((e=>e.json()));if(200!=+(null==u||null==(a=u.meta)?void 0:a.code))return n;var d;if((null==u||null==(l=u.data)||null==(s=l.records)?void 0:s.length)&&(n=n.concat(u.data.records||[])),null==u||null==(c=u.data)?void 0:c.hasMore)n=n.concat(yield r(Br({},e,{startTime:null==u||null==(d=u.data)?void 0:d.nextFileTime})))}catch(e){}return n})),o=Fr((yield r({startTime:n,endTime:i}))||[]||[],t._options.timeZone||0);return o.length>0&&(o[0].startTime<n&&(o[0].startTime=n),o[o.length-1].endTime>i&&(o[o.length-1].endTime=i)),o}}))()}postDevicePtzMirror(e){var t=this;return Ur((function*(){var n,i;const r=new FormData;r.append("command",e+""),r.append("accessToken",t._options.accessToken||(null==(i=t._options.token)||null==(n=i.deviceToken)?void 0:n.video)||""),r.append("deviceSerial",t._options.deviceSerial),r.append("channelNo",t._options.channelNo+""),t.post(Jr,{body:r})}))()}abort(){this.controllers.length>0&&(this.controllers.forEach((e=>{e.abort("abort fetch")})),this.controllers=[])}destroy(){this.abort()}constructor(t){this.controllers=[],this._options=e({baseURL:Dr},t,{clone:!1}),this._options.baseURL||(this._options.baseURL=Dr),this._options.baseURL=this._options.baseURL.replace(/\/$/,"")}}function to(){return to=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},to.apply(this,arguments)}const no=[{id:"zh",env:"https://open.ys7.com",logHost:"https://log.ys7.com/statistics.do/opensdk_ezuikit"},{id:"us",env:"https://iusopen.ezvizlife.com",logHost:"https://uslog.ezvizlife.com/statistics.do/opensdk_ezuikit"},{id:"eu",env:"https://ieuopen.ezvizlife.com",logHost:"https://eulog.ezvizlife.com/statistics.do/opensdk_ezuikit"},{id:"sa",env:"https://isaopen.ezvizlife.com",logHost:"https://salog.ezvizlife.com/statistics.do/opensdk_ezuikit"},{id:"sgp",env:"https://isgpopen.ezvizlife.com",logHost:"https://sgplog.ezvizlife.com/statistics.do/opensdk_ezuikit"},{id:"rus",env:"https://irusopen.ezvizlife.com",logHost:"https://ruslog.ezvizlife.com/statistics.do/opensdk_ezuikit"},{id:"india",env:"https://iindiaopen.ezvizlife.com",logHost:"https://indialog.ezvizlife.com/statistics.do/opensdk_ezuikit"}];class io{changeUrl(e){var t,n;null==(n=this.collect)||null==(t=n.changeUrl)||t.call(n,this.getCollectUrl(e))}getCollectUrl(e){const t=no.findIndex((t=>t.env===e));return t>-1?no[t].logHost:""}report(e,t){var n;this.monitorReport&&(null==(n=this.collect)||n.send(to({action:e,appKey:this.appKey},t,{logInfo:to({pluginVersion:this.pluginVersion},t.logInfo||{})})))}updateParams(e){var t;null==(t=this.collect)||t.updateExtendsInfo(e)}updateAppKey(e){this.appKey=e}setForbidden(e){var t;null==(t=this.collect)||t.setForbidden(e)}constructor(e){this.collect=null,this.appKey="",this.monitorReport=!0,this.pluginVersion="";const t=this.getCollectUrl(e.domain);this.pluginVersion=e.pluginVersion,t&&(this.monitorReport=e.monitorReport,this.collect=new a(to({},e,{url:t})))}}function ro(e,t,n=0,i){let r=e,o=t;return e&&14===e.length&&t&&14===t.length?(Nr.formate(e,"YYYYMMDD")!==Nr.formate(t,"YYYYMMDD")&&(o=e.slice(0,8)+"235959"),t=(e=e.slice(0,8)+"000000").slice(0,8)+"235959"):e&&14===e.length?(t=(e=e.slice(0,8)+"000000").slice(0,8)+"235959",o=e.slice(0,8)+"235959"):t&&14===t.length?(e=t.slice(0,8)+"000000",t=t.slice(0,8)+"235959",r=e):(r=e=Nr.formate(new Date,"YYYYMMDD")+"000000",o=t=Nr.formate(new Date,"YYYYMMDD")+"235959"),([void 0,"",null].includes(n)||(n=parseInt(n))>=24||n<=-24||isNaN(n))&&(n=0),7==+i?{begin:e,end:t,timeZone:n,originBegin:r,originEnd:o}:{begin:e=Nr.formate(Nr.strToDate(e).getTime()+60*n*60*1e3,"YYYYMMDDhhmmss"),end:t=Nr.formate(Nr.strToDate(t).getTime()+60*n*60*1e3,"YYYYMMDDhhmmss"),timeZone:n,originBegin:r,originEnd:o}}function oo(){return oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},oo.apply(this,arguments)}function ao(e){return"string"!=typeof e&&"number"!=typeof e||!/\d/.test(e+"")||10!==(e+"").length?e:1e3*e}function so(e,t=[],n,i){function r(e){const n={};return t.forEach((t=>{n[t]=e[t]})),n.istorageVersion&&(n.iStorageVersion=n.istorageVersion,delete n.istorageVersion),n}const o=Nr.strToDate(n).getTime(),a=Nr.strToDate(i).getTime();return(e=[...e].map((e=>oo({},e,{startTime:ao(e.startTime),endTime:ao(e.endTime)}))).filter((e=>e.startTime>=o&&e.endTime<=a||(e.startTime<o&&e.endTime>o||(e.startTime<a&&e.endTime>a||void 0))))).length>0&&(e[0].startTime=o,e[e.length-1].endTime=a),e.reduce(((e,t,n)=>0===n?(e.push(r(t)),e):(e[e.length-1].downloadPath===t.downloadPath?e[e.length-1].endTime=t.endTime:e.push(r(t)),e)),[])}const lo=(e,t)=>{var n,i;const r=`${e.env.domain}/api/v3/device/setVideoLevel?accessToken=${e.accessToken||e.token.deviceToken.video} `,o=new FormData;return o.append("videoLevel",parseInt(t+"")),null==(i=e.logger)||null==(n=i.log)||n.call(i,"[https request] setVideoLevel()","videoLevel",t),t<0?Promise.resolve({}):fetch(r,{method:"POST",headers:{accessToken:e.accessToken||e.token.deviceToken.video,deviceSerial:e.deviceSerial,localIndex:e.channelNo},body:o}).then((e=>e.json())).then((t=>(null==e.emit||e.emit.call(e,Mr.http.setVideoLevel,t),t)))};let co=Dr;class uo{setDomain(e){co=e||co}fetch(e,t){return e="string"==typeof e?/^http/.test(e)?e:co+e:e,new Promise(((n,i)=>{fetch(e,t).then((e=>{try{return e.json()}catch(e){i({code:-1,msg:"data json parse error"})}})).then((e=>{200==+e.code||e.meta&&200===e.meta.code?n(e):i(e)})).catch((e=>{i(e)}))}))}constructor(e){return uo.instant?uo.instant:(co=e||co,uo.instant=this)}}function po(){return po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},po.apply(this,arguments)}class ho{getState(){return this.state}setState(e){this.state=po({},this.state,e)}constructor(e,t={rejection:!1,play:!1,pantile:!1,recordvideo:!1,zoom:!1,sound:!1,isEditing:!1,rec:!1,cloudRec:!1}){this.id=e,this.state=t}}function mo(){return mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mo.apply(this,arguments)}const Ao=new class{getGlobalState(){return this.globalState}setGlobalState(e){this.globalState=mo({},this.globalState,e)}constructor(){this.createInstance=(e,t={})=>{this.instances.has(e)&&this.removeInstance(e);const n=new ho(e,t);this.instances.set(e,n)},this.getInstance=e=>this.instances.has(e)?this.instances.get(e):null,this.removeInstance=e=>{if(!this.instances.has(e))return null;this.instances.delete(e)},this.listInstances=()=>Array.from(this.instances.values()),this.instances=new Map,this.globalState={talk:!1,expend:!1,webExpend:!1,sound:!1,audioOnly:!1}}};function fo(e){const t=document.getElementById(`${e}-player`);t&&t.remove()}function vo(e){const t=[{max:400,label:"360P"},{max:520,label:"480P"},{max:900,label:"720P"},{max:1200,label:"1080P"},{max:1600,label:"2K"},{max:2400,label:"4K"},{max:4500,label:"8K"}];for(const n of t)if(e<=n.max)return n.label}function go(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function yo(){return yo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},yo.apply(this,arguments)}function To(){var e;return e=function*(e){let t={},n="";var i;return"rec"===e.urlInfo.type&&(t=ro(e.urlInfo.searchParams.begin,e.urlInfo.searchParams.end,null==(i=e.urlInfo.searchParams)?void 0:i.timeZone,e.urlInfo.searchParams.busType),e.timeZone=t.timeZone,n="&begin="+Nr.formate(t.originBegin,"YYYYMMDDThhmmssZ")+"&end="+Nr.formate(t.originEnd,"YYYYMMDDThhmmssZ")+"&timeZone="+t.timeZone),-1!==e.url.indexOf(".cloud")&&"7"===e.urlInfo.searchParams.busType?yield e._services.getCloudRecordTimes({begin:t.begin,end:t.end,spaceId:e._spaceId}).then((i=>{if(e.cloudRecordRecList=i||[],null==e.emit||e.emit.call(e,Mr.http.getCloudRecordTimes,i||[]),null==e.emit||e.emit.call(e,Mr.setAllDayRecTimes,{type:"cloudRecordTimes",list:i||[]}),e.recordList=i||[],i.length){const r=so(i,["downloadPath","ownerId","iStorageVersion","spaceId","startTime","endTime","videoType","busType"],t.originBegin,t.originEnd);if(null==e.emit||e.emit.call(e,Mr.setRecTimes,i),0===r.length)return"";const o=JSON.stringify(r).replace("\\","");return n+"&recSlice="+o.replace("\\","")+"&r="+Math.random()}return null==e.emit||e.emit.call(e,Mr.setRecTimes,[]),""})):-1!==e.url.indexOf(".cloud")&&"7"!==e.urlInfo.searchParams.busType||"base"!==e.sdkType?yield e._services.getCloudTimes({begin:t.begin,end:t.end,url:e.url}).then((i=>{if(e.cloudRecList=i||[],null==e.emit||e.emit.call(e,Mr.http.getCloudRecTimes,i||[]),null==e.emit||e.emit.call(e,Mr.setAllDayRecTimes,{type:"cloudRecTimes",list:i}),e.recordList=i||[],i.length){const r=so(i,["downloadPath","ownerId","iStorageVersion","startTime","endTime","videoType"],t.originBegin,t.originEnd);if(null==e.emit||e.emit.call(e,Mr.setRecTimes,r),0===r.length)return"";const o=JSON.stringify(r.map((t=>{var n,i;return yo({},t,{startTime:t.startTime+3600*((null==(n=e.urlInfo.searchParams)?void 0:n.timeZone)||0)*1e3,endTime:t.endTime+3600*((null==(i=e.urlInfo.searchParams)?void 0:i.timeZone)||0)*1e3})}))).replace("\\","");return n+"&recSlice="+o.replace("\\","")+"&r="+Math.random()}return null==e.emit||e.emit.call(e,Mr.setRecTimes,[]),""})):-1!==e.url.indexOf(".rec")?(e._services.getLocalRecTimes({begin:t.begin,end:t.end}).then((t=>{e.localRecList=t,null==e.emit||e.emit.call(e,Mr.http.getLocalRecTimes,t||[]),null==e.emit||e.emit.call(e,Mr.setAllDayRecTimes,{type:"localTimes",list:t||[]}),e.recordList=t||[],null==e.emit||e.emit.call(e,Mr.setRecTimes,t||[])})),n):void 0},To=function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){go(o,i,r,a,s,"next",e)}function s(e){go(o,i,r,a,s,"throw",e)}a(void 0)}))},To.apply(this,arguments)}function _o(e){var t,n;return e.url.indexOf(".live")>-1?(null==(n=e.logger)||null==(t=n.log)||t.call(n,"[https request] _getDeviceSupportQualityServicesAndGetDeviceListServices()"),new Promise((t=>{const n=e.params.videoLevelList?Promise.resolve(e.params.videoLevelList):function(e){var t,n;return null==(n=e.logger)||null==(t=n.log)||t.call(n,"[https request] getDeviceSupportQuality()"),e._services.getDeviceSupportQuality().then((t=>(e.videoLevelList=t,e._setVideoLevelList(e.videoLevelList),null==e.emit||e.emit.call(e,Mr.http.getDeviceSupportQuality,t),t)))}(e);Promise.all([n,e._services.getDeviceList()]).then((n=>{var i,r,o,a;null==(r=e.logger)||null==(i=r.log)||i.call(r,"[https request] getDeviceList()"),null==e.emit||e.emit.call(e,Mr.http.getDeviceList,n[1]||[]);const s=n[1].find((t=>t.channelNo===+e.urlInfo.channelNo));s||t([[],[]]),e._setVideoLevelList(e.videoLevelList),null==e.emit||e.emit.call(e,Mr.setVideoLevelList,n[0]||[]);let l={};l="compatible"===(null==(o=e.videoLevelList[0])?void 0:o.type)?e.url.indexOf(".hd.live")>0?e.videoLevelList[1]:e.videoLevelList[0]:e.videoLevelList.find((e=>e.level==(null==s?void 0:s.videoLevel)))||{},(null==l?void 0:l.streamTypeIn)?(e.videoLevel=l.level,e.streamTypeIn=l.streamTypeIn):(null==(a=e.videoLevelList)?void 0:a.length)>0?(e.videoLevel=e.videoLevelList[0].level,e.streamTypeIn=e.videoLevelList[0].streamTypeIn,l=e.videoLevelList[0]):e.logger.warn(`the current video quality(${null==s?void 0:s.videoLevel}) is not in the list!`),null==e.emit||e.emit.call(e,Mr.currentVideoLevel,l,e.videoLevel),t(n)}))}))):Promise.resolve([[],[]])}function bo(e){var t;return null==(t=e.logger)||t.log("[https request] getStreamAddressList()"),e._services.getStreamAddressList().then((t=>{e.maxReloadTime=t[0],null==e.emit||e.emit.call(e,Mr.http.getStreamAddressList,t[1])}))}function Co(){return Co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Co.apply(this,arguments)}let So=!1;function Eo(e,t,n,i){const r=Date.now();return So=!0,e.playing=!0,e.loading=!0,new Promise(((o,a)=>{var s,l;(null==(s=e.logger)||s.log("_pluginPlay()",JSON.stringify(t)),t)||(null==(l=e.logger)||l.error("play address error"),a({code:-1,msg:"play address error"}));e.wsUrl=t,e._recOSDTimer&&(clearInterval(e._recOSDTimer),e._recOSDTimer=null),e._seekIntervaltimer&&(clearInterval(e._seekIntervaltimer),e._seekIntervaltimer=null);const c=t.split("?")[0].replace("/live","").replace("/playback","");let d=(-1===t.indexOf("/live")?-1!==t.indexOf("cloudplayback")?"/cloudplayback?":"/playback?":"/live?")+t.split("?")[1];d=(d.replace(/&stream=\d/,"")+"&stream="+(["/cloudplayback?","/playback?"].includes(d)?1:e.streamTypeIn||1)).replace(/&&/gi,"&");const u={playURL:d};if(e._gotWsUrlTime=(new Date).getTime(),e.isStoping=!1,e.jSPlugin){var p,h;if(null==e.logger.log||e.logger.log.call(e.logger,"JS_Play()"),null==(p=e.urlInfo)?void 0:p.validateCode)null==(h=e.jSPlugin)||h.JS_SetSecretKey(0,e.urlInfo.validateCode);e.jSPlugin.JS_Play(c,u,0).then((()=>{if(e.isStoping&&o({code:1,msg:"playing is stopping"}),1===e.videoPlayState||4===e.videoPlayState){var t;e.videoPlayState=2;const o=Date.now();null==(t=e._collect)||t.report(2,{logInfo:{domain:c,loadTime:o-e.videoInitTime,loadTimeDesc:{initTime:e._initTime,stopTime:n,getWsTime:r-i,createWsTime:o-r}},loadTime:o-e.videoInitTime,initTime:e._initTime,getWsTime:r-i,createWsTime:o-r})}e.jSPlugin&&e._FECSplitIds&&e._FECCorrectType&&e.jSPlugin.JS_FECCorrectType(e._FECCorrectType,e._FECSplitIds),e.waterMark_JSPlugin&&e.setWaterMarkFont(e.waterMark_JSPlugin),o({code:0,wss:c,wsParams:u})})).catch((t=>{var n,i;let r=null==(n=e.i18n)?void 0:n.t("PLAY_FAILED"),o=-1;if(null==(i=e.jSPlugin)?void 0:i.bPlay)return!1;var s,l,c;(null==t?void 0:t.errorCode)&&(null==(l=e.Theme)||null==(s=l.setDisabled)||s.call(l,!0),r=null==(c=e.i18n)?void 0:c.t("39"+t.errorCode),o=t.errorCode);e.isCall,a({msg:r,code:o})}))}}))}function wo(e,n,i=()=>{}){var r,o,a,s,l,c,d,u,p,h,m,A,f,v,g,y,T;e.playing=!0,e.loading=!0,null==(a=e.controls)||null==(o=a.zoomControl)||null==(r=o.setZoom)||r.call(o);const[_,b]=function(e,n,i,r){let o="",a=t.parseEzopenUrl(e);n.url&&/^ezopen:\/\//.test(n.url)&&(o=n.url,a=t.parseEzopenUrl(o));n.deviceSerial&&(a.deviceSerial=n.deviceSerial);n.channelNo&&(a.channelNo=n.channelNo);n.validCode&&(a.validateCode=n.validCode);n.host&&(a.hostname=n.host);const s=n.type||(a.recType?a.recType+"."+a.type:a.type);"live"===s?(a.type="live",!0===n.hd?a.definition="hd":!1===n.hd&&(a.definition="sd"),a.searchParams={},a.search=""):["rec","cloud.rec","miniRec"].includes(s)&&(a.recType="cloud.rec"===s?"cloud":"",a.type="rec",a.definition="",a.searchParams=a.searchParams||{},n.begin&&(a.searchParams.begin=n.begin),n.end&&(a.searchParams.end=n.end),"cloudRecord"===i&&"cloud"===a.recType&&(a.searchParams.busType="7",r&&(a.searchParams.spaceId=r)));return a.search=Object.entries(a.searchParams||{}).reduce(((e,[t,n])=>""===n?e:e+=`${t}=${encodeURIComponent(n)}&`),"?").replace(/&$/,""),o=`${a.protocol}//${a.validateCode?`${a.validateCode}@`:""}${a.hostname}/${a.deviceSerial}/${a.channelNo}${"rec"===a.type&&a.recType?"."+a.recType:""}${"live"===a.type&&"hd"===a.definition?"."+a.definition:""}.${a.type}${a.search}`,o=o.replace(/\?$/,""),a=t.parseEzopenUrl(o),[o,a]}(e.url,n,e.recType,e._spaceId);var C,S,E,w;((null==b?void 0:b.origin)===(null==(s=e.urlInfo)?void 0:s.origin)&&(null==b?void 0:b.pathname)===(null==(l=e.urlInfo)?void 0:l.pathname)&&Nr.formate((null==(c=b.searchParams)?void 0:c.begin)||new Date,"YYYYMMDD")===Nr.formate((null==(d=e.urlInfo.searchParams)?void 0:d.begin)||new Date,"YYYYMMDD")&&(null==(u=b.searchParams)?void 0:u.busType)===(null==(p=e.urlInfo.searchParams)?void 0:p.busType)&&(null==(h=b.searchParams)?void 0:h.spaceId)===(null==(m=e.urlInfo.searchParams)?void 0:m.spaceId)||e.emit(Mr.setAllDayRecTimes,{type:"",list:[]}),e.url=_,e.host=null==b?void 0:b.hostname,e.deviceSerial=b.deviceSerial,e.channelNo=b.channelNo,e.accessToken=n.accessToken||e.accessToken,e.token=n.token||e.token,null==(A=e._services)||A.updateOptions({accessToken:e.accessToken,token:e.token,channelNo:e.channelNo,deviceSerial:e.deviceSerial}),null==(f=e.controls)?void 0:f.ptzControl)&&(null==(S=e.controls)||null==(C=S.ptzControl)||C.updateOptions({accessToken:e.accessToken,token:e.token,channelNo:e.channelNo,deviceSerial:e.deviceSerial}));e.Talk&&(null==(w=e.Talk)||null==(E=w.updateOptions)||E.call(w,{accessToken:e.accessToken,token:e.token,channelNo:e.channelNo,deviceSerial:e.deviceSerial}));if(null==(v=e.controls)?void 0:v.dateControl){var k,P,D;const t=(null==(k=b.searchParams)?void 0:k.begin)||new Date;null==(D=e.controls)||null==(P=D.dateControl)||P.setDate(new Date(Nr.formate(t,"YYYY-MM-DD hh:mm:ss")),!1)}if(b.deviceSerial!==e.urlInfo.deviceSerial||b.hostname!==e.urlInfo.hostname?(e._deviceSerialChangeServices(),"live"===b.type&&_o(e)):b.channelNo!==e.urlInfo.channelNo&&(bo(e),"live"===b.type&&_o(e)),e.videoInitTime=Date.now(),e.videoPlayState=4,n.url)try{let t=JSON.parse(localStorage.getItem(Lr)||"{}");t[e.deviceSerial+"_"+e.channelNo]||(t=Co({},t,{[e.deviceSerial+"_"+e.channelNo]:[]}),localStorage.setItem(Lr,JSON.stringify(t)))}catch(e){}e.urlInfo=b;const L="cloud"===b.recType?"cloud.rec":b.type;null==(g=e._collect)||g.updateParams({protocol:"ezopen",url:_,serial:e.deviceSerial,no:e.channelNo,env:e.env.domain,type:L});let z=Object.assign({},e.params);return null==(y=e._collect)||y.report(4,{logInfo:{type:L,params:z}}),(null==(T=e.jSPlugin)?void 0:T.player)&&(e.jSPlugin.player.playbackRate=1,e.jSPlugin.player._playbackRate=1,e.speed=1),i(),new Promise(((t,i)=>{const r={url:_};return n.token&&(r.token=n.token),n.accessToken&&(r.accessToken=n.accessToken),e.play(r).then((()=>{var n;const i=["url","deviceSerial","channelNo","accessToken","token"].reduce(((t,n)=>(t[n]=e[n],t)),{});null==e.emit||e.emit.call(e,Mr.changePlayUrl,{eventType:Mr.changePlayUrl,code:0,data:i,msg:null==(n=e.i18n)?void 0:n.t("CHANGE_PLAYURL_SUCCESS")}),t(_)})).catch((e=>{i(e)}))}))}function ko(e,t){let n=-1;var i,r;if(t===e.speed)return null==(i=e.logger)||i.warn("the speed value has not changed!"),0;t&&(Or.includes(+t)?(e.jSPlugin.JS_Speed(t),n=1,e.speed=t):null==(r=e.logger)||r.warn("current speed is not supported!"));return n}function Po(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Do(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Po(o,i,r,a,s,"next",e)}function s(e){Po(o,i,r,a,s,"throw",e)}a(void 0)}))}}function Lo(){return Lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lo.apply(this,arguments)}function zo(){return zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zo.apply(this,arguments)}class xo{upload(){this.onBeforeUpload(this.body);const e={method:this.method,headers:this.headers,signal:this.controller.signal,body:this.body};fetch(this.url,e).then((e=>e.json())).then((e=>{this.onUploadComplete({body:this.body,response:e})})).catch((e=>{e.name})),e.body&&"FormData"==e.body.constructor.name&&"signal"in e&&e.signal.addEventListener("progress",(e=>{e.lengthComputable&&this.onUploadProgress(zo({},this.body,{progress:e.loaded/e.total}))}))}cancel(){this.controller.abort()}constructor(e){this.url=e.url||"",this.method=e.method||"POST",this.headers=e.headers||{},this.body=e.body||{},this.onBeforeUpload=e.onBeforeUpload||function(){},this.onUploadProgress=e.onUploadProgress||function(){},this.onUploadComplete=e.onUploadComplete||function(){},this.controller=new AbortController}}function Oo(e){var t,n,i;if(!e.use3DZoom)return null==e.emit||e.emit.call(e,Mr.enable3DZoom,{eventType:Mr.enable3DZoom,code:-1,msg:null==(t=e.i18n)?void 0:t.t("3D_ZOOM_DISABLE")}),e.emit("message",null==(n=e.i18n)?void 0:n.t("3D_ZOOM_DISABLE"),"3DZoomError"),Promise.resolve({code:-1,msg:null==(i=e.i18n)?void 0:i.t("3D_ZOOM_DISABLE")});if(e.is3DZooming)return new Promise((function(t){var n,i;null==e.emit||e.emit.call(e,Mr.enable3DZoom,{eventType:Mr.enable3DZoom,code:0,msg:null==(n=e.i18n)?void 0:n.t("3D_ZOOM_ACTIVED")}),t({code:0,msg:null==(i=e.i18n)?void 0:i.t("3D_ZOOM_ACTIVED")})}));if(e.support3DZoom){var r,o;e.is3DZooming=!0;let t=null==(r=e.jSPlugin)?void 0:r.JS_Enable3DZoom(0,(t=>{const n=e.width,i=e.height,r=function(e,t){if(!e||!e.startPos||!e.endPos)return-1;const n=e.startPos[0],i=e.startPos[1],r=e.endPos[0],o=e.endPos[1];return t?r>n&&o<i?1:r<n&&o>i?0:-1:r>n&&o>i?1:r<n&&o<i?0:-1}(t,e.isCurrentFullscreen);if(r>-1)try{const o=function(e,t,n,i=5){if(!(e&&t&&n&&n.startPos&&n.endPos))return-1;const r=n.startPos[0],o=n.startPos[1],a=n.endPos[0],s=n.endPos[1],l=Math.abs(a-r),c=Math.abs(s-o),d=parseInt((r+a)/2+""),u=parseInt((o+s)/2+""),p=Math.round(e*t/(l*c));return{startPointX:parseInt(r/e*256+""),startPointY:parseInt(o/t*256+""),endPointX:parseInt(a/e*256+""),endPointY:parseInt(s/t*256+""),zoomRate:p>i?i:p,targetCenterX:d,targetCenterY:u,targetWidth:l,targetHeight:c}}(n,i,t,e.capacity&&e.capacity.support_zoomOut_maxTime?e.capacity.support_zoomOut_maxTime:5);if(-1===o)return;const a=e.env.domain+`/api/v3/das/device/3d/zoom?accessToken=${e.accessToken||e.token.deviceToken.video}&deviceSerial=${e.urlInfo.deviceSerial}&channelNo=${e.urlInfo.channelNo}&command=${0==r?9:8}&zoomTimes=${o.zoomRate}&startPointX=${o.startPointX}&startPointY=${o.startPointY}&endPointX=${o.endPointX}&endPointY=${o.endPointY}&length=${parseInt(i)}&width=${parseInt(n)}&midPointX=${o.targetCenterX}&midPointY=${o.targetCenterY}&lengthX=${o.targetWidth}&lengthY=${o.targetHeight}`;fetch(a,{method:"POST"}).then((e=>e.json())).then((t=>{200!=t.code&&e.emit("message",t.msg,"3DZoomError")})).catch((t=>{var n;e.emit("message",null==(n=e.i18n)?void 0:n.t("3D_ZOOM_FAILED"),"3DZoomError")}))}catch(t){var o;e.emit("message",null==(o=e.i18n)?void 0:o.t("3D_ZOOM_FAILED"),"3DZoomError")}}));return null==e.emit||e.emit.call(e,Mr.enable3DZoom,{eventType:Mr.enable3DZoom,code:t,msg:null==(o=e.i18n)?void 0:o.t("START_3D_ZOOM")}),0===t?Promise.resolve({code:-1}):Promise.resolve({code:0})}return e.is3DZooming=!1,new Promise((function(t){null==e.emit||e.emit.call(e,Mr.enable3DZoom,{eventType:Mr.enable3DZoom,code:-1,msg:e.i18n.t("DEVICE_NOT_SUPPORT_3D_ZOOM")}),e.emit("message",e.i18n.t("DEVICE_NOT_SUPPORT_3D_ZOOM"),"3DZoomError"),t({code:-1,msg:e.i18n.t("DEVICE_NOT_SUPPORT_3D_ZOOM")})}))}function Io(e,t){var n,i,r,o,a,s,l,c,d;return!e._FECCorrectType||((null==(n=e.jSPlugin)?void 0:n.isHardH264)||(null==(i=e.jSPlugin)?void 0:i.isHardH265))&&(null==(r=e.jSPlugin)?void 0:r.useHardDev)?(null==e.emit||e.emit.call(e,Mr.getFEC3DViewParam,{eventType:Mr.getFEC3DViewParam,code:-1,msg:e.i18n.t("FEC.GET_FEC_PARAMS_SUPPORT_VERSION")}),Promise.resolve({code:-1,msg:e.i18n.t("FEC.GET_FEC_PARAMS_SUPPORT_VERSION")})):(null==(o=e.jSPlugin)?void 0:o.FEC_Set3DViewParam)&&e._FECCorrectType&&(3===(null==(a=e._FECCorrectType)?void 0:a.place)&&1536===(null==(s=e._FECCorrectType)?void 0:s.correctType)||1===(null==(l=e._FECCorrectType)?void 0:l.place)&&2304===(null==(c=e._FECCorrectType)?void 0:c.correctType))?null==(d=e.jSPlugin)?void 0:d.FEC_Get3DViewParam(t).then((t=>(null==e.emit||e.emit.call(e,Mr.getFEC3DViewParam,{eventType:Mr.getFEC3DViewParam,code:0,data:t,msg:e.i18n.t("FEC.SET_FEC_PARAMS")}),{code:0,data:t}))).catch((()=>(null==e.emit||e.emit.call(e,Mr.getFEC3DViewParam,{eventType:Mr.getFEC3DViewParam,code:-1}),{code:-1}))):(null==e.emit||e.emit.call(e,Mr.getFEC3DViewParam,{eventType:Mr.getFEC3DViewParam,code:-1,msg:e.i18n.t("FEC.SET_FEC_PARAMS_FAILED")}),Promise.resolve({code:-1,msg:e.i18n.t("FEC.SET_FEC_PARAMS_FAILED")}))}const Ro="[Ptz]";class Mo{static _instanceStyle(){if(Mo._STYLE)return;Mo._STYLE=document.createElement("style"),Mo._STYLE.id="ezuikit-ptz-style";const e=lr();Mo._STYLE.innerHTML=`\n    .ez-ptz-container {\n      position: relative;\n      width: 80px;\n      height: 80px;\n      background: rgba(255, 255, 255, 0.70);\n      box-shadow: 0px 0px 33px 4px rgb(0 0 0 / 15%);\n      border: 1px solid rgba(255, 255, 255, 0.70);\n      border-radius: 100%;\n      cursor: pointer;\n      overflow: hidden;\n      user-select: none;\n    }\n    .ez-ptz-container .ez-ptz-icon.top {\n      width: 0;\n      height: 0;\n      border-left: 4px solid transparent;\n      border-right: 4px solid transparent;\n      border-bottom: 8px solid #999999;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 4px);\n      top: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.top.active {\n      border-bottom-color: #407AFF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.bottom {\n      width: 0;\n      height: 0;\n      border-left: 4px solid transparent;\n      border-right: 4px solid transparent;\n      border-top: 8px solid #999999;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 4px);\n      bottom: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.bottom.active {\n      border-top-color: #407AFF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.right {\n      width: 0;\n      height: 0;\n      border-top: 4px solid transparent;\n      border-bottom: 4px solid transparent;\n      border-left: 8px solid #999999;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 4px);\n      right: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.right.active {\n      border-left-color: #407AFF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.left {\n      width: 0;\n      height: 0;\n      border-top: 4px solid transparent;\n      border-bottom: 4px solid transparent;\n      border-right: 8px solid #999999;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 4px);\n      left: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.left.active {\n      border-right-color: #407AFF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.top-left {\n      width: 4px;\n      height: 4px;\n      border-radius: 50%;\n      position: absolute;\n      display: inline-block;\n      top: calc(25% - 4px);\n      left: 16px;\n      background: #999999;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.top-left.active {\n      border-right-color: #407AFF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.left-bottom {\n      width: 4px;\n      height: 4px;\n      border-radius: 50%;\n      position: absolute;\n      display: inline-block;\n      bottom: calc(25% - 4px);\n      left: 16px;\n      background: #999999;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.left-bottom.active {\n      border-right-color: #407AFF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.bottom-right {\n      width: 4px;\n      height: 4px;\n      border-radius: 50%;\n      position: absolute;\n      display: inline-block;\n      bottom: calc(25% - 4px);\n      right: 16px;\n      background: #999999;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.bottom-right.active {\n      border-right-color: #407AFF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.right-top {\n      width: 4px;\n      height: 4px;\n      border-radius: 50%;\n      position: absolute;\n      display: inline-block;\n      top: calc(25% - 4px);\n      right: 16px;\n      background: #999999;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.right-top.active {\n      border-right-color: #407AFF;\n    }\n\n    .ez-ptz-container .ez-ptz-main.center {\n      width: 23px;\n      height: 23px;\n      background: #407AFF;\n      border-radius: 100%;\n      top: calc(50% - 12.4px);\n      left: calc(50% - 12.4px);\n      position: absolute;\n    }\n\n    .ez-ptz-wrap {\n      position: absolute;\n      right: 0px;\n      top: 0;\n      width: 85px;\n      height: 100%;\n      padding: 0 20px;\n      flex-direction: column;\n      justify-content: center;\n      background: rgba(0,0,0,0.9);\n      box-sizing: content-box !important;\n    }\n\n    .ez-ptz-close {\n      position: absolute;\n      color: #FFFFFF;\n      top: 0;\n      right: 0px;\n    }\n\n    .ez-ptzspeed-progress-line{\n      height: 1px;\n      background: #ffffff;\n      margin: 16px 0 8px;\n      display: flex;\n      justify-content: space-between;\n    }\n\n    .ez-ptzspeed-progress-line-dot{\n      width: 5px;\n      height: 5px;\n      border: 2px solid #ffffff;\n      border-radius: 50%;\n      background: #ffffff;\n      margin: -3px 0;\n      cursor: pointer;\n    }\n\n    .ez-ptzspeed-progress-line-dot.active{\n      border-color: #407AFF;\n    }\n\n    .ez-ptzspeed-progress-points{\n      display: flex;\n      justify-content: space-between;\n    }\n\n    .ez-ptzspeed-progress-points-slow{\n      cursor: pointer;\n      color: #ffffff;\n    }\n\n    .ez-ptzspeed-progress-points-mid{\n      cursor: pointer;\n      color: #ffffff;\n    }\n\n    .ez-ptzspeed-progress-points-fast{\n      cursor: pointer;\n      color: #ffffff;\n    }\n\n    .ez-ptzbtn-container{\n      width: 100%;\n      height:${e?"60px":"18px"};\n      margin-top: 14px;\n      display: ${e?"block":"flex"};\n    }\n\n    .ez-ptzbtn-focal,\n    .ez-ptzbtn-zoom{\n      width: ${e?"100%":"50%"};\n      height: 20px;\n      display: flex;\n      border: 1px solid rgba(255,255,255,0.5);\n      border-radius: 10px;\n      padding-bottom: 0px;\n      box-sizing: content-box;\n    }\n\n    .ez-ptzbtn-zoom-add,\n    .ez-ptzbtn-zoom-sub,\n    .ez-ptzbtn-focal-add,\n    .ez-ptzbtn-focal-sub{\n      width: ${e?"50%":"24px"};\n      height: 20px;\n      cursor: pointer;\n      text-align: center;\n    }\n\n    .ez-ptzbtn-zoom{\n      margin: ${e?"0 0 8px":"0 4px 0 0"};\n    }\n\n    .ez-ptzbtn-zoom-add{\n      border-right: 1px solid rgba(255,255,255,0.5);\n    }\n\n    .ez-ptzbtn-focal-add{\n      border-right: 1px solid rgba(255,255,255,0.5);\n    }\n    `,document.getElementsByTagName("head")[0].appendChild(Mo._STYLE)}destroy(){}show(){document.getElementById(`${this.jSPlugin.id}-ez-ptz-item`)&&(document.getElementById(`${this.jSPlugin.id}-ez-ptz-item`).style="display: flex;box-sizing: content-box;"),this.showPtz=!0,this.jSPlugin.eventEmitter&&this.jSPlugin.eventEmitter.emit(Mr.ptz.openPtz,{eventType:"openPtz",code:0,target:this,msg:""})}hide(){document.getElementById(`${this.jSPlugin.id}-ez-ptz-item`)&&(document.getElementById(`${this.jSPlugin.id}-ez-ptz-item`).style="display: none"),this.showPtz=!1,this.jSPlugin.eventEmitter&&this.jSPlugin.eventEmitter.emit(Mr.ptz.closePtz,{eventType:"closePtz",code:0,target:this,msg:""})}_handlePtzTouch(e,t){var n,i;this._ptzQueue||(this._ptzQueue=Promise.resolve());var r=document.getElementById(`${this.jSPlugin.id}-ez-ptz-container`).getBoundingClientRect(),o=r.left+41,a=r.top+41,s=e.x||e.changedTouches[0].clientX,l=e.y||e.changedTouches[0].clientY,c=0;let d=this.jSPlugin.env.domain+"/api/lapp/device/ptz/start",u=this.jSPlugin.accessToken||this.jSPlugin.token.deviceToken.video,p=0;function h(e,t){let n=Math.atan2(t,e);n<0&&(n+=2*Math.PI);let i=n*(180/Math.PI)-225-12.5;return i<0&&(i+=360),Math.floor(i/45)+1}const m=/^rotate\(90/.test(document.getElementById(`${this.jSPlugin.id}-wrap`).style.transform),A=s-o,f=l-a;if(m)switch(h(A,f)){case 1:c=2,p=90;break;case 2:c=4,p=135;break;case 3:c=0,p=180;break;case 4:c=6,p=225;break;case 5:c=3,p=270;break;case 6:c=7,p=315;break;case 7:c=1,p=0;break;case 8:c=5,p=45}else switch(h(A,f)){case 1:c=0,p=180;break;case 2:c=6,p=225;break;case 3:c=3,p=270;break;case 4:c=7,p=315;break;case 5:c=1,p=0;break;case 6:c=5,p=45;break;case 7:c=2,p=90;break;case 8:c=4,p=135}document.getElementById(`${this.jSPlugin.id}-ez-ptz-container`).style="start"===t?`background-image:linear-gradient(${p}deg, #4277FF 0%, rgba(100,143,252,0.00) 30%)`:"","stop"===t&&(d=this.jSPlugin.env.domain+"/api/lapp/device/ptz/stop",u=this.jSPlugin.accessToken||this.jSPlugin.token.deviceToken.video);var v=new FormData;v.append("deviceSerial",sr(this.jSPlugin.url).deviceSerial),v.append("channelNo",sr(this.jSPlugin.url).channelNo),v.append("speed",this.jSPlugin.ptzSpeed),v.append("direction",c),v.append("accessToken",u),this._ptzQueue=this._ptzQueue.then((()=>fetch(d,{method:"POST",body:v}).then((e=>e.json())).then((e=>{var n;const i=e.code||(null==e||null==(n=e.result)?void 0:n.code);if("start"===t&&200!=i){var r,o,a,s;const t=this.jSPlugin.i18n.t("38"+i)||e.msg;null==(r=this.pluginStatus)||r.loadingSetText({text:t,color:"red",delayClear:2e3}),null==(s=this.jSPlugin)||null==(a=s.logger)||a.error("[errors]",(null==(o=this.jSPlugin)?void 0:o.i18n.t("38"+i))+`(${i})`)}return[60002,60003,60004,60005,60006].indexOf(i)>-1&&(document.getElementById(`${this.jSPlugin.id}-ez-ptz-container`).style=`background-image:linear-gradient(${p}deg, #f45656 0%, rgba(100,143,252,0.00) 30%)`),e})).catch((e=>{})))),"stop"===t&&(this._ptzQueue=this._ptzQueue.finally((()=>{}))),null==(i=this.jSPlugin)||null==(n=i.eventEmitter)||n.emit(Mr.ptz.ptzDirection,{areaId:h(A,f),direction:c,backDeg:p,isRotate:m,ptzSpeed:this.jSPlugin.ptzSpeed,type:t})}_handleBtnTouch(e,t,n){var i,r,o,a;this._ptzOperation||(this._ptzOperation=Promise.resolve());let s=8;s="zoom"===e?"add"===t?8:9:"add"===t?10:11;let l=this.jSPlugin.env.domain+"/api/lapp/device/ptz/start",c=this.jSPlugin.accessToken||this.jSPlugin.token.deviceToken.video;"stop"===n&&(l=this.jSPlugin.env.domain+"/api/lapp/device/ptz/stop",c=this.jSPlugin.accessToken||this.jSPlugin.token.deviceToken.video),null==(r=this.jSPlugin)||null==(i=r.logger)||i.log(Ro,e,t,n),null==(a=this.jSPlugin)||null==(o=a.eventEmitter)||o.emit(Mr.ptz.ptzBtnClick,{btn:e,option:t,type:n});const d=new FormData;d.append("deviceSerial",sr(this.jSPlugin.url).deviceSerial),d.append("channelNo",sr(this.jSPlugin.url).channelNo),d.append("speed",this.jSPlugin.ptzSpeed),d.append("direction",s),d.append("accessToken",c),this._ptzOperation=this._ptzOperation.then((()=>fetch(l,{method:"POST",body:d}).then((e=>e.json())).then((t=>{var i;const r=t.code||(null==t||null==(i=t.result)?void 0:i.code);if("start"===n&&200!=r){var o,a;const n=6e4==r||60006==r?"zoom"===e?this.jSPlugin.i18n.t("NOT_SUPPORT_DEVICE_ZOOM"):this.jSPlugin.i18n.t("NOT_SUPPORT_FOCUS"):t.msg;this.pluginStatus.loadingSetText({text:n,color:"red",delayClear:2e3}),null==(a=this.jSPlugin)||null==(o=a.logger)||o.error("[errors]",n)}return t})).catch((e=>{})))),"stop"===n&&(this._ptzOperation=this._ptzOperation.finally((()=>{this._ptzOperation=null})))}constructor(e){var t;if(this.jSPlugin=e,null==(t=this.jSPlugin.logger)||t.log(Ro,"init"),this.pluginStatus=this.jSPlugin.pluginStatus,this.showPtz=!1,document.getElementById(this.jSPlugin.id+"-ez-ptz-item"))return!1;const n=document.createElement("div");n.id=this.jSPlugin.id+"-ez-ptz-item",n.className="ez-ptz-wrap",n.style="display:none;",Mo._instanceStyle(),n.innerHTML=`\n      <div class="ez-ptz-container" id="${this.jSPlugin.id}-ez-ptz-container" style="position: relative;width: 80px;height: 80px;background: rgba(255, 255, 255, 0.80);box-shadow: 0px 0px 33px 4px rgba(0, 0, 0, 0.15);border: 1px solid rgba(255, 255, 255, 0.80);border-radius: 100%;cursor: pointer;overflow: hidden;user-select: none;">\n        <div class="ez-ptz-main center"></div>\n        <div class="ez-ptz-icon top"></div>\n        <div class="ez-ptz-icon top-left"></div>\n        <div class="ez-ptz-icon left"></div>\n        <div class="ez-ptz-icon left-bottom"></div>\n        <div class="ez-ptz-icon bottom"></div>\n        <div class="ez-ptz-icon bottom-right"></div>\n        <div class="ez-ptz-icon right"></div>\n        <div class="ez-ptz-icon right-top"></div>\n      </div>\n      <div class="ez-ptzspeed-container" id="${this.jSPlugin.id}-ez-ptzspeed-container" style="user-select: none;">\n        <div class="ez-ptzspeed-progress" title="${this.jSPlugin.i18n.t("PTZ_SPEED")}">\n          <div class="ez-ptzspeed-progress-line">\n            <div class="ez-ptzspeed-progress-line-dot" id="${this.jSPlugin.id}-ptzspeed-slow-dot"></div>\n            <div class="ez-ptzspeed-progress-line-dot active" id="${this.jSPlugin.id}-ptzspeed-mid-dot"></div>\n            <div class="ez-ptzspeed-progress-line-dot" id="${this.jSPlugin.id}-ptzspeed-fast-dot"></div>\n          </div>\n          <div class="ez-ptzspeed-progress-points">\n            <div class="ez-ptzspeed-progress-points-slow" id="${this.jSPlugin.id}-ptzspeed-slow">\n            ${this.jSPlugin.i18n.t("PTZ_SLOW")}\n            </div>\n            <div class="ez-ptzspeed-progress-points-mid" id="${this.jSPlugin.id}-ptzspeed-mid">\n            ${this.jSPlugin.i18n.t("PTZ_MID")}\n            </div>\n            <div class="ez-ptzspeed-progress-points-fast" id="${this.jSPlugin.id}-ptzspeed-fast">\n              ${this.jSPlugin.i18n.t("PTZ_FAST")}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="ez-ptzbtn-container">\n        <div class="ez-ptzbtn-zoom" title="${this.jSPlugin.i18n.t("DEVICE_ZOOM")}" style="user-select: none;">\n          <div class="ez-ptzbtn-zoom-add" id="${this.jSPlugin.id}-ez-ptzbtn-zoom-add" style="user-select: none;">\n            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1705043060101" class="icon" viewBox="0 0 1088 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8152" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20"><path d="M563.2 198.4c179.2 0 326.4 147.2 326.4 326.4s-147.2 326.4-326.4 326.4S230.4 704 230.4 524.8s147.2-326.4 332.8-326.4z m0 64c-147.2 0-262.4 115.2-262.4 262.4s115.2 262.4 262.4 262.4 262.4-115.2 262.4-262.4S704 262.4 563.2 262.4z" p-id="8153" fill="#ffffff"></path><path d="M691.2 556.8H428.8c-19.2 0-32-12.8-32-32s12.8-32 32-32h262.4c19.2 0 32 12.8 32 32s-12.8 32-32 32z" p-id="8154" fill="#ffffff"></path><path d="M556.8 691.2c-19.2 0-32-12.8-32-32V396.8c0-19.2 12.8-32 32-32s32 12.8 32 32v262.4c0 19.2-12.8 32-32 32z" p-id="8155" fill="#ffffff"></path></svg>\n          </div>\n          <div class="ez-ptzbtn-zoom-sub" id="${this.jSPlugin.id}-ez-ptzbtn-zoom-sub" style="user-select: none;">\n            <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1705043081103" class="icon" viewBox="0 0 1088 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8395" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20"><path d="M569.6 838.4c-172.8 0-307.2-140.8-307.2-307.2s140.8-307.2 307.2-307.2 307.2 140.8 307.2 307.2-140.8 307.2-307.2 307.2z m0-64c134.4 0 249.6-108.8 249.6-249.6S704 281.6 569.6 281.6 320 396.8 320 531.2s108.8 243.2 249.6 243.2z" p-id="8396" fill="#ffffff"></path><path d="M691.2 563.2H448c-19.2 0-32-12.8-32-32s12.8-38.4 32-38.4h249.6c19.2 0 32 12.8 32 32s-19.2 38.4-38.4 38.4z" p-id="8397" fill="#ffffff"></path></svg>\n          </div>\n        </div>\n        <div class="ez-ptzbtn-focal" title="${this.jSPlugin.i18n.t("DEVICE_FOCUS")}" style="user-select: none;">\n          <div class="ez-ptzbtn-focal-add" id="${this.jSPlugin.id}-ez-ptzbtn-focal-add" style="user-select: none;">\n          <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1705048602135" class="icon" viewBox="0 0 1088 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5018" width="20" height="20" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M646.4 825.6H320c-44.8 0-83.2-38.4-83.2-83.2V409.6c0-44.8 38.4-83.2 83.2-83.2h326.4c44.8 0 83.2 38.4 83.2 83.2v326.4c0 51.2-38.4 89.6-83.2 89.6zM320 390.4c-12.8 0-19.2 6.4-19.2 19.2v326.4c0 12.8 6.4 19.2 19.2 19.2h326.4c12.8 0 19.2-6.4 19.2-19.2V409.6c0-12.8-6.4-19.2-19.2-19.2H320z" p-id="5019" fill="#ffffff"></path><path d="M396.8 358.4V281.6c0-25.6 25.6-51.2 51.2-51.2h326.4c25.6 0 51.2 25.6 51.2 51.2v326.4c0 25.6-25.6 51.2-51.2 51.2H704l-6.4-268.8" p-id="5020" fill="#ffffff"></path></svg>\n          </div>\n          <div class="ez-ptzbtn-focal-sub" id="${this.jSPlugin.id}-ez-ptzbtn-focal-sub" style="user-select: none;">\n          <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1705048615893" class="icon" viewBox="0 0 1088 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5352" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20"><path d="M320 358.4h326.4c25.6 0 51.2 25.6 51.2 51.2v326.4c0 25.6-25.6 51.2-51.2 51.2H320c-25.6 0-51.2-25.6-51.2-51.2V409.6c0-25.6 25.6-51.2 51.2-51.2z" p-id="5353" fill="#ffffff"></path><path d="M774.4 697.6H704c-19.2 0-32-12.8-32-32s12.8-32 32-32h70.4c12.8 0 19.2-6.4 19.2-19.2V281.6c0-12.8-6.4-19.2-19.2-19.2H448c-12.8 0-19.2 6.4-19.2 19.2v70.4c0 19.2-12.8 32-32 32s-32-12.8-32-25.6V281.6c0-44.8 38.4-83.2 83.2-83.2h326.4c44.8 0 83.2 38.4 83.2 83.2v326.4c0 51.2-38.4 89.6-83.2 89.6z" p-id="5354" fill="#ffffff"></path></svg>\n          </div>\n        </div>\n      </div>\n      `,document.getElementById(`${e.id}-wrap`).appendChild(n),document.getElementById(`${this.jSPlugin.id}-ez-ptz-container`).onmousedown=e=>{e.preventDefault(),e.stopPropagation(),this._handlePtzTouch(e,"start")},document.getElementById(`${this.jSPlugin.id}-ez-ptz-container`).onmouseup=e=>{e.preventDefault(),e.stopPropagation(),this._handlePtzTouch(e,"stop")},document.getElementById(`${this.jSPlugin.id}-ez-ptz-container`).ontouchstart=e=>{e.preventDefault(),e.stopPropagation(),this._handlePtzTouch(e,"start")},document.getElementById(`${this.jSPlugin.id}-ez-ptz-container`).ontouchend=e=>{e.preventDefault(),e.stopPropagation(),this._handlePtzTouch(e,"stop")},document.getElementById(`${this.jSPlugin.id}-ez-ptzspeed-container`).onmouseup=e=>{var t;e.target.id&&(e.target.id.indexOf("slow")>-1&&(this.jSPlugin.ptzSpeed=this.jSPlugin.ptzSpeedOptions?this.jSPlugin.ptzSpeedOptions.slow:1,document.getElementById(`${this.jSPlugin.id}-ptzspeed-slow-dot`).classList.add("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-mid-dot`).classList.remove("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-fast-dot`).classList.remove("active")),e.target.id.indexOf("mid")>-1&&(this.jSPlugin.ptzSpeed=this.jSPlugin.ptzSpeedOptions?this.jSPlugin.ptzSpeedOptions.mid:3,document.getElementById(`${this.jSPlugin.id}-ptzspeed-slow-dot`).classList.remove("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-mid-dot`).classList.add("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-fast-dot`).classList.remove("active")),e.target.id.indexOf("fast")>-1&&(this.jSPlugin.ptzSpeed=this.jSPlugin.ptzSpeedOptions?this.jSPlugin.ptzSpeedOptions.fast:7,document.getElementById(`${this.jSPlugin.id}-ptzspeed-slow-dot`).classList.remove("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-mid-dot`).classList.remove("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-fast-dot`).classList.add("active")),null==(t=this.jSPlugin)||t.eventEmitter.emit(Mr.ptz.ptzSpeedChange,this.jSPlugin.ptzSpeed))},document.getElementById(`${this.jSPlugin.id}-ez-ptzspeed-container`).ontouchend=e=>{var t,n;e.target.id&&(e.target.id.indexOf("slow")>-1&&(this.jSPlugin.ptzSpeed=this.jSPlugin.ptzSpeedOptions?this.jSPlugin.ptzSpeedOptions.slow:1,document.getElementById(`${this.jSPlugin.id}-ptzspeed-slow-dot`).classList.add("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-mid-dot`).classList.remove("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-fast-dot`).classList.remove("active")),e.target.id.indexOf("mid")>-1&&(this.jSPlugin.ptzSpeed=this.jSPlugin.ptzSpeedOptions?this.jSPlugin.ptzSpeedOptions.mid:3,document.getElementById(`${this.jSPlugin.id}-ptzspeed-slow-dot`).classList.remove("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-mid-dot`).classList.add("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-fast-dot`).classList.remove("active")),e.target.id.indexOf("fast")>-1&&(this.jSPlugin.ptzSpeed=this.jSPlugin.ptzSpeedOptions?this.jSPlugin.ptzSpeedOptions.fast:7,document.getElementById(`${this.jSPlugin.id}-ptzspeed-slow-dot`).classList.remove("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-mid-dot`).classList.remove("active"),document.getElementById(`${this.jSPlugin.id}-ptzspeed-fast-dot`).classList.add("active")),null==(n=this.jSPlugin)||null==(t=n.eventEmitter)||t.emit(Mr.ptz.ptzSpeedChange,this.jSPlugin.ptzSpeed))},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-zoom-add`).onmousedown=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("zoom","add","start")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-zoom-add`).onmouseup=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("zoom","add","stop")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-zoom-sub`).onmousedown=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("zoom","sub","start")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-zoom-sub`).onmouseup=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("zoom","sub","stop")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-focal-add`).onmousedown=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("focal","add","start")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-focal-add`).onmouseup=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("focal","add","stop")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-focal-sub`).onmousedown=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("focal","sub","start")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-focal-sub`).onmouseup=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("focal","sub","stop")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-zoom-add`).ontouchstart=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("zoom","add","start")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-zoom-add`).ontouchend=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("zoom","add","stop")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-zoom-sub`).ontouchstart=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("zoom","sub","start")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-zoom-sub`).ontouchend=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("zoom","sub","stop")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-focal-add`).ontouchstart=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("focal","add","start")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-focal-add`).ontouchend=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("focal","add","stop")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-focal-sub`).ontouchstart=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("focal","sub","start")},document.getElementById(`${this.jSPlugin.id}-ez-ptzbtn-focal-sub`).ontouchend=e=>{e.preventDefault(),e.stopPropagation(),this._handleBtnTouch("focal","sub","stop")}}}class No{static _instanceStyle(){if(No._STYLE)return;const e=document.documentElement.clientWidth/375||1;No._STYLE=document.createElement("style"),No._STYLE.innerHTML=`@keyframes slideContentUp {0%   {bottom: -${366*e}px;}\n      25%  {bottom: -${244*e}px;}\n      50%  {bottom: -${122*e}px;}\n      100% {bottom:0;}} .open-popup{animation:slideContentUp 0.3s 1 linear; -webkit-animation: slideContentUp 0.3s 1 linear;}`,document.getElementsByTagName("head")[0].appendChild(No._STYLE)}initPopupCustom(){document.getElementById(`${this.jSPlugin.id}-wrap-popup-custom`)?document.getElementById(`${this.jSPlugin.id}-wrap-popup-custom`).style.display="flex":this.randerPopup()}randerPopup(){const e=document.documentElement.clientWidth/375||1,t=document.getElementById(`${this.jSPlugin.id}-wrap`);var n=document.createElement("div");n.style="display:flex;",n.id=`${this.jSPlugin.id}-wrap-popup-custom`,n.innerHTML=`<div id="${this.jSPlugin.id}-wrap-popup-custom-mask" style="height:100%;width:100%;position:fixed;top:0;left:0;z-index:9998;background-color: rgba(0,0,0,0.75);overflow:hidden;">\n        </div>\n        <div id="${this.jSPlugin.id}-wrap-popup-board" class="open-popup" style="bottom:0;height: ${this.heightPop*e}px;position:fixed;left: 0; width: 100%;background-color:#ffffff;z-index: 9999;border-radius: 16px 16px 0px 0px;">\n            <div style="margin-top: ${20*e}px;padding: 0 ${15*e}px;width: 100%;display:flex;flex-direction: row;align-items: center;">\n                <div id="${this.jSPlugin.id}-popup-board-close">\n                    <svg width="${24*e}px" height="${24*e}px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>icon/close</title>\n                        <g id="icon/close" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <g id="common/Close/Dark">\n                                <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                                <path d="M18.1871843,5.81281566 C18.4556698,6.08130112 18.4780436,6.50270075 18.2543057,6.7966719 L18.1871843,6.87347584 L13.0611458,12.0001458 L18.1871843,17.1265242 C18.4800776,17.4194174 18.4800776,17.8942911 18.1871843,18.1871843 C17.9186989,18.4556698 17.4972993,18.4780436 17.2033281,18.2543057 L17.1265242,18.1871843 L12.0001458,13.0611458 L6.87347584,18.1871843 C6.58058262,18.4800776 6.10570888,18.4800776 5.81281566,18.1871843 C5.54433021,17.9186989 5.52195643,17.4972993 5.7456943,17.2033281 L5.81281566,17.1265242 L10.9391458,12.0001458 L5.81281566,6.87347584 C5.51992245,6.58058262 5.51992245,6.10570888 5.81281566,5.81281566 C6.08130112,5.54433021 6.50270075,5.52195643 6.7966719,5.7456943 L6.87347584,5.81281566 L12.0001458,10.9391458 L17.1265242,5.81281566 C17.4194174,5.51992245 17.8942911,5.51992245 18.1871843,5.81281566 Z" id="" fill="#2C2C2C" fill-rule="nonzero"></path>\n                            </g>\n                        </g>\n                    </svg>\n                </div>\n                <div id="popup-board-title-content" style="width: ${180*e}px;font-size: ${18*e}px;margin-left: ${59*e}px;font-family: PingFangSC-Medium;color: #2C2C2C;font-weight: 500;text-align: center;"></div>\n            </div>\n            <div id="${this.jSPlugin.id}-popup-board-content" style="width:100%;padding: 0 ${15*e}px;height: ${(this.heightPop-48)*e}px;box-sizing: border-box;display: flex;align-items: center;justify-content: center;flex-direction: column;"></div>\n        </div>\n        `,t.appendChild(n),document.getElementById(`${this.jSPlugin.id}-wrap-popup-custom-mask`).onclick=()=>{this.closePopupCustom()},document.getElementById(`${this.jSPlugin.id}-popup-board-close`).onclick=()=>{this.closePopupCustom()}}closePopupCustom(e=()=>{}){e();let t=document.getElementById(`${this.jSPlugin.id}-wrap`),n=document.getElementById(`${this.jSPlugin.id}-wrap-popup-custom`);t&&n&&t.removeChild(n)}initPopupContent(e,t){document.getElementById("popup-board-title-content").innerText=e||"",t&&document.getElementById(`${this.jSPlugin.id}-popup-board-content`).appendChild(t)}constructor(e,t){this.jSPlugin=e,this.heightPop=t||366,No._instanceStyle(),this.initPopupCustom()}}var $o=function(e){this.state={id:e.id,start:"00:00:00",end:"24:00:00",current:0,timelag:30,timeArr:[],availTimeLine:[],scrollTop:0,index:0,date:"",noTimeLineTxt:"",disabled:!1};var t=this;this.setState=function(e){Object.keys(e).forEach((function(n){t.state[n]=e[n],"scrollTop"===n&&document.getElementById("time-line-item")&&document.getElementById("time-line-item").parentNode.scrollTo(0,e[n]),"current"===n&&document.getElementById("time-line-current")&&(document.getElementById("time-line-current").innerHTML=e[n])}))},this.setDisabled=function(e){this.setState({disabled:e}),document.getElementById("time-line-item")&&(document.getElementById("time-line-item").parentNode.style.overflowY=e?"hidden":"scroll")},this.timeToSecond=function(e){const t=e.split(":");let n=Number(t[0]);const i=Number(t[1]),r=Number(t[2]);return 60*n*60+60*i+(r||0)},this.minuteToTime=function(e){let t=Math.floor(e/60),n=e%60;return(t>9?t:"0"+t)+":"+(n>9?n:"0"+n)},this.timeToMinute=function(e){const t=e.split(":");return 60*Number(t[0])+Number(t[1])},this.getPlayParam=e.getPlayParam,this.checkIsAppleDevice=function(){var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),n=e.indexOf("iPad")>-1,i=e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1;return!!(t||n||i)},this.checkIsHarmonyOS=function(){return navigator.userAgent.indexOf("ohos")>-1},this.checkIsHarmonyOS()?(document.getElementById("time-line-item")&&document.getElementById("time-line-item").parentNode.addEventListener("touchstart",(function(){if(t.state.disabled)return!1;e.ontouchstart()}),!1),document.getElementById("time-line-item")&&document.getElementById("time-line-item").parentNode.addEventListener("touchmove",(function(){if(t.state.disabled)return!1;e.ontouchmove()}),!1),document.getElementById("time-line-item")&&document.getElementById("time-line-item").parentNode.addEventListener("touchend",(function(){if(t.state.disabled)return!1;var n;new Promise((function(e,t){let i=-1;n=setInterval((()=>{var t,r;let o=null==(r=document.getElementById("time-line-item"))||null==(t=r.parentNode)?void 0:t.scrollTop;o!==i?i=o:(clearInterval(n),e(o))}),100)})).then((e=>{t.rectTopTotime(e),t.getPlayParam({current:t.state.current})})),e.ontouchend()}),!1)):(document.getElementById("time-line-item")&&(document.getElementById("time-line-item").parentNode.ontouchstart=function(){if(t.state.disabled)return!1;e.ontouchstart()}),document.getElementById("time-line-item")&&(document.getElementById("time-line-item").parentNode.ontouchmove=function(){if(t.state.disabled)return!1;e.ontouchmove()}),document.getElementById("time-line-item")&&(document.getElementById("time-line-item").parentNode.ontouchend=function(){if(t.state.disabled)return!1;var n;new Promise((function(e,t){let i=-1;n=setInterval((()=>{var t,r;let o=null==(r=document.getElementById("time-line-item"))||null==(t=r.parentNode)?void 0:t.scrollTop;o!==i?i=o:(clearInterval(n),e(o))}),100)})).then((e=>{t.rectTopTotime(e),t.getPlayParam({current:t.state.current})})),e.ontouchend()})),this.matchTimeDot()};$o.prototype.changeScale=function(e){this.setState({timelag:e}),this.matchTimeDot()},$o.prototype.setDateLine=function(e,t){if(e.length>0){void 0===t&&(t=e.length-1);const{current:n}=this.state;this.setState({availTimeLine:e,start:e[t].st,end:e[t].et,current:0===n?e[t].st:n}),this.matchRecTimeDot(),this.primaryOffsetH()}else this.setState({availTimeLine:[]}),this.matchRecTimeDot()},$o.prototype.matchTimeDot=function(){const{start:e,end:t,timelag:n,availTimeLine:i}=this.state;var r=[];let o=this.timeToMinute(t);o=Math.floor(o/n)*n;for(let e=o;e>=0;){let t=0,i=0,a=[];e==o&&(t=70),0==e&&(i=230);let s=this.minuteToTime(e);r.push({id:e,current:s,label:"a"+e,marginTop:t,marginBottom:i,recArr:a}),e-=n}this.setState({timeArr:r}),this.renderDateLine()},$o.prototype.matchRecTimeDot=function(){const{start:e,end:t,timelag:n,availTimeLine:i,timeArr:r}=this.state;let o=i.length;if(0===o)for(var a=0;a<r.length;a++)r[a].recArr=[];else{for(var s=0;s<r.length;s++)r[s].recArr=[];for(let e=0;e<o;e++){const t=i[e];let o,s,d=this.timeToSecond(t.st),u=this.timeToSecond(t.et),p=0,h=0;o=Math.floor(d/(60*n))*n,p=(d-60*o)/n,s=Math.floor(u/(60*n))*n,h=(u-60*s)/n;for(a=0;a<r.length;a++)if(r[a].id==o&&r[a].id==s){var l=h-p,c=60-h;r[a].recArr.push({height:l,top:c})}else r[a].id==o?r[a].recArr.push({height:60-p,top:0}):r[a].id==s?r[a].recArr.push({height:h,top:60-h}):r[a].id>o&&r[a].id<s&&r[a].recArr.push({height:60,top:0})}}this.setState({timeArr:r}),this.renderDateLine()},$o.prototype.renderDateLine=function(){const{id:e,timeArr:t}=this.state;var n=document.getElementById("time-line-item");n.innerHTML="",t.forEach(((e,t)=>{var i=document.createElement("div");i.setAttribute("class","time-item"),i.style=`margin-top: ${e.marginTop}px; margin-bottom: ${e.marginBottom}px; border-right-color: ${e.borderColor};`,document.createElement("div").setAttribute("class","scale");var r='<div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale" style="width:10px"></div>';e.recArr.forEach(((e,t)=>{r+=`<div class="item-unavail" style="height: ${e.height}px;background-color:#A8B9ED; top: ${e.top}px"></div>`})),r+=`<div id=${e.label} style="position: relative; top: 51px; left: 40%"> ${e.current}</div>`,i.innerHTML=r,n.appendChild(i)}))},$o.prototype.primaryOffsetH=function(){const{start:e,timelag:t,timeArr:n,current:i}=this.state,r=n[0].current,o=this.timeToSecond(r)-this.timeToSecond(0===i?e:i),a=Math.ceil(o/t)+60;this.setState({scrollTop:a})},$o.prototype.currentOffsetH=function(){const{current:e,timelag:t,timeArr:n}=this.state,i=n[0].current,r=this.timeToSecond(i)-this.timeToSecond(e),o=Math.ceil(r/t)+60;this.setState({scrollTop:o})},$o.prototype.rectTopTotime=function(e){let t,n,{timelag:i}=this.state,r=Math.floor(e/60),o=e-60*r;if(0==o)t=this.state.timeArr[r-1].current,n=0;else{const e=this.state.timeArr[r].current;let a=this.timeToMinute(e);const s=(60-o)*i,l=Math.floor(s/60)+a,c=60*Math.floor(s/60);n=Math.ceil(s-c),t=this.minuteToTime(l)}this.setState({current:t+":"+(n>9?n:"0"+n),scrollTop:e})},$o.prototype.stepScrollTimeLine=function(e){this.setState({current:e}),this.currentOffsetH()},$o.prototype.secondCountDown=function(e){const{current:t}=this.state,n=t.split(":");let i=60*Number(n[0])*60+60*Number(n[1])+Number(n[2])+1,r=Math.floor(i/3600),o=Math.floor((i-3600*r)/60),a=i-3600*r-60*o;this.setState({current:(r>9?r:"0"+r)+":"+(o>9?o:"0"+o)+":"+(a>9?a:"0"+a)})};const Fo=$o;function jo(e){10===(e+"").length&&(e*=1e3);var t=new Date(e),n=t.getHours(),i=t.getMinutes(),r=t.getSeconds();return(n>9?n:"0"+n)+":"+(i>9?i:"0"+i)+":"+(r>9?r:"0"+r)}Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};class Uo{static _instanceStyle(){Uo._STYLE||(Uo._STYLE=document.createElement("style"),Uo._STYLE.id="ezuikit-mobile-rec-style",Uo._STYLE.innerHTML='\n    body{\n      padding: 0;\n      margin: 0;\n    }\n    .time-line-container {\n      text-align: left;\n      height: 300px;\n      /* outline: 1px solid red; */\n      /* background: gray; */\n      position: relative;\n      /* padding-top: 60px; */\n      margin-top: 20px;\n    }\n\n    .time-line-container .time-line-item-container {\n      display: inline-block;\n      /* height: 400px; */\n      width: 30%;\n      /* background: indianred; */\n      overflow-y: scroll;\n      overflow-x: hidden;\n      /* padding-top: 60px; */\n      height: 300px;\n      box-sizing: border-box;\n      white-space: nowrap;\n      position: relative;\n    }\n\n    .time-line-container .time-line-item-container::-webkit-scrollbar {\n      width: 0px;\n      /**/\n      height: 0px;\n      /**/\n    }\n\n    .time-line-item .time-item {\n      position: relative;\n      box-sizing: border-box;\n      height: 60px;\n      font-size: 12px;\n      color: rgb(150, 150, 150);\n      border-right: 6px solid;\n      border-right-color: #ddd;\n    }\n\n    .time-line-item .time-item .scale {\n      width: 6px;\n      height: 9px;\n      border-bottom: 1px solid #ccc;\n      float: right;\n      clear: both;\n    }\n\n    .time-line-item .time-item .item-unavail {\n      width: 6px;\n      position: absolute;\n      left: 100%;\n      background-color: #ddd;\n    }\n\n    .time-line-container .current-time {\n      position: absolute;\n      left: 0;\n      top: 40px;\n      height: 29px;\n      /* line-height: 58px; */\n      border-bottom: 1px solid #648FFC;\n      width: 60%;\n      margin-left: 26%;\n    }\n\n    .time-line-container .current-time .current-time-bg {\n      position: relative;\n      top: 15px;\n      width: 100px;\n      height: 29px;\n      line-height: 29px;\n      left: -70px;\n      font-size: 12px;\n      color: #2C2C2C;\n    }\n\n    .time-line-container .current-time .current-time-bg::before {\n      content: \'\';\n      display: inline-block;\n      width: 6px;\n      height: 6px;\n      border-radius: 100%;\n      background: #648FFC;\n      top: 11px;\n      position: absolute;\n      right: 30px;\n    }\n\n    .date-switch-container {\n      height: 40px;\n      position: relative;\n      text-align: center;\n      margin: 20px 10px;\n    }\n\n    .date-switch-container .current-date {\n      line-height: 40px;\n      height: 22px;\n      font-size: 16px;\n      color: #2C2C2C;\n      text-align: center;\n      font-weight: bold;\n    }\n\n    .date-container {\n      width: 40px;\n      height: 40px;\n      position: absolute;\n      right: 0;\n      top: 0;\n    }\n\n    .rec-type-container {\n      display: flex;\n      justify-content: space-between;\n    }\n\n    .rec-type-container .rec-type-text {\n      padding: 0 15px;\n      font-size: 12px;\n      color: #2C2C2C;\n    }\n\n    .rec-type-container .rec-type-switch {\n      padding: 0 20px;\n    }\n\n    .date-container input {\n      position: absolute;\n      opacity: 0;\n      display: inline-block;\n      width: 40px;\n      height: 40px;\n      z-index: 10;\n      left: 0;\n    }\n\n    .date-container label {\n      position: absolute;\n      left: 0;\n      top: 0;\n      /* display: none; */\n      z-index: 0;\n    }\n\n    .date-icon {\n      display: inline-block;\n      width: 40px;\n      height: 40px;\n      background: url(\'https://resource.eziot.com/group2/M00/00/6A/CtwQF2F6VieAQrU9AAABP-_Nsqo949.png\') no-repeat 100% 100%;\n    }\n    .select-container {\n      padding: 10px;\n      display: flex;\n      justify-content: space-between;\n    }\n\n    .advice {\n      height: 24px;\n      width: 70px;\n      display: flex;\n      justify-content: space-between;\n      line-height: 24px;\n      background: #F8F8F8;\n      border-radius: 8px;\n    }\n\n    .advice span {\n      width: 40px;\n      display: inline-block;\n    }\n\n    input[type="checkbox"]:not(:checked)+.advice span:first-child {\n      box-shadow: 0px 2px 5px 0px rgb(23 45 101 / 20%);\n      border-radius: 8px;\n      text-align: center;\n\n    }\n\n    input[type="checkbox"]:checked+.advice span:last-child {\n      box-shadow: 0px 2px 5px 0px rgb(23 45 101 / 20%);\n      border-radius: 8px;\n      text-align: center;\n    }\n\n    input[type="checkbox"]:not(:checked)+.advice span:first-child svg {\n      fill: #648FFC !important;\n    }\n\n    input[type="checkbox"]:checked+.advice span:last-child svg {\n      fill: #648FFC !important;\n    }',document.getElementsByTagName("head")[0].appendChild(Uo._STYLE))}recInit(){this.createDom(),this.initTimeLine(),this.injectJsCss(this.jSPlugin),this.syncTimeLine(),this.bindEvent()}injectJsCss(e){this.unInjectJsCss();const t=this,n=document.getElementById(`${e.id}-wrap`);((e,t)=>{try{if(document.querySelector(`link[href="${e}"]`))return}catch(e){}for(var n=document.getElementsByTagName("head")[0].getElementsByTagName("link"),i=!1,r=0;r<n.length;r++)n[r].getAttribute("href")==e&&(i=!0);if(!i){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=e,o.onload=t,document.getElementsByTagName("head")[0].appendChild(o)}})(`${e.staticPath}/rec/datepicker.min.css`),ir(`${e.staticPath}/rec/jquery.min.js`,(e=>{ir(`${e.staticPath}/rec/datepicker.js`,(e=>{ir(`${e.staticPath}/rec/datepicker.${t.datepickerLang[e.language]}.js`,(e=>{let i=n.getElementsByClassName("datepicker-container")[0];!i&&$(`#${e.id}-datepicker`).datepicker&&$(`#${e.id}-datepicker`).datepicker({autoShow:!1,autoHide:!0,autoPick:!0,language:t.datepickerLang[e.language],date:new Date(or("begin",e.params.url).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"))||new Date,format:"yyyy-mm-dd",endDate:new Date,inline:!0,container:n}),i=n.getElementsByClassName("datepicker-container")[0],i&&(i.style.display="none",i.style.bottom="-314px",i.style.right="0px"),t.datepickerVisible=!1,$(`#${e.id}-datepicker`).on("pick.datepicker",(n=>{let r={begin:new Date(n.date).Format("yyyyMMddhhmmss")};if(t.begin=n.date,t.end=new Date(n.date).Format("yyyy-MM-dd")+" 23:59:59",n.date>new Date||new Date(n.date).Format("yyyyMMdd")===new Date(document.getElementById(`${e.id}-datepicker`).getAttribute("data-value")).Format("yyyyMMdd"))n.preventDefault();else{const i=new Date(n.date).Format("yyyy/MM/dd");document.getElementById(`${e.id}-datepicker`)&&document.getElementById(`${e.id}-datepicker`).setAttribute("data-value",i),t.date=i,e.eventEmitter.emit(Mr.date.recStartTimeChange,{code:0,data:{time:i}}),e.Theme.decoderState&&e.Theme.decoderState.state&&(e.Theme.decoderState.state.cloudRec?r={begin:new Date(n.date).Format("yyyyMMddhhmmss"),type:"cloud.rec"}:e.Theme.decoderState.state.rec&&(r={begin:new Date(n.date).Format("yyyyMMddhhmmss"),type:"rec"}))}e.changePlayUrl(r,(()=>{}),!1).then((()=>{setTimeout((()=>{const e=document.getElementById("date");e&&(e.value=new Date(n.date).Format("yyyy-MM-dd"))}),0),t.jSPlugin.Theme.decoderState.state.sound&&t.jSPlugin.openSound(),t.syncTimeLine()})),t.changeRecSpeed(1),t.resetMobileZoomStatus(),i&&(i.style.display="none"),t.datepickerVisible=!1})),$(`#${e.id}-datepicker`).off("click").on("click",(n=>{var r,o;t.datepickerVisible?i&&(i.style.display="none",null==e||null==(r=e.eventEmitter)||r.emit(Mr.date.closeDatePanel)):i&&(i.style.display="inline",null==e||null==(o=e.eventEmitter)||o.emit(Mr.date.openDatePanel));t.datepickerVisible=!t.datepickerVisible})),document.getElementById("date-picker")&&document.getElementById("date-picker").addEventListener("focus",(function(e){e.target.blur()}))}),(()=>{}),e)}),(()=>{}),e)}),(()=>{}),e)}createDom(){const e=document.createElement("div");e.id="date-switch-container-wrap",e.className="date-switch-container-wrap",e.style="",e.innerHTML=`\n      <div class="date-switch-container">\n      <div class="current-date" id="current-date">${this.jSPlugin.i18n.t("RECORD_TIPS")}</div>\n      <div class="date-container">\n        <label for="date" style="width: 40px;height: 40px;">\n          <div class="date-icon"></div>\n        </label>\n        <div autocomplete="off" data-toggle="${this.jSPlugin.id}-datepicker" id="${this.jSPlugin.id}-datepicker" name="${this.jSPlugin.id}-datepicker" data-value="${this.date.replace(/\//g,"-")||(new Date).Format("yyyy-MM-dd")}" style="opacity:0;width:32px;height:34px;cursor:pointer;"> </div>\n      </div>\n    </div>\n        `,ar(e,document.getElementById(`${this.jSPlugin.id}-wrap`));const t=document.createElement("div");t.id="rec-type-container-wrap",t.className="rec-type-container-wrap",t.style="",t.innerHTML=`\n    <div class="rec-type-container">\n    <div class="rec-type-text"><span id="recCount">${this.recList.length}</span>${this.jSPlugin.i18n.t("RECORDS")}</div>\n    <div class="rec-type-switch">\n      <label>\n        <input type="checkbox" name="type" id="cloudType" value="1" hidden />\n        <label for="cloudType" class="advice">\n          <span>\n           ${this.jSPlugin._isCloudRecord?'<svg width="20.000000" height="20.000000" viewBox="0 0 20 20" fill="#CCCCCC" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n             <path d="M14.87 7.7L16.96 6.71C17.64 6.39 18.45 6.69 18.76 7.38C18.85 7.56 18.89 7.76 18.89 7.96L18.89 12.03C18.89 12.79 18.28 13.4 17.53 13.4C17.31 13.4 17.08 13.35 16.88 13.24L14.87 12.13L14.87 7.7Z" fill="#648FFC" fill-opacity="1.000000" fill-rule="evenodd" />\n             <path d="M14.87 7.7L16.96 6.71C17.64 6.39 18.45 6.69 18.76 7.38C18.85 7.56 18.89 7.76 18.89 7.96L18.89 12.03C18.89 12.79 18.28 13.4 17.53 13.4C17.31 13.4 17.08 13.35 16.88 13.24L14.87 12.13" stroke="#2C2C2C" stroke-opacity="0" stroke-width="1.250000" />\n             <mask id="mask_1435_272" fill="white">\n               <path d="M15.2407 6.22559C15.2407 5.08887 14.3291 4.16699 13.2046 4.16699L3.70264 4.16699C2.57812 4.16699 1.6665 5.08887 1.6665 6.22559L1.6665 13.7749C1.6665 14.9121 2.57812 15.8335 3.70264 15.8335L13.2046 15.8335C14.3291 15.8335 15.2407 14.9121 15.2407 13.7749L15.2407 6.22559ZM7.39282 7.53711C7.39282 7.19189 7.08911 6.91211 6.71411 6.91211L5.35669 6.91211L5.27759 6.91602C4.93994 6.95215 4.67798 7.21631 4.67798 7.53711C4.67798 7.88232 4.98193 8.16211 5.35669 8.16211L6.71411 8.16211L6.79321 8.15771C7.13086 8.12158 7.39282 7.85742 7.39282 7.53711Z" clip-rule="evenodd" fill="" fill-opacity="1.000000" fill-rule="evenodd" />\n             </mask>\n             <path d="M15.2407 6.22559C15.2407 5.08887 14.3291 4.16699 13.2046 4.16699L3.70264 4.16699C2.57812 4.16699 1.6665 5.08887 1.6665 6.22559L1.6665 13.7749C1.6665 14.9121 2.57812 15.8335 3.70264 15.8335L13.2046 15.8335C14.3291 15.8335 15.2407 14.9121 15.2407 13.7749L15.2407 6.22559ZM7.39282 7.53711C7.39282 7.19189 7.08911 6.91211 6.71411 6.91211L5.35669 6.91211L5.27759 6.91602C4.93994 6.95215 4.67798 7.21631 4.67798 7.53711C4.67798 7.88232 4.98193 8.16211 5.35669 8.16211L6.71411 8.16211L6.79321 8.15771C7.13086 8.12158 7.39282 7.85742 7.39282 7.53711Z" clip-rule="evenodd" fill="" fill-opacity="1.000000" fill-rule="evenodd" mask="url(#mask_1435_272)" />\n             <path d="" fill="" fill-opacity="0.000000" fill-rule="nonzero" />\n           </svg>':'<svg fill="#CCCCCC" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="2 0 20 20">\n            <path d="M12.6,5c-2.3,0.1-4.3,1.4-5.3,3.3L7.2,8.6c-2.4,0.5-4.1,2.5-4.1,4.9c0,2.8,2.4,5,5.2,5h9.9\n            c2.4,0,4.3-1.9,4.3-4.2l0-0.2c-0.1-2-1.6-3.5-3.5-3.9l-0.1,0l0-0.2c-0.4-2.8-3-5-6.1-5L12.6,5z"/>\n             </svg>'}\n        </span>\n        <span>\n          <svg fill="#CCCCCC" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="2 0 20 20">\n            <path d="M14.3,4c0.6,0,1.2,0.2,1.7,0.7l0,0L18.3,7C18.7,7.4,19,8,19,8.6l0,0v9c0,1.3-1.1,2.3-2.4,2.3\n\tl0,0H8.4C7.1,20,6,19,6,17.7l0,0V6.3C6,5,7.1,4,8.4,4l0,0H14.3z M9.7,7.2C9.3,7.2,8.9,7.6,8.9,8l0,0v2.5l0,0.1\n\tc0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C10.4,7.5,10,7.2,9.7,7.2z M12.2,7.2c-0.4,0-0.8,0.3-0.8,0.8l0,0v2.5\n\tl0,0.1c0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C12.9,7.5,12.5,7.2,12.2,7.2z M14.7,7.2c-0.4,0-0.8,0.3-0.8,0.8l0,0\n\tv2.5l0,0.1c0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C15.4,7.5,15,7.2,14.7,7.2z"/>\n          </svg>\n        </span>\n        </label>\n      </label>\n    </div>\n  </div>\n        `,ar(t,e);const n=document.createElement("div");n.id="mobile-rec-wrap",n.className="mobileRec-wrap",n.style="",n.innerHTML='\n    <div class="time-line-container">\n    <div class="current-time">\n      <div class="current-time-bg" id="time-line-current">00:00:00</div>\n    </div>\n    <div class="time-line-item-container">\n      <div class="time-line-item" id="time-line-item">\n      </div>\n    </div>\n    </div>\n      ',ar(n,t)}initTimeLine(){var e,t,n;null==(t=this.jSPlugin)||null==(e=t.logger)||e.log("[TimeLine] init"),this.TimeLineOBJ=new Fo({id:"time-line-item",getPlayParam:e=>{const t=this;var n=e.current,i=new Date(this.date).Format("yyyyMMdd").substr(0,8)+(e.current?n.replace(/:/g,""):e.current.replace(/:/g,""));if("cloud.rec"===this.type||this.jSPlugin.useSeek&&this.jSPlugin.capacity&&"1"==this.jSPlugin.capacity.support_seek_playback){if(!this.isSeeking&&t.recList.length>0)if(new Date(`${this.date} ${e.current}`).valueOf()>=t.lastDate)this.jSPlugin.pluginStatus.loadingSetText({text:"seek",color:"red",delayClear:2e3}),this.syncTimeLine();else{const{play:e}=this.jSPlugin.Theme.decoderState.state;e?this.unSyncTimeLine().then((()=>{this.isSeeking=!0,this.jSPlugin.pluginStatus.loadingStart(this.jSPlugin.id),this.jSPlugin.pluginStatus.setPlayStatus({loading:!0}),this.jSPlugin.pluginStatus.loadingSetText({text:this.jSPlugin.i18n.t("LOADING")}),this.jSPlugin.Theme.setDisabled(!0),this.jSPlugin.seek(i.substr(8,6),"235959").then((()=>{const e=setInterval((()=>{this.jSPlugin.getOSDTime().then((n=>{new Date(1e3*n.data).Format("yyyyMMddhhmmss")>=i&&(this.isSeeking=!1,this.syncTimeLine(),clearInterval(e),this.jSPlugin.pluginStatus.loadingStop(this.jSPlugin.id),this.jSPlugin.pluginStatus.setPlayStatus({loading:!1}),this.jSPlugin.pluginStatus.loadingClear(),this.jSPlugin.Theme.setDisabled(!1),this.jSPlugin.waterMark_JSPlugin&&t.jSPlugin.setWaterMarkFont(t.jSPlugin.waterMark_JSPlugin),t.jSPlugin.Theme.decoderState.state.sound&&t.jSPlugin.openSound())}))}),500)}))})):this.unSyncTimeLine().then((()=>{this.jSPlugin.pluginStatus.loadingStart(this.jSPlugin.id),this.jSPlugin.pluginStatus.setPlayStatus({loading:!0}),this.jSPlugin.pluginStatus.loadingSetText({text:this.jSPlugin.i18n.t("LOADING")}),this.jSPlugin.Theme.setDisabled(!0);let e=this.jSPlugin.url;e.indexOf("begin")>-1?e=e.replace(/(begin=)(\d+)/,(function(e,t,n){return t+i})):e+=`?begin=${i}`,this.jSPlugin.play({url:e}).then((()=>{this.syncTimeLine(),this.jSPlugin.pluginStatus.loadingStop(this.jSPlugin.id),this.jSPlugin.pluginStatus.setPlayStatus({loading:!1}),this.jSPlugin.pluginStatus.loadingClear(),this.jSPlugin.Theme.setDisabled(!1),t.jSPlugin.waterMark_JSPlugin&&t.jSPlugin.setWaterMarkFont(t.jSPlugin.waterMark_JSPlugin)})).catch((e=>{}))}))}}else{const e=()=>{setTimeout((()=>{this.disabled=!1}),this.seekFrequency)},n=e=>{this.disabled=!0,this.unSyncTimeLine().then((()=>{this.jSPlugin.pluginStatus.loadingStart(this.jSPlugin.id),this.jSPlugin.pluginStatus.setPlayStatus({loading:!0}),this.jSPlugin.pluginStatus.loadingSetText({text:this.jSPlugin.i18n.t("LOADING")}),this.jSPlugin.Theme.setDisabled(!0);let n=this.jSPlugin.url;n.indexOf("begin")>-1?n=n.replace(/(begin=)(\d+)/,(function(e,t,n){return t+i})):n+=`?begin=${i}`,this.jSPlugin.play({url:n,unSaveUrl:!0,showPoster:!0}).then((()=>{e&&e(),this.syncTimeLine(),this.jSPlugin.pluginStatus.loadingStop(this.jSPlugin.id),this.jSPlugin.pluginStatus.setPlayStatus({loading:!1}),this.jSPlugin.pluginStatus.loadingClear(),this.jSPlugin.Theme.setDisabled(!1),t.jSPlugin.waterMark_JSPlugin&&t.jSPlugin.setWaterMarkFont(t.jSPlugin.waterMark_JSPlugin),this.jSPlugin.Theme.decoderState.state.sound&&this.jSPlugin.openSound()})).catch((e=>{}))})),this.jSPlugin.Theme&&this.jSPlugin.Theme.decoderState&&this.jSPlugin.Theme.decoderState.state&&this.jSPlugin.Theme.decoderState.state.zoom&&(this.jSPlugin.Theme.setDecoderState({zoom:!1}),this.jSPlugin.Zoom.stopZoom())};this.disabled?(this.seekTimer&&clearTimeout(this.seekTimer),this.seekTimer=setTimeout((()=>{n(e)}),this.seekFrequency)):n(e)}},ontouchstart:()=>{this.operating=!0,this.unSyncTimeLine()},ontouchmove:()=>{0==this.operating&&(this.operating=!0,this.unSyncTimeLine())},ontouchend:()=>{this.operating=!1}}),this.TimeLineOBJ.setDateLine(this.recList),null==(n=this.jSPlugin)||n.eventEmitter.on(Mr.setAllDayRecTimes,(e=>{if(Array.isArray(e.list)){const t=e.list.length;document.getElementById("recCount")&&(document.getElementById("recCount").innerHTML=t);let n=[];for(let i=t-1;i>=0;i--){let t=e.list[i],r=jo(t.endTime),o=jo(t.startTime);n.push({st:o,et:r})}this.TimeLineOBJ.setDateLine(n),e.list.length>0&&(this.recList=n,this.lastDate=1e3*e.list[e.list.length-1].endTime)}}))}unInjectJsCss(){Ao.listInstances().length<=1&&((e=>{for(var t=document.getElementsByTagName("head")[0].getElementsByTagName("link"),n=0;n<t.length;n++)if(t[n].getAttribute("href")==e)return void document.getElementsByTagName("head")[0].removeChild(t[n])})(`${this.jSPlugin.staticPath}/rec/datepicker.min.css`),rr(`${this.jSPlugin.staticPath}/rec/jquery.min.js`),rr(`${this.jSPlugin.staticPath}/rec/datepicker.js`),rr(`${this.jSPlugin.staticPath}/rec/datepicker.${this.datepickerLang[this.jSPlugin.language]}.js`))}destroy(){var e,t;null==(t=this.jSPlugin)||null==(e=t.logger)||e.log("[MobileRec] destroy"),this.unInjectJsCss()}syncTimeLine(){this.jSPlugin.recTimer&&clearInterval(this.jSPlugin.recTimer),window.recTimer?Array.isArray(window.recTimer[this.jSPlugin.id])&&window.recTimer[this.jSPlugin.id].map((e=>{clearInterval(e)})):window.recTimer={},window.recTimer[this.jSPlugin.id]=[];const e=this;this.TimeLineOBJ&&(this.jSPlugin.recTimer=setInterval((()=>{if(this.operating)return!1;this.jSPlugin.getOSDTime().then((t=>{t.data>0&&e.TimeLineOBJ.stepScrollTimeLine(function(e){var t=new Date(e),n=t.getHours(),i=t.getMinutes(),r=t.getSeconds();return(n>9?n:"0"+n)+":"+(i>9?i:"0"+i)+":"+(r>9?r:"0"+r)}(1e3*t.data))})).catch((e=>{}))}),500),window.recTimer[this.jSPlugin.id].push(this.jSPlugin.recTimer))}unSyncTimeLine(){const e=this;return new Promise((function(t,n){e.jSPlugin.recTimer&&(clearInterval(e.jSPlugin.recTimer),e.jSPlugin.recTimer=null),window.recTimer?Array.isArray(window.recTimer[e.jSPlugin.id])&&(window.recTimer[e.jSPlugin.id].map((e=>{clearInterval(e)})),window.recTimer[e.jSPlugin.id]=[]):window.recTimer={},t()}))}bindEvent(){document.getElementById("cloudType").checked="rec"===this.type,document.getElementById("cloudType").addEventListener("change",(e=>{var t;e.target.checked,this.type=e.target.checked?"rec":"cloud.rec",null==(t=this.jSPlugin)||t.eventEmitter.emit(Mr.recTypeChange,{code:0,data:{type:this.jSPlugin._isCloudRecord&&"cloud.rec"===this.type?"cloudRecord":"rec"===this.type?"local":"cloud"}}),this.jSPlugin.changePlayUrl({type:this.type,begin:`${new Date(this.date).Format("yyyyMMdd")}000000`},(()=>{this.jSPlugin._isCloudRecord&&this.jSPlugin.Theme.changeTheme("mobileRec")})).then((()=>{this.syncTimeLine(),this.changeRecSpeed(1),this.resetMobileZoomStatus(),this.jSPlugin.Theme.decoderState.state.sound&&this.jSPlugin.openSound()})).catch((e=>{}))}))}constructor(e,t,n){var i;if(null==e||null==(i=e.logger)||i.log("[MobileRec] init"),this.changeRecSpeed=t,this.resetMobileZoomStatus=n,this.isMobile=!0,this.jSPlugin=e,this.date=(new Date).Format("yyyy-MM-dd"),this.begin=((new Date).Format("yyyy-MM-dd")+" 00:00:00").replace(/-/g,"/"),this.end=((new Date).Format("yyyy-MM-dd")+" 23:59:59").replace(/-/g,"/"),this.initBegin=null,this.initEnd=null,this.type=sr(this.jSPlugin.url).type,this.operating=!1,this.seekTimer=null,this.disabled=!1,this.seekFrequency=2e3,this.recList=[],this.isSeeking=!1,this.datepickerLang={zh:"zh-CN",en:"en-US"},this.datepickerVisible=!1,this.jSPlugin.params&&this.jSPlugin.params.seekFrequency&&(this.seekFrequency=this.jSPlugin.params.seekFrequency),Uo._instanceStyle(),or("begin",this.jSPlugin.url)){var r=or("begin",this.jSPlugin.url);this.date=r.slice(0,4)+"/"+r.slice(4,6)+"/"+r.slice(6,8),this.begin=this.date+` ${r.slice(8,10)||"00"}:${r.slice(10,12)||"00"}:${r.slice(12,14)||"00"}`,this.end=this.date+" 23:59:59",this.initBegin=this.begin}if(or("end",this.jSPlugin.url)){var o=or("end",this.jSPlugin.url);this.end=this.date+` ${o.slice(8,10)||"23"}:${o.slice(10,12)||"59"}:${o.slice(12,14)||"59"}`,this.initEnd=this.end}this.recInit()}}function Bo(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Vo(){var e;return e=function*(e){var t;const n=Ao.getInstance(e.id);if(n){const t=n.getState();t.sound&&e.closeSound(),t.talk&&e.stopTalk(),t.recordvideo&&(yield e.stopSave())}var i,r,o;if(e._$streamInfo&&(null==(o=e.jSPlugin)||null==(r=o.player)||null==(i=r.setStreamInfoCallBackType)||i.call(r,1),e._$streamInfo.remove(),e._$streamInfo=null,e.showStreamInfo=!1,e.streamInfo={}),e._recOSDTimer&&(clearInterval(e._recOSDTimer),e._recOSDTimer=null),e._seekIntervaltimer&&(clearInterval(e._seekIntervaltimer),e._seekIntervaltimer=null),e.Talk&&"function"==typeof e.Talk.destroy&&e.Talk.destroy(),e._services)try{e._services.destroy()}catch(e){}e._collect=null;var a=e.jSPlugin.JS_DestroyWorker(0);if(Ao&&e.id&&Ao.removeInstance(e.id),Ao&&0===Ao.listInstances().length){if(Mo._STYLE){const e=document.getElementById(Mo._STYLE.id);e&&document.getElementsByTagName("head")[0].removeChild(e),Mo._STYLE=null}if(No._STYLE){const e=document.getElementById(No._STYLE.id);e&&document.getElementsByTagName("head")[0].removeChild(e),No._STYLE=null}if(Uo._STYLE){const e=document.getElementById(Uo._STYLE.id);e&&document.getElementsByTagName("head")[0].removeChild(e),Uo._STYLE=null}}return null==e.emit||e.emit.call(e,Mr.destroy,{eventType:Mr.destroy,code:0,msg:null==(t=e.i18n)?void 0:t.t("DESTROY")}),e.videoInfo=null,e.audioInfo=null,e.jSPlugin=null,e.eventEmitter&&(e.eventEmitter.removeAllListeners(),e.eventEmitter=null),a},Vo=function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Bo(o,i,r,a,s,"next",e)}function s(e){Bo(o,i,r,a,s,"throw",e)}a(void 0)}))},Vo.apply(this,arguments)}const Yo=[Mr.getOSDTime,Mr.streamInfoCB,Mr.http.getCloudRecordTimes,Mr.http.getLocalRecTimes,Mr.http.getCloudRecTimes,Mr.setAllDayRecTimes,Mr.setRecTimes,Mr.talkVolumeChange];function Zo(e,t=Mr){Object.keys(t).forEach((n=>{"object"!=typeof t[n]?null==e||e.on(t[n],(i=>{var r;if(!Yo.includes(n))if("object"==typeof i&&"[object Object]"===Object.prototype.toString.call(i)||Array.isArray(i)){delete i.target;try{var o;null==(o=e.logger)||o.log("[events]",t[n],JSON.stringify(i))}catch(e){}}else null==(r=e.logger)||r.log("[events]",t[n],i)})):Zo(e,t[n])}))}function Ho(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Go(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Ho(o,i,r,a,s,"next",e)}function s(e){Ho(o,i,r,a,s,"throw",e)}a(void 0)}))}}function Qo(){return Qo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Qo.apply(this,arguments)}function Ko(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Wo(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Ko(o,i,r,a,s,"next",e)}function s(e){Ko(o,i,r,a,s,"throw",e)}a(void 0)}))}}function qo(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Jo(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){qo(o,i,r,a,s,"next",e)}function s(e){qo(o,i,r,a,s,"throw",e)}a(void 0)}))}}function Xo(){return Xo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Xo.apply(this,arguments)}let ea=null;class ta extends nr{static preInit(e){const n=void 0!==e.sdkType?e.sdkType:"base";return new Promise(((i,r)=>{var o,a;ea={params:e};const s=t.parseEzopenUrl(e.url);let l={},c="";const d=new eo({sdkType:n,baseURL:e.env?e.env.domain:Dr,accessToken:e.accessToken,deviceSerial:s.deviceSerial,channelNo:s.channelNo,token:e.token||{},ezopenParams:(null==(o=e.extraParams)?void 0:o.ezopenParams)||{},timeZone:null==(a=s.searchParams)?void 0:a.timeZone}),u=[d.getEzopenUrl(e.url),d.getDeviceSupportQuality(e),d.getDeviceList(e)];if(e.url.indexOf(".rec")>-1){var p;if("rec"===s.type)l=ro(s.searchParams.begin,s.searchParams.end,null==(p=s.searchParams)?void 0:p.timeZone,s.searchParams.busType),ea.timeZone=l.timeZone,c="&begin="+Nr.formate(l.originBegin,"YYYYMMDDThhmmssZ")+"&end="+Nr.formate(l.originEnd,"YYYYMMDDThhmmssZ")+"&timeZone="+l.timeZone;e.isCloudRec&&-1!==e.url.indexOf(".cloud")&&"7"===s.searchParams.busType?u.push(d.getCloudRecordTimes({begin:l.begin,end:l.end,spaceId:s.searchParams.spaceId})):-1!==e.url.indexOf(".cloud")&&"7"!==s.searchParams.busType||"base"!==n?u.push(d.getCloudTimes({begin:l.begin,end:l.end,url:e.url})):u.push(d.getLocalRecTimes({begin:l.begin,end:l.end}))}Promise.all(u).then((t=>{void 0!==t[0].code&&200!=t[0].code&&r(t[0]),ea.getEzopenUrlRes=t[0],ea.getDeviceSupportQualityRes=t[1],ea.getDeviceListRes=t[2];const o=t[3];if(e.url.indexOf(".rec")>-1&&o)if(e.isCloudRec&&-1!==e.url.indexOf(".cloud")&&"7"===s.searchParams.busType){if(ea.cloudRecordRecList=o||[],o.length){const e=so(o,["downloadPath","ownerId","iStorageVersion","spaceId","startTime","endTime","videoType","busType"],l.originBegin,l.originEnd);0===e.length&&(ea.getRecTimesRes="",i(ea));const t=JSON.stringify(e).replace("\\","");ea.getRecTimesRes=c+"&recSlice="+t.replace("\\","")+"&r="+Math.random(),i(ea)}else ea.getRecTimesRes="",i(ea);const e=JSON.stringify(playbackSlices).replace("\\","");ea.getRecTimesRes=c+"&recSlice="+e.replace("\\","")+"&r="+Math.random(),i(ea)}else ea.getRecTimesRes="",i(ea);else if(-1!==e.url.indexOf(".cloud")&&"7"!==s.searchParams.busType||"base"!==n)if(ea.cloudRecList=o||[],o.length){0===so(o,["downloadPath","ownerId","iStorageVersion","startTime","endTime","videoType"],l.originBegin,l.originEnd).length&&(ea.getRecTimesRes="",i(ea))}else-1!==e.url.indexOf(".rec")?(ea.localRecList=o||[],ea.getRecTimesRes=c,i(ea)):i(ea);else i(ea)})).catch((e=>{r(e)}))}))}_init(){this.logger.log("_init()");const e=this;this.videoInitTime=Date.now(),this.videoPlayState=1;let t=Object.assign({},this.params);const n=Date.now();Promise.all([this._initGetDeviceSupportQuality(),this._initEZUIKitPlayer(this.params),this._getRealUrlServices(this.params.url)]).then((e=>{if(e[2]&&this.autoplay){var i;const r=e[2].split("?")[0].replace("/live","").replace("/playback","");null==(i=this._collect)||i.report(1,{logInfo:{domain:r,params:t,preInit:null!==ea}}),Eo(this,e[2],0,n).then((e=>{var t,n;0===e.code&&(this.options.muted||(null==(n=this.options)||null==(t=n.volumeOptions)?void 0:t.muted)||setTimeout((()=>{this.openSound()}),100));(null==ea?void 0:ea.cloudRecordRecList)?null==this.emit||this.emit.call(this,Mr.setAllDayRecTimes,{type:"cloudRecordTimes",list:ea.cloudRecordRecList}):(null==ea?void 0:ea.cloudRecList)?null==this.emit||this.emit.call(this,Mr.setAllDayRecTimes,{type:"cloudRecTimes",list:ea.cloudRecList}):(null==ea?void 0:ea.localRecList)&&(null==this.emit||this.emit.call(this,Mr.setAllDayRecTimes,{type:"localTimes",list:ea.localRecList}))})).catch((e=>{var t,n,i;if(this.playing=!1,1===this.videoPlayState||4===this.videoPlayState){var o;this.videoPlayState=3;const t=Date.now();null==(o=this._collect)||o.report(3,{logInfo:{domain:r,loadTime:t-this.videoInitTime,err:e},errorCode:Er(e),loadTime:t-this.videoInitTime})}this.isInspect||this.emit("message",e&&e.msg||(null==(i=this.i18n)||null==(n=i.t)?void 0:n.call(i,"GET_PLAYURL_FAILED")),"fetchError");null==(t=this.logger)||t.error(e)}))}})).catch((t=>{var n,i,r;if(this.playing=!1,1===e.videoPlayState||4===e.videoPlayState){var o;e.videoPlayState=3;const n=Date.now();null==(o=e._collect)||o.report(3,{logInfo:{loadTime:n-e.videoInitTime,err:t},errorCode:Er(t),loadTime:n-e.videoInitTime})}e.isInspect||this.emit("message",t&&t.msg||(null==(r=this.i18n)||null==(i=r.t)?void 0:i.call(r,"GET_PLAYURL_FAILED")),"fetchError");null==(n=this.logger)||n.error(t)})).finally((()=>{this.playing&&this._deviceSerialChangeServices(),setTimeout((()=>{ea=null}),5e3),e._initTime=(new Date).getTime()-e.videoInitTime})),Ao.createInstance(this.id,{rejection:!1,play:!1,pantile:!1,recordvideo:!1,talk:!1,expend:!1,webExpend:!1,zoom:!1,sound:!1,isEditing:!1,rec:!1,cloudRec:!1}),this.initSuccessTime=(new Date).getTime(),this.Talk=new Cr({deviceSerial:this.urlInfo.deviceSerial,accessToken:this.params.accessToken,capacity:this.capacity,channelNo:this.params.talkChannelNo||"0",env:this.env}),this.Talk&&this.Talk.eventEmitter.on("handleTalkError",(t=>{var n;this.logger.warn("talk error:",t),this.emit("talkingChange",!1),(null==t?void 0:t.message)&&"Permission denied"===t.message?this.emit("message",e.i18n.t("TALK_PERMISSION_DENIED"),"talkError"):this.emit("message",e.i18n.t("TALK_ERROR"),"talkError"),(null==(n=this.controls)?void 0:n.volumeControl)&&(this.controls.volumeControl.disabled=!1);try{this.Talk.stopTalk()}catch(e){}this.__talk_muted__&&(null==this.openSound||this.openSound.call(this)),this.__talk_muted__=!1,this._talking=!1;const i=Ao.getGlobalState(),r=Ao.getInstance(this.id);i.talk&&Ao.setGlobalState({talk:!1}),r.getState().talk&&r.setState({talk:!1})}))}_initEZUIKitPlayer(e){var t;return null==(t=this.logger)||t.log("_initEZUIKitPlayer()"),function(e){var t,n,i,r;null==(t=e.logger)||t.log("initDecoder()"),e.emit(Mr.decoderLoad);const o=e.url.includes("busType=7")?"v1":e.params.decoderType;e.jSPlugin=new s({szId:e.params.id,container:e.contentControl.$video,width:e.width,height:e.height,szBasePath:"",staticPath:e.staticPath,downloadRecord:e.downloadRecord,env:e.env,decoderType:o,decodeEngine:void 0!==e.params.decodeEngine?e.params.decodeEngine:1,autoPlay:!1,dpr:e.params.dpr,url:e.params.url,debugDownloadData:e.params.debugDownloadData,disableRenderPrivateData:e.disableRenderPrivateData,logger:{level:e.params.loggerOptions.level,showTime:!!e.params.loggerOptions.showTime},streamInfoCBType:e.params.streamInfoCBType});let a=!1,l=0,c=0;const d=e;return e.jSPlugin.EventCallback={openStreamCallback:()=>{e._openStreamTime=(new Date).getTime(),a=!1},getStreamHeaderCallback:()=>{a=!1},getVideoStreamCallback:()=>{e.getVideoStreamTime=(new Date).getTime(),e.isCall},firstFrameCallback:t=>{switch(t){case 0:e.decodeEngine="v3-soft";break;case 1:e.decodeEngine="v3-hard";break;case 2:e.decodeEngine="v1-soft"}try{const t=JSON.parse(window.localStorage.getItem(Lr)||"{}");Array.isArray(t[d.deviceSerial+"_"+d.channelNo])&&(e.maxReloadTime=t[d.deviceSerial+"_"+d.channelNo].length)}catch(e){}e.startPlayTime&&((new Date).valueOf(),e.startPlayTime=null);const n=e.jSPlugin._JSPlayM4_GetFrameInfo(0);n.frameRate&&(e.frameDecordTime=Math.round(1e3/n.frameRate).toFixed(2)),e.displayStreamInfo(e.showStreamInfo)},appearFirstFrameCallback:()=>{var t;e.appearFirstFrameTime=(new Date).getTime(),document.getElementById(`${e.id}-player`)&&(document.getElementById(`${e.id}-player`).style.display="block"),"function"==typeof e.params.handleFirstFrameDisplay&&e.params.handleFirstFrameDisplay({retcode:0,id:e.params.id,type:"handleFirstFrameDisplay"}),null==e||e.emit(Mr.firstFrameDisplay),"function"==typeof e.params.handleSuccess&&e.params.handleSuccess({retcode:0,id:e.id,type:"handleSuccess"}),e.recType&&(e._recOSDTimer&&(clearInterval(e._recOSDTimer),e._recOSDTimer=null),e._recOSDTimer=setInterval(Go((function*(){null==e.getOSDTime||e.getOSDTime.call(e)})),1e3)),e.muted||e.openSound(),e.loading=!1,null==(t=e.posterControl)||t.hide()},averageStreamSuccessCallback:()=>{e.averageStreamSuccessTime=e.initSuccessTime-e._initTime+(e._gotWsUrlTime-e._startGetWsUrlTime)+(e.appearFirstFrameTime-e._openStreamTime)},loadEventHandler:function(){},pluginErrorHandler:(t,n,i)=>{if(1003===n);else if(1!=(null==i?void 0:i.errorCode)){var r;const t=()=>{const t=Date.now();if(1===e.videoPlayState||2===e.videoPlayState||4===e.videoPlayState){var n;const r=e.wsUrl.split("?")[0].replace("/live","").replace("/playback","");null==(n=d._collect)||n.report(3,{domain:r,logInfo:{err:i,loadTime:t-e.videoInitTime},errorCode:Er(i),loadTime:t-e.videoInitTime})}1===e.videoPlayState||4===e.videoPlayState?e.videoPlayState=3:2===e.videoPlayState&&(e.videoPlayState=5);let r=e.i18n.t("DISCONNECT");r=e.i18n.t("39"+i.errorCode),e.Theme&&e.Theme.setDecoderState({play:!1}),e.isCall||e.isInspect||e.emit("message",r,"socketError"),"function"==typeof e.params.handleError&&e.params.handleError({msg:r,retcode:i.errorCode,id:e.id,type:"handleError"})};(null==(r=e.reloadCodeBalckList)?void 0:r.indexOf(i.errorCode))>-1&&"1004"!=i.errorCode?t():e._reload(i).catch((e=>{-3==e.code&&"1004"!=i.errorCode&&t()}))}},setRunTimeInfoCallBack:({pstRuntimeInfo:t})=>{if(5===t.nErrorCode&&(d.isInspect||e.playing&&(d.emit("message",e.i18n.t("DEVICE_ENCRYPTED"),"validateCodeError"),e.stop())),!a&&9!==t.nErrorCode&&1024!==t.nErrorCode&&352321537!==t.nErrorCode&&262144!==t.nErrorCode){var n;fo(e.id);const r=-1,o=t,a=(null==(n=e.urlInfo.searchParams)?void 0:n.begin)||Nr.formate(new Date,"YYYYMMDD")+"000000",s=t=>{var n;const i=null==(n=e.urlInfo.searchParams)?void 0:n.begin;"function"==typeof e.params.handleError&&e.params.handleError({retcode:r,data:Qo({},o,{time:/\d{10}/.test(t)?Nr.formate(t,"YYYYMMDDhhmmss"):i||Nr.formate(new Date,"YYYYMMDD")+"000000"}),id:d.params.id,type:"handleRunTimeInfoError"})};var i;e._tempSeekTime?s(null==(i=e._tempSeekTime)?void 0:i.getTime()):e.getOSDTime().then((t=>{"rec"===e.urlInfo.type&&(e._seekDate=/\d{10}/.test((null==t?void 0:t.data)+"")?Nr.strToDate(null==t?void 0:t.data):a?Nr.strToDate(a):new Date(Nr.formate(new Date,"YYYY-MM-DD")+" 00:00:00")),s(null==t?void 0:t.data)})),setTimeout((()=>{e.stop()}),1e3)}a=!0},setAdditionDataCallBack:function(t){"function"==typeof e.params.handleAdditionData&&e.params.handleAdditionData({retcode:0,data:t,id:e.id,type:"handleAdditionData"})},stutterDetectedCallback:t=>{if(5===t.type&&(e.streamInfo.codeRate=t.codeRate+"/Kbps",e._updateStreamInfo({codeRate:e.streamInfo.codeRate})),1===t.type&&(e.streamInfo.frameLostRate=(100*t.frameLossNum/t.frameNumInterval).toFixed(2)+"%",e._updateStreamInfo({frameLostRate:e.streamInfo.frameLostRate})),2===t.type){const o=(t.runtimeInfo||t.pstRuntimeInfo||{}).nAverageDecodeTime*t.account-e.frameDecordTime*t.account;if(o>0&&(o>=150&&o<250&&(c+=10),o>=250&&o<400&&(c+=20),o>=400&&o<650&&(c+=30),o>=650&&(c+=40)),l===e.lagRateCycle){const t=parseFloat((c/e.lagRateCycle).toFixed(2));var n;if(e.streamInfo.lagRate=t+"%",e._updateStreamInfo({lagRate:e.streamInfo.lagRate}),e.autoVideoLevel)if(t>15)null==(n=e.eventEmitter)||n.emit(Mr.autoVideoLevel,{code:1,lagRate:t});else if(t>1.5&&t<=15){var i;null==(i=e.eventEmitter)||i.emit(Mr.autoVideoLevel,{code:0,lagRate:t})}else{var r;null==(r=e.eventEmitter)||r.emit(Mr.autoVideoLevel,{code:2,lagRate:t})}l=0,c=0}else l++}}},void 0!==e.params.handleTalkSuccess&&(e.handleTalkSuccess=e.params.handleTalkSuccess),void 0!==e.params.handleTalkError&&(e.handleTalkError=e.params.handleTalkError),null==(n=e.jSPlugin.player)||n.event.on(Mr.streamInfoCB,(t=>{var n;const i={videoFormat:(t.data.videoFormatName+"").indexOf("5")>-1?"H265":"H264",frameRate:t.data.frameRate+"FPS",systemFormat:4==t.data.systemFormat?"RTP":2==t.data.systemFormat?"PS":3==t.data.systemFormat?"TS":"other",resolution:vo(t.data.height)};e.streamInfo=Qo({},e.streamInfo,i),e._updateStreamInfo(i),null==(n=e.eventEmitter)||n.emit(Mr.streamInfoCB,t.data)})),null==(i=e.jSPlugin.player)||i.event.on(Mr.videoInfo,(t=>{null==e||e.emit(Mr.videoInfo,t.data),e.videoInfo=t.data})),null==(r=e.jSPlugin.player)||r.event.on(Mr.audioInfo,(t=>{null==e||e.emit(Mr.audioInfo,t.data),e.audioInfo=t.data})),new Promise((t=>{var n;null==(n=e.jSPlugin.player)||n.event.on("initializing",(n=>{var i;"function"==typeof e.params.handleInitSuccess&&e.params.handleInitSuccess({retcode:0,id:e.params.id,type:"handleInitSuccess"}),"loaded"===(null==n||null==(i=n.data)?void 0:i.cmd)&&(null==e||e.emit(Mr.decoderLoaded),t())}))}))}(this)}_reload(e){const t=this;return new Promise((function(n,i){try{let c=JSON.parse(localStorage.getItem(Lr));const d=t.deviceSerial+"_"+t.channelNo;if(Array.isArray(c[d])&&c[d].length>0){t.maxReloadTime-=1;let l=c[d].shift();if(c[d].push(l),localStorage.setItem(Lr,JSON.stringify(c)),t.maxReloadTime>0){var r,o,a;const s=t.wsUrl.split("?")[0].replace("/live","").replace("/playback","");if(null==(r=t._collect)||r.report(6,{logInfo:{wsUrl:t.wsUrl,domain:s,error:Er(e)}}),!/^wss\:\/\//.test(t.wsUrl))return void i({code:-4,msg:""});if((null==(o=c[d])?void 0:o[0].domain)&&(null==(a=c[d])?void 0:a[0].port)){const e=t.wsUrl.split("?")[0];t.wsUrl=t.wsUrl.replace(e,e.replace(/(wss:\/\/)[^\/]+/,`$1${c[d][0].domain}:${c[d][0].port}`))}t.url.indexOf("rec")>-1&&t._seekDate&&(t.wsUrl=t.wsUrl.replace(/&begin=\d{8}T\d{6}Z/,"&begin="+t._seekDate.Format("yyyyMMddThhmmssZ")));const l=Date.now();t.stop((()=>{}),!0).then((e=>{Eo(t,t.wsUrl,0,l).then((e=>{if(0===e.code){var i,r;const e=(null==(i=c[t.deviceSerial+"_"+t.channelNo])?void 0:i[0].domain)||"",o=t.wsUrl.split("?")[0].replace("/live","").replace("/playback","");null==(r=t._collect)||r.report(7,{logInfo:{wsUrl:e,domain:o,reloadRes:{code:1,msg:""}}});Ao.getInstance(t.id).getState().sound&&setTimeout((()=>{t.openSound()}),2e3),n({code:1,msg:""})}}))})).catch((e=>{var n,r;const o=(null==(n=c[t.deviceSerial+"_"+t.channelNo])?void 0:n[0].domain)||"",a=o.split("?")[0].replace("/live","").replace("/playback","");null==(r=t._collect)||r.report(8,{logInfo:{wsUrl:o,domain:a,reloadRes:{code:-1,msg:"",stopError:e}}}),i({code:-1,msg:"",stopError:e})}))}else{var s;null==(s=t._collect)||s.report(8,{logInfo:{reloadRes:{code:-2,msg:""}}}),i({code:-2,msg:""}),t.emit("message",t.i18n.t("PLAY_FAILED"),"reloadError")}}else{var l;null==(l=t._collect)||l.report(8,{logInfo:{reloadRes:{code:-3,msg:""}}}),i({code:-3,msg:""})}}catch(e){var c;null==(c=t._collect)||c.report(8,{logInfo:{reloadRes:{code:-4,msg:"",error:e}}}),i({code:-4,msg:""})}}))}_getRealUrlServices(e){var n=this;return Jo((function*(){var i,r;null==(r=n.logger)||null==(i=r.log)||i.call(r,"_getRealUrlServices()");const o=n;n.urlInfo=t.parseEzopenUrl(e);const a=-1!==e.indexOf(".cloud");return n._startGetWsUrlTime=(new Date).getTime(),new Promise(((t,i)=>{n._beforeGetRealUrlServices(e).then((e=>{let r="";if(""!==e[0]&&"string"==typeof e[0])r=e[0],"rec"===n.urlInfo.type&&(r=r.replace(/begin=\w+/gi,"").replace(/end=\w+/gi,"").replace(/timeZone=\w+/gi,""),r+=e[1]),r=r.replace(/&&/gi,"&"),a&&""===e[1]&&("7"===n.urlInfo.searchParams.busType?i({retcode:"420004",msg:o.i18n.t("NO_CLOUD_RECORD")}):i({retcode:"420003",msg:o.i18n.t("NO_RECORD")})),r.replace(/&&/gi,"&"),t(o._handleRealUrl(r));else{var s;const r=JSON.parse(localStorage.getItem(Lr)),a=r&&r[o.deviceSerial+"_"+o.channelNo]||[];a.length>0&&a[0].wsUrl&&!["10002","10001","10031"].includes(null==(s=e[0])?void 0:s.code)?t(a[0].wsUrl):(n.messageControl.hide(),i(Xo({},e[0],{type:"fail"})))}})).catch((e=>{}))}))}))()}_beforeGetRealUrlServices(e){if(ea&&ea.getEzopenUrlRes)return e.indexOf(".rec")>-1&&void 0!==ea.getRecTimesRes?Promise.resolve([ea.getEzopenUrlRes,ea.getRecTimesRes]):Promise.resolve([ea.getEzopenUrlRes]);"rec"===this.urlInfo.type&&"cloud"===this.urlInfo.recType&&e.indexOf("busType=7")>-1&&this._spaceId&&(e=/spaceId=\d*/.test(e)?e.replace(/spaceId=\d*/,`spaceId=${this._spaceId}`):(e+"&spaceId="+this._spaceId).replace("?&","?").replace("&&","&"));let t=[this._services.getEzopenUrl(e)];return e.indexOf(".rec")>-1&&t.push(function(e){return To.apply(this,arguments)}(this)),Promise.all(t)}_play(e){return function(e,n){return null==e.emit||e.emit.call(e,Mr.play),e._playStartTime=(new Date).getTime(),"string"==typeof n&&(n={url:n}),n&&!n.unSaveUrl&&("string"==typeof n.url&&(e.url=n.url),e.urlInfo=t.parseEzopenUrl(e.url),e.deviceSerial=e.urlInfo.deviceSerial,e.channelNo=e.urlInfo.channelNo),e.playing=!0,e.loading=!0,e._getRecType((null==n?void 0:n.url)||e.url),new Promise(((t,i)=>{var r;e.isStoping=!0,null==(r=e.jSPlugin)||r.JS_Stop("string"!=typeof n&&(null==n?void 0:n.showPoster)?n.showPoster:0).then((()=>{fo(e.id),e.stopTime=Date.now();const r=Date.now();e._getRealUrlServices("string"!=typeof n&&(null==n?void 0:n.url)?n.url:e.url,n&&"string"!=typeof n&&!!n.url).then((n=>{Eo(e,n,e.stopTime-e._playStartTime,r).then((n=>{e.muted||setTimeout((()=>{e.openSound()}),500),t({code:0})})).catch((e=>{i(e)}))})).catch((t=>{var n,r,o;let a=t.msg?t.msg:null==(n=e.i18n)?void 0:n.t("PLAY_FAILED");e.playing=!1,e.isCall||e.isInspect,null==(o=e.params)||null==(r=o.handleError)||r.call(o,{code:t.oError?t.oError.errorCode:t.code||-1,msg:a,id:e.params.id,type:"handleError"}),e.emit("message",a,"playError"),i({code:t.oError?t.oError.errorCode:t.code||-1,msg:a,id:e.id,type:"handleError"})}))}))}))}(this,e)}stop(e=()=>{},t){return function(e,t=()=>{},n){var i;return e.playing=!1,e.autoVideoLevelResume=e.autoVideoLevel,null==(i=e.jSPlugin)?void 0:i.JS_Stop(n).then((()=>{null==e.emit||e.emit.call(e,Mr.stop,{eventType:Mr.stop,code:0,msg:e.i18n.t("STOP_SUCCESS")}),t()}))}(this,e,t)}pause(e){return function(e,t){return e.playing=!1,new Promise(((n,i)=>{var r,o;null==(r=e.jSPlugin)||r.JS_CloseSound(0),null==(o=e.jSPlugin)||o.JS_Pause(0,t).then((t=>{null==e.emit||e.emit.call(e,Mr.pause,{eventType:Mr.pause,code:0,msg:e.i18n.t("PAUSE")}),n()})).catch((t=>{null==e.emit||e.emit.call(e,Mr.pause,{eventType:Mr.pause,code:-1,msg:t||e.i18n.t("PAUSE_FAILED")}),i(t)}))}))}(this,e)}_resume(e){return function(e,t){return new Promise(((n,i)=>{var r;if(e.validateCode&&""!=e.validateCode&&(null==(r=e.jSPlugin)||r.JS_SetSecretKey(0,e.validateCode)),!So)return e.play().then((()=>{n({})})).catch((e=>{i(e)}));e.jSPlugin.JS_Resume(t).then((t=>{var i;e.playing=!0,setTimeout((()=>{var t;-1!==e.url.indexOf(".rec")&&1!=e.speed&&(null==(t=e.jSPlugin)||t.JS_Speed(e._speed))}),500),null==e.emit||e.emit.call(e,Mr.resume,{eventType:Mr.resume,code:0,msg:null==(i=e.i18n)?void 0:i.t("RESUME")}),n(t)})).catch((t=>{var n;null==e.emit||e.emit.call(e,Mr.resume,{eventType:Mr.resume,code:-1,msg:t||(null==(n=e.i18n)?void 0:n.t("RESUME_FAILED"))}),i(t)}))}))}(this,e)}changeVideoLevel(e){return function(e,t){if("object"==typeof t?"auto"===t.level:"auto"===t)return e.autoVideoLevel=!0,null==e.emit||e.emit.call(e,Mr.currentVideoLevel,"auto",e.videoLevel),null==e.emit||e.emit.call(e,Mr.changeVideoLevel,{eventType:Mr.changeVideoLevel,code:0,data:"auto",msg:e.i18n.t("CHANGE_VIDEO_LEVEL")}),Promise.resolve({code:1,data:t});const n=(e.videoLevelList||[]).find((e=>+e.level==+("object"==typeof t?t.level:t)));var i;return n?(e.videoLevel=n.level,e.streamTypeIn=n.streamTypeIn,e.autoVideoLevel=!1,null==e||e.emit(Mr.currentVideoLevel,n,e.videoLevel),new Promise(Do((function*(i){let r=e.url;if("compatible"===(null==n?void 0:n.type))r.indexOf(".hd.live")>=0?r=r.replace(".hd.live",".live"):r.indexOf(".live")>=0&&(r=r.replace(".live",".hd.live"));else try{var o,a,s,l;null==(a=e.logger)||null==(o=a.log)||o.call(a,"[https request] setVideoLevel()","videoLevel",JSON.stringify(t));const n=yield null==(s=e._services)?void 0:s.setVideoLevel(e.videoLevel);null==e||null==(l=e.emit)||l.call(e,Mr.http.setVideoLevel,n)}catch(e){}e.changePlayUrl({url:e.url},(()=>{}),!1).then((n=>{null==e||e.emit(Mr.changeVideoLevel,{eventType:Mr.changeVideoLevel,code:0,data:t,msg:e.i18n.t("CHANGE_VIDEO_LEVEL")}),i({code:0,data:t,msg:e.i18n.t("CHANGE_VIDEO_LEVEL")})})).catch((()=>{null==e||e.emit(Mr.changeVideoLevel,{eventType:Mr.changeVideoLevel,code:-1,data:t,msg:e.i18n.t("CHANGE_VIDEO_LEVEL_FAIL")}),i({code:-1,data:t,msg:e.i18n.t("CHANGE_VIDEO_LEVEL_FAIL")})}))})))):(null==e.emit||e.emit.call(e,Mr.changeVideoLevel,{eventType:Mr.changeVideoLevel,code:-2,data:t,msg:e.i18n.t("VIDEO_LEVEL_NOT_SUPPORT")+":"+JSON.stringify(t)}),null==(i=e.logger)||i.warn("video level does not exist!"),Promise.resolve({code:-2,data:t}))}(this,e)}_setVideoLevel(e){return lo(this,e)}reSetTheme(e=[]){}_changePlayUrl(e,t=()=>{},n=!0){return wo(this,e,t)}getOSDTime(){return e=this,new Promise(((t,n)=>{var i;null==(i=e.jSPlugin)||i.JS_GetOSDTime(0).then((n=>{e.__noSyncOSD||(null==e||e.emit(Mr.getOSDTime,{eventType:Mr.getOSDTime,code:0,data:n,msg:e.i18n.t("GET_OSD_TIME")}),n&&n>0&&(e._seekDate=new Date(1e3*n))),t({code:0,retcode:0,data:n})})).catch((t=>{null==e||e.emit(Mr.getOSDTime,{eventType:Mr.getOSDTime,code:-1,msg:t||e.i18n.t("GET_OSD_TIME")}),n({code:-1,retcode:-1,data:t})}))}));var e}capturePicture(e,t=!1,n,i=!0){return function(e,t,n=!1,i=!0,r=!0){var o;t=t||(new Date).getTime()+"";var a=null==(o=e.jSPlugin)?void 0:o.JS_CapturePicture(0,t,"JPEG",n,!!i);return new Promise(((n,i)=>{a.then((i=>{const o={id:e.id,code:0,data:i.data,type:"handleCapturePicture"};null==e||e.emit(Mr.capturePicture,{eventType:Mr.capturePicture,code:0,data:i.data,msg:e.i18n.t("CAPTURE_SUCCESS")}),"function"==typeof e.params.handleCapturePicture&&e.params.handleCapturePicture(o),-1!==e.url.indexOf(".cloud")&&-1!==e.url.indexOf("busType=7")&&!1!==r&&fetch(e.env.domain+"/api/service/cloud/upload/url"+`?fileName=${t}&fileType=pic&expireDays=-1&urlExpireTime=1&bizType=ezuikit&accessToken=${e.accessToken||e.token.httpToken.url}`,{method:"GET"}).then((e=>e.json())).then((t=>{if(t.data&&t.data[0]){let n=new FormData;Object.keys(t.data[0].fields).map((e=>{n.append(e,t.data[0].fields[e])}));let r=atob(i.data.base64.split(",")[1]),o=[];for(let e=0;e<r.length;e++)o.push(r.charCodeAt(e));let a=new Blob([new Uint8Array(o)],{type:"image/jpeg"});n.append("file",a,"image.jpeg");const s=new xo({url:t.data[0].url,method:"POST",body:n,headers:{accessToken:e.accessToken||e.token.httpToken.url},onUploadComplete:t=>{var n;t.response&&t.response.meta&&200==t.response.meta.code&&(null==(n=e.logger)||n.log(`${i.data.fileName} upload to cloud storage completed`))}});s.upload()}else{var n;null==(n=e.logger)||n.error("Cloud recording file upload address acquisition failed",t.meta.message)}})).catch((t=>{var n;null==(n=e.logger)||n.error("Cloud recording file upload failed: ",t)})),n(o)})).catch((t=>{null==e||e.emit(Mr.capturePicture,{eventType:Mr.capturePicture,code:-1,msg:t||e.i18n.t("CAPTURE_FAILED")});const n=Object.assign({id:e.id,type:"handleCapturePicture",code:-1},t);"function"==typeof e.params.handleCapturePicture&&e.params.handleCapturePicture(n),i(n)}))}))}(this,e,t,n,i)}startSave(e,t){return this.recording||!this.playing?Promise.resolve():(this.autoVideoLevelResume=this.autoVideoLevel,this.autoVideoLevel=!1,function(e,t,n){var i;return e._playing?(null==(i=e.jSPlugin)?void 0:i.JS_StartSave(t,((t,n)=>{e.recordRes={url:t,file:n}}),n||e.urlInfo.validateCode)).then((()=>{null==e.emit||e.emit.call(e,Mr.startSave,{eventType:Mr.startSave,code:0,msg:e.i18n.t("START_RECORD_SUCCESS")}),null==e.emit||e.emit.call(e,nr.EVENTS.recordingChange,!0),Ao.getInstance(e.id).setState({recordvideo:!0}),e._recording=!0})).catch((()=>{null==e.emit||e.emit.call(e,Mr.startSave,{eventType:Mr.startSave,code:-1,msg:e.i18n.t("START_RECORD_FAILED")}),null==e.emit||e.emit.call(e,nr.EVENTS.recordingChange,!1)})):Promise.resolve()}(this,e,t||this.urlInfo.validateCode))}startRecord(e,t){return this.startSave(e,t)}stopSave(){return this.recording?(this.autoVideoLevel=this.autoVideoLevelResume,function(e){var t,n;const i=Ao.getInstance(e.id);return(null==i?void 0:i.getState().recordvideo)?(null==(n=e.Theme)||null==(t=n.setDecoderState)||t.call(n,{recordvideo:!1}),new Promise(((t,n)=>{var r;return null==(r=e.jSPlugin)?void 0:r.JS_StopSave().then((()=>{setTimeout((()=>{null==e||e.emit(Mr.stopSave,{eventType:Mr.stopSave,code:0,data:e.recordRes,msg:e.i18n.t("STOP_RECORD_SUCCESS")}),null==e.emit||e.emit.call(e,nr.EVENTS.recordingChange,!1),i.setState({recordvideo:!1}),setTimeout((()=>{e.recordRes=null}),50),e._recording=!1,t(Lo({},e.recordRes||{}))}),200)})).catch((()=>{null==e||e.emit(Mr.stopSave,{eventType:Mr.stopSave,code:-1,msg:e.i18n.t("STOP_RECORD_FAILED")}),e.recordRes=null,n()}))}))):Promise.resolve()}(this)):Promise.resolve()}stopRecord(){return this.stopSave()}openSound(){return function(e){if(e._talking)return Promise.resolve();e.__muted=!1;const t=Ao.getInstance(e.id);var n=null==e.jSPlugin.JS_OpenSound?void 0:e.jSPlugin.JS_OpenSound.call(e.jSPlugin,0);return null==e.emit||e.emit.call(e,Mr.openSound,{eventType:Mr.openSound,code:n,msg:e.i18n.t("OPEN_SOUND")}),Ao.setGlobalState({sound:!0}),t.setState({sound:!0}),Array.isArray(Ao.listInstances())&&Ao.listInstances().map((t=>{t.state.sound&&t.id!=e.id&&Ao.getInstance(t.id).setState({sound:!1})})),e.muted=!1,Promise.resolve(n)}(this)}closeSound(){return function(e){if(e._talking)return Promise.resolve();e.__muted=!0;var t=e.jSPlugin.JS_CloseSound(0);return null==e||e.emit(Mr.closeSound,{eventType:Mr.closeSound,code:t,msg:e.i18n.t("CLOSE_SOUND")}),Ao.getInstance(e.id).setState({sound:!1}),Ao.setGlobalState({sound:!1}),e.muted=!0,Promise.resolve(t)}(this)}enableZoom(){var e;(e=this).use3DZoom||e.zooming||(e.zooming=!0,null==e||e.emit(Mr.zoom.openZoom))}closeZoom(){var e;!(e=this).use3DZoom&&e.zooming&&(e.zooming=!1,null==e.emit||e.emit.call(e,Mr.zoom.closeZoom))}zoomAdd(e){!function(e,t){const n=e.zoom+(t||1);!e.use3DZoom&&e.zooming&&(e.zoom=n)}(this,e)}zoomSub(e){!function(e,t){const n=e.zoom-(t||1);!e.use3DZoom&&e.zooming&&(e.zoom=n)}(this,e)}enable3DZoom(){return Oo(this)}close3DZoom(){return function(e){if(!e.use3DZoom)return new Promise((function(t,n){var i,r;null==e.emit||e.emit.call(e,Mr.close3DZoom,{eventType:Mr.close3DZoom,code:-1,msg:null==(i=e.i18n)?void 0:i.t("3D_ZOOM_NOT_ACTIVED")}),t({code:-1,msg:null==(r=e.i18n)?void 0:r.t("3D_ZOOM_NOT_ACTIVED")})}));if(e.is3DZooming){var t;e.Theme&&e.Theme.setDecoderState({zoom:!1});const n=e.jSPlugin.JS_Disable3DZoom(0);return e.is3DZooming=!1,null==e.emit||e.emit.call(e,Mr.close3DZoom,{eventType:Mr.close3DZoom,code:n,msg:null==(t=e.i18n)?void 0:t.t("CLOSE_3D_ZOOM")}),Promise.resolve({code:n})}return new Promise((function(t,n){var i,r;null==e.emit||e.emit.call(e,Mr.close3DZoom,{eventType:Mr.close3DZoom,code:0,msg:null==(i=e.i18n)?void 0:i.t("3D_ZOOM_CLOSED")}),t({code:0,msg:null==(r=e.i18n)?void 0:r.t("3D_ZOOM_CLOSED")})}))}(this)}changeZoomType(e){return function(e,t){var n;if(t&&e.capacity&&!e.support3DZoom)return null==e.emit||e.emit.call(e,Mr.changeZoomType,{eventType:Mr.changeZoomType,code:-1,msg:null==(n=e.i18n)?void 0:n.t("DEVICE_NOT_SUPPORT_3D_ZOOM")}),Promise.resolve({code:-1,msg:e.i18n.t("DEVICE_NOT_SUPPORT_3D_ZOOM")});if(e.is3DZooming)e.close3DZoom();else if(e.Theme&&e.Theme.decoderState.state.zoom){var i,r;null==(r=e.Zoom)||null==(i=r.stopZoom)||i.call(r)}return e.Theme&&e.Theme.setDecoderState({zoom:!1}),e.use3DZoom=t,new Promise((n=>{setTimeout((()=>{var i,r;const o=document.getElementById(`${e.id}-zoom-content`);t?o&&(o.title=e.i18n.t("3D_ZOOM")):o&&(o.title=e.i18n.t("ZOOM")),e.isMobile&&t&&e.enable3DZoom(),null==e.emit||e.emit.call(e,Mr.changeZoomType,{eventType:Mr.changeZoomType,code:0,msg:null==(i=e.i18n)?void 0:i.t("CHANGE_ZOOM_TYPE")}),n({code:0,msg:null==(r=e.i18n)?void 0:r.t("CHANGE_ZOOM_TYPE")})}),500)}))}(this,e)}reSize(e,t){this.resize(e,t)}fast(e){return function(e,t){if(t)ko(e,t);else{const t=Or.findIndex((t=>t===e.speed));var n;if(!(t>0&&t<=Or.length-1))return null==(n=e.logger)||n.warn("it is already the maximum speed!"),"function"==typeof e.params.handleError&&e.params.handleError({msg:e.i18n.t("MAX_SPEED_LIMIT"),retcode:1003,code:-1,id:e.id,type:"fast"}),Promise.resolve({code:-1,data:{speed:e.speed,msg:e.i18n.t("MAX_SPEED_LIMIT")}});ko(e,Or[t-1])}return new Promise((t=>{null==e.emit||e.emit.call(e,Mr.fast,{eventType:Mr.fast,code:0,data:e.speed,msg:e.i18n.t("SPEED")}),t({code:0,data:{speed:e.speed}})}))}(this,e)}slow(e){return function(e,t){if(t)ko(e,t);else{const t=Or.findIndex((t=>t===e.speed));var n;if(!(t>=0&&t<Or.length-1))return null==(n=e.logger)||n.warn("it is already the minimum speed!"),"function"==typeof e.params.handleError&&e.params.handleError({msg:e.i18n.t("MIN_SPEED_LIMIT"),retcode:1003,code:-1,id:e.id,type:"slow"}),Promise.resolve({code:-1,data:{speed:e.speed,msg:e.i18n.t("MIN_SPEED_LIMIT")}});ko(e,Or[t+1])}return new Promise((t=>{null==e.emit||e.emit.call(e,Mr.slow,{eventType:Mr.slow,code:0,data:e.speed,msg:e.i18n.t("SPEED")}),t({code:0,data:{speed:e.speed}})}))}(this,e)}seek(e,t){return function(e,t,n){var i,r;if(e.loading=!0,t=t.replace(/T|Z|\/|-/gi,"").replace(/ /gi,"").replace(/:/gi,""),n=(n||"").replace(/T|Z|\/|-/gi,"").replace(/ /gi,"").replace(/:/gi,""),!/^(\d{14}|\d{6})$/.test(t)||n&&!/^(\d{14}|\d{6})$/.test(n)){var o,a,s;return"function"==typeof e.params.handleError&&e.params.handleError({msg:null==(s=e.i18n)?void 0:s.t("SEEK_TIMEFORMAT_ERROR"),retcode:-1,id:e.id,type:"handleError"}),null==e.emit||e.emit.call(e,Mr.seek,{eventType:Mr.seek,code:-2,msg:e.i18n.t("SEEK_TIMEFORMAT_ERROR")}),null==(a=e.logger)||a.error(null==(o=e.i18n)?void 0:o.t("SEEK_TIMEFORMAT_ERROR")),Promise.resolve(!1)}if(t=(e.urlInfo.searchParams.begin||Nr.formate(new Date,"YYYYMMDD")+"000000").slice(0,14-t.length)+t,n=n||t.replace(/\d{6}$/,"235959"),n=t.slice(0,14-n.length)+n,t.slice(0,8)!==n.slice(0,8)){var l,c,d;return"function"==typeof e.params.handleError&&e.params.handleError({msg:null==(d=e.i18n)?void 0:d.t("SEEK_CANNOT_CROSS_DAYS"),retcode:-1,code:-1,id:e.id,type:"handleError"}),null==e.emit||e.emit.call(e,Mr.seek,{eventType:Mr.seek,code:-1,msg:e.i18n.t("SEEK_CANNOT_CROSS_DAYS")}),null==(c=e.logger)||c.error(null==(l=e.i18n)?void 0:l.t("SEEK_CANNOT_CROSS_DAYS")),Promise.resolve(!1)}return Nr.strToDate(t).getTime()>=Nr.strToDate(n).getTime()?("function"==typeof e.params.handleError&&e.params.handleError({msg:"start time is greater than the end time",retcode:-1,code:-1,id:e.id,type:"handleError"}),null==e.emit||e.emit.call(e,Mr.seek,{eventType:Mr.seek,code:-1,msg:"start time is greater than the end time"}),null==(r=e.logger)||r.error("start time is greater than the end time"),Promise.resolve(!1)):(null==(i=e.jSPlugin)||i.JS_Seek(0,Nr.formate(t,"YYYYMMDDThhmmssZ"),Nr.formate(n,"YYYYMMDDThhmmssZ")),null==e.emit||e.emit.call(e,Mr.seek,{eventType:Mr.seek,seekTime:Nr.strToDate(t).getTime(),data:{begin:Nr.strToDate(t).getTime(),end:Nr.strToDate(n).getTime()}}),Promise.resolve(!0))}(this,e,t)}get isCurrentBrowserFullscreen(){return this.isCurrentFullscreen}startTalk(){!function(e){var t;if(!e._playing)return;const n=Ao.getGlobalState(),i=Ao.getInstance(e.id);var r,o,a,s;if(window.__CURRENT_PLAYER_TALK_ID=e.id,n.talk)return null==(o=e.logger)||o.warn(null==e||null==(r=e.i18n)?void 0:r.t("TALK_TALKING")),null==e||e.emit(Mr.startTalk,{eventType:Mr.startTalk,code:430005,msg:null==e||null==(a=e.i18n)?void 0:a.t("TALK_TALKING")}),null==e||e.emit("message",null==e||null==(s=e.i18n)?void 0:s.t("TALK_TALKING"),"warn"),void(null==e||e.emit(nr.EVENTS.talkingChange,!1));null==(t=e.Talk)||t.startTalk((t=>{var n,r,o,a;e.muted||t||(e.closeSound(),e.__talk_muted__=!0),(null==(n=e.controls)?void 0:n.volumeControl)&&(e.controls.volumeControl.disabled=!0),null==(a=e.Talk)||null==(o=a.eventEmitter)||null==(r=o.once)||r.call(o,"startTalk",(t=>{var n;null==e||null==(n=e.eventEmitter)||n.emit(Mr.startTalk,t)})),e._talking=!0,null==e||e.emit(nr.EVENTS.talkingChange,!0),Ao.setGlobalState({talk:!0}),i.setState({talk:!0})}))}(this)}stopTalk(){!function(e){var t,n,i;const r=Ao.getGlobalState(),o=Ao.getInstance(e.id);window.__CURRENT_PLAYER_TALK_ID="",r.talk?(null==(n=e.Talk)||null==(t=n.stopTalk)||t.call(n),null==e.emit||e.emit.call(e,Mr.stopTalk,{eventType:Mr.stopTalk,code:0,msg:"success"}),e._talking=!1,null==e||e.emit(nr.EVENTS.talkingChange,!1),(null==(i=e.controls)?void 0:i.volumeControl)&&e._playing&&(e.controls.volumeControl.disabled=!1),e.__talk_muted__&&(null==e.openSound||e.openSound.call(e)),e.__talk_muted__=!1,r.talk&&Ao.setGlobalState({talk:!1}),o.getState().talk&&o.setState({talk:!1})):null==e.emit||e.emit.call(e,Mr.stopTalk,{eventType:Mr.stopTalk,code:-1,msg:""})}(this)}setVolumeGain(e){return function(e,t){var n;return null==(n=e.Talk)?void 0:n.setVolumeGain(t)}(this,e)}getMicrophonePermission(){return null==(e=this.Talk)?void 0:e.getMicrophonePermission();var e}getMicrophonesList(){return null==(t=this.Talk)||null==(e=t.getMicrophonesList)?void 0:e.call(t);var e,t}setProfile(e){!function(e,t){var n,i;null==(i=e.Talk)||null==(n=i.setProfile)||n.call(i,t)}(this,e)}destroy(){var e=this,t=()=>super.destroy;return Jo((function*(){return ea=null,function(e){Vo.apply(this,arguments)}(e),t().call(e),0}))()}getDeviceCapacity(){var e,t;(e=this).capacity={},null==(t=e.logger)||t.log("[https request] getDeviceCapacity()"),e._services.getDeviceCapacity().then((t=>{var n,i;e.capacity=t,e.support3DZoom=!1,e.capacity&&"1"==e.capacity.support_3d_position&&e.url.indexOf(".live")>-1&&(e.support3DZoom=!0,e.params.use3DZoom&&(e.use3DZoom=!0)),e.capacity&&"1"==e.capacity.support_device_auto_video_level&&(e.videoLevelList.push({level:"auto",name:"VIDEO_LEVEL_AUTO",streamTypeIn:1}),null==e.emit||e.emit.call(e,Mr.setVideoLevelList,e.videoLevelList),null==e.on||e.on.call(e,Mr.autoVideoLevel,(t=>{const n=e.videoLevelList.findIndex((t=>t.level===e.videoLevel));switch(t.code){case 0:break;case 1:const s=e.videoLevelList[n-1];var i,r;s&&"auto"!==s.level&&e.videoLevelList[n].streamTypeIn===s.streamTypeIn&&(null==(r=e.logger)||null==(i=r.log)||i.call(r,`${t.lagRate}%${s.level}`),e._setVideoLevel(s.level).then((()=>{var t;e.videoLevel=s.level,null==e||null==(t=e.emit)||t.call(e,Mr.currentVideoLevel,"auto",e.videoLevel),setTimeout((()=>{const t=e.jSPlugin._JSPlayM4_GetFrameInfo(0);e._updateStreamInfo({resolution:vo(t.height)})}),5e3)})));break;case 2:const l=e.videoLevelList[n+1];var o,a;l&&"auto"!==l.level&&e.videoLevelList[n].streamTypeIn===l.streamTypeIn&&(null==(a=e.logger)||null==(o=a.log)||o.call(a,`${t.lagRate}%${l.level}`),e._setVideoLevel(l.level).then((()=>{e.videoLevel=l.level,null==e.emit||e.emit.call(e,Mr.currentVideoLevel,"auto",e.videoLevel),setTimeout((()=>{const t=e.jSPlugin._JSPlayM4_GetFrameInfo(0);e._updateStreamInfo({resolution:vo(t.height)})}),5e3)})))}}))),null==e.emit||e.emit.call(e,Mr.getDeviceCapacity,{eventType:Mr.getDeviceCapacity,code:0,data:t,msg:null==(i=e.i18n)||null==(n=i.t)?void 0:n.call(i,"GET_CAPACITY")})}))}getVideoLevelList(){return function(e){var t,n;let i=[];return i=(null==(t=e.params.videoLevelList)?void 0:t.length)>=0?e.params.videoLevelList:e.videoLevelList,null==e.emit||e.emit.call(e,Mr.getVideoLevelList,{eventType:Mr.getVideoLevelList,code:0,data:i,msg:null==(n=e.i18n)?void 0:n.t("GET_VIDEO_LEVEL_LIST")}),i}(this)}getVideoLevel(){return null==(e=this)||e.emit(Mr.getVideoLevel,{eventType:Mr.getVideoLevel,code:0,data:e.videoLevel}),e.videoLevel;var e}getPtzStatus(){return(null==(t=(e=this).controls)?void 0:t.ptzControl)?(null==e.emit||e.emit.call(e,Mr.getPtzStatus,{eventType:Mr.getPtzStatus,code:0,data:e.controls.ptzControl.active,msg:e.i18n.t("GET_PTZ_STATUS")}),e.controls.ptzControl.active):(null==e.emit||e.emit.call(e,Mr.getPtzStatus,{eventType:Mr.getPtzStatus,code:-1,data:!1,msg:e.i18n.t("GET_PTZ_STATUS_FAILED")}),!1);var e,t}openPtz(){var e,t;if(null==(e=this.controls)?void 0:e.ptzControl)return(t=this).controls.ptzControl?(t.isMobile?t.isCurrentFullscreen?t.controls.ptzControl.active=!0:null==t.emit||t.emit.call(t,Mr.ptz.openPtz,{eventType:Mr.ptz.openPtz,code:-1,msg:t.i18n.t("MOBILE_HIDE_PTZ")}):t.controls.ptzControl.active=!0,{code:0}):(null==t.emit||t.emit.call(t,Mr.ptz.openPtz,{eventType:Mr.ptz.openPtz,code:-1,msg:t.i18n.t("OPTION_PTZ_FAILED")}),{code:-1,msg:t.i18n.t("OPTION_PTZ_FAILED")});this.logger.warn(this.i18n.t("OPTION_PTZ_FAILED"))}closePtz(){var e,t,n;if(null==(e=this.controls)?void 0:e.ptzControl)return(null==(n=(t=this).controls)?void 0:n.ptzControl)?(t.controls.ptzControl.active=!1,{code:0}):{code:-1,msg:t.i18n.t("OPTION_PTZ_FAILED")};this.logger.warn(this.i18n.t("OPTION_PTZ_FAILED"))}getPlayRate(){return null==this.emit||this.emit.call(this,Mr.getPlayRate,{eventType:Mr.getPlayRate,code:0,data:this.speed,target:this,msg:this.i18n.t("GET_SPEED")}),this.speed}setMirrorFlip(e){var t,n;return"number"!=typeof e?(null==this.emit||this.emit.call(this,Mr.setMirrorFlip,{eventType:Mr.setMirrorFlip,code:-1,target:this,msg:this.i18n.t("MIRROR_TYPE_ERROR")}),Promise.reject({code:-1,msg:this.i18n.t("MIRROR_TYPE_ERROR")})):(null==this.emit||this.emit.call(this,Mr.setMirrorFlip,{eventType:Mr.setMirrorFlip,code:0,target:this,msg:this.i18n.t("MIRROR")}),null==(n=this.logger)||null==(t=n.log)||t.call(n,"[https request] postDevicePtzMirror() command",e),this._services.postDevicePtzMirror(e))}setFECCorrectType(e,t){return Io(this,e)}setFEC3DViewParam(e){return function(e,t){var n,i,r;return!e._FECCorrectType||((null==(n=e.jSPlugin)?void 0:n.isHardH264)||(null==(i=e.jSPlugin)?void 0:i.isHardH265))&&(null==(r=e.jSPlugin)?void 0:r.useHardDev)?(null==e.emit||e.emit.call(e,Mr.setFEC3DViewParam,{eventType:Mr.setFEC3DViewParam,code:-1,msg:e.i18n.t("FEC.FEC_SUPPORT_VERSION")}),Promise.resolve({code:-1,msg:e.i18n.t("FEC.FEC_SUPPORT_VERSION")})):e.jSPlugin.FEC_Set3DViewParam&&e._FECCorrectType&&(3===e._FECCorrectType.place&&1536===e._FECCorrectType.correctType||1===e._FECCorrectType.place&&2304===e._FECCorrectType.correctType)?e.jSPlugin.FEC_Set3DViewParam(t).then((()=>(null==e.emit||e.emit.call(e,Mr.setFEC3DViewParam,{eventType:Mr.setFEC3DViewParam,code:0,msg:e.i18n.t("FEC.SET_FEC_PARAMS")}),{code:0}))).catch((()=>(null==e.emit||e.emit.call(e,Mr.setFEC3DViewParam,{eventType:Mr.setFEC3DViewParam,code:-1}),{code:-1}))):(null==e.emit||e.emit.call(e,Mr.setFEC3DViewParam,{eventType:Mr.setFEC3DViewParam,code:-1,msg:e.i18n.t("FEC.SET_FEC_PARAMS_FAILED")}),Promise.resolve({code:-1,msg:e.i18n.t("FEC.SET_FEC_PARAMS_FAILED")}))}(this,e)}getFEC3DViewParam(e){return Io(this,e)}setWaterMarkFont(e){return function(e,t){return null==e.emit||e.emit.call(e,Mr.setWaterMarkFont,{eventType:Mr.setWaterMarkFont,code:0,data:t,msg:e.i18n.t("SET_WATERMARK")}),e.waterMark_JSPlugin=t,e.jSPlugin.JS_SetWaterMarkFont(t)}(this,e)}setTimeLineClickable(e){this.timeLineClickable=e,this.Theme&&this.Theme.Rec&&this.Theme.Rec.timeLine&&this.Theme.Rec.timeLine.setTimeLineClickable(e)}setLoggerOptions(e={}){var t,n;super.setLoggerOptions(e),null==(n=this.jSPlugin)||null==(t=n.player)||t.setLogger({level:e.level,showTime:e.showTime})}setDisplayRegion(e,t,n,i){var r,o;null==this.emit||this.emit.call(this,Mr.setDisplayRegion,{left:e,right:t,top:n,bottom:i}),null==(o=this.jSPlugin)||null==(r=o.player)||r.setDisplayRegion(e,t,n,i)}_initGetDeviceSupportQuality(){return this.url.indexOf(".live")>-1?new Promise((e=>{this._beforeInitGetDeviceSupportQuality().then((t=>{if(["0","1","2","3","4","5","6","pp","qp"].includes(this._quality+"")||this._quality<0){const t=this.params.videoLevelList||this.videoLevelList;let i={};if("pp"===this._quality)i=t[0];else if("qp"===this._quality)try{i=t[t.length-1]}catch(e){}else i=t.find((e=>e.level===+this._quality));var n;if(i)lo(this,i.level).then((()=>{e()})),this.videoLevel=i.level,this.streamTypeIn=i.streamTypeIn,null==this.emit||this.emit.call(this,Mr.currentVideoLevel,i,i.level);else null==(n=this.logger)||n.warn(`quality(${this._quality}) does not exist!`),e()}else e()}))})):Promise.resolve()}_beforeInitGetDeviceSupportQuality(){if(ea&&ea.getDeviceSupportQualityRes&&ea.getDeviceListRes){var e,t;const n=ea.getDeviceListRes.find((e=>e.channelNo===+this.urlInfo.channelNo));this._setVideoLevelList(this.params.videoLevelList?this.params.videoLevelList:ea.getDeviceSupportQualityRes);let i={};return i="compatible"===(null==(e=this.videoLevelList[0])?void 0:e.type)?this.url.indexOf(".hd.live")>0?this.videoLevelList[1]:this.videoLevelList[0]:this.videoLevelList.find((e=>e.level==(null==n?void 0:n.videoLevel)))||{},(null==i?void 0:i.streamTypeIn)?(this.videoLevel=i.level,this.streamTypeIn=i.streamTypeIn):(null==(t=this.videoLevelList)?void 0:t.length)>0&&(this.videoLevel=this.videoLevelList[0].level,this.streamTypeIn=this.videoLevelList[0].streamTypeIn,i=this.videoLevelList[0]),Promise.resolve([[ea.getDeviceSupportQualityRes,ea.getDeviceListRes]])}let n=[_o(this)];return Promise.all(n)}_deviceSerialChangeServices(){var e=this;return Jo((function*(){var t,n,i,r;return Promise.all([null==(t=e._services)?void 0:t.getAppKey().then((t=>{var n,i,r,o,a,s;200===(null==t||null==(n=t.meta)?void 0:n.code)?(null==(o=e.logger)||null==(r=o.log)||r.call(o,"[https response] getAppKey()",JSON.stringify(t.data)),null==(a=e._collect)||a.updateAppKey(t.data.appKey)):null==(s=e._collect)||s.updateAppKey("test");return(null==t||null==(i=t.data)?void 0:i.appKey)||""})),(n=e,null==(i=n.logger)||i.log("[https request] getDeviceInfo()"),null==(r=n._services)?void 0:r.getDeviceInfo().then((e=>{var t,i;return n.deviceInfo=e,null==n.emit||n.emit.call(n,Mr.http.getDeviceInfo,e),null==(i=n.controls)||null==(t=i.deviceControl)||t.update(null==e?void 0:e.deviceName,null==e?void 0:e.deviceSerial,""),e}))),e.getDeviceCapacity(),bo(e)])}))()}supportSeek(){var e,t,n;return("cloud"===(null==(e=this.urlInfo)?void 0:e.recType)||this.options.useSeek&&"1"===(null==(t=this.capacity)?void 0:t.support_seek_playback))&&!(null==(n=this.urlInfo)?void 0:n.deviceSerial.includes(":"))}_isLive(){return this.url.indexOf(".live")>=0}_updateStreamInfo(e){this.showStreamInfo&&Object.keys(e).length>0&&Object.keys(e).map((t=>{const n=this.$container.querySelector(`.ezplayer-streamInfo-${t}-value`);n&&(n.innerHTML=e[t])}))}displayStreamInfo(e){this.showStreamInfo=e;const t="ezplayer-streamInfo";if(e&&this.$container){var n,i;null==(i=this.jSPlugin)||null==(n=i.player)||n.setStreamInfoCallBackType(0);const e=`\n          <div class="${t}-videoFormat">${this.i18n.t("videoFormat")}: <span class="${t}-videoFormat-value">${this.streamInfo.videoFormat}</span></div>\n          <div class="${t}-frameRate">${this.i18n.t("frameRate")}: <span class="${t}-frameRate-value">${this.streamInfo.frameRate}</span></div>\n          <div class="${t}-systemFormat">${this.i18n.t("systemFormat")}: <span class="${t}-systemFormat-value">${this.streamInfo.systemFormat}</span></div>\n          <div class="${t}-resolution">${this.i18n.t("resolution")}: <span class="${t}-resolution-value">${this.streamInfo.resolution}</span></div>\n          <div class="${t}-codeRate">${this.i18n.t("bitrate")}: <span class="${t}-codeRate-value">${this.streamInfo.codeRate}</span></div>\n          <div class="${t}-frameLostRate">${this.i18n.t("frameLostRate")}: <span class="${t}-frameLostRate-value">${this.streamInfo.frameLostRate}</span></div>\n          <div class="${t}-lagRate">${this.i18n.t("lagRate")}: <span class="${t}-lagRate-value">${this.streamInfo.lagRate}</span></div>\n        `;var r;if(this._$streamInfo||(this._$streamInfo=document.createElement("div"),this._$streamInfo.classList.add(`${t}`),this._$streamInfo.style.cssText=`\n          position: absolute;\n          ${this.isMobile?"top:32px;":"top: 48px;"}\n          ${this.isMobile?"font-size:12px;":"font-size:14px;"}\n          right: 10px; color: #52C41A; width: 170px; background-color: rgba(0,0,0,0.6);\n          user-select: none;\n          pointer-events: none;\n          padding: 10px;\n          z-index:2;\n        `),this._$streamInfo)this._$streamInfo.innerHTML=e,null==(r=this.$container)||r.appendChild(this._$streamInfo)}else{var o,a;this._$streamInfo&&(this._$streamInfo.remove(),this._$streamInfo=null),null==(a=this.jSPlugin)||null==(o=a.player)||o.setStreamInfoCallBackType(1)}}constructor(n){var i,r,a,s,l,c,d,u,p,h,m,A,f,v;if(super(Xo({},e(xr,n,{clone:!1}),(null==(i=n.videoLevelList)?void 0:i.length)||(null==n||null==(a=n.definitionOptions)||null==(r=a.list)?void 0:r.length)?{definitionOptions:{value:null==n||null==(s=n.definitionOptions)?void 0:s.value,list:(null==n||null==(l=n.definitionOptions)?void 0:l.list)||n.videoLevelList}}:{},{capturePictureOptions:Xo({type:0!=n.download?"download":"base64"},n.capturePictureOptions||{}),staticPath:(null==(c=n.staticPath)?void 0:c.startsWith("http"))?n.staticPath:t.getStaticPath(n.staticPath||"https://openstatic.ys7.com/ezuikit_js/v8.2.2/ezuikit_static"),autoPlay:e(xr,n,{clone:!1}).autoplay,container:document.getElementById(n.id),type:"ezopen"})),this._services=null,this._recOSDTimer=null,this.videoInfo={},this.audioInfo={},this.urlInfo={},this._$streamInfo=null,this._handleRealUrl=e=>e,this.params=e(xr,Xo({},n,{videoLevelList:(null==n||null==(d=n.definitionOptions)?void 0:d.list)||n.videoLevelList}),{clone:!1}),!n.id)throw new Error("id param is required!");if(!document.getElementById(n.id))throw new Error(`#${this.params.id} node does not exist`);this.i18n.appendTranslations({zh:cr,en:dr}),this.eventEmitter={on:this.on.bind(this),emit:this.emit.bind(this),off:this.off.bind(this),once:this.once.bind(this),removeAllListeners:this.removeAllListeners.bind(this)},this.params.autoplay&&(this.loading=!0),this.autoplay=this.params.autoplay,this.logger.setOptions({name:(this.params.loggerOptions.name+" #"+n.id).replace(/^ /,"")}),this.logger.log("[version]",ta.version),this.isStoping=!1,this.sdkType=void 0!==this.params.sdkType?this.params.sdkType:"base",this.talkChannelNo=n.talkChannelNo||null,Zo(this),this.emit(Mr.init),this.timeZone=0,this.ptzSpeed=n.ptzSpeed||2,this.download=void 0===n.download||n.download,this.downloadRecord=void 0===n.downloadRecord||n.downloadRecord,this.timeLineClickable=void 0!==n.timeLineClickable&&n.timeLineClickable,this.onTimeLineClick=void 0!==n.onTimeLineClick?n.onTimeLineClick:null,this.recordRes={},this.disableRenderPrivateData=void 0===n.disableRenderPrivateData||n.disableRenderPrivateData,this.ptzSpeedOptions={slow:1,mid:2,fast:3},window.EZUIKit[n.id]={state:{EZUIKitPlayer:{talkInit:window.EZUIKit[n.id]&&window.EZUIKit[n.id].state&&window.EZUIKit[n.id].state.EZUIKitPlayer.talkInit||!1}}},this.urlInfo=t.parseEzopenUrl(n.url),this._services=new eo({sdkType:this.sdkType,baseURL:this.params.env?this.params.env.domain:Dr,accessToken:n.accessToken,deviceSerial:this.urlInfo.deviceSerial,channelNo:this.urlInfo.channelNo,token:n.token||{},ezopenParams:(null==(u=n.extraParams)?void 0:u.ezopenParams)||{},timeZone:null==(p=this.urlInfo.searchParams)?void 0:p.timeZone}),this.logger.log("[Services] init"),new uo(this.params.env?this.params.env.domain:null),this.id=n.id,this.isCall=n.isCall||!1,this.callTime=n.callTime||null,this.hangUpCallback=n.hangUpCallback||null,this.isNeedBellRing=!1!==n.isNeedBellRing,this.url=n.url,this.accessToken=n.accessToken,this.deviceSerial=this.urlInfo.deviceSerial,this.channelNo=this.urlInfo.channelNo,this.poster=n.poster,this.disabledTimeLine=!1,this.disabledPTZ=!1,this.capacity=null,this.playTimer=null,this.env={domain:Dr},void 0!==n.env&&(this.env=Object.assign(this.env,n.env)),this.isMobile=t.isMobile(),this.support3DZoom=!1,this.use3DZoom=!1,this.is3DZooming=!1,this.useHardDev=void 0!==n.useHardDev&&n.useHardDev,this._spaceId=or("spaceId",this.url)||this.options.spaceId,this.waterMark_JSPlugin=!1,this.useSeek=n.useSeek,this.dpr=n.dpr||1,this.decoderType=n.decoderType||"auto",this.videoLevel=1,this.streamTypeIn=1,this.autoVideoLevel=!1,this.autoVideoLevelResume=!1,this.lagRateCycle=n.lagRateCycle||30,this.showStreamInfo=void 0!==n.showStreamInfo&&n.showStreamInfo,this.streamInfo={videoFormat:"",frameRate:"0FPS",systemFormat:"",resolution:"",codeRate:"0Kbps",frameLostRate:"0%",lagRate:"0%"},this.frameDecordTime=0,this.language=n.language||"zh",this.languageList=n.languageList||["zh","en"],-1===this.languageList.indexOf(this.language)&&(this.logger.warn(`language [${this.language}] is currently not supported and has been switched to zh`),this.language="zh"),this.token=n.token||{},this.deviceInfo={},this._quality=n.quality,this.isInspect=n.isInspect||!1,this.inspectRecordingDuration=n.inspectRecordingDuration||144e5,this.inspectVideoWidth=n.inspectVideoWidth||290,this.inspectVideoHeight=n.inspectVideoHeight||170,this._FECCorrectType=null,this._FECSplitIds="",this.initSuccessTime=0,this._initTime=0,this._gotWsUrlTime=0,this._startGetWsUrlTime=0,this.appearFirstFrameTime=0,this._openStreamTime=0,this.maxReloadTime=0,this.maxAddressAccount=n.maxAddressAccount||1e3,this.reloadCodeBalckList=n.reloadCodeBalckList||[5402,5406,5411,5507,5546,9048,9049,5451,5558,6701];const g=!this.useHardDev&&Sr()||this.useHardDev&&!kr()&&!Pr()&&Sr()||this.useHardDev&&(kr()||Pr()||Sr());this.isV3=g,void 0!==n.isMobile&&(this.isMobile=n.isMobile),this._monitorReport=!1!==n.dataReport&&("https:"===(null==(m=window)||null==(h=m.location)?void 0:h.protocol)&&!function(e){const t=e.split(".").map((function(e){return!Number.isNaN(e)}));return 4===t.length&&t.every(Boolean)}(null==(f=window)||null==(A=f.location)?void 0:A.hostname)),this._collect=new io({domain:null==(v=this.env)?void 0:v.domain,monitorReport:this._monitorReport,pluginVersion:this.isV3?"v3":"v1",extendsInfo:{v:"8.2.2",getDynamic:()=>{var e;return{protocol:"ezopen",url:this.url,serial:this.urlInfo.deviceSerial,no:this.urlInfo.channelNo,env:null==(e=this.env)?void 0:e.domain,type:this.urlInfo.type}}}}),this.logger.log("[Collect] init");let y=JSON.parse(localStorage.getItem(Lr))||{},T=Object.keys(y);T.length>this.maxAddressAccount&&T.map(((e,t)=>{t<T.length&&t>T.length-this.maxAddressAccount||delete y[e]}));try{const e=this.deviceSerial+"_"+this.channelNo;y[e]||(y=Xo({},y,{[e]:[]}),localStorage.setItem(Lr,JSON.stringify(y))),localStorage.getItem(zr)&&localStorage.removeItem(zr)}catch(e){}var _;this.logger.log("[options]",JSON.stringify(this.params)),this.startPlayTime=(new Date).valueOf(),this._init(),this.play=o((e=>this._play(e)),500,!0),this.resume=o((e=>this._resume(e)),500,!0),this.changePlayUrl=o(((e,t,n)=>this._changePlayUrl(e,t,n)),500),window.addEventListener("beforeunload",(()=>{if(!this.destroyed)try{Ao.removeInstance(this.id),this.stop()}catch(e){}})),null==(_=this)||_.on(Mr.talkSuccess,(e=>{_.Theme&&!_.Theme.decoderState.state.talk&&_.id===e.id&&_.Theme.setDecoderState({talk:!0});const t=Ao.getGlobalState(),n=Ao.getInstance(_.id);t.talk||Ao.setGlobalState({talk:!0}),n.getState().talk||n.setState({talk:!0})})),null==_||_.on(Mr.talkError,(()=>{var e,t;null==(t=_.Theme)||null==(e=t.setDecoderState)||e.call(t,{talk:!1});const n=Ao.getGlobalState(),i=Ao.getInstance(_.id);n.talk&&Ao.setGlobalState({talk:!1}),i.getState().talk&&i.setState({talk:!1})})),null==_||_.on(Mr.stop,(()=>{_.stopSave()})),null==_||_.on(Mr.pause,(()=>{_.stopSave()})),function(e){var n,i;e.on(nr.EVENTS.changeTheme,(()=>{e.recording&&e.stopRecord()})),e.on(nr.EVENTS.control.play,(t=>{t?e.recType&&e._recOSDTimer?e.resume():e.play():e.pause()})),e.on(nr.EVENTS.control.capturePicture,(t=>{const n="download"===t.type;e.capturePicture(void 0,!1,n,t.cloudRecUpload).then((t=>{var n,i;null==(i=e.controls)||null==(n=i.capturePictureControl)||n.emit(nr.EVENTS.control.capturePictureResult,t)}))})),e.on(nr.EVENTS.volumechange,((t,n)=>{n!==e.__muted&&(n?e.closeSound():e.openSound())})),e.on(nr.EVENTS.control.recordingChange,(t=>{t?e.startSave():e.stopSave()})),e.on(nr.EVENTS.control.talkingChange,(t=>{t?e.startTalk():e.stopTalk()})),null==(i=e.Talk)||null==(n=i.eventEmitter)||n.on("talkVolumeChange",(({data:t})=>{e.emit(nr.EVENTS.talkVolumeChange,t)})),e.on(nr.EVENTS.control.definitionChange,(t=>{e.resetControl(),e.changeVideoLevel(t)})),e.on(nr.EVENTS.control.speedChange,(t=>{e.fast(t)})),e.on(nr.EVENTS.control.recTypeChange,(n=>{var i,r;e.resetControl(),e._recOSDTimer&&(clearInterval(e._recOSDTimer),e._recOSDTimer=null),e._seekIntervaltimer&&(clearInterval(e._seekIntervaltimer),e._seekIntervaltimer=null);const o=(null==(r=e.urlInfo)||null==(i=r.searchParams)?void 0:i.spaceId)||e.options.spaceId,a=t.switchEzopenUrl(e.url,{type:"rec",recType:"rec"===n?"":"cloud",search:"cloudRecord"===n?"busType=7"+(o?`&spaceId=${o}`:""):"busType="+(o?"&spaceId=":"")});e._speed=1,e.changePlayUrl({url:a})})),e.on(nr.EVENTS.control.dateChange,(n=>{const i=Nr.formate(n,"YYYYMMDD");e.resetControl(),e._recOSDTimer&&(clearInterval(e._recOSDTimer),e._recOSDTimer=null),e._seekIntervaltimer&&(clearInterval(e._seekIntervaltimer),e._seekIntervaltimer=null);const r=t.switchEzopenUrl(e.url,{search:`begin=${i+"000000"}&end=${i+"235959"}`});e._speed=1,e.changePlayUrl({url:r})})),e.on(nr.EVENTS.control.timeLineChange,(n=>{var i;e.recording&&e.stopSave();let r="";var o,a,s,l;if("string"==typeof n?r=Nr.formate((null==(a=e.urlInfo)||null==(o=a.searchParams)?void 0:o.begin)?Nr.strToDate(null==(l=e.urlInfo)||null==(s=l.searchParams)?void 0:s.begin):new Date,"YYYYMMDD")+`${n.replace(/:/gi,"")}`:n instanceof Date&&(r=Nr.formate(n,"YYYYMMDDhhmmss")),null==(i=e.recordList)?void 0:i.length){const t=Nr.strToDate(e.recordList[e.recordList.length-1].endTime).getTime();if(Nr.strToDate(r).getTime()>=t)return void e.logger.warn("seek time is greater than the last record end time")}if(e._recOSDTimer&&(clearInterval(e._recOSDTimer),e._recOSDTimer=null),e._seekIntervaltimer&&(clearInterval(e._seekIntervaltimer),e._seekIntervaltimer=null),e.supportSeek()&&e.playing){var c;e.__noSyncOSD=!0;const t=Nr.strToDate(r).getTime()>(null==(c=e._seekDate)?void 0:c.getTime());e._seekDate=Nr.strToDate(r),e.seek(r.substr(8,6),"235959").then((()=>{e.__noSyncOSD=!0,e._seekIntervaltimer=setInterval((()=>{e.getOSDTime().then((n=>{n.data&&(t&&1e3*n.data>=Nr.strToDate(r).getTime()||!t&&1e3*n.data-2e3>=Nr.strToDate(r).getTime())&&(e.loading=!1,clearInterval(e._seekIntervaltimer),e.__noSyncOSD=!1,e._seekIntervaltimer=null,e.loading=!1,e._recOSDTimer=setInterval(Wo((function*(){null==e.getOSDTime||e.getOSDTime.call(e)})),1e3))}))}),1e3)}))}else{const n=t.switchEzopenUrl(e.url,{search:`begin=${r}`});e.play({url:n,unSaveUrl:!0,showPoster:!0})}})),e.on("Control.contentRerender",(t=>{var n,i,r;null==(r=e.jSPlugin)||null==(i=r.player)||null==(n=i.emit)||n.call(i,"Control.contentRerender",t)}))}(this)}}ta.Talk=Cr,ta.provider=Ao,ta.LOCALES={zh:cr,en:dr},ta.EVENTS=Mr,ta.version="8.2.2",ta.prototype.tokenSchema={streamToken:{live:{actionType:"PREVIEW",resourceCategory:"global"},rec:{actionType:"PLAYBACK",resourceCategory:"global"},talk:{actionType:"TALK",resourceCategory:"global"}},deviceToken:{video:{action:"*",resourceCategory:"video"},global:{action:"*",resourceCategory:"global"}},httpToken:{url:{urlPattern:"/**"}}},ta.prototype.deepCheck=(e,t,n=1)=>{if(n<0)return{};let i={};for(const r in e)if(void 0!==e[r]&&void 0===t[r])i[r]=e[r];else if("object"==typeof e[r]&&!Array.isArray(e[r])){const o=ta.prototype.deepCheck(e[r],t[r],n-1);Object.keys(o).length>0&&(i[r]=o)}return i},ta.prototype.checkToken=e=>ta.prototype.deepCheck(ta.prototype.tokenSchema,e);class na{on(e,t){e&&t&&(this.events[e]=this.events[e]||[],this.events[e].push(t))}emit(e,t){e&&this.events[e]&&this.events[e].forEach((e=>e(t)))}off(e,t){e&&t&&this.events[e]&&this.events[e].splice(this.events[e].indexOf(t),1)}once(e,t){const n=this;this.on(e,(function i(){const r=Array.prototype.slice.call(arguments);t.apply(null,r),n.off(e,i)}))}removeAllListener(){this.events={}}constructor(){this.events={}}}function ia(){return ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ia.apply(this,arguments)}const ra={list:[],pageSize:4,pageIndex:0,autoTurn:!1,autoPlay:!0,delay:1e4,loop:!1,selectScreen:0,text:"",imgUrl:"",onScreenSelect:()=>{},onPageChange:()=>{}};class oa{_initScreen(e){const t=this.status.list[e];if(t&&"container"in t&&t.container)return t.container;const n=document.createElement("div");var i;if(n.id=this.container.id+"-screen-"+e,n.style.cssText=null!=(i=this.status.screenStyle)?i:`\n            width: ${this.status.list[e]&&this.status.list[e].width?this.status.list[e].width:600}px;\n            height: ${this.status.list[e]&&this.status.list[e].height?this.status.list[e].height:400}px;\n            position: relative;\n            overflow: hidden;\n            background-color: #000;\n            background-image: url('${this.status.imgUrl}');\n            background-size: 100% 100%;\n        `,this.status.text){const t=document.createElement("span");var r;t.style.cssText=null!=(r=this.status.textStyle)?r:"\n                color: #fff;\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            ",t.innerText=this.status.text,n.appendChild(t);const i=this.container.children[e];i?this.container.insertBefore(n,i):this.container.appendChild(n)}return n}_destroyScreen(e){const t=document.getElementById(`${this.container.id}-screen-${e}`);t&&this.container.removeChild(t)}constructor(e,t){if(this.destroyScreen=(e,t)=>{this.screenList[e].destroy(),delete this.screenList[e],this._destroyScreen(e),!t&&this._initScreen(e)},this._emitInitPlayerResult=(e,t)=>{const n={eventType:"initPlayer",code:e,msg:t};this.eventEmitter.emit("initPlayer",n)},this.initPlayer=(e,t,n)=>{const i=this.status.pageIndex,r=this.status.pageSize,o=this.status.list;let a;if(void 0!==n){const e=void 0!==t?t:this.status.selectScreen;this.screenList[e]?(this.screenList[e].player&&this.screenList[e].player.destroy().then((()=>{this._destroyScreen(e),this._initScreen(e)})),a=new ta(n),this.screenList[e].options=n,this.screenList[e].player=a):(a=new ta(n),this.screenList.push({options:n,player:a})),this.status.list.push(n),this._emitInitPlayerResult(0,"")}else if(o.length>0)if(void 0!==e)if(e>=0&&e<o.length){const n=void 0!==t?t:this.status.selectScreen;this.screenList[n].player&&this.screenList[n].player.destroy().then((()=>{this._destroyScreen(n),this._initScreen(n)})),a=new ta(ia({id:this.container.id+"-screen-"+n,audioOnly:!1},o[e],{handleInitSuccess:()=>{this.screenSelect(this.status.selectScreen)}})),this.screenList[n].options=o[e],this.screenList[n].player=a,this._emitInitPlayerResult(0,"")}else this._emitInitPlayerResult(-1,"");else o.map(((e,t)=>{t>=i*r&&t<(i+1)*r&&(a=new ta(ia({id:this.container.id+"-screen-"+t,audioOnly:!1},e)),this.screenList[t]={options:e,player:a})})),this._emitInitPlayerResult(0,"");return a},this._emitPageResult=(e,t,n)=>{const i={eventType:e,code:t,msg:n,data:{pageSize:this.status.pageSize,pageIndex:this.status.pageIndex}};this.eventEmitter.emit(e,i),this.options.onPageChange&&this.options.onPageChange(i)},this.setList=e=>{this.status.list=e},this.getList=()=>this.status.list,this.nextPage=()=>{const{pageSize:e,loop:t,list:n}=this.status,i=this.status.pageIndex+1,r=i*e<n.length;if(r||t){this.status.pageIndex=r?i:0;const t=this.status.pageIndex*e,o=t+e,a=n.slice(t,o);if(a.forEach(((e,t)=>{this.screenList[t].player&&this.screenList[t].player.destroy().then((()=>{this._destroyScreen(t),this._initScreen(t)})),this.status.autoPlay?(this.screenList[t].options=e,this.screenList[t].player=new ta(ia({id:`${this.container.id}-screen-${t}`,audioOnly:!1},e))):delete this.screenList[t].player})),a.length<e&&this.screenList.length>a.length)for(let e=a.length;e<this.screenList.length;e++)this.screenList[e].player&&this.screenList[e].player.destroy&&this.screenList[e].player.destroy(),this.screenList[e]={},this._destroyScreen(e),this._initScreen(e);this._emitPageResult("nextPage",r?0:1,r?"":"")}else this._emitPageResult("nextPage",-1,"")},this.lastPage=()=>{const{pageSize:e,loop:t,list:n}=this.status;let i=this.status.pageIndex-1;const r=i>=0;if(!r&&t){const t=Math.floor(n.length/e),r=n.length%e==0;i=r?t-1:t;let o=i*e,a=o+e;const s=n.slice(o,a);if(!r)for(let e=s.length;e<this.screenList.length;e++)this.screenList[e].player&&this.screenList[e].player.destroy&&this.screenList[e].player.destroy(),this.screenList[e]={},this._destroyScreen(e),this._initScreen(e);s.forEach(((e,t)=>{this.screenList[t].player&&this.screenList[t].player.destroy().then((()=>{this._destroyScreen(t),this._initScreen(t)})),this.status.autoPlay?(this.screenList[t].options=e,this.screenList[t].player=new ta(ia({id:`${this.container.id}-screen-${t}`,audioOnly:!1},e))):delete this.screenList[t].player})),this.status.pageIndex=i,this._emitPageResult("lastPage",1,"")}else if(r){const t=i*e,r=t+e;n.slice(t,r).forEach(((e,t)=>{this.screenList[t].player&&this.screenList[t].player.destroy().then((()=>{this._destroyScreen(t),this._initScreen(t)})),this.status.autoPlay?(this.screenList[t].options=e,this.screenList[t].player=new ta(ia({id:`${this.container.id}-screen-${t}`,audioOnly:!1},e))):delete this.screenList[t].player})),this.status.pageIndex=i,this._emitPageResult("lastPage",0,"")}else this._emitPageResult("lastPage",-1,"")},this.pageTo=e=>{const t=this.status.pageSize,n=this.status.list,i=Math.ceil(n.length/t);if(e>=0&&e<i){this.status.pageIndex=e,n.slice(e*t,(e+1)*t).map(((e,t)=>{this.screenList[t].player&&this.screenList[t].player.destroy().then((()=>{this._destroyScreen(t),this._initScreen(t)})),this.status.autoPlay?(this.screenList[t].options=e,this.screenList[t].player=new ta(ia({id:`${this.container.id}-screen-${t}`,audioOnly:!1},e))):delete this.screenList[t].player}));const i={eventType:"pageTo",code:0,msg:"",data:{pageSize:t,pageIndex:e}};this.eventEmitter.emit("pageTo",i),this.options.onPageChange&&this.options.onPageChange(t,e)}else{const e={eventType:"pageTo",code:-1,msg:"",data:{pageSize:t,pageIndex:this.status.pageIndex}};this.eventEmitter.emit("pageTo",e),this.options.onPageChange&&this.options.onPageChange(e)}},this.startTurn=()=>{const e=this.status.delay;this.status.autoTurn=!0,this.turnInterval=setInterval((()=>{this.nextPage()}),e)},this.stopTurn=()=>{this.status.autoTurn=!1,clearInterval(this.turnInterval)},this.setDelay=e=>{this.stopTurn(),this.status.delay=e,this.startTurn()},this.setLoop=e=>{this.status.loop=e,this.status.pageSize>=this.status.list.length&&(this.status.loop=!1)},this.changePageSize=e=>{const t=this.status.pageIndex,n=this.screenList;let i=this.status.list.slice(t*e);if(e<n.length){for(let t=e;t<n.length;t++)n[t].player&&n[t].player.destroy&&n[t].player.destroy(),this._destroyScreen(t);this.screenList=n.slice(0,e)}else if(e>n.length)for(let t=n.length;t<e;t++)this._initScreen(t),i[t]&&this.status.autoPlay?(this.screenList[t].options=i[t],n[t].player=new ta(ia({id:`${this.container.id}-screen-${t}`,audioOnly:!1},i[t]))):n[t]={};this.status.pageSize=e},this.screenSelect=e=>{this.status.selectScreen=e;const t=this.screenList;return this.options.onScreenSelect&&this.options.onScreenSelect(e,t[e]),t[e]},this.setText=e=>{this.status.text=e},this.setBackground=e=>{this.status.imgUrl=e,this.screenList.map(((t,n)=>{const i=document.getElementById(`${this.container.id}-screen-${n}`);i&&(i.style.backgroundImage=`url(${e})`)}))},this.destroy=(e=!1)=>{let t=[];this.screenList.map(((e,n)=>{e.player&&(t.push(e.player.destroy()),delete e.player)})),Promise.all(t).then((()=>{const t=document.getElementById(this.container.id);if(t&&(t.innerHTML="",t.id=this.container.id+"-destroyed"),e){const e=document.querySelector('style[innerHTML*=".screen-select"]');e&&document.head.removeChild(e),this.screenList=[]}else if(this.status.pageSize>0)for(let e=0;e<this.status.pageSize;e++)this._initScreen(e)}))},this.getScreen=e=>{const t=void 0!==e?e:this.status.selectScreen;return this.screenList[t]},this.getScreenList=()=>this.screenList,this.getDeviceList=()=>this.status.list,this.container=e,this.options=Object.assign({},ra,t||{}),this.status=Object.assign({},ra,t||{}),this.status.pageSize>=this.status.list.length&&(this.status.loop=!1),this.screenList=[],this.turnInterval=-1,this.eventEmitter=new na,this.status.pageSize>0){const e=document.getElementById(this.container.id);e&&(e.innerHTML="");for(let e=0;e<this.status.pageSize;e++)this.screenList.push({}),this._initScreen(e)}this.status.autoPlay&&this.initPlayer(),this.status.autoTurn&&this.startTurn(),this.initPlayer=this.initPlayer.bind(this),this.nextPage=this.nextPage.bind(this),this.lastPage=this.lastPage.bind(this),this.startTurn=this.startTurn.bind(this),this.stopTurn=this.stopTurn.bind(this),this.setDelay=this.setDelay.bind(this),this.setLoop=this.setLoop.bind(this),this.changePageSize=this.changePageSize.bind(this),this.pageTo=this.pageTo.bind(this),this.screenSelect=this.screenSelect.bind(this),this.setText=this.setText.bind(this),this.setBackground=this.setBackground.bind(this),this.destroy=this.destroy.bind(this),this.getScreen=this.getScreen.bind(this),this.getScreenList=this.getScreenList.bind(this),this.getDeviceList=this.getDeviceList.bind(this),this.destroyScreen=this.destroyScreen.bind(this)}}function aa(){return aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},aa.apply(this,arguments)}const sa={list:[],id:"ezuikit-inspection-player",defaultSelect:0,selectStyle:".screen-select::before { content: '';position: absolute;top: 0;left: 0;right: 0;bottom: 0;border: 2px solid red;box-sizing: border-box;z-index: 9999; pointer-events: none; }"};var la=0;function ca(e){return"__private_"+la+++"_"+e}var da=null;function ua(e){e.responseMsg.eventName}function pa(){da.JS_SetWindowControlCallback({cbIntegrationCallBack:ua}),da.JS_StartService("window",{dllPath:"./chain/cloudTransform.dll"}).then((function(){da.JS_CreateWnd("playWnd",900,500).then((function(){}))}))}function ha(){da=null}function ma(e){da=null}var Aa=ca("__event");class fa{alarmMsg(){da.JS_RequestInterface({funcName:"TransFunctionResult",arguments:encodeURI(JSON.stringify({request:{body:{alarmTypes:[10800,0,0,0,0],channelId:"066dde0465dd4abaab6afe355baf9d0b",endTime:"1621007999000",startTime:"1620921600000"},callBack:"GetAlarmMsgOrders",majorKey:"",method:"POST",storeId:"",url:"/videoplugin/message/getMessageByTypes"},response:{code:0,message:null,data:[{alarmType:10800,alarmName:"",alarmTime:1620921217e3},{alarmType:10800,alarmName:"",alarmTime:1620920678e3},{alarmType:10800,alarmName:"",alarmTime:1620920586e3},{alarmType:10800,alarmName:"",alarmTime:1620919513e3},{alarmType:10800,alarmName:"",alarmTime:1620919483e3},{alarmType:10800,alarmName:"",alarmTime:1620919333e3},{alarmType:10800,alarmName:"",alarmTime:1620918913e3},{alarmType:10800,alarmName:"",alarmTime:1620918616e3},{alarmType:10800,alarmName:"",alarmTime:1620918305e3},{alarmType:10800,alarmName:"",alarmTime:1620917858e3},{alarmType:10800,alarmName:"",alarmTime:1620917658e3},{alarmType:10800,alarmName:"",alarmTime:1620917244e3},{alarmType:10800,alarmName:"",alarmTime:1620917064e3},{alarmType:10800,alarmName:"",alarmTime:1620916994e3},{alarmType:10800,alarmName:"",alarmTime:1620916668e3},{alarmType:10800,alarmName:"",alarmTime:1620916571e3},{alarmType:10800,alarmName:"",alarmTime:1620916529e3},{alarmType:10800,alarmName:"",alarmTime:1620916343e3},{alarmType:10800,alarmName:"",alarmTime:1620916081e3},{alarmType:10800,alarmName:"",alarmTime:1620915825e3},{alarmType:10800,alarmName:"",alarmTime:1620915676e3},{alarmType:10800,alarmName:"",alarmTime:1620915531e3},{alarmType:10800,alarmName:"",alarmTime:1620915394e3},{alarmType:10800,alarmName:"",alarmTime:1620915197e3},{alarmType:10800,alarmName:"",alarmTime:1620914971e3},{alarmType:10800,alarmName:"",alarmTime:1620914644e3},{alarmType:10800,alarmName:"",alarmTime:1620914533e3},{alarmType:10800,alarmName:"",alarmTime:1620914457e3},{alarmType:10800,alarmName:"",alarmTime:1620914376e3},{alarmType:10800,alarmName:"",alarmTime:1620914284e3},{alarmType:10800,alarmName:"",alarmTime:1620913973e3},{alarmType:10800,alarmName:"",alarmTime:1620913431e3},{alarmType:10800,alarmName:"",alarmTime:1620912834e3},{alarmType:10800,alarmName:"",alarmTime:1620912771e3},{alarmType:10800,alarmName:"",alarmTime:1620912354e3},{alarmType:10800,alarmName:"",alarmTime:1620912275e3},{alarmType:10800,alarmName:"",alarmTime:1620912093e3},{alarmType:10800,alarmName:"",alarmTime:1620912024e3},{alarmType:10800,alarmName:"",alarmTime:162091189e4},{alarmType:10800,alarmName:"",alarmTime:1620911839e3},{alarmType:10800,alarmName:"",alarmTime:1620911807e3},{alarmType:10800,alarmName:"",alarmTime:162091176e4},{alarmType:10800,alarmName:"",alarmTime:1620911682e3},{alarmType:10800,alarmName:"",alarmTime:162091127e4},{alarmType:10800,alarmName:"",alarmTime:1620911184e3},{alarmType:10800,alarmName:"",alarmTime:1620910982e3},{alarmType:10800,alarmName:"",alarmTime:1620910931e3},{alarmType:10800,alarmName:"",alarmTime:1620910851e3},{alarmType:10800,alarmName:"",alarmTime:1620910781e3},{alarmType:10800,alarmName:"",alarmTime:1620910727e3},{alarmType:10800,alarmName:"",alarmTime:1620910677e3},{alarmType:10800,alarmName:"",alarmTime:1620910647e3},{alarmType:10800,alarmName:"",alarmTime:1620910588e3},{alarmType:10800,alarmName:"",alarmTime:1620910544e3},{alarmType:10800,alarmName:"",alarmTime:1620910484e3},{alarmType:10800,alarmName:"",alarmTime:162091041e4},{alarmType:10800,alarmName:"",alarmTime:162091035e4},{alarmType:10800,alarmName:"",alarmTime:1620910278e3},{alarmType:10800,alarmName:"",alarmTime:1620910217e3},{alarmType:10800,alarmName:"",alarmTime:1620910124e3},{alarmType:10800,alarmName:"",alarmTime:1620909976e3},{alarmType:10800,alarmName:"",alarmTime:1620909939e3},{alarmType:10800,alarmName:"",alarmTime:1620909847e3},{alarmType:10800,alarmName:"",alarmTime:1620909817e3},{alarmType:10800,alarmName:"",alarmTime:1620909736e3},{alarmType:10800,alarmName:"",alarmTime:1620909664e3},{alarmType:10800,alarmName:"",alarmTime:1620909605e3},{alarmType:10800,alarmName:"",alarmTime:1620909575e3},{alarmType:10800,alarmName:"",alarmTime:1620909346e3},{alarmType:10800,alarmName:"",alarmTime:1620909247e3},{alarmType:10800,alarmName:"",alarmTime:1620909216e3},{alarmType:10800,alarmName:"",alarmTime:1620909149e3},{alarmType:10800,alarmName:"",alarmTime:162090912e4},{alarmType:10800,alarmName:"",alarmTime:1620909028e3},{alarmType:10800,alarmName:"",alarmTime:1620908999e3},{alarmType:10800,alarmName:"",alarmTime:1620908969e3},{alarmType:10800,alarmName:"",alarmTime:1620908909e3},{alarmType:10800,alarmName:"",alarmTime:162090888e4},{alarmType:10800,alarmName:"",alarmTime:1620908835e3},{alarmType:10800,alarmName:"",alarmTime:162090875e4},{alarmType:10800,alarmName:"",alarmTime:162090872e4},{alarmType:10800,alarmName:"",alarmTime:1620908652e3},{alarmType:10800,alarmName:"",alarmTime:1620908612e3},{alarmType:10800,alarmName:"",alarmTime:1620908582e3},{alarmType:10800,alarmName:"",alarmTime:1620908552e3},{alarmType:10800,alarmName:"",alarmTime:1620908456e3},{alarmType:10800,alarmName:"",alarmTime:1620908426e3},{alarmType:10800,alarmName:"",alarmTime:1620908299e3},{alarmType:10800,alarmName:"",alarmTime:1620908268e3},{alarmType:10800,alarmName:"",alarmTime:162090805e4},{alarmType:10800,alarmName:"",alarmTime:1620907918e3},{alarmType:10800,alarmName:"",alarmTime:1620907758e3},{alarmType:10800,alarmName:"",alarmTime:1620907625e3},{alarmType:10800,alarmName:"",alarmTime:1620907386e3},{alarmType:10800,alarmName:"",alarmTime:1620907292e3},{alarmType:10800,alarmName:"",alarmTime:1620907127e3},{alarmType:10800,alarmName:"",alarmTime:1620906864e3},{alarmType:10800,alarmName:"",alarmTime:1620906828e3},{alarmType:10800,alarmName:"",alarmTime:1620906797e3},{alarmType:10800,alarmName:"",alarmTime:1620906747e3},{alarmType:10800,alarmName:"",alarmTime:1620906717e3},{alarmType:10800,alarmName:"",alarmTime:1620906632e3},{alarmType:10800,alarmName:"",alarmTime:1620906501e3},{alarmType:10800,alarmName:"",alarmTime:1620906412e3},{alarmType:10800,alarmName:"",alarmTime:1620906368e3},{alarmType:10800,alarmName:"",alarmTime:1620906329e3},{alarmType:10800,alarmName:"",alarmTime:1620906142e3},{alarmType:10800,alarmName:"",alarmTime:1620906112e3},{alarmType:10800,alarmName:"",alarmTime:1620906013e3},{alarmType:10800,alarmName:"",alarmTime:1620905946e3},{alarmType:10800,alarmName:"",alarmTime:1620905823e3},{alarmType:10800,alarmName:"",alarmTime:1620905697e3},{alarmType:10800,alarmName:"",alarmTime:1620905622e3},{alarmType:10800,alarmName:"",alarmTime:1620905571e3},{alarmType:10800,alarmName:"",alarmTime:1620905541e3},{alarmType:10800,alarmName:"",alarmTime:1620905511e3},{alarmType:10800,alarmName:"",alarmTime:1620905481e3},{alarmType:10800,alarmName:"",alarmTime:1620905442e3},{alarmType:10800,alarmName:"",alarmTime:1620905412e3},{alarmType:10800,alarmName:"",alarmTime:1620905382e3},{alarmType:10800,alarmName:"",alarmTime:1620905352e3},{alarmType:10800,alarmName:"",alarmTime:1620905322e3},{alarmType:10800,alarmName:"",alarmTime:1620905262e3},{alarmType:10800,alarmName:"",alarmTime:1620905196e3},{alarmType:10800,alarmName:"",alarmTime:162090515e4},{alarmType:10800,alarmName:"",alarmTime:1620904994e3},{alarmType:10800,alarmName:"",alarmTime:1620904931e3},{alarmType:10800,alarmName:"",alarmTime:1620904813e3},{alarmType:10800,alarmName:"",alarmTime:162090473e4},{alarmType:10800,alarmName:"",alarmTime:16209047e5},{alarmType:10800,alarmName:"",alarmTime:1620904618e3},{alarmType:10800,alarmName:"",alarmTime:1620904286e3},{alarmType:10800,alarmName:"",alarmTime:1620904173e3},{alarmType:10800,alarmName:"",alarmTime:1620904143e3},{alarmType:10800,alarmName:"",alarmTime:1620904112e3},{alarmType:10800,alarmName:"",alarmTime:1620904053e3},{alarmType:10800,alarmName:"",alarmTime:1620904023e3},{alarmType:10800,alarmName:"",alarmTime:1620903854e3},{alarmType:10800,alarmName:"",alarmTime:1620903789e3},{alarmType:10800,alarmName:"",alarmTime:1620903723e3},{alarmType:10800,alarmName:"",alarmTime:1620903643e3},{alarmType:10800,alarmName:"",alarmTime:1620903612e3},{alarmType:10800,alarmName:"",alarmTime:1620903573e3},{alarmType:10800,alarmName:"",alarmTime:1620903505e3},{alarmType:10800,alarmName:"",alarmTime:1620903383e3},{alarmType:10800,alarmName:"",alarmTime:1620903329e3},{alarmType:10800,alarmName:"",alarmTime:1620903299e3},{alarmType:10800,alarmName:"",alarmTime:1620903268e3},{alarmType:10800,alarmName:"",alarmTime:16209032e5},{alarmType:10800,alarmName:"",alarmTime:1620903149e3},{alarmType:10800,alarmName:"",alarmTime:162090312e4},{alarmType:10800,alarmName:"",alarmTime:1620902977e3},{alarmType:10800,alarmName:"",alarmTime:162090286e4},{alarmType:10800,alarmName:"",alarmTime:162090277e4},{alarmType:10800,alarmName:"",alarmTime:1620902639e3},{alarmType:10800,alarmName:"",alarmTime:1620902609e3},{alarmType:10800,alarmName:"",alarmTime:1620902517e3},{alarmType:10800,alarmName:"",alarmTime:1620902373e3},{alarmType:10800,alarmName:"",alarmTime:162090232e4},{alarmType:10800,alarmName:"",alarmTime:1620902253e3},{alarmType:10800,alarmName:"",alarmTime:1620902198e3},{alarmType:10800,alarmName:"",alarmTime:1620902132e3},{alarmType:10800,alarmName:"",alarmTime:162090194e4},{alarmType:10800,alarmName:"",alarmTime:162090185e4},{alarmType:10800,alarmName:"",alarmTime:1620901789e3},{alarmType:10800,alarmName:"",alarmTime:1620901746e3},{alarmType:10800,alarmName:"",alarmTime:1620901685e3},{alarmType:10800,alarmName:"",alarmTime:1620901638e3},{alarmType:10800,alarmName:"",alarmTime:162090152e4},{alarmType:10800,alarmName:"",alarmTime:1620901489e3},{alarmType:10800,alarmName:"",alarmTime:1620901424e3},{alarmType:10800,alarmName:"",alarmTime:1620901271e3},{alarmType:10800,alarmName:"",alarmTime:1620901233e3},{alarmType:10800,alarmName:"",alarmTime:1620901157e3},{alarmType:10800,alarmName:"",alarmTime:1620900915e3},{alarmType:10800,alarmName:"",alarmTime:1620900834e3},{alarmType:10800,alarmName:"",alarmTime:1620900774e3},{alarmType:10800,alarmName:"",alarmTime:1620900744e3},{alarmType:10800,alarmName:"",alarmTime:162090065e4},{alarmType:10800,alarmName:"",alarmTime:162090044e4},{alarmType:10800,alarmName:"",alarmTime:1620900409e3},{alarmType:10800,alarmName:"",alarmTime:1620900175e3},{alarmType:10800,alarmName:"",alarmTime:1620900134e3},{alarmType:10800,alarmName:"",alarmTime:1620900069e3},{alarmType:10800,alarmName:"",alarmTime:1620900016e3},{alarmType:10800,alarmName:"",alarmTime:1620899976e3},{alarmType:10800,alarmName:"",alarmTime:1620899908e3},{alarmType:10800,alarmName:"",alarmTime:1620899879e3},{alarmType:10800,alarmName:"",alarmTime:1620899826e3},{alarmType:10800,alarmName:"",alarmTime:1620899756e3},{alarmType:10800,alarmName:"",alarmTime:1620899599e3},{alarmType:10800,alarmName:"",alarmTime:1620899559e3},{alarmType:10800,alarmName:"",alarmTime:1620899467e3},{alarmType:10800,alarmName:"",alarmTime:1620899406e3},{alarmType:10800,alarmName:"",alarmTime:1620899265e3},{alarmType:10800,alarmName:"",alarmTime:1620899211e3},{alarmType:10800,alarmName:"",alarmTime:162089914e4},{alarmType:10800,alarmName:"",alarmTime:162089911e4},{alarmType:10800,alarmName:"",alarmTime:162089905e4},{alarmType:10800,alarmName:"",alarmTime:1620898991e3},{alarmType:10800,alarmName:"",alarmTime:1620898926e3},{alarmType:10800,alarmName:"",alarmTime:1620898834e3},{alarmType:10800,alarmName:"",alarmTime:1620898785e3},{alarmType:10800,alarmName:"",alarmTime:1620898746e3},{alarmType:10800,alarmName:"",alarmTime:1620898697e3},{alarmType:10800,alarmName:"",alarmTime:1620898666e3},{alarmType:10800,alarmName:"",alarmTime:1620898507e3},{alarmType:10800,alarmName:"",alarmTime:1620898293e3},{alarmType:10800,alarmName:"",alarmTime:1620898248e3},{alarmType:10800,alarmName:"",alarmTime:1620898218e3},{alarmType:10800,alarmName:"",alarmTime:1620898157e3},{alarmType:10800,alarmName:"",alarmTime:1620898088e3},{alarmType:10800,alarmName:"",alarmTime:162089802e4},{alarmType:10800,alarmName:"",alarmTime:162089796e4},{alarmType:10800,alarmName:"",alarmTime:162089785e4},{alarmType:10800,alarmName:"",alarmTime:1620897807e3},{alarmType:10800,alarmName:"",alarmTime:1620897771e3},{alarmType:10800,alarmName:"",alarmTime:1620897719e3},{alarmType:10800,alarmName:"",alarmTime:162089769e4},{alarmType:10800,alarmName:"",alarmTime:162089763e4},{alarmType:10800,alarmName:"",alarmTime:16208976e5},{alarmType:10800,alarmName:"",alarmTime:162089757e4},{alarmType:10800,alarmName:"",alarmTime:162089754e4},{alarmType:10800,alarmName:"",alarmTime:1620897475e3},{alarmType:10800,alarmName:"",alarmTime:1620897412e3},{alarmType:10800,alarmName:"",alarmTime:1620897369e3},{alarmType:10800,alarmName:"",alarmTime:1620897339e3},{alarmType:10800,alarmName:"",alarmTime:1620897279e3},{alarmType:10800,alarmName:"",alarmTime:1620897237e3},{alarmType:10800,alarmName:"",alarmTime:1620897207e3},{alarmType:10800,alarmName:"",alarmTime:1620897172e3},{alarmType:10800,alarmName:"",alarmTime:1620897142e3},{alarmType:10800,alarmName:"",alarmTime:1620897112e3},{alarmType:10800,alarmName:"",alarmTime:1620897024e3},{alarmType:10800,alarmName:"",alarmTime:1620896985e3},{alarmType:10800,alarmName:"",alarmTime:1620896874e3},{alarmType:10800,alarmName:"",alarmTime:1620896843e3},{alarmType:10800,alarmName:"",alarmTime:1620896814e3},{alarmType:10800,alarmName:"",alarmTime:1620896783e3},{alarmType:10800,alarmName:"",alarmTime:1620896736e3},{alarmType:10800,alarmName:"",alarmTime:1620896621e3},{alarmType:10800,alarmName:"",alarmTime:1620896478e3},{alarmType:10800,alarmName:"",alarmTime:1620896447e3},{alarmType:10800,alarmName:"",alarmTime:1620896358e3},{alarmType:10800,alarmName:"",alarmTime:1620896307e3},{alarmType:10800,alarmName:"",alarmTime:1620896277e3},{alarmType:10800,alarmName:"",alarmTime:1620896247e3},{alarmType:10800,alarmName:"",alarmTime:1620896214e3},{alarmType:10800,alarmName:"",alarmTime:162089604e4},{alarmType:10800,alarmName:"",alarmTime:1620895953e3},{alarmType:10800,alarmName:"",alarmTime:1620895921e3},{alarmType:10800,alarmName:"",alarmTime:1620895868e3},{alarmType:10800,alarmName:"",alarmTime:162089577e4},{alarmType:10800,alarmName:"",alarmTime:1620895704e3},{alarmType:10800,alarmName:"",alarmTime:162089559e4},{alarmType:10800,alarmName:"",alarmTime:1620895559e3},{alarmType:10800,alarmName:"",alarmTime:162089548e4},{alarmType:10800,alarmName:"",alarmTime:1620895442e3},{alarmType:10800,alarmName:"",alarmTime:1620895377e3},{alarmType:10800,alarmName:"",alarmTime:1620895347e3},{alarmType:10800,alarmName:"",alarmTime:1620895293e3},{alarmType:10800,alarmName:"",alarmTime:1620895171e3},{alarmType:10800,alarmName:"",alarmTime:1620895136e3},{alarmType:10800,alarmName:"",alarmTime:1620895017e3},{alarmType:10800,alarmName:"",alarmTime:1620894926e3},{alarmType:10800,alarmName:"",alarmTime:1620894896e3},{alarmType:10800,alarmName:"",alarmTime:1620894864e3},{alarmType:10800,alarmName:"",alarmTime:1620894834e3},{alarmType:10800,alarmName:"",alarmTime:1620894738e3},{alarmType:10800,alarmName:"",alarmTime:1620894599e3},{alarmType:10800,alarmName:"",alarmTime:1620894539e3},{alarmType:10800,alarmName:"",alarmTime:1620894426e3},{alarmType:10800,alarmName:"",alarmTime:1620894359e3},{alarmType:10800,alarmName:"",alarmTime:1620894297e3},{alarmType:10800,alarmName:"",alarmTime:1620894213e3},{alarmType:10800,alarmName:"",alarmTime:1620894183e3},{alarmType:10800,alarmName:"",alarmTime:1620894051e3},{alarmType:10800,alarmName:"",alarmTime:1620893964e3},{alarmType:10800,alarmName:"",alarmTime:1620893934e3},{alarmType:10800,alarmName:"",alarmTime:1620893843e3},{alarmType:10800,alarmName:"",alarmTime:1620893754e3},{alarmType:10800,alarmName:"",alarmTime:1620893676e3},{alarmType:10800,alarmName:"",alarmTime:1620893606e3},{alarmType:10800,alarmName:"",alarmTime:162089353e4},{alarmType:10800,alarmName:"",alarmTime:1620893452e3},{alarmType:10800,alarmName:"",alarmTime:1620893423e3},{alarmType:10800,alarmName:"",alarmTime:1620893357e3},{alarmType:10800,alarmName:"",alarmTime:1620893288e3},{alarmType:10800,alarmName:"",alarmTime:1620893143e3},{alarmType:10800,alarmName:"",alarmTime:1620893051e3},{alarmType:10800,alarmName:"",alarmTime:1620893006e3},{alarmType:10800,alarmName:"",alarmTime:1620892904e3},{alarmType:10800,alarmName:"",alarmTime:1620892824e3},{alarmType:10800,alarmName:"",alarmTime:1620892764e3},{alarmType:10800,alarmName:"",alarmTime:1620892541e3},{alarmType:10800,alarmName:"",alarmTime:1620892479e3},{alarmType:10800,alarmName:"",alarmTime:1620892412e3},{alarmType:10800,alarmName:"",alarmTime:1620892311e3},{alarmType:10800,alarmName:"",alarmTime:1620892281e3},{alarmType:10800,alarmName:"",alarmTime:1620892209e3},{alarmType:10800,alarmName:"",alarmTime:1620892063e3},{alarmType:10800,alarmName:"",alarmTime:1620891991e3},{alarmType:10800,alarmName:"",alarmTime:1620891931e3},{alarmType:10800,alarmName:"",alarmTime:162089187e4},{alarmType:10800,alarmName:"",alarmTime:162089181e4},{alarmType:10800,alarmName:"",alarmTime:1620891708e3},{alarmType:10800,alarmName:"",alarmTime:1620891655e3},{alarmType:10800,alarmName:"",alarmTime:1620891585e3},{alarmType:10800,alarmName:"",alarmTime:1620891531e3},{alarmType:10800,alarmName:"",alarmTime:1620891501e3},{alarmType:10800,alarmName:"",alarmTime:1620891401e3},{alarmType:10800,alarmName:"",alarmTime:1620891297e3},{alarmType:10800,alarmName:"",alarmTime:1620891257e3},{alarmType:10800,alarmName:"",alarmTime:1620891216e3},{alarmType:10800,alarmName:"",alarmTime:1620891178e3},{alarmType:10800,alarmName:"",alarmTime:1620891128e3},{alarmType:10800,alarmName:"",alarmTime:1620891033e3},{alarmType:10800,alarmName:"",alarmTime:1620890973e3},{alarmType:10800,alarmName:"",alarmTime:162089094e4},{alarmType:10800,alarmName:"",alarmTime:1620890879e3},{alarmType:10800,alarmName:"",alarmTime:1620890794e3},{alarmType:10800,alarmName:"",alarmTime:1620890714e3},{alarmType:10800,alarmName:"",alarmTime:1620890616e3},{alarmType:10800,alarmName:"",alarmTime:1620890586e3},{alarmType:10800,alarmName:"",alarmTime:1620890469e3},{alarmType:10800,alarmName:"",alarmTime:1620890414e3},{alarmType:10800,alarmName:"",alarmTime:1620890346e3},{alarmType:10800,alarmName:"",alarmTime:1620890288e3},{alarmType:10800,alarmName:"",alarmTime:1620890179e3},{alarmType:10800,alarmName:"",alarmTime:1620890108e3},{alarmType:10800,alarmName:"",alarmTime:1620890041e3},{alarmType:10800,alarmName:"",alarmTime:1620890011e3},{alarmType:10800,alarmName:"",alarmTime:1620889937e3},{alarmType:10800,alarmName:"",alarmTime:1620889719e3},{alarmType:10800,alarmName:"",alarmTime:1620889635e3},{alarmType:10800,alarmName:"",alarmTime:1620889481e3},{alarmType:10800,alarmName:"",alarmTime:1620889451e3},{alarmType:10800,alarmName:"",alarmTime:1620889317e3},{alarmType:10800,alarmName:"",alarmTime:1620889227e3},{alarmType:10800,alarmName:"",alarmTime:1620889139e3},{alarmType:10800,alarmName:"",alarmTime:1620889034e3},{alarmType:10800,alarmName:"",alarmTime:1620888973e3},{alarmType:10800,alarmName:"",alarmTime:1620888902e3},{alarmType:10800,alarmName:"",alarmTime:1620888837e3},{alarmType:10800,alarmName:"",alarmTime:1620888767e3},{alarmType:10800,alarmName:"",alarmTime:1620888737e3},{alarmType:10800,alarmName:"",alarmTime:1620888706e3},{alarmType:10800,alarmName:"",alarmTime:1620888633e3},{alarmType:10800,alarmName:"",alarmTime:1620888571e3},{alarmType:10800,alarmName:"",alarmTime:1620888413e3},{alarmType:10800,alarmName:"",alarmTime:1620888353e3},{alarmType:10800,alarmName:"",alarmTime:1620888323e3},{alarmType:10800,alarmName:"",alarmTime:1620888249e3},{alarmType:10800,alarmName:"",alarmTime:1620888162e3},{alarmType:10800,alarmName:"",alarmTime:1620888e6},{alarmType:10800,alarmName:"",alarmTime:1620887859e3},{alarmType:10800,alarmName:"",alarmTime:1620887776e3},{alarmType:10800,alarmName:"",alarmTime:1620887734e3},{alarmType:10800,alarmName:"",alarmTime:1620887692e3},{alarmType:10800,alarmName:"",alarmTime:1620887619e3},{alarmType:10800,alarmName:"",alarmTime:1620887501e3},{alarmType:10800,alarmName:"",alarmTime:1620887355e3},{alarmType:10800,alarmName:"",alarmTime:162088732e4},{alarmType:10800,alarmName:"",alarmTime:1620887289e3},{alarmType:10800,alarmName:"",alarmTime:1620887126e3},{alarmType:10800,alarmName:"",alarmTime:1620887066e3},{alarmType:10800,alarmName:"",alarmTime:1620887034e3},{alarmType:10800,alarmName:"",alarmTime:162088697e4},{alarmType:10800,alarmName:"",alarmTime:1620886884e3},{alarmType:10800,alarmName:"",alarmTime:1620886804e3},{alarmType:10800,alarmName:"",alarmTime:1620886728e3},{alarmType:10800,alarmName:"",alarmTime:1620886609e3},{alarmType:10800,alarmName:"",alarmTime:1620886538e3},{alarmType:10800,alarmName:"",alarmTime:1620886478e3},{alarmType:10800,alarmName:"",alarmTime:1620886396e3},{alarmType:10800,alarmName:"",alarmTime:1620886334e3},{alarmType:10800,alarmName:"",alarmTime:1620886246e3},{alarmType:10800,alarmName:"",alarmTime:1620886111e3},{alarmType:10800,alarmName:"",alarmTime:1620886011e3},{alarmType:10800,alarmName:"",alarmTime:1620885956e3},{alarmType:10800,alarmName:"",alarmTime:1620885894e3},{alarmType:10800,alarmName:"",alarmTime:1620885696e3},{alarmType:10800,alarmName:"",alarmTime:1620885514e3},{alarmType:10800,alarmName:"",alarmTime:1620885484e3},{alarmType:10800,alarmName:"",alarmTime:1620885414e3},{alarmType:10800,alarmName:"",alarmTime:1620885383e3},{alarmType:10800,alarmName:"",alarmTime:1620885341e3},{alarmType:10800,alarmName:"",alarmTime:1620885306e3},{alarmType:10800,alarmName:"",alarmTime:1620885276e3},{alarmType:10800,alarmName:"",alarmTime:1620885216e3},{alarmType:10800,alarmName:"",alarmTime:1620885186e3},{alarmType:10800,alarmName:"",alarmTime:1620885114e3},{alarmType:10800,alarmName:"",alarmTime:1620885037e3},{alarmType:10800,alarmName:"",alarmTime:1620885006e3},{alarmType:10800,alarmName:"",alarmTime:1620884975e3},{alarmType:10800,alarmName:"",alarmTime:1620884945e3},{alarmType:10800,alarmName:"",alarmTime:1620884911e3},{alarmType:10800,alarmName:"",alarmTime:1620884851e3},{alarmType:10800,alarmName:"",alarmTime:162088478e4},{alarmType:10800,alarmName:"",alarmTime:1620884696e3}],success:!0}}))})}constructor(e){Object.defineProperty(this,Aa,{value:va}),this.changeModel=(e,t)=>{let n=this;this.switchVideo=parseInt(e),da&&da.JS_RequestInterface({funcName:"ChangeModel",arguments:encodeURI(JSON.stringify({model:e}))}).then((function(i){0==e?n.play({deviceSerial:t.deviceSerial,channelNo:t.channelNo,validateCode:t.validateCode}):n.play({deviceSerial:t.deviceSerial,channelNo:t.channelNo,validateCode:t.validateCode,startTime:t.startTime,endTime:t.endTime})}))},this.init=e=>{let t=this;if(!e.appKey||!e.accessToken)return void t.showTips(!1,"appkeytoken");void 0!==e.appKey&&(this.appKey=e.appKey),void 0!==e.accessToken&&(this.accessToken=e.accessToken),void 0!==e.platformId&&(this.platformId=e.platformId);let n={layout:+t.layout,userName:"",waterMark:"",waterMark:"1",iWndType:0,intelligenceEnable:1,isRecord:1,isSetPos:1,motionDetectEnable:0,playBackAlarmOverlyingEnable:0,response:{code:0,message:null,data:{appKey:e.appKey,ezvizToken:e.accessToken,videoLevel:0,logLevel:3,showMainTool:1,showSubTool:1,waterMark:"1",userName:"openteam",platformId:e.platformId}}};da.JS_RequestInterface({funcName:"Init",arguments:encodeURI(JSON.stringify(n))}).then((function(e){t.showTips(!0,"")}))},this.play=e=>{let t=this;if(!e.deviceSerial||!e.channelNo)return;void 0!==e.deviceSerial&&(this.deviceSerial=e.deviceSerial),void 0!==e.channelNo&&(this.channelNo=e.channelNo),void 0!==e.startTime&&e.startTime&&(this.startTime=e.startTime+" 00:00:00"),void 0!==e.endTime&&e.endTime&&(this.endTime=e.endTime+" 23:59:59"),void 0!==e.validateCode&&e.validateCode&&(this.validateCode=e.validateCode);let n={response:{code:0,message:null,data:{deviceSerial:e.deviceSerial,channelCode:e.channelNo,channelNo:+e.channelNo,codeIsEncrypt:0,validateCode:e.validateCode,deviceClass:t.deviceClass,deviceType:"10222",channelId:"2222222222",channelName:"channelNameTest",storeName:"storeName",storeId:"storeid",startTime:this.startTime,endTime:this.endTime}}};"1"===t.deviceClass?(n.response.data.channelCode=t.channelNo,n.response.data.platformId=t.platformId):n.response.data.channelNo=+t.channelNo,1===this.switchVideo&&(this.startTime&&(n.response.data.startTime=this.startTime),this.endTime&&(n.response.data.endTime=this.endTime)),da.JS_RequestInterface({funcName:0===this.switchVideo?"StartPreview":"StartPlayback",arguments:encodeURI(JSON.stringify(n))}).then((function(e){t.showTips(!0,"/")})).catch((e=>{}))},this.showCBInfo=e=>{this.callbackMessage=this.callbackMessage+JSON.stringify(e)+"\n\n"},this.showTips=(e,t)=>{},this.hideVideo=()=>{da.JS_HideWnd()},this.showVideo=()=>{da.JS_ShowWnd()},this.GetLayout=()=>{da.JS_RequestInterface({funcName:"GetLayout",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:null}}))}).then((function(e){}))},this.capturePicture=e=>{da.JS_RequestInterface({funcName:"CaptureJPGEx",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:null}}))}).then((function(e){}))},this.stop=(e=-1)=>{da.JS_RequestInterface({funcName:"StopPlay",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){}))},this.setLayout=e=>{let t=parseInt(e);isNaN(t)||0==t||t>=13||(this.layout=t,da.JS_RequestInterface({funcName:"SetLayout",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{layout:t}}}))}).then((function(e){})))},this.setSoundVolumn=(e=-1,t)=>{da.JS_RequestInterface({funcName:"SoundVolumn",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e),volumn:parseInt(t)}}}))}).then((function(e){}))},this.testMute=()=>{var e=parseInt(prompt("ID"));da.JS_RequestInterface({funcName:"MuteOnOff",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:e}}}))}).then((function(e){}))},this.testSelectWnd=()=>{var e=parseInt(prompt("ID"));da.JS_RequestInterface({funcName:"SelectPlayWnd",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:e}}}))}).then((function(e){}))},this.setVideoLevel=(e,t)=>{da.JS_RequestInterface({funcName:"SetVideoLevel",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:1==this.switchVideo?0:parseInt(e),level:parseInt(t,10)}}}))}).then((function(e){}))},this.startTalk=e=>{da.JS_RequestInterface({funcName:"StartTalk",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){}))},this.stopTalk=e=>{da.JS_RequestInterface({funcName:"StopTalk",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){}))},this.startSave=e=>{da.JS_RequestInterface({funcName:"StartRecord",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){}))},this.stopSave=e=>{da.JS_RequestInterface({funcName:"StopRecord",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){}))},this.appKey="b9a3ad6e8026410095d8252169fa430a",this.accessToken="at.2vtum8873rrcwbrv431qb6pn94dkbv23-8dw2twn355-1u3x014-wrthellzk",this.deviceSerial="C33368372",this.channelNo="1",this.validateCode="",this.deviceClass="0",this.platformId="",this.startTime="",this.endTime="",this.layout=2,this.switchVideo=0,this.tips="",this.successTip=!1,this.tipsShow=!1,da=function(e,t,n,i){return new WebControl({szPluginContainer:e,iServicePortStart:14510,iServicePortEnd:14519,cbConnectSuccess:t,cbConnectError:n,cbConnectClose:i})}("playWnd",pa,ha,ma),function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}(this,Aa)[Aa]()}}function va(){window.onscroll=function(){null!=da&&da.JS_Resize(900,500)},window.onresize=function(){null!=da&&da.JS_Resize(900,500)},window.onunload=function(){try{da.JS_HideWnd(),null!=da&&(da.JS_DestroyWnd().then((function(){}),(function(){})),da.JS_StopService("window").then((function(){da.JS_Disconnect().then((function(){}),(function(){}))})))}catch(e){}},window.onpagehide=function(){try{da.JS_HideWnd()}catch(e){}}}window.EZUIKit={};const ga={EZUIKitPlayer:ta,EZUIKitInspection:oa,EZUIKitInspectionUI:class{constructor(e,t){this.init=()=>{const e=document.getElementById(this.options.id+"-destroyed");var t;e&&(null==(t=e.parentNode)||t.removeChild(e));const n=document.createElement("div");n.id=this.options.id,n.style.cssText="\n            position: relative;\n            overflow: hidden;\n            display: flex;\n            flex-wrap: wrap;\n            width: 100%;\n            height: 100%;\n        ",this.container.append(n),this.$inspection=n,this.inspection=new oa(this.$inspection,aa({},this.options,{onScreenSelect:(e,t)=>{if(this.inspection){for(let e=0;e<this.inspection.screenList.length;e++){const t=this.$inspection.children[e];t&&t.classList.remove("screen-select")}const t=this.$inspection.children[e];t&&t.classList.add("screen-select")}this.options.onScreenSelect&&this.options.onScreenSelect(e,t)}}));for(let e=0;e<this.inspection.screenList.length;e++)l(this.$inspection,"#"+this.options.id+"-screen-"+e,"click",(t=>{this.screenSelect(e)}));this.screenSelect(this.options.defaultSelect)},this.initPlayer=(e,t,n)=>{this.inspection&&this.inspection.initPlayer(e,t,n)},this.destroy=(e=!1)=>{this.inspection&&this.inspection.destroy(e)},this.nextPage=()=>{var e;null==(e=this.inspection)||e.nextPage()},this.lastPage=()=>{var e;null==(e=this.inspection)||e.lastPage()},this.startTurn=()=>{var e;null==(e=this.inspection)||e.startTurn()},this.stopTurn=()=>{var e;null==(e=this.inspection)||e.stopTurn()},this.setDelay=e=>{var t;null==(t=this.inspection)||t.setDelay(e)},this.setLoop=e=>{var t;null==(t=this.inspection)||t.setLoop(e)},this.changePageSize=e=>{var t;null==(t=this.inspection)||t.changePageSize(e)},this.pageTo=e=>{var t;null==(t=this.inspection)||t.pageTo(e)},this.screenSelect=e=>{var t;if(this.inspection)return null==(t=this.inspection)?void 0:t.screenSelect(e)},this.setText=e=>{var t;return null==(t=this.inspection)?void 0:t.setText(e)},this.setBackground=e=>{var t;return null==(t=this.inspection)?void 0:t.setBackground(e)},this.getScreen=e=>{var t;return null==(t=this.inspection)?void 0:t.getScreen(e)},this.getScreenList=()=>{var e;return null==(e=this.inspection)?void 0:e.getScreenList()},this.destroyScreen=e=>{var t;return null==(t=this.inspection)?void 0:t.destroyScreen(e)},this.getDeviceList=()=>{var e;return null==(e=this.inspection)?void 0:e.getDeviceList()},this.stopAll=()=>{var e;const t=null==(e=this.inspection)?void 0:e.getScreenList();if(t)for(let e=0;e<t.length;e++)t[e].player&&(t[e].options.url.indexOf("live")>0?t[e].player.stop((()=>{}),!0):t[e].player.pause())},this.playAll=()=>{var e;const t=null==(e=this.inspection)?void 0:e.getScreenList();if(t)for(let e=0;e<t.length;e++)t[e].player&&(t[e].options.url.indexOf("live")>0?t[e].player.play():t[e].player.resume())},this.muteAll=()=>{var e;const t=null==(e=this.inspection)?void 0:e.getScreenList();if(t)for(let e=0;e<t.length;e++)t[e].player&&t[e].player.closeSound()},this.unmuteAll=()=>{var e;const t=null==(e=this.inspection)?void 0:e.getScreenList();if(t)for(let e=0;e<t.length;e++)t[e].player&&t[e].player.openSound()},this.container=e,this.options=Object.assign({},sa,t||{}),this.$inspection=document.createElement("div");const n=document.createElement("style");n.innerHTML=this.options.selectStyle,document.head.appendChild(n),this.init(),this.initPlayer=this.initPlayer.bind(this),this.nextPage=this.nextPage.bind(this),this.lastPage=this.lastPage.bind(this),this.startTurn=this.startTurn.bind(this),this.stopTurn=this.stopTurn.bind(this),this.setDelay=this.setDelay.bind(this),this.setLoop=this.setLoop.bind(this),this.changePageSize=this.changePageSize.bind(this),this.pageTo=this.pageTo.bind(this),this.screenSelect=this.screenSelect.bind(this),this.setText=this.setText.bind(this),this.setBackground=this.setBackground.bind(this),this.destroy=this.destroy.bind(this),this.getScreen=this.getScreen.bind(this),this.getScreenList=this.getScreenList.bind(this),this.destroyScreen=this.destroyScreen.bind(this),this.getDeviceList=this.getDeviceList.bind(this),this.stopAll=this.stopAll.bind(this),this.playAll=this.playAll.bind(this),this.muteAll=this.muteAll.bind(this),this.unmuteAll=this.unmuteAll.bind(this)}},EZUIKitHD:fa};exports.EZUIKitHD=fa,exports.EZUIKitPlayer=ta,exports.default=ga;
