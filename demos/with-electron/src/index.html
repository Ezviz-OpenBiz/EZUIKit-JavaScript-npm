<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <title>With Electron</title>
    <style>
      #video-container {
        height: 400px;
        background-color: #000;
      }
    </style>
    <script src="./ezuikit.js"></script>
  </head>

  <body>
    <div className="demo">
      <h2>视频模式使用示例：</h2>
      <div>
        <div id="video-container"></div>
      </div>
      <div>
        <button class="init">出初始化(init)</button>
        <button class="play">play</button>
        <button class="stop">stop</button>
        <button class="getOSDTime">getOSDTime</button>
        <button class="capturePicture">capturePicture</button>
        <button class="openSound">openSound</button>
        <button class="closeSound">closeSound</button>
        <button class="startSave">startSave</button>
        <button class="stopSave">stopSave</button>
        <button class="startTalk">开始对讲</button>
        <button class="stopTalk">结束对讲</button>
        <button class="fullscreen">全屏</button>
        <button class="destroy">销毁</button>
      </div>
    </div>
    <script>
      (function () {
        var player = null;

        function destroy() {
          if (player) {
            player.destroy();
          }
          player = null;
        }

        document.querySelector(".init").addEventListener("click", () => {
          if (player) {
            destroy();
          }

          // fetch('https://open.ys7.com/jssdk/ezopen/demo/token')
          //   .then(response => response.json())
          //   .then(res => {
          //     var accessToken = res.data.accessToken;
          player = new EZUIKit.EZUIKitPlayer({
            id: "video-container", // 视频容器ID
            accessToken:
              "ra.c6wqy0gzcm1f6ryr5sh2vdqr7zo7zu26-1ovtzabpog-1rbv9vr-urpfpktwb",
            url: "ezopen://open.ys7.com/BC7900686/1.live",
            template: "pcLive", // simple: 极简版; pcLive: 预览; pcRec: 回放; security: 安防版; voice: 语音版;
            //   plugin: ["talk"], // 加载插件，talk-对讲
            // width: 600,
            height: 400,
            // quality: 1, // 
            language: "en", // zh | en
            // debugDownloadData: true,
            handleError: (error) => {
              console.error("handleError", error);
            },
            env: {
              // https://open.ys7.com/help/1772?h=domain
              // domain默认是 https://open.ys7.com, 如果是私有化部署或海外的环境，请配置对应的domain
              // The default domain is https://open.ys7.com If it is a private deployment or overseas (outside of China) environment, please configure the corresponding domain
              domain: "https://open.ys7.com",
            },
            // 日志打印设置
            loggerOptions: {
              // player.setLoggerOptions(options)
              level: "INFO", // INFO LOG  WARN  ERROR
              name: "ezuikit",
              showTime: true,
            },
            // 视频流的信息回调类型
            /**
             * 打开流信息回调，监听 streamInfoCB 事件
             * 0 : 每次都回调
             * 1 : 只回调一次
             * 注意：会影响性能
             * 默认值 1
             */
            streamInfoCBType: 1,
            // 推荐本地配置 staticPath
            staticPath: "./ezuikit_static", // 如果想使用本地静态资源，请复制根目录下ezuikit_static 到当前目录下， 然后设置该值
            // v8.1.10
            // 自定义清晰度 默认 null, 如果有值 sdk 内部不在进行获取, null 默认使用接口获取的清晰度列表, videoLevelList.length === 0 不展示清晰度控件 sdk 内部不在进行获取, videoLevelList.length > 0 展示控件 sdk 内部不在进行获取
            // videoLevelList: [
            //   { level: 1, name: "标清", streamTypeIn: 2 }, // 需要保证支持子码流 (streamTypeIn=2)
            //   { level: 2, name: "高清", streamTypeIn: 1 },
            // ],
          });

          // 8.1.x 事件监听
          // player.eventEmitter.on(EZUIKit.EZUIKitPlayer.EVENTS.videoInfo, (info) => {
          //     console.log("eventEmitter videoInfo", info);
          // });
          // 8.2.x 事件监听
          player.on(EZUIKit.EZUIKitPlayer.EVENTS.videoInfo, (info) => {
              console.log("videoInfo", info);
          });

          // 8.1.x 事件监听
          // player.eventEmitter.on(EZUIKit.EZUIKitPlayer.EVENTS.audioInfo,(info) => {
          //   console.log("eventEmitter audioInfo", info);
          // });
          // 8.2.x 事件监听
          player.on(EZUIKit.EZUIKitPlayer.EVENTS.audioInfo,(info) => {
            console.log("audioInfo", info);
          });

          // 首帧渲染成功
          // first frame display
          // 8.1.x 事件监听
          // player.eventEmitter.on(EZUIKit.EZUIKitPlayer.EVENTS.firstFrameDisplay,() => {
          //   console.log("firstFrameDisplay ");
          // });
          // 8.2.x 事件监听
          player.on(EZUIKit.EZUIKitPlayer.EVENTS.firstFrameDisplay,() => {
            console.log("firstFrameDisplay ");
          });

          // 8.1.x 事件监听
          // player.eventEmitter.on(EZUIKit.EZUIKitPlayer.EVENTS.streamInfoCB, (info) => {
          //     console.log("eventEmitter streamInfoCB ", info);
          // });
          // 8.2.x 事件监听
          player.on(EZUIKit.EZUIKitPlayer.EVENTS.streamInfoCB, (info) => {
              console.log("streamInfoCB ", info);
          });
        });

        document.querySelector(".fullscreen").addEventListener("click", () => {
          if (player) player.fullscreen();
        });

        document.querySelector(".play").addEventListener("click", () => {
          if (player) {
            player.play().then((data) => {
              console.log("play", data);
            });
          }
        });

        document.querySelector(".stop").addEventListener("click", () => {
          if (player) {
            player.stop().then((data) => {
              console.log("stop", data);
            });
          }
        });

        document.querySelector(".getOSDTime").addEventListener("click", () => {
          if (player) {
            player.getOSDTime().then((data) => {
              console.log("getOSDTime: ", data);
            });
          }
        });
        document
          .querySelector(".capturePicture")
          .addEventListener("click", () => {
            if (player) {
              player.capturePicture().then((data) => {
                console.log("capturePicture 获取 数据", data);
              });
            }
          });

        document.querySelector(".openSound").addEventListener("click", () => {
          if (player) {
            player.openSound().then((data) => {
              console.log("openSound 获取 数据", data);
            });
          }
        });

        document.querySelector(".closeSound").addEventListener("click", () => {
          if (player) {
            player.closeSound().then((data) => {
              console.log("closeSound 获取 数据", data);
            });
          }
        });
        document.querySelector(".startSave").addEventListener("click", () => {
          if (player) {
            player.startSave(`${new Date().getTime()}`).then((data) => {
              console.log("startSave 获取 数据", data);
            });
          }
        });
        document.querySelector(".stopSave").addEventListener("click", () => {
          if (player) {
            player.stopSave().then((data) => {
              console.log("stopSave 获取 数据", data);
            });
          }
        });
        document.querySelector(".startTalk").addEventListener("click", () => {
          if (player) player.startTalk();
        });
        document.querySelector(".stopTalk").addEventListener("click", () => {
          if (player) player.stopTalk();
        });
        document.querySelector(".destroy").addEventListener("click", destroy);
      })();
    </script>
  </body>
</html>
