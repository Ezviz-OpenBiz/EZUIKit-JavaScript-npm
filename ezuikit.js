(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):(global=typeof globalThis!=="undefined"?globalThis:global||self,global.EZUIKit=factory())})(this,function(){"use strict";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread2(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _regeneratorRuntime(){_regeneratorRuntime=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t)})})}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a)},function(t){invoke("throw",t,i,a)}):e.resolve(h).then(function(t){u.value=t,i(u)},function(t){return invoke("throw",t,i,a)})}a(c.arg)}var r;o(this,"_invoke",{value:function(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r)})}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw new Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this}),define(g,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _classCallCheck$1(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass$1(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function(){};return{s:F,n:function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function(){it=it.call(o)},n:function(){var step=it.next();normalCompletion=step.done;return step},e:function(e){didErr=true;err=e},f:function(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function _toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key)}var Core=function(){function Core(x,y){_classCallCheck$1(this,Core);this.coreX=x;this.coreY=y}_createClass$1(Core,[{key:"toString",value:function toString(){return"".concat(this.coreX,"-").concat(this.coreY)}}]);return Core}();Date.prototype.Format=function(fmt){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(fmt))fmt=fmt.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}return fmt};var addJs=function addJs(filepath,callback,isReadyFun,callbackValue){var headerScript=document.getElementsByTagName("head")[0].getElementsByTagName("script");var isReady=false;if(isReadyFun){isReady=isReadyFun()}else{for(var i=0;i<headerScript.length;i++){if(headerScript[i].getAttribute("src")==filepath){isReady=true;if(headerScript[i].readyState){headerScript[i].onreadystatechange=function(){if(headerScript[i].readyState=="complete"||headerScript[i].readyState=="loaded"){headerScript[i].onreadystatechange=null;callback(callbackValue)}}}else{headerScript[i].onload=function(){callback(callbackValue)}}}}}if(!isReady){var oJs=document.createElement("script");oJs.setAttribute("src",filepath);oJs.setAttribute("crossorigin",true);oJs.onload=function(){return callback(callbackValue)};document.getElementsByTagName("head")[0].appendChild(oJs)}else{setTimeout(function(){callback(callbackValue)},15)}};var addCss=function addCss(filepath,callback){var headerLink=document.getElementsByTagName("head")[0].getElementsByTagName("link");var isReady=false;for(var i=0;i<headerLink.length;i++){if(headerLink[i].getAttribute("href")==filepath){isReady=true}}if(!isReady){var oJs=document.createElement("link");oJs.rel="stylesheet";oJs.type="text/css";oJs.href=filepath;oJs.onload=callback;document.getElementsByTagName("head")[0].appendChild(oJs)}};var isPromise=function isPromise(obj){return!!obj&&(_typeof(obj)==="object"||typeof obj==="function")&&typeof obj.then==="function"};var getQueryString=function getQueryString(name,url){var r=new RegExp("(\\?|#|&)"+name+"=(.*?)(#|&|$)");var m=(url||window.location.href).match(r);return decodeURIComponent(m?m[2]:"")};var insertAfter=function insertAfter(newElement,targetElement){var parent=targetElement.parentNode;if(parent.lastChild==targetElement){parent.appendChild(newElement)}else{parent.insertBefore(newElement,targetElement.nextSibling)}};var requestFullScreen=function requestFullScreen(element){console.log("requestFullScreen",document.getElementById(element));if(navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1){element.webkitRequestFullScreen()}else{var requestMethod=element.requestFullScreen||element.webkitRequestFullScreen||element.mozRequestFullScreen||element.msRequestFullScreen;if(requestMethod){requestMethod.call(element)}else if(typeof window.ActiveXObject!=="undefined"){var wscript=new window.ActiveXObject("WScript.Shell");if(wscript!==null){wscript.SendKeys("{F11}")}}}};var requestMobileFullScreen=function requestMobileFullScreen(element){var width=document.documentElement.clientWidth;var height=document.documentElement.clientHeight;var wrapper=element;var style="";style+="width:"+height+"px;";style+="height:"+width+"px;";style+="-webkit-transform: rotate(90.001deg); transform: rotate(90.001deg);";style+="-webkit-transform-origin: "+width/2+"px "+width/2+"px;";style+="transform-origin: "+width/2+"px "+width/2+"px;";style+="position: fixed;top: 0;left: 0;z-index:10";wrapper.style.cssText=style};var requestFullScreenPromise=function requestFullScreenPromise(element){requestFullScreen(element);var promise=new Promise(function(resolve,reject){var timeInterval=setInterval(function(){var isFullScreen=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(isFullScreen){clearInterval(timeInterval);return resolve(true)}},100);var timeOut=setTimeout(function(){var isFullScreen=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(!isFullScreen){reject(false)}clearTimeout(timeOut)},2e3)});return promise};var cancelMobileFullScreen=function cancelMobileFullScreen(element,width,height){var style="";style+="width:"+width+"px;";style+="height:"+height+"px;";style+="-webkit-transform: none; transform: none;";style+="-webkit-transform-origin: 0 0;";style+="transform-origin: 0 0;";element.style.cssText=style};var cancelFullScreen=function cancelFullScreen(){if(document.exitFullscreen){document.exitFullscreen()}else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}};var cancelFullScreenPromise=function cancelFullScreenPromise(element){cancelFullScreen();var promise=new Promise(function(resolve,reject){var timeInterval=setInterval(function(){var isFullScreen=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(!isFullScreen){clearInterval(timeInterval);return resolve(true)}},50);var timeOut=setTimeout(function(){var isFullScreen=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(isFullScreen){reject(false)}clearTimeout(timeOut)},2e3)});return promise};var matchEzopenUrl=function matchEzopenUrl(ezopenUrl){var deviceSerial=ezopenUrl.split("/")[3];var channelNo=ezopenUrl.split("/")[4].split(".")[0];var validCode=ezopenUrl.split("/")[2].split("@").length===2?ezopenUrl.split("/")[2].split("@")[0]:"";var hd=ezopenUrl.indexOf(".hd")!==-1;var type=ezopenUrl.indexOf(".cloud.rec")!==-1?"cloud.rec":"rec";return{deviceSerial:deviceSerial,channelNo:channelNo,validCode:validCode,hd:hd,type:type}};var matchUrl=function matchUrl(url){var reg=/\/([A-Za-z\d]{9})\_(\d)\_(\d)/;var matchedArray=url.match(reg);if(matchedArray.length>3){var deviceSerial=matchedArray[1];var channelNo=matchedArray[2];var hd=matchedArray[3]==="1";var type="live";if(url.indexOf("rec=local")>-1){type="rec"}else if(url.indexOf("rec=cloud")>-1){type="cloud.rec"}return{deviceSerial:deviceSerial,channelNo:channelNo,hd:hd,type:type}}return{}};function isJSON(str){if(typeof str==="string"){try{var obj=JSON.parse(str);if(_typeof(obj)==="object"&&obj){return true}return false}catch(e){return false}}console.log("It is not a string!")}var request=function request(url,method,params,header,success,error){var _url=url;var http_request=new XMLHttpRequest;http_request.onreadystatechange=function(){if(http_request.readyState==4){if(http_request.status==200){if(isJSON(http_request.responseText)){var _data=JSON.parse(http_request.responseText);success(_data)}else{success(http_request.responseText)}}}};http_request.open(method,_url,true);var data=new FormData;for(var i in params){data.append(i,params[i])}if(header&&_typeof(header)==="object"){for(var i in header){http_request.setRequestHeader(i,header[i])}}http_request.send(data)};var isMobile=function isMobile(){if(window){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone|Opera Mini)/i)}return false};var HLS=function(){function HLS(videoId,url){var _this=this;_classCallCheck$1(this,HLS);addJs("https://open.ys7.com/assets/ezuikit_v3.4/js/hls.js",function(){console.log("加载hls.min.js成功",window.Hls);console.log("isSupportHls",window.Hls.isSupported());if(window.Hls.isSupported()){_this.initHLS(videoId,url)}},function(){return!!window.Hls})}_createClass$1(HLS,[{key:"toString",value:function toString(){return"hls ".concat(this.coreX,"-").concat(this.coreY)}},{key:"initHLS",value:function initHLS(videoId,hlsUrl){var _matchUrl=matchUrl(hlsUrl),deviceSerial=_matchUrl.deviceSerial,channelNo=_matchUrl.channelNo;_matchUrl.hd;window.ezuikitMonitor.report({protocol:"hls",url:hlsUrl,serial:deviceSerial,no:channelNo,action:1});var video=document.getElementById(videoId);var hls=new window.Hls({defaultAudioCodec:"mp4a.40.2"});hls.loadSource(hlsUrl);hls.attachMedia(video);hls.on(window.Hls.Events.MANIFEST_PARSED,function(){video.play()});hls.on(window.Hls.Events.ERROR,function(event,data){if(data.fatal){switch(data.type){case window.Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover");hls.startLoad();break;case window.Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover");hls.recoverMediaError();break;default:hls.destroy();break}}});this.hls=hls;this.video=video;this.hlsUrl=hlsUrl}},{key:"play",value:function play(){console.log("执行hls播放",this.video);this.hls.startLoad();this.video.play()}},{key:"stop",value:function stop(){this.video.pause();this.hls.stopLoad()}}]);return HLS}();var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x}var flv_min={exports:{}};(function(module,exports){!function(e,t){module.exports=t()}(self,()=>(()=>{var e={99:e=>{var t,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function n(){n.init.call(this)}e.exports=n,e.exports.once=function(e,t){return new Promise(function(i,s){function a(i){e.removeListener(t,n),s(i)}function n(){"function"==typeof e.removeListener&&e.removeListener("error",a),i([].slice.call(arguments))}f(e,t,n,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&f(e,"error",t,i)}(e,a,{once:!0})})},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var o=10;function r(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function l(e,t,i,s){var a,n,o,l;if(r(i),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),n=e._events),o=n[t]),void 0===o)o=n[t]=i,++e._eventsCount;else if("function"==typeof o?o=n[t]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(a=d(e))>0&&o.length>a&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=o.length,l=h,console&&console.warn&&console.warn(l)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(e,t,i){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},a=h.bind(s);return a.listener=i,s.wrapFn=a,a}function c(e,t,i){var s=e._events;if(void 0===s)return[];var a=s[t];return void 0===a?[]:"function"==typeof a?i?[a.listener||a]:[a]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(a):m(a,a.length)}function u(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function m(e,t){for(var i=new Array(t),s=0;s<t;++s)i[s]=e[s];return i}function f(e,t,i,s){if("function"==typeof e.on)s.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function a(n){s.once&&e.removeEventListener(t,a),i(n)})}}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),n.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return d(this)},n.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var a="error"===e,n=this._events;if(void 0!==n)a=a&&void 0===n.error;else if(!a)return!1;if(a){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var r=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw r.context=o,r}var d=n[e];if(void 0===d)return!1;if("function"==typeof d)s(d,this,t);else{var l=d.length,h=m(d,l);for(i=0;i<l;++i)s(h[i],this,t)}return!0},n.prototype.addListener=function(e,t){return l(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return l(this,e,t,!0)},n.prototype.once=function(e,t){return r(t),this.on(e,_(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return r(t),this.prependListener(e,_(this,e,t)),this},n.prototype.removeListener=function(e,t){var i,s,a,n,o;if(r(t),void 0===(s=this._events))return this;if(void 0===(i=s[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(a=-1,n=i.length-1;n>=0;n--)if(i[n]===t||i[n].listener===t){o=i[n].listener,a=n;break}if(a<0)return this;0===a?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,a),1===i.length&&(s[e]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",e,o||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,i,s;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var a,n=Object.keys(i);for(s=0;s<n.length;++s)"removeListener"!==(a=n[s])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this},n.prototype.listeners=function(e){return c(this,e,!0)},n.prototype.rawListeners=function(e){return c(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):u.call(e,t)},n.prototype.listenerCount=u,n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},994:(e,t,i)=>{i.d(t,{Z:()=>s});const s=class{constructor(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}isComplete(){const e=!this.hasAudio||this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!this.hasVideo||this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&e&&t}isSeekable(){return this.hasKeyframesIndex}getNearestKeyframe(e){if(null==this.keyframesIndex)return null;const t=this.keyframesIndex,i=this._search(t.times,e);return{index:i,milliseconds:t.times[i],fileposition:t.filepositions[i]}}_search(e,t){let i=0;const s=e.length-1;let a=0,n=0,o=s;for(t<e[0]&&(i=0,n=o+1);n<=o;){if(a=n+Math.floor((o-n)/2),a===s||t>=e[a]&&t<e[a+1]){i=a;break}e[a]<t?n=a+1:o=a-1}return i}}},68:(e,t,i)=>{i.d(t,{J1:()=>o,Vn:()=>n,Wk:()=>s,Yy:()=>a});class s{constructor(e,t,i,s,a){this.dts=e,this.pts=t,this.duration=i,this.originalDts=s,this.isSyncPoint=a,this.fileposition=null}}class a{constructor(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}appendSyncPoint(e){e.isSyncPoint=!0,this.syncPoints.push(e)}}class n{constructor(){this._list=[]}clear(){this._list=[]}appendArray(e){const t=this._list;0!==e.length&&(t.length>0&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))}getLastSyncPointBeforeDts(e){if(0===this._list.length)return null;const t=this._list;let i=0;const s=t.length-1;let a=0,n=0,o=s;for(e<t[0].dts&&(i=0,n=o+1);n<=o;){if(a=n+Math.floor((o-n)/2),a===s||e>=t[a].dts&&e<t[a+1].dts){i=a;break}t[a].dts<e?n=a+1:o=a-1}return this._list[i]}}class o{constructor(e){this._type=e,this._list=[],this._lastAppendLocation=-1}get type(){return this._type}get length(){return this._list.length}isEmpty(){return 0===this._list.length}clear(){this._list=[],this._lastAppendLocation=-1}_searchNearestSegmentBefore(e){var t;const i=this._list;if(0===i.length)return-2;const s=i.length-1;let a=0,n=0,o=s,r=0;if(e<i[0].originalBeginDts)return r=-1,r;for(;n<=o;){if(a=n+Math.floor((o-n)/2),a===s||e>((null===(t=i[a].lastSample)||void 0===t?void 0:t.originalDts)||0)&&e<i[a+1].originalBeginDts){r=a;break}i[a].originalBeginDts<e?n=a+1:o=a-1}return r}_searchNearestSegmentAfter(e){return this._searchNearestSegmentBefore(e)+1}append(e){var t,i;const s=this._list,a=e,n=this._lastAppendLocation;let o=0;-1!==n&&n<s.length&&a.originalBeginDts>=((null===(i=null===(t=s[n])||void 0===t?void 0:t.lastSample)||void 0===i?void 0:i.originalDts)||0)&&(n===s.length-1||n<s.length-1&&a.originalBeginDts<s[n+1].originalBeginDts)?o=n+1:s.length>0&&(o=this._searchNearestSegmentBefore(a.originalBeginDts)+1),this._lastAppendLocation=o,this._list.splice(o,0,a)}getLastSegmentBefore(e){const t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null}getLastSampleBefore(e){const t=this.getLastSegmentBefore(e);return null!=t?t.lastSample:null}getLastSyncPointBefore(e){let t=this._searchNearestSegmentBefore(e),i=this._list[t].syncPoints;for(;0===i.length&&t>0;)t--,i=this._list[t].syncPoints;return i.length>0?i[i.length-1]:null}}},943:(e,t,i)=>{i.d(t,{Z:()=>Ie});var s=i(99),a=i(645),n=i(479),o=i(994);function r(e,t,i){const s=e;if(t+i<s.length){for(;i--;)if(128!=(192&s[++t]))return!1;return!0}return!1}const d=function(e){const t=[],i=e;let s=0;const a=e.length;for(;s<a;)if(i[s]<128)t.push(String.fromCharCode(i[s])),++s;else{if(i[s]<192);else if(i[s]<224){if(r(i,s,1)){const e=(31&i[s])<<6|63&i[s+1];if(e>=128){t.push(String.fromCharCode(65535&e)),s+=2;continue}}}else if(i[s]<240){if(r(i,s,2)){const e=(15&i[s])<<12|(63&i[s+1])<<6|63&i[s+2];if(e>=2048&&55296!=(63488&e)){t.push(String.fromCharCode(65535&e)),s+=3;continue}}}else if(i[s]<248&&r(i,s,3)){let e=(7&i[s])<<18|(63&i[s+1])<<12|(63&i[s+2])<<6|63&i[s+3];if(e>65536&&e<1114112){e-=65536,t.push(String.fromCharCode(e>>>10|55296)),t.push(String.fromCharCode(1023&e|56320)),s+=4;continue}}t.push(String.fromCharCode(65533)),++s}return t.join("")};var l=i(411);const h=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}();class _{static parseScriptData(e,t,i){const s={};try{const a=_.parseValue(e,t,i),n=_.parseValue(e,t+a.size,i-a.size);s[a.data]=n.data}catch(e){a.Z.e("AMF",e.toString())}return s}static parseObject(e,t,i){if(i<3)throw new l.rT("Data not enough when parse ScriptDataObject");const s=_.parseString(e,t,i),a=_.parseValue(e,t+s.size,i-s.size),n=a.objectEnd;return{data:{name:s.data,value:a.data},size:s.size+a.size,objectEnd:n}}static parseVariable(e,t,i){return _.parseObject(e,t,i)}static parseString(e,t,i){if(i<2)throw new l.rT("Data not enough when parse String");const s=new DataView(e,t,i).getUint16(0,!h);let a;return a=s>0?d(new Uint8Array(e,t+2,s)):"",{data:a,size:2+s}}static parseLongString(e,t,i){if(i<4)throw new l.rT("Data not enough when parse LongString");const s=new DataView(e,t,i).getUint32(0,!h);let a;return a=s>0?d(new Uint8Array(e,t+4,s)):"",{data:a,size:4+s}}static parseDate(e,t,i){if(i<10)throw new l.rT("Data size invalid when parse Date");const s=new DataView(e,t,i);let a=s.getFloat64(0,!h);return a+=60*s.getInt16(8,!h)*1e3,{data:new Date(a),size:10}}static parseValue(e,t,i){if(i<1)throw new l.rT("Data not enough when parse Value");const s=new DataView(e,t,i);let n=1;const o=s.getUint8(0);let r,d=!1;try{switch(o){case 0:r=s.getFloat64(1,!h),n+=8;break;case 1:r=!!s.getUint8(1),n+=1;break;case 2:{const s=_.parseString(e,t+1,i-1);r=s.data,n+=s.size;break}case 3:{r={};let a=0;for(9==(16777215&s.getUint32(i-4,!h))&&(a=3);n<i-4;){const s=_.parseObject(e,t+n,i-n-a);if(s.objectEnd)break;r[s.data.name]=s.data.value,n+=s.size}if(n<=i-3){9===(16777215&s.getUint32(n-1,!h))&&(n+=3)}break}case 8:{r={},n+=4;let a=0;for(9==(16777215&s.getUint32(i-4,!h))&&(a=3);n<i-8;){const s=_.parseVariable(e,t+n,i-n-a);if(s.objectEnd)break;r[s.data.name]=s.data.value,n+=s.size}if(n<=i-3){9===(16777215&s.getUint32(n-1,!h))&&(n+=3)}break}case 9:r=void 0,n=1,d=!0;break;case 10:{r=[];const a=s.getUint32(1,!h);n+=4;for(let s=0;s<a;s++){const s=_.parseValue(e,t+n,i-n);r.push(s.data),n+=s.size}break}case 11:{const s=_.parseDate(e,t+1,i-1);r=s.data,n+=s.size;break}case 12:{const s=_.parseString(e,t+1,i-1);r=s.data,n+=s.size;break}default:n=i,a.Z.w("AMF","Unsupported AMF value type "+o.toString())}}catch(e){a.Z.e("AMF",e.toString())}return{data:r,size:n,objectEnd:d}}}const c=_;const u=class{constructor(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}destroy(){this._buffer=null}_fillCurrentWord(){var e;const t=this._total_bytes-this._buffer_index;if(t<=0)throw new l.rT("ExpGolomb: _fillCurrentWord() but no bytes available");const i=Math.min(4,t),s=new Uint8Array(4);s.set(null===(e=this._buffer)||void 0===e?void 0:e.subarray(this._buffer_index,this._buffer_index+i)),this._current_word=new DataView(s.buffer).getUint32(0,!1),this._buffer_index+=i,this._current_word_bits_left=8*i}readBits(e){if(e>32)throw new l.OC("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){const t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}let t=this._current_word_bits_left?this._current_word:0;t>>>=32-this._current_word_bits_left;const i=e-this._current_word_bits_left;this._fillCurrentWord();const s=Math.min(i,this._current_word_bits_left),a=this._current_word>>>32-s;return this._current_word<<=s,this._current_word_bits_left-=s,t=t<<s|a,t}readBool(){return 1===this.readBits(1)}readByte(){return this.readBits(8)}_skipLeadingZero(){let e;for(e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}readUEG(){const e=this._skipLeadingZero();return this.readBits(e+1)-1}readSEG(){const e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}};class m{static _ebsp2rbsp(e){const t=e,i=t.byteLength,s=new Uint8Array(i);let a=0;for(let e=0;e<i;e++)e>=2&&3===t[e]&&0===t[e-1]&&0===t[e-2]||(s[a]=t[e],a++);return new Uint8Array(s.buffer,0,a)}static parseSPS(e){const t=e.subarray(1,4);let i="avc1.";for(let e=0;e<3;e++){let s=t[e].toString(16);s.length<2&&(s="0"+s),i+=s}const s=m._ebsp2rbsp(e);let a=new u(s);a.readByte();const n=a.readByte();a.readByte();const o=a.readByte();a.readUEG();const r=m.getProfileString(n),d=m.getLevelString(o);let l=1,h=420;const _=[0,420,422,444];let c=8,f=8;if((100===n||110===n||122===n||244===n||44===n||83===n||86===n||118===n||128===n||138===n||144===n)&&(l=a.readUEG(),3===l&&a.readBits(1),l<=3&&(h=_[l]),c=a.readUEG()+8,f=a.readUEG()+8,a.readBits(1),a.readBool())){const e=3!==l?8:12;for(let t=0;t<e;t++)a.readBool()&&(t<6?m._skipScalingList(a,16):m._skipScalingList(a,64))}a.readUEG();const p=a.readUEG();if(0===p)a.readUEG();else if(1===p){a.readBits(1),a.readSEG(),a.readSEG();const e=a.readUEG();for(let t=0;t<e;t++)a.readSEG()}const g=a.readUEG();a.readBits(1);const v=a.readUEG(),E=a.readUEG(),S=a.readBits(1);0===S&&a.readBits(1),a.readBits(1);let y=0,A=0,b=0,R=0;a.readBool()&&(y=a.readUEG(),A=a.readUEG(),b=a.readUEG(),R=a.readUEG());let T=1,k=1,L=0,w=!0,D=0,C=0;if(a.readBool()){if(a.readBool()){const e=a.readByte();e>0&&e<16?(T=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],k=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(T=a.readByte()<<8|a.readByte(),k=a.readByte()<<8|a.readByte())}if(a.readBool()&&a.readBool(),a.readBool()&&(a.readBits(4),a.readBool()&&a.readBits(24)),a.readBool()&&(a.readUEG(),a.readUEG()),a.readBool()){const e=a.readBits(32),t=a.readBits(32);w=a.readBool(),D=t,C=2*e,L=D/C}}let B=1;1===T&&1===k||(B=T/k);let I=0,M=0;if(0===l)I=1,M=2-S;else{I=3===l?1:2,M=(1===l?2:1)*(2-S)}let O=16*(v+1),P=16*(E+1)*(2-S);O-=(y+A)*I,P-=(b+R)*M;const x=Math.ceil(O*B);return a.destroy(),a=null,{codec_mimetype:i,profile_idc:n,level_idc:o,profile_string:r,level_string:d,chroma_format_idc:l,bit_depth:c,bit_depth_luma:c,bit_depth_chroma:f,ref_frames:g,chroma_format:h,chroma_format_string:m.getChromaFormatString(h),frame_rate:{fixed:w,fps:L,fps_den:C,fps_num:D},sar_ratio:{width:T,height:k},codec_size:{width:O,height:P},present_size:{width:x,height:P}}}static _skipScalingList(e,t){let i=8,s=8,a=0;for(let n=0;n<t;n++)0!==s&&(a=e.readSEG(),s=(i+a+256)%256),i=0===s?i:s}static getProfileString(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}static getLevelString(e){return(e/10).toFixed(1)}static getChromaFormatString(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}const f=m;var p=i(898);class g{static _ebsp2rbsp(e){const t=e,i=t.byteLength,s=new Uint8Array(i);let a=0;for(let e=0;e<i;e++)e>=2&&3===t[e]&&0===t[e-1]&&0===t[e-2]||(s[a]=t[e],a++);return new Uint8Array(s.buffer,0,a)}static parseVPS(e){const t=g._ebsp2rbsp(e),i=new u(t);i.readByte(),i.readByte();i.readBits(4);i.readBits(2);i.readBits(6);return{num_temporal_layers:i.readBits(3)+1,temporal_id_nested:i.readBool()}}static parseSPS(e){const t=g._ebsp2rbsp(e);let i=new u(t);i.readByte(),i.readByte();let s=0,a=0,n=0,o=0;i.readBits(4);const r=i.readBits(3),d=(i.readBool(),i.readBits(2)),l=i.readBool(),h=i.readBits(5),_=i.readByte(),c=i.readByte(),m=i.readByte(),f=i.readByte(),p=i.readByte(),v=i.readByte(),E=i.readByte(),S=i.readByte(),y=i.readByte(),A=i.readByte(),b=i.readByte(),R=[],T=[];for(let e=0;e<r;e++)R.push(i.readBool()),T.push(i.readBool());if(r>0)for(let e=r;e<8;e++)i.readBits(2);for(let e=0;e<r;e++)R[e]&&(i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte(),i.readByte()),T[e]&&i.readByte();i.readUEG();const k=i.readUEG();3===k&&i.readBits(1);const L=i.readUEG(),w=i.readUEG();i.readBool()&&(s+=i.readUEG(),a+=i.readUEG(),n+=i.readUEG(),o+=i.readUEG());const D=i.readUEG(),C=i.readUEG(),B=i.readUEG();for(let e=i.readBool()?0:r;e<=r;e++)i.readUEG(),i.readUEG(),i.readUEG();i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG();if(i.readBool()){if(i.readBool())for(let e=0;e<4;e++)for(let t=0;t<(3===e?2:6);t++){if(i.readBool()){const t=Math.min(64,1<<4+(e<<1));e>1&&i.readSEG();for(let e=0;e<t;e++)i.readSEG()}else i.readUEG()}}i.readBool(),i.readBool();i.readBool()&&(i.readByte(),i.readUEG(),i.readUEG(),i.readBool());const I=i.readUEG();let M=0;for(let e=0;e<I;e++){let t=!1;if(0!==e&&(t=i.readBool()),t){e===I&&i.readUEG(),i.readBool(),i.readUEG();let t=0;for(let e=0;e<=M;e++){const e=i.readBool();let s=!1;e||(s=i.readBool()),(e||s)&&t++}M=t}else{const e=i.readUEG(),t=i.readUEG();M=e+t;for(let t=0;t<e;t++)i.readUEG(),i.readBool();for(let e=0;e<t;e++)i.readUEG(),i.readBool()}}if(i.readBool()){const e=i.readUEG();for(let t=0;t<e;t++){for(let e=0;e<B+4;e++)i.readBits(1);i.readBits(1)}}let O=!1,P=0,x=1,U=1,Z=!1,N=1,G=1;i.readBool(),i.readBool();if(i.readBool()){if(i.readBool()){const e=i.readByte();e>0&&e<=16?(x=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],U=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(x=i.readBits(16),U=i.readBits(16))}i.readBool()&&i.readBool();if(i.readBool()){i.readBits(3),i.readBool();i.readBool()&&(i.readByte(),i.readByte(),i.readByte())}i.readBool()&&(i.readUEG(),i.readUEG());i.readBool(),i.readBool(),i.readBool();O=i.readBool(),O&&(i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG());if(i.readBool()){N=i.readBits(32),G=i.readBits(32);i.readBool()&&i.readUEG();if(i.readBool()){let e=!1,t=!1,s=!1;if(e=i.readBool(),t=i.readBool(),e||t){s=i.readBool(),s&&(i.readByte(),i.readBits(5),i.readBool(),i.readBits(5));i.readBits(4),i.readBits(4);s&&i.readBits(4),i.readBits(5),i.readBits(5),i.readBits(5)}for(let a=0;a<=r;a++){const a=i.readBool();Z=a;let n=!1,o=1;a||(n=i.readBool());let r=!1;if(n?i.readSEG():r=i.readBool(),r||(o=i.readUEG()+1),e)for(let e=0;e<o;e++)i.readUEG(),i.readUEG(),s&&(i.readUEG(),i.readUEG());if(t)for(let e=0;e<o;e++)i.readUEG(),i.readUEG(),s&&(i.readUEG(),i.readUEG())}}}if(i.readBool()){i.readBool(),i.readBool(),i.readBool();P=i.readUEG();i.readUEG(),i.readUEG(),i.readUEG(),i.readUEG()}}i.readBool();const V=`hvc1.${h}.1.L${b}.B0`,F=L-(s+a)*(1===k||2===k?2:1),z=w-(n+o)*(1===k?2:1);let H=1;return 1!==x&&1!==U&&(H=x/U),i.destroy(),i=null,{codec_mimetype:V,level_string:g.getLevelString(b),profile_idc:h,bit_depth:D+8,ref_frames:1,chroma_format:k,chroma_format_string:g.getChromaFormatString(k),general_level_idc:b,general_profile_space:d,general_tier_flag:l,general_profile_idc:h,general_profile_compatibility_flags_1:_,general_profile_compatibility_flags_2:c,general_profile_compatibility_flags_3:m,general_profile_compatibility_flags_4:f,general_constraint_indicator_flags_1:p,general_constraint_indicator_flags_2:v,general_constraint_indicator_flags_3:E,general_constraint_indicator_flags_4:S,general_constraint_indicator_flags_5:y,general_constraint_indicator_flags_6:A,min_spatial_segmentation_idc:P,constant_frame_rate:0,chroma_format_idc:k,bit_depth_luma_minus8:D,bit_depth_chroma_minus8:C,frame_rate:{fixed:Z,fps:G/N,fps_den:N,fps_num:G},sar_ratio:{width:x,height:U},codec_size:{width:F,height:z},present_size:{width:F*H,height:z}}}static parsePPS(e){const t=g._ebsp2rbsp(e),i=new u(t);i.readByte(),i.readByte();i.readUEG(),i.readUEG(),i.readBool(),i.readBool(),i.readBits(3),i.readBool(),i.readBool(),i.readUEG(),i.readUEG(),i.readSEG(),i.readBool(),i.readBool();if(i.readBool()){i.readUEG()}i.readSEG(),i.readSEG(),i.readBool(),i.readBool(),i.readBool(),i.readBool();const s=i.readBool(),a=i.readBool();let n=1;return a&&s?n=0:a?n=3:s&&(n=2),{parallelismType:n}}static getChromaFormatString(e){switch(e){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}}static getProfileString(e){switch(e){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}}static getLevelString(e){return(e/30).toFixed(1)}}const v=g;function E(e){return e.byteOffset%2==0&&e.byteLength%2==0}function S(e){return e.byteOffset%4==0&&e.byteLength%4==0}function y(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const A=function(e,t){return e.byteLength===t.byteLength&&(S(e)&&S(t)?function(e,t){return y(new Uint32Array(e.buffer,e.byteOffset,e.byteLength/4),new Uint32Array(t.buffer,t.byteOffset,t.byteLength/4))}(e,t):E(e)&&E(t)?function(e,t){return y(new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2))}(e,t):function(e,t){return y(e,t)}(e,t))};class b{static parseOBUs(e){let t=null;for(let i=0;i<e.byteLength;){e[i];const s=(120&e[i])>>3,a=0!=(4&e[i]),n=0!=(2&e[i]);e[i];i+=1,a&&(i+=1);let o=Number.POSITIVE_INFINITY;if(n){o=0;for(let t=0;o|=(127&e[i])<<7*t,i+=1,0!=(128&e[i]);t++);}1===s&&(t=b.parseSeuqneceHeader(e.subarray(i,i+o))),i+=o}return t}static parseSeuqneceHeader(e){let t=new u(e);const i=t.readBits(3),s=(t.readBool(),t.readBool());let n=!0,o=0,r=0;const d=[];if(s)d.push({operating_point_idc:0,level:t.readBits(5),tier:0});else{const e=!1;if(t.readBool()){const e=t.readBits(32),s=t.readBits(32),d=t.readBool();if(d){let e=0;for(;;){if(0!==t.readBits(1))break;e+=1}e>=32?4294967295:(1<<e)-1+t.readBits(e)}r=e,o=s,n=d;if(t.readBool()){t.readBits(5);t.readBits(32),t.readBits(5),t.readBits(5)}}const s=t.readBool(),l=t.readBits(5);for(let a=0;a<=l;a++){const a=t.readBits(12),n=t.readBits(5),o=n>7?t.readBits(1):0;if(d.push({operating_point_idc:a,level:n,tier:o}),e);if(s){if(t.readBool()){t.readBits(4)}}}}const{level:l,tier:h}=d[0],_=t.readBits(4),c=t.readBits(4),m=t.readBits(_+1)+1,f=t.readBits(c+1)+1;let p=!1;if(s||(p=t.readBool()),p){t.readBits(4),t.readBits(4)}t.readBool(),t.readBool(),t.readBool();let y=!1;let A=2;if(!s){if(t.readBool(),t.readBool(),t.readBool(),t.readBool(),y=t.readBool(),y){t.readBool(),t.readBool()}if(A=t.readBool()?2:t.readBits(1),A){t.readBool()?2:t.readBits(1)}if(y){t.readBits(3)+1}}t.readBool(),t.readBool(),t.readBool();const k=t.readBool();let L=8;if(2===i&&k){L=t.readBool()?12:10}else L=k?10:8;let w=!1;1!==i&&(w=t.readBool());if(t.readBool()){t.readBits(8),t.readBits(8),t.readBits(8)}let C=1,B=1;if(w){t.readBits(1),C=1,B=1}else{if(t.readBits(1),0===i)C=1,B=1;else if(1===i)C=0,B=0;else if(12===L){if(t.readBits(1)){t.readBits(1)}}else C=1,B=0;if(C&&B){t.readBits(2)}t.readBits(1)}t.readBool();t.destroy(),t=null;return{codec_mimetype:`av01.${i}.${b.getLevelString(l,h)}.${L.toString(10).padStart(2,"0")}`,level:l,tier:h,level_string:b.getLevelString(l,h),profile_idc:i,profile_string:`${i}`,bit_depth:L,ref_frames:1,chroma_format:b.getChromaFormat(w,C,B),chroma_format_string:b.getChromaFormatString(w,C,B),frame_rate:{fixed:n,fps:o/r,fps_den:r,fps_num:o},sar_ratio:{width:1,height:1},codec_size:{width:m,height:f},present_size:{width:1*m,height:f}}}static getLevelString(e,t){return`${e.toString(10).padStart(2,"0")}${0===t?"M":"H"}`}static getChromaFormat(e,t,i){return e?0:0===t&&0===i?3:1===t&&0===i?2:1===t&&1===i?1:Number.NaN}static getChromaFormatString(e,t,i){return e?"4:0:0":0===t&&0===i?"4:4:4":1===t&&0===i?"4:2:2":1===t&&1===i?"4:2:0":"Unknown"}}const R=b;class T{constructor(e,t){this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new o.Z,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}()}destroy(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null}static probe(e){const t=new Uint8Array(e);if(t.byteLength<9)return{needMoreData:!0};const i={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return i;const s=(4&t[4])>>>2!=0,a=0!=(1&t[4]),n=(o=t)[r=5]<<24|o[r+1]<<16|o[r+2]<<8|o[r+3];var o,r;return n<9?i:{match:!0,consumed:n,dataOffset:n,hasAudioTrack:s,hasVideoTrack:a}}bindDataSource(e){return e.onDataArrival=this.parseChunks.bind(this),this}get onTrackMetadata(){return this._onTrackMetadata}set onTrackMetadata(e){this._onTrackMetadata=e}get onMediaInfo(){return this._onMediaInfo}set onMediaInfo(e){this._onMediaInfo=e}get onMetaDataArrived(){return this._onMetaDataArrived}set onMetaDataArrived(e){this._onMetaDataArrived=e}get onScriptDataArrived(){return this._onScriptDataArrived}set onScriptDataArrived(e){this._onScriptDataArrived=e}get onError(){return this._onError}set onError(e){this._onError=e}get onDataAvailable(){return this._onDataAvailable}set onDataAvailable(e){this._onDataAvailable=e}get timestampBase(){return this._timestampBase}set timestampBase(e){this._timestampBase=e}get overridedDuration(){return this._duration}set overridedDuration(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo&&(this._mediaInfo.duration=e)}set overridedHasAudio(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo&&(this._mediaInfo.hasAudio=e)}set overridedHasVideo(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo&&(this._mediaInfo.hasVideo=e)}resetMediaInfo(){this._mediaInfo=new o.Z}_isInitialMetadataDispatched(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched}parseChunks(e,t){var i,s;if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new l.rT("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");let n=0;const o=this._littleEndian;if(0===t){if(!(e.byteLength>13))return 0;{const t=T.probe(e);n=(null==t?void 0:t.dataOffset)||0}}if(this._firstParse){this._firstParse=!1,t+n!==this._dataOffset&&a.Z.w(this.TAG,"First time parsing but chunk byteStart invalid!");0!==new DataView(e,n).getUint32(0,!o)&&a.Z.w(this.TAG,"PrevTagSize0 !== 0 !!!"),n+=4}for(;n<e.byteLength;){this._dispatch=!0;const i=new DataView(e,n);if(n+11+4>e.byteLength)break;const s=i.getUint8(0),r=16777215&i.getUint32(0,!o);if(n+11+r+4>e.byteLength)break;if(8!==s&&9!==s&&18!==s){a.Z.w(this.TAG,`Unsupported tag type ${s}, skipped`),n+=11+r+4;continue}const d=i.getUint8(4),l=i.getUint8(5),h=i.getUint8(6)|l<<8|d<<16|i.getUint8(7)<<24;0!==(16777215&i.getUint32(7,!o))&&a.Z.w(this.TAG,"Meet tag which has StreamID != 0!");const _=n+11;switch(s){case 8:this._parseAudioData(e,_,r,h);break;case 9:this._parseVideoData(e,_,r,h,t+n);break;case 18:this._parseScriptData(e,_,r)}const c=i.getUint32(11+r,!o);c!==11+r&&a.Z.w(this.TAG,`Invalid PrevTagSize ${c}`),n+=11+r+4}return this._isInitialMetadataDispatched()&&this._dispatch&&((null===(i=this._audioTrack)||void 0===i?void 0:i.length)||(null===(s=this._videoTrack)||void 0===s?void 0:s.length))&&this._onDataAvailable(this._audioTrack,this._videoTrack),n}_parseScriptData(e,t,i){var s,n,o;const r=c.parseScriptData(e,t,i);if(r.hasOwnProperty("onMetaData")){if(null==r.onMetaData||"object"!=typeof r.onMetaData)return void a.Z.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&a.Z.w(this.TAG,"Found another onMetaData tag!"),this._metadata=r;const e=null===(s=this._metadata)||void 0===s?void 0:s.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},e)),"boolean"==typeof(null==e?void 0:e.hasAudio)&&(this._hasAudioFlagOverrided||(this._hasAudio=e.hasAudio,this._mediaInfo&&(this._mediaInfo.hasAudio=this._hasAudio))),"boolean"==typeof(null==e?void 0:e.hasVideo)&&(this._hasVideoFlagOverrided||(this._hasVideo=e.hasVideo,this._mediaInfo&&(this._mediaInfo.hasVideo=this._hasVideo))),"number"==typeof(null==e?void 0:e.audiodatarate)&&this._mediaInfo&&(this._mediaInfo.audioDataRate=e.audiodatarate),"number"==typeof(null==e?void 0:e.videodatarate)&&this._mediaInfo&&(this._mediaInfo.videoDataRate=e.videodatarate),"number"==typeof(null==e?void 0:e.width)&&this._mediaInfo&&(this._mediaInfo.width=e.width),"number"==typeof(null==e?void 0:e.height)&&this._mediaInfo&&(this._mediaInfo.height=e.height),"number"==typeof(null==e?void 0:e.duration)){if(!this._durationOverrided){const t=Math.floor(e.duration*this._timescale);this._duration=t,this._mediaInfo&&(this._mediaInfo.duration=t)}}else this._mediaInfo&&(this._mediaInfo.duration=0);if("number"==typeof(null==e?void 0:e.framerate)){const t=Math.floor(1e3*e.framerate);if(t>0){const e=t/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=e,this._referenceFrameRate.fps_num=t,this._referenceFrameRate.fps_den=1e3,this._mediaInfo&&(this._mediaInfo.fps=e)}}if("object"==typeof(null==e?void 0:e.keyframes)){this._mediaInfo&&(this._mediaInfo.hasKeyframesIndex=!0);const t=e.keyframes;this._mediaInfo&&(this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(t)),e.keyframes=null}else this._mediaInfo&&(this._mediaInfo.hasKeyframesIndex=!1);this._dispatch=!1,this._mediaInfo&&(this._mediaInfo.metadata=e),a.Z.v(this.TAG,"Parsed onMetaData"),(null===(n=this._mediaInfo)||void 0===n?void 0:n.isComplete())&&(null===(o=this._onMediaInfo)||void 0===o||o.call(this,this._mediaInfo))}Object.keys(r).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},r))}_parseKeyframesIndex(e){const t=[],i=[];for(let s=1;s<e.times.length;s++){const a=this._timestampBase+Math.floor(1e3*e.times[s]);t.push(a),i.push(e.filepositions[s])}return{times:t,filepositions:i}}_parseAudioData(e,t,i,s){var n,o,r,d,l,h,_,c,u,m;if(i<=1)return void a.Z.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");if(this._hasAudioFlagOverrided&&!1===this._hasAudio)return;this._littleEndian;const f=new DataView(e,t,i).getUint8(0),g=f>>>4;if(2!==g&&10!==g)return void(null===(n=this._onError)||void 0===n||n.call(this,p.Z.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+g));let v=0;const E=(12&f)>>>2;if(!(E>=0&&E<=4))return void(null===(o=this._onError)||void 0===o||o.call(this,p.Z.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+E));v=this._flvSoundRateTable[E];const S=1&f;let y=this._audioMetadata;const b=this._audioTrack;if(y||(!1!==this._hasAudio||this._hasAudioFlagOverrided||(this._hasAudio=!0,this._mediaInfo&&(this._mediaInfo.hasAudio=!0)),y=this._audioMetadata={},y.type="audio",y.id=null==b?void 0:b.id,y.timescale=this._timescale,y.duration=this._duration,y.audioSampleRate=v,y.channelCount=0===S?1:2),10===g){const n=this._parseAACAudioData(e,t+1,i-1);if(void 0===n)return;if(0===(null==n?void 0:n.packetType)){if(null==y?void 0:y.config){if(A(n.data.config,null==y?void 0:y.config))return;a.Z.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment")}const e=n.data;y.audioSampleRate=null==e?void 0:e.samplingRate,y.channelCount=null==e?void 0:e.channelCount,y.codec=null==e?void 0:e.codec,y.originalCodec=null==e?void 0:e.originalCodec,y.config=null==e?void 0:e.config,y.refSampleDuration=1024/y.audioSampleRate*y.timescale,a.Z.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&((null===(r=this._audioTrack)||void 0===r?void 0:r.length)||(null===(d=this._videoTrack)||void 0===d?void 0:d.length))&&(null===(l=this._onDataAvailable)||void 0===l||l.call(this,this._audioTrack,this._videoTrack)):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,null===(h=this._onTrackMetadata)||void 0===h||h.call(this,"audio",y);const t=this._mediaInfo;t.audioCodec=y.originalCodec||"",t.audioSampleRate=y.audioSampleRate,t.audioChannelCount=y.channelCount,t.hasVideo?null!=t.videoCodec&&(t.mimeType='video/x-flv; codecs="'+t.videoCodec+","+t.audioCodec+'"'):t.mimeType='video/x-flv; codecs="'+t.audioCodec+'"',(null==t?void 0:t.isComplete())&&(null===(_=this._onMediaInfo)||void 0===_||_.call(this,t))}else if(1===n.packetType){const e=this._timestampBase+s,t={unit:n.data,length:n.data.byteLength,dts:e,pts:e};b&&(null==b||b.samples.push(t),b.length+=(null===(c=null==n?void 0:n.data)||void 0===c?void 0:c.length)||0)}else a.Z.e(this.TAG,`Flv: Unsupported AAC data type ${n.packetType}`)}else if(2===g){if(!y.codec){const s=this._parseMP3AudioData(e,t+1,i-1,!0);if(void 0===s)return;y.audioSampleRate=s.samplingRate,y.channelCount=s.channelCount,y.codec=s.codec,y.originalCodec=s.originalCodec,y.refSampleDuration=1152/y.audioSampleRate*y.timescale,a.Z.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,null===(u=this._onTrackMetadata)||void 0===u||u.call(this,"audio",y);const n=this._mediaInfo;n.audioCodec=y.codec,n.audioSampleRate=y.audioSampleRate,n.audioChannelCount=y.channelCount,n.audioDataRate=s.bitRate,(null==n?void 0:n.hasVideo)?null!=n.videoCodec&&(n.mimeType='video/x-flv; codecs="'+n.videoCodec+","+n.audioCodec+'"'):n.mimeType='video/x-flv; codecs="'+n.audioCodec+'"',n.isComplete()&&(null===(m=this._onMediaInfo)||void 0===m||m.call(this,n))}const n=this._parseMP3AudioData(e,t+1,i-1,!1);if(void 0===n)return;const o=this._timestampBase+s,r={unit:n,length:n.byteLength,dts:o,pts:o};null==b||b.samples.push(r),b&&(b.length+=n.length)}}_parseAACAudioData(e,t,i){if(i<=1)return void a.Z.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");const s={},n=new Uint8Array(e,t,i);return s.packetType=n[0],0===n[0]?s.data=this._parseAACAudioSpecificConfig(e,t+1,i-1):s.data=n.subarray(1),s}_parseAACAudioSpecificConfig(e,t,i){var s,a;const n=new Uint8Array(e,t,i);let o=null,r=0,d=0,h=0,_=null;if(r=d=n[0]>>>3,h=(7&n[0])<<1|n[1]>>>7,h<0||h>=this._mpegSamplingRates.length)return void(null===(s=this._onError)||void 0===s||s.call(this,p.Z.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!"));const c=this._mpegSamplingRates[h],u=(120&n[1])>>>3;if(u<0||u>=8)return void(null===(a=this._onError)||void 0===a||a.call(this,p.Z.FORMAT_ERROR,"Flv: AAC invalid channel configuration"));5===r&&(_=(7&n[1])<<1|n[2]>>>7,(124&n[2])>>>2);const m=self.navigator.userAgent.toLowerCase();return m.includes("firefox")?h>=6?(r=5,o=new Array(4),_=h-3):(r=2,o=new Array(2),_=h):m.includes("android")?(r=2,o=new Array(2),_=h):(r=5,_=h,o=new Array(4),h>=6?_=h-3:1===u&&(r=2,o=new Array(2),_=h)),o[0]=r<<3,o[0]|=(15&h)>>>1,o[1]=(15&h)<<7,o[1]|=(15&u)<<3,5===r&&(o[1]|=(15&_)>>>1,o[2]=(1&_)<<7,o[2]|=8,o[3]=0),{config:o,samplingRate:c,channelCount:u,codec:"mp4a.40."+r,originalCodec:"mp4a.40."+d}}_parseMP3AudioData(e,t,i,s){if(i<4)return void a.Z.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");this._littleEndian;const n=new Uint8Array(e,t,i);let o;if(s){if(255!==n[0])return;const e=n[1]>>>3&3,t=(6&n[1])>>1,i=(240&n[2])>>>4,s=(12&n[2])>>>2,a=3!==(n[3]>>>6&3)?2:1;let r=0,d=0;const h="mp3";switch(e){case 0:r=this._mpegAudioV25SampleRateTable[s];break;case 2:r=this._mpegAudioV20SampleRateTable[s];break;case 3:r=this._mpegAudioV10SampleRateTable[s]}switch(t){case 1:i<this._mpegAudioL3BitRateTable.length&&(d=this._mpegAudioL3BitRateTable[i]);break;case 2:i<this._mpegAudioL2BitRateTable.length&&(d=this._mpegAudioL2BitRateTable[i]);break;case 3:i<this._mpegAudioL1BitRateTable.length&&(d=this._mpegAudioL1BitRateTable[i])}o={bitRate:d,samplingRate:r,channelCount:a,codec:h,originalCodec:h}}else o=n;return o}_parseVideoData(e,t,i,s,n){var o,r;if(i<=1)return void a.Z.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");if(this._hasVideoFlagOverrided&&!1===this._hasVideo)return;const d=new Uint8Array(e,t,i)[0],l=(112&d)>>>4;if(0!=(128&d)){const a=15&d,o=String.fromCharCode(...new Uint8Array(e,t,i).slice(1,5));"hvc1"===o?this._parseEnhancedHEVCVideoPacket(e,t+5,i-5,s,n,l,a):"av01"===o?this._parseEnhancedAV1VideoPacket(e,t+5,i-5,s,n,l,a):null===(r=this._onError)||void 0===r||r.call(this,p.Z.CODEC_UNSUPPORTED,`Flv: Unsupported codec in video frame: ${o}`)}else{const a=15&d;7===a?this._parseAVCVideoPacket(e,t+1,i-1,s,n,l):12===a?this._parseHEVCVideoPacket(e,t+1,i-1,s,n,l):null===(o=this._onError)||void 0===o||o.call(this,p.Z.CODEC_UNSUPPORTED,`Flv: Unsupported codec in video frame: ${a}`)}}_parseAVCVideoPacket(e,t,i,s,n,o){var r;if(i<4)return void a.Z.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");const d=this._littleEndian,l=new DataView(e,t,i),h=l.getUint8(0),_=(16777215&l.getUint32(0,!d))<<8>>8;0===h?this._parseAVCDecoderConfigurationRecord(e,t+4,i-4):1===h?this._parseAVCVideoData(e,t+4,i-4,s,n,o,_):2===h||null===(r=this._onError)||void 0===r||r.call(this,p.Z.FORMAT_ERROR,`Flv: Invalid video packet type ${h}`)}_parseHEVCVideoPacket(e,t,i,s,n,o){var r;if(i<4)return void a.Z.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");const d=this._littleEndian,l=new DataView(e,t,i),h=l.getUint8(0),_=(16777215&l.getUint32(0,!d))<<8>>8;0===h?this._parseHEVCDecoderConfigurationRecord(e,t+4,i-4):1===h?this._parseHEVCVideoData(e,t+4,i-4,s,n,o,_):2===h||null===(r=this._onError)||void 0===r||r.call(this,p.Z.FORMAT_ERROR,`Flv: Invalid video packet type ${h}`)}_parseEnhancedHEVCVideoPacket(e,t,i,s,a,n,o){var r;const d=this._littleEndian,l=new DataView(e,t,i);if(0===o)this._parseHEVCDecoderConfigurationRecord(e,t,i);else if(1===o){const o=(4294967040&l.getUint32(0,!d))>>8;this._parseHEVCVideoData(e,t+3,i-3,s,a,n,o)}else 3===o?this._parseHEVCVideoData(e,t,i,s,a,n,0):2===o||null===(r=this._onError)||void 0===r||r.call(this,p.Z.FORMAT_ERROR,`Flv: Invalid video packet type ${o}`)}_parseEnhancedAV1VideoPacket(e,t,i,s,a,n,o){var r,d;this._littleEndian;0===o?this._parseAV1CodecConfigurationRecord(e,t,i):1===o?this._parseAV1VideoData(e,t,i,s,a,n,0):5===o?null===(r=this._onError)||void 0===r||r.call(this,p.Z.FORMAT_ERROR,`Flv: Not Suported MP2T AV1 video packet type ${o}`):2===o||null===(d=this._onError)||void 0===d||d.call(this,p.Z.FORMAT_ERROR,`Flv: Invalid video packet type ${o}`)}_parseAVCDecoderConfigurationRecord(e,t,i){var s,n,o,r,d,l,h,_,c,u,m;if(i<7)return void a.Z.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");let g=this._videoMetadata;const v=this._videoTrack,E=this._littleEndian,S=new DataView(e,t,i);if(g){if(void 0!==g.avcc){const s=new Uint8Array(e,t,i);if(A(s,g.avcc))return;a.Z.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1!==this._hasVideo||this._hasVideoFlagOverrided||(this._hasVideo=!0,this._mediaInfo&&(this._mediaInfo.hasVideo=!0)),g=this._videoMetadata={},g.type="video",g.id=null==v?void 0:v.id,g.timescale=this._timescale,g.duration=this._duration;const y=S.getUint8(0),b=S.getUint8(1);S.getUint8(2),S.getUint8(3);if(1!==y||0===b)return void(null===(s=this._onError)||void 0===s||s.call(this,p.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord"));if(this._naluLengthSize=1+(3&S.getUint8(4)),3!==this._naluLengthSize&&4!==this._naluLengthSize)return void(null===(n=this._onError)||void 0===n||n.call(this,p.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1)));const R=31&S.getUint8(5);if(0===R)return void(null===(o=this._onError)||void 0===o||o.call(this,p.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS"));R>1&&a.Z.w(this.TAG,`Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ${R}`);let T=6;for(let i=0;i<R;i++){const s=S.getUint16(T,!E);if(T+=2,0===s)continue;const a=new Uint8Array(e,t+T,s);T+=s;const n=f.parseSPS(a);if(0!==i)continue;g.codecWidth=n.codec_size.width,g.codecHeight=n.codec_size.height,g.presentWidth=n.present_size.width,g.presentHeight=n.present_size.height,g.profile=n.profile_string,g.level=n.level_string,g.bitDepth=n.bit_depth,g.chromaFormat=n.chroma_format,g.sarRatio=n.sar_ratio,g.frameRate=n.frame_rate,n.frame_rate.fixed&&0!==n.frame_rate.fps_num&&0!==n.frame_rate.fps_den||(g.frameRate=this._referenceFrameRate);const o=null===(r=g.frameRate)||void 0===r?void 0:r.fps_den,h=null===(d=g.frameRate)||void 0===d?void 0:d.fps_num;g.refSampleDuration=g.timescale*(o/h);const _=a.subarray(1,4);let c="avc1.";for(let e=0;e<3;e++){let t=_[e].toString(16);t.length<2&&(t="0"+t),c+=t}g.codec=c;const u=this._mediaInfo;u.width=g.codecWidth,u.height=g.codecHeight,u.fps=g.frameRate.fps,u.profile=g.profile,u.level=g.level,u.refFrames=n.ref_frames,u.chromaFormat=n.chroma_format_string,u.sarNum=g.sarRatio.width,u.sarDen=g.sarRatio.height,u.videoCodec=c,u.hasAudio?null!=u.audioCodec&&(u.mimeType='video/x-flv; codecs="'+u.videoCodec+","+u.audioCodec+'"'):u.mimeType='video/x-flv; codecs="'+u.videoCodec+'"',u.isComplete()&&(null===(l=this._onMediaInfo)||void 0===l||l.call(this,u))}const k=S.getUint8(T);if(0!==k){k>1&&a.Z.w(this.TAG,`Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ${k}`),T++;for(let e=0;e<k;e++){const e=S.getUint16(T,!E);T+=2,0!==e&&(T+=e)}g.avcc=new Uint8Array(i),g.avcc.set(new Uint8Array(e,t,i),0),a.Z.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&((null===(_=this._audioTrack)||void 0===_?void 0:_.length)||(null===(c=this._videoTrack)||void 0===c?void 0:c.length))&&(null===(u=this._onDataAvailable)||void 0===u||u.call(this,this._audioTrack,this._videoTrack)):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,null===(m=this._onTrackMetadata)||void 0===m||m.call(this,"video",g)}else null===(h=this._onError)||void 0===h||h.call(this,p.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}_parseHEVCDecoderConfigurationRecord(e,t,i){var s,n,o,r,d,l,h;if(i<22)return void a.Z.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");let _=this._videoMetadata;const c=this._videoTrack,u=this._littleEndian,m=new DataView(e,t,i);if(_){if(void 0!==_.hvcc){const s=new Uint8Array(e,t,i);if(A(s,_.hvcc))return;a.Z.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else!1!==this._hasVideo||this._hasVideoFlagOverrided||(this._hasVideo=!0,this._mediaInfo&&(this._mediaInfo.hasVideo=!0)),_=this._videoMetadata={},_.type="video",_.id=null==c?void 0:c.id,_.timescale=this._timescale,_.duration=this._duration;const f=m.getUint8(0),g=31&m.getUint8(1);if(1!==f||0===g)return void(null===(s=this._onError)||void 0===s||s.call(this,p.Z.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord"));if(this._naluLengthSize=1+(3&m.getUint8(21)),3!==this._naluLengthSize&&4!==this._naluLengthSize)return void(null===(n=this._onError)||void 0===n||n.call(this,p.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1)));const E=m.getUint8(22);for(let i=0,s=23;i<E;i++){const i=63&m.getUint8(s+0),a=m.getUint16(s+1,!u);s+=3;for(let n=0;n<a;n++){const a=m.getUint16(s+0,!u);if(0===n){if(33===i){s+=2;const i=new Uint8Array(e,t+s,a),n=v.parseSPS(i);_.codecWidth=n.codec_size.width,_.codecHeight=n.codec_size.height,_.presentWidth=n.present_size.width,_.presentHeight=n.present_size.height,_.profile=null==n?void 0:n.profile_string,_.level=n.level_string,_.bitDepth=n.bit_depth,_.chromaFormat=n.chroma_format,_.sarRatio=n.sar_ratio,_.frameRate=n.frame_rate,n.frame_rate.fixed&&0!==n.frame_rate.fps_num&&0!==n.frame_rate.fps_den||(_.frameRate=this._referenceFrameRate);const r=_.frameRate.fps_den,d=_.frameRate.fps_num;_.refSampleDuration=_.timescale*(r/d),_.codec=n.codec_mimetype;const l=this._mediaInfo;l.width=_.codecWidth,l.height=_.codecHeight,l.fps=_.frameRate.fps,l.profile=_.profile,l.level=_.level,l.refFrames=n.ref_frames,l.chromaFormat=n.chroma_format_string,l.sarNum=_.sarRatio.width,l.sarDen=_.sarRatio.height,l.videoCodec=n.codec_mimetype,l.hasAudio?null!=l.audioCodec&&(l.mimeType='video/x-flv; codecs="'+l.videoCodec+","+l.audioCodec+'"'):l.mimeType='video/x-flv; codecs="'+l.videoCodec+'"',l.isComplete()&&(null===(o=this._onMediaInfo)||void 0===o||o.call(this,l)),s+=a}else s+=2+a}else s+=2+a}}_.hvcc=new Uint8Array(i),_.hvcc.set(new Uint8Array(e,t,i),0),a.Z.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&((null===(r=this._audioTrack)||void 0===r?void 0:r.length)||(null===(d=this._videoTrack)||void 0===d?void 0:d.length))&&(null===(l=this._onDataAvailable)||void 0===l||l.call(this,this._audioTrack,this._videoTrack)):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,null===(h=this._onTrackMetadata)||void 0===h||h.call(this,"video",_)}_parseAV1CodecConfigurationRecord(e,t,i){var s,n,o,r,d,l,h,_,c,u,m;if(i<4)return void a.Z.w(this.TAG,"Flv: Invalid AV1CodecConfigurationRecord, lack of data!");let f=this._videoMetadata;const g=this._videoTrack,v=(this._littleEndian,new DataView(e,t,i));f?void 0!==f.av1c&&a.Z.w(this.TAG,"Found another AV1CodecConfigurationRecord!"):(!1!==this._hasVideo||this._hasVideoFlagOverrided||(this._hasVideo=!0,this._mediaInfo&&(this._mediaInfo.hasVideo=!0)),f=this._videoMetadata={},f.type="video",f.id=null==g?void 0:g.id,f.timescale=this._timescale,f.duration=this._duration);const E=127&v.getUint8(0);v.getUint8(1),v.getUint8(1),v.getUint8(2);if(1!==E)return void(null===(s=this._onError)||void 0===s||s.call(this,p.Z.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord"));const S=R.parseOBUs(new Uint8Array(e,t+4,i-4));if(null==S)return void(null===(n=this._onError)||void 0===n||n.call(this,p.Z.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord"));f.codecWidth=null===(o=null==S?void 0:S.codec_size)||void 0===o?void 0:o.width,f.codecHeight=null===(r=null==S?void 0:S.codec_size)||void 0===r?void 0:r.height,f.presentWidth=null===(d=null==S?void 0:S.present_size)||void 0===d?void 0:d.width,f.presentHeight=null===(l=null==S?void 0:S.present_size)||void 0===l?void 0:l.height,f.profile=S.profile_string,f.level=S.level_string,f.bitDepth=S.bit_depth,f.chromaFormat=S.chroma_format,f.sarRatio=S.sar_ratio,f.frameRate=S.frame_rate,S.frame_rate.fixed&&0!==S.frame_rate.fps_num&&0!==S.frame_rate.fps_den||(f.frameRate=this._referenceFrameRate);const y=f.frameRate.fps_den,A=f.frameRate.fps_num;f.refSampleDuration=f.timescale*(y/A),f.codec=S.codec_mimetype;const b=this._mediaInfo;b.width=f.codecWidth,b.height=f.codecHeight,b.fps=f.frameRate.fps,b.profile=f.profile,b.level=f.level,b.refFrames=S.ref_frames,b.chromaFormat=S.chroma_format_string,b.sarNum=f.sarRatio.width,b.sarDen=f.sarRatio.height,b.videoCodec=S.codec_mimetype,b.hasAudio?null!=b.audioCodec&&(b.mimeType='video/x-flv; codecs="'+b.videoCodec+","+b.audioCodec+'"'):b.mimeType='video/x-flv; codecs="'+b.videoCodec+'"',b.isComplete()&&(null===(h=this._onMediaInfo)||void 0===h||h.call(this,b)),f.av1c=new Uint8Array(i),f.av1c.set(new Uint8Array(e,t,i),0),a.Z.v(this.TAG,"Parsed AV1CodecConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&((null===(_=this._audioTrack)||void 0===_?void 0:_.length)||(null===(c=this._videoTrack)||void 0===c?void 0:c.length))&&(null===(u=this._onDataAvailable)||void 0===u||u.call(this,this._audioTrack,this._videoTrack)):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,null===(m=this._onTrackMetadata)||void 0===m||m.call(this,"video",f)}_parseAVCVideoData(e,t,i,s,n,o,r){const d=this._littleEndian,l=new DataView(e,t,i),h=[];let _=0,c=0;const u=this._naluLengthSize,m=this._timestampBase+s;let f=1===o;for(;c<i;){if(c+4>=i){a.Z.w(this.TAG,`Malformed Nalu near timestamp ${m}, offset = ${c}, dataSize = ${i}`);break}let s=l.getUint32(c,!d);if(3===u&&(s>>>=8),s>i-u)return void a.Z.w(this.TAG,`Malformed Nalus near timestamp ${m}, NaluSize > DataSize!`);const n=31&l.getUint8(c+u);5===n&&(f=!0);const o=new Uint8Array(e,t+c,u+s),r={type:n,data:o};h.push(r),_+=o.byteLength,c+=u+s}if(h.length){const e=this._videoTrack,t={units:h,length:_,isKeyframe:f,dts:m,cts:r,pts:m+r};f&&(t.fileposition=n),e&&(e.samples.push(t),e.length+=_)}}_parseHEVCVideoData(e,t,i,s,n,o,r){const d=this._littleEndian,l=new DataView(e,t,i),h=[];let _=0,c=0;const u=this._naluLengthSize,m=this._timestampBase+s;let f=1===o;for(;c<i;){if(c+4>=i){a.Z.w(this.TAG,`Malformed Nalu near timestamp ${m}, offset = ${c}, dataSize = ${i}`);break}let s=l.getUint32(c,!d);if(3===u&&(s>>>=8),s>i-u)return void a.Z.w(this.TAG,`Malformed Nalus near timestamp ${m}, NaluSize > DataSize!`);const n=31&l.getUint8(c+u);19!==n&&20!==n||(f=!0);const o=new Uint8Array(e,t+c,u+s),r={type:n,data:o};h.push(r),_+=o.byteLength,c+=u+s}if(h.length){const e=this._videoTrack,t={units:h,length:_,isKeyframe:f,dts:m,cts:r,pts:m+r};f&&(t.fileposition=n),e&&(null==e||e.samples.push(t),e.length+=_)}}_parseAV1VideoData(e,t,i,s,a,n,o){this._littleEndian;const r=[];let d=0;const l=this._timestampBase+s,h=1===n;if(d=i,r.push({unitType:0,data:new Uint8Array(e,t+0,i)}),r.length){const e=this._videoTrack,t={units:r,length:d,isKeyframe:h,dts:l,cts:o,pts:l+o};h&&(t.fileposition=a),e&&(null==e||e.samples.push(t),e.length+=d)}}}const k=T;class L{constructor(){}destroy(){this.onError=null,this.onMediaInfo=null,this.onMetaDataArrived=null,this.onTrackMetadata=null,this.onDataAvailable=null,this.onTimedID3Metadata=null,this.onSMPTE2038Metadata=null,this.onSCTE35Metadata=null,this.onPESPrivateData=null,this.onPESPrivateDataDescriptor=null}}class w{constructor(){this.program_pmt_pid={}}}var D,C,B,I;!function(e){e[e.kMPEG1Audio=3]="kMPEG1Audio",e[e.kMPEG2Audio=4]="kMPEG2Audio",e[e.kPESPrivateData=6]="kPESPrivateData",e[e.kADTSAAC=15]="kADTSAAC",e[e.kLOASAAC=17]="kLOASAAC",e[e.kAC3=129]="kAC3",e[e.kEAC3=135]="kEAC3",e[e.kID3=21]="kID3",e[e.kSCTE35=134]="kSCTE35",e[e.kH264=27]="kH264",e[e.kH265=36]="kH265"}(D||(D={}));class M{constructor(){this.pid_stream_type={},this.common_pids={h264:void 0,h265:void 0,adts_aac:void 0,loas_aac:void 0,opus:void 0,ac3:void 0,eac3:void 0,mp3:void 0},this.pes_private_data_pids={},this.timed_id3_pids={},this.scte_35_pids={},this.smpte2038_pids={}}}class O{}class P{}class x{constructor(){this.slices=[],this.total_length=0,this.expected_length=0,this.file_position=0,this.random_access_indicator=0}}!function(e){e[e.kUnspecified=0]="kUnspecified",e[e.kSliceNonIDR=1]="kSliceNonIDR",e[e.kSliceDPA=2]="kSliceDPA",e[e.kSliceDPB=3]="kSliceDPB",e[e.kSliceDPC=4]="kSliceDPC",e[e.kSliceIDR=5]="kSliceIDR",e[e.kSliceSEI=6]="kSliceSEI",e[e.kSliceSPS=7]="kSliceSPS",e[e.kSlicePPS=8]="kSlicePPS",e[e.kSliceAUD=9]="kSliceAUD",e[e.kEndOfSequence=10]="kEndOfSequence",e[e.kEndOfStream=11]="kEndOfStream",e[e.kFiller=12]="kFiller",e[e.kSPSExt=13]="kSPSExt",e[e.kReserved0=14]="kReserved0"}(C||(C={}));class U{}class Z{constructor(e){const t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t);new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)}}class N{constructor(e){this.TAG="H264AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not find H264 startcode until payload end!")}findNextStartCodeOffset(e){let t=e;const i=this.data_;for(;;){if(t+3>=i.byteLength)return this.eof_flag_=!0,i.byteLength;const e=i[t+0]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3],s=i[t+0]<<16|i[t+1]<<8|i[t+2];if(1===e||1===s)return t;t++}}readNextNaluPayload(){const e=this.data_;let t=null;for(;null==t&&!this.eof_flag_;){let i=this.current_startcode_offset_;i+=1===(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3])?4:3;const s=31&e[i],a=(128&e[i])>>>7,n=this.findNextStartCodeOffset(i);if(this.current_startcode_offset_=n,s>=C.kReserved0)continue;if(0!==a)continue;const o=e.subarray(i,n);t=new U,t.type=s,t.data=o}return t}}class G{constructor(e,t,i){let s=8+e.byteLength+1+2+t.byteLength,a=!1;66!==e[3]&&77!==e[3]&&88!==e[3]&&(a=!0,s+=4);const n=this.data=new Uint8Array(s);n[0]=1,n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=255,n[5]=225;const o=e.byteLength;n[6]=o>>>8,n[7]=255&o;let r=8;n.set(e,8),r+=o,n[r]=1;const d=t.byteLength;n[r+1]=d>>>8,n[r+2]=255&d,n.set(t,r+3),r+=3+d,a&&(n[r]=252|i.chroma_format_idc,n[r+1]=248|i.bit_depth_luma-8,n[r+2]=248|i.bit_depth_chroma-8,n[r+3]=0,r+=4)}getData(){return this.data}}!function(e){e[e.kNull=0]="kNull",e[e.kAACMain=1]="kAACMain",e[e.kAAC_LC=2]="kAAC_LC",e[e.kAAC_SSR=3]="kAAC_SSR",e[e.kAAC_LTP=4]="kAAC_LTP",e[e.kAAC_SBR=5]="kAAC_SBR",e[e.kAAC_Scalable=6]="kAAC_Scalable",e[e.kLayer1=32]="kLayer1",e[e.kLayer2=33]="kLayer2",e[e.kLayer3=34]="kLayer3"}(B||(B={})),function(e){e[e.k96000Hz=0]="k96000Hz",e[e.k88200Hz=1]="k88200Hz",e[e.k64000Hz=2]="k64000Hz",e[e.k48000Hz=3]="k48000Hz",e[e.k44100Hz=4]="k44100Hz",e[e.k32000Hz=5]="k32000Hz",e[e.k24000Hz=6]="k24000Hz",e[e.k22050Hz=7]="k22050Hz",e[e.k16000Hz=8]="k16000Hz",e[e.k12000Hz=9]="k12000Hz",e[e.k11025Hz=10]="k11025Hz",e[e.k8000Hz=11]="k8000Hz",e[e.k7350Hz=12]="k7350Hz"}(I||(I={}));const V=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];class F{}class z extends F{}class H{constructor(e){this.TAG="AACADTSParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not found ADTS syncword until payload end")}findNextSyncwordOffset(e){let t=e;const i=this.data_;for(;;){if(t+7>=i.byteLength)return this.eof_flag_=!0,i.byteLength;if(4095===(i[t+0]<<8|i[t+1])>>>4)return t;t++}}readNextAACFrame(){const e=this.data_;let t=null;for(;null==t&&!this.eof_flag_;){let i=this.current_syncword_offset_;const s=(8&e[i+1])>>>3,a=(6&e[i+1])>>>1,n=1&e[i+1],o=(192&e[i+2])>>>6,r=(60&e[i+2])>>>2,d=(1&e[i+2])<<2|(192&e[i+3])>>>6,l=(3&e[i+3])<<11|e[i+4]<<3|(224&e[i+5])>>>5;e[i+6];if(i+l>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const h=1===n?7:9,_=l-h;i+=h;const c=this.findNextSyncwordOffset(i+_);if(this.current_syncword_offset_=c,0!==s&&1!==s||0!==a)continue;const u=e.subarray(i,i+_);t=new F,t.audio_object_type=o+1,t.sampling_freq_index=r,t.sampling_frequency=V[r],t.channel_config=d,t.data=u}return t}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class q{constructor(e){this.TAG="AACLOASParser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not found LOAS syncword until payload end")}findNextSyncwordOffset(e){let t=e;const i=this.data_;for(;;){if(t+1>=i.byteLength)return this.eof_flag_=!0,i.byteLength;if(695===(i[t+0]<<3|i[t+1]>>>5))return t;t++}}getLATMValue(e){const t=e.readBits(2);let i=0;for(let s=0;s<=t;s++)i<<=8,i|=e.readByte();return i}readNextAACFrame(e){const t=this.data_;let i=null;for(;null==i&&!this.eof_flag_;){const s=this.current_syncword_offset_,n=(31&t[s+1])<<8|t[s+2];if(s+3+n>=this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const o=new u(t.subarray(s+3,s+3+n));let r=null;if(o.readBool()){if(null==e){a.Z.w(this.TAG,"StreamMuxConfig Missing"),this.current_syncword_offset_=this.findNextSyncwordOffset(s+3+n),o.destroy();continue}r=e}else{const e=o.readBool();if(e&&o.readBool()){a.Z.e(this.TAG,"audioMuxVersionA is Not Supported"),o.destroy();break}e&&this.getLATMValue(o);if(!o.readBool()){a.Z.e(this.TAG,"allStreamsSameTimeFraming zero is Not Supported"),o.destroy();break}if(0!==o.readBits(6)){a.Z.e(this.TAG,"more than 2 numSubFrames Not Supported"),o.destroy();break}if(0!==o.readBits(4)){a.Z.e(this.TAG,"more than 2 numProgram Not Supported"),o.destroy();break}if(0!==o.readBits(3)){a.Z.e(this.TAG,"more than 2 numLayer Not Supported"),o.destroy();break}let t=e?this.getLATMValue(o):0;const i=o.readBits(5);t-=5;const s=o.readBits(4);t-=4;const n=o.readBits(4);t-=4,o.readBits(3),t-=3,t>0&&o.readBits(t);const d=o.readBits(3);if(0!==d){a.Z.e(this.TAG,`frameLengthType = ${d}. Only frameLengthType = 0 Supported`),o.destroy();break}o.readByte();const l=o.readBool();if(l)if(e)this.getLATMValue(o);else{let e=0;for(;;){e<<=8;const t=o.readBool();if(e+=o.readByte(),!t)break}console.log(e)}o.readBool()&&o.readByte(),r=new z,r.audio_object_type=i,r.sampling_freq_index=s,r.sampling_frequency=V[r.sampling_freq_index],r.channel_config=n,r.other_data_present=l}let d=0;for(;;){const e=o.readByte();if(d+=e,255!==e)break}const l=new Uint8Array(d);for(let e=0;e<d;e++)l[e]=o.readByte();i=new z,i.audio_object_type=r.audio_object_type,i.sampling_freq_index=r.sampling_freq_index,i.sampling_frequency=V[r.sampling_freq_index],i.channel_config=r.channel_config,i.other_data_present=r.other_data_present,i.data=l,this.current_syncword_offset_=this.findNextSyncwordOffset(s+3+n)}return i}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class ${constructor(e){let t=[];const i=e.audio_object_type;let s=e.audio_object_type;const a=e.sampling_freq_index,n=e.channel_config;let o=0;const r=navigator.userAgent.toLowerCase();r.includes("firefox")?a>=6?(s=5,t=new Array(4),o=a-3):(s=2,t=new Array(2),o=a):r.includes("android")?(s=2,t=new Array(2),o=a):(s=5,o=a,t=new Array(4),a>=6?o=a-3:1===n&&(s=2,t=new Array(2),o=a)),t[0]=s<<3,t[0]|=(15&a)>>>1,t[1]=(15&a)<<7,t[1]|=(15&n)<<3,5===s&&(t[1]|=(15&o)>>>1,t[2]=(1&o)<<7,t[2]|=8,t[3]=0),this.config=t,this.sampling_rate=V[a],this.channel_count=n,this.codec_mimetype="mp4a.40."+s.toString(),this.original_codec_mimetype="mp4a.40."+i.toString()}}class j{}class W{}var K;!function(e){e[e.kSpliceNull=0]="kSpliceNull",e[e.kSpliceSchedule=4]="kSpliceSchedule",e[e.kSpliceInsert=5]="kSpliceInsert",e[e.kTimeSignal=6]="kTimeSignal",e[e.kBandwidthReservation=7]="kBandwidthReservation",e[e.kPrivateCommand=255]="kPrivateCommand"}(K||(K={}));const X=e=>{const t=e.readBool();if(t){e.readBits(6);return{time_specified_flag:t,pts_time:4*e.readBits(31)+e.readBits(2)}}return e.readBits(7),{time_specified_flag:t}},Y=e=>{const t=e.readBool();e.readBits(6);return{auto_return:t,duration:4*e.readBits(31)+e.readBits(2)}},J=(e,t)=>{const i=t.readBits(8);if(e)return{component_tag:i};return{component_tag:i,splice_time:X(t)}},Q=e=>({component_tag:e.readBits(8),utc_splice_time:e.readBits(32)}),ee=e=>{const t=e.readBits(32),i=e.readBool();e.readBits(7);const s={splice_event_id:t,splice_event_cancel_indicator:i};if(i)return s;if(s.out_of_network_indicator=e.readBool(),s.program_splice_flag=e.readBool(),s.duration_flag=e.readBool(),e.readBits(5),s.program_splice_flag)s.utc_splice_time=e.readBits(32);else{s.component_count=e.readBits(8),s.components=[];for(let t=0;t<s.component_count;t++)s.components.push(Q(e))}return s.duration_flag&&(s.break_duration=Y(e)),s.unique_program_id=e.readBits(16),s.avail_num=e.readBits(8),s.avails_expected=e.readBits(8),s},te=(e,t,i,s)=>({descriptor_tag:e,descriptor_length:t,identifier:i,provider_avail_id:s.readBits(32)}),ie=(e,t,i,s)=>{const a=s.readBits(8),n=s.readBits(3);s.readBits(5);let o="";for(let e=0;e<n;e++)o+=String.fromCharCode(s.readBits(8));return{descriptor_tag:e,descriptor_length:t,identifier:i,preroll:a,dtmf_count:n,DTMF_char:o}},se=e=>{const t=e.readBits(8);e.readBits(7);return{component_tag:t,pts_offset:4*e.readBits(31)+e.readBits(2)}},ae=(e,t,i,s)=>{const a=s.readBits(32),n=s.readBool();s.readBits(7);const o={descriptor_tag:e,descriptor_length:t,identifier:i,segmentation_event_id:a,segmentation_event_cancel_indicator:n};if(n)return o;if(o.program_segmentation_flag=s.readBool(),o.segmentation_duration_flag=s.readBool(),o.delivery_not_restricted_flag=s.readBool(),o.delivery_not_restricted_flag?s.readBits(5):(o.web_delivery_allowed_flag=s.readBool(),o.no_regional_blackout_flag=s.readBool(),o.archive_allowed_flag=s.readBool(),o.device_restrictions=s.readBits(2)),!o.program_segmentation_flag){o.component_count=s.readBits(8),o.components=[];for(let e=0;e<o.component_count;e++)o.components.push(se(s))}o.segmentation_duration_flag&&(o.segmentation_duration=s.readBits(40)),o.segmentation_upid_type=s.readBits(8),o.segmentation_upid_length=s.readBits(8);{const e=new Uint8Array(o.segmentation_upid_length);for(let t=0;t<o.segmentation_upid_length;t++)e[t]=s.readBits(8);o.segmentation_upid=e.buffer}return o.segmentation_type_id=s.readBits(8),o.segment_num=s.readBits(8),o.segments_expected=s.readBits(8),52!==o.segmentation_type_id&&54!==o.segmentation_type_id&&56!==o.segmentation_type_id&&58!==o.segmentation_type_id||(o.sub_segment_num=s.readBits(8),o.sub_segments_expected=s.readBits(8)),o},ne=(e,t,i,s)=>({descriptor_tag:e,descriptor_length:t,identifier:i,TAI_seconds:s.readBits(48),TAI_ns:s.readBits(32),UTC_offset:s.readBits(16)}),oe=e=>({component_tag:e.readBits(8),ISO_code:String.fromCharCode(e.readBits(8),e.readBits(8),e.readBits(8)),Bit_Stream_Mode:e.readBits(3),Num_Channels:e.readBits(4),Full_Srvc_Audio:e.readBool()}),re=(e,t,i,s)=>{const a=s.readBits(4),n=[];for(let e=0;e<a;e++)n.push(oe(s));return{descriptor_tag:e,descriptor_length:t,identifier:i,audio_count:a,components:n}},de=e=>{var t,i,s,a,n,o;const r=new u(e),d=r.readBits(8),l=r.readBool(),h=r.readBool();r.readBits(2);const _=r.readBits(12),c=r.readBits(8),m=r.readBool(),f=r.readBits(6),p=4*r.readBits(31)+r.readBits(2),g=r.readBits(8),v=r.readBits(12),E=r.readBits(12),S=r.readBits(8);let y=null;S===K.kSpliceNull?y={}:S===K.kSpliceSchedule?y=(e=>{const t=e.readBits(8),i=[];for(let s=0;s<t;s++)i.push(ee(e));return{splice_count:t,events:i}})(r):S===K.kSpliceInsert?y=(e=>{const t=e.readBits(32),i=e.readBool();e.readBits(7);const s={splice_event_id:t,splice_event_cancel_indicator:i};if(i)return s;if(s.out_of_network_indicator=e.readBool(),s.program_splice_flag=e.readBool(),s.duration_flag=e.readBool(),s.splice_immediate_flag=e.readBool(),e.readBits(4),s.program_splice_flag&&!s.splice_immediate_flag&&(s.splice_time=X(e)),!s.program_splice_flag){s.component_count=e.readBits(8),s.components=[];for(let t=0;t<s.component_count;t++)s.components.push(J(s.splice_immediate_flag,e))}return s.duration_flag&&(s.break_duration=Y(e)),s.unique_program_id=e.readBits(16),s.avail_num=e.readBits(8),s.avails_expected=e.readBits(8),s})(r):S===K.kTimeSignal?y=(e=>({splice_time:X(e)}))(r):S===K.kBandwidthReservation?y={}:S===K.kPrivateCommand?y=((e,t)=>{const i=String.fromCharCode(t.readBits(8),t.readBits(8),t.readBits(8),t.readBits(8)),s=new Uint8Array(e-4);for(let i=0;i<e-4;i++)s[i]=t.readBits(8);return{identifier:i,private_data:s.buffer}})(E,r):r.readBits(8*E);const A=[],b=r.readBits(16);for(let e=0;e<b;){const t=r.readBits(8),i=r.readBits(8),s=String.fromCharCode(r.readBits(8),r.readBits(8),r.readBits(8),r.readBits(8));0===t?A.push(te(t,i,s,r)):1===t?A.push(ie(t,i,s,r)):2===t?A.push(ae(t,i,s,r)):3===t?A.push(ne(t,i,s,r)):4===t?A.push(re(t,i,s,r)):r.readBits(8*(i-4)),e+=2+i}const R={table_id:d,section_syntax_indicator:l,private_indicator:h,section_length:_,protocol_version:c,encrypted_packet:m,encryption_algorithm:f,pts_adjustment:p,cw_index:g,tier:v,splice_command_length:E,splice_command_type:S,splice_command:y,descriptor_loop_length:b,splice_descriptors:A,E_CRC32:m?r.readBits(32):void 0,CRC32:r.readBits(32)};if(S===K.kSpliceInsert){const r=y;if(r.splice_event_cancel_indicator)return{splice_command_type:S,detail:R,data:e};if(r.program_splice_flag&&!r.splice_immediate_flag){const n=r.duration_flag?null===(t=null==r?void 0:r.break_duration)||void 0===t?void 0:t.auto_return:void 0,o=r.duration_flag?((null===(i=null==r?void 0:r.break_duration)||void 0===i?void 0:i.duration)||0)/90:void 0;return(null===(s=r.splice_time)||void 0===s?void 0:s.time_specified_flag)?{splice_command_type:S,pts:(p+((null===(a=null==r?void 0:r.splice_time)||void 0===a?void 0:a.pts_time)||0))%Math.pow(2,33),auto_return:n,duraiton:o,detail:R,data:e}:{splice_command_type:S,auto_return:n,duraiton:o,detail:R,data:e}}return{splice_command_type:S,auto_return:r.duration_flag?null===(n=r.break_duration)||void 0===n?void 0:n.auto_return:void 0,duraiton:r.duration_flag?((null===(o=r.break_duration)||void 0===o?void 0:o.duration)||0)/90:void 0,detail:R,data:e}}if(S===K.kTimeSignal){const t=y;return t.splice_time.time_specified_flag?{splice_command_type:S,pts:(p+(t.splice_time.pts_time||0))%Math.pow(2,33),detail:R,data:e}:{splice_command_type:S,detail:R,data:e}}return{splice_command_type:S,detail:R,data:e}};var le;!function(e){e[e.kSliceIDR_W_RADL=19]="kSliceIDR_W_RADL",e[e.kSliceIDR_N_LP=20]="kSliceIDR_N_LP",e[e.kSliceCRA_NUT=21]="kSliceCRA_NUT",e[e.kSliceVPS=32]="kSliceVPS",e[e.kSliceSPS=33]="kSliceSPS",e[e.kSlicePPS=34]="kSlicePPS",e[e.kSliceAUD=35]="kSliceAUD"}(le||(le={}));class he{}class _e{constructor(e){const t=e.data.byteLength;this.type=e.type,this.data=new Uint8Array(4+t);new DataView(this.data.buffer).setUint32(0,t),this.data.set(e.data,4)}}class ce{constructor(e){this.TAG="H265AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=e,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not find H265 startcode until payload end!")}findNextStartCodeOffset(e){let t=e;const i=this.data_;for(;;){if(t+3>=i.byteLength)return this.eof_flag_=!0,i.byteLength;const e=i[t+0]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3],s=i[t+0]<<16|i[t+1]<<8|i[t+2];if(1===e||1===s)return t;t++}}readNextNaluPayload(){const e=this.data_;let t=null;for(;null==t&&!this.eof_flag_;){let i=this.current_startcode_offset_;i+=1===(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3])?4:3;const s=e[i]>>1&63,a=(128&e[i])>>>7,n=this.findNextStartCodeOffset(i);if(this.current_startcode_offset_=n,0!==a)continue;const o=e.subarray(i,n);t=new he,t.type=s,t.data=o}return t}}class ue{constructor(e,t,i,s){const a=23+(5+e.byteLength)+(5+t.byteLength)+(5+i.byteLength),n=this.data=new Uint8Array(a);n[0]=1,n[1]=(3&s.general_profile_space)<<6|(s.general_tier_flag?1:0)<<5|31&s.general_profile_idc,n[2]=s.general_profile_compatibility_flags_1,n[3]=s.general_profile_compatibility_flags_2,n[4]=s.general_profile_compatibility_flags_3,n[5]=s.general_profile_compatibility_flags_4,n[6]=s.general_constraint_indicator_flags_1,n[7]=s.general_constraint_indicator_flags_2,n[8]=s.general_constraint_indicator_flags_3,n[9]=s.general_constraint_indicator_flags_4,n[10]=s.general_constraint_indicator_flags_5,n[11]=s.general_constraint_indicator_flags_6,n[12]=s.general_level_idc,n[13]=240|(3840&s.min_spatial_segmentation_idc)>>8,n[14]=255&s.min_spatial_segmentation_idc,n[15]=252|3&s.parallelismType,n[16]=252|3&s.chroma_format_idc,n[17]=248|7&s.bit_depth_luma_minus8,n[18]=248|7&s.bit_depth_chroma_minus8,n[19]=0,n[20]=0,n[21]=(3&s.constant_frame_rate)<<6|(7&s.num_temporal_layers)<<3|(s.temporal_id_nested?1:0)<<2|3,n[22]=3,n[23]=128|le.kSliceVPS,n[24]=0,n[25]=1,n[26]=(65280&e.byteLength)>>8,n[27]=(255&e.byteLength)>>0,n.set(e,28),n[23+(5+e.byteLength)+0]=128|le.kSliceSPS,n[23+(5+e.byteLength)+1]=0,n[23+(5+e.byteLength)+2]=1,n[23+(5+e.byteLength)+3]=(65280&t.byteLength)>>8,n[23+(5+e.byteLength)+4]=(255&t.byteLength)>>0,n.set(t,23+(5+e.byteLength)+5),n[23+(5+e.byteLength+5+t.byteLength)+0]=128|le.kSlicePPS,n[23+(5+e.byteLength+5+t.byteLength)+1]=0,n[23+(5+e.byteLength+5+t.byteLength)+2]=1,n[23+(5+e.byteLength+5+t.byteLength)+3]=(65280&i.byteLength)>>8,n[23+(5+e.byteLength+5+t.byteLength)+4]=(255&i.byteLength)>>0,n.set(i,23+(5+e.byteLength+5+t.byteLength)+5)}getData(){return this.data}}class me{}class fe{}class pe{}const ge=[[64,64,80,80,96,96,112,112,128,128,160,160,192,192,224,224,256,256,320,320,384,384,448,448,512,512,640,640,768,768,896,896,1024,1024,1152,1152,1280,1280],[69,70,87,88,104,105,121,122,139,140,174,175,208,209,243,244,278,279,348,349,417,418,487,488,557,558,696,697,835,836,975,976,1114,1115,1253,1254,1393,1394],[96,96,120,120,144,144,168,168,192,192,240,240,288,288,336,336,384,384,480,480,576,576,672,672,768,768,960,960,1152,1152,1344,1344,1536,1536,1728,1728,1920,1920]];class ve{constructor(e){this.TAG="AC3Parser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not found AC3 syncword until payload end")}findNextSyncwordOffset(e){let t=e;const i=this.data_;for(;;){if(t+7>=i.byteLength)return this.eof_flag_=!0,i.byteLength;if(2935===(i[t+0]<<8|i[t+1]<<0))return t;t++}}readNextAC3Frame(){const e=this.data_;let t=null;for(;null==t&&!this.eof_flag_;){const i=this.current_syncword_offset_,s=e[i+4]>>6,a=[48e3,44200,33e3][s],n=63&e[i+4],o=2*ge[s][n];if(i+o>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const r=this.findNextSyncwordOffset(i+o);this.current_syncword_offset_=r;const d=e[i+5]>>3,l=7&e[i+5],h=e[i+6]>>5;let _=0;0!=(1&h)&&1!==h&&(_+=2),0!=(4&h)&&(_+=2),2===h&&(_+=2);const c=(e[i+6]<<8|e[i+7]<<0)>>12-_&1,u=[2,1,2,3,3,4,4,5][h]+c;t=new pe,t.sampling_frequency=a,t.channel_count=u,t.channel_mode=h,t.bit_stream_identification=d,t.low_frequency_effects_channel_on=c,t.bit_stream_mode=l,t.frame_size_code=n,t.data=e.subarray(i,i+o)}return t}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class Ee{constructor(e){let t=[];t=[e.sampling_rate_code<<6|e.bit_stream_identification<<1|e.bit_stream_mode>>2,(3&e.bit_stream_mode)<<6|e.channel_mode<<3|e.low_frequency_effects_channel_on<<2|e.frame_size_code>>4,e.frame_size_code<<4&224],this.config=t,this.sampling_rate=e.sampling_frequency,this.bit_stream_identification=e.bit_stream_identification,this.bit_stream_mode=e.bit_stream_mode,this.low_frequency_effects_channel_on=e.low_frequency_effects_channel_on,this.channel_count=e.channel_count,this.channel_mode=e.channel_mode,this.codec_mimetype="ac-3",this.original_codec_mimetype="ac-3"}}class Se{}class ye{constructor(e){this.TAG="EAC3Parser",this.data_=e,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&a.Z.e(this.TAG,"Could not found AC3 syncword until payload end")}findNextSyncwordOffset(e){let t=e;const i=this.data_;for(;;){if(t+7>=i.byteLength)return this.eof_flag_=!0,i.byteLength;if(2935===(i[t+0]<<8|i[t+1]<<0))return t;t++}}readNextEAC3Frame(){const e=this.data_;let t=null;for(;null==t&&!this.eof_flag_;){const i=this.current_syncword_offset_,s=new u(e.subarray(i+2)),a=(s.readBits(2),s.readBits(3),s.readBits(11)+1<<1);let n=s.readBits(2),o=null,r=null;3===n?(n=s.readBits(2),o=[24e3,22060,16e3][n],r=3):(o=[48e3,44100,32e3][n],r=s.readBits(2));const d=s.readBits(3),l=s.readBits(1),h=s.readBits(5);if(i+a>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const _=this.findNextSyncwordOffset(i+a);this.current_syncword_offset_=_;const c=[2,1,2,3,3,4,4,5][d]+l;s.destroy(),t=new Se,t.sampling_frequency=o,t.channel_count=c,t.channel_mode=d,t.bit_stream_identification=h,t.low_frequency_effects_channel_on=l,t.frame_size=a,t.num_blks=[1,2,3,6][r],t.data=e.subarray(i,i+a)}return t}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class Ae{constructor(e){let t=[];const i=Math.floor(e.frame_size*e.sampling_frequency/(16*e.num_blks));t=[255&i,248&i,e.sampling_rate_code<<6|e.bit_stream_identification<<1|0,0|e.channel_mode<<1|e.low_frequency_effects_channel_on<<0,0],this.config=t,this.sampling_rate=e.sampling_frequency,this.bit_stream_identification=e.bit_stream_identification,this.num_blks=e.num_blks,this.low_frequency_effects_channel_on=e.low_frequency_effects_channel_on,this.channel_count=e.channel_count,this.channel_mode=e.channel_mode,this.codec_mimetype="ec-3",this.original_codec_mimetype="ec-3"}}const be=class extends L{constructor(e,t){super(),this.TAG="TSDemuxer",this.first_parse_=!0,this.media_info_=new o.Z,this.timescale_=90,this.duration_=0,this.current_pmt_pid_=-1,this.program_pmt_map_={},this.pes_slice_queues_={},this.section_slice_queues_={},this.video_metadata_={vps:void 0,sps:void 0,pps:void 0,details:void 0},this.audio_metadata_={codec:void 0,audio_object_type:void 0,sampling_freq_index:void 0,sampling_frequency:void 0,channel_config:void 0},this.aac_last_sample_pts_=void 0,this.aac_last_incomplete_data_=null,this.has_video_=!1,this.has_audio_=!1,this.video_init_segment_dispatched_=!1,this.audio_init_segment_dispatched_=!1,this.video_metadata_changed_=!1,this.audio_metadata_changed_=!1,this.loas_previous_frame=null,this.video_track_={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this.audio_track_={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this.ts_packet_size_=e.ts_packet_size,this.sync_offset_=e.sync_offset,this.config_=t}destroy(){this.media_info_=null,this.pes_slice_queues_=null,this.section_slice_queues_=null,this.video_metadata_=null,this.audio_metadata_=null,this.aac_last_incomplete_data_=null,this.video_track_=null,this.audio_track_=null,super.destroy()}static probe(e){const t=new Uint8Array(e);let i=-1,s=188;if(t.byteLength<=3*s)return{needMoreData:!0};for(;-1===i;){const e=Math.min(1e3,t.byteLength-3*s);for(let a=0;a<e;){if(71===t[a]&&71===t[a+s]&&71===t[a+2*s]){i=a;break}a++}if(-1===i)if(188===s)s=192;else{if(192!==s)break;s=204}}return-1===i?{match:!1}:(192===s&&i>=4?(a.Z.v("TSDemuxer","ts_packet_size = 192, m2ts mode"),i-=4):204===s&&a.Z.v("TSDemuxer","ts_packet_size = 204, RS encoded MPEG2-TS stream"),{match:!0,consumed:0,ts_packet_size:s,sync_offset:i})}bindDataSource(e){return e.onDataArrival=this.parseChunks.bind(this),this}resetMediaInfo(){this.media_info_=new o.Z}parseChunks(e,t){var i;if(!(this.onError&&this.onMediaInfo&&this.onTrackMetadata&&this.onDataAvailable))throw new l.rT("onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");let s=0;for(this.first_parse_&&(this.first_parse_=!1,s=this.sync_offset_);s+this.ts_packet_size_<=e.byteLength;){const n=t+s;192===this.ts_packet_size_&&(s+=4);const o=new Uint8Array(e,s,188),r=o[0];if(71!==r){a.Z.e(this.TAG,`sync_byte = ${r}, not 0x47`);break}const d=(64&o[1])>>>6,l=(o[1],(31&o[1])<<8|o[2]),h=(48&o[3])>>>4,_=15&o[3];let c={},u=4;if(2===h||3===h){const t=o[4];if(5+t===188){s+=188,204===this.ts_packet_size_&&(s+=16);continue}t>0&&(c=this.parseAdaptationField(e,s+4,1+t)),u=5+t}if(1===h||3===h)if(0===l||l===this.current_pmt_pid_||void 0!==this.pmt_&&this.pmt_.pid_stream_type[l]===D.kSCTE35){const t=188-u;this.handleSectionSlice(e,s+u,t,{pid:l,file_position:n,payload_unit_start_indicator:d,continuity_conunter:_,random_access_indicator:c.random_access_indicator})}else if(void 0!==(null===(i=this.pmt_)||void 0===i?void 0:i.pid_stream_type[l])){const t=188-u,i=this.pmt_.pid_stream_type[l];(l===this.pmt_.common_pids.h264||l===this.pmt_.common_pids.h265||l===this.pmt_.common_pids.adts_aac||l===this.pmt_.common_pids.loas_aac||l===this.pmt_.common_pids.ac3||l===this.pmt_.common_pids.eac3||l===this.pmt_.common_pids.opus||l===this.pmt_.common_pids.mp3||this.pmt_.pes_private_data_pids[l]||this.pmt_.timed_id3_pids[l])&&this.handlePESSlice(e,s+u,t,{pid:l,stream_type:i,file_position:n,payload_unit_start_indicator:d,continuity_conunter:_,random_access_indicator:c.random_access_indicator})}s+=188,204===this.ts_packet_size_&&(s+=16)}return this.dispatchAudioVideoMediaSegment(),s}parseAdaptationField(e,t,i){const s=new Uint8Array(e,t,i),n=s[0];if(n>0){if(n>183)return a.Z.w(this.TAG,`Illegal adaptation_field_length: ${n}`),{};return{discontinuity_indicator:(128&s[1])>>>7,random_access_indicator:(64&s[1])>>>6,elementary_stream_priority_indicator:(32&s[1])>>>5}}return{}}handleSectionSlice(e,t,i,s){const a=new Uint8Array(e,t,i);let n=this.section_slice_queues_?this.section_slice_queues_[s.pid]:{};if(s.payload_unit_start_indicator){const o=a[0];if(void 0!==n&&0!==(null==n?void 0:n.total_length)){const a=new Uint8Array(e,t+1,Math.min(i,o));n.slices.push(a),n.total_length+=a.byteLength,n.total_length===n.expected_length?this.emitSectionSlices(n,s):this.clearSlices(n,s)}for(let r=1+o;r<a.byteLength;){if(255===a[r+0])break;const o=(15&a[r+1])<<8|a[r+2];this.section_slice_queues_&&(this.section_slice_queues_[s.pid]=new x,n=this.section_slice_queues_[s.pid]),n.expected_length=o+3,n.file_position=s.file_position,n.random_access_indicator=s.random_access_indicator;const d=new Uint8Array(e,t+r,Math.min(i-r,n.expected_length-n.total_length));n.slices.push(d),n.total_length+=d.byteLength,n.total_length===n.expected_length?this.emitSectionSlices(n,s):n.total_length>=n.expected_length&&this.clearSlices(n,s),r+=d.byteLength}}else if(void 0!==n&&0!==n.total_length){const a=new Uint8Array(e,t,Math.min(i,n.expected_length-n.total_length));n.slices.push(a),n.total_length+=a.byteLength,n.total_length===n.expected_length?this.emitSectionSlices(n,s):n.total_length>=n.expected_length&&this.clearSlices(n,s)}}handlePESSlice(e,t,i,s){const n=new Uint8Array(e,t,i),o=n[0]<<16|n[1]<<8|n[2],r=(n[3],n[4]<<8|n[5]);if(s.payload_unit_start_indicator){if(1!==o)return void a.Z.e(this.TAG,`handlePESSlice: packet_start_code_prefix should be 1 but with value ${o}`);const e=this.pes_slice_queues_[s.pid];e&&(0===e.expected_length||e.expected_length===e.total_length?this.emitPESSlices(e,s):this.clearSlices(e,s)),this.pes_slice_queues_&&(this.pes_slice_queues_[s.pid]=new x,this.pes_slice_queues_[s.pid].file_position=s.file_position,this.pes_slice_queues_[s.pid].random_access_indicator=s.random_access_indicator)}if(void 0===this.pes_slice_queues_[s.pid])return;const d=this.pes_slice_queues_[s.pid];d.slices.push(n),s.payload_unit_start_indicator&&(d.expected_length=0===r?0:r+6),d.total_length+=n.byteLength,d.expected_length>0&&d.expected_length===d.total_length?this.emitPESSlices(d,s):d.expected_length>0&&d.expected_length<d.total_length&&this.clearSlices(d,s)}emitSectionSlices(e,t){const i=new Uint8Array(e.total_length);for(let t=0,s=0;t<e.slices.length;t++){const a=e.slices[t];i.set(a,s),s+=a.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;const s=new P;s.pid=t.pid,s.data=i,s.file_position=e.file_position,s.random_access_indicator=e.random_access_indicator,this.parseSection(s)}emitPESSlices(e,t){const i=new Uint8Array(e.total_length);for(let t=0,s=0;t<e.slices.length;t++){const a=e.slices[t];i.set(a,s),s+=a.byteLength}e.slices=[],e.expected_length=-1,e.total_length=0;const s=new O;s.pid=t.pid,s.data=i,s.stream_type=t.stream_type,s.file_position=e.file_position,s.random_access_indicator=e.random_access_indicator,this.parsePES(s)}clearSlices(e,t){e.slices=[],e.expected_length=-1,e.total_length=0}parseSection(e){var t;const i=e.data,s=e.pid;0===s?this.parsePAT(i):s===this.current_pmt_pid_?this.parsePMT(i):(null===(t=this.pmt_)||void 0===t?void 0:t.scte_35_pids[s])&&this.parseSCTE35(i)}parsePES(e){const t=e.data,i=t[0]<<16|t[1]<<8|t[2],s=t[3],n=t[4]<<8|t[5];if(1===i){if(188!==s&&190!==s&&191!==s&&240!==s&&241!==s&&255!==s&&242!==s&&248!==s){t[6];const i=(192&t[7])>>>6,o=t[8];let r,d;2!==i&&3!==i||(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,d=3===i?536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2:r);const l=9+o;let h;if(0!==n){if(n<3+o)return void a.Z.v(this.TAG,"Malformed PES: PES_packet_length < 3 + PES_header_data_length");h=n-3-o}else h=t.byteLength-l;const _=t.subarray(l,l+h);switch(e.stream_type){case D.kMPEG1Audio:case D.kMPEG2Audio:this.parseMP3Payload(_,r);break;case D.kPESPrivateData:this.pmt_.common_pids.opus===e.pid?this.parseOpusPayload(_,r):this.pmt_.common_pids.ac3===e.pid?this.parseAC3Payload(_,r):this.pmt_.common_pids.eac3===e.pid?this.parseEAC3Payload(_,r):this.pmt_.smpte2038_pids[e.pid]?this.parseSMPTE2038MetadataPayload(_,r,d,e.pid,s):this.parsePESPrivateDataPayload(_,r,d,e.pid,s);break;case D.kADTSAAC:this.parseADTSAACPayload(_,r);break;case D.kLOASAAC:this.parseLOASAACPayload(_,r);break;case D.kAC3:this.parseAC3Payload(_,r);break;case D.kEAC3:this.parseEAC3Payload(_,r);break;case D.kID3:this.parseTimedID3MetadataPayload(_,r,d,e.pid,s);break;case D.kH264:this.parseH264Payload(_,r,d,e.file_position,e.random_access_indicator);break;case D.kH265:this.parseH265Payload(_,r,d,e.file_position,e.random_access_indicator)}}else if((188===s||191===s||240===s||241===s||255===s||242===s||248===s)&&e.stream_type===D.kPESPrivateData){const i=6;let a;a=0!==n?n:t.byteLength-i;const o=t.subarray(i,i+a);this.parsePESPrivateDataPayload(o,void 0,void 0,e.pid,s)}}else a.Z.e(this.TAG,`parsePES: packet_start_code_prefix should be 1 but with value ${i}`)}parsePAT(e){const t=e[0];if(0!==t)return void a.Z.e(this.TAG,`parsePAT: table_id ${t} is not corresponded to PAT!`);const i=(15&e[1])<<8|e[2],s=(e[3],e[4],(62&e[5])>>>1),n=1&e[5],o=e[6];e[7];let r=null;if(1===n&&0===o)r=new w,r.version_number=s;else if(r=this.pat_,null==r)return;const d=i-5-4;let l=-1,h=-1;for(let t=8;t<8+d;t+=4){const i=e[t]<<8|e[t+1],s=(31&e[t+2])<<8|e[t+3];0===i?r.network_pid=s:(r.program_pmt_pid[i]=s,-1===l&&(l=i),-1===h&&(h=s))}1===n&&0===o&&(void 0===this.pat_&&a.Z.v(this.TAG,`Parsed first PAT: ${JSON.stringify(r)}`),this.pat_=r,this.current_program_=l,this.current_pmt_pid_=h)}parsePMT(e){const t=e[0];if(2!==t)return void a.Z.e(this.TAG,`parsePMT: table_id ${t} is not corresponded to PMT!`);const i=(15&e[1])<<8|e[2],s=e[3]<<8|e[4],n=(62&e[5])>>>1,o=1&e[5],r=e[6];e[7];let d=null;if(1===o&&0===r)d=new M,d.program_number=s,d.version_number=n,this.program_pmt_map_[s]=d;else if(d=this.program_pmt_map_[s],null==d)return;e[8],e[9];const l=(15&e[10])<<8|e[11],h=12+l,_=i-9-l-4;for(let t=h;t<h+_;){const i=e[t],s=(31&e[t+1])<<8|e[t+2],n=(15&e[t+3])<<8|e[t+4];d.pid_stream_type[s]=i;const o=d.common_pids.h264||d.common_pids.h265,r=d.common_pids.adts_aac||d.common_pids.loas_aac||d.common_pids.ac3||d.common_pids.eac3||d.common_pids.opus||d.common_pids.mp3;if(i!==D.kH264||o){if(i!==D.kH265||o){if(i!==D.kADTSAAC||r){if(i!==D.kLOASAAC||r){if(i!==D.kAC3||r){if(i!==D.kEAC3||r){if(i!==D.kMPEG1Audio&&i!==D.kMPEG2Audio||r){if(i===D.kPESPrivateData){if(d.pes_private_data_pids[s]=!0,n>0){for(let i=t+5;i<t+5+n;){const t=e[i+0],n=e[i+1];if(5===t){const t=String.fromCharCode(...Array.from(e.subarray(i+2,i+2+n)));"VANC"===t?d.smpte2038_pids[s]=!0:"Opus"===t&&(d.common_pids.opus=s)}else if(127===t&&s===d.common_pids.opus){let t=null;if(128===e[i+2]&&(t=e[i+3]),null==t){a.Z.e(this.TAG,"Not Supported Opus channel count.");continue}const s={codec:"opus",channel_count:0==(15&t)?2:15&t,channel_config_code:t,sample_rate:48e3},n={codec:"opus",meta:s};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(n)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(n)):(this.audio_metadata_=s,this.dispatchAudioInitSegment(n))}i+=2+n}const o=e.subarray(t+5,t+5+n);this.dispatchPESPrivateDataDescriptor(s,i,o)}}else i===D.kID3?d.timed_id3_pids[s]=!0:i===D.kSCTE35&&(d.scte_35_pids[s]=!0)}else d.common_pids.mp3=s}else d.common_pids.eac3=s}else d.common_pids.ac3=s}else d.common_pids.loas_aac=s}else d.common_pids.adts_aac=s}else d.common_pids.h265=s}else d.common_pids.h264=s;t+=5+n}s===this.current_program_&&(void 0===this.pmt_&&a.Z.v(this.TAG,`Parsed first PMT: ${JSON.stringify(d)}`),this.pmt_=d,(d.common_pids.h264||d.common_pids.h265)&&(this.has_video_=!0),(d.common_pids.adts_aac||d.common_pids.loas_aac||d.common_pids.ac3||d.common_pids.opus||d.common_pids.mp3)&&(this.has_audio_=!0))}parseSCTE35(e){const t=de(e);if(void 0!==t.pts){const e=Math.floor(t.pts/this.timescale_);t.pts=e}else t.nearest_pts=this.aac_last_sample_pts_;this.onSCTE35Metadata&&this.onSCTE35Metadata(t)}parseH264Payload(e,t,i,s,n){var o,r;const d=new N(e);let l=null;const h=[];let _=0,c=!1;for(;null!=(l=d.readNextNaluPayload());){const e=new Z(l);if(e.type===C.kSliceSPS){const t=f.parseSPS(l.data);this.video_init_segment_dispatched_?this.detectVideoMetadataChange(e,t)&&(a.Z.v(this.TAG,"H264: Critical h264 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:e,pps:void 0,details:t}):this.video_metadata_&&(this.video_metadata_.sps=e,this.video_metadata_.details=t)}else e.type===C.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(this.video_metadata_&&(this.video_metadata_.pps=e),(null===(o=this.video_metadata_)||void 0===o?void 0:o.sps)&&(null===(r=this.video_metadata_)||void 0===r?void 0:r.pps)&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):(e.type===C.kSliceIDR||e.type===C.kSliceNonIDR&&1===n)&&(c=!0);this.video_init_segment_dispatched_&&(h.push(e),_+=e.data.byteLength)}const u=Math.floor(t/this.timescale_),m=Math.floor(i/this.timescale_);if(h.length){const e=this.video_track_,t={units:h,length:_,isKeyframe:c,dts:m,pts:u,cts:u-m,file_position:s};e&&(e.samples.push(t),e.length+=_)}}parseH265Payload(e,t,i,s,n){var o,r,d,l,h,_,c;const u=new ce(e);let m=null;const f=[];let p=0,g=!1;for(;null!=(m=u.readNextNaluPayload());){const e=new _e(m);if(e.type===le.kSliceVPS){if(!this.video_init_segment_dispatched_){const t=v.parseVPS(m.data);this.video_metadata_&&(this.video_metadata_.vps=e,this.video_metadata_.details=Object.assign(Object.assign({},null===(o=this.video_metadata_)||void 0===o?void 0:o.details),t))}}else if(e.type===le.kSliceSPS){const t=v.parseSPS(m.data);this.video_init_segment_dispatched_?this.detectVideoMetadataChange(e,t)&&(a.Z.v(this.TAG,"H265: Critical h265 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:e,pps:void 0,details:t}):this.video_metadata_&&(this.video_metadata_.sps=e,this.video_metadata_.details=Object.assign(Object.assign({},null===(r=this.video_metadata_)||void 0===r?void 0:r.details),t))}else if(e.type===le.kSlicePPS){if(!this.video_init_segment_dispatched_||this.video_metadata_changed_){const t=v.parsePPS(m.data);this.video_metadata_&&(this.video_metadata_.pps=e,this.video_metadata_.details=Object.assign(Object.assign({},null===(d=this.video_metadata_)||void 0===d?void 0:d.details),t)),(null===(l=this.video_metadata_)||void 0===l?void 0:l.vps)&&(null===(h=this.video_metadata_)||void 0===h?void 0:h.sps)&&(null===(_=this.video_metadata_)||void 0===_?void 0:_.pps)&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())}}else e.type!==le.kSliceIDR_W_RADL&&e.type!==le.kSliceIDR_N_LP&&e.type!==le.kSliceCRA_NUT||(g=!0);this.video_init_segment_dispatched_&&(f.push(e),p+=e.data.byteLength)}const E=Math.floor(t/this.timescale_),S=Math.floor(i/this.timescale_);if(f.length){const e=this.video_track_,t={units:f,length:p,isKeyframe:g,dts:S,pts:E,cts:E-S,file_position:s};e&&(null===(c=e.samples)||void 0===c||c.push(t),e.length+=p)}}detectVideoMetadataChange(e,t){var i,s,n,o,r,d,l,h,_,c;if(t.codec_mimetype!==(null===(s=null===(i=this.video_metadata_)||void 0===i?void 0:i.details)||void 0===s?void 0:s.codec_mimetype))return a.Z.v(this.TAG,`Video: Codec mimeType changed from ${null===(n=this.video_metadata_)||void 0===n?void 0:n.details.codec_mimetype} to ${null==t?void 0:t.codec_mimetype}`),!0;if(t.codec_size.width!==(null===(r=null===(o=this.video_metadata_)||void 0===o?void 0:o.details)||void 0===r?void 0:r.codec_size.width)||t.codec_size.height!==(null===(l=null===(d=this.video_metadata_)||void 0===d?void 0:d.details)||void 0===l?void 0:l.codec_size.height)){const e=null===(h=this.video_metadata_)||void 0===h?void 0:h.details.codec_size,i=t.codec_size;return a.Z.v(this.TAG,`Video: Coded Resolution changed from ${e.width}x${e.height} to ${i.width}x${i.height}`),!0}return t.present_size.width!==(null===(_=this.video_metadata_)||void 0===_?void 0:_.details.present_size.width)&&(a.Z.v(this.TAG,`Video: Present resolution width changed from ${null===(c=this.video_metadata_)||void 0===c?void 0:c.details.present_size.width} to ${null==t?void 0:t.present_size.width}`),!0)}isInitSegmentDispatched(){return this.has_video_&&this.has_audio_?this.video_init_segment_dispatched_&&this.audio_init_segment_dispatched_:this.has_video_&&!this.has_audio_?this.video_init_segment_dispatched_:!(this.has_video_||!this.has_audio_)&&this.audio_init_segment_dispatched_}dispatchVideoInitSegment(){var e,t,i,s,n,o,r,d,l,h,_,c;const u=null===(e=this.video_metadata_)||void 0===e?void 0:e.details,m={type:"video"};m.id=null===(t=this.video_track_)||void 0===t?void 0:t.id,m.timescale=1e3,m.duration=this.duration_,m.codecWidth=u.codec_size.width,m.codecHeight=u.codec_size.height,m.presentWidth=u.present_size.width,m.presentHeight=u.present_size.height,m.profile=u.profile_string,m.level=u.level_string,m.bitDepth=u.bit_depth,m.chromaFormat=u.chroma_format,m.sarRatio=u.sar_ratio,m.frameRate=u.frame_rate;const f=m.frameRate.fps_den,p=m.frameRate.fps_num;if(m.refSampleDuration=f/p*1e3,m.codec=u.codec_mimetype,null===(i=this.video_metadata_)||void 0===i?void 0:i.vps){const e=null===(s=this.video_metadata_)||void 0===s?void 0:s.vps.data.subarray(4),t=null===(o=null===(n=this.video_metadata_)||void 0===n?void 0:n.sps)||void 0===o?void 0:o.data.subarray(4),i=null===(d=null===(r=this.video_metadata_)||void 0===r?void 0:r.pps)||void 0===d?void 0:d.data.subarray(4),l=new ue(e,t,i,u);m.hvcc=l.getData(),this.video_init_segment_dispatched_||a.Z.v(this.TAG,`Generated first HEVCDecoderConfigurationRecord for mimeType: ${m.codec}`)}else{const e=null===(h=null===(l=this.video_metadata_)||void 0===l?void 0:l.sps)||void 0===h?void 0:h.data.subarray(4),t=null===(c=null===(_=this.video_metadata_)||void 0===_?void 0:_.pps)||void 0===c?void 0:c.data.subarray(4),i=new G(e,t,u);m.avcc=i.getData(),this.video_init_segment_dispatched_||a.Z.v(this.TAG,`Generated first AVCDecoderConfigurationRecord for mimeType: ${m.codec}`)}this.onTrackMetadata&&this.onTrackMetadata("video",m),this.video_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;const g=this.media_info_;g.hasVideo=!0,g.width=m.codecWidth,g.height=m.codecHeight,g.fps=m.frameRate.fps,g.profile=m.profile,g.level=m.level,g.refFrames=u.ref_frames,g.chromaFormat=u.chroma_format_string,g.sarNum=m.sarRatio.width,g.sarDen=m.sarRatio.height,g.videoCodec=m.codec,g.hasAudio&&g.audioCodec?g.mimeType=`video/mp2t; codecs="${g.videoCodec},${g.audioCodec}"`:g.mimeType=`video/mp2t; codecs="${g.videoCodec}"`,g.isComplete()&&this.onMediaInfo&&this.onMediaInfo(g)}dispatchVideoMediaSegment(){var e;this.isInitSegmentDispatched()&&(null===(e=this.video_track_)||void 0===e?void 0:e.length)&&this.onDataAvailable&&this.onDataAvailable(null,this.video_track_)}dispatchAudioMediaSegment(){var e;this.isInitSegmentDispatched()&&(null===(e=this.audio_track_)||void 0===e?void 0:e.length)&&this.onDataAvailable&&this.onDataAvailable(this.audio_track_,null)}dispatchAudioVideoMediaSegment(){var e,t;this.isInitSegmentDispatched()&&((null===(e=this.audio_track_)||void 0===e?void 0:e.length)||(null===(t=this.video_track_)||void 0===t?void 0:t.length))&&this.onDataAvailable&&this.onDataAvailable(this.audio_track_,this.video_track_)}parseADTSAACPayload(e,t){var i,s,n;if(this.has_video_&&!this.video_init_segment_dispatched_)return;if(this.aac_last_incomplete_data_){const t=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength);t.set(this.aac_last_incomplete_data_,0),t.set(e,this.aac_last_incomplete_data_.byteLength),e=t}let o,r=0;if(void 0!==t&&(r=t/this.timescale_),"aac"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec)){if(void 0===t&&void 0!==this.aac_last_sample_pts_)o=1024/(null===(s=this.audio_metadata_)||void 0===s?void 0:s.sampling_frequency)*1e3,r=this.aac_last_sample_pts_+o;else if(void 0===t)return void a.Z.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.aac_last_sample_pts_){o=1024/this.audio_metadata_.sampling_frequency*1e3;const e=this.aac_last_sample_pts_+o;Math.abs(e-r)>1&&(a.Z.w(this.TAG,`AAC: Detected pts overlapped, expected: ${e}ms, PES pts: ${r}ms`),r=e)}}const d=new H(e);let l=null,h=r,_=0;for(;null!=(l=d.readNextAACFrame());){o=1024/l.sampling_frequency*1e3;const e={codec:"aac",data:l};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(e)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(e)):(this.audio_metadata_={codec:"aac",audio_object_type:l.audio_object_type,sampling_freq_index:l.sampling_freq_index,sampling_frequency:l.sampling_frequency,channel_config:l.channel_config},this.dispatchAudioInitSegment(e)),_=h;const t=Math.floor(h),i={unit:l.data,length:l.data.byteLength,pts:t,dts:t};this.audio_track_&&(null===(n=this.audio_track_)||void 0===n||n.samples.push(i),this.audio_track_.length+=l.data.byteLength),h+=o}d.hasIncompleteData()&&(this.aac_last_incomplete_data_=d.getIncompleteData()),_&&(this.aac_last_sample_pts_=_)}parseLOASAACPayload(e,t){var i,s,n;if(this.has_video_&&!this.video_init_segment_dispatched_)return;if(this.aac_last_incomplete_data_){const t=new Uint8Array(e.byteLength+this.aac_last_incomplete_data_.byteLength);t.set(this.aac_last_incomplete_data_,0),t.set(e,this.aac_last_incomplete_data_.byteLength),e=t}let o,r=0;if(void 0!==t&&(r=t/this.timescale_),"aac"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec)){if(void 0===t&&void 0!==this.aac_last_sample_pts_)o=1024/this.audio_metadata_.sampling_frequency*1e3,r=this.aac_last_sample_pts_+o;else if(void 0===t)return void a.Z.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.aac_last_sample_pts_){o=1024/this.audio_metadata_.sampling_frequency*1e3;const e=this.aac_last_sample_pts_+o;Math.abs(e-r)>1&&(a.Z.w(this.TAG,`AAC: Detected pts overlapped, expected: ${e}ms, PES pts: ${r}ms`),r=e)}}const d=new q(e);let l=null,h=r,_=0;for(;null!=(l=d.readNextAACFrame(null!==(s=this.loas_previous_frame)&&void 0!==s?s:void 0));){this.loas_previous_frame=l,o=1024/l.sampling_frequency*1e3;const e={codec:"aac",data:l};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(e)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(e)):(this.audio_metadata_={codec:"aac",audio_object_type:l.audio_object_type,sampling_freq_index:l.sampling_freq_index,sampling_frequency:l.sampling_frequency,channel_config:l.channel_config},this.dispatchAudioInitSegment(e)),_=h;const t=Math.floor(h),i={unit:l.data,length:l.data.byteLength,pts:t,dts:t};this.audio_track_&&(null===(n=this.audio_track_)||void 0===n||n.samples.push(i),this.audio_track_.length+=l.data.byteLength),h+=o}d.hasIncompleteData()&&(this.aac_last_incomplete_data_=d.getIncompleteData()),_&&(this.aac_last_sample_pts_=_)}parseAC3Payload(e,t){var i,s;if(this.has_video_&&!this.video_init_segment_dispatched_)return;let n,o=0;if(void 0!==t&&(o=t/this.timescale_),"ac-3"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec))if(void 0===t&&void 0!==this.aac_last_sample_pts_)n=1536/this.audio_metadata_.sampling_frequency*1e3,o=this.aac_last_sample_pts_+n;else if(void 0===t)return void a.Z.w(this.TAG,"AC3: Unknown pts");const r=new ve(e);let d=null,l=o,h=0;for(;null!=(d=r.readNextAC3Frame());){n=1536/d.sampling_frequency*1e3;const e={codec:"ac-3",data:d};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(e)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(e)):(this.audio_metadata_={codec:"ac-3",sampling_frequency:d.sampling_frequency,bit_stream_identification:d.bit_stream_identification,bit_stream_mode:d.bit_stream_mode,low_frequency_effects_channel_on:d.low_frequency_effects_channel_on,channel_mode:d.channel_mode},this.dispatchAudioInitSegment(e)),h=l;const t=Math.floor(l),i={unit:d.data,length:d.data.byteLength,pts:t,dts:t};this.audio_track_&&(null===(s=this.audio_track_)||void 0===s||s.samples.push(i),this.audio_track_.length+=d.data.byteLength),l+=n}h&&(this.aac_last_sample_pts_=h)}parseEAC3Payload(e,t){var i,s;if(this.has_video_&&!this.video_init_segment_dispatched_)return;let n,o=0;if(void 0!==t&&(o=t/this.timescale_),"ec-3"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec))if(void 0===t&&void 0!==this.aac_last_sample_pts_)n=256*(this.audio_metadata_.num_blks||0)/(this.audio_metadata_.sampling_frequency||0)*1e3,o=this.aac_last_sample_pts_+n;else if(void 0===t)return void a.Z.w(this.TAG,"EAC3: Unknown pts");const r=new ye(e);let d=null,l=o,h=0;for(;null!=(d=r.readNextEAC3Frame());){n=1536/d.sampling_frequency*1e3;const e={codec:"ec-3",data:d};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(e)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(e)):(this.audio_metadata_={codec:"ec-3",sampling_frequency:d.sampling_frequency,bit_stream_identification:d.bit_stream_identification,low_frequency_effects_channel_on:d.low_frequency_effects_channel_on,num_blks:d.num_blks,channel_mode:d.channel_mode},this.dispatchAudioInitSegment(e)),h=l;const t=Math.floor(l),i={unit:d.data,length:d.data.byteLength,pts:t,dts:t};this.audio_track_&&(null===(s=this.audio_track_)||void 0===s||s.samples.push(i),this.audio_track_.length+=d.data.byteLength),l+=n}h&&(this.aac_last_sample_pts_=h)}parseOpusPayload(e,t){var i,s;if(this.has_video_&&!this.video_init_segment_dispatched_)return;let n,o=0;if(void 0!==t&&(o=t/this.timescale_),"opus"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec))if(void 0===t&&void 0!==this.aac_last_sample_pts_)n=20,o=this.aac_last_sample_pts_+n;else if(void 0===t)return void a.Z.w(this.TAG,"Opus: Unknown pts");let r=o,d=0;for(let t=0;t<e.length;){n=20;const i=0!=(16&e[t+1]),a=0!=(8&e[t+1]);let o=t+2,l=0;for(;255===e[o];)l+=255,o+=1;l+=e[o],o+=1,o+=i?2:0,o+=a?2:0,d=r;const h=Math.floor(r),_=e.slice(o,o+l),c={unit:_,length:_.byteLength,pts:h,dts:h};this.audio_track_&&(null===(s=this.audio_track_)||void 0===s||s.samples.push(c),this.audio_track_.length+=_.byteLength),r+=n,t=o+l}d&&(this.aac_last_sample_pts_=d)}parseMP3Payload(e,t){var i;if(this.has_video_&&!this.video_init_segment_dispatched_)return;const s=[44100,48e3,32e3,0],a=[22050,24e3,16e3,0],n=[11025,12e3,8e3,0],l=e[1]>>>3&3,h=(6&e[1])>>1;(240&e[2])>>>4;const c=(12&e[2])>>>2,u=3!==(e[3]>>>6&3)?2:1;let m=0,p=34;switch(l){case 0:m=n[c];break;case 2:m=a[c];break;case 3:m=s[c]}switch(h){case 1:p=34;break;case 2:p=33;break;case 3:p=32}const g=new fe;g.object_type=p,g.sample_rate=m,g.channel_count=u,g.data=e;const v={codec:"mp3",data:g};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(v)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(v)):(this.audio_metadata_={codec:"mp3",object_type:p,sample_rate:m,channel_count:u},this.dispatchAudioInitSegment(v));const E={unit:e,length:e.byteLength,pts:t/this.timescale_,dts:t/this.timescale_};this.audio_track_&&(null===(i=this.audio_track_)||void 0===i||i.samples.push(E),this.audio_track_.length+=e.byteLength)}detectAudioMetadataChange(e){var t,i,s,n;if(e.codec!==(null===(t=this.audio_metadata_)||void 0===t?void 0:t.codec))return a.Z.v(this.TAG,`Audio: Audio Codecs changed from ${null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec} to ${e.codec}`),!0;if("aac"===e.codec&&"aac"===this.audio_metadata_.codec){const t=e.data;if(t.audio_object_type!==this.audio_metadata_.audio_object_type)return a.Z.v(this.TAG,`AAC: AudioObjectType changed from ${this.audio_metadata_.audio_object_type} to ${t.audio_object_type}`),!0;if(t.sampling_freq_index!==this.audio_metadata_.sampling_freq_index)return a.Z.v(this.TAG,`AAC: SamplingFrequencyIndex changed from ${this.audio_metadata_.sampling_freq_index} to ${t.sampling_freq_index}`),!0;if(t.channel_config!==this.audio_metadata_.channel_config)return a.Z.v(this.TAG,`AAC: Channel configuration changed from ${null===(s=this.audio_metadata_)||void 0===s?void 0:s.channel_config} to ${t.channel_config}`),!0}else if("ac-3"===e.codec&&"ac-3"===this.audio_metadata_.codec){const t=e.data;if(t.sampling_frequency!==this.audio_metadata_.sampling_frequency)return a.Z.v(this.TAG,`AC3: Sampling Frequency changed from ${null===(n=this.audio_metadata_)||void 0===n?void 0:n.sampling_frequency} to ${t.sampling_frequency}`),!0;if(t.bit_stream_identification!==this.audio_metadata_.bit_stream_identification)return a.Z.v(this.TAG,`AC3: Bit Stream Identification changed from ${this.audio_metadata_.bit_stream_identification} to ${t.bit_stream_identification}`),!0;if(t.bit_stream_mode!==this.audio_metadata_.bit_stream_mode)return a.Z.v(this.TAG,`AC3: BitStream Mode changed from ${this.audio_metadata_.bit_stream_mode} to ${t.bit_stream_mode}`),!0;if(t.channel_mode!==this.audio_metadata_.channel_mode)return a.Z.v(this.TAG,`AC3: Channel Mode changed from ${this.audio_metadata_.channel_mode} to ${t.channel_mode}`),!0;if(t.low_frequency_effects_channel_on!==this.audio_metadata_.low_frequency_effects_channel_on)return a.Z.v(this.TAG,`AC3: Low Frequency Effects Channel On changed from ${this.audio_metadata_.low_frequency_effects_channel_on} to ${t.low_frequency_effects_channel_on}`),!0}else if("opus"===e.codec&&"opus"===this.audio_metadata_.codec){const t=e.meta;if(t.sample_rate!==this.audio_metadata_.sample_rate)return a.Z.v(this.TAG,`Opus: SamplingFrequencyIndex changed from ${this.audio_metadata_.sample_rate} to ${t.sample_rate}`),!0;if(t.channel_count!==this.audio_metadata_.channel_count)return a.Z.v(this.TAG,`Opus: Channel count changed from ${this.audio_metadata_.channel_count} to ${t.channel_count}`),!0}else if("mp3"===e.codec&&"mp3"===this.audio_metadata_.codec){const t=e.data;if(t.object_type!==this.audio_metadata_.object_type)return a.Z.v(this.TAG,`MP3: AudioObjectType changed from ${this.audio_metadata_.object_type} to ${t.object_type}`),!0;if(t.sample_rate!==this.audio_metadata_.sample_rate)return a.Z.v(this.TAG,`MP3: SamplingFrequencyIndex changed from ${this.audio_metadata_.sample_rate} to ${t.sample_rate}`),!0;if(t.channel_count!==this.audio_metadata_.channel_count)return a.Z.v(this.TAG,`MP3: Channel count changed from ${this.audio_metadata_.channel_count} to ${t.channel_count}`),!0}return!1}dispatchAudioInitSegment(e){var t,i,s,n,o,r;const d={type:"audio"};if(d.id=null===(t=this.audio_track_)||void 0===t?void 0:t.id,d.timescale=1e3,d.duration=this.duration_,"aac"===(null===(i=this.audio_metadata_)||void 0===i?void 0:i.codec)){const t="aac"===e.codec?e.data:null,i=new $(t);d.audioSampleRate=i.sampling_rate,d.channelCount=i.channel_count,d.codec=i.codec_mimetype,d.originalCodec=i.original_codec_mimetype,d.config=i.config,d.refSampleDuration=1024/d.audioSampleRate*d.timescale}else if("ac-3"===(null===(s=this.audio_metadata_)||void 0===s?void 0:s.codec)){const t="ac-3"===e.codec?e.data:null,i=new Ee(t);d.audioSampleRate=i.sampling_rate,d.channelCount=i.channel_count,d.codec=i.codec_mimetype,d.originalCodec=i.original_codec_mimetype,d.config=i.config,d.refSampleDuration=1536/d.audioSampleRate*d.timescale}else if("ec-3"===(null===(n=this.audio_metadata_)||void 0===n?void 0:n.codec)){const t="ec-3"===e.codec?e.data:null,i=new Ae(t);d.audioSampleRate=i.sampling_rate,d.channelCount=i.channel_count,d.codec=i.codec_mimetype,d.originalCodec=i.original_codec_mimetype,d.config=i.config,d.refSampleDuration=256*i.num_blks/d.audioSampleRate*d.timescale}else"opus"===(null===(o=this.audio_metadata_)||void 0===o?void 0:o.codec)?(d.audioSampleRate=this.audio_metadata_.sample_rate,d.channelCount=this.audio_metadata_.channel_count,d.channelConfigCode=this.audio_metadata_.channel_config_code,d.codec="opus",d.originalCodec="opus",d.config=void 0,d.refSampleDuration=20):"mp3"===(null===(r=this.audio_metadata_)||void 0===r?void 0:r.codec)&&(d.audioSampleRate=this.audio_metadata_.sample_rate,d.channelCount=this.audio_metadata_.channel_count,d.codec="mp3",d.originalCodec="mp3",d.config=void 0);this.audio_init_segment_dispatched_||a.Z.v(this.TAG,`Generated first AudioSpecificConfig for mimeType: ${d.codec}`),this.onTrackMetadata&&this.onTrackMetadata("audio",d),this.audio_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;const l=this.media_info_;l.hasAudio=!0,l.audioCodec=d.originalCodec,l.audioSampleRate=d.audioSampleRate,l.audioChannelCount=d.channelCount,l.hasVideo&&l.videoCodec?l.mimeType=`video/mp2t; codecs="${l.videoCodec},${l.audioCodec}"`:l.mimeType=`video/mp2t; codecs="${l.audioCodec}"`,l.isComplete()&&this.onMediaInfo&&this.onMediaInfo(l)}dispatchPESPrivateDataDescriptor(e,t,i){const s=new W;s.pid=e,s.stream_type=t,s.descriptor=i,this.onPESPrivateDataDescriptor&&this.onPESPrivateDataDescriptor(s)}parsePESPrivateDataPayload(e,t,i,s,a){const n=new j;if(n.pid=s,n.stream_id=a,n.len=e.byteLength,n.data=e,void 0!==t){const e=Math.floor(t/this.timescale_);n.pts=e}else n.nearest_pts=this.aac_last_sample_pts_;if(void 0!==i){const e=Math.floor(i/this.timescale_);n.dts=e}this.onPESPrivateData&&this.onPESPrivateData(n)}parseTimedID3MetadataPayload(e,t,i,s,a){const n=new j;if(n.pid=s,n.stream_id=a,n.len=e.byteLength,n.data=e,void 0!==t){const e=Math.floor(t/this.timescale_);n.pts=e}if(void 0!==i){const e=Math.floor(i/this.timescale_);n.dts=e}this.onTimedID3Metadata&&this.onTimedID3Metadata(n)}parseSMPTE2038MetadataPayload(e,t,i,s,a){const n=new me;if(n.pid=s,n.stream_id=a,n.len=e.byteLength,n.data=e,void 0!==t){const e=Math.floor(t/this.timescale_);n.pts=e}if(n.nearest_pts=this.aac_last_sample_pts_,void 0!==i){const e=Math.floor(i/this.timescale_);n.dts=e}n.ancillaries=(e=>{let t=new u(e),i=0;const s=[];for(;i+=6,0===t.readBits(6);){const e=t.readBool();i+=1;const a=t.readBits(11);i+=11;const n=t.readBits(12);i+=12;const o=255&t.readBits(10);i+=10;const r=255&t.readBits(10);i+=10;const d=255&t.readBits(10);i+=10;const l=new Uint8Array(d);for(let e=0;e<d;e++){const s=255&t.readBits(10);i+=10,l[e]=s}t.readBits(10),i+=10;let h="User Defined";const _={};65===o?7===r&&(h="SCTE-104"):95===o?220===r?h="ARIB STD-B37 (1SEG)":221===r?h="ARIB STD-B37 (ANALOG)":222===r?h="ARIB STD-B37 (SD)":223===r&&(h="ARIB STD-B37 (HD)"):97===o&&(1===r?h="EIA-708":2===r&&(h="EIA-608")),s.push({yc_indicator:e,line_number:a,horizontal_offset:n,did:o,sdid:r,user_data:l,description:h,information:_}),t.readBits(8-(i-Math.floor(i/8))%8),i+=(8-(i-Math.floor(i/8)))%8}return t.destroy(),t=null,s})(e),this.onSMPTE2038Metadata&&this.onSMPTE2038Metadata(n)}},Re=new Uint8Array([0,0,0,0,0,0,0,0]);class Te{static init(){Te.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hvc1:[],hvcC:[],av01:[],av1C:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[],Opus:[],dOps:[],"ac-3":[],dac3:[],"ec-3":[],dec3:[]};for(const e in Te.types)Te.types.hasOwnProperty(e)&&(Te.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)])}static box(e,...t){let i=8,s=null;const a=Array.prototype.slice.call(arguments,1),n=a.length;for(let e=0;e<n;e++)i+=a[e].byteLength;s=new Uint8Array(i),s[0]=i>>>24&255,s[1]=i>>>16&255,s[2]=i>>>8&255,s[3]=255&i,s.set(e,4);let o=8;for(let e=0;e<n;e++)s.set(a[e],o),o+=a[e].byteLength;return s}static generateInitSegment(e){const t=Te.box(Te.types.ftyp,Te.constants.FTYP),i=Te.moov(e),s=new Uint8Array(t.byteLength+i.byteLength);return s.set(t,0),s.set(i,t.byteLength),s}static moov(e){const t=Te.mvhd(e.timescale,e.duration),i=Te.trak(e),s=Te.mvex(e);return Te.box(Te.types.moov,t,i,s)}static mvhd(e,t){return Te.box(Te.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}static trak(e){return Te.box(Te.types.trak,Te.tkhd(e),Te.mdia(e))}static tkhd(e){const t=e.id,i=e.duration,s=e.presentWidth,a=e.presentHeight;return Te.box(Te.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>>8&255,255&s,0,0,a>>>8&255,255&a,0,0]))}static mdia(e){return Te.box(Te.types.mdia,Te.mdhd(e),Te.hdlr(e),Te.minf(e))}static mdhd(e){const t=e.timescale,i=e.duration;return Te.box(Te.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,i>>>24&255,i>>>16&255,i>>>8&255,255&i,85,196,0,0]))}static hdlr(e){let t=null;return t="audio"===e.type?Te.constants.HDLR_AUDIO:Te.constants.HDLR_VIDEO,Te.box(Te.types.hdlr,t)}static minf(e){let t=null;return t="audio"===e.type?Te.box(Te.types.smhd,Te.constants.SMHD):Te.box(Te.types.vmhd,Te.constants.VMHD),Te.box(Te.types.minf,t,Te.dinf(),Te.stbl(e))}static dinf(){return Te.box(Te.types.dinf,Te.box(Te.types.dref,Te.constants.DREF))}static stbl(e){return Te.box(Te.types.stbl,Te.stsd(e),Te.box(Te.types.stts,Te.constants.STTS),Te.box(Te.types.stsc,Te.constants.STSC),Te.box(Te.types.stsz,Te.constants.STSZ),Te.box(Te.types.stco,Te.constants.STCO))}static stsd(e){return"audio"===e.type?"mp3"===e.codec?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.mp3(e)):"ac-3"===e.codec?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.ac3(e)):"ec-3"===e.codec?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.ec3(e)):"opus"===e.codec?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.Opus(e)):Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.mp4a(e)):"video"===e.type&&e.codec.startsWith("hvc1")?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.hvc1(e)):"video"===e.type&&e.codec.startsWith("av01")?Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.av01(e)):Te.box(Te.types.stsd,Te.constants.STSD_PREFIX,Te.avc1(e))}static mp3(e){const t=e.channelCount,i=e.audioSampleRate,s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return Te.box(Te.types[".mp3"],s)}static mp4a(e){const t=e.channelCount,i=e.audioSampleRate,s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return Te.box(Te.types.mp4a,s,Te.esds(e))}static ac3(e){var t;const i=e.channelCount,s=e.audioSampleRate,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return Te.box(Te.types["ac-3"],a,Te.box(Te.types.dac3,new Uint8Array(null!==(t=e.config)&&void 0!==t?t:[])))}static ec3(e){var t;const i=e.channelCount,s=e.audioSampleRate,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return Te.box(Te.types["ec-3"],a,Te.box(Te.types.dec3,new Uint8Array(null!==(t=e.config)&&void 0!==t?t:[])))}static esds(e){var t;const i=null!==(t=e.config)&&void 0!==t?t:[],s=i.length,a=new Uint8Array([0,0,0,0,3,23+s,0,1,0,4,15+s,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([s]).concat(i).concat([6,1,2]));return Te.box(Te.types.esds,a)}static Opus(e){const t=e.channelCount,i=e.audioSampleRate,s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return Te.box(Te.types.Opus,s,Te.dOps(e))}static dOps(e){const t=e.channelCount,i=e.channelConfigCode,s=e.audioSampleRate;let a=[];switch(i){case 1:case 2:a=[0];break;case 0:a=[255,1,1,0,1];break;case 128:a=[255,2,0,0,1];break;case 3:a=[1,2,1,0,2,1];break;case 4:a=[1,2,2,0,1,2,3];break;case 5:a=[1,3,2,0,4,1,2,3];break;case 6:a=[1,4,2,0,4,1,2,3,5];break;case 7:a=[1,4,2,0,4,1,2,3,5,6];break;case 8:a=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:a=[1,1,2,0,1];break;case 131:a=[1,1,3,0,1,2];break;case 132:a=[1,1,4,0,1,2,3];break;case 133:a=[1,1,5,0,1,2,3,4];break;case 134:a=[1,1,6,0,1,2,3,4,5];break;case 135:a=[1,1,7,0,1,2,3,4,5,6];break;case 136:a=[1,1,8,0,1,2,3,4,5,6,7]}const n=new Uint8Array([0,t,0,0,s>>>24&255,s>>>17&255,s>>>8&255,s>>>0&255,0,0,...a]);return Te.box(Te.types.dOps,n)}static avc1(e){const t=e.avcc,i=e.codecWidth,s=e.codecHeight,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,s>>>8&255,255&s,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return Te.box(Te.types.avc1,a,Te.box(Te.types.avcC,t))}static hvc1(e){const t=e.hvcc,i=e.codecWidth,s=e.codecHeight,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,s>>>8&255,255&s,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return Te.box(Te.types.hvc1,a,Te.box(Te.types.hvcC,t))}static av01(e){var t,i;const s=e.av1c,a=null!==(t=e.codecWidth)&&void 0!==t?t:192,n=null!==(i=e.codecHeight)&&void 0!==i?i:108,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>>8&255,255&a,n>>>8&255,255&n,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return Te.box(Te.types.av01,o,Te.box(Te.types.av1C,s))}static mvex(e){return Te.box(Te.types.mvex,Te.trex(e))}static trex(e){const t=e.id,i=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return Te.box(Te.types.trex,i)}static moof(e,t){return Te.box(Te.types.moof,Te.mfhd(e.sequenceNumber),Te.traf(e,t))}static mfhd(e){const t=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);return Te.box(Te.types.mfhd,t)}static traf(e,t){const i=e.id,s=Te.box(Te.types.tfhd,new Uint8Array([0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),a=Te.box(Te.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])),n=Te.sdtp(e),o=Te.trun(e,n.byteLength+16+16+8+16+8+8);return Te.box(Te.types.traf,s,a,o,n)}static sdtp(e){const t=e.samples||[],i=t.length,s=new Uint8Array(4+i);for(let e=0;e<i;e++){const i=t[e].flags;s[e+4]=i.isLeading<<6|i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy}return Te.box(Te.types.sdtp,s)}static trun(e,t){const i=e.samples||[],s=i.length,a=12+16*s,n=new Uint8Array(a);t+=8+a,n.set([0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,255&s,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0);for(let e=0;e<s;e++){const t=i[e].duration,s=i[e].size,a=i[e].flags,o=i[e].cts;n.set([t>>>24&255,t>>>16&255,t>>>8&255,255&t,s>>>24&255,s>>>16&255,s>>>8&255,255&s,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.isNonSync,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o],12+16*e)}return Te.box(Te.types.trun,n)}static mdat(e){return Te.box(Te.types.mdat,e)}}Te.constants={FTYP:new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),STSD_PREFIX:new Uint8Array([0,0,0,0,0,0,0,1]),STTS:Re,STSC:Re,STCO:Re,STSZ:new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),HDLR_VIDEO:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),HDLR_AUDIO:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),DREF:new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),SMHD:new Uint8Array([0,0,0,0,0,0,0,0]),VMHD:new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},Te.init();const ke=Te;const Le=class{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}};var we=i(68);const De=class{constructor(e){var t;this.TAG="MP4Remuxer",this._fillSilentAfterSeek=!1,this._config=e,this._isLive=!!e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new we.J1("audio"),this._videoSegmentInfoList=new we.J1("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!n.Z.chrome||!(n.Z.version&&n.Z.version.major<50||n.Z.version&&50===n.Z.version.major&&((null===(t=n.Z.version)||void 0===t?void 0:t.build)||0)<2661)),this._fillSilentAfterSeek=!(!n.Z.msedge&&!n.Z.msie),this._mp3UseMpegAudio=!n.Z.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}destroy(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null}bindDataSource(e){var t;return e.onDataAvailable=null===(t=this.remux)||void 0===t?void 0:t.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this}get onInitSegment(){return this._onInitSegment}set onInitSegment(e){this._onInitSegment=e}get onMediaSegment(){return this._onMediaSegment}set onMediaSegment(e){this._onMediaSegment=e}insertDiscontinuity(){this._audioNextDts=this._videoNextDts=void 0}seek(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()}remux(e,t){if(!this._onMediaSegment)throw new l.rT("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),t&&this._remuxVideo(t),e&&this._remuxAudio(e)}_onTrackMetadataReceived(e,t){let i=null,s="mp4",a=t.codec;if("audio"===e)this._audioMeta=t,"mp3"===t.codec&&this._mp3UseMpegAudio?(s="mpeg",a="",i=new Uint8Array):i=ke.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,i=ke.generateInitSegment(t)}if(!this._onInitSegment)throw new l.rT("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:i.buffer,codec:a,container:`${e}/${s}`,mediaDuration:t.duration})}_calculateDtsBase(e,t){var i,s;this._dtsBaseInited||((null===(i=null==e?void 0:e.samples)||void 0===i?void 0:i.length)&&(this._audioDtsBase=e.samples[0].dts),(null===(s=null==t?void 0:t.samples)||void 0===s?void 0:s.length)&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}getTimestampBase(){if(this._dtsBaseInited)return this._dtsBase}flushStashedSamples(){const e=this._videoStashedLastSample,t=this._audioStashedLastSample,i={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(i.samples.push(e),i.length=null==e?void 0:e.length);const s={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=t&&(s.samples.push(t),s.length=null==t?void 0:t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(i,!0),this._remuxAudio(s,!0)}_remuxAudio(e,t){var i,s,o,r,d,l,h;if(null==this._audioMeta)return;const _=e,c=_.samples;let u,m=-1,f=-1;const p=this._audioMeta.refSampleDuration,g="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,v=this._dtsBaseInited&&void 0===this._audioNextDts;let E=!1;if(!c||0===c.length)return;if(1===c.length&&!t)return;let S=0,y=null,A=0;g?(S=0,A=_.length):(S=8,A=8+_.length);let b=null;if(c.length>1&&(b=c.pop(),A-=b.length),null!=this._audioStashedLastSample){const e=this._audioStashedLastSample;this._audioStashedLastSample=null,c.unshift(e),A+=e.length}null!=b&&(this._audioStashedLastSample=b);const R=c[0].dts-this._dtsBase;if(this._audioNextDts)u=R-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())u=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(E=!0);else{const e=this._audioSegmentInfoList.getLastSampleBefore(R);if(null!=e){let t=R-(e.originalDts+e.duration);t<=3&&(t=0);u=R-(e.dts+e.duration+t)}else u=0}if(E){const e=R-u,t=this._videoSegmentInfoList.getLastSegmentBefore(R);if(null!=t&&t.beginDts<e){const n=Le.getSilentFrame(null===(i=this._audioMeta)||void 0===i?void 0:i.originalCodec,null===(s=this._audioMeta)||void 0===s?void 0:s.channelCount);if(n){const i=t.beginDts,s=e-t.beginDts;a.Z.v(this.TAG,`InsertPrefixSilentAudio: dts: ${i}, duration: ${s}`),c.unshift({unit:n,dts:i,pts:i}),A+=n.byteLength}}else E=!1}const T=[];for(let e=0;e<c.length;e++){const t=c[e],i=t.unit,s=t.dts-this._dtsBase;let h=s,_=!1,f=null,g=0;if(!(s<-.001)){if("mp3"!==this._audioMeta.codec){let e=s;const t=3;if(this._audioNextDts&&(e=this._audioNextDts),u=s-e,u<=-t*(p||0)){a.Z.w(this.TAG,`Dropping 1 audio frame (originalDts: ${s} ms ,curRefDts: ${e} ms)  due to dtsCorrection: ${u} ms overlap.`);continue}if(u>=t*(p||0)&&this._fillAudioTimestampGap&&!n.Z.safari){_=!0;const t=Math.floor(u/(p||0));a.Z.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\noriginalDts: ${s} ms, curRefDts: ${e} ms, dtsCorrection: ${Math.round(u)} ms, generate: ${t} frames`),h=Math.floor(e),g=Math.floor(e+(p||0))-h;let n=Le.getSilentFrame(null===(o=this._audioMeta)||void 0===o?void 0:o.originalCodec,this._audioMeta.channelCount);null==n&&(a.Z.w(this.TAG,`Unable to generate silent frame for ${null===(r=this._audioMeta)||void 0===r?void 0:r.originalCodec} with ${this._audioMeta.channelCount} channels, repeat last frame`),n=i),f=[];for(let i=0;i<t;i++){e+=p||0;const t=Math.floor(e),i=Math.floor(e+(p||0))-t,a={dts:t,pts:t,cts:0,unit:n,size:n.byteLength,duration:i,originalDts:s,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};f.push(a),A+=a.size}this._audioNextDts=e+(p||0)}else h=Math.floor(e),g=Math.floor(e+(p||0))-h,this._audioNextDts=e+(p||0)}else{if(h=s-u,e!==c.length-1){g=c[e+1].dts-this._dtsBase-u-h}else if(null!=b){g=b.dts-this._dtsBase-u-h}else g=T.length>=1?null===(d=T[T.length-1])||void 0===d?void 0:d.duration:Math.floor(p||0);this._audioNextDts=h+g}-1===m&&(m=h),T.push({dts:h,pts:h,cts:0,unit:t.unit,size:null===(l=t.unit)||void 0===l?void 0:l.byteLength,duration:g,originalDts:s,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),_&&T.push.apply(T,f)}}if(0===T.length)return _.samples=[],void(_.length=0);g?y=new Uint8Array(A):(y=new Uint8Array(A),y[0]=A>>>24&255,y[1]=A>>>16&255,y[2]=A>>>8&255,y[3]=255&A,y.set(ke.types.mdat,4));for(let e=0;e<T.length;e++){const t=T[e].unit;y.set(t,S),S+=t.byteLength||0}const k=T[T.length-1];f=k.dts+k.duration;const L=new we.Yy;L.beginDts=m,L.endDts=f,L.beginPts=m,L.endPts=f,L.originalBeginDts=T[0].originalDts,L.originalEndDts=k.originalDts+k.duration,L.firstSample=new we.Wk(T[0].dts,T[0].pts,T[0].duration,T[0].originalDts,!1),L.lastSample=new we.Wk(k.dts,k.pts,k.duration,k.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(L),_.samples=T,_.sequenceNumber++;let w=null;w=g?new Uint8Array:ke.moof(_,m),_.samples=[],_.length=0;const D={type:"audio",data:this._mergeBoxes(w,y).buffer,sampleCount:T.length,info:L};g&&v&&D&&(D.timestampOffset=m),null===(h=this._onMediaSegment)||void 0===h||h.call(this,"audio",D)}_remuxVideo(e,t){var i,s;if(null==this._videoMeta)return;const a=e,n=a.samples;let o,r=-1,d=-1,l=-1,h=-1;if(!n||0===n.length)return;if(1===n.length&&!t)return;let _=8,c=null,u=8+e.length,m=null;if(n.length>1&&(m=n.pop(),u-=m.length),null!=this._videoStashedLastSample){const e=this._videoStashedLastSample;this._videoStashedLastSample=null,n.unshift(e),u+=(null==e?void 0:e.length)||0}null!=m&&(this._videoStashedLastSample=m);const f=n[0].dts-this._dtsBase;if(this._videoNextDts)o=f-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())o=0;else{const e=this._videoSegmentInfoList.getLastSampleBefore(f);if(null!=e){let t=f-(e.originalDts+e.duration);t<=3&&(t=0);o=f-(e.dts+e.duration+t)}else o=0}const p=new we.Yy,g=[];for(let e=0;e<n.length;e++){const t=n[e],s=t.dts-this._dtsBase,a=t.isKeyframe,d=s-o,h=t.cts,_=d+h;-1===r&&(r=d,l=_);let c=0;if(e!==n.length-1){c=n[e+1].dts-this._dtsBase-o-d}else if(null!=m){c=m.dts-this._dtsBase-o-d}else c=g.length>=1?g[g.length-1].duration:Math.floor((null===(i=this._videoMeta)||void 0===i?void 0:i.refSampleDuration)||0);if(a){const e=new we.Wk(d,_,c,t.dts,!0);e.fileposition=t.fileposition,p.appendSyncPoint(e)}g.push({dts:d,pts:_,cts:h,units:t.units,size:t.length,isKeyframe:a,duration:c,originalDts:s,flags:{isLeading:0,dependsOn:a?2:1,isDependedOn:a?1:0,hasRedundancy:0,isNonSync:a?0:1}})}c=new Uint8Array(u),c[0]=u>>>24&255,c[1]=u>>>16&255,c[2]=u>>>8&255,c[3]=255&u,c.set(ke.types.mdat,4);for(let e=0;e<g.length;e++){const t=g[e].units;for(;null==t?void 0:t.length;){const e=t.shift(),i=null==e?void 0:e.data;c.set(i,_),_+=i.byteLength}}const v=g[g.length-1];if(d=v.dts+v.duration,h=v.pts+v.duration,this._videoNextDts=d,p.beginDts=r,p.endDts=d,p.beginPts=l,p.endPts=h,p.originalBeginDts=g[0].originalDts,p.originalEndDts=v.originalDts+v.duration,p.firstSample=new we.Wk(g[0].dts,g[0].pts,g[0].duration,g[0].originalDts,!!g[0].isKeyframe),p.lastSample=new we.Wk(v.dts,v.pts,v.duration,v.originalDts,!!v.isKeyframe),this._isLive||this._videoSegmentInfoList.append(p),a.samples=g,a.sequenceNumber++,this._forceFirstIDR){const e=g[0].flags;e.dependsOn=2,e.isNonSync=0}const E=ke.moof(a,r);a.samples=[],a.length=0,null===(s=this._onMediaSegment)||void 0===s||s.call(this,"video",{type:"video",data:this._mergeBoxes(E,c).buffer,sampleCount:g.length,info:p})}_mergeBoxes(e,t){const i=new Uint8Array(e.byteLength+t.byteLength);return i.set(e,0),i.set(t,e.byteLength),i}};var Ce=i(575),Be=i(473);const Ie=class{constructor(e,t){var i;this.TAG="TransmuxingController",this._emitter=new s.EventEmitter,this._config=t,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e,this._currentSegmentIndex=0;let a=0;null===(i=this._mediaDataSource.segments)||void 0===i||i.forEach(i=>{i.timestampBase=a,a+=i.duration,i.cors=e.cors,i.withCredentials=e.withCredentials,t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy)}),isNaN(a)||this._mediaDataSource.duration===a||(this._mediaDataSource.duration=a),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}destroy(){var e,t,i;this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(null===(e=this._ioctl)||void 0===e||e.destroy(),this._ioctl=null),this._demuxer&&(null===(t=this._demuxer)||void 0===t||t.destroy(),this._demuxer=null),this._remuxer&&(null===(i=this._remuxer)||void 0===i||i.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null}on(e,t){this._emitter.addListener(e,t)}off(e,t){this._emitter.removeListener(e,t)}start(){this._loadSegment(0),this._enableStatisticsReporter()}_loadSegment(e,t){var i,s,a;if(this._currentSegmentIndex=e,null===(i=this._mediaDataSource)||void 0===i?void 0:i.segments){const i=null===(s=this._mediaDataSource)||void 0===s?void 0:s.segments[e],n=this._ioctl=new Ce.Z(i,this._config,e);n.onError=this._onIOException.bind(this),n.onSeeked=this._onIOSeeked.bind(this),n.onComplete=this._onIOComplete.bind(this),n.onRedirect=this._onIORedirect.bind(this),n.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?null===(a=this._demuxer)||void 0===a||a.bindDataSource(this._ioctl):n.onDataArrival=this._onInitChunkArrival.bind(this),n.open(t)}}stop(){this._internalAbort(),this._disableStatisticsReporter()}_internalAbort(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)}pause(){var e;(null===(e=this._ioctl)||void 0===e?void 0:e.isWorking())&&(this._ioctl.pause(),this._disableStatisticsReporter())}resume(){var e;(null===(e=this._ioctl)||void 0===e?void 0:e.isPaused())&&(this._ioctl.resume(),this._enableStatisticsReporter())}seek(e){var t,i,s,a,n,o,r,d,l,h,_,c,u,m;if(null==this._mediaInfo||!(null===(t=this._mediaInfo)||void 0===t?void 0:t.isSeekable()))return;const f=this._searchSegmentIndexContains(e);if(f===this._currentSegmentIndex){const t=(null===(i=this._mediaInfo)||void 0===i?void 0:i.segments)?null===(s=this._mediaInfo)||void 0===s?void 0:s.segments[f]:{};if(void 0===t)this._pendingSeekTime=e;else{const i=null==t?void 0:t.getNearestKeyframe(e);null===(a=this._remuxer)||void 0===a||a.seek(null==i?void 0:i.milliseconds),null===(n=this._ioctl)||void 0===n||n.seek(null==i?void 0:i.fileposition),this._pendingResolveSeekPoint=null==i?void 0:i.milliseconds}}else{const t=(null===(o=this._mediaInfo)||void 0===o?void 0:o.segments)?null===(r=this._mediaInfo)||void 0===r?void 0:r.segments[f]:{};if(void 0===t)this._pendingSeekTime=e,this._internalAbort(),null===(d=this._remuxer)||void 0===d||d.seek(),null===(l=this._remuxer)||void 0===l||l.insertDiscontinuity(),this._loadSegment(f);else{const i=t.getNearestKeyframe(e);this._internalAbort(),null===(h=this._remuxer)||void 0===h||h.seek(e),null===(_=this._remuxer)||void 0===_||_.insertDiscontinuity(),this._demuxer&&(null===(c=this._demuxer)||void 0===c||c.resetMediaInfo(),this._demuxer.timestampBase=(null===(u=this._mediaDataSource)||void 0===u?void 0:u.segments)?null===(m=this._mediaDataSource)||void 0===m?void 0:m.segments[f].timestampBase:0),this._loadSegment(f,null==i?void 0:i.fileposition),this._pendingResolveSeekPoint=null==i?void 0:i.milliseconds,this._reportSegmentMediaInfo(f)}}this._enableStatisticsReporter()}_searchSegmentIndexContains(e){var t;const i=this._mediaDataSource.segments;let s=((null==i?void 0:i.length)||0)-1;if(0===((null==i?void 0:i.length)||0))return s;for(let a=0;a<((null==i?void 0:i.length)||0);a++)if(i&&e<((null===(t=i[a])||void 0===t?void 0:t.timestampBase)||0)){s=a-1;break}return s}_onInitChunkArrival(e,t){var i,s,n,o,r;let d=0;if(t>0)null===(i=this._demuxer)||void 0===i||i.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments?null===(s=this._mediaDataSource.segments[this._currentSegmentIndex])||void 0===s?void 0:s.timestampBase:0,d=(null===(n=this._demuxer)||void 0===n?void 0:n.parseChunks(e,t))||0;else{let i=null;i=k.probe(e),i.match&&(this._setupFLVDemuxerRemuxer(i),d=(null===(o=this._demuxer)||void 0===o?void 0:o.parseChunks(e,t))||0),i.match||(null==i?void 0:i.needMoreData)||(i=be.probe(e),i.match&&(this._setupTSDemuxerRemuxer(i),d=(null===(r=this._demuxer)||void 0===r?void 0:r.parseChunks(e,t))||0)),i.match||(null==i?void 0:i.needMoreData)||(i=null,a.Z.e(this.TAG,"Non MPEG-TS/FLV, Unsupported media type!"),Promise.resolve().then(()=>{this._internalAbort()}),this._emitter.emit(Be.Z.DEMUX_ERROR,p.Z.FORMAT_UNSUPPORTED,"Non MPEG-TS/FLV, Unsupported media type!"))}return d}_setupFLVDemuxerRemuxer(e){var t;this._demuxer=new k(e,this._config),this._remuxer||(this._remuxer=new De(this._config));const i=this._mediaDataSource;void 0===i.duration||isNaN(i.duration)||(this._demuxer.overridedDuration=i.duration),"boolean"==typeof i.hasAudio&&(this._demuxer.overridedHasAudio=i.hasAudio),"boolean"==typeof i.hasVideo&&(this._demuxer.overridedHasVideo=i.hasVideo),i.segments&&this._demuxer&&this._remuxer&&(this._demuxer.timestampBase=null===(t=null==i?void 0:i.segments[this._currentSegmentIndex])||void 0===t?void 0:t.timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this))}_setupTSDemuxerRemuxer(e){const t=this._demuxer=new be(e,this._config);this._remuxer||(this._remuxer=new De(this._config)),t.onError=this._onDemuxException.bind(this),t.onMediaInfo=this._onMediaInfo.bind(this),t.onMetaDataArrived=this._onMetaDataArrived.bind(this),t.onTimedID3Metadata=this._onTimedID3Metadata.bind(this),t.onSMPTE2038Metadata=this._onSMPTE2038Metadata.bind(this),t.onSCTE35Metadata=this._onSCTE35Metadata.bind(this),t.onPESPrivateDataDescriptor=this._onPESPrivateDataDescriptor.bind(this),t.onPESPrivateData=this._onPESPrivateData.bind(this),this._remuxer.bindDataSource(this._demuxer),this._demuxer.bindDataSource(this._ioctl),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)}_onMediaInfo(e){var t,i;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=(null===(i=null===(t=this._mediaDataSource)||void 0===t?void 0:t.segments)||void 0===i?void 0:i.length)||0,Object.setPrototypeOf(this._mediaInfo,o.Z.prototype));const s=Object.assign({},e);Object.setPrototypeOf(s,o.Z.prototype),this._mediaInfo.segments&&(this._mediaInfo.segments[this._currentSegmentIndex]=s),this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then(()=>{const e=this._pendingSeekTime;this._pendingSeekTime=null,this.seek(e)})}_onMetaDataArrived(e){this._emitter.emit(Be.Z.METADATA_ARRIVED,e)}_onScriptDataArrived(e){this._emitter.emit(Be.Z.SCRIPTDATA_ARRIVED,e)}_onTimedID3Metadata(e){var t;const i=null===(t=this._remuxer)||void 0===t?void 0:t.getTimestampBase();void 0!==i&&(void 0!==e.pts&&(e.pts-=i),void 0!==e.dts&&(e.dts-=i),this._emitter.emit(Be.Z.TIMED_ID3_METADATA_ARRIVED,e))}_onSMPTE2038Metadata(e){var t;const i=null===(t=this._remuxer)||void 0===t?void 0:t.getTimestampBase();void 0!==i&&(void 0!==e.pts&&(e.pts-=i),void 0!==e.dts&&(e.dts-=i),void 0!==e.nearest_pts&&(e.nearest_pts-=i),this._emitter.emit(Be.Z.SMPTE2038_METADATA_ARRIVED,e))}_onSCTE35Metadata(e){var t;const i=null===(t=this._remuxer)||void 0===t?void 0:t.getTimestampBase();void 0!==i&&(void 0!==e.pts&&(e.pts-=i),void 0!==e.nearest_pts&&(e.nearest_pts-=i),this._emitter.emit(Be.Z.SCTE35_METADATA_ARRIVED,e))}_onPESPrivateDataDescriptor(e){this._emitter.emit(Be.Z.PES_PRIVATE_DATA_DESCRIPTOR,e)}_onPESPrivateData(e){var t;const i=null===(t=this._remuxer)||void 0===t?void 0:t.getTimestampBase();void 0!==i&&(void 0!==e.pts&&(e.pts-=i),void 0!==e.nearest_pts&&(e.nearest_pts-=i),void 0!==e.dts&&(e.dts-=i),this._emitter.emit(Be.Z.PES_PRIVATE_DATA_ARRIVED,e))}_onIOSeeked(){var e;null===(e=this._remuxer)||void 0===e||e.insertDiscontinuity()}_onIOComplete(e){var t,i;const s=e+1;s<((null===(i=null===(t=this._mediaDataSource)||void 0===t?void 0:t.segments)||void 0===i?void 0:i.length)||0)?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(s)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(Be.Z.LOADING_COMPLETE),this._disableStatisticsReporter())}_onIORedirect(e){var t;const i=null===(t=this._ioctl)||void 0===t?void 0:t.extraData;this._mediaDataSource.segments&&(this._mediaDataSource.segments[i].redirectedURL=e)}_onIORecoveredEarlyEof(){this._emitter.emit(Be.Z.RECOVERED_EARLY_EOF)}_onIOException(e,t){a.Z.e(this.TAG,`IOException: type = ${e}, code = ${t.code}, msg = ${t.msg}`),this._emitter.emit(Be.Z.IO_ERROR,e,t),this._disableStatisticsReporter()}_onDemuxException(e,t){a.Z.e(this.TAG,`DemuxException: type = ${e}, info = ${t}`),this._emitter.emit(Be.Z.DEMUX_ERROR,e,t)}_onRemuxerInitSegmentArrival(e,t){this._emitter.emit(Be.Z.INIT_SEGMENT,e,t)}_onRemuxerMediaSegmentArrival(e,t){if(null==this._pendingSeekTime&&(this._emitter.emit(Be.Z.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint&&"video"===e)){const e=t.info.syncPoints;let i=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,n.Z.safari&&e.length>0&&e[0].originalDts===i&&(i=e[0].pts),this._emitter.emit(Be.Z.RECOMMEND_SEEKPOINT,i)}}_enableStatisticsReporter(){null==this._statisticsReporter&&this._reportStatisticsInfo&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))}_disableStatisticsReporter(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}_reportSegmentMediaInfo(e){var t,i,s,a;const n=(null===(t=this._mediaInfo)||void 0===t?void 0:t.segments)?null===(i=this._mediaInfo)||void 0===i?void 0:i.segments[e]:{},o=Object.assign({},n);o.duration=null===(s=this._mediaInfo)||void 0===s?void 0:s.duration,o.segmentCount=null===(a=this._mediaInfo)||void 0===a?void 0:a.segmentCount,delete o.segments,delete o.keyframesIndex,this._emitter.emit(Be.Z.MEDIA_INFO,o)}_reportStatisticsInfo(){var e,t,i,s,a,n;const o={};o.url=null===(e=this._ioctl)||void 0===e?void 0:e.currentURL,o.hasRedirect=null===(t=this._ioctl)||void 0===t?void 0:t.hasRedirect,o.hasRedirect&&(o.redirectedURL=null===(i=this._ioctl)||void 0===i?void 0:i.currentRedirectedURL),o.speed=null===(s=this._ioctl)||void 0===s?void 0:s.currentSpeed,o.loaderType=null===(a=this._ioctl)||void 0===a?void 0:a.loaderType,o.currentSegmentIndex=this._currentSegmentIndex,o.totalSegmentCount=null===(n=this._mediaDataSource.segments)||void 0===n?void 0:n.length,this._emitter.emit(Be.Z.STATISTICS_INFO,o)}}},473:(e,t,i)=>{i.d(t,{Z:()=>s});const s={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},638:(e,t,i)=>{var s=i(278),a=i(943),n=i(473);let o=null;const r=function(e,t){self.postMessage({msg:"logcat_callback",data:{type:e,logcat:t}})};function d(e,t){const i={msg:n.Z.INIT_SEGMENT,data:{type:e,data:t}};self.postMessage(i,[t.data])}function l(e,t){const i={msg:n.Z.MEDIA_SEGMENT,data:{type:e,data:t}};self.postMessage(i,[t.data])}function h(){const e={msg:n.Z.LOADING_COMPLETE};self.postMessage(e)}function _(){const e={msg:n.Z.RECOVERED_EARLY_EOF};self.postMessage(e)}function c(e){const t={msg:n.Z.MEDIA_INFO,data:e};self.postMessage(t)}function u(e){const t={msg:n.Z.METADATA_ARRIVED,data:e};self.postMessage(t)}function m(e){const t={msg:n.Z.SCRIPTDATA_ARRIVED,data:e};self.postMessage(t)}function f(e){const t={msg:n.Z.TIMED_ID3_METADATA_ARRIVED,data:e};self.postMessage(t)}function p(e){const t={msg:n.Z.SMPTE2038_METADATA_ARRIVED,data:e};self.postMessage(t)}function g(e){const t={msg:n.Z.SCTE35_METADATA_ARRIVED,data:e};self.postMessage(t)}function v(e){const t={msg:n.Z.PES_PRIVATE_DATA_DESCRIPTOR,data:e};self.postMessage(t)}function E(e){const t={msg:n.Z.PES_PRIVATE_DATA_ARRIVED,data:e};self.postMessage(t)}function S(e){const t={msg:n.Z.STATISTICS_INFO,data:e};self.postMessage(t)}function y(e,t){self.postMessage({msg:n.Z.IO_ERROR,data:{type:e,info:t}})}function A(e,t){self.postMessage({msg:n.Z.DEMUX_ERROR,data:{type:e,info:t}})}function b(e){self.postMessage({msg:n.Z.RECOMMEND_SEEKPOINT,data:e})}self.addEventListener("message",function(e){switch(e.data.cmd){case"init":o=new a.Z(e.data.param[0],e.data.param[1]),o.on(n.Z.IO_ERROR,y),o.on(n.Z.DEMUX_ERROR,A),o.on(n.Z.INIT_SEGMENT,d),o.on(n.Z.MEDIA_SEGMENT,l),o.on(n.Z.LOADING_COMPLETE,h),o.on(n.Z.RECOVERED_EARLY_EOF,_),o.on(n.Z.MEDIA_INFO,c),o.on(n.Z.METADATA_ARRIVED,u),o.on(n.Z.SCRIPTDATA_ARRIVED,m),o.on(n.Z.TIMED_ID3_METADATA_ARRIVED,f),o.on(n.Z.SMPTE2038_METADATA_ARRIVED,p),o.on(n.Z.SCTE35_METADATA_ARRIVED,g),o.on(n.Z.PES_PRIVATE_DATA_DESCRIPTOR,v),o.on(n.Z.PES_PRIVATE_DATA_ARRIVED,E),o.on(n.Z.STATISTICS_INFO,S),o.on(n.Z.RECOMMEND_SEEKPOINT,b);break;case"destroy":o&&(o.destroy(),o=null),self.postMessage({msg:"destroyed"});break;case"start":null==o||o.start();break;case"stop":null==o||o.stop();break;case"seek":null==o||o.seek(e.data.param);break;case"pause":null==o||o.pause();break;case"resume":null==o||o.resume();break;case"logging_config":{const t=e.data.param;s.Z.applyConfig(t),!0===t.enableCallback?s.Z.addLogListener(r):s.Z.removeLogListener(r);break}}})},898:(e,t,i)=>{i.d(t,{Z:()=>s});const s={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},578:(e,t,i)=>{i.d(t,{default:()=>V});var s=i(575);const a={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,liveBufferLatencyChasing:!1,liveBufferLatencyMaxLatency:1.5,liveBufferLatencyMinRemain:.5,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0,url:void 0,redirectedURL:void 0,cors:!1};function n(){return Object.assign({},a)}class o{static supportMSEH264Playback(){var e;return null===(e=window.MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}static supportMSEH265Playback(){var e;return null===(e=window.MediaSource)||void 0===e?void 0:e.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"')}static supportNetworkStreamIO(){const e=new s.Z({},n()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"===t||"xhr-moz-chunked-loader"===t}static getNetworkLoaderTypeName(){const e=new s.Z({},n()),t=e.loaderType;return e.destroy(),t}static supportNativeMediaPlayback(e){void 0===o.videoElement&&(o.videoElement=window.document.createElement("video"));const t=o.videoElement.canPlayType(e);return"probably"===t||"maybe"===t}static getFeatureList(){const e={msePlayback:!1,mseLivePlayback:!1,mseH265Playback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.msePlayback=o.supportMSEH264Playback(),e.networkStreamIO=o.supportNetworkStreamIO(),e.networkLoaderName=o.getNetworkLoaderTypeName()||"",e.mseLivePlayback=e.msePlayback&&e.networkStreamIO,e.mseH265Playback=o.supportMSEH265Playback(),e.nativeMP4H264Playback=o.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeMP4H265Playback=o.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),e.nativeWebmVP8Playback=o.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=o.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e}}const r=o;var d=i(108),l=i(99),h=i(645),_=i(479);const c={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info"},u=function(){const e=ENTRY_MODULE,t={};function i(s){if(t[s])return t[s].exports;const a=t[s]={exports:{}};return e[s](a,a.exports,i),a.exports}i.m=e,i.n=e=>{const t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(const s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.g=function(){if("[object Object]"===Object.prototype.toString.call(globalThis))return globalThis;try{return this||new Function("return this")()}catch(e){if("[object Object]"===Object.prototype.toString.call(window))return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};const s=i(ENTRY_MODULE);return s.default||s};u.toString();const m="[\\.|\\-|\\+|\\w|/|@]+",f="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+m+").*?\\)";function p(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function g(e,t,s){const a={};a[s]=[];const n=t.toString(),o=n.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||n.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!o)return a;const r=o[1];let d,l=new RegExp("(\\\\n|\\W)"+p(r)+f,"g");for(;d=l.exec(n);)"dll-reference"!==d[3]&&a[s].push(d[3]);for(l=new RegExp("\\("+p(r)+'\\("(dll-reference\\s('+m+'))"\\)\\)'+f,"g");d=l.exec(n);)e[d[2]]||(a[s].push(d[1]),e[d[2]]=i(d[1]).m),a[d[2]]=a[d[2]]||[],a[d[2]].push(d[4]);const h=Object.keys(a);for(let e=0;e<h.length;e++)for(let t=0;t<a[h[e]].length;t++)_=a[h[e]][t],isNaN(1*_)||(a[h[e]][t]=1*a[h[e]][t]);var _;return a}function v(e){return Object.keys(e).reduce((t,i)=>t||e[i].length>0,!1)}function E(e,t,i,s){const a=e[s].map(e=>`"${e}": ${t[s][e].toString()}`).join(","),n=u.toString().split("ENTRY_MODULE");return`${n[0]}{${a}}${n[1]}"${i}"${n[2]}`}function S(e,t){t=t||{};const s={main:i.m},a=t.all?{main:Object.keys(s.main)}:function(e,t){const i={main:[t]},s={main:[]},a={main:{}};for(;v(i);){const t=Object.keys(i);for(let n=0;n<t.length;n++){const o=t[n],r=i[o].pop();if(a[o]=a[o]||{},a[o][r]||!e[o][r])continue;a[o][r]=!0,s[o]=s[o]||[],s[o].push(r);const d=g(e,e[o][r],o),l=Object.keys(d);for(let e=0;e<l.length;e++)i[l[e]]=i[l[e]]||[],i[l[e]]=i[l[e]].concat(d[l[e]])}}return s}(s,e);let n="";Object.keys(a).filter(e=>"main"!==e).forEach(e=>{let t=0;for(;a[e][t];)t++;a[e].push(t),s[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",n+=`var ${e} = (${E(a,s,t,modules)})();\n`}),n+=`(${E(a,s,e,"main")})();`;const o=new window.Blob([n],{type:"text/javascript"});if(t.bare)return o;const r=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(o),d=new window.Worker(r);return d.objectURL=r,d}var y=i(278),A=i(943),b=i(473),R=i(994);const T=class{constructor(e,t){if(this.TAG="Transmuxer",this._workerDestroying=!1,this._controller=null,this._emitter=new l.EventEmitter,t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=this._worker=S(638),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},y.Z.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:y.Z.getConfig()})}catch(i){h.Z.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new A.Z(e,t)}else this._controller=new A.Z(e,t);if(this._controller){const e=this._controller;null==e||e.on(b.Z.IO_ERROR,this._onIOError.bind(this)),null==e||e.on(b.Z.DEMUX_ERROR,this._onDemuxError.bind(this)),null==e||e.on(b.Z.INIT_SEGMENT,this._onInitSegment.bind(this)),null==e||e.on(b.Z.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),null==e||e.on(b.Z.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),null==e||e.on(b.Z.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),null==e||e.on(b.Z.MEDIA_INFO,this._onMediaInfo.bind(this)),null==e||e.on(b.Z.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),null==e||e.on(b.Z.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),null==e||e.on(b.Z.TIMED_ID3_METADATA_ARRIVED,this._onTimedID3MetadataArrived.bind(this)),null==e||e.on(b.Z.SMPTE2038_METADATA_ARRIVED,this._onSMPTE2038MetadataArrived.bind(this)),null==e||e.on(b.Z.SCTE35_METADATA_ARRIVED,this._onSCTE35MetadataArrived.bind(this)),null==e||e.on(b.Z.PES_PRIVATE_DATA_DESCRIPTOR,this._onPESPrivateDataDescriptor.bind(this)),null==e||e.on(b.Z.PES_PRIVATE_DATA_ARRIVED,this._onPESPrivateDataArrived.bind(this)),null==e||e.on(b.Z.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),null==e||e.on(b.Z.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}destroy(){var e;this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),y.Z.removeListener(this.e.onLoggingConfigChanged),this.e=null):(null===(e=this._controller)||void 0===e||e.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null}on(e,t){this._emitter.addListener(e,t)}off(e,t){this._emitter.removeListener(e,t)}hasWorker(){return null!=this._worker}open(){var e;this._worker?this._worker.postMessage({cmd:"start"}):null===(e=this._controller)||void 0===e||e.start()}close(){var e;this._worker?this._worker.postMessage({cmd:"stop"}):null===(e=this._controller)||void 0===e||e.stop()}seek(e){var t;this._worker?this._worker.postMessage({cmd:"seek",param:e}):null===(t=this._controller)||void 0===t||t.seek(e)}pause(){var e;this._worker?this._worker.postMessage({cmd:"pause"}):null===(e=this._controller)||void 0===e||e.pause()}resume(){var e;this._worker?this._worker.postMessage({cmd:"resume"}):null===(e=this._controller)||void 0===e||e.resume()}_onInitSegment(e,t){Promise.resolve().then(()=>{this._emitter.emit(b.Z.INIT_SEGMENT,e,t)})}_onMediaSegment(e,t){Promise.resolve().then(()=>{this._emitter.emit(b.Z.MEDIA_SEGMENT,e,t)})}_onLoadingComplete(){Promise.resolve().then(()=>{this._emitter.emit(b.Z.LOADING_COMPLETE)})}_onRecoveredEarlyEof(){Promise.resolve().then(()=>{this._emitter.emit(b.Z.RECOVERED_EARLY_EOF)})}_onMediaInfo(e){Promise.resolve().then(()=>{this._emitter.emit(b.Z.MEDIA_INFO,e)})}_onMetaDataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(b.Z.METADATA_ARRIVED,e)})}_onScriptDataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(b.Z.SCRIPTDATA_ARRIVED,e)})}_onTimedID3MetadataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(b.Z.TIMED_ID3_METADATA_ARRIVED,e)})}_onSMPTE2038MetadataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(b.Z.SMPTE2038_METADATA_ARRIVED,e)})}_onSCTE35MetadataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(b.Z.SCTE35_METADATA_ARRIVED,e)})}_onPESPrivateDataDescriptor(e){Promise.resolve().then(()=>{this._emitter.emit(b.Z.PES_PRIVATE_DATA_DESCRIPTOR,e)})}_onPESPrivateDataArrived(e){Promise.resolve().then(()=>{this._emitter.emit(b.Z.PES_PRIVATE_DATA_ARRIVED,e)})}_onStatisticsInfo(e){Promise.resolve().then(()=>{this._emitter.emit(b.Z.STATISTICS_INFO,e)})}_onIOError(e,t){Promise.resolve().then(()=>{this._emitter.emit(b.Z.IO_ERROR,e,t)})}_onDemuxError(e,t){Promise.resolve().then(()=>{this._emitter.emit(b.Z.DEMUX_ERROR,e,t)})}_onRecommendSeekpoint(e){Promise.resolve().then(()=>{this._emitter.emit(b.Z.RECOMMEND_SEEKPOINT,e)})}_onLoggingConfigChanged(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})}_onWorkerMessage(e){const t=e.data,i=null==t?void 0:t.data;if("destroyed"===t.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(t.msg){case b.Z.INIT_SEGMENT:case b.Z.MEDIA_SEGMENT:this._emitter.emit(t.msg,i.type,i.data);break;case b.Z.LOADING_COMPLETE:case b.Z.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case b.Z.MEDIA_INFO:Object.setPrototypeOf(i,R.Z.prototype),this._emitter.emit(t.msg,i);break;case b.Z.METADATA_ARRIVED:case b.Z.SCRIPTDATA_ARRIVED:case b.Z.TIMED_ID3_METADATA_ARRIVED:case b.Z.SMPTE2038_METADATA_ARRIVED:case b.Z.SCTE35_METADATA_ARRIVED:case b.Z.PES_PRIVATE_DATA_DESCRIPTOR:case b.Z.PES_PRIVATE_DATA_ARRIVED:case b.Z.STATISTICS_INFO:this._emitter.emit(t.msg,i);break;case b.Z.IO_ERROR:case b.Z.DEMUX_ERROR:this._emitter.emit(t.msg,i.type,i.info);break;case b.Z.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,i);break;case"logcat_callback":h.Z.emitter.emit("log",i.type,i.logcat)}}},k={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};var L=i(68),w=i(411);const D=class{constructor(e){this.TAG="MSEController",this._config=e,this._emitter=new l.EventEmitter,this._config.isLive&&void 0===this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new L.Vn}destroy(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null}on(e,t){this._emitter.addListener(e,t)}off(e,t){this._emitter.removeListener(e,t)}attachMediaElement(e){if(this._mediaSource)throw new w.rT("MediaSource has been attached to an HTMLMediaElement!");const t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL}detachMediaElement(){if(this._mediaSource){const e=this._mediaSource;for(const t in this._sourceBuffers){const i=this._pendingSegments[t];i.splice(0,i.length),this._pendingSegments[t]=null,this._pendingRemoveRanges[t]=null,this._lastInitSegments[t]=null;const s=this._sourceBuffers[t];if(s){if("closed"!==e.readyState){try{e.removeSourceBuffer(s)}catch(e){h.Z.e(this.TAG,e.message)}null==s||s.removeEventListener("error",this.e.onSourceBufferError),null==s||s.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[t]=null,this._sourceBuffers[t]=null}}if("open"===e.readyState)try{e.endOfStream()}catch(e){h.Z.e(this.TAG,e.message)}e.removeEventListener("sourceopen",this.e.onSourceOpen),e.removeEventListener("sourceended",this.e.onSourceEnded),e.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)}appendInitSegment(e,t){var i;if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(e),void this._pendingSegments[e.type].push(e);const s=e;let a=`${s.container}`;s.codec&&s.codec.length>0&&(a+=`;codecs=${s.codec}`);let n=!1;if(h.Z.v(this.TAG,"Received Initialization Segment, mimeType: "+a),this._lastInitSegments[s.type]=s,a!==this._mimeTypes[s.type]){if(this._mimeTypes[s.type])h.Z.v(this.TAG,`Notice: ${s.type} mimeType changed, origin: ${this._mimeTypes[s.type]||""}, target: ${a}`);else{n=!0;try{const e=this._sourceBuffers[s.type]=this._mediaSource.addSourceBuffer(a);e.addEventListener("error",this.e.onSourceBufferError),e.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(e){return h.Z.e(this.TAG,e.message),void this._emitter.emit(k.ERROR,{code:e.code,msg:e.message})}}this._mimeTypes[s.type]=a}t||this._pendingSegments[s.type].push(s),n||this._sourceBuffers[s.type]&&!(null===(i=this._sourceBuffers[s.type])||void 0===i?void 0:i.updating)&&this._doAppendSegments(),_.Z.safari&&"audio/mpeg"===s.container&&s.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=s.mediaDuration/1e3,this._updateMediaSourceDuration())}appendMediaSegment(e){const t=e;this._pendingSegments[t.type].push(t),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();const i=this._sourceBuffers[t.type];!i||i.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()}seek(e){var t,i;for(const e in this._sourceBuffers){if(!this._sourceBuffers[e])continue;const s=this._sourceBuffers[e];if("open"===(null===(t=this._mediaSource)||void 0===t?void 0:t.readyState))try{null==s||s.abort()}catch(e){h.Z.e(this.TAG,e.message)}this._idrList.clear();const a=this._pendingSegments[e];if(a.splice(0,a.length),"closed"!==(null===(i=this._mediaSource)||void 0===i?void 0:i.readyState)){if(s){for(let t=0;t<s.buffered.length;t++){const i=s.buffered.start(t),a=s.buffered.end(t);this._pendingRemoveRanges[e].push({start:i,end:a})}(null==s?void 0:s.updating)||this._doRemoveRanges()}if(_.Z.safari){const t=this._lastInitSegments[e];t&&(this._pendingSegments[e].push(t),(null==s?void 0:s.updating)||this._doAppendSegments())}}}}endOfStream(){var e,t;const i=this._mediaSource,s=this._sourceBuffers;i&&"open"===i.readyState?(null===(e=s.video)||void 0===e?void 0:e.updating)||(null===(t=s.audio)||void 0===t?void 0:t.updating)?this._hasPendingEos=!0:(this._hasPendingEos=!1,i.endOfStream()):i&&"closed"===i.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)}getNearestKeyframe(e){return this._idrList.getLastSyncPointBeforeDts(e)}_needCleanupSourceBuffer(){var e,t;if(!this._config.autoCleanupSourceBuffer)return!1;const i=null===(e=this._mediaElement)||void 0===e?void 0:e.currentTime;for(const e in this._sourceBuffers){const s=this._sourceBuffers[e];if(s){const e=s.buffered;if(e.length>=1&&i-e.start(0)>=((null===(t=this._config)||void 0===t?void 0:t.autoCleanupMaxBackwardDuration)||0))return!0}}return!1}_doCleanupSourceBuffer(){var e,t,i;const s=null===(e=this._mediaElement)||void 0===e?void 0:e.currentTime;for(const e in this._sourceBuffers){const a=this._sourceBuffers[e];if(a){const n=a.buffered;let o=!1;for(let a=0;a<n.length;a++){const r=n.start(a),d=n.end(a);if(r<=s&&s<d+3){if(s-r>=((null===(t=this._config)||void 0===t?void 0:t.autoCleanupMaxBackwardDuration)||0)){o=!0;const t=s-((null===(i=this._config)||void 0===i?void 0:i.autoCleanupMinBackwardDuration)||0);this._pendingRemoveRanges[e].push({start:r,end:t})}}else d<s&&(o=!0,this._pendingRemoveRanges[e].push({start:r,end:d}))}o&&!a.updating&&this._doRemoveRanges()}}}_updateMediaSourceDuration(){var e,t,i,s;const a=this._sourceBuffers;if(0===(null===(e=this._mediaElement)||void 0===e?void 0:e.readyState)||"open"!==(null===(t=this._mediaSource)||void 0===t?void 0:t.readyState))return;if((null===(i=a.video)||void 0===i?void 0:i.updating)||(null===(s=a.audio)||void 0===s?void 0:s.updating))return;const n=this._mediaSource.duration,o=this._pendingMediaDuration;o>0&&(isNaN(n)||o>n)&&(h.Z.v(this.TAG,`Update MediaSource duration from ${n} to ${o}`),this._mediaSource.duration=o),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}_doRemoveRanges(){var e;for(const t in this._pendingRemoveRanges){if(!this._sourceBuffers[t]||(null===(e=this._sourceBuffers[t])||void 0===e?void 0:e.updating))continue;const i=this._sourceBuffers[t],s=this._pendingRemoveRanges[t];for(;s.length&&!(null==i?void 0:i.updating);){const e=s.shift();null==i||i.remove(e.start,e.end)}}}_doAppendSegments(){var e,t,i;const s=this._pendingSegments;for(const a in s)if(this._sourceBuffers[a]&&!(null===(e=this._sourceBuffers[a])||void 0===e?void 0:e.updating)&&s[a].length>0){const e=s[a].shift();if(null==e?void 0:e.timestampOffset){const i=(null===(t=this._sourceBuffers[a])||void 0===t?void 0:t.timestampOffset)||0,s=e.timestampOffset/1e3;Math.abs(i-s)>.1&&(h.Z.v(this.TAG,`Update MPEG audio timestampOffset from ${i} to ${s}`),this._sourceBuffers[a]&&(this._sourceBuffers[a].timestampOffset=s)),delete e.timestampOffset}if(!e.data||0===e.data.byteLength)continue;try{null===(i=this._sourceBuffers[a])||void 0===i||i.appendBuffer(e.data),this._isBufferFull=!1,"video"===a&&e.hasOwnProperty("info")&&this._idrList.appendArray(e.info.syncPoints)}catch(t){this._pendingSegments[a].unshift(e),22===t.code?(this._isBufferFull||this._emitter.emit(k.BUFFER_FULL),this._isBufferFull=!0):(h.Z.e(this.TAG,t.message),this._emitter.emit(k.ERROR,{code:t.code,msg:t.message}))}}}_onSourceOpen(){var e;if(h.Z.v(this.TAG,"MediaSource onSourceOpen"),null===(e=this._mediaSource)||void 0===e||e.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0){const e=this._pendingSourceBufferInit;for(;e.length;){const t=e.shift();this.appendInitSegment(t,!0)}}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(k.SOURCE_OPEN)}_onSourceEnded(){h.Z.v(this.TAG,"MediaSource onSourceEnded")}_onSourceClose(){h.Z.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))}_hasPendingSegments(){const e=this._pendingSegments;return e.video.length>0||e.audio.length>0}_hasPendingRemoveRanges(){const e=this._pendingRemoveRanges;return e.video.length>0||e.audio.length>0}_onSourceBufferUpdateEnd(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(k.UPDATE_END)}_onSourceBufferError(e){h.Z.e(this.TAG,`SourceBuffer Error: ${e}`)}};var C=i(898);const B={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},I={NETWORK_EXCEPTION:d.nm.EXCEPTION,NETWORK_STATUS_CODE_INVALID:d.nm.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:d.nm.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:d.nm.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:C.Z.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:C.Z.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:C.Z.CODEC_UNSUPPORTED};var M=function(e,t,i,s){return new(i||(i=Promise))(function(a,n){function o(e){try{d(s.next(e))}catch(e){n(e)}}function r(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,r)}d((s=s.apply(e,t||[])).next())})};const O=class{constructor(e,t){var i,s,a;this.TAG="MSEPlayer",this._type="MSEPlayer",this._emitter=new l.EventEmitter,this._config=n(),"object"==typeof t&&Object.assign(this._config,t);const o=e.type.toLowerCase();if("mse"!==o&&"mpegts"!==o&&"m2ts"!==o&&"flv"!==o)throw new w.OC("MSEPlayer requires an mpegts/m2ts/flv MediaDataSource input!");e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;const r=_.Z.chrome&&(_.Z.version&&(null===(i=_.Z.version)||void 0===i?void 0:i.major)<50||_.Z.version&&50===(null===(s=null===_.Z||void 0===_.Z?void 0:_.Z.version)||void 0===s?void 0:s.major)&&((null===(a=null===_.Z||void 0===_.Z?void 0:_.Z.version)||void 0===a?void 0:a.build)||-1)<2661);this._alwaysSeekKeyframe=!!(r||_.Z.msedge||_.Z.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}destroy(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}on(e,t){e===c.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then(()=>{this._emitter.emit(c.MEDIA_INFO,this.mediaInfo)}):e===c.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then(()=>{this._emitter.emit(c.STATISTICS_INFO,this.statisticsInfo)}),this._emitter.addListener(e,t)}off(e,t){this._emitter.removeListener(e,t)}attachMediaElement(e){var t,i,s,a,n;if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new D(this._config),null===(t=this._msectl)||void 0===t||t.on(k.UPDATE_END,this._onmseUpdateEnd.bind(this)),null===(i=this._msectl)||void 0===i||i.on(k.BUFFER_FULL,this._onmseBufferFull.bind(this)),null===(s=this._msectl)||void 0===s||s.on(k.SOURCE_OPEN,()=>{this._mseSourceOpened=!0,this._hasPendingLoad&&(this._hasPendingLoad=!1,this.load())}),null===(a=this._msectl)||void 0===a||a.on(k.ERROR,e=>{this._emitter.emit(c.ERROR,B.MEDIA_ERROR,I.MEDIA_MSE_ERROR,e)}),null===(n=this._msectl)||void 0===n||n.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}}detachMediaElement(){var e;this._mediaElement&&(null===(e=this._msectl)||void 0===e||e.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)}load(){if(!this._mediaElement)throw new w.rT("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new w.rT("MSEPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(!this._config.deferLoadAfterSourceOpen||this._mseSourceOpened?(this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new T(this._mediaDataSource,this._config),this._transmuxer.on(b.Z.INIT_SEGMENT,(e,t)=>{var i;null===(i=this._msectl)||void 0===i||i.appendInitSegment(t)}),this._transmuxer.on(b.Z.MEDIA_SEGMENT,(e,t)=>{var i,s,a;if(null===(i=this._msectl)||void 0===i||i.appendMediaSegment(t),this._config.lazyLoad&&!this._config.isLive){const e=null===(s=this._mediaElement)||void 0===s?void 0:s.currentTime;t.info.endDts>=1e3*(e+((null===(a=this._config)||void 0===a?void 0:a.lazyLoadMaxDuration)||0))&&null==this._progressChecker&&(h.Z.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}}),this._transmuxer.on(b.Z.LOADING_COMPLETE,()=>{var e;null===(e=this._msectl)||void 0===e||e.endOfStream(),this._emitter.emit(c.LOADING_COMPLETE)}),this._transmuxer.on(b.Z.RECOVERED_EARLY_EOF,()=>{this._emitter.emit(c.RECOVERED_EARLY_EOF)}),this._transmuxer.on(b.Z.IO_ERROR,(e,t)=>{this._emitter.emit(c.ERROR,B.NETWORK_ERROR,e,t)}),this._transmuxer.on(b.Z.DEMUX_ERROR,(e,t)=>{this._emitter.emit(c.ERROR,B.MEDIA_ERROR,e,{code:-1,msg:t})}),this._transmuxer.on(b.Z.MEDIA_INFO,e=>{this._mediaInfo=e,this._emitter.emit(c.MEDIA_INFO,Object.assign({},e))}),this._transmuxer.on(b.Z.METADATA_ARRIVED,e=>{this._emitter.emit(c.METADATA_ARRIVED,e)}),this._transmuxer.on(b.Z.SCRIPTDATA_ARRIVED,e=>{this._emitter.emit(c.SCRIPTDATA_ARRIVED,e)}),this._transmuxer.on(b.Z.TIMED_ID3_METADATA_ARRIVED,e=>{this._emitter.emit(c.TIMED_ID3_METADATA_ARRIVED,e)}),this._transmuxer.on(b.Z.SMPTE2038_METADATA_ARRIVED,e=>{this._emitter.emit(c.SMPTE2038_METADATA_ARRIVED,e)}),this._transmuxer.on(b.Z.SCTE35_METADATA_ARRIVED,e=>{this._emitter.emit(c.SCTE35_METADATA_ARRIVED,e)}),this._transmuxer.on(b.Z.PES_PRIVATE_DATA_DESCRIPTOR,e=>{this._emitter.emit(c.PES_PRIVATE_DATA_DESCRIPTOR,e)}),this._transmuxer.on(b.Z.PES_PRIVATE_DATA_ARRIVED,e=>{this._emitter.emit(c.PES_PRIVATE_DATA_ARRIVED,e)}),this._transmuxer.on(b.Z.STATISTICS_INFO,e=>{this._statisticsInfo=this._fillStatisticsInfo(e),this._emitter.emit(c.STATISTICS_INFO,Object.assign({},this._statisticsInfo))}),this._transmuxer.on(b.Z.RECOMMEND_SEEKPOINT,e=>{this._mediaElement&&!this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e/1e3)}),this._transmuxer.open()):this._hasPendingLoad=!0)}unload(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)}play(){var e;return M(this,void 0,void 0,function*(){return yield null===(e=this._mediaElement)||void 0===e?void 0:e.play()})}pause(){var e;null===(e=this._mediaElement)||void 0===e||e.pause()}get type(){return this._type}get buffered(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.buffered}get duration(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.duration}get volume(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.volume}set volume(e){this._mediaElement&&(this._mediaElement.volume=e)}get muted(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.muted}set muted(e){this._mediaElement&&(this._mediaElement.muted=e)}get currentTime(){return this._mediaElement?this._mediaElement.currentTime:0}set currentTime(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e}get mediaInfo(){return Object.assign({},this._mediaInfo)}get statisticsInfo(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)}_fillStatisticsInfo(e){if(e.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return e;let t=!0,i=0,s=0;if(this._mediaElement.getVideoPlaybackQuality){const e=this._mediaElement.getVideoPlaybackQuality();i=e.totalVideoFrames,s=e.droppedVideoFrames}else void 0!==this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,s=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=i,e.droppedFrames=s),e}_onmseUpdateEnd(){var e,t,i,s;const a=null===(e=this._mediaElement)||void 0===e?void 0:e.buffered,n=(null===(t=this._mediaElement)||void 0===t?void 0:t.currentTime)||0;if(this._config.isLive&&this._config.liveBufferLatencyChasing&&(null==a?void 0:a.length)>0&&!(null===(i=this._mediaElement)||void 0===i?void 0:i.paused)){const e=a.end(a.length-1);if(e>((null===(s=this._config)||void 0===s?void 0:s.liveBufferLatencyMaxLatency)||0)&&e-n>(this._config.liveBufferLatencyMaxLatency||0)){const t=e-(this._config.liveBufferLatencyMinRemain||0);this.currentTime=t}}if(!this._config.lazyLoad||this._config.isLive)return;let r=0;for(let e=0;e<a.length;e++){const t=a.start(e),i=a.end(e);if(t<=n&&n<i){r=i;break}}r>=n+(this._config.lazyLoadMaxDuration||0)&&null==this._progressChecker&&(h.Z.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}_onmseBufferFull(){h.Z.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()}_suspendTransmuxer(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))}_checkProgressAndResume(){var e,t,i;const s=(null===(e=this._mediaElement)||void 0===e?void 0:e.currentTime)||0,a=null===(t=this._mediaElement)||void 0===t?void 0:t.buffered;let n=!1;for(let e=0;e<a.length;e++){const t=a.start(e),i=a.end(e);if(s>=t&&s<i){s>=i-(this._config.lazyLoadRecoverDuration||0)&&(n=!0);break}}n&&(window.clearInterval(this._progressChecker),this._progressChecker=null,n&&(h.Z.v(this.TAG,"Continue loading from paused position"),null===(i=this._transmuxer)||void 0===i||i.resume()))}_isTimepointBuffered(e){var t;const i=null===(t=this._mediaElement)||void 0===t?void 0:t.buffered;for(let t=0;t<i.length;t++){const s=i.start(t),a=i.end(t);if(e>=s&&e<a)return!0}return!1}_internalSeek(e){var t,i,s,a,n;const o=this._isTimepointBuffered(e);let r=!1,d=0;if(e<1&&(null===(t=this._mediaElement)||void 0===t?void 0:t.buffered).length>0){const t=(null===(i=this._mediaElement)||void 0===i?void 0:i.buffered).start(0);(t<1&&e<t||_.Z.safari)&&(r=!0,d=_.Z.safari?.1:t)}if(r)this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=d);else if(o){if(this._alwaysSeekKeyframe){const t=null===(s=this._msectl)||void 0===s?void 0:s.getNearestKeyframe(Math.floor(1e3*e));this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=null!=t?t.dts/1e3:e)}else this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=e);null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),null===(a=this._msectl)||void 0===a||a.seek(e),null===(n=this._transmuxer)||void 0===n||n.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=e))}_checkAndApplyUnbufferedSeekpoint(){var e,t,i,s;if(this._seekpointRecord)if(((null===(e=this._seekpointRecord)||void 0===e?void 0:e.recordTime)||0)<=this._now()-100){const e=null===(t=this._mediaElement)||void 0===t?void 0:t.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),null===(i=this._msectl)||void 0===i||i.seek(e),null===(s=this._transmuxer)||void 0===s||s.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=e)))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}_checkAndResumeStuckPlayback(e){const t=this._mediaElement;if(e||!this._receivedCanPlay||t.readyState<2){const e=t.buffered;e.length>0&&t.currentTime<e.start(0)&&(h.Z.w(this.TAG,`Playback seems stuck at ${t.currentTime}, seek to ${e.start(0)}`),this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=e.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress)))}else this._mediaElement&&this._mediaElement.removeEventListener("progress",this.e.onvProgress)}_onvLoadedMetadata(e){null!=this._pendingSeekTime&&(this._mediaElement&&(this._mediaElement.currentTime=this._pendingSeekTime),this._pendingSeekTime=null)}_onvSeeking(e){var t,i,s;const a=null===(t=this._mediaElement)||void 0===t?void 0:t.currentTime,n=null===(i=this._mediaElement)||void 0===i?void 0:i.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(a<1&&n.length>0){const e=n.start(0);if(e<1&&a<e||_.Z.safari)return this._requestSetTime=!0,void(this._mediaElement&&(this._mediaElement.currentTime=_.Z.safari?.1:e))}if(this._isTimepointBuffered(a)){if(this._alwaysSeekKeyframe){const e=null===(s=this._msectl)||void 0===s?void 0:s.getNearestKeyframe(Math.floor(1e3*a));null!=e&&(this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=e.dts/1e3))}null!=this._progressChecker&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:a,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}}_onvCanPlay(e){var t;this._receivedCanPlay=!0,null===(t=this._mediaElement)||void 0===t||t.removeEventListener("canplay",this.e.onvCanPlay)}_onvStalled(e){this._checkAndResumeStuckPlayback(!0)}_onvProgress(e){this._checkAndResumeStuckPlayback()}};var P=function(e,t,i,s){return new(i||(i=Promise))(function(a,n){function o(e){try{d(s.next(e))}catch(e){n(e)}}function r(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,r)}d((s=s.apply(e,t||[])).next())})};const x=class{constructor(e,t){this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new l.EventEmitter,this._config=n(),"object"==typeof t&&Object.assign(this._config,t);const i=e.type.toLowerCase();if("mse"===i||"mpegts"===i||"m2ts"===i||"flv"===i)throw new w.OC("NativePlayer does't support mse/mpegts/m2ts/flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new w.OC(`NativePlayer(${e.type}) doesn't support multipart playback!`);this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}destroy(){var e;this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,null===(e=this._emitter)||void 0===e||e.removeAllListeners(),this._emitter=null}on(e,t){e===c.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(()=>{this._emitter.emit(c.MEDIA_INFO,this.mediaInfo)}):e===c.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then(()=>{this._emitter.emit(c.STATISTICS_INFO,this.statisticsInfo)}),this._emitter.addListener(e,t)}off(e,t){this._emitter.removeListener(e,t)}attachMediaElement(e){if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(e){}}detachMediaElement(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}load(){var e;if(!this._mediaElement)throw new w.rT("HTMLMediaElement must be attached before load()!");this._mediaElement.src=(null===(e=this._mediaDataSource)||void 0===e?void 0:e.url)||"",this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)}unload(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}play(){var e;return P(this,void 0,void 0,function*(){return yield null===(e=this._mediaElement)||void 0===e?void 0:e.play()})}pause(){var e;null===(e=this._mediaElement)||void 0===e||e.pause()}get type(){return this._type}get buffered(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.buffered}get duration(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.duration}get volume(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.volume}set volume(e){this._mediaElement&&(this._mediaElement.volume=e)}get muted(){var e;return null===(e=this._mediaElement)||void 0===e?void 0:e.muted}set muted(e){this._mediaElement&&(this._mediaElement.muted=e)}get currentTime(){return this._mediaElement?this._mediaElement.currentTime:0}set currentTime(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e}get mediaInfo(){const e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight)),e}get statisticsInfo(){const e={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return e;let t=!0,i=0,s=0;if(this._mediaElement.getVideoPlaybackQuality){const e=this._mediaElement.getVideoPlaybackQuality();i=e.totalVideoFrames,s=e.droppedVideoFrames}else void 0!==this._mediaElement.webkitDecodedFrameCount?(i=this._mediaElement.webkitDecodedFrameCount,s=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=i,e.droppedFrames=s),e}_onvLoadedMetadata(e){null!=this._pendingSeekTime&&(this._mediaElement&&(this._mediaElement.currentTime=this._pendingSeekTime),this._pendingSeekTime=null),this._emitter.emit(c.MEDIA_INFO,this.mediaInfo)}_reportStatisticsInfo(){this._emitter.emit(c.STATISTICS_INFO,this.statisticsInfo)}},U={h264:1,h265:2,h266:4,vp8:8,vp9:16,av1:32},Z=["h264","h265"],N=e=>{const t=e.split("?"),i=new URLSearchParams(t[1]);return i.delete("vc"),i.set("vc",Z.reduce((e,t)=>e+(U[t]||0),0).toString()),t[0]+"?"+i.toString()};const G={createPlayer:function(e,t){(null==e?void 0:e.url)&&(e.url=N(e.url));const i=e;if(null==i||"object"!=typeof i)throw new w.OC("MediaDataSource must be an javascript object!");if(!Object.prototype.hasOwnProperty.call(i,"type"))throw new w.OC("MediaDataSource must has type field to indicate video file type!");switch(i.type){case"mse":case"mpegts":case"m2ts":case"flv":return new O(i,t);default:return new x(i,t)}},isSupported:function(){return r.supportMSEH264Playback()},getFeatureList:function(){return r.getFeatureList()},BaseLoader:d.fp,LoaderStatus:d.GM,LoaderErrors:d.nm,version:"",Events:c,ErrorTypes:B,ErrorDetails:I,MSEPlayer:O,NativePlayer:x,LoggingControl:y.Z};Object.defineProperty(G,"version",{enumerable:!0,get:function(){return"2.0.0"}});const V=G},607:(e,t,i)=>{e.exports=i(578).default},575:(e,t,i)=>{i.d(t,{Z:()=>v});var s=i(645);const a=class{constructor(){var e;this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,(null===(e=self.performance)||void 0===e?void 0:e.now)?this._now=self.performance.now.bind(self.performance):this._now=Date.now}reset(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0}addBytes(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())}get currentKBps(){this.addBytes(0);let e=(this._now()-this._lastCheckpoint)/1e3;return 0===e&&(e=1),this._intervalBytes/e/1024}get lastSecondKBps(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0}get averageKBps(){const e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024}};var n=i(108),o=i(479),r=i(411);class d extends n.fp{static isSupported(){var e;try{const t=o.Z.msedge&&((null===(e=null===o.Z||void 0===o.Z?void 0:o.Z.version)||void 0===e?void 0:e.minor)||0)>=15048&&!o.Z.webkit,i=!o.Z.msedge||t;return self.fetch&&self.ReadableStream&&i}catch(e){return!1}}constructor(e,t){super("fetch-stream-loader"),this.TAG="FetchStreamLoader",this._seekHandler=e,this._config=t,this._needStash=!0,this._requestAbort=!1,this._abortController=null,this._contentLength=null,this._receivedLength=0}destroy(){this.isWorking()&&this.abort(),super.destroy()}open(e,t){this._dataSource=e,this._range=t;let i=e.url;this._config.reuseRedirectedURL&&void 0!==e.redirectedURL&&(i=e.redirectedURL);const s=this._seekHandler.getConfig(i,t),a=new self.Headers;if("object"==typeof s.headers){const e=s.headers;for(const t in e)e.hasOwnProperty(t)&&a.append(t,e[t])}const o={method:"GET",headers:a,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"==typeof this._config.headers)for(const e in this._config.headers)a.append(e,this._config.headers[e]);e.cors||(o.mode="same-origin"),e.withCredentials&&(o.credentials="include"),(null==e?void 0:e.referrerPolicy)&&(o.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,this._abortController&&(o.signal=this._abortController.signal)),this._status=n.GM.kConnecting,self.fetch(s.url,o).then(e=>{var t,i;if(this._requestAbort)return this._status=n.GM.kIdle,void(null===(t=e.body)||void 0===t||t.cancel());if(e.ok&&e.status>=200&&e.status<=299){if(e.url!==s.url&&this._onURLRedirect){const t=this._seekHandler.removeURLParameters(e.url);this._onURLRedirect(t)}const t=e.headers.get("Content-Length");return null!=t&&(this._contentLength=parseInt(t),0!==this._contentLength&&this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)),this._pump.call(this,null===(i=e.body)||void 0===i?void 0:i.getReader())}if(this._status=n.GM.kError,!this._onError)throw new r.OZ("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(n.nm.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}).catch(e=>{var t;if(!(null===(t=this._abortController)||void 0===t?void 0:t.signal.aborted)){if(this._status=n.GM.kError,!this._onError)throw e;this._onError(n.nm.EXCEPTION,{code:-1,msg:e.message})}})}abort(){var e;if(this._requestAbort=!0,(this._status!==n.GM.kBuffering||!o.Z.chrome)&&this._abortController)try{null===(e=this._abortController)||void 0===e||e.abort()}catch(e){}}_pump(e){return e.read().then(t=>{var i,s,a,o;if(t.done){if(null!==this._contentLength&&this._receivedLength<this._contentLength){this._status=n.GM.kError;const e=n.nm.EARLY_EOF,t={code:-1,msg:"Fetch stream meet Early-EOF"};if(!this._onError)throw new r.OZ(t.msg);this._onError(e,t)}else this._status=n.GM.kComplete,this._onComplete&&this._onComplete((null===(i=this._range)||void 0===i?void 0:i.from)||0,((null===(s=this._range)||void 0===s?void 0:s.from)||0)+this._receivedLength-1)}else{if(null===(a=this._abortController)||void 0===a?void 0:a.signal.aborted)return void(this._status=n.GM.kComplete);if(this._requestAbort)return this._status=n.GM.kComplete,e.cancel();this._status=n.GM.kBuffering;const i=t.value.buffer,s=((null===(o=this._range)||void 0===o?void 0:o.from)||0)+this._receivedLength;this._receivedLength+=i.byteLength,this._onDataArrival&&this._onDataArrival(i,s,this._receivedLength),this._pump(e)}}).catch(e=>{var t,i;if(null===(i=null===(t=this._abortController)||void 0===t?void 0:t.signal)||void 0===i?void 0:i.aborted)return void(this._status=n.GM.kComplete);if(11===e.code&&o.Z.msedge)return;this._status=n.GM.kError;let s=0,a=null;if(19!==e.code&&"network error"!==e.message||!(null===this._contentLength||null!==this._contentLength&&this._receivedLength<this._contentLength)?(s=n.nm.EXCEPTION,a={code:e.code,msg:e.message}):(s=n.nm.EARLY_EOF,a={code:e.code,msg:"Fetch stream meet Early-EOF"}),!this._onError)throw new r.OZ(a.msg);this._onError(s,a)})}}const l=d;class h extends n.fp{static isSupported(){try{const e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(e){return s.Z.w("MozChunkedLoader",e.message),!1}}constructor(e,t){super("xhr-moz-chunked-loader"),this.TAG="MozChunkedLoader",this._seekHandler=e,this._config=t,this._needStash=!0,this._xhr=null,this._requestAbort=!1,this._contentLength=null,this._receivedLength=0}destroy(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),super.destroy()}open(e,t){this._dataSource=e,this._range=t;let i=e.url;this._config.reuseRedirectedURL&&void 0!==e.redirectedURL&&(i=e.redirectedURL);const s=this._seekHandler.getConfig(i,t);this._requestURL=s.url;const a=this._xhr=new XMLHttpRequest;if(a.open("GET",s.url,!0),a.responseType="moz-chunked-arraybuffer",a.onreadystatechange=this._onReadyStateChange.bind(this),a.onprogress=this._onProgress.bind(this),a.onloadend=this._onLoadEnd.bind(this),a.onerror=this._onXhrError.bind(this),e.withCredentials&&(a.withCredentials=!0),"object"==typeof s.headers){const e=s.headers;for(const t in e)e.hasOwnProperty(t)&&a.setRequestHeader(t,e[t])}if("object"==typeof this._config.headers){const e=this._config.headers;for(const t in e)e.hasOwnProperty(t)&&a.setRequestHeader(t,e[t])}this._status=n.GM.kConnecting,a.send()}abort(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=n.GM.kComplete}_onReadyStateChange(e){const t=e.target;if(2===t.readyState){if(void 0!==t.responseURL&&t.responseURL!==this._requestURL&&this._onURLRedirect){const e=this._seekHandler.removeURLParameters(t.responseURL);this._onURLRedirect(e)}if(0!==t.status&&(t.status<200||t.status>299)){if(this._status=n.GM.kError,!this._onError)throw new r.OZ("MozChunkedLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(n.nm.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}else this._status=n.GM.kBuffering}}_onProgress(e){var t;if(this._status===n.GM.kError)return;null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));const i=e.target.response,s=((null===(t=this._range)||void 0===t?void 0:t.from)||0)+this._receivedLength;this._receivedLength+=i.byteLength,this._onDataArrival&&this._onDataArrival(i,s,this._receivedLength)}_onLoadEnd(e){this._requestAbort?this._requestAbort=!1:this._status!==n.GM.kError&&(this._status=n.GM.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}_onXhrError(e){this._status=n.GM.kError;let t=0,i=null;if(this._contentLength&&e.loaded<this._contentLength?(t=n.nm.EARLY_EOF,i={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=n.nm.EXCEPTION,i={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new r.OZ(i.msg);this._onError(t,i)}}const _=h;class c extends n.fp{static isSupported(){try{const e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="arraybuffer","arraybuffer"===e.responseType}catch(e){return s.Z.w("RangeLoader",e.message),!1}}constructor(e,t){super("xhr-range-loader"),this.TAG="RangeLoader",this._seekHandler=e,this._config=t,this._needStash=!1,this._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],this._currentChunkSizeKB=384,this._currentSpeedNormalized=0,this._zeroSpeedChunkCount=0,this._xhr=null,this._speedSampler=new a,this._requestAbort=!1,this._waitForTotalLength=!1,this._totalLengthReceived=!1,this._currentRequestURL=null,this._currentRedirectedURL=null,this._currentRequestRange=null,this._totalLength=null,this._contentLength=null,this._receivedLength=0,this._lastTimeLoaded=0}destroy(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),super.destroy()}get currentSpeed(){return this._speedSampler.lastSecondKBps}open(e,t){this._dataSource=e,this._range=t,this._status=n.GM.kConnecting;let i=!1;null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(i=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||i?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))}_openSubRange(){var e,t;const i=1024*this._currentChunkSizeKB,s=((null===(e=this._range)||void 0===e?void 0:e.from)||0)+this._receivedLength;let a=s+i;null!=this._contentLength&&a-this._range.from>=this._contentLength&&(a=((null===(t=this._range)||void 0===t?void 0:t.from)||0)+this._contentLength-1),this._currentRequestRange={from:s,to:a},this._internalOpen(this._dataSource,this._currentRequestRange)}_internalOpen(e,t){this._lastTimeLoaded=0;let i=e.url;this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?i=this._currentRedirectedURL:null!=e.redirectedURL&&(i=e.redirectedURL));const s=this._seekHandler.getConfig(i,t);this._currentRequestURL=s.url;const a=this._xhr=new XMLHttpRequest;if(a.open("GET",s.url,!0),a.responseType="arraybuffer",a.onreadystatechange=this._onReadyStateChange.bind(this),a.onprogress=this._onProgress.bind(this),a.onload=this._onLoad.bind(this),a.onerror=this._onXhrError.bind(this),e.withCredentials&&(a.withCredentials=!0),"object"==typeof s.headers){const e=s.headers;for(const t in e)e.hasOwnProperty(t)&&a.setRequestHeader(t,e[t])}if("object"==typeof this._config.headers){const e=this._config.headers;for(const t in e)e.hasOwnProperty(t)&&a.setRequestHeader(t,e[t])}a.send()}abort(){this._requestAbort=!0,this._internalAbort(),this._status=n.GM.kComplete}_internalAbort(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)}_onReadyStateChange(e){const t=e.target;if(2===t.readyState){if(null!=t.responseURL){const e=this._seekHandler.removeURLParameters(t.responseURL);t.responseURL!==this._currentRequestURL&&e!==this._currentRedirectedURL&&(this._currentRedirectedURL=e,this._onURLRedirect&&this._onURLRedirect(e))}if(t.status>=200&&t.status<=299){if(this._waitForTotalLength)return;this._status=n.GM.kBuffering}else{if(this._status=n.GM.kError,!this._onError)throw new r.OZ("RangeLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(n.nm.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}}}_onProgress(e){if(this._status===n.GM.kError)return;if(null===this._contentLength){let t=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,t=!0;const i=e.total;this._internalAbort(),null!=i&&0!==i&&(this._totalLength=i)}if(-1===this._range.to?this._contentLength=(this._totalLength||0)-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}const t=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(t)}_normalizeSpeed(e){const t=this._chunkSizeKBList,i=t.length-1;let s=0,a=0,n=i;if(e<t[0])return t[0];for(;a<=n;){if(s=a+Math.floor((n-a)/2),s===i||e>=t[s]&&e<t[s+1])return t[s];t[s]<e?a=s+1:n=s-1}}_onLoad(e){if(this._status===n.GM.kError)return;if(this._waitForTotalLength)return void(this._waitForTotalLength=!1);this._lastTimeLoaded=0;let t=this._speedSampler.lastSecondKBps;if(0===t&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(t=this._speedSampler.currentKBps)),0!==t){const e=this._normalizeSpeed(t);this._currentSpeedNormalized!==e&&(this._currentSpeedNormalized=e,this._currentChunkSizeKB=e)}const i=e.target.response,s=this._range.from+this._receivedLength;this._receivedLength+=i.byteLength;let a=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():a=!0,this._onDataArrival&&this._onDataArrival(i,s,this._receivedLength),a&&(this._status=n.GM.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}_onXhrError(e){this._status=n.GM.kError;let t=0,i=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(t=n.nm.EARLY_EOF,i={code:-1,msg:"RangeLoader meet Early-Eof"}):(t=n.nm.EXCEPTION,i={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new r.OZ(i.msg);this._onError(t,i)}}const u=c;class m extends n.fp{static isSupported(){try{return void 0!==self.WebSocket}catch(e){return!1}}constructor(e,t){super("websocket-loader"),this.TAG="WebSocketLoader",this._needStash=!0,this._ws=null,this._requestAbort=!1,this._receivedLength=0}destroy(){this._ws&&this.abort(),super.destroy()}open(e){try{const t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=n.GM.kConnecting}catch(e){this._status=n.GM.kError;const t={code:e.code,msg:e.message};if(!this._onError)throw new r.OZ(t.msg);this._onError(n.nm.EXCEPTION,t)}}abort(){const e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=n.GM.kComplete}_onWebSocketOpen(e){this._status=n.GM.kBuffering}_onWebSocketClose(e){this._requestAbort?this._requestAbort=!1:(this._status=n.GM.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1))}_onWebSocketMessage(e){if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){const t=new FileReader;t.onload=()=>{this._dispatchArrayBuffer(null==t?void 0:t.result)},t.readAsArrayBuffer(e.data)}else{this._status=n.GM.kError;const t={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new r.OZ(t.msg);this._onError(n.nm.EXCEPTION,t)}}_dispatchArrayBuffer(e){const t=e,i=this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,i,this._receivedLength)}_onWebSocketError(e){this._status=n.GM.kError;const t={code:e.code,msg:e.message};if(!this._onError)throw new r.OZ(t.msg);this._onError(n.nm.EXCEPTION,t)}}const f=m;const p=class{constructor(e){this._zeroStart=e||!1}getConfig(e,t){const i={};if(0!==t.from||-1!==t.to){let e;e=-1!==t.to?`bytes=${t.from.toString()}-${t.to.toString()}`:`bytes=${t.from.toString()}-`,i.Range=e}else this._zeroStart&&(i.Range="bytes=0-");return{url:e,headers:i}}removeURLParameters(e){return e}};const g=class{constructor(e,t){this._startName=e,this._endName=t}getConfig(e,t){let i=e;if(0!==t.from||-1!==t.to){let e=!0;i.includes("?")||(i+="?",e=!1),e&&(i+="&"),i+=`${this._startName}=${t.from.toString()}`,-1!==t.to&&(i+=`&${this._endName}=${t.to.toString()}`)}return{url:i,headers:{}}}removeURLParameters(e){const t=e.split("?")[0];let i;const s=e.indexOf("?");-1!==s&&(i=e.substring(s+1));let a="";if(void 0!==i&&i.length>0){const e=i.split("&");for(let t=0;t<e.length;t++){const i=e[t].split("="),s=t>0;i[0]!==this._startName&&i[0]!==this._endName&&(s&&(a+="&"),a+=e[t])}}return 0===a.length?t:t+"?"+a}};const v=class{constructor(e,t,i){this.TAG="IOController",this._config=t,this._extraData=i,this._stashInitialSize=65536,void 0!==t.stashInitialSize&&t.stashInitialSize>0&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,t.enableStashBuffer||(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url||""),this._refTotalLength=e.filesize?e.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new a,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}destroy(){var e,t,i;(null===(e=this._loader)||void 0===e?void 0:e.isWorking())&&(null===(t=this._loader)||void 0===t||t.abort()),null===(i=this._loader)||void 0===i||i.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null}isWorking(){var e;return(null===(e=this._loader)||void 0===e?void 0:e.isWorking())&&!this._paused}isPaused(){return this._paused}get status(){var e;return null===(e=this._loader)||void 0===e?void 0:e.status}get extraData(){return this._extraData}set extraData(e){this._extraData=e}get onDataArrival(){return this._onDataArrival}set onDataArrival(e){this._onDataArrival=e}get onSeeked(){return this._onSeeked}set onSeeked(e){this._onSeeked=e}get onError(){return this._onError}set onError(e){this._onError=e}get onComplete(){return this._onComplete}set onComplete(e){this._onComplete=e}get onRedirect(){return this._onRedirect}set onRedirect(e){this._onRedirect=e}get onRecoveredEarlyEof(){return this._onRecoveredEarlyEof}set onRecoveredEarlyEof(e){this._onRecoveredEarlyEof=e}get currentURL(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.url}get hasRedirect(){var e;return null!=this._redirectedURL||void 0!==(null===(e=this._dataSource)||void 0===e?void 0:e.redirectedURL)}get currentRedirectedURL(){var e;return this._redirectedURL||(null===(e=this._dataSource)||void 0===e?void 0:e.redirectedURL)}get currentSpeed(){var e,t;return this._loaderClass===u?null===(e=this._loader)||void 0===e?void 0:e.currentSpeed:null===(t=this._speedSampler)||void 0===t?void 0:t.lastSecondKBps}get loaderType(){var e;return null===(e=this._loader)||void 0===e?void 0:e.type}_selectSeekHandler(){const e=this._config;if("range"===e.seekType)this._seekHandler=new p(!!this._config.rangeLoadZeroStart);else if("param"===e.seekType){const t=e.seekParamStart||"bstart",i=e.seekParamEnd||"bend";this._seekHandler=new g(t,i)}else{if("custom"!==e.seekType)throw new r.OC(`Invalid seekType in config: ${(null==e?void 0:e.seekType)||""}`);if("function"!=typeof e.customSeekHandler)throw new r.OC("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}}_selectLoader(){var e;if(null!=this._config.customLoader)this._loaderClass=(null===(e=this._config)||void 0===e?void 0:e.customLoader)||null;else if(this._isWebSocketURL)this._loaderClass=f;else if(l.isSupported())this._loaderClass=l;else if(_.isSupported())this._loaderClass=_;else{if(!u.isSupported())throw new r.OZ("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=u}}_createLoader(){var e;this._loaderClass&&(this._loader=new this._loaderClass(this._seekHandler,this._config),(null===(e=this._loader)||void 0===e?void 0:e.needStashBuffer)||(this._enableStash=!1),this._loader&&(this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)))}open(e){var t,i;this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),null===(t=this._speedSampler)||void 0===t||t.reset(),e||(this._fullRequestFlag=!0),null===(i=this._loader)||void 0===i||i.open(this._dataSource,Object.assign({},this._currentRange))}abort(){var e;null===(e=this._loader)||void 0===e||e.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)}pause(){var e,t;this.isWorking()&&(null===(e=this._loader)||void 0===e||e.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange&&(this._currentRange.to=this._stashByteStart-1)):this._resumeFrom=((null===(t=this._currentRange)||void 0===t?void 0:t.to)||0)+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)}resume(){if(this._paused){this._paused=!1;const e=this._resumeFrom;this._resumeFrom=0,this._internalSeek(e,!0)}}seek(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)}_internalSeek(e,t){var i,s,a,n;(null===(i=this._loader)||void 0===i?void 0:i.isWorking())&&(null===(s=this._loader)||void 0===s||s.abort()),this._flushStashBuffer(t),null===(a=this._loader)||void 0===a||a.destroy(),this._loader=null;const o={from:e,to:-1};this._currentRange={from:o.from,to:-1},null===(n=this._speedSampler)||void 0===n||n.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,o),this._onSeeked&&this._onSeeked()}updateUrl(e){if(!e||"string"!=typeof e||0===e.length)throw new r.OC("Url must be a non-empty string!");this._dataSource.url=e}_expandBuffer(e){let t=this._stashSize;for(;t+1048576<e;)t*=2;if(t+=1048576,t===this._bufferSize)return;const i=new ArrayBuffer(t);if(this._stashUsed>0){const e=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(i,0,t).set(e,0)}this._stashBuffer=i,this._bufferSize=t}_normalizeSpeed(e){const t=this._speedNormalizeList,i=t.length-1;let s=0,a=0,n=i;if(e<t[0])return t[0];for(;a<=n;){if(s=a+Math.floor((n-a)/2),s===i||e>=t[s]&&e<t[s+1])return t[s];t[s]<e?a=s+1:n=s-1}}_adjustStashSize(e){let t=0;t=this._config.isLive?e/8:e<512?e:e>=512&&e<=1024?Math.floor(1.5*e):2*e,t>8192&&(t=8192);const i=1024*t+1048576;this._bufferSize<i&&this._expandBuffer(i),this._stashSize=1024*t}_dispatchChunks(e,t){return this._currentRange&&(this._currentRange.to=t+e.byteLength-1),this._onDataArrival?this._onDataArrival(e,t):0}_onURLRedirect(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)}_onContentLengthKnown(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)}_onLoaderChunkArrival(e,t,i){var s,a;if(!this._onDataArrival)throw new r.rT("IOController: No existing consumer (onDataArrival) callback!");if(this._paused)return;this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),null===(s=this._speedSampler)||void 0===s||s.addBytes(e.byteLength);const n=null===(a=this._speedSampler)||void 0===a?void 0:a.lastSecondKBps;if(0!==n){const e=this._normalizeSpeed(n);this._speedNormalized!==e&&(this._speedNormalized=e,this._adjustStashSize(e))}if(this._enableStash){if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize){new Uint8Array(this._stashBuffer,0,this._stashSize).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength}else{let i=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){const t=this._stashBuffer.slice(0,this._stashUsed),s=this._dispatchChunks(t,this._stashByteStart);if(s<t.byteLength){if(s>0){const e=new Uint8Array(t,s);i.set(e,0),this._stashUsed=e.byteLength,this._stashByteStart+=s}}else this._stashUsed=0,this._stashByteStart+=s;this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),i=new Uint8Array(this._stashBuffer,0,this._bufferSize)),i.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength}else{const s=this._dispatchChunks(e,t);if(s<e.byteLength){const a=e.byteLength-s;a>this._bufferSize&&(this._expandBuffer(a),i=new Uint8Array(this._stashBuffer,0,this._bufferSize)),i.set(new Uint8Array(e,s),0),this._stashUsed+=a,this._stashByteStart=t+s}}}}else if(0===this._stashUsed){const i=this._dispatchChunks(e,t);if(i<e.byteLength){const s=e.byteLength-i;s>this._bufferSize&&this._expandBuffer(s);new Uint8Array(this._stashBuffer,0,this._bufferSize).set(new Uint8Array(e,i),0),this._stashUsed+=s,this._stashByteStart=t+i}}else{this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength);const t=new Uint8Array(this._stashBuffer,0,this._bufferSize);t.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength;const i=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(i<this._stashUsed&&i>0){const e=new Uint8Array(this._stashBuffer,i);t.set(e,0)}this._stashUsed-=i,this._stashByteStart+=i}}_flushStashBuffer(e){if(this._stashUsed>0){const t=this._stashBuffer.slice(0,this._stashUsed),i=this._dispatchChunks(t,this._stashByteStart),a=t.byteLength-i;if(i<t.byteLength){if(!e){if(i>0){const e=new Uint8Array(this._stashBuffer,0,this._bufferSize),s=new Uint8Array(t,i);e.set(s,0),this._stashUsed=s.byteLength,this._stashByteStart+=i}return 0}s.Z.w(this.TAG,`${a} bytes unconsumed data remain when flush buffer, dropped`)}return this._stashUsed=0,this._stashByteStart=0,a}return 0}_onLoaderComplete(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)}_onLoaderError(e,t){var i;switch(s.Z.e(this.TAG,`Loader error, code = ${t.code}, msg = ${t.msg}`),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=n.nm.UNRECOVERABLE_EARLY_EOF),e){case n.nm.EARLY_EOF:if(!this._config.isLive&&this._totalLength){const e=((null===(i=this._currentRange)||void 0===i?void 0:i.to)||0)+1;return void(e<this._totalLength&&(s.Z.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(e,!1)))}e=n.nm.UNRECOVERABLE_EARLY_EOF;case n.nm.UNRECOVERABLE_EARLY_EOF:case n.nm.CONNECTING_TIMEOUT:case n.nm.HTTP_STATUS_CODE_INVALID:case n.nm.EXCEPTION:}if(!this._onError)throw new r.OZ("IOException: "+t.msg);this._onError(e,t)}}},108:(e,t,i)=>{i.d(t,{GM:()=>a,fp:()=>o,nm:()=>n});var s=i(411);const a={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},n={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"};class o{constructor(e){this._type=e||"undefined",this._status=a.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}destroy(){this._status=a.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}isWorking(){return this._status===a.kConnecting||this._status===a.kBuffering}get type(){return this._type}get status(){return this._status}get needStashBuffer(){return this._needStash}get onContentLengthKnown(){return this._onContentLengthKnown}set onContentLengthKnown(e){this._onContentLengthKnown=e}get onURLRedirect(){return this._onURLRedirect}set onURLRedirect(e){this._onURLRedirect=e}get onDataArrival(){return this._onDataArrival}set onDataArrival(e){this._onDataArrival=e}get onError(){return this._onError}set onError(e){this._onError=e}get onComplete(){return this._onComplete}set onComplete(e){this._onComplete=e}open(e,t){throw new s.do("Unimplemented abstract function!")}abort(){throw new s.do("Unimplemented abstract function!")}}},479:(e,t,i)=>{i.d(t,{Z:()=>a});const s={};!function(){const e=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.includes("trident")&&/(rv)(?::| )([\w.]+)/.exec(e)||!e.includes("compatible")&&/(firefox)[ \/]([\w.]+)/.exec(e)||[],i=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],a={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:i[0]||""},n={};if(a.browser){n[a.browser]=!0;const e=a.majorVersion.split(".");n.version={major:parseInt(a.majorVersion,10),string:a.version},e.length>1&&(n.version.minor=parseInt(e[1],10)),e.length>2&&(n.version.build=parseInt(e[2],10))}if(a.platform&&(n[a.platform]=!0),(n.chrome||n.opr||n.safari)&&(n.webkit=!0),n.rv||n.iemobile){n.rv&&delete n.rv;const e="msie";a.browser=e,n[e]=!0}if(n.edge){delete n.edge;const e="msedge";a.browser=e,n[e]=!0}if(n.opr){const e="opera";a.browser=e,n[e]=!0}if(n.safari&&n.android){const e="android";a.browser=e,n[e]=!0}n.name=a.browser,n.platform=a.platform;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&delete s[e];Object.assign(s,n)}();const a=s},411:(e,t,i)=>{i.d(t,{OC:()=>n,OZ:()=>s,do:()=>o,rT:()=>a});class s{constructor(e){this.name="RuntimeException",this._message=e}get message(){return this._message}toString(){return this.name+": "+this.message}}class a extends s{constructor(e){super(e),this.name="IllegalStateException"}}class n extends s{constructor(e){super(e),this.name="InvalidArgumentException"}}class o extends s{constructor(e){super(e),this.name="NotImplementedException"}}},645:(e,t,i)=>{i.d(t,{Z:()=>n});var s=i(99);class a{static e(e,t){var i;e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);const s=`[${e}] > ${t}`;a.ENABLE_CALLBACK&&(null===(i=a.emitter)||void 0===i||i.emit("log","error",s)),a.ENABLE_ERROR&&(console.error?console.error(s):console.warn?console.warn(s):console.log(s))}static i(e,t){e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);const i=`[${e}] > ${t}`;a.ENABLE_CALLBACK&&a.emitter.emit("log","info",i),a.ENABLE_INFO&&(console.info?console.info(i):console.log(i))}static w(e,t){e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);const i=`[${e}] > ${t}`;a.ENABLE_CALLBACK&&a.emitter.emit("log","warn",i),a.ENABLE_WARN&&(console.warn?console.warn(i):console.log(i))}static d(e,t){var i;e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);const s=`[${e}] > ${t}`;a.ENABLE_CALLBACK&&(null===(i=a.emitter)||void 0===i||i.emit("log","debug",s)),a.ENABLE_DEBUG&&(console.debug?console.debug(s):console.log(s))}static v(e,t){var i;e&&!a.FORCE_GLOBAL_TAG||(e=a.GLOBAL_TAG);const s=`[${e}] > ${t}`;a.ENABLE_CALLBACK&&(null===(i=a.emitter)||void 0===i||i.emit("log","verbose",s)),a.ENABLE_VERBOSE&&console.log(s)}}a.FORCE_GLOBAL_TAG=!1,a.GLOBAL_TAG="mpegts.js",a.ENABLE_CALLBACK=!1,a.emitter=new s.EventEmitter,a.ENABLE_ERROR=!0,a.ENABLE_INFO=!0,a.ENABLE_WARN=!0,a.ENABLE_DEBUG=!0,a.ENABLE_VERBOSE=!0;const n=a},278:(e,t,i)=>{i.d(t,{Z:()=>o});var s=i(99),a=i(645);class n{static get forceGlobalTag(){return a.Z.FORCE_GLOBAL_TAG}static set forceGlobalTag(e){a.Z.FORCE_GLOBAL_TAG=e,n._notifyChange()}static get globalTag(){return a.Z.GLOBAL_TAG}static set globalTag(e){a.Z.GLOBAL_TAG=e,n._notifyChange()}static get enableAll(){return a.Z.ENABLE_VERBOSE&&a.Z.ENABLE_DEBUG&&a.Z.ENABLE_INFO&&a.Z.ENABLE_WARN&&a.Z.ENABLE_ERROR}static set enableAll(e){a.Z.ENABLE_VERBOSE=e,a.Z.ENABLE_DEBUG=e,a.Z.ENABLE_INFO=e,a.Z.ENABLE_WARN=e,a.Z.ENABLE_ERROR=e,n._notifyChange()}static get enableDebug(){return a.Z.ENABLE_DEBUG}static set enableDebug(e){a.Z.ENABLE_DEBUG=e,n._notifyChange()}static get enableVerbose(){return a.Z.ENABLE_VERBOSE}static set enableVerbose(e){a.Z.ENABLE_VERBOSE=e,n._notifyChange()}static get enableInfo(){return a.Z.ENABLE_INFO}static set enableInfo(e){a.Z.ENABLE_INFO=e,n._notifyChange()}static get enableWarn(){return a.Z.ENABLE_WARN}static set enableWarn(e){a.Z.ENABLE_WARN=e,n._notifyChange()}static get enableError(){return a.Z.ENABLE_ERROR}static set enableError(e){a.Z.ENABLE_ERROR=e,n._notifyChange()}static getConfig(){return{globalTag:a.Z.GLOBAL_TAG,forceGlobalTag:a.Z.FORCE_GLOBAL_TAG,enableVerbose:a.Z.ENABLE_VERBOSE,enableDebug:a.Z.ENABLE_DEBUG,enableInfo:a.Z.ENABLE_INFO,enableWarn:a.Z.ENABLE_WARN,enableError:a.Z.ENABLE_ERROR,enableCallback:a.Z.ENABLE_CALLBACK}}static applyConfig(e){a.Z.GLOBAL_TAG=e.globalTag,a.Z.FORCE_GLOBAL_TAG=e.forceGlobalTag,a.Z.ENABLE_VERBOSE=e.enableVerbose,a.Z.ENABLE_DEBUG=e.enableDebug,a.Z.ENABLE_INFO=e.enableInfo,a.Z.ENABLE_WARN=e.enableWarn,a.Z.ENABLE_ERROR=e.enableError,a.Z.ENABLE_CALLBACK=!!e.enableCallback}static _notifyChange(){const e=n.emitter;if(e.listenerCount("change")>0){const t=n.getConfig();e.emit("change",t)}}static registerListener(e){n.emitter.addListener("change",e)}static removeListener(e){n.emitter.removeListener("change",e)}static addLogListener(e){a.Z.emitter.addListener("log",e),a.Z.emitter.listenerCount("log")>0&&(a.Z.ENABLE_CALLBACK=!0,n._notifyChange())}static removeLogListener(e){a.Z.emitter.removeListener("log",e),0===a.Z.emitter.listenerCount("log")&&(a.Z.ENABLE_CALLBACK=!1,n._notifyChange())}}n.emitter=new s.EventEmitter;const o=n}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}return i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(607)})())})(flv_min);class FLV{constructor(videoId,url){console.log("isSupportFlv",window.flvjs.isSupported());if(window.flvjs.isSupported()){this.initFLV(videoId,url)}}toString(){return`Flv ${this.coreX}-${this.coreY}`}initFLV(videoId,flvUrl){const{deviceSerial,channelNo,hd,type}=matchUrl(flvUrl);window.ezuikitMonitor.report({protocol:"flv",url:flvUrl,serial:deviceSerial,no:channelNo,action:1,logInfo:{type:type}});var video=document.getElementById(videoId);var hasControls=video.getAttribute("controls");if(!hasControls){video.setAttribute("controls",true)}var flvPlayer=window.flvjs.createPlayer({type:"flv",url:flvUrl,isLive:true},{enableStashBuffer:true,stashInitialSize:128,enableWorker:true});flvPlayer.attachMediaElement(video);flvPlayer.load();flvPlayer.play();this.flvUrl=flvUrl;this.flv=flvPlayer;this.video=video;this.video.addEventListener("oncanplaythrough",function(){console.log("oncanplaythrough")},false);this.video.addEventListener("onerror",function(){console.log("onerror")},false)}play(){console.log("执行flv播放",this.video);this.video.play()}stop(){this.video.pause();this.flv.unload()}destroy(){if(this.flv===undefined||this.flv===null){return}this.flv.pause();this.flv.unload();this.flv.detachMediaElement();this.flv.destroy();this.flv=null}}var lodash={exports:{}};lodash.exports;(function(module,exports){(function(){var undefined$1;var VERSION="4.17.21";var LARGE_ARRAY_SIZE=200;var CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",FUNC_ERROR_TEXT="Expected a function",INVALID_TEMPL_VAR_ERROR_TEXT="Invalid `variable` option passed into `_.template`";var HASH_UNDEFINED="__lodash_hash_undefined__";var MAX_MEMOIZE_SIZE=500;var PLACEHOLDER="__lodash_placeholder__";var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=800,HOT_SPAN=16;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3;var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=17976931348623157e292,NAN=0/0;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]];var argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);var reTrimStart=/^\s+/;var reWhitespace=/\s/;var reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var reForbiddenIdentifierChars=/[()=,{}\[\]\/\s]/;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange;var rsApos="['’]",rsAstral="["+rsAstralRange+"]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d";var rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")";var reApos=RegExp(rsApos,"g");var reComboMark=RegExp(rsCombo,"g");var reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");var reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");var reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]");var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeParseFloat=parseFloat,freeParseInt=parseInt;var freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports=exports&&!exports.nodeType&&exports;var freeModule=freeExports&&"object"=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;if(types){return types}return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){var index=-1,length=array==null?0:array.length;while(++index<length){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayEachRight(array,iteratee){var length=array==null?0:array.length;while(length--){if(iteratee(array[length],length,array)===false){break}}return array}function arrayEvery(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(!predicate(array[index],index,array)){return false}}return true}function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){var index=-1,length=array==null?0:array.length;while(++index<length){if(comparator(value,array[index])){return true}}return false}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;if(initAccum&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array==null?0:array.length;if(initAccum&&length){accumulator=array[--length]}while(length--){accumulator=iteratee(accumulator,array[length],length,array)}return accumulator}function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}var asciiSize=baseProperty("length");function asciiToArray(string){return string.split("")}function asciiWords(string){return string.match(reAsciiWord)||[]}function baseFindKey(collection,predicate,eachFunc){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=key;return false}});return result}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){var index=fromIndex-1,length=array.length;while(++index<length){if(comparator(array[index],value)){return index}}return-1}function baseIsNaN(value){return value!==value}function baseMean(array,iteratee){var length=array==null?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return object==null?undefined$1:object[key]}}function basePropertyOf(object){return function(key){return object==null?undefined$1:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=false,value):iteratee(accumulator,value,index,collection)});return accumulator}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}function baseSum(array,iteratee){var result,index=-1,length=array.length;while(++index<length){var current=iteratee(array[index]);if(current!==undefined$1){result=result===undefined$1?current:result+current}}return result}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}function baseTrim(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){var index=-1,length=strSymbols.length;while(++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index}function charsEndIndex(strSymbols,chrSymbols){var index=strSymbols.length;while(index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index}function countHolders(array,placeholder){var length=array.length,result=0;while(length--){if(array[length]===placeholder){++result}}return result}var deburrLetter=basePropertyOf(deburredLetters);var escapeHtmlChar=basePropertyOf(htmlEscapes);function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function getValue(object,key){return object==null?undefined$1:object[key]}function hasUnicode(string){return reHasUnicode.test(string)}function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}function iteratorToArray(iterator){var data,result=[];while(!(data=iterator.next()).done){result.push(data.value)}return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value===placeholder||value===PLACEHOLDER){array[index]=PLACEHOLDER;result[resIndex++]=index}}return result}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}function setToPairs(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=[value,value]});return result}function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function strictLastIndexOf(array,value,fromIndex){var index=fromIndex+1;while(index--){if(array[index]===value){return index}}return index}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string)}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}function trimmedEndIndex(string){var index=string.length;while(index--&&reWhitespace.test(string.charAt(index))){}return index}var unescapeHtmlChar=basePropertyOf(htmlUnescapes);function unicodeSize(string){var result=reUnicode.lastIndex=0;while(reUnicode.test(string)){++result}return result}function unicodeToArray(string){return string.match(reUnicode)||[]}function unicodeWords(string){return string.match(reUnicodeWord)||[]}var runInContext=function runInContext(context){context=context==null?root:_.defaults(root.Object(),context,_.pick(root,contextProps));var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=context["__core-js_shared__"];var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var nativeObjectToString=objectProto.toString;var objectCtorString=funcToString.call(Object);var oldDash=root._;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?context.Buffer:undefined$1,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined$1,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined$1,symIterator=Symbol?Symbol.iterator:undefined$1,symToStringTag=Symbol?Symbol.toStringTag:undefined$1;var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout;var nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined$1,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse;var DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create");var metaMap=WeakMap&&new WeakMap;var realNames={};var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined$1,symbolValueOf=symbolProto?symbolProto.valueOf:undefined$1,symbolToString=symbolProto?symbolProto.toString:undefined$1;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value}if(hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value)}}return new LodashWrapper(value)}var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{}}if(objectCreate){return objectCreate(proto)}object.prototype=proto;var result=new object;object.prototype=undefined$1;return result}}();function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value;this.__actions__=[];this.__chain__=!!chainAll;this.__index__=0;this.__values__=undefined$1}lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};lodash.prototype=baseLodash.prototype;lodash.prototype.constructor=lodash;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=MAX_ARRAY_LENGTH;this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=copyArray(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=copyArray(this.__iteratees__);result.__takeCount__=this.__takeCount__;result.__views__=copyArray(this.__views__);return result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true}else{result=this.clone();result.__dir__*=-1}return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length){return baseWrapperValue(array,this.__actions__)}var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer}else{break outer}}}result[resIndex++]=value}return result}LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined$1:result}return hasOwnProperty.call(data,key)?data[key]:undefined$1}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined$1:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined$1?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[];this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined$1:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}function setCacheHas(value){return this.__data__.has(value)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined$1}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){if(value!==undefined$1&&!eq(object[key],value)||value===undefined$1&&!(key in object)){baseAssignValue(object,key,value)}}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined$1&&!(key in object)){baseAssignValue(object,key,value)}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseAggregator(collection,setter,iteratee,accumulator){baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)});return accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}function baseAt(object,paths){var index=-1,length=paths.length,result=Array(length),skip=object==null;while(++index<length){result[index]=skip?undefined$1:get(object,paths[index])}return result}function baseClamp(number,lower,upper){if(number===number){if(upper!==undefined$1){number=number<=upper?number:upper}if(lower!==undefined$1){number=number>=lower?number:lower}}return number}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined$1){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result)}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep)}if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}}else{if(!cloneableTags[tag]){return object?value:{}}result=initCloneByTag(value,tag,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);if(isSet(value)){value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))})}else if(isMap(value)){value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))})}var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined$1:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))});return result}function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}function baseConformsTo(object,source,props){var length=props.length;if(object==null){return!length}object=Object(object);while(length--){var key=props[length],predicate=source[key],value=object[key];if(value===undefined$1&&!(key in object)||!predicate(value)){return false}}return true}function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined$1,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=true,length=array.length,result=[],valuesLength=values.length;if(!length){return result}if(iteratee){values=arrayMap(values,baseUnary(iteratee))}if(comparator){includes=arrayIncludesWith;isCommon=false}else if(values.length>=LARGE_ARRAY_SIZE){includes=cacheHas;isCommon=false;values=new SetCache(values)}outer:while(++index<length){var value=array[index],computed=iteratee==null?value:iteratee(value);value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===computed){continue outer}}result.push(value)}else if(!includes(values,computed,comparator)){result.push(value)}}return result}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result});return result}function baseExtremum(array,iteratee,comparator){var index=-1,length=array.length;while(++index<length){var value=array[index],current=iteratee(value);if(current!=null&&(computed===undefined$1?current===current&&!isSymbol(current):comparator(current,computed))){var computed=current,result=value}}return result}function baseFill(array,value,start,end){var length=array.length;start=toInteger(start);if(start<0){start=-start>length?0:length+start}end=end===undefined$1||end>length?length:toInteger(end);if(end<0){end+=length}end=start>end?0:toLength(end);while(start<end){array[start++]=value}return array}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined$1}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){if(value==null){return value===undefined$1?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseGt(value,other){return value>other}function baseHas(object,key){return object!=null&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return object!=null&&key in Object(object)}function baseInRange(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}function baseIntersection(arrays,iteratee,comparator){var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=Infinity,result=[];while(othIndex--){var array=arrays[othIndex];if(othIndex&&iteratee){array=arrayMap(array,baseUnary(iteratee))}maxLength=nativeMin(array.length,maxLength);caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined$1}array=arrays[0];var index=-1,seen=caches[0];outer:while(++index<length&&result.length<maxLength){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator))){continue outer}}if(seen){seen.push(computed)}result.push(value)}}return result}function baseInverter(object,setter,iteratee,accumulator){baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)});return accumulator}function baseInvoke(object,path,args){path=castPath(path,object);object=parent(object,path);var func=object==null?object:object[toKey(last(path))];return func==null?undefined$1:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsArrayBuffer(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined$1&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined$1?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result)){return false}}}return true}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseIteratee(value){if(typeof value=="function"){return value}if(value==null){return identity}if(typeof value=="object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined$1&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return}baseFor(source,function(srcValue,key){stack||(stack=new Stack);if(isObject(srcValue)){baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack)}else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):undefined$1;if(newValue===undefined$1){newValue=srcValue}assignMergeValue(object,key,newValue)}},keysIn)}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return}var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined$1;var isCommon=newValue===undefined$1;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped){if(isArray(objValue)){newValue=objValue}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue)}else if(isBuff){isCommon=false;newValue=cloneBuffer(srcValue,true)}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true)}else{newValue=[]}}else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue)){newValue=toPlainObject(objValue)}else if(!isObject(objValue)||isFunction(objValue)){newValue=initCloneObject(srcValue)}}else{isCommon=false}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack["delete"](srcValue)}assignMergeValue(object,key,newValue)}function baseNth(array,n){var length=array.length;if(!length){return}n+=n<0?length:0;return isIndex(n,length)?array[n]:undefined$1}function baseOrderBy(collection,iteratees,orders){if(iteratees.length){iteratees=arrayMap(iteratees,function(iteratee){if(isArray(iteratee)){return function(value){return baseGet(value,iteratee.length===1?iteratee[0]:iteratee)}}return iteratee})}else{iteratees=[identity]}var index=-1;iteratees=arrayMap(iteratees,baseUnary(getIteratee()));var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}function basePickBy(object,paths,predicate){var index=-1,length=paths.length,result={};while(++index<length){var path=paths[index],value=baseGet(object,path);if(predicate(value,path)){baseSet(result,castPath(path,object),value)}}return result}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;if(array===values){values=copyArray(values)}if(iteratee){seen=arrayMap(array,baseUnary(iteratee))}while(++index<length){var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;while((fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1){if(seen!==array){splice.call(seen,fromIndex,1)}splice.call(array,fromIndex,1)}}return array}function basePullAt(array,indexes){var length=array?indexes.length:0,lastIndex=length-1;while(length--){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;if(isIndex(index)){splice.call(array,index,1)}else{baseUnset(array,index)}}}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(length--){result[fromRight?length:++index]=start;start+=step}return result}function baseRepeat(string,n){var result="";if(!string||n<1||n>MAX_SAFE_INTEGER){return result}do{if(n%2){result+=string}n=nativeFloor(n/2);if(n){string+=string}}while(n);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(key==="__proto__"||key==="constructor"||key==="prototype"){return object}if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined$1;if(newValue===undefined$1){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start}end=end>length?length:end;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result});return!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=array==null?low:array.length;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if(computed!==null&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)){low=mid+1}else{high=mid}}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){var low=0,high=array==null?0:array.length;if(high===0){return 0}value=iteratee(value);var valIsNaN=value!==value,valIsNull=value===null,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined$1;while(low<high){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined$1,othIsNull=computed===null,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);if(valIsNaN){var setLow=retHighest||othIsReflexive}else if(valIsUndefined){setLow=othIsReflexive&&(retHighest||othIsDefined)}else if(valIsNull){setLow=othIsReflexive&&othIsDefined&&(retHighest||!othIsNull)}else if(valIsSymbol){setLow=othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol)}else if(othIsNull||othIsSymbol){setLow=false}else{setLow=retHighest?computed<=value:computed<value}if(setLow){low=mid+1}else{high=mid}}return nativeMin(high,MAX_ARRAY_INDEX)}function baseSortedUniq(array,iteratee){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=value===0?0:value}}return result}function baseToNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}return+value}function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon=false;includes=arrayIncludesWith}else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set){return setToArray(set)}isCommon=false;includes=cacheHas;seen=new SetCache}else{seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(!includes(seen,computed,comparator)){if(seen!==result){seen.push(computed)}result.push(value)}}return result}function baseUnset(object,path){path=castPath(path,object);object=parent(object,path);return object==null||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value()}return arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2){return length?baseUniq(arrays[0]):[]}var index=-1,result=Array(length);while(++index<length){var array=arrays[index],othIndex=-1;while(++othIndex<length){if(othIndex!=index){result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator)}}}return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){var index=-1,length=props.length,valsLength=values.length,result={};while(++index<length){var value=index<valsLength?values[index]:undefined$1;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return typeof value=="function"?value:identity}function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}var castRest=baseRest;function castSlice(array,start,end){var length=array.length;end=end===undefined$1?length:end;return!start&&end>=length?array:baseSlice(array,start,end)}var clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined$1,valIsNull=value===null,valIsReflexive=value===value,valIsSymbol=isSymbol(value);var othIsDefined=other!==undefined$1,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive){return 1}if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive){return-1}}return 0}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}var order=orders[index];return result*(order=="desc"?-1:1)}}return object.index-other.index}function composeArgs(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex]}while(++argsIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[holders[argsIndex]]=args[argsIndex]}}while(rangeLength--){result[leftIndex++]=args[argsIndex++]}return result}function composeArgsRight(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;while(++argsIndex<rangeLength){result[argsIndex]=args[argsIndex]}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex]}while(++holdersIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[offset+holders[holdersIndex]]=args[argsIndex++]}}return result}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined$1;if(newValue===undefined$1){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined$1,guard=length>2?sources[2]:undefined$1;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined$1;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined$1:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}function createBind(func,bitmask,thisArg){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments)}return wrapper}function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined$1;var chr=strSymbols?strSymbols[0]:string.charAt(0);var trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){var Ctor=createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);while(index--){args[index]=arguments[index]}var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);length-=holders.length;if(length<arity){return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined$1,args,holders,undefined$1,undefined$1,arity-length)}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args)}return wrapper}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection);predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined$1}}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;if(fromRight){funcs.reverse()}while(index--){var func=funcs[index];if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(prereq&&!wrapper&&getFuncName(func)=="wrapper"){var wrapper=new LodashWrapper([],true)}}index=wrapper?index:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=="wrapper"?getData(func):undefined$1;if(data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3])}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)){return wrapper.plant(value).value()}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result)}return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined$1:createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length;while(index--){args[index]=arguments[index]}if(isCurried){var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder)}if(partials){args=composeArgs(args,partials,holders,isCurried)}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight,isCurried)}length-=holdersCount;if(isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;length=args.length;if(argPos){args=reorder(args,argPos)}else if(isFlip&&length>1){args.reverse()}if(isAry&&ary<length){args.length=ary}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtor(fn)}return fn.apply(thisBinding,args)}return wrapper}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined$1&&other===undefined$1){return defaultValue}if(value!==undefined$1){result=value}if(other!==undefined$1){if(result===undefined$1){return other}if(typeof value=="string"||typeof other=="string"){value=baseToString(value);other=baseToString(other)}else{value=baseToNumber(value);other=baseToNumber(other)}result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){iteratees=arrayMap(iteratees,baseUnary(getIteratee()));return baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){chars=chars===undefined$1?" ":baseToString(chars);var charsLength=chars.length;if(charsLength<2){return charsLength?baseRepeat(chars,length):chars}var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createPartial(func,bitmask,thisArg,partials){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex]}while(argsLength--){args[leftIndex++]=arguments[++argsIndex]}return apply(fn,isBind?thisArg:this,args)}return wrapper}function createRange(fromRight){return function(start,end,step){if(step&&typeof step!="number"&&isIterateeCall(start,end,step)){end=step=undefined$1}start=toFinite(start);if(end===undefined$1){end=start;start=0}else{end=toFinite(end)}step=step===undefined$1?start<end?1:-1:toFinite(step);return baseRange(start,end,step,fromRight)}}function createRelationalOperation(operator){return function(value,other){if(!(typeof value=="string"&&typeof other=="string")){value=toNumber(value);other=toNumber(other)}return operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined$1,newHoldersRight=isCurry?undefined$1:holders,newPartials=isCurry?partials:undefined$1,newPartialsRight=isCurry?undefined$1:partials;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG);if(!(bitmask&WRAP_CURRY_BOUND_FLAG)){bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG)}var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity];var result=wrapFunc.apply(undefined$1,newData);if(isLaziable(func)){setData(result,newData)}result.placeholder=placeholder;return setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){number=toNumber(number);precision=precision==null?0:nativeMin(toInteger(precision),292);if(precision&&nativeIsFinite(number)){var pair=(toString(number)+"e").split("e"),value=func(pair[0]+"e"+(+pair[1]+precision));pair=(toString(value)+"e").split("e");return+(pair[0]+"e"+(+pair[1]-precision))}return func(number)}}var createSet=!(Set&&1/setToArray(new Set([,-0]))[1]==INFINITY)?noop:function(values){return new Set(values)};function createToPairs(keysFunc){return function(object){var tag=getTag(object);if(tag==mapTag){return mapToArray(object)}if(tag==setTag){return setToPairs(object)}return baseToPairs(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var length=partials?partials.length:0;if(!length){bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG);partials=holders=undefined$1}ary=ary===undefined$1?ary:nativeMax(toInteger(ary),0);arity=arity===undefined$1?arity:toInteger(arity);length-=holders?holders.length:0;if(bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined$1}var data=isBindKey?undefined$1:getData(func);var newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data)}func=newData[0];bitmask=newData[1];thisArg=newData[2];partials=newData[3];holders=newData[4];arity=newData[9]=newData[9]===undefined$1?isBindKey?0:func.length:nativeMax(newData[9]-length,0);if(!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)){bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)}if(!bitmask||bitmask==WRAP_BIND_FLAG){var result=createBind(func,bitmask,thisArg)}else if(bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG){result=createCurry(func,bitmask,arity)}else if((bitmask==WRAP_PARTIAL_FLAG||bitmask==(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG))&&!holders.length){result=createPartial(func,bitmask,thisArg,partials)}else{result=createHybrid.apply(undefined$1,newData)}var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){if(objValue===undefined$1||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)){return srcValue}return objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){if(isObject(objValue)&&isObject(srcValue)){stack.set(srcValue,objValue);baseMerge(objValue,srcValue,undefined$1,customDefaultsMerge,stack);stack["delete"](srcValue)}return objValue}function customOmitClone(value){return isPlainObject(value)?undefined$1:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var arrStacked=stack.get(array);var othStacked=stack.get(other);if(arrStacked&&othStacked){return arrStacked==other&&othStacked==array}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined$1;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined$1){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false}}var objStacked=stack.get(object);var othStacked=stack.get(other);if(objStacked&&othStacked){return objStacked==other&&othStacked==object}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined$1?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}function flatRest(func){return setToString(overRest(func,undefined$1,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var getData=!metaMap?noop:function(func){return metaMap.get(func)};function getFuncName(func){var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name}}return result}function getHolder(func){var object=hasOwnProperty.call(lodash,"placeholder")?lodash:func;return object.placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;result=result===iteratee?baseIteratee:result;return arguments.length?result(arguments[0],arguments[1]):result}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined$1}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined$1;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)})};var getSymbolsIn=!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object)}return result};var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined$1,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size);break}}return{start:start,end:end}}function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor;case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return new Ctor;case symbolTag:return cloneSymbol(object)}}function insertWrapDetails(source,details){var length=details.length;if(!length){return source}var lastIndex=length-1;details[lastIndex]=(length>1?"& ":"")+details[lastIndex];details=details.join(length>2?", ":" ");return source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if(typeof other!="function"||!(funcName in LazyWrapper.prototype)){return false}if(func===other){return true}var data=getData(other);return!!data&&func===data[0]}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var isMaskable=coreJsData?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function isStrictComparable(value){return value===value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined$1||key in Object(object))}}function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG);var isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;if(!(isCommon||isCombo)){return data}if(srcBitmask&WRAP_BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value;data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):value;data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]}value=source[7];if(value){data[7]=value}if(srcBitmask&WRAP_ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])}if(data[9]==null){data[9]=source[9]}data[0]=source[0];data[1]=newBitmask;return data}function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}function objectToString(value){return nativeObjectToString.call(value)}function overRest(func,start,transform){start=nativeMax(start===undefined$1?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined$1}return array}function safeGet(object,key){if(key==="constructor"&&typeof object[key]==="function"){return}if(key=="__proto__"){return}return object[key]}var setData=shortOut(baseSetData);var setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)};var setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined$1,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;size=size===undefined$1?length:size;while(++index<size){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index];array[index]=value}array.length=size;return array}var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push("")}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)});return result});function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function updateWrapDetails(details,bitmask){arrayEach(wrapFlags,function(pair){var value="_."+pair[0];if(bitmask&pair[1]&&!arrayIncludes(details,value)){details.push(value)}});return details.sort()}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper){return wrapper.clone()}var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);result.__actions__=copyArray(wrapper.__actions__);result.__index__=wrapper.__index__;result.__values__=wrapper.__values__;return result}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size===undefined$1){size=1}else{size=nativeMax(toInteger(size),0)}var length=array==null?0:array.length;if(!length||size<1){return[]}var index=0,resIndex=0,result=Array(nativeCeil(length/size));while(index<length){result[resIndex++]=baseSlice(array,index,index+=size)}return result}function compact(array){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value){result[resIndex++]=value}}return result}function concat(){var length=arguments.length;if(!length){return[]}var args=Array(length-1),array=arguments[0],index=length;while(index--){args[index-1]=arguments[index]}return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true)):[]});var differenceBy=baseRest(function(array,values){var iteratee=last(values);if(isArrayLikeObject(iteratee)){iteratee=undefined$1}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),getIteratee(iteratee,2)):[]});var differenceWith=baseRest(function(array,values){var comparator=last(values);if(isArrayLikeObject(comparator)){comparator=undefined$1}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),undefined$1,comparator):[]});function drop(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined$1?1:toInteger(n);return baseSlice(array,n<0?0:n,length)}function dropRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined$1?1:toInteger(n);n=length-n;return baseSlice(array,0,n<0?0:n)}function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true,true):[]}function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true):[]}function fill(array,value,start,end){var length=array==null?0:array.length;if(!length){return[]}if(start&&typeof start!="number"&&isIterateeCall(array,value,start)){start=0;end=length}return baseFill(array,value,start,end)}function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0)}return baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=length-1;if(fromIndex!==undefined$1){index=toInteger(fromIndex);index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)}return baseFindIndex(array,getIteratee(predicate,3),index,true)}function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}function flattenDeep(array){var length=array==null?0:array.length;return length?baseFlatten(array,INFINITY):[]}function flattenDepth(array,depth){var length=array==null?0:array.length;if(!length){return[]}depth=depth===undefined$1?1:toInteger(depth);return baseFlatten(array,depth)}function fromPairs(pairs){var index=-1,length=pairs==null?0:pairs.length,result={};while(++index<length){var pair=pairs[index];result[pair[0]]=pair[1]}return result}function head(array){return array&&array.length?array[0]:undefined$1}function indexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0)}return baseIndexOf(array,value,index)}function initial(array){var length=array==null?0:array.length;return length?baseSlice(array,0,-1):[]}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]});var intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);if(iteratee===last(mapped)){iteratee=undefined$1}else{mapped.pop()}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]});var intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);comparator=typeof comparator=="function"?comparator:undefined$1;if(comparator){mapped.pop()}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined$1,comparator):[]});function join(array,separator){return array==null?"":nativeJoin.call(array,separator)}function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined$1}function lastIndexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=length;if(fromIndex!==undefined$1){index=toInteger(fromIndex);index=index<0?nativeMax(length+index,0):nativeMin(index,length-1)}return value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,baseIsNaN,index,true)}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined$1}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined$1,comparator):array}var pullAt=flatRest(function(array,indexes){var length=array==null?0:array.length,result=baseAt(array,indexes);basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending));return result});function remove(array,predicate){var result=[];if(!(array&&array.length)){return result}var index=-1,indexes=[],length=array.length;predicate=getIteratee(predicate,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index)}}basePullAt(array,indexes);return result}function reverse(array){return array==null?array:nativeReverse.call(array)}function slice(array,start,end){var length=array==null?0:array.length;if(!length){return[]}if(end&&typeof end!="number"&&isIterateeCall(array,start,end)){start=0;end=length}else{start=start==null?0:toInteger(start);end=end===undefined$1?length:toInteger(end)}return baseSlice(array,start,end)}function sortedIndex(array,value){return baseSortedIndex(array,value)}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))}function sortedIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value)){return index}}return-1}function sortedLastIndex(array,value){return baseSortedIndex(array,value,true)}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),true)}function sortedLastIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value,true)-1;if(eq(array[index],value)){return index}}return-1}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[]}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]}function tail(array){var length=array==null?0:array.length;return length?baseSlice(array,1,length):[]}function take(array,n,guard){if(!(array&&array.length)){return[]}n=guard||n===undefined$1?1:toInteger(n);return baseSlice(array,0,n<0?0:n)}function takeRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined$1?1:toInteger(n);n=length-n;return baseSlice(array,n<0?0:n,length)}function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),false,true):[]}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true))});var unionBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined$1}return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),getIteratee(iteratee,2))});var unionWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=="function"?comparator:undefined$1;return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),undefined$1,comparator)});function uniq(array){return array&&array.length?baseUniq(array):[]}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]}function uniqWith(array,comparator){comparator=typeof comparator=="function"?comparator:undefined$1;return array&&array.length?baseUniq(array,undefined$1,comparator):[]}function unzip(array){if(!(array&&array.length)){return[]}var length=0;array=arrayFilter(array,function(group){if(isArrayLikeObject(group)){length=nativeMax(group.length,length);return true}});return baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(array,iteratee){if(!(array&&array.length)){return[]}var result=unzip(array);if(iteratee==null){return result}return arrayMap(result,function(group){return apply(iteratee,undefined$1,group)})}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]});var xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))});var xorBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined$1}return baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))});var xorWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=="function"?comparator:undefined$1;return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined$1,comparator)});var zip=baseRest(unzip);function zipObject(props,values){return baseZipObject(props||[],values||[],assignValue)}function zipObjectDeep(props,values){return baseZipObject(props||[],values||[],baseSet)}var zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined$1;iteratee=typeof iteratee=="function"?(arrays.pop(),iteratee):undefined$1;return unzipWith(arrays,iteratee)});function chain(value){var result=lodash(value);result.__chain__=true;return result}function tap(value,interceptor){interceptor(value);return value}function thru(value,interceptor){return interceptor(value)}var wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){return baseAt(object,paths)};if(length>1||this.__actions__.length||!(value instanceof LazyWrapper)||!isIndex(start)){return this.thru(interceptor)}value=value.slice(start,+start+(length?1:0));value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined$1});return new LodashWrapper(value,this.__chain__).thru(function(array){if(length&&!array.length){array.push(undefined$1)}return array})});function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperNext(){if(this.__values__===undefined$1){this.__values__=toArray(this.value())}var done=this.__index__>=this.__values__.length,value=done?undefined$1:this.__values__[this.__index__++];return{done:done,value:value}}function wrapperToIterator(){return this}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);clone.__index__=0;clone.__values__=undefined$1;if(result){previous.__wrapped__=clone}else{result=clone}var previous=clone;parent=parent.__wrapped__}previous.__wrapped__=value;return result}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped=new LazyWrapper(this)}wrapped=wrapped.reverse();wrapped.__actions__.push({func:thru,args:[reverse],thisArg:undefined$1});return new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var countBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){++result[key]}else{baseAssignValue(result,key,1)}});function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined$1}return func(collection,getIteratee(predicate,3))}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3))}var find=createFind(findIndex);var findLast=createFind(findLastIndex);function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1)}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY)}function flatMapDepth(collection,iteratee,depth){depth=depth===undefined$1?1:toInteger(depth);return baseFlatten(map(collection,iteratee),depth)}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){var func=isArray(collection)?arrayEachRight:baseEachRight;return func(collection,getIteratee(iteratee,3))}var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value)}else{baseAssignValue(result,key,[value])}});function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex<0){fromIndex=nativeMax(length+fromIndex,0)}return isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc=typeof path=="function",result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)});return result});var keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3))}function orderBy(collection,iteratees,orders,guard){if(collection==null){return[]}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees]}orders=guard?undefined$1:orders;if(!isArray(orders)){orders=orders==null?[]:[orders]}return baseOrderBy(collection,iteratees,orders)}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,negate(getIteratee(predicate,3)))}function sample(collection){var func=isArray(collection)?arraySample:baseSample;return func(collection)}function sampleSize(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n===undefined$1){n=1}else{n=toInteger(n)}var func=isArray(collection)?arraySampleSize:baseSampleSize;return func(collection,n)}function shuffle(collection){var func=isArray(collection)?arrayShuffle:baseShuffle;return func(collection)}function size(collection){if(collection==null){return 0}if(isArrayLike(collection)){return isString(collection)?stringSize(collection):collection.length}var tag=getTag(collection);if(tag==mapTag||tag==setTag){return collection.size}return baseKeys(collection).length}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined$1}return func(collection,getIteratee(predicate,3))}var sortBy=baseRest(function(collection,iteratees){if(collection==null){return[]}var length=iteratees.length;if(length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])){iteratees=[]}else if(length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])){iteratees=[iteratees[0]]}return baseOrderBy(collection,baseFlatten(iteratees,1),[])});var now=ctxNow||function(){return root.Date.now()};function after(n,func){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}n=toInteger(n);return function(){if(--n<1){return func.apply(this,arguments)}}}function ary(func,n,guard){n=guard?undefined$1:n;n=func&&n==null?func.length:n;return createWrap(func,WRAP_ARY_FLAG,undefined$1,undefined$1,undefined$1,undefined$1,n)}function before(n,func){var result;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}n=toInteger(n);return function(){if(--n>0){result=func.apply(this,arguments)}if(n<=1){func=undefined$1}return result}}var bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders)});var bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(key,bitmask,object,partials,holders)});function curry(func,arity,guard){arity=guard?undefined$1:arity;var result=createWrap(func,WRAP_CURRY_FLAG,undefined$1,undefined$1,undefined$1,undefined$1,undefined$1,arity);result.placeholder=curry.placeholder;return result}function curryRight(func,arity,guard){arity=guard?undefined$1:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined$1,undefined$1,undefined$1,undefined$1,undefined$1,arity);result.placeholder=curryRight.placeholder;return result}function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined$1;lastInvokeTime=time;result=func.apply(thisArg,args);return result}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined$1||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time)}timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined$1;if(trailing&&lastArgs){return invokeFunc(time)}lastArgs=lastThis=undefined$1;return result}function cancel(){if(timerId!==undefined$1){clearTimeout(timerId)}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined$1}function flush(){return timerId===undefined$1?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined$1){return leadingEdge(lastCallTime)}if(maxing){clearTimeout(timerId);timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined$1){timerId=setTimeout(timerExpired,wait)}return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}var defer=baseRest(function(func,args){return baseDelay(func,1,args)});var delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});function flip(func){return createWrap(func,WRAP_FLIP_FLAG)}function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function negate(predicate){if(typeof predicate!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}function once(func){return before(2,func)}var overArgs=castRest(function(func,transforms){transforms=transforms.length==1&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){var index=-1,length=nativeMin(args.length,funcsLength);while(++index<length){args[index]=transforms[index].call(this,args[index])}return apply(func,this,args)})});var partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined$1,partials,holders)});var partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined$1,partials,holders)});var rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined$1,undefined$1,undefined$1,indexes)});function rest(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=start===undefined$1?start:toInteger(start);return baseRest(func,start)}function spread(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=start==null?0:nativeMax(toInteger(start),0);return baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);if(array){arrayPush(otherArgs,array)}return apply(func,this,otherArgs)})}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}function unary(func){return ary(func,1)}function wrap(value,wrapper){return partial(castFunction(wrapper),value)}function castArray(){if(!arguments.length){return[]}var value=arguments[0];return isArray(value)?value:[value]}function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG)}function cloneWith(value,customizer){customizer=typeof customizer=="function"?customizer:undefined$1;return baseClone(value,CLONE_SYMBOLS_FLAG,customizer)}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function cloneDeepWith(value,customizer){customizer=typeof customizer=="function"?customizer:undefined$1;return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer)}function conformsTo(object,source){return source==null||baseConformsTo(object,source,keys(source))}function eq(value,other){return value===other||value!==value&&other!==other}var gt=createRelationalOperation(baseGt);var gte=createRelationalOperation(function(value,other){return value>=other});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};var isArray=Array.isArray;var isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isBoolean(value){return value===true||value===false||isObjectLike(value)&&baseGetTag(value)==boolTag}var isBuffer=nativeIsBuffer||stubFalse;var isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;function isElement(value){return isObjectLike(value)&&value.nodeType===1&&!isPlainObject(value)}function isEmpty(value){if(value==null){return true}if(isArrayLike(value)&&(isArray(value)||typeof value=="string"||typeof value.splice=="function"||isBuffer(value)||isTypedArray(value)||isArguments(value))){return!value.length}var tag=getTag(value);if(tag==mapTag||tag==setTag){return!value.size}if(isPrototype(value)){return!baseKeys(value).length}for(var key in value){if(hasOwnProperty.call(value,key)){return false}}return true}function isEqual(value,other){return baseIsEqual(value,other)}function isEqualWith(value,other,customizer){customizer=typeof customizer=="function"?customizer:undefined$1;var result=customizer?customizer(value,other):undefined$1;return result===undefined$1?baseIsEqual(value,other,undefined$1,customizer):!!result}function isError(value){if(!isObjectLike(value)){return false}var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||typeof value.message=="string"&&typeof value.name=="string"&&!isPlainObject(value)}function isFinite(value){return typeof value=="number"&&nativeIsFinite(value)}function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isInteger(value){return typeof value=="number"&&value==toInteger(value)}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function isObjectLike(value){return value!=null&&typeof value=="object"}var isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))}function isMatchWith(object,source,customizer){customizer=typeof customizer=="function"?customizer:undefined$1;return baseIsMatch(object,source,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(isMaskable(value)){throw new Error(CORE_ERROR_TEXT)}return baseIsNative(value)}function isNull(value){return value===null}function isNil(value){return value==null}function isNumber(value){return typeof value=="number"||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag){return false}var proto=getPrototype(value);if(proto===null){return true}var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;function isSafeInteger(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER}var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;function isString(value){return typeof value=="string"||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function isUndefined(value){return value===undefined$1}function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag}function isWeakSet(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag}var lt=createRelationalOperation(baseLt);var lte=createRelationalOperation(function(value,other){return value<=other});function toArray(value){if(!value){return[]}if(isArrayLike(value)){return isString(value)?stringToArray(value):copyArray(value)}if(symIterator&&value[symIterator]){return iteratorToArray(value[symIterator]())}var tag=getTag(value),func=tag==mapTag?mapToArray:tag==setTag?setToArray:values;return func(value)}function toFinite(value){if(!value){return value===0?value:0}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0}function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toSafeInteger(value){return value?baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):value===0?value:0}function toString(value){return value==null?"":baseToString(value)}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return}for(var key in source){if(hasOwnProperty.call(source,key)){assignValue(object,key,source[key])}}});var assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)});var assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)});var assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)});var at=flatRest(baseAt);function create(prototype,properties){var result=baseCreate(prototype);return properties==null?result:baseAssign(result,properties)}var defaults=baseRest(function(object,sources){object=Object(object);var index=-1;var length=sources.length;var guard=length>2?sources[2]:undefined$1;if(guard&&isIterateeCall(sources[0],sources[1],guard)){length=1}while(++index<length){var source=sources[index];var props=keysIn(source);var propsIndex=-1;var propsLength=props.length;while(++propsIndex<propsLength){var key=props[propsIndex];var value=object[key];if(value===undefined$1||eq(value,objectProto[key])&&!hasOwnProperty.call(object,key)){object[key]=source[key]}}}return object});var defaultsDeep=baseRest(function(args){args.push(undefined$1,customDefaultsMerge);return apply(mergeWith,undefined$1,args)});function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)}function forIn(object,iteratee){return object==null?object:baseFor(object,getIteratee(iteratee,3),keysIn)}function forInRight(object,iteratee){return object==null?object:baseForRight(object,getIteratee(iteratee,3),keysIn)}function forOwn(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))}function functions(object){return object==null?[]:baseFunctions(object,keys(object))}function functionsIn(object){return object==null?[]:baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=object==null?undefined$1:baseGet(object,path);return result===undefined$1?defaultValue:result}function has(object,path){return object!=null&&hasPath(object,path,baseHas)}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}var invert=createInverter(function(result,value,key){if(value!=null&&typeof value.toString!="function"){value=nativeObjectToString.call(value)}result[value]=key},constant(identity));var invertBy=createInverter(function(result,value,key){if(value!=null&&typeof value.toString!="function"){value=nativeObjectToString.call(value)}if(hasOwnProperty.call(result,value)){result[value].push(key)}else{result[value]=[key]}},getIteratee);var invoke=baseRest(baseInvoke);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}function mapKeys(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)});return result}function mapValues(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))});return result}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)});var mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)});var omit=flatRest(function(object,paths){var result={};if(object==null){return result}var isDeep=false;paths=arrayMap(paths,function(path){path=castPath(path,object);isDeep||(isDeep=path.length>1);return path});copyObject(object,getAllKeysIn(object),result);if(isDeep){result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone)}var length=paths.length;while(length--){baseUnset(result,paths[length])}return result});function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)))}var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths)});function pickBy(object,predicate){if(object==null){return{}}var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});predicate=getIteratee(predicate);return basePickBy(object,props,function(value,path){return predicate(value,path[0])})}function result(object,path,defaultValue){path=castPath(path,object);var index=-1,length=path.length;if(!length){length=1;object=undefined$1}while(++index<length){var value=object==null?undefined$1:object[toKey(path[index])];if(value===undefined$1){index=length;value=defaultValue}object=isFunction(value)?value.call(object):value}return object}function set(object,path,value){return object==null?object:baseSet(object,path,value)}function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined$1;return object==null?object:baseSet(object,path,value,customizer)}var toPairs=createToPairs(keys);var toPairsIn=createToPairs(keysIn);function transform(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);iteratee=getIteratee(iteratee,4);if(accumulator==null){var Ctor=object&&object.constructor;if(isArrLike){accumulator=isArr?new Ctor:[]}else if(isObject(object)){accumulator=isFunction(Ctor)?baseCreate(getPrototype(object)):{}}else{accumulator={}}}(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)});return accumulator}function unset(object,path){return object==null?true:baseUnset(object,path)}function update(object,path,updater){return object==null?object:baseUpdate(object,path,castFunction(updater))}function updateWith(object,path,updater,customizer){customizer=typeof customizer=="function"?customizer:undefined$1;return object==null?object:baseUpdate(object,path,castFunction(updater),customizer)}function values(object){return object==null?[]:baseValues(object,keys(object))}function valuesIn(object){return object==null?[]:baseValues(object,keysIn(object))}function clamp(number,lower,upper){if(upper===undefined$1){upper=lower;lower=undefined$1}if(upper!==undefined$1){upper=toNumber(upper);upper=upper===upper?upper:0}if(lower!==undefined$1){lower=toNumber(lower);lower=lower===lower?lower:0}return baseClamp(toNumber(number),lower,upper)}function inRange(number,start,end){start=toFinite(start);if(end===undefined$1){end=start;start=0}else{end=toFinite(end)}number=toNumber(number);return baseInRange(number,start,end)}function random(lower,upper,floating){if(floating&&typeof floating!="boolean"&&isIterateeCall(lower,upper,floating)){upper=floating=undefined$1}if(floating===undefined$1){if(typeof upper=="boolean"){floating=upper;upper=undefined$1}else if(typeof lower=="boolean"){floating=lower;lower=undefined$1}}if(lower===undefined$1&&upper===undefined$1){lower=0;upper=1}else{lower=toFinite(lower);if(upper===undefined$1){upper=lower;lower=0}else{upper=toFinite(upper)}}if(lower>upper){var temp=lower;lower=upper;upper=temp}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?capitalize(word):word)});function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){string=toString(string);return string&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=toString(string);target=baseToString(target);var length=string.length;position=position===undefined$1?length:baseClamp(toInteger(position),0,length);var end=position;position-=target.length;return position>=0&&string.slice(position,end)==target}function escape(string){string=toString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){string=toString(string);return string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});var lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()});var lowerFirst=createCaseFirst("toLowerCase");function pad(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;if(!length||strLength>=length){return string}var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)}function padEnd(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string}function padStart(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string}function parseInt(string,radix,guard){if(guard||radix==null){radix=0}else if(radix){radix=+radix}return nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)}function repeat(string,n,guard){if(guard?isIterateeCall(string,n,guard):n===undefined$1){n=1}else{n=toInteger(n)}return baseRepeat(toString(string),n)}function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});function split(string,separator,limit){if(limit&&typeof limit!="number"&&isIterateeCall(string,separator,limit)){separator=limit=undefined$1}limit=limit===undefined$1?MAX_ARRAY_LENGTH:limit>>>0;if(!limit){return[]}string=toString(string);if(string&&(typeof separator=="string"||separator!=null&&!isRegExp(separator))){separator=baseToString(separator);if(!separator&&hasUnicode(string)){return castSlice(stringToArray(string),0,limit)}}return string.split(separator,limit)}var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)});function startsWith(string,target,position){string=toString(string);position=position==null?0:baseClamp(toInteger(position),0,string.length);target=baseToString(target);return string.slice(position,position+target.length)==target}function template(string,options,guard){var settings=lodash.templateSettings;if(guard&&isIterateeCall(string,options,guard)){options=undefined$1}string=toString(string);options=assignInWith({},options,settings,customDefaultsAssignIn);var imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL="//# sourceURL="+(hasOwnProperty.call(options,"sourceURL")?(options.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=hasOwnProperty.call(options,"variable")&&options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}else if(reForbiddenIdentifierChars.test(variable)){throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT)}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined$1,importsValues)});result.source=source;if(isError(result)){throw result}return result}function toLower(value){return toString(value).toLowerCase()}function toUpper(value){return toString(value).toUpperCase()}function trim(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined$1)){return baseTrim(string)}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join("")}function trimEnd(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined$1)){return string.slice(0,trimmedEndIndex(string)+1)}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,0,end).join("")}function trimStart(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined$1)){return string.replace(reTrimStart,"")}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));return castSlice(strSymbols,start).join("")}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?toInteger(options.length):length;omission="omission"in options?baseToString(options.omission):omission}string=toString(string);var strLength=string.length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length}if(length>=strLength){return string}var end=length-stringSize(omission);if(end<1){return omission}var result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(separator===undefined$1){return result+omission}if(strSymbols){end+=result.length-end}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;if(!separator.global){separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")}separator.lastIndex=0;while(match=separator.exec(substring)){var newEnd=match.index}result=result.slice(0,newEnd===undefined$1?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index)}}return result+omission}function unescape(string){string=toString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}var upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()});var upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){string=toString(string);pattern=guard?undefined$1:pattern;if(pattern===undefined$1){return hasUnicodeWord(string)?unicodeWords(string):asciiWords(string)}return string.match(pattern)||[]}var attempt=baseRest(function(func,args){try{return apply(func,undefined$1,args)}catch(e){return isError(e)?e:new Error(e)}});var bindAll=flatRest(function(object,methodNames){arrayEach(methodNames,function(key){key=toKey(key);baseAssignValue(object,key,bind(object[key],object))});return object});function cond(pairs){var length=pairs==null?0:pairs.length,toIteratee=getIteratee();pairs=!length?[]:arrayMap(pairs,function(pair){if(typeof pair[1]!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return[toIteratee(pair[0]),pair[1]]});return baseRest(function(args){var index=-1;while(++index<length){var pair=pairs[index];if(apply(pair[0],this,args)){return apply(pair[1],this,args)}}})}function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG))}function constant(value){return function(){return value}}function defaultTo(value,defaultValue){return value==null||value!==value?defaultValue:value}var flow=createFlow();var flowRight=createFlow(true);function identity(value){return value}function iteratee(func){return baseIteratee(typeof func=="function"?func:baseClone(func,CLONE_DEEP_FLAG))}function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG))}var method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}});var methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);if(options==null&&!(isObject(source)&&(methodNames.length||!props.length))){options=source;source=object;object=this;methodNames=baseFunctions(source,keys(source))}var chain=!(isObject(options)&&"chain"in options)||!!options.chain,isFunc=isFunction(object);arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__=chainAll;return result}return func.apply(object,arrayPush([this.value()],arguments))}}});return object}function noConflict(){if(root._===this){root._=oldDash}return this}function noop(){}function nthArg(n){n=toInteger(n);return baseRest(function(args){return baseNth(args,n)})}var over=createOver(arrayMap);var overEvery=createOver(arrayEvery);var overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function propertyOf(object){return function(path){return object==null?undefined$1:baseGet(object,path)}}var range=createRange();var rangeRight=createRange(true);function stubArray(){return[]}function stubFalse(){return false}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return true}function times(n,iteratee){n=toInteger(n);if(n<1||n>MAX_SAFE_INTEGER){return[]}var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee=getIteratee(iteratee);n-=MAX_ARRAY_LENGTH;var result=baseTimes(length,iteratee);while(++index<n){iteratee(index)}return result}function toPath(value){if(isArray(value)){return arrayMap(value,toKey)}return isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id}var add=createMathOperation(function(augend,addend){return augend+addend},0);var ceil=createRound("ceil");var divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1);var floor=createRound("floor");function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined$1}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined$1}function mean(array){return baseMean(array,identity)}function meanBy(array,iteratee){return baseMean(array,getIteratee(iteratee,2))}function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined$1}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined$1}var multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1);var round=createRound("round");var subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);function sum(array){return array&&array.length?baseSum(array,identity):0}function sumBy(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0}lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.assignIn=assignIn;lodash.assignInWith=assignInWith;lodash.assignWith=assignWith;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.castArray=castArray;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.concat=concat;lodash.cond=cond;lodash.conforms=conforms;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.differenceBy=differenceBy;lodash.differenceWith=differenceWith;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatMap=flatMap;lodash.flatMapDeep=flatMapDeep;lodash.flatMapDepth=flatMapDepth;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flattenDepth=flattenDepth;lodash.flip=flip;lodash.flow=flow;lodash.flowRight=flowRight;lodash.fromPairs=fromPairs;lodash.functions=functions;lodash.functionsIn=functionsIn;lodash.groupBy=groupBy;lodash.initial=initial;lodash.intersection=intersection;lodash.intersectionBy=intersectionBy;lodash.intersectionWith=intersectionWith;lodash.invert=invert;lodash.invertBy=invertBy;lodash.invokeMap=invokeMap;lodash.iteratee=iteratee;lodash.keyBy=keyBy;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.mergeWith=mergeWith;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.negate=negate;lodash.nthArg=nthArg;lodash.omit=omit;lodash.omitBy=omitBy;lodash.once=once;lodash.orderBy=orderBy;lodash.over=over;lodash.overArgs=overArgs;lodash.overEvery=overEvery;lodash.overSome=overSome;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pickBy=pickBy;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAll=pullAll;lodash.pullAllBy=pullAllBy;lodash.pullAllWith=pullAllWith;lodash.pullAt=pullAt;lodash.range=range;lodash.rangeRight=rangeRight;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.reverse=reverse;lodash.sampleSize=sampleSize;lodash.set=set;lodash.setWith=setWith;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortedUniq=sortedUniq;lodash.sortedUniqBy=sortedUniqBy;lodash.split=split;lodash.spread=spread;lodash.tail=tail;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.toArray=toArray;lodash.toPairs=toPairs;lodash.toPairsIn=toPairsIn;lodash.toPath=toPath;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.unary=unary;lodash.union=union;lodash.unionBy=unionBy;lodash.unionWith=unionWith;lodash.uniq=uniq;lodash.uniqBy=uniqBy;lodash.uniqWith=uniqWith;lodash.unset=unset;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.update=update;lodash.updateWith=updateWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.without=without;lodash.words=words;lodash.wrap=wrap;lodash.xor=xor;lodash.xorBy=xorBy;lodash.xorWith=xorWith;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipObjectDeep=zipObjectDeep;lodash.zipWith=zipWith;lodash.entries=toPairs;lodash.entriesIn=toPairsIn;lodash.extend=assignIn;lodash.extendWith=assignInWith;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clamp=clamp;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.cloneDeepWith=cloneDeepWith;lodash.cloneWith=cloneWith;lodash.conformsTo=conformsTo;lodash.deburr=deburr;lodash.defaultTo=defaultTo;lodash.divide=divide;lodash.endsWith=endsWith;lodash.eq=eq;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.floor=floor;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.hasIn=hasIn;lodash.head=head;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.invoke=invoke;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isArrayBuffer=isArrayBuffer;lodash.isArrayLike=isArrayLike;lodash.isArrayLikeObject=isArrayLikeObject;lodash.isBoolean=isBoolean;lodash.isBuffer=isBuffer;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isEqualWith=isEqualWith;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isInteger=isInteger;lodash.isLength=isLength;lodash.isMap=isMap;lodash.isMatch=isMatch;lodash.isMatchWith=isMatchWith;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNil=isNil;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isObjectLike=isObjectLike;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isSafeInteger=isSafeInteger;lodash.isSet=isSet;lodash.isString=isString;lodash.isSymbol=isSymbol;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.isWeakMap=isWeakMap;lodash.isWeakSet=isWeakSet;lodash.join=join;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lowerCase=lowerCase;lodash.lowerFirst=lowerFirst;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.maxBy=maxBy;lodash.mean=mean;lodash.meanBy=meanBy;lodash.min=min;lodash.minBy=minBy;lodash.stubArray=stubArray;lodash.stubFalse=stubFalse;lodash.stubObject=stubObject;lodash.stubString=stubString;lodash.stubTrue=stubTrue;lodash.multiply=multiply;lodash.nth=nth;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padEnd=padEnd;lodash.padStart=padStart;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.replace=replace;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.sample=sample;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedIndexBy=sortedIndexBy;lodash.sortedIndexOf=sortedIndexOf;lodash.sortedLastIndex=sortedLastIndex;lodash.sortedLastIndexBy=sortedLastIndexBy;lodash.sortedLastIndexOf=sortedLastIndexOf;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.subtract=subtract;lodash.sum=sum;lodash.sumBy=sumBy;lodash.template=template;lodash.times=times;lodash.toFinite=toFinite;lodash.toInteger=toInteger;lodash.toLength=toLength;lodash.toLower=toLower;lodash.toNumber=toNumber;lodash.toSafeInteger=toSafeInteger;lodash.toString=toString;lodash.toUpper=toUpper;lodash.trim=trim;lodash.trimEnd=trimEnd;lodash.trimStart=trimStart;lodash.truncate=truncate;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.upperCase=upperCase;lodash.upperFirst=upperFirst;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.first=head;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!hasOwnProperty.call(lodash.prototype,methodName)){source[methodName]=func}});return source}(),{chain:false});lodash.VERSION=VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash});arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined$1?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();if(result.__filtered__){result.__takeCount__=nativeMin(n,result.__takeCount__)}else{result.__views__.push({size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName+(result.__dir__<0?"Right":"")})}return result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}});arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type});result.__filtered__=result.__filtered__||isFilter;return result}});arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}});arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}});LazyWrapper.prototype.compact=function(){return this.filter(identity)};LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()};LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)};LazyWrapper.prototype.invokeMap=baseRest(function(path,args){if(typeof path=="function"){return new LazyWrapper(this)}return this.map(function(value){return baseInvoke(value,path,args)})});LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))};LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;if(result.__filtered__&&(start>0||end<0)){return new LazyWrapper(result)}if(start<0){result=result.takeRight(-start)}else if(start){result=result.drop(start)}if(end!==undefined$1){end=toInteger(end);result=end<0?result.dropRight(-end):result.take(end-start)}return result};LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()};LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+(methodName=="last"?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);if(!lodashFunc){return}lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);var interceptor=function(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result};if(useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1){isLazy=useLazy=false}var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined$1});return new LodashWrapper(result,chainAll)}if(isUnwrapped&&onlyLazy){return func.apply(this,args)}result=this.thru(interceptor);return isUnwrapped?isTaker?result.value()[0]:result.value():result}});arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args)}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)})}});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+"";if(!hasOwnProperty.call(realNames,key)){realNames[key]=[]}realNames[key].push({name:methodName,func:lodashFunc})}});realNames[createHybrid(undefined$1,WRAP_BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined$1}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.at=wrapperAt;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.next=wrapperNext;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.first=lodash.prototype.head;if(symIterator){lodash.prototype[symIterator]=wrapperToIterator}return lodash};var _=runInContext();if(freeModule){(freeModule.exports=_)._=_;freeExports._=_}else{root._=_}}).call(commonjsGlobal)})(lodash,lodash.exports);var lodashExports=lodash.exports;var _=getDefaultExportFromCjs(lodashExports);var Status=function(){function Status(jSPlugin,id){_classCallCheck$1(this,Status);this.id=id;this.jSPlugin=jSPlugin;this.state={play:false,loading:false,text:""};this.loadingSetText=this.loadingSetText}_createClass$1(Status,[{key:"toString",value:function toString(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"setPlayStatus",value:function setPlayStatus(options){this.state=Object.assign(this.state,options)}},{key:"loadingStart",value:function loadingStart(id){var oS=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(oS);oS.innerHTML="@keyframes antRotate {to {transform: rotate(400deg);transform-origin:50% 50%;}} .loading {display: inline-block;z-index: 1000;-webkit-animation: antRotate 1s infinite linear;animation: antRotate 1s infinite linear;}";var domId=id;var domElement=document.getElementById(domId);var windowWidth=domElement.offsetWidth;var windowHeight=domElement.offsetHeight;var offsetTop=0;var offsetLeft=domElement.offsetLeft;if(this.jSPlugin.isInspect&&this.jSPlugin.Theme.inspectMode=="map"){offsetLeft=0}if(document.getElementById("".concat(id,"-loading-id-0"))){document.getElementById("".concat(id,"-loading-id-0")).parentNode.removeChild(document.getElementById("".concat(id,"-loading-id-0")))}console.log("loading-id-0---------------");var loadingContainerDOM=document.createElement("div");loadingContainerDOM.setAttribute("id","".concat(id,"-loading-id-0"));var style="position:absolute;outline:none;pointer-events:none;";console.log("this.jSPlugin",this.jSPlugin);style+="width: 100%;background-size: cover; background-repeat:no-repeat;";style+="height: 100%;";style+="top:"+offsetTop+";";style+="left:"+offsetLeft+"px;";loadingContainerDOM.setAttribute("style",style);loadingContainerDOM.style.height=windowHeight;loadingContainerDOM.setAttribute("class","loading-container");domElement.style.position="relative";if(this.jSPlugin.isInspect&&this.jSPlugin.Theme.inspectMode=="map"){domElement.style.position="absolute"}domElement.appendChild(loadingContainerDOM);var splitBasis=1;var loadingItemContainer=document.createElement("div");var loadingStatusDOM=document.createElement("div");loadingItemContainer.setAttribute("class","loading-item");loadingItemContainer.setAttribute("id","".concat(id,"-loading-item-0"));var style="display:inline-flex;pointer-events:none;flex-direction:column;justify-content:center;align-items: center;width:100%;height:"+windowHeight+"px;outline:none;vertical-align: top;position:absolute;";style+="left:"+calLoadingPostion(windowHeight,windowWidth,splitBasis,0).left+"px;";style+="top:"+calLoadingPostion(windowHeight,windowWidth,splitBasis,0).top+"px;";loadingItemContainer.setAttribute("style",style);function calLoadingPostion(windowHeight,windowWidth,splitBasis,i){var top=parseInt(i/splitBasis,10)*(windowHeight/splitBasis);var left=i%splitBasis*(windowWidth/splitBasis);return{top:top,left:left}}var scaleWidth=1;var loadingDOM=document.createElement("div");loadingStatusDOM.innerHTML="";loadingStatusDOM.style.color="#fff";loadingDOM.setAttribute("class","loading");loadingDOM.setAttribute("id","loading-icon");var loading='<svg t="1567069979438" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399" width="24" height="24"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>';if(!this.jSPlugin.isMobile&&!!this.jSPlugin.isCall){scaleWidth=this.jSPlugin.width/1024;loading='<svg t="1567069979438" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399" width="'.concat(40*scaleWidth,'" height="').concat(40*scaleWidth,'"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>')}loadingDOM.innerHTML=loading;loadingItemContainer.appendChild(loadingDOM);loadingItemContainer.appendChild(loadingStatusDOM);loadingContainerDOM.appendChild(loadingItemContainer)}},{key:"loadingStop",value:function loadingStop(id){var loadingItemContainerDOM=document.getElementById("".concat(id,"-loading-item-0"));if(loadingItemContainerDOM&&document.getElementById("loading-icon")){loadingItemContainerDOM.removeChild(document.getElementById("loading-icon"))}}},{key:"loadingSetText",value:function loadingSetText(opt){var _this=this;this.loadingClearText();if(document.getElementById("".concat(this.id,"-loading-item-0"))){var loadingItemContainer=document.getElementById("".concat(this.id,"-loading-item-0"));var textElement=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes[1];if(!textElement){loadingItemContainer.style.height="100%";textElement=document.createElement("div");textElement.innerHTML=opt.text;loadingItemContainer.appendChild(textElement)}textElement.id="".concat(this.id,"-loading-item-txt");textElement.innerHTML=opt.text;textElement.style.fontSize="14px";if(!this.jSPlugin.isMobile&&!!this.jSPlugin.isCall){var scaleWidth=this.jSPlugin.width/1024;textElement.style.fontSize="".concat(28*scaleWidth,"px");textElement.style.marginTop="16px"}if(!!this.jSPlugin.isCall&&opt.type==1){var textElementTmd=document.getElementById("".concat(this.id,"-loading-item-txt"));var textElementIcon=document.createElement("div");textElementIcon.style="margin-bottom: 8px;width:24px;height:24px;";textElementIcon.innerHTML='<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <title></title>\n            <g id="gantan" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                <g id="Group">\n                    <polygon id="Path" points="0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"></polygon>\n                    <path d="M12,2.25000001 C17.2781739,2.25000001 21.5934661,6.44926243 21.746085,11.7237735 L21.746085,11.7237735 L21.75,12 C21.75,17.2781739 17.5507376,21.5934661 12.2762266,21.746085 L12.2762266,21.746085 L12,21.75 C6.72182614,21.75 2.40653397,17.5507376 2.25391507,12.2762266 L2.25391507,12.2762266 L2.25000001,12 C2.25000001,6.72182617 6.44926245,2.40653397 11.7237735,2.25391507 L11.7237735,2.25391507 Z M12,3.75000001 L11.7563186,3.75352261 C7.3032926,3.88243816 3.74992165,7.53391173 3.74992165,11.9891583 L3.74992165,11.9891583 L3.75352261,12.2436814 C3.88243816,16.6967075 7.5339117,20.2500784 11.9891583,20.2500784 L11.9891583,20.2500784 L12.2436814,20.2464774 C16.6967075,20.1175619 20.2500784,16.4660884 20.2500784,12.0108417 L20.2500784,12.0108417 L20.2464774,11.7563186 C20.1175619,7.30329258 16.4660883,3.75000001 12,3.75000001 L12,3.75000001 Z M11.999,15.2500001 L12.1156933,15.25672 C12.6133664,15.3144204 12.999993,15.7366564 12.999993,16.2500001 C12.999993,16.8022157 12.5522116,17.2500001 11.999993,17.2500001 C11.4477844,17.2500001 10.999993,16.8022116 11.0000197,16.2554347 C10.9962666,15.7375014 11.3873731,15.3105316 11.8897485,15.2559043 L11.999,15.2500001 Z M12,6.75000003 C12.3796958,6.75000003 12.693491,7.03215391 12.7431534,7.39822947 L12.75,7.50000003 L12.75,12.5 C12.75,12.9142136 12.4142136,13.25 12,13.25 C11.6203043,13.25 11.3065091,12.9678461 11.2568467,12.6017706 L11.25,12.5 L11.25,7.50000003 C11.25,7.08578647 11.5857865,6.75000003 12,6.75000003 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                </g>\n            </g>\n        </svg>';loadingItemContainer.insertBefore(textElementIcon,textElementTmd)}textElement.style.color=opt.color||"#FFFFFF";this.state.text=opt.text;if(opt.delayClear){var timer=setTimeout(function(){_this.loadingClearText();clearTimeout(timer)},parseInt(opt.delayClear))}}}},{key:"loadingSetTextWithBtn",value:function loadingSetTextWithBtn(opt){var _this2=this;this.loadingClear();console.log(this.jSPlugin);var themeDataTmd=!!this.jSPlugin.Theme.call&&this.jSPlugin.Theme.call.themeData||null;if(!!themeDataTmd&&(themeDataTmd.customConfig.bellPoster===0||this.jSPlugin.Theme.call.bellStatus==="onCall")||opt.mask){if(document.getElementById("".concat(this.id,"-loading-id-0"))){document.getElementById("".concat(this.id,"-loading-id-0")).style.background=opt.maskStyle||"rgba(0,0,0,0.7)"}}var loadingItemContainer=document.getElementById("".concat(this.id,"-loading-item-0"));if(loadingItemContainer){loadingItemContainer.style.height="100%";loadingItemContainer.style["pointer-events"]="auto";var textElement=document.createElement("div");textElement.id="".concat(this.id,"-loading-item-txt");textElement.innerHTML=opt.text;textElement.title=opt.text;textElement.style.color=opt.color||"#FFFFFF";if(!opt.isMobile){var scaleWidth=this.jSPlugin.width/1024;var txtSize=28*scaleWidth;textElement.style.fontSize=txtSize+"px"}else{var _scaleWidth=this.jSPlugin.width/375;var _txtSize=14*_scaleWidth;textElement.style.fontSize=_txtSize+"px"}if(this.jSPlugin.isInspect){textElement.style="text-align: center; color: white; font-size: 14px; white-space: nowrap;overflow: hidden;text-overflow: ellipsis; width: 70%;"}loadingItemContainer.appendChild(textElement);if(opt.type&&opt.type==2){var iconMargin=8;var iconWidth=24;if(!opt.isMobile){var _scaleWidth2=this.jSPlugin.width/1024;iconMargin=_scaleWidth2<1?16*_scaleWidth2:16;iconWidth=40*_scaleWidth2}else{var _scaleWidth3=this.jSPlugin.width/375;iconWidth=24*_scaleWidth3}var textElementTmd=document.getElementById("".concat(this.id,"-loading-item-txt"));var textElementIcon=document.createElement("div");textElementIcon.style="margin-bottom: ".concat(iconMargin,"px;width:").concat(iconWidth,"px;height:").concat(iconWidth,"px;");textElementIcon.innerHTML='<svg width="'.concat(iconWidth,'px" height="').concat(iconWidth,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <title></title>\n            <g id="gantan" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                <g id="Group">\n                    <polygon id="Path" points="0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"></polygon>\n                    <path d="M12,2.25000001 C17.2781739,2.25000001 21.5934661,6.44926243 21.746085,11.7237735 L21.746085,11.7237735 L21.75,12 C21.75,17.2781739 17.5507376,21.5934661 12.2762266,21.746085 L12.2762266,21.746085 L12,21.75 C6.72182614,21.75 2.40653397,17.5507376 2.25391507,12.2762266 L2.25391507,12.2762266 L2.25000001,12 C2.25000001,6.72182617 6.44926245,2.40653397 11.7237735,2.25391507 L11.7237735,2.25391507 Z M12,3.75000001 L11.7563186,3.75352261 C7.3032926,3.88243816 3.74992165,7.53391173 3.74992165,11.9891583 L3.74992165,11.9891583 L3.75352261,12.2436814 C3.88243816,16.6967075 7.5339117,20.2500784 11.9891583,20.2500784 L11.9891583,20.2500784 L12.2436814,20.2464774 C16.6967075,20.1175619 20.2500784,16.4660884 20.2500784,12.0108417 L20.2500784,12.0108417 L20.2464774,11.7563186 C20.1175619,7.30329258 16.4660883,3.75000001 12,3.75000001 L12,3.75000001 Z M11.999,15.2500001 L12.1156933,15.25672 C12.6133664,15.3144204 12.999993,15.7366564 12.999993,16.2500001 C12.999993,16.8022157 12.5522116,17.2500001 11.999993,17.2500001 C11.4477844,17.2500001 10.999993,16.8022116 11.0000197,16.2554347 C10.9962666,15.7375014 11.3873731,15.3105316 11.8897485,15.2559043 L11.999,15.2500001 Z M12,6.75000003 C12.3796958,6.75000003 12.693491,7.03215391 12.7431534,7.39822947 L12.75,7.50000003 L12.75,12.5 C12.75,12.9142136 12.4142136,13.25 12,13.25 C11.6203043,13.25 11.3065091,12.9678461 11.2568467,12.6017706 L11.25,12.5 L11.25,7.50000003 C11.25,7.08578647 11.5857865,6.75000003 12,6.75000003 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                </g>\n            </g>\n        </svg>');loadingItemContainer.insertBefore(textElementIcon,textElementTmd)}else{var textElementBtn=document.createElement("div");textElementBtn.id="".concat(this.id,"-loading-item-btn-wrap");textElementBtn.innerHTML='\n          <div id="'.concat(this.id,'-loading-item-btn" style="display: ').concat(this.jSPlugin.isInspect&&this.jSPlugin.Theme.inspectMode=="map"?"none":"block",' ">').concat(opt.btnName,'</div>\n          <svg id="').concat(this.id,'-loading-item-btn-svg" style="display: ').concat(this.jSPlugin.isInspect&&this.jSPlugin.Theme.inspectMode=="map"?"block":"none",' ; margin: 0 auto" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="13" height="13" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <path fill="#fff" d="M960 416V192l-73.056 73.056a447.712 447.712 0 0 0-373.6-201.088C265.92 63.968 65.312 264.544 65.312 512S265.92 960.032 513.344 960.032a448.064 448.064 0 0 0 415.232-279.488 38.368 38.368 0 1 0-71.136-28.896 371.36 371.36 0 0 1-344.096 231.584C308.32 883.232 142.112 717.024 142.112 512S308.32 140.768 513.344 140.768c132.448 0 251.936 70.08 318.016 179.84L736 416h224z"></path>\n          </svg>\n        ');if(opt.isMobile){if(opt.type==1){textElementBtn.style="color:white;width:100px;height:30px;border-radius: 10px;background: rgba(255,255,255,0.25);text-align:center;line-height:30px;margin-top:9px;font-size:14px;-webkit-tap-highlight-color: transparent;"}else{textElementBtn.style="border: 1px solid rgba(204,204,204,1);color:white;width:80px;height:24px;border-radius: 12px;background: rgba(255,255,255,0.1);text-align:center;line-height:24px;margin-top:20px;font-size:12px;-webkit-tap-highlight-color: transparent;"}}else{var _scaleWidth4=this.jSPlugin.width/1024;textElementBtn.style="color:#648FFC;margin-top:16px;cursor: pointer;font-size:".concat(24*_scaleWidth4,"px;");if(this.jSPlugin.isInspect&&this.jSPlugin.Theme.inspectMode=="video"){textElementBtn.style="border: 1px solid rgba(255,255,255,1);color:white; cursor: pointer;text-align: center;width:80px;height:32px;border-radius:2px; text-align:center;line-height:32px;margin-top:16px;font-size:14px;-webkit-tap-highlight-color: transparent;"}}loadingItemContainer.appendChild(textElementBtn);if(opt.isMobile&&opt.type==1){var _textElementTmd=document.getElementById("".concat(this.id,"-loading-item-txt"));var textElementIcon=document.createElement("div");textElementIcon.style="margin-bottom: 8px;width:24px;height:24px;";textElementIcon.innerHTML='<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title></title>\n              <g id="gantan" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="Group">\n                      <polygon id="Path" points="0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"></polygon>\n                      <path d="M12,2.25000001 C17.2781739,2.25000001 21.5934661,6.44926243 21.746085,11.7237735 L21.746085,11.7237735 L21.75,12 C21.75,17.2781739 17.5507376,21.5934661 12.2762266,21.746085 L12.2762266,21.746085 L12,21.75 C6.72182614,21.75 2.40653397,17.5507376 2.25391507,12.2762266 L2.25391507,12.2762266 L2.25000001,12 C2.25000001,6.72182617 6.44926245,2.40653397 11.7237735,2.25391507 L11.7237735,2.25391507 Z M12,3.75000001 L11.7563186,3.75352261 C7.3032926,3.88243816 3.74992165,7.53391173 3.74992165,11.9891583 L3.74992165,11.9891583 L3.75352261,12.2436814 C3.88243816,16.6967075 7.5339117,20.2500784 11.9891583,20.2500784 L11.9891583,20.2500784 L12.2436814,20.2464774 C16.6967075,20.1175619 20.2500784,16.4660884 20.2500784,12.0108417 L20.2500784,12.0108417 L20.2464774,11.7563186 C20.1175619,7.30329258 16.4660883,3.75000001 12,3.75000001 L12,3.75000001 Z M11.999,15.2500001 L12.1156933,15.25672 C12.6133664,15.3144204 12.999993,15.7366564 12.999993,16.2500001 C12.999993,16.8022157 12.5522116,17.2500001 11.999993,17.2500001 C11.4477844,17.2500001 10.999993,16.8022116 11.0000197,16.2554347 C10.9962666,15.7375014 11.3873731,15.3105316 11.8897485,15.2559043 L11.999,15.2500001 Z M12,6.75000003 C12.3796958,6.75000003 12.693491,7.03215391 12.7431534,7.39822947 L12.75,7.50000003 L12.75,12.5 C12.75,12.9142136 12.4142136,13.25 12,13.25 C11.6203043,13.25 11.3065091,12.9678461 11.2568467,12.6017706 L11.25,12.5 L11.25,7.50000003 C11.25,7.08578647 11.5857865,6.75000003 12,6.75000003 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                  </g>\n              </g>\n          </svg>';loadingItemContainer.insertBefore(textElementIcon,_textElementTmd)}if(document.getElementById("".concat(this.id,"-loading-item-btn-wrap"))){document.getElementById("".concat(this.id,"-loading-item-btn-wrap")).onclick=function(){_this2.jSPlugin.play();_this2.loadingClear();_this2.loadingStart(_this2.id);_this2.loadingSetText({text:"视频加载中"})}}}this.state.text=opt.text;if(opt.delayClear){setTimeout(function(){_this2.loadingClearText()},parseInt(opt.delayClear))}}}},{key:"loadingClearText",value:function loadingClearText(){if(document.getElementById("".concat(this.id,"-loading-item-0"))){var elements=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes;if(elements.length>1){elements[1].parentNode.removeChild(elements[1])}else{elements[0]&&elements[0].parentNode.removeChild(elements[0])}}}},{key:"loadingClear",value:function loadingClear(){if(document.getElementById("".concat(this.id,"-loading-item-0"))){var elements=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes;for(var i=elements.length-1;i>=0;i--){elements[i].parentNode.removeChild(elements[i])}if(document.getElementById("".concat(this.id,"-loading-id-0"))){document.getElementById("".concat(this.id,"-loading-id-0")).style.background="none"}if(document.getElementById("loading-icon")){document.getElementById("loading-icon").parentNode.removeChild(document.getElementById("loading-icon"))}}}},{key:"loadingEnd",value:function loadingEnd(){var loadingItemContainerDOM=document.getElementById("".concat(this.id,"-loading-item-0"));if(loadingItemContainerDOM){loadingItemContainerDOM.parentNode.removeChild(loadingItemContainerDOM);var loadingContainerDOM=document.getElementById("".concat(this.id,"-loading-id-0"));if(loadingContainerDOM&&loadingContainerDOM.children.length===0){loadingContainerDOM.parentNode.removeChild(loadingContainerDOM)}}document.getElementById("".concat(this.id,"-loading-item-0")).style.background="none"}}]);return Status}();var Message$1=function(){function Message(jSPlugin,id){_classCallCheck$1(this,Message);this.id=id;this.jSPlugin=jSPlugin;this.timer=null;this.state={play:false,loading:false}}_createClass$1(Message,[{key:"default",value:function _default(msg,dom){var _this=this;var msgId="msgId";var parentDom=dom||document.getElementById("".concat(this.id,"-wrap"));if(document.getElementById("".concat(this.id,"-").concat(msgId))){parentDom.removeChild(document.getElementById("".concat(this.id,"-").concat(msgId)))}var messageDOM=document.createElement("div");messageDOM.id="".concat(this.id,"-").concat(msgId);messageDOM.style="position: absolute;top: 50%;left:calc(50% - ".concat(msg.length*14/2,"px);padding: 4px 16px;background: #00000080;color: #FFFFFF;font-size: 14px");messageDOM.innerHTML=msg;parentDom.appendChild(messageDOM);if(this.timer){clearTimeout(this.timer)}this.timer=setTimeout(function(){parentDom.removeChild(document.getElementById("".concat(_this.id,"-").concat(msgId)))},2e3)}}]);return Message}();var data$d=[{moduleCode:"",detailCode:"405984",description:"",solution:"",updateTime:1559564188e3},{moduleCode:"",detailCode:"10035",description:"获取子账户AccessToken异常,子账户不存在或子账户不属于该开发者",solution:"",updateTime:1559551958e3},{moduleCode:"",detailCode:"1052674",description:"获取本地录像失败",solution:"",updateTime:1558579653e3},{moduleCode:"",detailCode:"395547",description:"",solution:"",updateTime:1557367296e3},{moduleCode:"",detailCode:"12",description:"",solution:"",updateTime:1557229476e3},{moduleCode:"",detailCode:"10052",description:"余额不足",solution:"",updateTime:1557121463e3},{moduleCode:"",detailCode:"20108",description:"当前用户和所添加用户不是好友关系",solution:"",updateTime:1556541725e3},{moduleCode:"",detailCode:"10009",description:"",solution:"",updateTime:1556422452e3},{moduleCode:"",detailCode:"320001",description:"通道不存在",solution:"请检查录像机的关联状态是否正常，没有摄像头的通道无法播放",updateTime:1556419044e3},{moduleCode:"",detailCode:"120001",description:"通道不存在",solution:"请检查录像机的关联状态是否正常，没有摄像头的通道无法播放",updateTime:155641903e4},{moduleCode:"",detailCode:"320049",description:"",solution:"",updateTime:1556272984e3},{moduleCode:"",detailCode:"380227",description:"",solution:"",updateTime:1556264379e3},{moduleCode:"",detailCode:"10033",description:"policy参数信息异常",solution:"",updateTime:1555922124e3},{moduleCode:"",detailCode:"10065",description:"weakAppKey 不属于accessToken对应的用户",solution:"",updateTime:1555497522e3},{moduleCode:"",detailCode:"100001",description:"",solution:"",updateTime:1555141776e3},{moduleCode:"",detailCode:"395558",description:"",solution:"",updateTime:1554987121e3},{moduleCode:"",detailCode:"70001",description:"智能家居买断用户设备受到限制,建议合理选择pagestart和pageSize",solution:"",updateTime:1554691023e3},{moduleCode:"",detailCode:"170001",description:"",solution:"",updateTime:1554691023e3},{moduleCode:"",detailCode:"1012",description:"重置失败",solution:"",updateTime:1554645841e3},{moduleCode:"",detailCode:"1043",description:"重置失败",solution:"",updateTime:1554645834e3},{moduleCode:"",detailCode:"60060",description:"直播功能未开通",solution:"通道未开通直播功能，请先开通直播",updateTime:1554346018e3},{moduleCode:"",detailCode:"380203",description:"",solution:"",updateTime:1554093666e3},{moduleCode:"",detailCode:"399048",description:"免费版并发数达到上限，请升级企业版使用多并发能力",solution:"升级成为企业版套餐即可取消并发数限制",updateTime:1553839878e3},{moduleCode:"",detailCode:"60007",description:"预置点个数超过最大值",solution:"",updateTime:1553671316e3},{moduleCode:"",detailCode:"1005",description:"",solution:"",updateTime:1553513701e3},{moduleCode:"",detailCode:"20605",description:"其他用户正在认证中",solution:"",updateTime:1552976317e3},{moduleCode:"",detailCode:"90004",description:"当前型号设备暂时不支持AI任务：CS-C3W-3B1WFR-YGL",solution:"",updateTime:1552898525e3},{moduleCode:"",detailCode:"60046",description:"添加的设备的IP和本设备的IP冲突",solution:"",updateTime:1552872372e3},{moduleCode:"",detailCode:"3",description:"修改视频清晰度失败!",solution:"",updateTime:1552440229e3},{moduleCode:"",detailCode:"1013",description:"",solution:"",updateTime:1552035069e3},{moduleCode:"",detailCode:"370007",description:"",solution:"",updateTime:1551852327e3},{moduleCode:"",detailCode:"-1",description:"",solution:"",updateTime:1551752889e3},{moduleCode:"",detailCode:"30005",description:"弱账户不存在",solution:"",updateTime:1551422358e3},{moduleCode:"",detailCode:"90006",description:"用户操作AI任务受限",solution:"",updateTime:155107332e4},{moduleCode:"",detailCode:"60203",description:"未开通相关服务",solution:"",updateTime:155062307e4},{moduleCode:"",detailCode:"10002",description:"accessToken过期或异常",solution:"",updateTime:1550300346e3},{moduleCode:"",detailCode:"380339",description:"",solution:"",updateTime:1549889458e3},{moduleCode:"",detailCode:"90002",description:"AI任务设备配置数达到上限：3",solution:"",updateTime:1549071664e3},{moduleCode:"",detailCode:"380008",description:"",solution:"",updateTime:1549005979e3},{moduleCode:"",detailCode:"320227",description:"",solution:"",updateTime:1548739731e3},{moduleCode:"",detailCode:"60059",description:"ezopen地址均不可用",solution:"",updateTime:154839535e4},{moduleCode:"",detailCode:"10005",description:"appKey异常",solution:"",updateTime:1548317858e3},{moduleCode:"",detailCode:"60045",description:"添加的设备的IP和其他通道的IP冲突",solution:"",updateTime:1548155085e3},{moduleCode:"",detailCode:"60047",description:"码流类型不支持",solution:"",updateTime:1547962108e3},{moduleCode:"",detailCode:"60041",description:"添加的设备被其他设备关联或响应超时",solution:"",updateTime:154796098e4},{moduleCode:"",detailCode:"110029",description:"个人用户接口调用频率超限",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1547606859e3},{moduleCode:"",detailCode:"380355",description:"设备直连推流异常结束",solution:"",updateTime:1547106294e3},{moduleCode:"",detailCode:"320081",description:"",solution:"",updateTime:1547106279e3},{moduleCode:"",detailCode:"60035",description:"购买云存储服务失败",solution:"",updateTime:1547026959e3},{moduleCode:"",detailCode:"90005",description:"设备已存在：C75714141",solution:"",updateTime:1546940622e3},{moduleCode:"",detailCode:"1053445",description:"该时间段没有录像片段",solution:"",updateTime:1546935727e3},{moduleCode:"",detailCode:"90007",description:"设备未加入到AI任务",solution:"",updateTime:1546932948e3},{moduleCode:"",detailCode:"326000",description:"",solution:"",updateTime:1546823143e3},{moduleCode:"",detailCode:"1021",description:"重置失败",solution:"",updateTime:1546781152e3},{moduleCode:"",detailCode:"2001",description:"删除设备失败!",solution:"",updateTime:1546422886e3},{moduleCode:"",detailCode:"380425",description:"",solution:"",updateTime:1546407694e3},{moduleCode:"",detailCode:"120097",description:"",solution:"",updateTime:1546085995e3},{moduleCode:"",detailCode:"10059",description:"requestId已存在",solution:"",updateTime:1545824509e3},{moduleCode:"",detailCode:"1154723",description:"",solution:"",updateTime:1545795209e3},{moduleCode:"",detailCode:"60043",description:"添加的设备超出最大数量",solution:"",updateTime:1545493607e3},{moduleCode:"",detailCode:"1152677",description:"",solution:"",updateTime:1545313404e3},{moduleCode:"",detailCode:"20097",description:"设备添加异常,设备验证码为ABCDEF或设备被N1，R1关联",solution:"",updateTime:1545310795e3},{moduleCode:"",detailCode:"10060",description:"设备不支持该云存储类型",solution:"",updateTime:1545309064e3},{moduleCode:"",detailCode:"20102",description:"无相应邀请信息，无法接受邀请",solution:"",updateTime:1545204966e3},{moduleCode:"",detailCode:"10053",description:"云存储开通中",solution:"",updateTime:1545100293e3},{moduleCode:"",detailCode:"20401",description:"用户云空间信息不存在",solution:"",updateTime:154501788e4},{moduleCode:"",detailCode:"20600",description:"临时密码数已达上限",solution:"",updateTime:1544873457e3},{moduleCode:"",detailCode:"901",description:"",solution:"",updateTime:1544693519e3},{moduleCode:"",detailCode:"60210",description:"图片数据错误",solution:"",updateTime:1544604457e3},{moduleCode:"",detailCode:"10013",description:"您的应用没有权限调用",solution:"",updateTime:1544416237e3},{moduleCode:"",detailCode:"70007",description:"授权码不存在",solution:"",updateTime:1544179533e3},{moduleCode:"",detailCode:"10015",description:"授权地址不存在",solution:"",updateTime:154416324e4},{moduleCode:"",detailCode:"320423",description:"",solution:"",updateTime:1544100685e3},{moduleCode:"",detailCode:"370009",description:"",solution:"",updateTime:1544077151e3},{moduleCode:"",detailCode:"10031",description:"子账户或萤石用户没有权限",solution:"",updateTime:1543990462e3},{moduleCode:"",detailCode:"10055",description:"设备不支持试用云存储服务",solution:"",updateTime:1543986292e3},{moduleCode:"",detailCode:"60042",description:"添加的设备密码错误",solution:"",updateTime:1543710913e3},{moduleCode:"",detailCode:"60082",description:"设备正在响应本次声源定位",solution:"",updateTime:1543647426e3},{moduleCode:"",detailCode:"10056",description:"设备不支持云存储服务转出",solution:"",updateTime:1543558342e3},{moduleCode:"",detailCode:"20104",description:"好友不存在",solution:"",updateTime:1543492403e3},{moduleCode:"",detailCode:"20111",description:"好友不是等待验证状态，无法接受邀请",solution:"",updateTime:1543492365e3},{moduleCode:"",detailCode:"20107",description:"不能添加自己为好友",solution:"",updateTime:1543480986e3},{moduleCode:"",detailCode:"1",description:"设备返回其他错误",solution:"",updateTime:1543459921e3},{moduleCode:"",detailCode:"60084",description:"当前正在关闭隐私遮蔽",solution:"",updateTime:1543456515e3},{moduleCode:"",detailCode:"380255",description:"",solution:"",updateTime:1543411652e3},{moduleCode:"",detailCode:"20015",description:"设备不支持",solution:"",updateTime:1543390936e3},{moduleCode:"",detailCode:"30003",description:"手机验证码错误",solution:"",updateTime:1543389137e3},{moduleCode:"",detailCode:"20615",description:"锁用户已存在",solution:"",updateTime:1543388325e3},{moduleCode:"",detailCode:"60061",description:"账户流量已超出或未购买，限制开通",solution:"",updateTime:1543372581e3},{moduleCode:"",detailCode:"60020",description:"设备不支持该信令",solution:"",updateTime:1543321636e3},{moduleCode:"",detailCode:"320146",description:"",solution:"",updateTime:1543318472e3},{moduleCode:"",detailCode:"60018",description:"设备升级失败",solution:"",updateTime:1543304928e3},{moduleCode:"",detailCode:"60044",description:"添加的设备网络不可达超时",solution:"",updateTime:1543304102e3},{moduleCode:"",detailCode:"20619",description:"主用户无法删除",solution:"",updateTime:1543290219e3},{moduleCode:"",detailCode:"20608",description:"锁用户不存在",solution:"",updateTime:154328195e4},{moduleCode:"",detailCode:"20609",description:"设备响应超时,门锁通信故障或者电量不足,请重试.",solution:"",updateTime:1543281601e3},{moduleCode:"",detailCode:"1049954",description:"升级设备失败",solution:"",updateTime:1543279264e3},{moduleCode:"",detailCode:"60009",description:"正在调用预置点",solution:"",updateTime:1543238114e3},{moduleCode:"",detailCode:"1052677",description:"获取本地录像失败",solution:"",updateTime:1543207604e3},{moduleCode:"",detailCode:"327000",description:"",solution:"",updateTime:1543196609e3},{moduleCode:"",detailCode:"20021",description:"设备在线，未被用户添加",solution:"",updateTime:1543193436e3},{moduleCode:"",detailCode:"20202",description:"操作留言信息失败",solution:"",updateTime:1543191562e3},{moduleCode:"",detailCode:"1052678",description:"获取本地录像失败",solution:"",updateTime:1543132218e3},{moduleCode:"",detailCode:"1054723",description:"格式化设备失败",solution:"",updateTime:1543129833e3},{moduleCode:"",detailCode:"20109",description:"对应分享不存在",solution:"",updateTime:1543129111e3},{moduleCode:"",detailCode:"60026",description:"设备处于隐私遮蔽状态",solution:"",updateTime:1543110403e3},{moduleCode:"",detailCode:"60083",description:"当前正在开启隐私遮蔽",solution:"",updateTime:1543071148e3},{moduleCode:"",detailCode:"60001",description:"用户无云台控制权限",solution:"",updateTime:1543059167e3},{moduleCode:"",detailCode:"2003",description:"设备不在线",solution:"",updateTime:1543051046e3},{moduleCode:"",detailCode:"-24",description:"设置设备enable错误",solution:"",updateTime:1543042701e3},{moduleCode:"",detailCode:"10018",description:"",solution:"",updateTime:1543041564e3},{moduleCode:"",detailCode:"20103",description:"好友已存在",solution:"",updateTime:154303843e4},{moduleCode:"",detailCode:"70010",description:"授权异常请重试",solution:"",updateTime:154303559e4},{moduleCode:"",detailCode:"60056",description:"删除设备失败",solution:"",updateTime:1543031275e3},{moduleCode:"",detailCode:"60040",description:"添加的设备不在同一局域网",solution:"",updateTime:154303121e4},{moduleCode:"",detailCode:"60019",description:"加密已开启",solution:"",updateTime:1543029931e3},{moduleCode:"",detailCode:"1054722",description:"格式化设备失败",solution:"",updateTime:1543028537e3},{moduleCode:"",detailCode:"20016",description:"当前设备正在格式化",solution:"",updateTime:1543028537e3},{moduleCode:"",detailCode:"10024",description:"透明通道权限校验不通过",solution:"",updateTime:154302554e4},{moduleCode:"",detailCode:"6002",description:"删除设备失败!",solution:"",updateTime:1543025026e3},{moduleCode:"",detailCode:"1011",description:"验证码错误！",solution:"",updateTime:1543016865e3},{moduleCode:"",detailCode:"60032",description:"卡密已使用",solution:"",updateTime:1543006668e3},{moduleCode:"",detailCode:"10034",description:"子账号已存在",solution:"",updateTime:1542989194e3},{moduleCode:"",detailCode:"20301",description:"根据uuid查询联动信息不存在",solution:"",updateTime:1542988651e3},{moduleCode:"",detailCode:"1041",description:"获取验证码过于频繁",solution:"",updateTime:1542980953e3},{moduleCode:"",detailCode:"10012",description:"该appkey下已绑定重复的phone！",solution:"",updateTime:15429808e5},{moduleCode:"",detailCode:"1008",description:"phone不合法！",solution:"",updateTime:1542979812e3},{moduleCode:"",detailCode:"60023",description:"订阅操作失败",solution:"",updateTime:1542979006e3},{moduleCode:"",detailCode:"5",description:"设备返回其他错误",solution:"",updateTime:1542977828e3},{moduleCode:"",detailCode:"60006",description:"云台当前操作失败",solution:"",updateTime:1542977598e3},{moduleCode:"",detailCode:"131",description:"修改视频清晰度失败!",solution:"",updateTime:1542977246e3},{moduleCode:"",detailCode:"10019",description:"密码错误",solution:"",updateTime:1542976628e3},{moduleCode:"",detailCode:"10004",description:"用户不存在",solution:"",updateTime:1542976268e3},{moduleCode:"",detailCode:"20201",description:"操作报警信息失败",solution:"",updateTime:1542975906e3},{moduleCode:"",detailCode:"20024",description:"设备不在线，已经被别的用户添加",solution:"",updateTime:1542975858e3},{moduleCode:"",detailCode:"60004",description:"设备云台旋转达到左限位",solution:"",updateTime:1542975207e3},{moduleCode:"",detailCode:"1052679",description:"修改视频清晰度失败!",solution:"",updateTime:1542974886e3},{moduleCode:"",detailCode:"20031",description:"请在萤石客户端关闭终端绑定",solution:"",updateTime:1542974756e3},{moduleCode:"",detailCode:"1053825",description:"获取本地录像失败",solution:"",updateTime:1542974692e3},{moduleCode:"",detailCode:"60011",description:"预置点不存在",solution:"",updateTime:1542974414e3},{moduleCode:"",detailCode:"1052936",description:"修改视频清晰度失败!",solution:"",updateTime:154297439e4},{moduleCode:"",detailCode:"1016",description:"",solution:"",updateTime:1542974273e3},{moduleCode:"",detailCode:"10032",description:"子账号不存在",solution:"",updateTime:1542973906e3},{moduleCode:"",detailCode:"20013",description:"设备已被别人添加",solution:"",updateTime:1542973817e3},{moduleCode:"",detailCode:"50000",description:"服务器错误!",solution:"",updateTime:1542973801e3},{moduleCode:"",detailCode:"60010",description:"该预置点已经是当前位置",solution:"",updateTime:15429738e5},{moduleCode:"",detailCode:"60003",description:"设备云台旋转达到下限位",solution:"",updateTime:154297377e4},{moduleCode:"",detailCode:"4",description:"设备返回其他错误",solution:"",updateTime:1542973755e3},{moduleCode:"",detailCode:"60016",description:"加密未开启，无需关闭",solution:"",updateTime:1542973753e3},{moduleCode:"",detailCode:"60002",description:"设备云台旋转达到上限位",solution:"",updateTime:1542973742e3},{moduleCode:"",detailCode:"20023",description:"设备不在线，未被用户添加",solution:"",updateTime:1542973685e3},{moduleCode:"",detailCode:"10008",description:"",solution:"",updateTime:1542973676e3},{moduleCode:"",detailCode:"20010",description:"设备验证码错误",solution:"",updateTime:1542973658e3},{moduleCode:"",detailCode:"60005",description:"设备云台旋转达到右限位",solution:"",updateTime:1542973657e3},{moduleCode:"",detailCode:"20017",description:"设备已经被自己添加",solution:"",updateTime:1542973648e3},{moduleCode:"",detailCode:"20020",description:"设备在线，已经被自己添加",solution:"",updateTime:1542973533e3},{moduleCode:"",detailCode:"20029",description:"设备不在线，已经被自己添加",solution:"",updateTime:154297353e4},{moduleCode:"",detailCode:"10014",description:"APPKEY下对应的第三方userId和phone未绑定！",solution:"",updateTime:1542973499e3},{moduleCode:"",detailCode:"20002",description:"设备不存在",solution:"",updateTime:1542973499e3},{moduleCode:"",detailCode:"10030",description:"appkey和appsecret不匹配",solution:"",updateTime:154297349e4},{moduleCode:"",detailCode:"20022",description:"设备在线，已经被别的用户添加",solution:"",updateTime:1542973486e3},{moduleCode:"",detailCode:"20008",description:"设备响应超时",solution:"",updateTime:1542973484e3},{moduleCode:"",detailCode:"20032",description:"该用户下通道不存在",solution:"",updateTime:1542973481e3},{moduleCode:"",detailCode:"20006",description:"网络异常",solution:"",updateTime:1542973475e3},{moduleCode:"",detailCode:"20014",description:"deviceSerial不合法!",solution:"",updateTime:1542973454e3},{moduleCode:"",detailCode:"20007",description:"设备不在线",solution:"",updateTime:1542973454e3},{moduleCode:"",detailCode:"20018",description:"该用户不拥有该设备",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"10010",description:"",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"10011",description:"未绑定！",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"20001",description:"通道不存在!",solution:"",updateTime:1542973452e3},{moduleCode:"",detailCode:"10017",description:"appKey不存在",solution:"",updateTime:1542973451e3},{moduleCode:"",detailCode:"400259",description:"",solution:"",updateTime:1542875643e3},{moduleCode:"",detailCode:"400004",description:"",solution:"",updateTime:1542873364e3},{moduleCode:"",detailCode:"3840",description:"",solution:"",updateTime:154186e7},{moduleCode:"",detailCode:"-1017",description:"",solution:"",updateTime:1541733663e3},{moduleCode:"",detailCode:"320025",description:"",solution:"",updateTime:1541078281e3},{moduleCode:"",detailCode:"320024",description:"",solution:"",updateTime:1540801374e3},{moduleCode:"",detailCode:"321002",description:"",solution:"",updateTime:1540631734e3},{moduleCode:"",detailCode:"321000",description:"",solution:"",updateTime:1540609178e3},{moduleCode:"",detailCode:"321022",description:"",solution:"",updateTime:1540548345e3},{moduleCode:"",detailCode:"321016",description:"",solution:"",updateTime:1540287187e3},{moduleCode:"",detailCode:"320023",description:"",solution:"",updateTime:1539825993e3},{moduleCode:"",detailCode:"-1016",description:"",solution:"",updateTime:1539584931e3},{moduleCode:"",detailCode:"8",description:"",solution:"",updateTime:1539391812e3},{moduleCode:"",detailCode:"1075127593",description:"",solution:"",updateTime:1538959251e3},{moduleCode:"",detailCode:"380421",description:"",solution:"",updateTime:1537288465e3},{moduleCode:"",detailCode:"322000",description:"麦克风权限未开启",solution:"",updateTime:1536820136e3},{moduleCode:"",detailCode:"1152678",description:"",solution:"",updateTime:1536738348e3},{moduleCode:"",detailCode:"320047",description:"",solution:"",updateTime:1536664472e3},{moduleCode:"",detailCode:"327006",description:"",solution:"",updateTime:153613612e4},{moduleCode:"",detailCode:"1074807593",description:"",solution:"",updateTime:1536135035e3},{moduleCode:"",detailCode:"320291",description:"",solution:"",updateTime:1536110836e3},{moduleCode:"",detailCode:"320045",description:"",solution:"",updateTime:1535963775e3},{moduleCode:"",detailCode:"370004",description:"",solution:"",updateTime:1535883699e3},{moduleCode:"",detailCode:"1149954",description:"",solution:"",updateTime:1535700674e3},{moduleCode:"",detailCode:"320053",description:"",solution:"",updateTime:1535681079e3},{moduleCode:"",detailCode:"400000",description:"",solution:"",updateTime:1535532332e3},{moduleCode:"",detailCode:"110028",description:"个人版抓图接口日调用次数超出限制",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348756e3},{moduleCode:"",detailCode:"110027",description:"个人版帐号数量超出安全限制，无法调用",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348734e3},{moduleCode:"",detailCode:"110026",description:"设备数量超出个人版限制，当前设备无法操作",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348588e3},{moduleCode:"",detailCode:"100000",description:"",solution:"",updateTime:1534980008e3},{moduleCode:"",detailCode:"324004",description:"",solution:"",updateTime:1534927762e3},{moduleCode:"",detailCode:"360104",description:"",solution:"",updateTime:1534761006e3},{moduleCode:"",detailCode:"320204",description:"",solution:"",updateTime:1534584221e3},{moduleCode:"",detailCode:"380001",description:"",solution:"",updateTime:1534404715e3},{moduleCode:"",detailCode:"380204",description:"",solution:"",updateTime:1534401682e3},{moduleCode:"",detailCode:"328006",description:"",solution:"",updateTime:1534144407e3},{moduleCode:"",detailCode:"321703",description:"",solution:"",updateTime:1534127274e3},{moduleCode:"",detailCode:"321510",description:"",solution:"",updateTime:1533428892e3},{moduleCode:"",detailCode:"321006",description:"",solution:"",updateTime:1533036916e3},{moduleCode:"",detailCode:"50009",description:"",solution:"",updateTime:1532078548e3},{moduleCode:"",detailCode:"50007",description:"",solution:"",updateTime:153199172e4},{moduleCode:"",detailCode:"50018",description:"",solution:"",updateTime:1531912829e3},{moduleCode:"",detailCode:"380451",description:"",solution:"",updateTime:15316157e5},{moduleCode:"",detailCode:"380336",description:"",solution:"",updateTime:1531231721e3},{moduleCode:"",detailCode:"360020",description:"",solution:"",updateTime:1531117554e3},{moduleCode:"",detailCode:"380418",description:"",solution:"",updateTime:153110707e4},{moduleCode:"",detailCode:"1153445",description:"设备在该时间段内没有录像",solution:"",updateTime:1530944007e3},{moduleCode:"",detailCode:"110007",description:"调用接口总次数达到上限",solution:"请升级企业版，获取更高能力",updateTime:1530935584e3},{moduleCode:"",detailCode:"360019",description:"",solution:"",updateTime:1530869771e3},{moduleCode:"",detailCode:"360100",description:"",solution:"",updateTime:1530786188e3},{moduleCode:"",detailCode:"380042",description:"",solution:"",updateTime:1530775199e3},{moduleCode:"",detailCode:"320355",description:"",solution:"",updateTime:1530716074e3},{moduleCode:"",detailCode:"100003",description:"",solution:"",updateTime:1530232541e3},{moduleCode:"",detailCode:"371026",description:"",solution:"",updateTime:15301926e5},{moduleCode:"",detailCode:"102",description:"",solution:"",updateTime:1529895641e3},{moduleCode:"",detailCode:"380201",description:"",solution:"",updateTime:1529740929e3},{moduleCode:"",detailCode:"320054",description:"",solution:"",updateTime:1529544875e3},{moduleCode:"",detailCode:"500101",description:"",solution:"",updateTime:1529485953e3},{moduleCode:"",detailCode:"321001",description:"",solution:"",updateTime:1529411048e3},{moduleCode:"",detailCode:"321508",description:"",solution:"",updateTime:1529393279e3},{moduleCode:"",detailCode:"405991",description:"",solution:"",updateTime:1529380238e3},{moduleCode:"",detailCode:"380461",description:"",solution:"",updateTime:1529130941e3},{moduleCode:"",detailCode:"-1019",description:"",solution:"",updateTime:1529057245e3},{moduleCode:"",detailCode:"322009",description:"",solution:"",updateTime:1528965717e3},{moduleCode:"",detailCode:"324005",description:"",solution:"",updateTime:1528950153e3},{moduleCode:"",detailCode:"325000",description:"",solution:"",updateTime:1528947143e3},{moduleCode:"",detailCode:"326032",description:"",solution:"",updateTime:1528872971e3},{moduleCode:"",detailCode:"325032",description:"",solution:"",updateTime:1528863189e3},{moduleCode:"",detailCode:"328000",description:"",solution:"",updateTime:1528794505e3},{moduleCode:"",detailCode:"53",description:"",solution:"",updateTime:1528693249e3},{moduleCode:"",detailCode:"-1020",description:"",solution:"",updateTime:152849944e4},{moduleCode:"",detailCode:"329032",description:"",solution:"",updateTime:1528446301e3},{moduleCode:"",detailCode:"-1202",description:"",solution:"",updateTime:152843982e4},{moduleCode:"",detailCode:"2",description:"",solution:"",updateTime:1528434175e3},{moduleCode:"",detailCode:"1152936",description:"",solution:"",updateTime:1528345986e3},{moduleCode:"",detailCode:"328011",description:"",solution:"",updateTime:15283386e5},{moduleCode:"",detailCode:"28",description:"",solution:"",updateTime:152833753e4},{moduleCode:"",detailCode:"320356",description:"",solution:"",updateTime:1528188693e3},{moduleCode:"",detailCode:"320357",description:"",solution:"",updateTime:1528188517e3},{moduleCode:"",detailCode:"405800",description:"",solution:"",updateTime:1528168732e3},{moduleCode:"",detailCode:"405996",description:"",solution:"",updateTime:1528168686e3},{moduleCode:"",detailCode:"380357",description:"",solution:"",updateTime:1528011565e3},{moduleCode:"",detailCode:"328022",description:"",solution:"",updateTime:1527929065e3},{moduleCode:"",detailCode:"380003",description:"",solution:"",updateTime:1527927819e3},{moduleCode:"",detailCode:"50004",description:"",solution:"",updateTime:1527770643e3},{moduleCode:"",detailCode:"50011",description:"",solution:"",updateTime:1527770635e3},{moduleCode:"",detailCode:"370017",description:"",solution:"",updateTime:1527739514e3},{moduleCode:"",detailCode:"327032",description:"",solution:"",updateTime:1527726704e3},{moduleCode:"",detailCode:"324001",description:"",solution:"",updateTime:1527681892e3},{moduleCode:"",detailCode:"405997",description:"",solution:"",updateTime:1527653408e3},{moduleCode:"",detailCode:"405995",description:"",solution:"",updateTime:1527647283e3},{moduleCode:"",detailCode:"1153825",description:"",solution:"",updateTime:1527601747e3},{moduleCode:"",detailCode:"328002",description:"",solution:"",updateTime:1527495292e3},{moduleCode:"",detailCode:"1152679",description:"",solution:"",updateTime:1527486665e3},{moduleCode:"",detailCode:"380356",description:"",solution:"",updateTime:1527125669e3},{moduleCode:"",detailCode:"328032",description:"",solution:"",updateTime:1527069382e3},{moduleCode:"",detailCode:"22",description:"",solution:"",updateTime:1527049826e3},{moduleCode:"",detailCode:"9",description:"",solution:"",updateTime:1527006778e3},{moduleCode:"",detailCode:"89",description:"",solution:"",updateTime:1526622784e3},{moduleCode:"",detailCode:"328016",description:"",solution:"",updateTime:1526452365e3},{moduleCode:"",detailCode:"368005",description:"",solution:"",updateTime:1525921264e3},{moduleCode:"",detailCode:"0",description:"",solution:"",updateTime:1525920242e3},{moduleCode:"",detailCode:"380006",description:"",solution:"",updateTime:1525918868e3},{moduleCode:"",detailCode:"310",description:"",solution:"",updateTime:1525834436e3},{moduleCode:"",detailCode:"360011",description:"",solution:"",updateTime:1525681552e3},{moduleCode:"",detailCode:"170005",description:"",solution:"",updateTime:15254339e5},{moduleCode:"",detailCode:"50023",description:"",solution:"",updateTime:1525403338e3},{moduleCode:"",detailCode:"100131",description:"",solution:"",updateTime:1525229691e3},{moduleCode:"",detailCode:"-1018",description:"",solution:"",updateTime:1525142341e3},{moduleCode:"",detailCode:"362026",description:"",solution:"",updateTime:1524882677e3},{moduleCode:"",detailCode:"368007",description:"",solution:"",updateTime:1524832269e3},{moduleCode:"",detailCode:"54",description:"",solution:"",updateTime:1524793646e3},{moduleCode:"",detailCode:"1154722",description:"",solution:"",updateTime:1524620807e3},{moduleCode:"",detailCode:"320229",description:"",solution:"",updateTime:1524551682e3},{moduleCode:"",detailCode:"360012",description:"",solution:"",updateTime:1524472094e3},{moduleCode:"",detailCode:"380229",description:"",solution:"",updateTime:1524110755e3},{moduleCode:"",detailCode:"360016",description:"",solution:"",updateTime:1523933518e3},{moduleCode:"",detailCode:"-1003",description:"",solution:"",updateTime:1523584804e3},{moduleCode:"",detailCode:"410026",description:"",solution:"",updateTime:152351743e4},{moduleCode:"",detailCode:"360102",description:"TTS初始化失败",solution:"",updateTime:1523503528e3},{moduleCode:"",detailCode:"360013",description:"设备开启了隐私保护",solution:"",updateTime:1523503507e3},{moduleCode:"",detailCode:"360010",description:"设备正在对讲中",solution:"",updateTime:1523503491e3},{moduleCode:"",detailCode:"360007",description:"TTS关闭了与客户端的连接",solution:"",updateTime:1523503475e3},{moduleCode:"",detailCode:"360006",description:"客户端接收发生错误",solution:"",updateTime:1523503457e3},{moduleCode:"",detailCode:"360005",description:"客户端发送的消息错误",solution:"",updateTime:1523503437e3},{moduleCode:"",detailCode:"360004",description:"TTS内部发生错误",solution:"",updateTime:1523503421e3},{moduleCode:"",detailCode:"360003",description:"TTS的设备端发生错误",solution:"",updateTime:1523503397e3},{moduleCode:"",detailCode:"360002",description:"对讲发起超时",solution:"",updateTime:1523503376e3},{moduleCode:"",detailCode:"360001",description:"客户端请求超时",solution:"",updateTime:1523503357e3},{moduleCode:"",detailCode:"320077",description:"",solution:"",updateTime:1523444274e3},{moduleCode:"",detailCode:"370047",description:"",solution:"",updateTime:152344048e4},{moduleCode:"",detailCode:"100002",description:"",solution:"",updateTime:1523413964e3},{moduleCode:"",detailCode:"-1004",description:"",solution:"",updateTime:1523336653e3},{moduleCode:"",detailCode:"380000",description:"",solution:"",updateTime:1523180856e3},{moduleCode:"",detailCode:"380213",description:"",solution:"",updateTime:1523180623e3},{moduleCode:"",detailCode:"380101",description:"",solution:"",updateTime:1522834231e3},{moduleCode:"",detailCode:"50047",description:"",solution:"",updateTime:1522833243e3},{moduleCode:"",detailCode:"-999",description:"",solution:"",updateTime:1522831034e3},{moduleCode:"",detailCode:"320418",description:"",solution:"",updateTime:1522829072e3},{moduleCode:"",detailCode:"-1009",description:"",solution:"",updateTime:1522746247e3},{moduleCode:"",detailCode:"320209",description:"",solution:"",updateTime:1522744395e3},{moduleCode:"",detailCode:"368006",description:"",solution:"",updateTime:15227443e5},{moduleCode:"",detailCode:"369003",description:"",solution:"",updateTime:1522736355e3},{moduleCode:"",detailCode:"405989",description:"",solution:"",updateTime:1522726571e3},{moduleCode:"",detailCode:"-1012",description:"",solution:"",updateTime:1522726203e3},{moduleCode:"",detailCode:"322016",description:"",solution:"",updateTime:1522722918e3},{moduleCode:"",detailCode:"500103",description:"",solution:"",updateTime:1522655556e3},{moduleCode:"",detailCode:"405999",description:"",solution:"",updateTime:1522654716e3},{moduleCode:"",detailCode:"321032",description:"",solution:"",updateTime:1522647732e3},{moduleCode:"",detailCode:"381101",description:"",solution:"",updateTime:1522392414e3},{moduleCode:"",detailCode:"399999",description:"",solution:"",updateTime:1522379834e3},{moduleCode:"",detailCode:"380103",description:"",solution:"",updateTime:1522312724e3},{moduleCode:"",detailCode:"360014",description:"",solution:"",updateTime:1522304341e3},{moduleCode:"",detailCode:"-1005",description:"",solution:"",updateTime:1522288195e3},{moduleCode:"",detailCode:"100005",description:"",solution:"",updateTime:1522218849e3},{moduleCode:"",detailCode:"100004",description:"",solution:"",updateTime:1522209053e3},{moduleCode:"",detailCode:"106002",description:"",solution:"",updateTime:15222062e5},{moduleCode:"",detailCode:"410030",description:"",solution:"",updateTime:1522162252e3},{moduleCode:"",detailCode:"-1002",description:"",solution:"",updateTime:152215069e4},{moduleCode:"",detailCode:"-1200",description:"",solution:"",updateTime:1522139025e3},{moduleCode:"",detailCode:"-1001",description:"",solution:"",updateTime:1522046436e3},{moduleCode:"",detailCode:"-1011",description:"",solution:"",updateTime:1522045931e3},{moduleCode:"",detailCode:"381102",description:"",solution:"",updateTime:1522044953e3},{moduleCode:"",detailCode:"381103",description:"",solution:"",updateTime:1522044953e3},{moduleCode:"",detailCode:"391205",description:"vtdu解析服务器ip失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391206",description:"vtdu描述符select失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391207",description:"vtdu文件描述符不在可读中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391208",description:"vtdu网络发生错误getsockopt",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391209",description:"vtdu描述符select超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395000",description:"cas回复信令，发现内存已经释放（和设备之间异常断开）",msg:"播放失败请重试",solution:"检查设备网络；刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395400",description:"私有化协议vtm检测私有化协议中码流类型小于0或者设备序列号为空等非法参数场景返回(app不重试取流)",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395402",description:"回放找不到录像文件",msg:"回放找不到录像文件，本地存储请检查存储卡是否接触良好",solution:"检查是否有存储卡并且接触良好",updateTime:1522034841e3},{moduleCode:"",detailCode:"395403",description:"操作码或信令密钥与设备不匹配",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395404",description:"设备不在线",solution:"检查设备网络；重启设备接入萤石云",msg:"设备不在线，请检查设备网络或重启设备接入萤石云",updateTime:1522034841e3},{moduleCode:"",detailCode:"395405",description:"流媒体向设备发送或接受信令超时/cas响应超时",msg:"播放失败，请检查设备网络或重启设备",solution:"检查设备网络；重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395406",description:"token失效",msg:"播放失败请重试或重启设备",solution:"刷新重试或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395407",description:"客户端的URL格式错误",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395409",description:"预览开启隐私保护",msg:"播放失败请关闭隐私遮蔽",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395410",description:"设备达到最大连接数",solution:"请升级设备固件版本",updateTime:1522034841e3},{moduleCode:"",detailCode:"395411",description:"token无权限",msg:"播放失败",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395412",description:"session不存在",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395413",description:"验证token的他异常（不具体） ",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395415",description:"设备通道错",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395416",description:"设备资源受限",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395451",description:"设备不支持的码流类型",msg:"播放失败请重试或切换设备码流",solution:"刷新重试或者切换到高清模式",updateTime:1522034841e3},{moduleCode:"",detailCode:"395452",description:"设备链接流媒体服务器失败",msg:"播放失败，请检查设备网络或重启设备或重新加载",solution:"检查设备网络，重启设备，刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395454",description:"流媒体中关于设备取流会话不存在",msg:"播放失败请重试",solution:"流媒体中关于设备取流会话不存在",updateTime:152222018e4},{moduleCode:"",detailCode:"395455",description:"设备通道未关联",msg:"播放失败，请检查设备通道是否关联",solution:"检查设备通道是否关联",updateTime:152222018e4},{moduleCode:"",detailCode:"395456",description:"设备通道关联设备不在线",msg:"播放失败，请检查设备通道是否上线",solution:"检查设备通道是否上线",updateTime:152222018e4},{moduleCode:"",detailCode:"395457",description:"客户端不支持端到端加密",msg:"播放失败",solution:"客户端不支持端到端加密",updateTime:152222018e4},{moduleCode:"",detailCode:"395458",description:"设备不支持当前并发ECDH密",msg:"客户端不支持端到端加密",solution:"设备不支持当前并发ECDH密",updateTime:152222018e4},{moduleCode:"",detailCode:"395459",description:"VTDU 处理ECDH 加密失败",msg:"播放失败",solution:"VTDU 处理ECDH 加密失败",updateTime:152222018e4},{moduleCode:"",detailCode:"395460",description:"流媒体中关于设备取流会话不存在",msg:"播放失败请重试",solution:"流媒体中关于设备取流会话不存在",updateTime:152222018e4},{moduleCode:"",detailCode:"395492",description:"设备不支持的命令",msg:"操作失败，设备不支持",solution:"",updateTime:152222018e4},{moduleCode:"",detailCode:"395500",description:"服务器处理失败",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395501",description:"流媒体vtdu达到最大负载，请扩容",msg:"播放失败请重试",solution:"服务器负载达到上限，请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395503",description:"vtm返回分配vtdu失败",msg:"播放失败请重试",solution:"vtdu服务异常，请请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395504",description:"流媒体vtdu达到最大负载",msg:"播放失败请重试",solution:"服务器负载达到上限，请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395505",description:"vtm ecdh解密失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395506",description:"vtm 返回IPC不支持取流（需要IPC添加NVR后支持）",msg:"播放失败，请绑定NVR使用",solution:"IPC绑定NVR使用",updateTime:1522034841e3},{moduleCode:"",detailCode:"395544",description:"设备返回无视频源",msg:"播放失败，请检查设备接触情况",solution:"设备是否接触良好； 如果一直无法解决，请联系技术支持",updateTime:1522034841e3},{moduleCode:"",detailCode:"395545",description:"视频分享时间已经结束",msg:"视频分享时间已结束",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395546",description:"vtdu返回达到取流并发路数限制",msg:"并发上限，请升级为企业版",solution:"请升级为企业版，放开并发限制",updateTime:1522034841e3},{moduleCode:"",detailCode:"395547",description:"vtdu返回开放平台用户并发限制",msg:"并发上限，请升级为企业版",solution:"请确定开放平台用户预览是否超过用户并发数量限制",updateTime:1522034841e3},{moduleCode:"",detailCode:"395556",description:"ticket校验失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395557",description:"回放服务器等待流头超时",msg:"播放失败请重试",solution:"刷新重试，检测设备网络，重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395558",description:"查找录像开始时间错误",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395560",description:"群组分享取流二次验证失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395561",description:"分享群组用户被锁住",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395562",description:"群组分享用户权限变更",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395563",description:"认证服务连接失败",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395564",description:"认证超时",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395566",description:"不在分享时间内预览",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395567",description:"分享通道被锁定",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395568",description:"未找到认证类型",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395569",description:"认证返回的参数异常",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395600",description:"分享设备不在分享时间内",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395601",description:"群组分享用户没权限",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395602",description:"群组分享权限变更",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395610",description:"接收流头失败",msg:"播放失败请重试并检查设备网络情况以及设备配置",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395620",description:"心跳超时",msg:"播放失败请重试并检查设备网络情况以及设备配置",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395530",description:"机房故障不可用",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395701",description:"cas信令返回格式错误",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395702",description:"SPGW请求Cas、Status透传超时",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395703",description:"SPGW请求http不通",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396001",description:"客户端参数出错",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396099",description:"客户端默认错误",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396101",description:"不支持的命令",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396102",description:"设备流头发送失败",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396103",description:"cas/设备返回错误1",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396104",description:"cas/设备返回错误-1",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396105",description:"设备返回错误码3",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396106",description:"设备返回错误码4",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396107",description:"设备返回错误码5",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396108",description:"cas信令回应重复",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396109",description:"视频广场取消分享",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396110",description:"设备信令默认错误",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396501",description:"设备数据链路和实际链路不匹配",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396502",description:"设备数据链路重复建立连接",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396503",description:"设备数据链路端口不匹配",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396504",description:"缓存设备数据链路失败(内存块不足)",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396505",description:"设备发送确认头消息重复",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396506",description:"设备数据先于确定头部到达",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396508",description:"设备数据头部长度非法",msg:"播放失败请重试或重启设备",solution:"刷新重试，或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"396509",description:"索引找不到设备数据管理块",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396510",description:"设备数据链路vtdu内存块协议状态不匹配",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396511",description:"设备数据头部没有streamkey错误",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396512",description:"设备数据头部非法(较笼统)",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396513",description:"设备数据长度过小",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396514",description:"设备老协议推流头部没有streamkey错误",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396515",description:"设备老协议推流数据非法",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396516",description:"设备老协议索引找不到内存管理块",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396517",description:"设备老协议推流数据非法",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396518",description:"设备数据包过大",msg:"播放失败请重试或重启设备",solution:"刷新重试，或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"396519",description:"设备推流链路网络不稳定",msg:"播放失败，请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396520",description:"设备推流链路网络不稳定(默认)",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396700",description:"异常数据包",msg:"播放失败，设备重启",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396701",description:"回放结束数据包",msg:"回放结束",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397001",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397002",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397003",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397004",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397005",description:"VTDU连接失败，或VTDU侧断开连接",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397006",description:"vtm断开连接（无需 关注）",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397007",description:"客户端发送缓冲区满（上行带宽太小）",msg:"播放失败，上行带宽过小请检查设备网络情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399000",description:"无效包，包过大",msg:" 检查设备重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399001",description:"地址不合法",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399002",description:"缺少端口",msg:" 播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"170003",description:"refreshToken不存在",solution:"建议用户重新调用logout接口，然后调用openLoginPage接口重新启动登录页面登录",updateTime:1522034841e3},{moduleCode:"",detailCode:"170004",description:"refreshToken已过期",solution:"建议用户重新调用logout接口，然后调用openLoginPage接口重新启动登录页面登录",updateTime:1522034841e3},{moduleCode:"",detailCode:"380011",description:"设备隐私保护中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380045",description:"设备直连取流连接数量过大",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380047",description:"设备不支持该命令",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380077",description:"设备正在对讲中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380102",description:"数据接收异常",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380205",description:"设备检测入参异常",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380209",description:"网络连接超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380212",description:"设备端网络连接超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"101007",description:"手机号未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120503",description:"正在响铃",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390016",description:"vtdu成功响应未携带流头",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101008",description:"手机号码不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120504",description:"室内机正在通话",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390017",description:"无数据流，尚未使用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101009",description:"用户名与手机不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120505",description:"设备操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390018",description:"信令消息体PB解析失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101010",description:"获取验证码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120506",description:"非法命令",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390019",description:"信令消息体PB封装失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101011",description:"验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120507",description:"智能锁密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390020",description:"申请系统内存资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101012",description:"验证码失效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120508",description:"开关锁失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390021",description:"vtdu地址尚未获取到",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101013",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120509",description:"开关锁超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390022",description:"客户端尚未支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101014",description:"密码不正确或者appKey不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120510",description:"智能锁设备繁忙",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390023",description:"获取系统socket资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101015",description:"用户被锁住",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120511",description:"远程开锁功能未打开",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390024",description:"上层填充的StreamSsnId不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101021",description:"验证参数异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120600",description:"临时密码数已达上限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390025",description:"链接服务器失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101026",description:"邮箱已经被注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120601",description:"添加临时密码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390026",description:"客户端请求未收到服务端应答",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101031",description:"邮箱未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120602",description:"删除临时密码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390027",description:"链路断开",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101032",description:"邮箱不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120603",description:"该临时密码不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390028",description:"没有取流链接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101041",description:"获取验证码过于频繁",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120604",description:"指纹锁射频通信失败,请稍后再试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390029",description:"流成功停止",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101043",description:"手机验证码输入错误超过规定次数",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120605",description:"其他用户正在认证中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390030",description:"客户端防串流校验失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102000",description:"设备不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120606",description:"验证已启动,请在120s内进行本地验证和调用添加设备接口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390031",description:"应用层tcp粘包处理缓冲区满",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102001",description:"摄像机不存在",solution:"摄像机未注册到萤石云平台，请仔细检查摄像机的网络配置，确保连接到网络",updateTime:152203484e4},{moduleCode:"",detailCode:"120607",description:"删除用户失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390032",description:"无效状态迁移",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102003",description:"设备不在线",solution:"参考服务中心排查方法",updateTime:152203484e4},{moduleCode:"",detailCode:"120608",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390033",description:"无效客户端状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102004",description:"设备异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120609",description:"设备响应超时,门锁通信故障或者电量不足,请重试.",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390034",description:"向vtm取流流媒体信息请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102007",description:"设备序列号不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120610",description:"获取临时密码列表失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390035",description:"向代理取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102009",description:"设备请求响应超时异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130001",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390036",description:"向代理保活取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105000",description:"设备已被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130002",description:"手机号码已经注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390037",description:"向vtdu取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105001",description:"设备已被别人添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130003",description:"手机验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390038",description:"向vtdu保活取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105002",description:"设备验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130004",description:"终端绑定操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391001",description:"vtm地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107001",description:"邀请不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"149999",description:"数据异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391002",description:"vtm生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107002",description:"邀请验证失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"150000",description:"服务器异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391003",description:"vtm设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107003",description:"邀请用户不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160000",description:"设备不支持云台控制",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391004",description:"vtm设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107004",description:"云存储连接失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160001",description:"用户无云台控制权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391005",description:"vtm解析服务器ip失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"7005",description:"VTDU主动断开连接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107005",description:"VTDU主动断开连接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160002",description:"设备云台旋转达到上限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391006",description:"vtm描述符select失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107006",description:"不能邀请自己",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160003",description:"设备云台旋转达到下限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391007",description:"vtm文件描述符不在可读中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107007",description:"重复邀请",solution:"分享和删除分享必须全部由接口形式操作，如果与萤石客户端混用会造成这个问题，解决办法：在萤石客户端清空所有相关分享数据并重新添加设备，再通过接口操作即可",updateTime:152203484e4},{moduleCode:"",detailCode:"160004",description:"设备云台旋转达到左限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391008",description:"vtm网络发生错误getsockopt",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110001",description:"参数错误",solution:"参数为空或者格式不对",updateTime:152203484e4},{moduleCode:"",detailCode:"160005",description:"设备云台旋转达到右限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391009",description:"vtm描述符select超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110002",description:"accessToken异常或过期",solution:"accessToken有效期为七天，建议在accessToken即将过期或者出现10002错误码的时候重新获取accessToken",updateTime:152203484e4},{moduleCode:"",detailCode:"160006",description:"云台当前操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391101",description:"proxy地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110004",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160007",description:"预置点个数超过最大值",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391102",description:"proxy生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110005",description:"appKey异常",solution:"确认appKey状态，不通过或者冻结状态会返回该错误码",updateTime:152203484e4},{moduleCode:"",detailCode:"160009",description:"正在调用预置点",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391103",description:"proxy设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110006",description:"ip受限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160010",description:"该预置点已经是当前位置",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391104",description:"proxy设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160011",description:"预置点不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391105",description:"proxy解析服务器ip失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110008",description:"签名错误",solution:"①获取签名方式详见apidemo及[旧]API文档 ②注意编码格式为UTF-8",updateTime:152203484e4},{moduleCode:"",detailCode:"160013",description:"设备版本已是最新",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391106",description:"proxy描述符select失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110009",description:"签名参数错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160014",description:"设备正在升级",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391107",description:"proxy文件描述符不在可读中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110010",description:"签名超时",solution:"请调用同步服务器时间接口进行校时",updateTime:152203484e4},{moduleCode:"",detailCode:"160015",description:"设备正在重启",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391108",description:"proxy网络发生错误getsockopt",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110011",description:"未开通萤石云服务",solution:"参照绑定流程",updateTime:152203484e4},{moduleCode:"",detailCode:"160016",description:"加密未开启，无须关闭",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391109",description:"proxy描述符select超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110012",description:"第三方账户与萤石账号已经绑定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160017",description:"设备抓图失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391201",description:"vtdu地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110013",description:"应用没有权限调用此接口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160018",description:"设备升级失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391202",description:"vtdu生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110014",description:"APPKEY下对应的第三方userId和phone未绑定",solution:"获取AccessToken时所用appKey与SDK所用appKey不一致",updateTime:152203484e4},{moduleCode:"",detailCode:"160019",description:"加密已开启",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391203",description:"vtdu设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110017",description:"appKey不存在",solution:"请填写在官网申请的应用秘钥",updateTime:152203484e4},{moduleCode:"",detailCode:"160020",description:"不支持该命令",solution:"请确认设备是否支持该命令",updateTime:152203484e4},{moduleCode:"",detailCode:"391204",description:"vtdu设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110018",description:"AccessToken与Appkey不匹配",solution:"请检查获取accessToken对应的appKey和SDK中设置的appKey是否一致",updateTime:152203484e4},{moduleCode:"",detailCode:"160023",description:"订阅操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110019",description:"密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160024",description:"取消订阅操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110020",description:"请求方法为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160025",description:"客流统计配置失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110021",description:"ticket校验失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160026",description:"设备处于隐私遮蔽状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110022",description:"透传目的地非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160027",description:"设备正在镜像操作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110024",description:"无透传权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160028",description:"设备正在键控动作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110025",description:"appKey被禁止使用通明通道",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160029",description:"设备处于语音对讲状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160030",description:"卡密输入错误次数过多，24小时后再输入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160031",description:"卡密信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160032",description:"卡密状态不对或已过期",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160033",description:"卡密非卖品，只能开通对应的绑定设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110030",description:"appKey和appSecret不匹配",solution:"请检查appKey和appSecret是否对应",updateTime:152203484e4},{moduleCode:"",detailCode:"160035",description:"购买云存储服务失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110031",description:"子账户或萤石用户没有权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160040",description:"添加的设备不在同一局域网",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110032",description:"子账户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160041",description:"添加的设备被其他设备关联或响应超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110033",description:"子账户未设置授权策略",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160042",description:"添加的设备密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110034",description:"子账户已存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160043",description:"添加的设备超出最大数量",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110035",description:"获取子账户AccessToken异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160044",description:"添加的设备网络不可达超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110036",description:"子账户被禁用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160045",description:"添加的设备的IP和其他通道的IP冲突",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110051",description:"无权限进行抓图",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160046",description:"添加的设备的IP和本设备的IP冲突",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160047",description:"码流类型不支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120002",description:"设备不存在",solution:"①设备没有注册到萤石云平台，请检查下设备网络参数，确保能正常连接网络②设备序列号不存在",updateTime:152203484e4},{moduleCode:"",detailCode:"160048",description:"带宽超出系统接入带宽",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120003",description:"参数异常，SDK版本过低",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160049",description:"IP或者端口不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120004",description:"参数异常，SDK版本过低",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160050",description:"添加的设备版本不支持需要升级才能接入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120005",description:"安全认证失败，需进行SDK安全认证",solution:"已去掉安全验证",updateTime:152203484e4},{moduleCode:"",detailCode:"160051",description:"添加的设备不支持接入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120006",description:"网络异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160052",description:"添加的设备通道号出错",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120007",description:"设备不在线",solution:"参考服务中心排查方法",updateTime:152203484e4},{moduleCode:"",detailCode:"160053",description:"添加的设备分辨率不支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120008",description:"设备响应超时",solution:"设备响应超时，请检测设备网络或重试",updateTime:152203484e4},{moduleCode:"",detailCode:"160054",description:"添加的设备账号被锁定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120009",description:"子账号不能添加设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160055",description:"添加的设备取码流出错",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120010",description:"设备验证码错误",solution:"验证码在设备标签上，六位大写字母，注意大小写",updateTime:152203484e4},{moduleCode:"",detailCode:"160056",description:"删除设备失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120012",description:"设备添加失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160057",description:"删除的设备未关联",solution:"检查IPC与NVR是否有关联关系",updateTime:152203484e4},{moduleCode:"",detailCode:"120013",description:"设备已被别人添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160060",description:"地址未绑定",solution:"请前往官网设置直播",updateTime:152203484e4},{moduleCode:"",detailCode:"120014",description:"设备序列号不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160061",description:"账户流量已超出或未购买，限制开通",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120015",description:"设备不支持该功能",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160062",description:"该通道直播已开通",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120016",description:"当前设备正在格式化",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160063",description:"直播未使用或直播已关闭",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120017",description:"设备已被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160070",description:"设备不能转移给自己",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120018",description:"该用户不拥有该设备",solution:"确认设备是否属于用户",updateTime:152203484e4},{moduleCode:"",detailCode:"160071",description:"设备不能转移，设备与其他设备存在关联关系",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400001",description:"参数为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120019",description:"设备不支持云存储服务",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160072",description:"设备不能转移，通道被分享给其他用户或者分享到视频广场",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400002",description:"参数错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120020",description:"设备在线，被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160073",description:"云存储转移失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400025",description:"设备不支持对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120021",description:"设备在线，但是未被用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160080",description:"当前正在声源定位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400029",description:"没有初始化或资源被释放",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120022",description:"设备在线，但是已经被别的用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160081",description:"当前正在轨迹巡航",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400030",description:"json解析异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120023",description:"设备不在线，未被用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160082",description:"设备正在响应本次声源定位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400031",description:"网络异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120024",description:"设备不在线，但是已经被别的用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160083",description:"当前正在开启隐私遮蔽",solution:"设备正在操作隐私遮蔽，无法进行当前操作",updateTime:152203484e4},{moduleCode:"",detailCode:"400032",description:"设备信息异常为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120025",description:"重复申请分享",solution:"确认设备是否由添加过该设备且申请过分享的账户下是否还存在分享记录",updateTime:152203484e4},{moduleCode:"",detailCode:"160084",description:"当前正在关闭隐私遮蔽",solution:"设备正在操作隐私遮蔽，无法进行当前操作",updateTime:152203484e4},{moduleCode:"",detailCode:"400034",description:"取流超时",solution:"一般是由于网络状况不好导致，可以尝试下让用户重新播放",updateTime:152203484e4},{moduleCode:"",detailCode:"120026",description:"视频广场不存在该视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"380290",description:"　连接CAS服务器失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400035",description:"设备已加密，需要输入验证码",solution:"收到此错误码，需要让用户输入验证码后，调用EZPlayer.setPlayKey传入验证码，并重新调用播放函数",updateTime:152203484e4},{moduleCode:"",detailCode:"120027",description:"视频转码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361001",description:"对讲服务端排队超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400036",description:"播放验证码错误",solution:"收到此错误码，需要让用户输入验证码后，调用EZPlayer.setPlayKey传入验证码，并重新调用播放函数",updateTime:152203484e4},{moduleCode:"",detailCode:"120028",description:"设备固件升级包不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361002",description:"对讲服务端处理超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400037",description:"surfacehold错误",solution:"请检查是否是播放之前销毁了surface，收到此错误也可以重新建立surface后播放",updateTime:152203484e4},{moduleCode:"",detailCode:"120029",description:"设备不在线，但是已经被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361003",description:"设备链接对讲服务器超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400100",description:"未知错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120030",description:"该用户不拥有该视频广场视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361004",description:"服务器内部错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400200",description:"player sdk出错，这种错误一般开发者也是无法解决，不具体分类传出，传一个统一的inner错误码出去",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120031",description:"开启终端绑定，硬件特征码验证失败",solution:"请在萤石客户端关闭终端绑定，参考此步骤",updateTime:152203484e4},{moduleCode:"",detailCode:"361005",description:"解析消息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400300",description:"内存溢出",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120032",description:"该用户下通道不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361006",description:"请求重定向--需要向其他服务申请对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400901",description:"设备不在线，可以提示用户",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120033",description:"无法收藏自己分享的视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361007",description:"请求url非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400902",description:"accesstoken异常或失效，需要重新获取accesstoken，并传入到sdk",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120034",description:"该用户下无设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361008",description:"token失效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400903",description:"当前账号开启了终端绑定，只允许指定设备登录操作，提示用户登录i.ys7.com解除终端绑定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120090",description:"用户反馈失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361009",description:"设备验证码或者通信秘钥不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400904",description:"设备正在对讲中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120095",description:"APP包下载失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361010",description:"设备已经在对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400905",description:"设备开启了隐私保护，不允许预览、对讲等",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120096",description:"APP包信息删除失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361011",description:"设备10s响应超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120101",description:"视频不支持分享给本人",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361012",description:"设备不在线",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320002",description:"参数无效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120102",description:"无相应邀请信息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361013",description:"设备开启隐私保护拒绝对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320003",description:"暂不支持此操作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120103",description:"好友已存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361014",description:"token无权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320004",description:"内存溢出",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120104",description:"好友不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361015",description:"设备返回session不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320005",description:"创建CAS session失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120105",description:"好友状态错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361016",description:"验证token其他异常错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320006",description:"创建cloud session失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120106",description:"对应群组不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361017",description:"服务端监听设备建立端口超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320007",description:"token失效",solution:"重新设置token后再重试",updateTime:152203484e4},{moduleCode:"",detailCode:"120107",description:"不能添加自己为好友",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361018",description:"设备链路异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320008",description:"token池里面没有token,请传入token",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120108",description:"当前用户和所添加用户不是好友关系",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361019",description:"对讲服务端不支持的信令消息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320009",description:"传入新的INIT_PARAM并reset(保留，目前未用)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120109",description:"对应分享不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361020",description:"对讲服务端解析对讲请求未携带会话描述能力集",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320010",description:"请重试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120110",description:"好友群组不属于当前用户",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361021",description:"对讲服务端优先能力集结果为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320011",description:"500毫秒后请重试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120111",description:"好友不是等待验证状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361022",description:"cas链路异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320012",description:"token池已满",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120112",description:"添加应用下的用户为好友失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361023",description:"对讲服务端分配对讲会话资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320013",description:"P2P client超过限制",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120201",description:"操作报警信息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361024",description:"对讲服务端解析信令消息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320014",description:"sdk未初始化",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120202",description:"操作留言信息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390001",description:"通用错误返回",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320015",description:"超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120301",description:"根据UUID查询报警消息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390002",description:"入参为空指针",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320016",description:"正在打洞中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120302",description:"根据UUID查询图片不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390003",description:"入参值无效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320017",description:"没有视频文件头(播放器层面产生和处理此错误)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120303",description:"根据FID查询图片不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390004",description:"信令消息解析非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320018",description:"解码错误/超时(播放器层面产生和处理此错误)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120305",description:"设备ip解析错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390005",description:"内存资源不足",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320019",description:"取消(保留，用户不用处理)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120401",description:"用户云空间信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390006",description:"协议格式不对或者消息体长度超过STREAM_MAX_MSGBODY_LEN",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320020",description:"播放过程中预连接被用户清除预操作信息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120402",description:"云空间操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390007",description:"设备序列号长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320021",description:"流加密码不对",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120403",description:"用户目录不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390008",description:"取流url长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320022",description:"未传入播放窗口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120404",description:"要操作的目标目录不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390009",description:"解析vtm返回vtdu地址不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"100200",description:"操作成功",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120405",description:"要删除的文件信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390010",description:"解析vtm返回级联vtdu地址不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101001",description:"用户名不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120406",description:"已开通云存储",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390011",description:"解析vtm返回会话标识长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101002",description:"用户名已被占用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120407",description:"开通记录失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390012",description:"vtdu返回流头长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101003",description:"密码不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120500",description:"获取数据错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390013",description:"vtdu会话长度非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101004",description:"密码为同一字符",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120501",description:"开锁失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390014",description:"回调函数未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101006",description:"手机号码已经被注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120502",description:"室内机未收到呼叫",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390015",description:"vtdu成功响应未携带会话标识",solution:"",updateTime:152203484e4}];var code="200";var msg$1="操作成功!";var errorCode={data:data$d,code:code,msg:msg$1};var Code=function(){function Code(x,y){_classCallCheck$1(this,Code);this.coreX=x;this.coreY=y;console.log("ErrorCode",errorCode)}_createClass$1(Code,[{key:"toString",value:function toString(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"matchErrorInfo",value:function matchErrorInfo(code){return errorCode.data.find(function(item){return item.detailCode.substr(-4)==code})}}]);return Code}();var header={color:"red",backgroundColor:"red",activeColor:"red",btnList:[{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-header-0",iconId:"deviceID",part:"left",defaultActive:1,isrender:1,themeId:"934f270c08b14e928bf0c2ae8e1a937d"},{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-header-1",iconId:"deviceName",part:"left",defaultActive:1,isrender:1,themeId:"934f270c08b14e928bf0c2ae8e1a937d"}]};var footer={color:"blue",backgroundColor:"blue",activeColor:"blue",btnList:[{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-footer-0",iconId:"play",part:"left",defaultActive:0,isrender:0,themeId:"934f270c08b14e928bf0c2ae8e1a937d"}]};var defaultTheme={header:header,footer:footer};var TimeLine$1=function TimeLine(jsPlugin){this.jsPlugin=jsPlugin;var status={isMouseDown:false,isOver:false,mousePosition:null,oldTime:null,nowTime:jsPlugin.nowTime||null,moved:null,hoverTime:"2018-12-07 12:00:00",hoverLeft:0,timeTipShow:false,randomNum:123,timeWidthTbls:[60,1800,3600,86400],timeUnits:["范围: 1分钟; 单位: 秒","范围: 30分钟; 单位: 分钟","范围: 1小时; 单位: 分钟","范围: 1天; 单位: 小时","范围: 3天; 单位: 小时"],drawPen:null,timeSection:[],canvasWidth:null,canvasHeight:null,timeTips:null};var _this=this;Object.keys(status).forEach(function(element){_this[element]=status[element]});this.options={width:this.canvasWidth,height:48,time:(new Date).getTime(),timeSection:[],timeWidth:0};TimeLine.prototype.subTime=function(time){if(time<10){return"0"+time}else{return time}};TimeLine.prototype.tranTime=function(time){var stringTime=time;if(time){var newDate=new Date(time);stringTime=newDate.getFullYear()+"/"+(newDate.getMonth()+1)+"/"+newDate.getDate()+" "+this.subTime(newDate.getHours())+":"+this.subTime(newDate.getMinutes())+":"+this.subTime(newDate.getSeconds())}return stringTime};TimeLine.prototype.init=function(params){var opts=this.options;return new Promise(function(resolve,reject){if(params.width){document.getElementById(params.id).setAttribute("width",parseInt(params.width,10)+"px")}_this.randomNum=(Math.random()+"").split(".").join("");_this.timeWidthTblIndex=opts.timeWidth;var canvas=document.getElementById("".concat(_this.jsPlugin.id,"-canvas"));_this.drawPen=canvas.getContext("2d");_this.nowTime=params.nowTime;_this.timeSection=opts.timeSection||[];_this.canvasWidth=canvas.offsetWidth;_this.canvasHeight=canvas.offsetHeight;_this.updata();document.getElementById("".concat(_this.jsPlugin.id,"-canvas")).addEventListener("mousemove",function(e){if(_this.options.readOnly){return}_this.mousemove(e)});document.getElementById("".concat(_this.jsPlugin.id,"-canvas")).addEventListener("mouseover",function(e){if(_this.options.readOnly){return}_this.mouseover(e)});document.getElementById("".concat(_this.jsPlugin.id,"-canvas")).addEventListener("mouseleave",function(e){if(_this.options.readOnly){return}_this.mouseleave(e)});document.getElementById("".concat(_this.jsPlugin.id,"-canvas")).addEventListener("mousedown",function(e){if(_this.options.readOnly){return}_this.mousedown(e)});document.getElementById("".concat(_this.jsPlugin.id,"-canvas")).addEventListener("mouseup",function(e){if(_this.options.readOnly){return}var callback=params.onChange;_this.mouseUpFn(e,callback)});resolve()})};TimeLine.prototype.setWidth=function(params){if(params.width){document.getElementById(params.id).width=params.width;document.getElementById("".concat(params.id,"-canvas")).width=params.width;document.getElementById("".concat(params.id,"-canvas-container")).width=params.width;_this.canvasWidth=params.width;_this.updata({time:_this.nowTime||new Date})}};TimeLine.prototype.mousemove=function(e){if(this.isMouseDown&&this.isOver){var mouseOffset=this.mousePosition-e.pageX;if(mouseOffset===0){return}var timeOffsetUnit=0;switch(this.timeWidth){case 60:timeOffsetUnit=1/10;break;case 1800:timeOffsetUnit=1/20*60;break;case 3600:timeOffsetUnit=1/20*30*60;break;case 86400:timeOffsetUnit=1/30*60*60;break}var currentTime=new Date(this.oldTime).getTime()+mouseOffset*timeOffsetUnit*1e3;this.updata({time:currentTime});this.moved=true}else{var left=parseInt(document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).offsetLeft,10);this.mousePosition=e.pageX-left;this.updata()}};TimeLine.prototype.mousedown=function(e){this.isMouseDown=true;this.mousePosition=e.pageX;this.oldTime=this.nowTime};TimeLine.prototype.mouseover=function(e){this.isOver=true};TimeLine.prototype.mouseleave=function(e){this.isOver=false;this.isMouseDown=false;this.updata()};TimeLine.prototype.changeSize=function(timeWidth){console.log("changeSize",timeWidth);this.options.timeWidth=timeWidth;this.updata({timeWidth:timeWidth})};TimeLine.prototype.mouseUpFn=function(e,callback){if(this.isMouseDown){this.isMouseDown=false;if(this.moved){this.moved=false;var newStringTime=new Date(this.nowTime).getFullYear()+"/"+(new Date(this.nowTime).getMonth()+1)+"/"+new Date(this.nowTime).getDate()+" "+this.subTime(new Date(this.nowTime).getHours())+":"+this.subTime(new Date(this.nowTime).getMinutes())+":"+this.subTime(new Date(this.nowTime).getSeconds());this.nowTime=new Date(newStringTime);this.updata({time:this.nowTime});this.oldTime=this.nowTime;console.log("nowTime",new Date(this.nowTime),newStringTime);callback(this.nowTime)}}};TimeLine.prototype.readOnly=function(data){console.log("更改为只读");this.options.readOnly=true;document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.cursor="not-allowed"};TimeLine.prototype.unReadOnly=function(data){console.log("更改为只读");this.options.readOnly=false;document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.cursor="pointer"};TimeLine.prototype.run=function(data){if(!_this.isMouseDown){_this.updata(data)}};TimeLine.prototype.getTime=function(data){console.log("this",this);console.log("当前时间",new Date(this.nowTime))};TimeLine.prototype.updata=function(data){data=data||{};_this.nowTime=data.time||_this.nowTime;_this.timeSection=data.timeSection||_this.timeSection;_this.timeWidthTblIndex=data.timeWidth||_this.timeWidthTblIndex;_this.timeWidth=_this.timeWidthTbls[data.timeWidth||_this.timeWidthTblIndex];_this.timeUnit=_this.timeUnits[data.timeWidth||_this.timeWidthTblIndex];if(data.timeWidth===0){_this.timeWidthTblIndex=0;_this.timeWidth=_this.timeWidthTbls[0];_this.timeUnit=_this.timeUnits[0]}_this.drawPen.fillStyle="#000000";_this.drawPen.fillRect(0,0,_this.canvasWidth,_this.canvasHeight);_this.drawScale();_this.drawRecord();_this.drawOtherMsg()};TimeLine.prototype.drawSolidLine=function(startX,startY,endX,endY,lineWidth,color){this.drawPen.save();this.drawPen.strokeStyle=color;this.drawPen.lineWidth=lineWidth;this.drawPen.beginPath();this.drawPen.moveTo(startX,startY);this.drawPen.lineTo(endX,endY);this.drawPen.stroke();this.drawPen.restore()};TimeLine.prototype.drawString=function(text,x,y,aling,color){this.drawPen.font="12px serif";this.drawPen.fillStyle="#ffffff";this.drawPen.textAlign=aling||"left";this.drawPen.fillText(text,x,y+10)};TimeLine.prototype.drawScale=function(){var _this=this;var lineColor="rgba(255,255,255)";var startDate=new Date(_this.nowTime);var starSecond=startDate.getSeconds();var starMin=startDate.getMinutes();var startHours=startDate.getHours();var startDay=startDate.getDate();var curScale=0;switch(_this.timeWidth){case 60:{var dotNum=parseInt(_this.canvasWidth/10);startDate.setSeconds(startDate.getSeconds()-parseInt(dotNum/2,10));startDay=startDate.getDate();startHours=startDate.getHours();starMin=startDate.getMinutes();starSecond=startDate.getSeconds();for(var i=0;i<dotNum;i++){curScale=starSecond+i;startDate.setSeconds(curScale);if(curScale%10===0){_this.drawSolidLine(i*_this.canvasWidth/dotNum,8,i*_this.canvasWidth/dotNum,_this.canvasHeight/5+8,1,lineColor);var timeString=this.subTime(startDate.getHours())+":"+this.subTime(startDate.getMinutes())+":"+this.subTime(startDate.getSeconds());_this.drawString(timeString,i*_this.canvasWidth/dotNum,_this.canvasHeight/5*2.5,"center","rgba(255,255,255,0.3)")}else{_this.drawSolidLine(i*_this.canvasWidth/dotNum,8,i*_this.canvasWidth/dotNum,_this.canvasHeight/5*.5+8,1,lineColor)}startDate.setDate(startDay);startDate.setHours(startHours);startDate.setMinutes(starMin)}break}case 1800:{var nowTime=new Date(_this.nowTime);var scaleSeconds=nowTime.getHours()*3600+nowTime.getMinutes()*60+nowTime.getSeconds();var scaleMinutes=parseInt(scaleSeconds/60);var center={position:parseInt(_this.canvasWidth/2),time:0,hideString:true};var _dotNum=Math.ceil(_this.canvasWidth/40)+scaleMinutes;var scaleArr=[];scaleArr.push(center);for(var index=0;index<_dotNum;index++){scaleArr.push({position:center.position+index*20-parseInt(scaleSeconds/3),time:center.time+index*60});scaleArr.unshift({position:center.position-index*20-parseInt(scaleSeconds/3),time:center.time-index*60})}for(var _index=0;_index<scaleArr.length;_index++){_this.drawSolidLine(scaleArr[_index].position,8,scaleArr[_index].position,_this.canvasHeight/5*(scaleArr[_index].time%100===0?1:.5)+8,1,lineColor);if(scaleArr[_index].time%100===0&&!scaleArr[_index].hideString){var date=new Date(scaleArr[_index].time*1e3);var hours=date.getUTCHours()<10?"0".concat(date.getUTCHours()):date.getUTCHours();var minutes=date.getUTCMinutes()<10?"0".concat(date.getUTCMinutes()):date.getUTCMinutes();date.getUTCSeconds()<10?"0".concat(date.getUTCSeconds()):date.getUTCSeconds();var timeStr="".concat(hours,":").concat(minutes);_this.drawString(timeStr,scaleArr[_index].position,_this.canvasHeight/5*2,"center","rgba(255,255,255,0.3)")}}break}case 3600:{var _nowTime=new Date(_this.nowTime);var _scaleSeconds=_nowTime.getHours()*3600+_nowTime.getMinutes()*60+_nowTime.getSeconds();var scaleHalfHours=parseInt(_scaleSeconds/1800);var _center={position:parseInt(_this.canvasWidth/2),time:0,hideString:true};var _dotNum2=Math.ceil(_this.canvasWidth/40)+scaleHalfHours;var _scaleArr=[];_scaleArr.push(_center);for(var _index2=0;_index2<_dotNum2;_index2++){_scaleArr.push({position:_center.position+_index2*20-parseInt(_scaleSeconds/90),time:_center.time+_index2*1800});_scaleArr.unshift({position:_center.position-_index2*20-parseInt(_scaleSeconds/90),time:_center.time-_index2*1800})}for(var _index3=0;_index3<_scaleArr.length;_index3++){_this.drawSolidLine(_scaleArr[_index3].position,8,_scaleArr[_index3].position,_this.canvasHeight/5*(_scaleArr[_index3].time%9e3===0?1:.5)+8,1,lineColor);if(_scaleArr[_index3].time%9e3===0&&!_scaleArr[_index3].hideString){var _date=new Date(_scaleArr[_index3].time*1e3);var _hours=_date.getUTCHours()<10?"0".concat(_date.getUTCHours()):_date.getUTCHours();var _minutes=_date.getUTCMinutes()<10?"0".concat(_date.getUTCMinutes()):_date.getUTCMinutes();_date.getUTCSeconds()<10?"0".concat(_date.getUTCSeconds()):_date.getUTCSeconds();var _timeStr="".concat(_hours,":").concat(_minutes);_this.drawString(_timeStr,_scaleArr[_index3].position,_this.canvasHeight/5*2,"center","rgba(255,255,255,0.3)")}}break}case 86400:{var _nowTime2=new Date(_this.nowTime);var _scaleSeconds2=_nowTime2.getHours()*3600+_nowTime2.getMinutes()*60+_nowTime2.getSeconds();var scaleHours=parseInt(_scaleSeconds2/3600);var _center2={position:parseFloat(_this.canvasWidth/2),time:0,hideString:true};var _dotNum3=Math.ceil(_this.canvasWidth/60)+scaleHours;var _scaleArr2=[];_scaleArr2.push(_center2);for(var _index4=0;_index4<_dotNum3;_index4++){_scaleArr2.push({position:_center2.position+_index4*30-_scaleSeconds2/120,time:_center2.time+_index4*3600});_scaleArr2.unshift({position:_center2.position-_index4*30-_scaleSeconds2/120,time:_center2.time-_index4*3600})}for(var _index5=0;_index5<_scaleArr2.length;_index5++){_this.drawSolidLine(_scaleArr2[_index5].position,8,_scaleArr2[_index5].position,_this.canvasHeight/5*(_scaleArr2[_index5].time%7200===0?1:.5)+8,1,lineColor);if(_scaleArr2[_index5].time%7200===0&&!_scaleArr2[_index5].hideString){var _date2=new Date(_scaleArr2[_index5].time*1e3);var _hours2=_date2.getUTCHours()<10?"0".concat(_date2.getUTCHours()):_date2.getUTCHours();var _minutes2=_date2.getUTCMinutes()<10?"0".concat(_date2.getUTCMinutes()):_date2.getUTCMinutes();_date2.getUTCSeconds()<10?"0".concat(_date2.getUTCSeconds()):_date2.getUTCSeconds();var _timeStr2="".concat(_hours2,":").concat(_minutes2);_this.drawString(_timeStr2,_scaleArr2[_index5].position,_this.canvasHeight/5*2,"center","rgba(255,255,255,0.3)")}}break}}};TimeLine.prototype.getRecord=function(timeArr,startTime,endTime){this.timeSection=timeArr;this.drawRecord()};TimeLine.prototype.drawRecord=function(){var timeArr=this.timeSection||[];var _this=this;var drawPen=_this.drawPen;for(var i=0;i<timeArr.length;i++){var startPosition=findPosition(timeArr[i].startTime);var endPosition=findPosition(timeArr[i].endTime);drawPen.fillStyle="#1890ff80";drawPen.fillRect(startPosition,0,endPosition-startPosition,48)}function findPosition(time){var scale=10;switch(_this.timeWidth){case 60:scale=10;break;case 1800:scale=20/60;break;case 3600:scale=20/30/60;break;case 86400:scale=30/60/60;break}var nowTimePostion=_this.canvasWidth/2;var position=nowTimePostion+(time-_this.nowTime)/1e3*scale;if(position>_this.canvasWidth){position=_this.canvasWidth}if(position<=0){position=0}return position}};TimeLine.prototype.drawOtherMsg=function(){this.drawSolidLine(this.canvasWidth/2,0,this.canvasWidth/2,this.canvasHeight,2,"#1890FF");this.drawPen.shadowBlur=0;if(this.isOver&&!this.isMouseDown){this.mouseTime=this.mousePosition/this.canvasWidth*this.timeWidth*1e3+this.nowTime-this.timeWidth/2*1e3;this.mouseString=this.tranTime(this.mouseTime);this.hoverTime=this.mouseString;this.hoverLeft=this.mousePosition-60;this.timeTipShow=true}else{this.timeTipShow=false}}};var Rec=function(){function Rec(jSPlugin){_classCallCheck$1(this,Rec);this.jSPlugin=jSPlugin;if(!document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){return false}this.currentTimeWidth=0;this.date=new Date;this.datepickerVisible=false;this.seekTimer=null;this.disabled=false;this.isSeeking=false;this.seekFrequency=2e3;this.recList=[];this.lastDate=null;this.nowTime=null;if(this.jSPlugin.params&&this.jSPlugin.params.seekFrequency){this.seekFrequency=this.jSPlugin.params.seekFrequency}this.recInit()}_createClass$1(Rec,[{key:"recInit",value:function recInit(){var _this2=this;if(!document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){return false}this.currentTimeWidth=0;var canvasItemWidth=parseInt(getComputedStyle(document.getElementById(this.jSPlugin.id)).width,10)-100;var canvasContainer=document.createElement("div");canvasContainer.style="display:inline-block;height:48px;";canvasContainer.id=this.jSPlugin.id+"-canvas-container";var canvasItem=document.createElement("canvas");canvasItem.id=this.jSPlugin.id+"-canvas";canvasItem.className="time-line-body";canvasItem.height="48";canvasItem.width=canvasItemWidth;canvasItem.style="display:inline-block;";canvasItem.innerHTML="该浏览器不支持canvas";canvasContainer.appendChild(canvasItem);insertAfter(canvasContainer,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")));var timeLineControlsContainer=document.createElement("div");timeLineControlsContainer.className="timeline-controls";timeLineControlsContainer.style="display:flex;width:100px;height:48px;text-align:center;line-height: 48px;vertical-align: top;background: #000000;";var timeLineControls='\n<div class="timeline-controls-scale" style="display: inline-flex;flex-direction: column;justify-content: center;vertical-align: top;padding: 0 20px;">\n  <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" id="'.concat(this.jSPlugin.id,'-timeline-scale-add">\n    <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"\n      viewBox="0 0 20 20">\n      <title>add</title>\n      <g>\n        <polygon points="0.1,0.5 15,0.5 15,15.4 0.1,15.4 \t" />\n      </g>\n      <g>\n        <path\n          fill="#FFFFFF";\n          d="M7.6,12.4c-0.3,0-0.5-0.2-0.5-0.5v-8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v8C8.1,12.2,7.9,12.4,7.6,12.4z" />\n      </g>\n      <g>\n        <path\n          fill="#FFFFFF";\n          d="M11.6,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S11.8,8.4,11.6,8.4z" />\n      </g>\n    </svg>\n  </span>\n  <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" id="').concat(this.jSPlugin.id,'-timeline-scale-sub">\n    <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"\n      viewBox="0 0 20 20">\n      <title>reduce</title>\n      <g>\n        <polygon class="st0" points="1,0.8 15.2,0.8 15.2,15 1,15 \t" />\n      </g>\n      <g>\n        <path class="st1"\n          fill="#FFFFFF";\n          d="M12.1,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S12.4,8.4,12.1,8.4z" />\n      </g>\n    </svg>\n  </span>\n</div>\n<label for="').concat(this.jSPlugin.id,'-datepicker">\n  <div class="timeline-controls-date">\n    <span>\n      <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"\n        viewBox="0 0 20 20">\n        <title>ifttt</title>\n        <g id="Rectangle">\n          <rect x="0.6" y="0.9" class="st0" width="20" height="20" />\n        </g>\n        <g id="Stroke-1">\n          <path fill="#FFFFFF"; class="st1"\n            d="M14,7.2c-0.3,0-0.5-0.2-0.5-0.5V3.4c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v3.3C14.5,7,14.2,7.2,14,7.2z" />\n        </g>\n        <g id="Stroke-3">\n          <path fill="#FFFFFF"; class="st1"\n            d="M7.3,7.2C7,7.2,6.8,7,6.8,6.7V3.4c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v3.3C7.8,7,7.6,7.2,7.3,7.2z" />\n        </g>\n        <g id="Stroke-5">\n          <path fill="#FFFFFF"; class="st1"\n            d="M18.1,9.7h-15c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h15c0.3,0,0.5,0.2,0.5,0.5S18.4,9.7,18.1,9.7z" />\n        </g>\n        <g id="Stroke-7">\n          <path fill="#FFFFFF"; class="st1" d="M16.5,19.7H4.8c-1.2,0-2.2-1-2.2-2.2V6.7c0-1.2,1-2.2,2.2-2.2h11.7c1.2,0,2.2,1,2.2,2.2v10.8\nC18.6,18.8,17.7,19.7,16.5,19.7z M4.8,5.6c-0.6,0-1.2,0.5-1.2,1.2v10.8c0,0.6,0.5,1.2,1.2,1.2h11.7c0.6,0,1.2-0.5,1.2-1.2V6.7\nc0-0.6-0.5-1.2-1.2-1.2H4.8z" />\n        </g>\n        <g id="Stroke-9">\n          <path fill="#FFFFFF"; class="st1" d="M10.6,13.3c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5s0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7\nS11,13.3,10.6,13.3z" />\n        </g>\n        <g id="Stroke-11">\n          <path fill="#FFFFFF"; class="st1" d="M14.8,13.3c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2c0.4,0,0.7,0.3,0.7,0.7\nS15.2,13.3,14.8,13.3z M14.8,12.3c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.3,0.4,0.5,0.2c0.1-0.1,0.1-0.1,0.1-0.2\nC15.1,12.4,15,12.3,14.8,12.3z" />\n        </g>\n        <g id="Stroke-13">\n          <path fill="#FFFFFF"; class="st1" d="M6.5,16.6c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7\nC7.2,16.3,6.9,16.6,6.5,16.6z" />\n        </g>\n        <g id="Stroke-15">\n          <path fill="#FFFFFF"; class="st1" d="M10.6,16.6c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7\nC11.4,16.3,11,16.6,10.6,16.6z" />\n        </g>\n      </svg>\n    </span>\n  </div>\n</label>\n<input autocomplete="off" data-toggle="').concat(this.jSPlugin.id,'-datepicker" id="').concat(this.jSPlugin.id,'-datepicker" name="').concat(this.jSPlugin.id,'-datepicker" style="opacity:0;width:24px;margin-left:-24px;cursor:pointer;" />\n');timeLineControlsContainer.innerHTML=timeLineControls;insertAfter(timeLineControlsContainer,canvasContainer);this.timeLine=new TimeLine$1(this.jSPlugin);var that=this;this.timeLine.init({id:this.jSPlugin.id+"-canvas",width:canvasItemWidth,nowTime:this.nowTime,onChange:function onChange(time){console.log("time",time,new Date(time).Format("yyyyMMddhhmmss"));var newBegin=new Date(time).Format("yyyyMMddhhmmss");console.log("----------------this.jSPlugin.url",_this2.jSPlugin.url);if(_this2.jSPlugin.Theme&&_this2.jSPlugin.Theme.decoderState.state.recordvideo){_this2.jSPlugin.Theme.setDecoderState({recordvideo:false});if(matchEzopenUrl(_this2.jSPlugin.url).type==="cloud.rec"){_this2.jSPlugin.stopSave()}}if(matchEzopenUrl(_this2.jSPlugin.url).type==="cloud.rec"){if(!_this2.isSeeking){if(that.recList.length>0){if(new Date(time).valueOf()>=that.lastDate){_this2.jSPlugin.pluginStatus.loadingSetText({text:"seek回放未找到录像片段",color:"red",delayClear:2e3})}else{_this2.unSyncTimeLine().then(function(){_this2.isSeeking=true;_this2.jSPlugin.pluginStatus.loadingStart(_this2.jSPlugin.id);_this2.jSPlugin.pluginStatus.setPlayStatus({loading:true});_this2.jSPlugin.pluginStatus.loadingSetText({text:"加载中，请稍后"});_this2.jSPlugin.Theme.setDisabled(true);_this2.jSPlugin.seek(newBegin.substr(8,6),"235959").then(function(){var timer=setInterval(function(){_this2.jSPlugin.getOSDTime().then(function(OSDdate){var tmpTime=new Date(time).valueOf()/1e3;console.log("seek时间同步:",OSDdate.data,tmpTime,OSDdate.data>=tmpTime);if(OSDdate.data>=tmpTime-2){_this2.isSeeking=false;_this2.syncTimeLine();clearInterval(timer);_this2.jSPlugin.pluginStatus.loadingStop(_this2.jSPlugin.id);_this2.jSPlugin.pluginStatus.setPlayStatus({loading:false});_this2.jSPlugin.pluginStatus.loadingClear();_this2.jSPlugin.Theme.setDisabled(false);if(that.jSPlugin.waterMark_JSPlugin){that.jSPlugin.setWaterMarkFont(that.jSPlugin.waterMark_JSPlugin)}}})},1e3)})})}}}}else{var callback=function callback(){setTimeout(function(){_this2.disabled=false},_this2.seekFrequency)};var play=_this2.jSPlugin.Theme.decoderState.state.play;var localRecSeek=function localRecSeek(callback){_this2.disabled=true;if(play){_this2.unSyncTimeLine().then(function(){_this2.jSPlugin.pluginStatus.loadingStart(_this2.jSPlugin.id);_this2.jSPlugin.pluginStatus.setPlayStatus({loading:true});_this2.jSPlugin.pluginStatus.loadingSetText({text:"加载中，请稍后"});_this2.jSPlugin.Theme.setDisabled(true);_this2.jSPlugin.pause(newBegin).then(function(){console.log("暂停成功");_this2.jSPlugin.resume(newBegin).then(function(data){console.log("恢复成功：",data);if(_this2.jSPlugin.Theme){_this2.jSPlugin.Theme.setDecoderState({play:true})}if(_this2.jSPlugin.Theme&&_this2.jSPlugin.Theme.decoderState.state.sound){_this2.jSPlugin.openSound()}if(callback){callback()}_this2.syncTimeLine();_this2.jSPlugin.pluginStatus.loadingStop(_this2.jSPlugin.id);_this2.jSPlugin.pluginStatus.setPlayStatus({loading:false});_this2.jSPlugin.pluginStatus.loadingClear();_this2.jSPlugin.Theme.setDisabled(false);if(that.jSPlugin.waterMark_JSPlugin){that.jSPlugin.setWaterMarkFont(that.jSPlugin.waterMark_JSPlugin)}})["catch"](function(err){console.log("恢复失败",err)})})["catch"](function(){console.log("暂停失败");_this2.jSPlugin.resume(newBegin).then(function(data){console.log("恢复成功");if(_this2.jSPlugin.Theme){_this2.jSPlugin.Theme.setDecoderState({play:true})}if(callback){callback()}_this2.syncTimeLine();_this2.jSPlugin.pluginStatus.loadingStop(_this2.jSPlugin.id);_this2.jSPlugin.pluginStatus.setPlayStatus({loading:false});_this2.jSPlugin.pluginStatus.loadingClear();_this2.jSPlugin.Theme.setDisabled(false);if(that.jSPlugin.waterMark_JSPlugin){that.jSPlugin.setWaterMarkFont(that.jSPlugin.waterMark_JSPlugin)}})["catch"](function(err){console.log("恢复失败",err)})})})}else{_this2.unSyncTimeLine().then(function(){_this2.jSPlugin.pluginStatus.loadingStart(_this2.jSPlugin.id);_this2.jSPlugin.pluginStatus.setPlayStatus({loading:true});_this2.jSPlugin.pluginStatus.loadingSetText({text:"加载中，请稍后"});_this2.jSPlugin.Theme.setDisabled(true);_this2.jSPlugin.pause(newBegin).then(function(){console.log("暂停成功");_this2.jSPlugin.resume(newBegin).then(function(data){if(_this2.jSPlugin.Theme){_this2.jSPlugin.Theme.setDecoderState({play:true})}if(_this2.jSPlugin.Theme&&_this2.jSPlugin.Theme.decoderState.state.sound){_this2.jSPlugin.openSound()}if(callback){callback()}_this2.syncTimeLine();_this2.jSPlugin.pluginStatus.loadingStop(_this2.jSPlugin.id);_this2.jSPlugin.pluginStatus.setPlayStatus({loading:false});_this2.jSPlugin.pluginStatus.loadingClear();_this2.jSPlugin.Theme.setDisabled(false)})["catch"](function(err){console.log("恢复失败",err)})})["catch"](function(){console.log("暂停失败");_this2.jSPlugin.resume(newBegin).then(function(data){if(_this2.jSPlugin.Theme){_this2.jSPlugin.Theme.setDecoderState({play:true})}if(callback){callback()}_this2.syncTimeLine();_this2.jSPlugin.pluginStatus.loadingStop(_this2.jSPlugin.id);_this2.jSPlugin.pluginStatus.setPlayStatus({loading:false});_this2.jSPlugin.pluginStatus.loadingClear();_this2.jSPlugin.Theme.setDisabled(false)})["catch"](function(err){console.log("恢复失败",err)})})})}if(_this2.jSPlugin.Theme&&_this2.jSPlugin.Theme.decoderState&&_this2.jSPlugin.Theme.decoderState.state&&_this2.jSPlugin.Theme.decoderState.state.zoom){_this2.jSPlugin.Theme.setDecoderState({zoom:false});_this2.jSPlugin.Zoom.stopZoom()}};if(_this2.disabled){console.log("操作频繁，等待2秒后执行");if(_this2.seekTimer){clearTimeout(_this2.seekTimer)}_this2.seekTimer=setTimeout(function(){localRecSeek(callback)},_this2.seekFrequency)}else{localRecSeek(callback)}}}}).then(function(){_this2.syncTimeLine();console.log(_this2.timeLine)});var _this=this;function injectJsCss(jSPlugin){var container=document.getElementById("".concat(jSPlugin.id,"-wrap"));addCss("".concat(jSPlugin.staticPath,"/rec/datepicker.min.css"));addJs("".concat(jSPlugin.staticPath,"/rec/jquery.min.js"),function(jSPlugin){addJs("".concat(jSPlugin.staticPath,"/rec/datepicker.js"),function(jSPlugin){addJs("".concat(jSPlugin.staticPath,"/rec/datepicker.zh-CN.js"),function(jSPlugin){var datepickerContainer=container.getElementsByClassName("datepicker-container")[0];if(!datepickerContainer&&$("#".concat(jSPlugin.id,"-datepicker")).datepicker){$("#".concat(jSPlugin.id,"-datepicker")).datepicker({autoShow:false,autoHide:true,autoPick:true,language:"zh-CN",date:new Date(getQueryString("begin",jSPlugin.params.url).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"))||new Date,format:"yyyy-mm-dd",endDate:new Date,inline:true,container:container})}datepickerContainer=container.getElementsByClassName("datepicker-container")[0];if(datepickerContainer){datepickerContainer.style.display="none"}_this.datepickerVisible=false;$("#".concat(jSPlugin.id,"-datepicker")).on("pick.datepicker",function(e){console.log("重新选择日期",e.date,new Date(e.date).Format("yyyyMMddhhmmss"),new Date(document.getElementById("".concat(jSPlugin.id,"-datepicker")).value).Format("yyyyMMdd"));if(e.date>new Date||new Date(e.date).Format("yyyyMMddhhmmss")===new Date(document.getElementById("".concat(jSPlugin.id,"-datepicker")).value).Format("yyyyMMdd")){e.preventDefault()}else{document.getElementById("".concat(jSPlugin.id,"-datepicker")).value=new Date(e.date).Format("yyyy-MM-dd");_this.renderRec(e.date);if(jSPlugin.Theme.decoderState&&jSPlugin.Theme.decoderState.state){if(jSPlugin.Theme.decoderState.state.cloudRec){jSPlugin.changePlayUrl({begin:new Date(e.date).Format("yyyyMMddhhmmss"),type:"cloud.rec"},function(){},false)}else if(jSPlugin.Theme.decoderState.state.rec){jSPlugin.changePlayUrl({begin:new Date(e.date).Format("yyyyMMddhhmmss"),type:"rec"},function(){},false)}else{jSPlugin.changePlayUrl({begin:new Date(e.date).Format("yyyyMMddhhmmss")},function(){},false)}}else{jSPlugin.changePlayUrl({begin:new Date(e.date).Format("yyyyMMddhhmmss")},function(){},false)}}if(datepickerContainer){datepickerContainer.style.display="none"}_this.datepickerVisible=false;if(jSPlugin.Theme&&jSPlugin.Theme.decoderState&&jSPlugin.Theme.decoderState.state&&jSPlugin.Theme.decoderState.state.zoom){jSPlugin.Theme.setDecoderState({zoom:false});jSPlugin.Zoom.stopZoom()}});$("#".concat(jSPlugin.id,"-datepicker")).off("click").on("click",function(e){console.log("点击日期");if(!_this.datepickerVisible){if(datepickerContainer){datepickerContainer.style.display="inline"}}else{if(datepickerContainer){datepickerContainer.style.display="none"}}_this.datepickerVisible=!_this.datepickerVisible})},function(){},jSPlugin)},function(){},jSPlugin)},function(){},jSPlugin)}injectJsCss(_this.jSPlugin);document.getElementById("".concat(this.jSPlugin.id,"-timeline-scale-add")).onclick=function(){_this2.unSyncTimeLine().then(function(){var currentTimeWidth=_this2.currentTimeWidth;if(currentTimeWidth<3){_this2.timeLine.changeSize(++_this2.currentTimeWidth)}_this2.syncTimeLine()})};document.getElementById("".concat(this.jSPlugin.id,"-timeline-scale-sub")).onclick=function(){_this2.unSyncTimeLine().then(function(){var currentTimeWidth=_this2.currentTimeWidth;if(currentTimeWidth>0){_this2.timeLine.changeSize(--_this2.currentTimeWidth)}_this2.syncTimeLine()})};function formatTimeWithTimezone(time){var timezone=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var year=time.slice(0,4);var month=time.slice(4,6);var day=time.slice(6,8);var hour=time.slice(8,10);var minute=time.slice(10,12);var second=time.slice(12,14);var date=new Date(Date.UTC(year,month-1,day,hour,minute,second));date.setHours(date.getHours()+timezone);if(date>new Date){date=new Date}var YYYY=date.getUTCFullYear();var MM=("0"+(date.getUTCMonth()+1)).slice(-2);var DD=("0"+date.getUTCDate()).slice(-2);var hh=("0"+date.getUTCHours()).slice(-2);var mm=("0"+date.getUTCMinutes()).slice(-2);var ss=("0"+date.getUTCSeconds()).slice(-2);return"".concat(YYYY).concat(MM).concat(DD).concat(hh).concat(mm).concat(ss)}var initDate=getQueryString("begin",this.jSPlugin.url)||(new Date).Format("yyyyMMdd");initDate=formatTimeWithTimezone(initDate,!!getQueryString("timeZone",this.jSPlugin.url)?parseInt(getQueryString("timeZone",this.jSPlugin.url)):0);this.renderRec("".concat(initDate.slice(0,4),"-").concat(initDate.slice(4,6),"-").concat(initDate.slice(6,8)));this.observer=new MutationObserver(function(mutations,observer){});var config={attributes:true,attributeOldValue:true,attributeFilter:["style"]};var el=document.getElementById("".concat(this.jSPlugin.id));this.observer.observe(el,config)}},{key:"setDatepickerDate",value:function setDatepickerDate(date){var container=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));var datepickerContainer=container.getElementsByClassName("datepicker-container")[0];if(datepickerContainer){var dom=datepickerContainer;var parentNode=dom.parentNode;parentNode.removeChild(dom);document.getElementById("".concat(this.jSPlugin.id,"-datepicker")).value=date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3");$("#".concat(this.jSPlugin.id,"-datepicker")).datepicker({autoShow:false,autoHide:true,autoPick:true,language:"zh-CN",defaultDate:date,format:"yyyy-mm-dd",endDate:new Date,inline:true,container:document.getElementById("".concat(this.jSPlugin.id,"-wrap"))})}}},{key:"datepickerHide",value:function datepickerHide(){var container=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));var datepickerContainer=container.getElementsByClassName("datepicker-container")[0];if(container){datepickerContainer.style.display="none"}this.datepickerVisible=false}},{key:"datepickerShow",value:function datepickerShow(){var container=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));var datepickerContainer=container.getElementsByClassName("datepicker-container")[0];if(container){datepickerContainer.style.display="inline"}this.datepickerVisible=true}},{key:"recAutoSize",value:function recAutoSize(callback){var _this3=this;var that=this;var canvasItemWidth=parseInt(getComputedStyle(document.getElementById(that.jSPlugin.id)).width,10)-100;if(document.getElementById("".concat(this.jSPlugin.id,"-canvas"))&&canvasItemWidth!==parseInt(document.getElementById("".concat(that.jSPlugin.id,"-canvas")).width)){that.unSyncTimeLine().then(function(){that.timeLine.setWidth({id:"".concat(_this3.jSPlugin.id),width:canvasItemWidth});that.syncTimeLine();callback&&callback()})}}},{key:"syncTimeLine",value:function syncTimeLine(){var _this4=this;if(this.jSPlugin.recTimer){clearInterval(this.jSPlugin.recTimer)}if(Array.isArray(window.recTimer)){window.recTimer.map(function(item){clearInterval(item)})}window.recTimer=[];var that=this;this.jSPlugin.recTimer=setInterval(function(){var getOSDTimePromise=that.jSPlugin.getOSDTime();getOSDTimePromise.then(function(data){var v=data.data;if(v===-1){console.log("获取播放时间错误")}else{if(v>0){var time=new Date(v>1e12?v:v*1e3);_this4.nowTime=time;that.timeLine.run({time:time})}}})["catch"](function(err){var pauseDate=that.jSPlugin.Theme.decoderState.state.pauseDate;that.timeLine.run({time:that.timeLine.nowTime||pauseDate})})},1e3);window.recTimer.push(this.jSPlugin.recTimer)}},{key:"unSyncTimeLine",value:function unSyncTimeLine(){var that=this;return new Promise(function(resolve,reject){if(that.jSPlugin.recTimer){clearInterval(that.jSPlugin.recTimer);that.jSPlugin.recTimer=null}if(Array.isArray(window.recTimer)){window.recTimer.map(function(item){clearInterval(item)});window.recTimer=[]}resolve()})}},{key:"renderRec",value:function renderRec(date){var _this5=this;this.date=date;var that=this;var dateStart=new Date(new Date(date).Format("yyyy-MM-dd 00:00:00").replace(/-/g,"/")).getTime();var dateEnd=new Date(new Date(date).Format("yyyy-MM-dd 23:59:59").replace(/-/g,"/")).getTime();this.timeLine.getRecord([],dateStart,dateEnd);console.log("this.jSPlugin.url",this.jSPlugin.url);var recSliceParams={accessToken:this.jSPlugin.accessToken,recType:matchEzopenUrl(this.jSPlugin.url).type==="cloud.rec"?1:2,deviceSerial:matchEzopenUrl(this.jSPlugin.url).deviceSerial,channelNo:matchEzopenUrl(this.jSPlugin.url).channelNo,startTime:dateStart,endTime:dateEnd,version:"2.0"};var recAPISuccess=function recAPISuccess(data){if(data.data&&data.data.files&&data.data.files.length>0){var dataArr=data.data.files;var nextFileTime=(new Date).getTime();var isAll=data.data.isAll;that.recList=dataArr;that.lastDate=dataArr[dataArr.length-1].endTime;if(isAll){_this5.timeLine.getRecord(dataArr,dateStart,dateEnd)}else{var recTransaction=function recTransaction(){function recAPIV2Success(data){if(data.data&&data.data.files&&data.data.files.length>0){if(data.data.isAll==false){if(data.data.files){dataArr=dataArr.concat(data.data.files);that.recList=dataArr;that.lastDate=dataArr[dataArr.length-1].endTime}nextFileTime=data.data.nextFileTime>0?data.data.nextFileTime:(new Date).getTime();recTransaction()}else{console.log("云存储执行渲染片段");that.timeLine.getRecord(dataArr,dateStart,dateEnd)}}else{that.timeLine.getRecord(dataArr,dateStart,dateEnd)}}recSliceParams.startTime=nextFileTime;request(this.jSPlugin.env.domain+"/api/lapp/video/by/time","POST",recSliceParams,"",recAPIV2Success)};recTransaction()}_this5.timeLine.run({time:new Date(dateStart)})}else if(data.data&&data.data.length>0){console.log("获取本地录像片段成功",data);that.recList=data.data;that.lastDate=data.data[data.data.length-1].endTime;that.timeLine.getRecord(data.data,dateStart,dateEnd);that.timeLine.run({time:new Date(dateStart)})}else;};var recAPIUrl=this.jSPlugin.env.domain+"/api/lapp/video/by/time";request(recAPIUrl,"POST",recSliceParams,"",recAPISuccess)}}]);return Rec}();var TimeLine=function TimeLine(params){console.log("执行TimeLine - params",params);this.state={id:params.id,start:"00:00:00",end:"24:00:00",current:0,timelag:30,timeArr:[],availTimeLine:[],scrollTop:0,index:0,date:"",noTimeLineTxt:"",disabled:false};var _this=this;this.setState=function(obj){Object.keys(obj).forEach(function(key){_this.state[key]=obj[key];if(key==="scrollTop"){document.getElementById("time-line-item").parentNode.scrollTo(0,obj[key])}if(key==="current"){document.getElementById("time-line-current").innerHTML=obj[key]}})};this.setDisabled=function(value){this.setState({disabled:value});document.getElementById("time-line-item").parentNode.style.overflowY=value?"hidden":"scroll"};this.timeToSecond=function(time){var e=time.split(":");var h=Number(e[0]);var m=Number(e[1]);var s=Number(e[2]);return h*60*60+m*60+(s?s:0)};this.minuteToTime=function(minute){var hour=Math.floor(minute/60);var m=minute%60;return(hour>9?hour:"0"+hour)+":"+(m>9?m:"0"+m)};this.timeToMinute=function(time){var e=time.split(":");var h=Number(e[0]);var m=Number(e[1]);return h*60+m};this.getPlayParam=params.getPlayParam;this.checkIsAppleDevice=function(){var u=navigator.userAgent;var ios=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);var iPad=u.indexOf("iPad")>-1;var iPhone=u.indexOf("iPhone")>-1||u.indexOf("Mac")>-1;if(ios||iPad||iPhone){return true}else{return false}};this.checkIsHarmonyOS=function(){var u=navigator.userAgent;if(u.indexOf("ohos")>-1){return true}else{return false}};if(this.checkIsHarmonyOS()){document.getElementById("time-line-item").parentNode.addEventListener("touchstart",function(){if(_this.state.disabled){return false}params.ontouchstart()},false);document.getElementById("time-line-item").parentNode.addEventListener("touchmove",function(){if(_this.state.disabled){return false}params.ontouchmove()},false);document.getElementById("time-line-item").parentNode.addEventListener("touchend",function(){if(_this.state.disabled){return false}var timer;var scollPromise=new Promise(function(resolve,reject){var preTop=-1;timer=setInterval(function(){var reactTop=document.getElementById("time-line-item").parentNode.scrollTop;if(reactTop!==preTop){console.log("scolling",reactTop,preTop);preTop=reactTop}else{console.log("scoll stop",reactTop,preTop);clearInterval(timer);resolve(reactTop)}},100)});scollPromise.then(function(reactTop){console.log("scollPromise: then",reactTop,_this);_this.rectTopTotime(reactTop);console.log("页面滚动实际高度",reactTop,_this.state);_this.getPlayParam({current:_this.state.current})});params.ontouchend()},false)}else{document.getElementById("time-line-item").parentNode.ontouchstart=function(){if(_this.state.disabled){return false}params.ontouchstart()};document.getElementById("time-line-item").parentNode.ontouchmove=function(){if(_this.state.disabled){return false}params.ontouchmove()};document.getElementById("time-line-item").parentNode.ontouchend=function(){if(_this.state.disabled){return false}var timer;var scollPromise=new Promise(function(resolve,reject){var preTop=-1;timer=setInterval(function(){var reactTop=document.getElementById("time-line-item").parentNode.scrollTop;if(reactTop!==preTop){console.log("scolling",reactTop,preTop);preTop=reactTop}else{console.log("scoll stop",reactTop,preTop);clearInterval(timer);resolve(reactTop)}},100)});scollPromise.then(function(reactTop){console.log("scollPromise: then",reactTop,_this);_this.rectTopTotime(reactTop);console.log("页面滚动实际高度",reactTop,_this.state);_this.getPlayParam({current:_this.state.current})});params.ontouchend()}}this.matchTimeDot()};TimeLine.prototype.changeScale=function(value){this.setState({timelag:value});this.matchTimeDot()};TimeLine.prototype.setDateLine=function(news,defaultIndex){if(news.length>0){if(typeof defaultIndex==="undefined"){defaultIndex=news.length-1}this.setState({availTimeLine:news,start:news[defaultIndex].st,end:news[defaultIndex].et,current:news[defaultIndex].st});console.log("this.state",this.state);this.matchRecTimeDot();this.primaryOffsetH()}else{this.setState({availTimeLine:[]});console.log("this.state",this.state);this.matchRecTimeDot()}};TimeLine.prototype.matchTimeDot=function(){var _this$state=this.state,start=_this$state.start,end=_this$state.end,timelag=_this$state.timelag;_this$state.availTimeLine;console.log("start",start,"end",end);var timeArr=[];var minute=this.timeToMinute(end);minute=Math.floor(minute/timelag)*timelag;for(var i=minute;i>=0;){var marginTop=0;var marginBottom=0;var recArr=[];if(i==minute){marginTop=70}if(i==0){marginBottom=230}var time=this.minuteToTime(i);timeArr.push({id:i,current:time,label:"a"+i,marginTop:marginTop,marginBottom:marginBottom,recArr:recArr});i=i-timelag}this.setState({timeArr:timeArr});this.renderDateLine()};TimeLine.prototype.matchRecTimeDot=function(){var _this$state2=this.state,start=_this$state2.start,end=_this$state2.end,timelag=_this$state2.timelag,availTimeLine=_this$state2.availTimeLine,timeArr=_this$state2.timeArr;console.log("start",start,"end",end);var availArr=[];var len=availTimeLine.length;if(len===0){for(var j=0;j<timeArr.length;j++){timeArr[j].recArr=[]}}else{for(var k=0;k<timeArr.length;k++){timeArr[k].recArr=[]}for(var i=0;i<len;i++){var temp=availTimeLine[i];var st=this.timeToSecond(temp.st);var et=this.timeToSecond(temp.et);var stminute=void 0;var etminute=void 0;var stAvailPercent=0;var etAvailPercent=0;stminute=Math.floor(st/(timelag*60))*timelag;stAvailPercent=(st-stminute*60)/timelag;etminute=Math.floor(et/(timelag*60))*timelag;etAvailPercent=(et-etminute*60)/timelag;availArr[i]={st:stminute,et:etminute,stAvailPercent:stAvailPercent,etAvailPercent:etAvailPercent};for(var j=0;j<timeArr.length;j++){if(timeArr[j].id==stminute&&timeArr[j].id==etminute){var height=etAvailPercent-stAvailPercent;var top=60-etAvailPercent;timeArr[j].recArr.push({height:height,top:top})}else{if(timeArr[j].id==stminute){timeArr[j].recArr.push({height:60-stAvailPercent,top:0})}else if(timeArr[j].id==etminute){timeArr[j].recArr.push({height:etAvailPercent,top:60-etAvailPercent})}else if(timeArr[j].id>stminute&&timeArr[j].id<etminute){timeArr[j].recArr.push({height:60,top:0})}}}}}console.log("availArr: ",availArr);this.setState({timeArr:timeArr});console.log("timeArr:",this.state);this.renderDateLine()};TimeLine.prototype.renderDateLine=function(){var _this$state3=this.state,id=_this$state3.id,timeArr=_this$state3.timeArr;console.log("id,timeArr",id,timeArr);var container=document.getElementById("time-line-item");container.innerHTML="";timeArr.forEach(function(item,index){var timeItemDOM=document.createElement("div");timeItemDOM.setAttribute("class","time-item");timeItemDOM.style="margin-top: ".concat(item.marginTop,"px; margin-bottom: ").concat(item.marginBottom,"px; border-right-color: ").concat(item.borderColor,";");var scaleDOM=document.createElement("div");scaleDOM.setAttribute("class","scale");var timeItemHtml='<div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale" style="width:10px"></div>';item.recArr.forEach(function(i,j){timeItemHtml+='<div class="item-unavail" style="height: '.concat(i.height,"px;background-color:#A8B9ED; top: ").concat(i.top,'px"></div>')});timeItemHtml+="<div id=".concat(item.label,' style="position: relative; top: 51px; left: 40%"> ').concat(item.current,"</div>");timeItemDOM.innerHTML=timeItemHtml;container.appendChild(timeItemDOM)})};TimeLine.prototype.primaryOffsetH=function(){var _this$state4=this.state,start=_this$state4.start,timelag=_this$state4.timelag,timeArr=_this$state4.timeArr;var currentItem=timeArr[0].current;var currentTime=this.timeToSecond(currentItem);var startSecond=this.timeToSecond(start);var offsetS=currentTime-startSecond;var offsetH=Math.ceil(offsetS/timelag)+60;this.setState({scrollTop:offsetH});console.log("起始偏移量",offsetH)};TimeLine.prototype.currentOffsetH=function(){var _this$state5=this.state,current=_this$state5.current,timelag=_this$state5.timelag,timeArr=_this$state5.timeArr;var startItem=timeArr[0].current;var startSecond=this.timeToSecond(startItem);var currentSecond=this.timeToSecond(current);var offsetS=startSecond-currentSecond;var offsetH=Math.ceil(offsetS/timelag)+60;this.setState({scrollTop:offsetH})};TimeLine.prototype.rectTopTotime=function(reactTop){var timelag=this.state.timelag;var index=Math.floor(reactTop/60);var offsetH=reactTop-index*60;var current;var offsetSecond;console.log("index：",index,"offsetH:",offsetH);if(offsetH==0){current=this.state.timeArr[index-1].current;offsetSecond=0}else{var time=this.state.timeArr[index].current;var minute=this.timeToMinute(time);var offsetY=60-offsetH;var offsetS=offsetY*timelag;var offsetM=Math.floor(offsetS/60)+minute;var second=Math.floor(offsetS/60)*60;offsetSecond=Math.ceil(offsetS-second);current=this.minuteToTime(offsetM)}this.setState({current:current+":"+(offsetSecond>9?offsetSecond:"0"+offsetSecond),scrollTop:reactTop})};TimeLine.prototype.stepScrollTimeLine=function(time){this.setState({current:time});this.currentOffsetH()};TimeLine.prototype.secondCountDown=function(time){var current=this.state.current;var temp=current.split(":");var hour=Number(temp[0]);var minute=Number(temp[1]);var second=Number(temp[2]);var t=hour*60*60+minute*60+second+1;var h=Math.floor(t/3600);var m=Math.floor((t-h*3600)/60);var s=t-h*3600-m*60;this.setState({current:(h>9?h:"0"+h)+":"+(m>9?m:"0"+m)+":"+(s>9?s:"0"+s)})};var MobileTimeLine=TimeLine;Date.prototype.Format=function(fmt){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(fmt))fmt=fmt.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}return fmt};function format(now){var time=new Date(now);var h=time.getHours();var m=time.getMinutes();var s=time.getSeconds();return(h>9?h:"0"+h)+":"+(m>9?m:"0"+m)+":"+(s>9?s:"0"+s)}var MobileRec=function(){function MobileRec(jSPlugin,changeRecSpeed,resetMobileZoomStatus){var _this=this;_classCallCheck$1(this,MobileRec);this.changeRecSpeed=changeRecSpeed;this.resetMobileZoomStatus=resetMobileZoomStatus;this.isMobile=true;this.jSPlugin=jSPlugin;this.date=(new Date).Format("yyyy-MM-dd");this.begin=((new Date).Format("yyyy-MM-dd")+" 00:00:00").replace(/-/g,"/");this.end=((new Date).Format("yyyy-MM-dd")+" 23:59:59").replace(/-/g,"/");this.initBegin=null;this.initEnd=null;this.type=matchEzopenUrl(this.jSPlugin.url).type;this.operating=false;this.seekTimer=null;this.disabled=false;this.seekFrequency=2e3;this.recList=[];this.isSeeking=false;if(this.jSPlugin.params&&this.jSPlugin.params.seekFrequency){this.seekFrequency=this.jSPlugin.params.seekFrequency}var oS=document.createElement("style");oS.innerHTML='\n    body{\n      padding: 0;\n      margin: 0;\n    }\n    .time-line-container {\n      text-align: left;\n      height: 300px;\n      /* outline: 1px solid red; */\n      /* background: gray; */\n      position: relative;\n      /* padding-top: 60px; */\n      margin-top: 20px;\n    }\n\n    .time-line-container .time-line-item-container {\n      display: inline-block;\n      /* height: 400px; */\n      width: 30%;\n      /* background: indianred; */\n      overflow-y: scroll;\n      overflow-x: hidden;\n      /* padding-top: 60px; */\n      height: 300px;\n      box-sizing: border-box;\n      white-space: nowrap;\n      position: relative;\n    }\n\n    .time-line-container .time-line-item-container::-webkit-scrollbar {\n      width: 0px;\n      /*滚动条宽度*/\n      height: 0px;\n      /*滚动条高度*/\n    }\n\n    .time-line-item .time-item {\n      position: relative;\n      box-sizing: border-box;\n      height: 60px;\n      font-size: 12px;\n      color: rgb(150, 150, 150);\n      border-right: 6px solid;\n      border-right-color: #ddd;\n    }\n\n    .time-line-item .time-item .scale {\n      width: 6px;\n      height: 9px;\n      border-bottom: 1px solid #ccc;\n      float: right;\n      clear: both;\n    }\n\n    .time-line-item .time-item .item-unavail {\n      width: 6px;\n      position: absolute;\n      left: 100%;\n      background-color: #ddd;\n    }\n\n    .time-line-container .current-time {\n      position: absolute;\n      left: 0;\n      top: 40px;\n      height: 29px;\n      /* line-height: 58px; */\n      border-bottom: 1px solid #648FFC;\n      width: 60%;\n      margin-left: 26%;\n    }\n\n    .time-line-container .current-time .current-time-bg {\n      position: relative;\n      top: 15px;\n      width: 100px;\n      height: 29px;\n      line-height: 29px;\n      left: -70px;\n      font-size: 12px;\n      color: #2C2C2C;\n    }\n\n    .time-line-container .current-time .current-time-bg::before {\n      content: \'\';\n      display: inline-block;\n      width: 6px;\n      height: 6px;\n      border-radius: 100%;\n      background: #648FFC;\n      top: 11px;\n      position: absolute;\n      right: 30px;\n    }\n\n    .date-switch-container {\n      height: 40px;\n      position: relative;\n      text-align: center;\n      margin: 20px 10px;\n    }\n\n    .date-switch-container .current-date {\n      line-height: 40px;\n      height: 22px;\n      font-size: 16px;\n      color: #2C2C2C;\n      text-align: center;\n      font-weight: bold;\n    }\n\n    .date-container {\n      width: 40px;\n      height: 40px;\n      position: absolute;\n      right: 0;\n      top: 0;\n    }\n\n    .rec-type-container {\n      display: flex;\n      justify-content: space-between;\n    }\n\n    .rec-type-container .rec-type-text {\n      padding: 0 15px;\n      font-size: 12px;\n      color: #2C2C2C;\n    }\n\n    .rec-type-container .rec-type-switch {\n      padding: 0 20px;\n    }\n\n    .date-container input {\n      position: absolute;\n      opacity: 0;\n      display: inline-block;\n      width: 40px;\n      height: 40px;\n      z-index: 10;\n      left: 0;\n    }\n\n    .date-container label {\n      position: absolute;\n      left: 0;\n      top: 0;\n      /* display: none; */\n      z-index: 0;\n    }\n\n    .date-icon {\n      display: inline-block;\n      width: 40px;\n      height: 40px;\n      background: url(\'https://resource.eziot.com/group2/M00/00/6A/CtwQF2F6VieAQrU9AAABP-_Nsqo949.png\') no-repeat 100% 100%;\n    }\n    .select-container {\n      padding: 10px;\n      display: flex;\n      justify-content: space-between;\n    }\n\n    .advice {\n      height: 24px;\n      width: 70px;\n      display: flex;\n      justify-content: space-between;\n      line-height: 24px;\n      background: #F8F8F8;\n      border-radius: 8px;\n    }\n\n    .advice span {\n      width: 40px;\n      display: inline-block;\n    }\n\n    input[type="checkbox"]:not(:checked)+.advice span:first-child {\n      box-shadow: 0px 2px 5px 0px rgb(23 45 101 / 20%);\n      border-radius: 8px;\n      text-align: center;\n\n    }\n\n    input[type="checkbox"]:checked+.advice span:last-child {\n      box-shadow: 0px 2px 5px 0px rgb(23 45 101 / 20%);\n      border-radius: 8px;\n      text-align: center;\n    }\n\n    input[type="checkbox"]:not(:checked)+.advice span:first-child svg {\n      fill: #648FFC !important;\n    }\n\n    input[type="checkbox"]:checked+.advice span:last-child svg {\n      fill: #648FFC !important;\n    }';document.getElementsByTagName("head")[0].appendChild(oS);if(getQueryString("begin",this.jSPlugin.url)){var begin=getQueryString("begin",this.jSPlugin.url);this.date=begin.slice(0,4)+"/"+begin.slice(4,6)+"/"+begin.slice(6,8);this.begin=this.date+" ".concat(begin.slice(8,10)||"00",":").concat(begin.slice(10,12)||"00",":").concat(begin.slice(12,14)||"00");this.end=this.date+" 23:59:59";this.initBegin=this.begin}if(getQueryString("end",this.jSPlugin.url)){var end=getQueryString("end",this.jSPlugin.url);this.end=this.date+" ".concat(end.slice(8,10)||"23",":").concat(end.slice(10,12)||"59",":").concat(end.slice(12,14)||"59");this.initEnd=this.end}var mobileRecTitleWrap=document.createElement("div");mobileRecTitleWrap.id="date-switch-container-wrap";mobileRecTitleWrap.className="date-switch-container-wrap";mobileRecTitleWrap.style="";mobileRecTitleWrap.innerHTML='\n      <div class="date-switch-container">\n      <div class="current-date" id="current-date">今日录像</div>\n      <div class="date-container">\n        <label for="date">\n          <div class="date-icon"></div>\n        </label>\n        <input type="date" name="date" id="date" value="'.concat(this.date.replace(/\//g,"-")||(new Date).Format("yyyy-MM-dd"),'" />\n      </div>\n    </div>\n        ');insertAfter(mobileRecTitleWrap,document.getElementById("".concat(this.jSPlugin.id,"-wrap")));var mobileRecSwitchWrap=document.createElement("div");mobileRecSwitchWrap.id="rec-type-container-wrap";mobileRecSwitchWrap.className="rec-type-container-wrap";mobileRecSwitchWrap.style="";mobileRecSwitchWrap.innerHTML='\n    <div class="rec-type-container">\n    <div class="rec-type-text">共<span id="recCount">0</span>个录像</div>\n    <div class="rec-type-switch">\n      <label>\n        <input type="checkbox" name="type" id="cloudType" value="1" hidden />\n        <label for="cloudType" class="advice">\n          <span>\n          <svg fill="#CCCCCC" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="2 0 20 20">\n            <path class="st0" d="M12.6,5c-2.3,0.1-4.3,1.4-5.3,3.3L7.2,8.6c-2.4,0.5-4.1,2.5-4.1,4.9c0,2.8,2.4,5,5.2,5h9.9\n            c2.4,0,4.3-1.9,4.3-4.2l0-0.2c-0.1-2-1.6-3.5-3.5-3.9l-0.1,0l0-0.2c-0.4-2.8-3-5-6.1-5L12.6,5z"/>\n          </svg>\n        </span>\n        <span>\n          <svg fill="#CCCCCC" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="2 0 20 20">\n            <path id="形状结合" class="st0" d="M14.3,4c0.6,0,1.2,0.2,1.7,0.7l0,0L18.3,7C18.7,7.4,19,8,19,8.6l0,0v9c0,1.3-1.1,2.3-2.4,2.3\n\tl0,0H8.4C7.1,20,6,19,6,17.7l0,0V6.3C6,5,7.1,4,8.4,4l0,0H14.3z M9.7,7.2C9.3,7.2,8.9,7.6,8.9,8l0,0v2.5l0,0.1\n\tc0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C10.4,7.5,10,7.2,9.7,7.2z M12.2,7.2c-0.4,0-0.8,0.3-0.8,0.8l0,0v2.5\n\tl0,0.1c0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C12.9,7.5,12.5,7.2,12.2,7.2z M14.7,7.2c-0.4,0-0.8,0.3-0.8,0.8l0,0\n\tv2.5l0,0.1c0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C15.4,7.5,15,7.2,14.7,7.2z"/>\n          </svg>\n        </span>\n        </label>\n      </label>\n    </div>\n  </div>\n        ';insertAfter(mobileRecSwitchWrap,mobileRecTitleWrap);var mobileRecWrap=document.createElement("div");mobileRecWrap.id="mobile-rec-wrap";mobileRecWrap.className="mobileRec-wrap";mobileRecWrap.style="";mobileRecWrap.innerHTML='\n    <div class="time-line-container">\n    <div class="current-time">\n      <div class="current-time-bg" id="time-line-current">00:00:00</div>\n    </div>\n    <div class="time-line-item-container">\n      <div class="time-line-item" id="time-line-item">\n      </div>\n    </div>\n    </div>\n      ';insertAfter(mobileRecWrap,mobileRecSwitchWrap);var getPlayParam=function getPlayParam(data){var that=_this;console.log("子组件传值到父组件",data,data.current);var st=data.current;var date=new Date(_this.date).Format("yyyyMMdd").substr(0,8)+(data.current?st.replace(/:/g,""):data.current.replace(/:/g,""));if(_this.type==="cloud.rec"){if(!_this.isSeeking){if(that.recList.length>0){if(new Date("".concat(_this.date," ").concat(data.current)).valueOf()>=that.lastDate){_this.jSPlugin.pluginStatus.loadingSetText({text:"seek回放未找到录像片段",color:"red",delayClear:2e3});_this.syncTimeLine()}else{_this.unSyncTimeLine().then(function(){_this.isSeeking=true;_this.jSPlugin.pluginStatus.loadingStart(_this.jSPlugin.id);_this.jSPlugin.pluginStatus.setPlayStatus({loading:true});_this.jSPlugin.pluginStatus.loadingSetText({text:"加载中，请稍后"});_this.jSPlugin.Theme.setDisabled(true);_this.jSPlugin.seek(date.substr(8,6),"235959").then(function(){var timer=setInterval(function(){_this.jSPlugin.getOSDTime().then(function(OSDdate){console.log("seek时间同步:",new Date(OSDdate.data*1e3).Format("yyyyMMddhhmmss"),date,new Date(OSDdate.data*1e3).Format("yyyyMMddhhmmss")>=date);if(new Date(OSDdate.data*1e3).Format("yyyyMMddhhmmss")>=date){_this.isSeeking=false;_this.syncTimeLine();clearInterval(timer);_this.jSPlugin.pluginStatus.loadingStop(_this.jSPlugin.id);_this.jSPlugin.pluginStatus.setPlayStatus({loading:false});_this.jSPlugin.pluginStatus.loadingClear();_this.jSPlugin.Theme.setDisabled(false);if(_this.jSPlugin.waterMark_JSPlugin){that.jSPlugin.setWaterMarkFont(that.jSPlugin.waterMark_JSPlugin)}}})},1e3)})})}}}}else{var callback=function callback(){setTimeout(function(){_this.disabled=false},_this.seekFrequency)};var play=_this.jSPlugin.Theme.decoderState.state.play;var localRecSeek=function localRecSeek(callback){_this.disabled=true;_this.jSPlugin.pluginStatus.loadingStart(_this.jSPlugin.id);_this.jSPlugin.pluginStatus.setPlayStatus({loading:true});_this.jSPlugin.pluginStatus.loadingSetText({text:"加载中，请稍后"});_this.jSPlugin.Theme.setDisabled(true);if(play){_this.unSyncTimeLine().then(function(){_this.jSPlugin.pause(date).then(function(){console.log("暂停成功");_this.jSPlugin.resume(date).then(function(data){console.log("恢复成功");_this.syncTimeLine();_this.jSPlugin.pluginStatus.loadingStop(_this.jSPlugin.id);_this.jSPlugin.pluginStatus.setPlayStatus({loading:false});_this.jSPlugin.pluginStatus.loadingClear();_this.jSPlugin.Theme.setDisabled(false);if(_this.jSPlugin.waterMark_JSPlugin){that.jSPlugin.setWaterMarkFont(that.jSPlugin.waterMark_JSPlugin)}if(callback){callback()}})})["catch"](function(){console.log("暂停失败");_this.jSPlugin.resume(date).then(function(data){console.log("恢复成功");_this.syncTimeLine();_this.jSPlugin.pluginStatus.loadingStop(_this.jSPlugin.id);_this.jSPlugin.pluginStatus.setPlayStatus({loading:false});_this.jSPlugin.pluginStatus.loadingClear();_this.jSPlugin.Theme.setDisabled(false);if(callback){callback()}})})})}else{_this.unSyncTimeLine().then(function(){_this.jSPlugin.resume(date).then(function(data){console.log("恢复成功");_this.syncTimeLine();if(callback){callback()}})})}};if(_this.disabled){console.log("操作频繁，等待2秒后执行");if(_this.seekTimer){clearTimeout(_this.seekTimer)}_this.seekTimer=setTimeout(function(){localRecSeek(callback)},_this.seekFrequency)}else{localRecSeek(callback)}}};var ontouchstart=function ontouchstart(){_this.operating=true;_this.unSyncTimeLine()};var ontouchmove=function ontouchmove(){if(_this.operating==false){_this.operating=true;_this.unSyncTimeLine()}};var ontouchend=function ontouchend(){_this.operating=false};this.TimeLineOBJ=new MobileTimeLine({id:"time-line-item",getPlayParam:getPlayParam,ontouchstart:ontouchstart,ontouchmove:ontouchmove,ontouchend:ontouchend});this.fetchDeviceRec();document.getElementById("date").addEventListener("change",function(e){console.log("日期变化",e.target.value);var value=e.target.value;var valueInt=parseInt(new Date(value).Format("yyyy/MM/dd").replace(/\//g,""));var nowDate=new Date;var newDateInt=parseInt(nowDate.Format("yyyy/MM/dd").replace(/\//g,""));if(valueInt>newDateInt){document.getElementById("date").value=new Date(_this.date.replace(/\//g,"-")||nowDate.Format("yyyy-MM-dd")).Format("yyyy-MM-dd");return}_this.date=new Date(value).Format("yyyy/MM/dd");_this.begin=_this.date+" 00:00:00";_this.end=_this.date+" 23:59:59";_this.jSPlugin.changePlayUrl({type:_this.type,begin:"".concat(new Date(_this.date).Format("yyyyMMdd"),"000000")}).then(function(url){setTimeout(function(){var dateEle=document.getElementById("date");if(dateEle)dateEle.value=value},0)});_this.changeRecSpeed(1);_this.resetMobileZoomStatus()});document.getElementById("cloudType").checked=this.type==="rec";document.getElementById("cloudType").addEventListener("change",function(e){var recType=e.target.checked?2:1;_this.type=e.target.checked?"rec":"cloud.rec";console.log("recType",recType);_this.jSPlugin.changePlayUrl({type:_this.type,begin:"".concat(new Date(_this.date).Format("yyyyMMdd"),"000000")}).then(function(){console.log("切换类型成功");_this.syncTimeLine();_this.changeRecSpeed(1);_this.resetMobileZoomStatus()},function(err){console.log("err",err)})["catch"](function(err){console.log(err)})});this.syncTimeLine()}_createClass$1(MobileRec,[{key:"fetchDeviceRec",value:function fetchDeviceRec(){var _this2=this;var doRender=function doRender(result){var len=result.length;document.getElementById("recCount").innerHTML=len;var availArr=[];for(var i=len-1;i>=0;i--){var res=result[i];var et=format(res.endTime);var st=format(res.startTime);availArr.push({st:st,et:et})}{_this2.TimeLineOBJ.setDateLine(availArr)}};var data=new FormData;var that=this;data.append("deviceSerial",matchEzopenUrl(this.jSPlugin.url).deviceSerial);data.append("channelNo",matchEzopenUrl(this.jSPlugin.url).channelNo);data.append("accessToken",this.jSPlugin.accessToken);data.append("recType",this.type==="cloud.rec"?1:2);data.append("startTime",new Date(this.begin).getTime());data.append("endTime",new Date(this.end).getTime());fetch(this.jSPlugin.env.domain+"/api/lapp/video/by/time",{method:"POST",body:data}).then(function(response){return response.json()}).then(function(res){if(res.code==200&&res.data){var result=[];result=res.data;that.recList=result;that.lastDate=result[result.length-1].endTime;doRender(result)}else{doRender([])}})}},{key:"syncTimeLine",value:function syncTimeLine(){var _this3=this;var dateFormat=function dateFormat(now){var time=new Date(now);var h=time.getHours();var m=time.getMinutes();var s=time.getSeconds();return(h>9?h:"0"+h)+":"+(m>9?m:"0"+m)+":"+(s>9?s:"0"+s)};if(this.jSPlugin.recTimer){clearInterval(this.jSPlugin.recTimer)}var that=this;this.jSPlugin.recTimer=setInterval(function(){if(_this3.operating){console.log("操作中");return false}_this3.jSPlugin.getOSDTime().then(function(res){if(res.data>0){that.TimeLineOBJ.stepScrollTimeLine(dateFormat(res.data*1e3))}if(!!that.lastDate&&(res.data>1e12?res.data:res.data*1e3)>=that.lastDate){that.jSPlugin.pluginStatus.loadingSetText({text:"回放结束",color:"red"})}})["catch"](function(err){console.log("err:-----",err);console.log("未找到当前获取播放时间，等待中...")})},1e3)}},{key:"unSyncTimeLine",value:function unSyncTimeLine(){var that=this;return new Promise(function(resolve,reject){if(that.jSPlugin.recTimer){clearInterval(that.jSPlugin.recTimer)}resolve()})}}]);return MobileRec}();var ptzStart=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"ptzStart"},{code:10001,msg:"操作失败",desc:"参数为空或格式不正确",text:"参数错误",type:"ptzStart"},{code:10002,msg:"账号异常，操作失败",desc:"重新获取accessToken",text:"accessToken异常或过期",type:"ptzStart"},{code:10005,msg:"账号异常，操作失败",desc:"appKey被冻结",text:"appKey异常",type:"ptzStart"},{code:20002,msg:"设备不存在，请检查设备连接情况",desc:"",text:"设备不存在",type:"ptzStart"},{code:20006,msg:"操作失败，请检查设备网络情况",desc:"检查设备网络状况，稍后再试",text:"网络异常",type:"ptzStart"},{code:20007,msg:"操作失败，请检查设备在线情况",desc:"检查设备是否在线",text:"设备不在线",type:"ptzStart"},{code:20008,msg:"操作过于频繁，稍后再试",desc:"操作过于频繁，稍后再试",text:"设备响应超时",type:"ptzStart"},{code:20014,msg:"操作失败",desc:"",text:"deviceSerial不合法",type:"ptzStart"},{code:20032,msg:"通道不存在请检查设备连接情况",desc:"该用户下通道不存在",text:"该用户下通道不存在",type:"ptzStart"},{code:49999,msg:"操作失败，请重试",desc:"接口调用异常",text:"数据异常",type:"ptzStart"},{code:6e4,msg:"操作失败，设备不支持该操作",desc:"",text:"设备不支持云台控制",type:"ptzStart"},{code:60001,msg:"操作失败，用户无权限",desc:"",text:"用户无云台控制权限",type:"ptzStart"},{code:60002,msg:"设备已旋转到上限位",desc:"",text:"设备云台旋转达到上限位",type:"ptzStart"},{code:60003,msg:"设备已旋转到下限位",desc:"",text:"设备云台旋转达到下限位",type:"ptzStart"},{code:60004,msg:"设备已旋转到左限位",desc:"",text:"设备云台旋转达到左限位",type:"ptzStart"},{code:60005,msg:"设备已旋转到右限位",desc:"",text:"设备云台旋转达到右限位",type:"ptzStart"},{code:60006,msg:"操作失败，请重试",desc:"稍候再试",text:"云台当前操作失败",type:"ptzStart"},{code:60009,msg:"设备正在操作中",desc:"",text:"正在调用预置点",type:"ptzStart"},{code:60020,msg:"操作失败",desc:"确认设备是否支持该操作",text:"不支持该命令",type:"ptzStart"}];var ptzStop=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"ptzStop"},{code:10001,msg:"操作失败",desc:"参数为空或格式不正确",text:"参数错误",type:"ptzStop"},{code:10002,msg:"账号异常，操作失败",desc:"重新获取accessToken",text:"accessToken异常或过期",type:"ptzStop"},{code:10005,msg:"账号异常，操作失败",desc:"appKey被冻结",text:"appKey异常",type:"ptzStop"},{code:20002,msg:"设备不存在，请检查设备连接情况",desc:"",text:"设备不存在",type:"ptzStop"},{code:20006,msg:"操作失败，请检查设备网络情况",desc:"检查设备网络状况，稍后再试",text:"网络异常",type:"ptzStop"},{code:20007,msg:"操作失败，请检查设备在线情况",desc:"检查设备是否在线",text:"设备不在线",type:"ptzStop"},{code:20008,msg:"操作过于频繁，稍后再试",desc:"操作过于频繁，稍后再试",text:"设备响应超时",type:"ptzStop"},{code:20014,msg:"操作失败",desc:"",text:"deviceSerial不合法",type:"ptzStop"},{code:20032,msg:"通道不存在请检查设备连接情况",desc:"该用户下通道不存在",text:"该用户下通道不存在",type:"ptzStop"},{code:49999,msg:"操作失败，请重试",desc:"接口调用异常",text:"数据异常",type:"ptzStop"},{code:6e4,msg:"操作失败，设备不支持该操作",desc:"",text:"设备不支持云台控制",type:"ptzStop"},{code:60001,msg:"操作失败，用户无权限",desc:"",text:"用户无云台控制权限",type:"ptzStop"},{code:60006,msg:"操作失败，请重试",desc:"稍候再试",text:"云台当前操作失败",type:"ptzStop"},{code:60009,msg:"设备正在操作中",desc:"",text:"正在调用预置点",type:"ptzStop"},{code:60020,msg:"操作失败",desc:"确认设备是否支持该操作",text:"不支持该命令",type:"ptzStop"}];var talk=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"talk"},{code:10001,msg:"播放失败",desc:"参数为空或格式不正确",text:"参数错误",type:"talk"},{code:10002,msg:"账号异常，操作失败",desc:"",text:"accessToken异常或过期",type:"talk"},{code:10031,msg:"账号异常，操作失败",desc:"",text:"子账户或萤石用户没有权限",type:"talk"},{code:20002,msg:"设备不存在请检查设备连接情况",desc:"设备序列号输入有误或者设备未被添加或者通道异常",text:"设备不存在",type:"talk"},{code:60059,msg:"播放失败",desc:"",text:"ezopen地址均不可用",type:"talk"}];var time=[{code:200,msg:"",desc:"",text:"操作成功",type:"time"},{code:10001,msg:"播放失败",desc:"参数为空或格式不正确",text:"参数错误",type:"time"},{code:10002,msg:"账号异常，播放失败",desc:"",text:"accessToken异常或过期",type:"time"},{code:10004,msg:"账号异常，播放失败",desc:"",text:"用户不存在",type:"time"},{code:10005,msg:"账号异常，播放失败",desc:"",text:"appKey异常",type:"time"},{code:10011,msg:"播放失败",desc:"设备对应用户未注册至应用下",text:"未开通萤石服务",type:"time"},{code:10013,msg:"账号异常，播放失败",desc:"",text:"非开发者账号无权限调用",type:"time"},{code:10030,msg:"播放失败",desc:"",text:"appkey和appsecret不匹配",type:"time"},{code:20002,msg:"设备不存在请检查设备连接情况",desc:"设备序列号输入有误或者设备未被添加或者通道异常",text:"设备不存在",type:"time"},{code:20014,msg:"播放失败",desc:"",text:"deviceSerial不合法",type:"time"},{code:20032,msg:"设备不存在请检查设备连接情况",desc:"",text:"该用户下通道不存在",type:"time"},{code:60024,msg:"播放失败请重试",desc:"",text:"取消订阅操作失败",type:"time"},{code:49999,msg:"播放失败请重试",desc:"",text:"操作异常",type:"time"}];var uikitCode={ptzStart:ptzStart,ptzStop:ptzStop,talk:talk,time:time};var UikitCode=function(){function UikitCode(x,y){_classCallCheck$1(this,UikitCode);this.coreX=x;this.coreY=y;console.log("uikitCode",uikitCode)}_createClass$1(UikitCode,[{key:"toString",value:function toString(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"matchInfo",value:function matchInfo(code,type){if(uikitCode[type]){var obj={};uikitCode[type].map(function(item){if(item.code==code){obj=item}});return obj}else{return{code:500,msg:"未知错误",desc:"未知的错误码，或错误码类型有误",text:"",type:type}}}}]);return UikitCode}();var Ptz=function(){function Ptz(jSPlugin){var _this=this;_classCallCheck$1(this,Ptz);this.jSPlugin=jSPlugin;this.codeHandler=new UikitCode;this.pluginStatus=new Status(this,this.jSPlugin.id);this.showPtz=false;console.log("云台初始化");if(document.getElementById(this.jSPlugin.id+"-ez-ptz-item")){return false}var ptzWrap=document.createElement("div");ptzWrap.id=this.jSPlugin.id+"-ez-ptz-item";ptzWrap.className="ez-ptz-wrap";ptzWrap.style="display:none";var oS=document.createElement("style");oS.innerHTML="\n    .ez-ptz-container {\n      position: relative;\n      width: 80px;\n      height: 80px;\n      background: rgba(255, 255, 255, 0.80);\n      box-shadow: 0px 0px 33px 4px rgb(0 0 0 / 15%);\n      border: 1px solid rgba(255, 255, 255, 0.80);\n      border-radius: 100%;\n      cursor: pointer;\n      overflow: hidden;\n      user-select: none;\n    }\n    .ez-ptz-container .ez-ptz-icon.top {\n      width: 0;\n      height: 0;\n      border-left: 3px solid transparent;\n      border-right: 3px solid transparent;\n      border-bottom: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 3px);\n      top: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.top.active {\n      border-bottom-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.bottom {\n      width: 0;\n      height: 0;\n      border-left: 3px solid transparent;\n      border-right: 3px solid transparent;\n      border-top: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 3px);\n      bottom: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.bottom.active {\n      border-top-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.right {\n      width: 0;\n      height: 0;\n      border-top: 3px solid transparent;\n      border-bottom: 3px solid transparent;\n      border-left: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 3px);\n      right: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.right.active {\n      border-left-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.left {\n      width: 0;\n      height: 0;\n      border-top: 3px solid transparent;\n      border-bottom: 3px solid transparent;\n      border-right: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 3px);\n      left: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.left.active {\n      border-right-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-main.center {\n      width: 23px;\n      height: 23px;\n      background: #1890FF;\n      border-radius: 100%;\n      top: calc(50% - 12.3px);\n      left: calc(50% - 12.3px);\n      position: absolute;\n    }\n\n    .ez-ptz-wrap {\n      position: absolute;\n      right: 20px;\n      top: calc(50% - 50px);\n      width: 100px;\n      height: 100px;\n      z-index: 999;\n    }\n\n    .ez-ptz-close {\n      position: absolute;\n      color: #FFFFFF;\n      top: 0;\n      right: 0px;\n    }";document.getElementsByTagName("head")[0].appendChild(oS);ptzWrap.innerHTML='\n      <div class="ez-ptz-container" id="'.concat(this.jSPlugin.id,'-ez-ptz-container" style="position: relative;width: 80px;height: 80px;background: rgba(255, 255, 255, 0.80);box-shadow: 0px 0px 33px 4px rgba(0, 0, 0, 0.15);border: 1px solid rgba(255, 255, 255, 0.80);border-radius: 100%;cursor: pointer;overflow: hidden;user-select: none;">\n        <div class="ez-ptz-main center"></div>\n        <div class="ez-ptz-icon top active"></div>\n        <div class="ez-ptz-icon left active"></div>\n        <div class="ez-ptz-icon bottom active"></div>\n        <div class="ez-ptz-icon right active"></div>\n      ');document.getElementById("".concat(jSPlugin.id,"-wrap")).appendChild(ptzWrap);document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).onmousedown=function(e){e.preventDefault();console.log("触摸开始");_this._handlePtzTouch(e,"start")};document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).onmouseup=function(e){e.preventDefault();console.log("触摸结束");_this._handlePtzTouch(e,"stop")};document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).ontouchstart=function(e){e.preventDefault();console.log("触摸开始");_this._handlePtzTouch(e,"start")};document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).ontouchend=function(e){e.preventDefault();console.log("触摸结束",e);_this._handlePtzTouch(e,"stop")}}_createClass$1(Ptz,[{key:"show",value:function show(){if(document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item")).style="display: inline-block"}this.showPtz=true;if(this.jSPlugin.eventEmitter){this.jSPlugin.eventEmitter.emit("openPtz",{eventType:"openPtz",code:0,target:this,msg:"开启云台"})}}},{key:"hide",value:function hide(){if(document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item")).style="display: none"}this.showPtz=false;if(this.jSPlugin.eventEmitter){this.jSPlugin.eventEmitter.emit("closePtz",{eventType:"closePtz",code:0,target:this,msg:"关闭云台"})}}},{key:"_handlePtzTouch",value:function _handlePtzTouch(e,type){var _this2=this;var container=document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).getBoundingClientRect();var containerCenterX=container.left+41;var containerCenterY=container.top+41;var eventX=e.x||e.changedTouches[0].clientX;var eventY=e.y||e.changedTouches[0].clientY;var left=eventX-containerCenterX;var top=eventY-containerCenterY;var direction=0;var url=this.jSPlugin.env.domain+"/api/lapp/device/ptz/start";if(Math.abs(left)>Math.abs(top)){if(left>0){direction=3}else{direction=2}}else{if(top>0){direction=1}else{direction=0}}if(/^rotate\(90/.test(document.getElementById("".concat(this.jSPlugin.id,"-wrap")).style.transform)){switch(direction){case 0:direction=2;break;case 1:direction=3;break;case 2:direction=1;break;case 3:direction=0;break}}document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).style="background-image:linear-gradient(".concat(direction===0?180:direction===1?0:direction===2?90:270,"deg, #1d8dd8 0%, rgba(100,143,252,0.00) 30%)");if(type==="stop"){url=this.jSPlugin.env.domain+"/api/lapp/device/ptz/stop";document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).style=""}var data=new FormData;data.append("deviceSerial",matchEzopenUrl(this.jSPlugin.url).deviceSerial);data.append("channelNo",matchEzopenUrl(this.jSPlugin.url).channelNo);data.append("speed",1);data.append("direction",direction);data.append("accessToken",this.jSPlugin.accessToken);fetch(url,{method:"POST",body:data}).then(function(response){return response.json()}).then(function(rt){if(rt.code==200);else{console.log(rt.code,_this2.codeHandler.matchInfo(rt.code,type==="start"?"ptzStart":"ptzStop"));_this2.pluginStatus.loadingSetText({text:_this2.codeHandler.matchInfo(rt.code,type==="start"?"ptzStart":"ptzStop").msg,color:"red",delayClear:2e3});if(rt.code==60005||rt.code==60002||rt.code==60003||rt.code==60004){document.getElementById("".concat(_this2.jSPlugin.id,"-ez-ptz-container")).style="background-image:linear-gradient(".concat(direction===0?180:direction===1?0:direction===2?90:270,"deg, #f45656 0%, rgba(100,143,252,0.00) 30%)")}}})["catch"](function(err){console.log("云台调用异常",err)})}}]);return Ptz}();function commonjsRequire(path){throw new Error('Could not dynamically require "'+path+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var adapeter={exports:{}};(function(module,exports){(function(f){{module.exports=f()}})(function(){return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof commonjsRequire&&commonjsRequire;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof commonjsRequire&&commonjsRequire,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){var _adapter_factory=require("./adapter_factory.js");var adapter=(0,_adapter_factory.adapterFactory)({window:window});window.adapter=adapter;module.exports=adapter},{"./adapter_factory.js":2}],2:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.adapterFactory=adapterFactory;var _utils=require("./utils");var utils=_interopRequireWildcard(_utils);var _chrome_shim=require("./chrome/chrome_shim");var chromeShim=_interopRequireWildcard(_chrome_shim);var _edge_shim=require("./edge/edge_shim");var edgeShim=_interopRequireWildcard(_edge_shim);var _firefox_shim=require("./firefox/firefox_shim");var firefoxShim=_interopRequireWildcard(_firefox_shim);var _safari_shim=require("./safari/safari_shim");var safariShim=_interopRequireWildcard(_safari_shim);var _common_shim=require("./common_shim");var commonShim=_interopRequireWildcard(_common_shim);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function adapterFactory(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},window=_ref.window;var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{shimChrome:true,shimFirefox:true,shimEdge:true,shimSafari:true};var logging=utils.log;var browserDetails=utils.detectBrowser(window);var adapter={browserDetails:browserDetails,commonShim:commonShim,extractVersion:utils.extractVersion,disableLog:utils.disableLog,disableWarnings:utils.disableWarnings};switch(browserDetails.browser){case"chrome":if(!chromeShim||!chromeShim.shimPeerConnection||!options.shimChrome){logging("Chrome shim is not included in this adapter release.");return adapter}logging("adapter.js shimming chrome.");adapter.browserShim=chromeShim;chromeShim.shimGetUserMedia(window);chromeShim.shimMediaStream(window);chromeShim.shimPeerConnection(window);chromeShim.shimOnTrack(window);chromeShim.shimAddTrackRemoveTrack(window);chromeShim.shimGetSendersWithDtmf(window);chromeShim.shimGetStats(window);chromeShim.shimSenderReceiverGetStats(window);chromeShim.fixNegotiationNeeded(window);commonShim.shimRTCIceCandidate(window);commonShim.shimConnectionState(window);commonShim.shimMaxMessageSize(window);commonShim.shimSendThrowTypeError(window);commonShim.removeAllowExtmapMixed(window);break;case"firefox":if(!firefoxShim||!firefoxShim.shimPeerConnection||!options.shimFirefox){logging("Firefox shim is not included in this adapter release.");return adapter}logging("adapter.js shimming firefox.");adapter.browserShim=firefoxShim;firefoxShim.shimGetUserMedia(window);firefoxShim.shimPeerConnection(window);firefoxShim.shimOnTrack(window);firefoxShim.shimRemoveStream(window);firefoxShim.shimSenderGetStats(window);firefoxShim.shimReceiverGetStats(window);firefoxShim.shimRTCDataChannel(window);firefoxShim.shimAddTransceiver(window);firefoxShim.shimCreateOffer(window);firefoxShim.shimCreateAnswer(window);commonShim.shimRTCIceCandidate(window);commonShim.shimConnectionState(window);commonShim.shimMaxMessageSize(window);commonShim.shimSendThrowTypeError(window);break;case"edge":if(!edgeShim||!edgeShim.shimPeerConnection||!options.shimEdge){logging("MS edge shim is not included in this adapter release.");return adapter}logging("adapter.js shimming edge.");adapter.browserShim=edgeShim;edgeShim.shimGetUserMedia(window);edgeShim.shimGetDisplayMedia(window);edgeShim.shimPeerConnection(window);edgeShim.shimReplaceTrack(window);commonShim.shimMaxMessageSize(window);commonShim.shimSendThrowTypeError(window);break;case"safari":if(!safariShim||!options.shimSafari){logging("Safari shim is not included in this adapter release.");return adapter}logging("adapter.js shimming safari.");adapter.browserShim=safariShim;safariShim.shimRTCIceServerUrls(window);safariShim.shimCreateOfferLegacy(window);safariShim.shimCallbacksAPI(window);safariShim.shimLocalStreamsAPI(window);safariShim.shimRemoteStreamsAPI(window);safariShim.shimTrackEventTransceiver(window);safariShim.shimGetUserMedia(window);commonShim.shimRTCIceCandidate(window);commonShim.shimMaxMessageSize(window);commonShim.shimSendThrowTypeError(window);commonShim.removeAllowExtmapMixed(window);break;default:logging("Unsupported browser!");break}return adapter}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.shimGetDisplayMedia=exports.shimGetUserMedia=undefined;var _typeof$1=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(obj){return _typeof(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof(obj)};var _getusermedia=require("./getusermedia");Object.defineProperty(exports,"shimGetUserMedia",{enumerable:true,get:function get(){return _getusermedia.shimGetUserMedia}});var _getdisplaymedia=require("./getdisplaymedia");Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:true,get:function get(){return _getdisplaymedia.shimGetDisplayMedia}});exports.shimMediaStream=shimMediaStream;exports.shimOnTrack=shimOnTrack;exports.shimGetSendersWithDtmf=shimGetSendersWithDtmf;exports.shimGetStats=shimGetStats;exports.shimSenderReceiverGetStats=shimSenderReceiverGetStats;exports.shimAddTrackRemoveTrackWithNative=shimAddTrackRemoveTrackWithNative;exports.shimAddTrackRemoveTrack=shimAddTrackRemoveTrack;exports.shimPeerConnection=shimPeerConnection;exports.fixNegotiationNeeded=fixNegotiationNeeded;var _utils=require("../utils.js");var utils=_interopRequireWildcard(_utils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function shimMediaStream(window){window.MediaStream=window.MediaStream||window.webkitMediaStream}function shimOnTrack(window){if((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"&&window.RTCPeerConnection&&!("ontrack"in window.RTCPeerConnection.prototype)){Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function get(){return this._ontrack},set:function set(f){if(this._ontrack){this.removeEventListener("track",this._ontrack)}this.addEventListener("track",this._ontrack=f)},enumerable:true,configurable:true});var origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){var _this=this;if(!this._ontrackpoly){this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(te){var receiver=void 0;if(window.RTCPeerConnection.prototype.getReceivers){receiver=_this.getReceivers().find(function(r){return r.track&&r.track.id===te.track.id})}else{receiver={track:te.track}}var event=new Event("track");event.track=te.track;event.receiver=receiver;event.transceiver={receiver:receiver};event.streams=[e.stream];_this.dispatchEvent(event)});e.stream.getTracks().forEach(function(track){var receiver=void 0;if(window.RTCPeerConnection.prototype.getReceivers){receiver=_this.getReceivers().find(function(r){return r.track&&r.track.id===track.id})}else{receiver={track:track}}var event=new Event("track");event.track=track;event.receiver=receiver;event.transceiver={receiver:receiver};event.streams=[e.stream];_this.dispatchEvent(event)})};this.addEventListener("addstream",this._ontrackpoly)}return origSetRemoteDescription.apply(this,arguments)}}else{utils.wrapPeerConnectionEvent(window,"track",function(e){if(!e.transceiver){Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}})}return e})}}function shimGetSendersWithDtmf(window){if((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"&&window.RTCPeerConnection&&!("getSenders"in window.RTCPeerConnection.prototype)&&"createDTMFSender"in window.RTCPeerConnection.prototype){var shimSenderWithDtmf=function shimSenderWithDtmf(pc,track){return{track:track,get dtmf(){if(this._dtmf===undefined){if(track.kind==="audio"){this._dtmf=pc.createDTMFSender(track)}else{this._dtmf=null}}return this._dtmf},_pc:pc}};if(!window.RTCPeerConnection.prototype.getSenders){window.RTCPeerConnection.prototype.getSenders=function getSenders(){this._senders=this._senders||[];return this._senders.slice()};var origAddTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){var sender=origAddTrack.apply(this,arguments);if(!sender){sender=shimSenderWithDtmf(this,track);this._senders.push(sender)}return sender};var origRemoveTrack=window.RTCPeerConnection.prototype.removeTrack;window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){origRemoveTrack.apply(this,arguments);var idx=this._senders.indexOf(sender);if(idx!==-1){this._senders.splice(idx,1)}}}var origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){var _this2=this;this._senders=this._senders||[];origAddStream.apply(this,[stream]);stream.getTracks().forEach(function(track){_this2._senders.push(shimSenderWithDtmf(_this2,track))})};var origRemoveStream=window.RTCPeerConnection.prototype.removeStream;window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){var _this3=this;this._senders=this._senders||[];origRemoveStream.apply(this,[stream]);stream.getTracks().forEach(function(track){var sender=_this3._senders.find(function(s){return s.track===track});if(sender){_this3._senders.splice(_this3._senders.indexOf(sender),1)}})}}else if((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"&&window.RTCPeerConnection&&"getSenders"in window.RTCPeerConnection.prototype&&"createDTMFSender"in window.RTCPeerConnection.prototype&&window.RTCRtpSender&&!("dtmf"in window.RTCRtpSender.prototype)){var origGetSenders=window.RTCPeerConnection.prototype.getSenders;window.RTCPeerConnection.prototype.getSenders=function getSenders(){var _this4=this;var senders=origGetSenders.apply(this,[]);senders.forEach(function(sender){return sender._pc=_this4});return senders};Object.defineProperty(window.RTCRtpSender.prototype,"dtmf",{get:function get(){if(this._dtmf===undefined){if(this.track.kind==="audio"){this._dtmf=this._pc.createDTMFSender(this.track)}else{this._dtmf=null}}return this._dtmf}})}}function shimGetStats(window){if(!window.RTCPeerConnection){return}var origGetStats=window.RTCPeerConnection.prototype.getStats;window.RTCPeerConnection.prototype.getStats=function getStats(){var _this5=this;var _arguments=Array.prototype.slice.call(arguments),selector=_arguments[0],onSucc=_arguments[1],onErr=_arguments[2];if(arguments.length>0&&typeof selector==="function"){return origGetStats.apply(this,arguments)}if(origGetStats.length===0&&(arguments.length===0||typeof selector!=="function")){return origGetStats.apply(this,[])}var fixChromeStats_=function fixChromeStats_(response){var standardReport={};var reports=response.result();reports.forEach(function(report){var standardStats={id:report.id,timestamp:report.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[report.type]||report.type};report.names().forEach(function(name){standardStats[name]=report.stat(name)});standardReport[standardStats.id]=standardStats});return standardReport};var makeMapStats=function makeMapStats(stats){return new Map(Object.keys(stats).map(function(key){return[key,stats[key]]}))};if(arguments.length>=2){var successCallbackWrapper_=function successCallbackWrapper_(response){onSucc(makeMapStats(fixChromeStats_(response)))};return origGetStats.apply(this,[successCallbackWrapper_,selector])}return new Promise(function(resolve,reject){origGetStats.apply(_this5,[function(response){resolve(makeMapStats(fixChromeStats_(response)))},reject])}).then(onSucc,onErr)}}function shimSenderReceiverGetStats(window){if(!((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"&&window.RTCPeerConnection&&window.RTCRtpSender&&window.RTCRtpReceiver)){return}if(!("getStats"in window.RTCRtpSender.prototype)){var origGetSenders=window.RTCPeerConnection.prototype.getSenders;if(origGetSenders){window.RTCPeerConnection.prototype.getSenders=function getSenders(){var _this6=this;var senders=origGetSenders.apply(this,[]);senders.forEach(function(sender){return sender._pc=_this6});return senders}}var origAddTrack=window.RTCPeerConnection.prototype.addTrack;if(origAddTrack){window.RTCPeerConnection.prototype.addTrack=function addTrack(){var sender=origAddTrack.apply(this,arguments);sender._pc=this;return sender}}window.RTCRtpSender.prototype.getStats=function getStats(){var sender=this;return this._pc.getStats().then(function(result){return utils.filterStats(result,sender.track,true)})}}if(!("getStats"in window.RTCRtpReceiver.prototype)){var origGetReceivers=window.RTCPeerConnection.prototype.getReceivers;if(origGetReceivers){window.RTCPeerConnection.prototype.getReceivers=function getReceivers(){var _this7=this;var receivers=origGetReceivers.apply(this,[]);receivers.forEach(function(receiver){return receiver._pc=_this7});return receivers}}utils.wrapPeerConnectionEvent(window,"track",function(e){e.receiver._pc=e.srcElement;return e});window.RTCRtpReceiver.prototype.getStats=function getStats(){var receiver=this;return this._pc.getStats().then(function(result){return utils.filterStats(result,receiver.track,false)})}}if(!("getStats"in window.RTCRtpSender.prototype&&"getStats"in window.RTCRtpReceiver.prototype)){return}var origGetStats=window.RTCPeerConnection.prototype.getStats;window.RTCPeerConnection.prototype.getStats=function getStats(){if(arguments.length>0&&arguments[0]instanceof window.MediaStreamTrack){var track=arguments[0];var sender=void 0;var receiver=void 0;var err=void 0;this.getSenders().forEach(function(s){if(s.track===track){if(sender){err=true}else{sender=s}}});this.getReceivers().forEach(function(r){if(r.track===track){if(receiver){err=true}else{receiver=r}}return r.track===track});if(err||sender&&receiver){return Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError"))}else if(sender){return sender.getStats()}else if(receiver){return receiver.getStats()}return Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return origGetStats.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(window){window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){var _this8=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};return Object.keys(this._shimmedLocalStreams).map(function(streamId){return _this8._shimmedLocalStreams[streamId][0]})};var origAddTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){if(!stream){return origAddTrack.apply(this,arguments)}this._shimmedLocalStreams=this._shimmedLocalStreams||{};var sender=origAddTrack.apply(this,arguments);if(!this._shimmedLocalStreams[stream.id]){this._shimmedLocalStreams[stream.id]=[stream,sender]}else if(this._shimmedLocalStreams[stream.id].indexOf(sender)===-1){this._shimmedLocalStreams[stream.id].push(sender)}return sender};var origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){var _this9=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};stream.getTracks().forEach(function(track){var alreadyExists=_this9.getSenders().find(function(s){return s.track===track});if(alreadyExists){throw new DOMException("Track already exists.","InvalidAccessError")}});var existingSenders=this.getSenders();origAddStream.apply(this,arguments);var newSenders=this.getSenders().filter(function(newSender){return existingSenders.indexOf(newSender)===-1});this._shimmedLocalStreams[stream.id]=[stream].concat(newSenders)};var origRemoveStream=window.RTCPeerConnection.prototype.removeStream;window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){this._shimmedLocalStreams=this._shimmedLocalStreams||{};delete this._shimmedLocalStreams[stream.id];return origRemoveStream.apply(this,arguments)};var origRemoveTrack=window.RTCPeerConnection.prototype.removeTrack;window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){var _this10=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{};if(sender){Object.keys(this._shimmedLocalStreams).forEach(function(streamId){var idx=_this10._shimmedLocalStreams[streamId].indexOf(sender);if(idx!==-1){_this10._shimmedLocalStreams[streamId].splice(idx,1)}if(_this10._shimmedLocalStreams[streamId].length===1){delete _this10._shimmedLocalStreams[streamId]}})}return origRemoveTrack.apply(this,arguments)}}function shimAddTrackRemoveTrack(window){if(!window.RTCPeerConnection){return}var browserDetails=utils.detectBrowser(window);if(window.RTCPeerConnection.prototype.addTrack&&browserDetails.version>=65){return shimAddTrackRemoveTrackWithNative(window)}var origGetLocalStreams=window.RTCPeerConnection.prototype.getLocalStreams;window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){var _this11=this;var nativeStreams=origGetLocalStreams.apply(this);this._reverseStreams=this._reverseStreams||{};return nativeStreams.map(function(stream){return _this11._reverseStreams[stream.id]})};var origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){var _this12=this;this._streams=this._streams||{};this._reverseStreams=this._reverseStreams||{};stream.getTracks().forEach(function(track){var alreadyExists=_this12.getSenders().find(function(s){return s.track===track});if(alreadyExists){throw new DOMException("Track already exists.","InvalidAccessError")}});if(!this._reverseStreams[stream.id]){var newStream=new window.MediaStream(stream.getTracks());this._streams[stream.id]=newStream;this._reverseStreams[newStream.id]=stream;stream=newStream}origAddStream.apply(this,[stream])};var origRemoveStream=window.RTCPeerConnection.prototype.removeStream;window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){this._streams=this._streams||{};this._reverseStreams=this._reverseStreams||{};origRemoveStream.apply(this,[this._streams[stream.id]||stream]);delete this._reverseStreams[this._streams[stream.id]?this._streams[stream.id].id:stream.id];delete this._streams[stream.id]};window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){var _this13=this;if(this.signalingState==="closed"){throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError")}var streams=[].slice.call(arguments,1);if(streams.length!==1||!streams[0].getTracks().find(function(t){return t===track})){throw new DOMException("The adapter.js addTrack polyfill only supports a single "+" stream which is associated with the specified track.","NotSupportedError")}var alreadyExists=this.getSenders().find(function(s){return s.track===track});if(alreadyExists){throw new DOMException("Track already exists.","InvalidAccessError")}this._streams=this._streams||{};this._reverseStreams=this._reverseStreams||{};var oldStream=this._streams[stream.id];if(oldStream){oldStream.addTrack(track);Promise.resolve().then(function(){_this13.dispatchEvent(new Event("negotiationneeded"))})}else{var newStream=new window.MediaStream([track]);this._streams[stream.id]=newStream;this._reverseStreams[newStream.id]=stream;this.addStream(newStream)}return this.getSenders().find(function(s){return s.track===track})};function replaceInternalStreamId(pc,description){var sdp=description.sdp;Object.keys(pc._reverseStreams||[]).forEach(function(internalId){var externalStream=pc._reverseStreams[internalId];var internalStream=pc._streams[externalStream.id];sdp=sdp.replace(new RegExp(internalStream.id,"g"),externalStream.id)});return new RTCSessionDescription({type:description.type,sdp:sdp})}function replaceExternalStreamId(pc,description){var sdp=description.sdp;Object.keys(pc._reverseStreams||[]).forEach(function(internalId){var externalStream=pc._reverseStreams[internalId];var internalStream=pc._streams[externalStream.id];sdp=sdp.replace(new RegExp(externalStream.id,"g"),internalStream.id)});return new RTCSessionDescription({type:description.type,sdp:sdp})}["createOffer","createAnswer"].forEach(function(method){var nativeMethod=window.RTCPeerConnection.prototype[method];var methodObj=_defineProperty({},method,function(){var _this14=this;var args=arguments;var isLegacyCall=arguments.length&&typeof arguments[0]==="function";if(isLegacyCall){return nativeMethod.apply(this,[function(description){var desc=replaceInternalStreamId(_this14,description);args[0].apply(null,[desc])},function(err){if(args[1]){args[1].apply(null,err)}},arguments[2]])}return nativeMethod.apply(this,arguments).then(function(description){return replaceInternalStreamId(_this14,description)})});window.RTCPeerConnection.prototype[method]=methodObj[method]});var origSetLocalDescription=window.RTCPeerConnection.prototype.setLocalDescription;window.RTCPeerConnection.prototype.setLocalDescription=function setLocalDescription(){if(!arguments.length||!arguments[0].type){return origSetLocalDescription.apply(this,arguments)}arguments[0]=replaceExternalStreamId(this,arguments[0]);return origSetLocalDescription.apply(this,arguments)};var origLocalDescription=Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(window.RTCPeerConnection.prototype,"localDescription",{get:function get(){var description=origLocalDescription.get.apply(this);if(description.type===""){return description}return replaceInternalStreamId(this,description)}});window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){var _this15=this;if(this.signalingState==="closed"){throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError")}if(!sender._pc){throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack "+"does not implement interface RTCRtpSender.","TypeError")}var isLocal=sender._pc===this;if(!isLocal){throw new DOMException("Sender was not created by this connection.","InvalidAccessError")}this._streams=this._streams||{};var stream=void 0;Object.keys(this._streams).forEach(function(streamid){var hasTrack=_this15._streams[streamid].getTracks().find(function(track){return sender.track===track});if(hasTrack){stream=_this15._streams[streamid]}});if(stream){if(stream.getTracks().length===1){this.removeStream(this._reverseStreams[stream.id])}else{stream.removeTrack(sender.track)}this.dispatchEvent(new Event("negotiationneeded"))}}}function shimPeerConnection(window){var browserDetails=utils.detectBrowser(window);if(!window.RTCPeerConnection&&window.webkitRTCPeerConnection){window.RTCPeerConnection=window.webkitRTCPeerConnection}if(!window.RTCPeerConnection){return}if(browserDetails.version<53){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(method){var nativeMethod=window.RTCPeerConnection.prototype[method];var methodObj=_defineProperty({},method,function(){arguments[0]=new(method==="addIceCandidate"?window.RTCIceCandidate:window.RTCSessionDescription)(arguments[0]);return nativeMethod.apply(this,arguments)});window.RTCPeerConnection.prototype[method]=methodObj[method]})}var nativeAddIceCandidate=window.RTCPeerConnection.prototype.addIceCandidate;window.RTCPeerConnection.prototype.addIceCandidate=function addIceCandidate(){if(!arguments[0]){if(arguments[1]){arguments[1].apply(null)}return Promise.resolve()}if(browserDetails.version<78&&arguments[0]&&arguments[0].candidate===""){return Promise.resolve()}return nativeAddIceCandidate.apply(this,arguments)}}function fixNegotiationNeeded(window){utils.wrapPeerConnectionEvent(window,"negotiationneeded",function(e){var pc=e.target;if(pc.signalingState!=="stable"){return}return e})}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.shimGetDisplayMedia=shimGetDisplayMedia;function shimGetDisplayMedia(window,getSourceId){if(window.navigator.mediaDevices&&"getDisplayMedia"in window.navigator.mediaDevices){return}if(!window.navigator.mediaDevices){return}if(typeof getSourceId!=="function"){console.error("shimGetDisplayMedia: getSourceId argument is not "+"a function");return}window.navigator.mediaDevices.getDisplayMedia=function getDisplayMedia(constraints){return getSourceId(constraints).then(function(sourceId){var widthSpecified=constraints.video&&constraints.video.width;var heightSpecified=constraints.video&&constraints.video.height;var frameRateSpecified=constraints.video&&constraints.video.frameRate;constraints.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:sourceId,maxFrameRate:frameRateSpecified||3}};if(widthSpecified){constraints.video.mandatory.maxWidth=widthSpecified}if(heightSpecified){constraints.video.mandatory.maxHeight=heightSpecified}return window.navigator.mediaDevices.getUserMedia(constraints)})}}},{}],5:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _typeof$1=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(obj){return _typeof(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof(obj)};exports.shimGetUserMedia=shimGetUserMedia;var _utils=require("../utils.js");var utils=_interopRequireWildcard(_utils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}var logging=utils.log;function shimGetUserMedia(window){var navigator=window&&window.navigator;if(!navigator.mediaDevices){return}var browserDetails=utils.detectBrowser(window);var constraintsToChrome_=function constraintsToChrome_(c){if((typeof c==="undefined"?"undefined":_typeof$1(c))!=="object"||c.mandatory||c.optional){return c}var cc={};Object.keys(c).forEach(function(key){if(key==="require"||key==="advanced"||key==="mediaSource"){return}var r=_typeof$1(c[key])==="object"?c[key]:{ideal:c[key]};if(r.exact!==undefined&&typeof r.exact==="number"){r.min=r.max=r.exact}var oldname_=function oldname_(prefix,name){if(prefix){return prefix+name.charAt(0).toUpperCase()+name.slice(1)}return name==="deviceId"?"sourceId":name};if(r.ideal!==undefined){cc.optional=cc.optional||[];var oc={};if(typeof r.ideal==="number"){oc[oldname_("min",key)]=r.ideal;cc.optional.push(oc);oc={};oc[oldname_("max",key)]=r.ideal;cc.optional.push(oc)}else{oc[oldname_("",key)]=r.ideal;cc.optional.push(oc)}}if(r.exact!==undefined&&typeof r.exact!=="number"){cc.mandatory=cc.mandatory||{};cc.mandatory[oldname_("",key)]=r.exact}else{["min","max"].forEach(function(mix){if(r[mix]!==undefined){cc.mandatory=cc.mandatory||{};cc.mandatory[oldname_(mix,key)]=r[mix]}})}});if(c.advanced){cc.optional=(cc.optional||[]).concat(c.advanced)}return cc};var shimConstraints_=function shimConstraints_(constraints,func){if(browserDetails.version>=61){return func(constraints)}constraints=JSON.parse(JSON.stringify(constraints));if(constraints&&_typeof$1(constraints.audio)==="object"){var remap=function remap(obj,a,b){if(a in obj&&!(b in obj)){obj[b]=obj[a];delete obj[a]}};constraints=JSON.parse(JSON.stringify(constraints));remap(constraints.audio,"autoGainControl","googAutoGainControl");remap(constraints.audio,"noiseSuppression","googNoiseSuppression");constraints.audio=constraintsToChrome_(constraints.audio)}if(constraints&&_typeof$1(constraints.video)==="object"){var face=constraints.video.facingMode;face=face&&((typeof face==="undefined"?"undefined":_typeof$1(face))==="object"?face:{ideal:face});var getSupportedFacingModeLies=browserDetails.version<66;if(face&&(face.exact==="user"||face.exact==="environment"||face.ideal==="user"||face.ideal==="environment")&&!(navigator.mediaDevices.getSupportedConstraints&&navigator.mediaDevices.getSupportedConstraints().facingMode&&!getSupportedFacingModeLies)){delete constraints.video.facingMode;var matches=void 0;if(face.exact==="environment"||face.ideal==="environment"){matches=["back","rear"]}else if(face.exact==="user"||face.ideal==="user"){matches=["front"]}if(matches){return navigator.mediaDevices.enumerateDevices().then(function(devices){devices=devices.filter(function(d){return d.kind==="videoinput"});var dev=devices.find(function(d){return matches.some(function(match){return d.label.toLowerCase().includes(match)})});if(!dev&&devices.length&&matches.includes("back")){dev=devices[devices.length-1]}if(dev){constraints.video.deviceId=face.exact?{exact:dev.deviceId}:{ideal:dev.deviceId}}constraints.video=constraintsToChrome_(constraints.video);logging("chrome: "+JSON.stringify(constraints));return func(constraints)})}}constraints.video=constraintsToChrome_(constraints.video)}logging("chrome: "+JSON.stringify(constraints));return func(constraints)};var shimError_=function shimError_(e){if(browserDetails.version>=64){return e}return{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function toString(){return this.name+(this.message&&": ")+this.message}}};var getUserMedia_=function getUserMedia_(constraints,onSuccess,onError){shimConstraints_(constraints,function(c){navigator.webkitGetUserMedia(c,onSuccess,function(e){if(onError){onError(shimError_(e))}})})};navigator.getUserMedia=getUserMedia_.bind(navigator);if(navigator.mediaDevices.getUserMedia){var origGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(cs){return shimConstraints_(cs,function(c){return origGetUserMedia(c).then(function(stream){if(c.audio&&!stream.getAudioTracks().length||c.video&&!stream.getVideoTracks().length){stream.getTracks().forEach(function(track){track.stop()});throw new DOMException("","NotFoundError")}return stream},function(e){return Promise.reject(shimError_(e))})})}}}},{"../utils.js":15}],6:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _typeof$1=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(obj){return _typeof(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof(obj)};exports.shimRTCIceCandidate=shimRTCIceCandidate;exports.shimMaxMessageSize=shimMaxMessageSize;exports.shimSendThrowTypeError=shimSendThrowTypeError;exports.shimConnectionState=shimConnectionState;exports.removeAllowExtmapMixed=removeAllowExtmapMixed;var _sdp=require("sdp");var _sdp2=_interopRequireDefault(_sdp);var _utils=require("./utils");var utils=_interopRequireWildcard(_utils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function shimRTCIceCandidate(window){if(!window.RTCIceCandidate||window.RTCIceCandidate&&"foundation"in window.RTCIceCandidate.prototype){return}var NativeRTCIceCandidate=window.RTCIceCandidate;window.RTCIceCandidate=function RTCIceCandidate(args){if((typeof args==="undefined"?"undefined":_typeof$1(args))==="object"&&args.candidate&&args.candidate.indexOf("a=")===0){args=JSON.parse(JSON.stringify(args));args.candidate=args.candidate.substr(2)}if(args.candidate&&args.candidate.length){var nativeCandidate=new NativeRTCIceCandidate(args);var parsedCandidate=_sdp2["default"].parseCandidate(args.candidate);var augmentedCandidate=Object.assign(nativeCandidate,parsedCandidate);augmentedCandidate.toJSON=function toJSON(){return{candidate:augmentedCandidate.candidate,sdpMid:augmentedCandidate.sdpMid,sdpMLineIndex:augmentedCandidate.sdpMLineIndex,usernameFragment:augmentedCandidate.usernameFragment}};return augmentedCandidate}return new NativeRTCIceCandidate(args)};window.RTCIceCandidate.prototype=NativeRTCIceCandidate.prototype;utils.wrapPeerConnectionEvent(window,"icecandidate",function(e){if(e.candidate){Object.defineProperty(e,"candidate",{value:new window.RTCIceCandidate(e.candidate),writable:"false"})}return e})}function shimMaxMessageSize(window){if(!window.RTCPeerConnection){return}var browserDetails=utils.detectBrowser(window);if(!("sctp"in window.RTCPeerConnection.prototype)){Object.defineProperty(window.RTCPeerConnection.prototype,"sctp",{get:function get(){return typeof this._sctp==="undefined"?null:this._sctp}})}var sctpInDescription=function sctpInDescription(description){if(!description||!description.sdp){return false}var sections=_sdp2["default"].splitSections(description.sdp);sections.shift();return sections.some(function(mediaSection){var mLine=_sdp2["default"].parseMLine(mediaSection);return mLine&&mLine.kind==="application"&&mLine.protocol.indexOf("SCTP")!==-1})};var getRemoteFirefoxVersion=function getRemoteFirefoxVersion(description){var match=description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(match===null||match.length<2){return-1}var version=parseInt(match[1],10);return version!==version?-1:version};var getCanSendMaxMessageSize=function getCanSendMaxMessageSize(remoteIsFirefox){var canSendMaxMessageSize=65536;if(browserDetails.browser==="firefox"){if(browserDetails.version<57){if(remoteIsFirefox===-1){canSendMaxMessageSize=16384}else{canSendMaxMessageSize=2147483637}}else if(browserDetails.version<60){canSendMaxMessageSize=browserDetails.version===57?65535:65536}else{canSendMaxMessageSize=2147483637}}return canSendMaxMessageSize};var getMaxMessageSize=function getMaxMessageSize(description,remoteIsFirefox){var maxMessageSize=65536;if(browserDetails.browser==="firefox"&&browserDetails.version===57){maxMessageSize=65535}var match=_sdp2["default"].matchPrefix(description.sdp,"a=max-message-size:");if(match.length>0){maxMessageSize=parseInt(match[0].substr(19),10)}else if(browserDetails.browser==="firefox"&&remoteIsFirefox!==-1){maxMessageSize=2147483637}return maxMessageSize};var origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){this._sctp=null;if(browserDetails.browser==="chrome"&&browserDetails.version>=76){var _getConfiguration=this.getConfiguration(),sdpSemantics=_getConfiguration.sdpSemantics;if(sdpSemantics==="plan-b"){Object.defineProperty(this,"sctp",{get:function get(){return typeof this._sctp==="undefined"?null:this._sctp},enumerable:true,configurable:true})}}if(sctpInDescription(arguments[0])){var isFirefox=getRemoteFirefoxVersion(arguments[0]);var canSendMMS=getCanSendMaxMessageSize(isFirefox);var remoteMMS=getMaxMessageSize(arguments[0],isFirefox);var maxMessageSize=void 0;if(canSendMMS===0&&remoteMMS===0){maxMessageSize=Number.POSITIVE_INFINITY}else if(canSendMMS===0||remoteMMS===0){maxMessageSize=Math.max(canSendMMS,remoteMMS)}else{maxMessageSize=Math.min(canSendMMS,remoteMMS)}var sctp={};Object.defineProperty(sctp,"maxMessageSize",{get:function get(){return maxMessageSize}});this._sctp=sctp}return origSetRemoteDescription.apply(this,arguments)}}function shimSendThrowTypeError(window){if(!(window.RTCPeerConnection&&"createDataChannel"in window.RTCPeerConnection.prototype)){return}function wrapDcSend(dc,pc){var origDataChannelSend=dc.send;dc.send=function send(){var data=arguments[0];var length=data.length||data.size||data.byteLength;if(dc.readyState==="open"&&pc.sctp&&length>pc.sctp.maxMessageSize){throw new TypeError("Message too large (can send a maximum of "+pc.sctp.maxMessageSize+" bytes)")}return origDataChannelSend.apply(dc,arguments)}}var origCreateDataChannel=window.RTCPeerConnection.prototype.createDataChannel;window.RTCPeerConnection.prototype.createDataChannel=function createDataChannel(){var dataChannel=origCreateDataChannel.apply(this,arguments);wrapDcSend(dataChannel,this);return dataChannel};utils.wrapPeerConnectionEvent(window,"datachannel",function(e){wrapDcSend(e.channel,e.target);return e})}function shimConnectionState(window){if(!window.RTCPeerConnection||"connectionState"in window.RTCPeerConnection.prototype){return}var proto=window.RTCPeerConnection.prototype;Object.defineProperty(proto,"connectionState",{get:function get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:true,configurable:true});Object.defineProperty(proto,"onconnectionstatechange",{get:function get(){return this._onconnectionstatechange||null},set:function set(cb){if(this._onconnectionstatechange){this.removeEventListener("connectionstatechange",this._onconnectionstatechange);delete this._onconnectionstatechange}if(cb){this.addEventListener("connectionstatechange",this._onconnectionstatechange=cb)}},enumerable:true,configurable:true});["setLocalDescription","setRemoteDescription"].forEach(function(method){var origMethod=proto[method];proto[method]=function(){if(!this._connectionstatechangepoly){this._connectionstatechangepoly=function(e){var pc=e.target;if(pc._lastConnectionState!==pc.connectionState){pc._lastConnectionState=pc.connectionState;var newEvent=new Event("connectionstatechange",e);pc.dispatchEvent(newEvent)}return e};this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)}return origMethod.apply(this,arguments)}})}function removeAllowExtmapMixed(window){if(!window.RTCPeerConnection){return}var browserDetails=utils.detectBrowser(window);if(browserDetails.browser==="chrome"&&browserDetails.version>=71){return}var nativeSRD=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(desc){if(desc&&desc.sdp&&desc.sdp.indexOf("\na=extmap-allow-mixed")!==-1){desc.sdp=desc.sdp.split("\n").filter(function(line){return line.trim()!=="a=extmap-allow-mixed"}).join("\n")}return nativeSRD.apply(this,arguments)}}},{"./utils":15,sdp:17}],7:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.shimGetDisplayMedia=exports.shimGetUserMedia=undefined;var _getusermedia=require("./getusermedia");Object.defineProperty(exports,"shimGetUserMedia",{enumerable:true,get:function get(){return _getusermedia.shimGetUserMedia}});var _getdisplaymedia=require("./getdisplaymedia");Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:true,get:function get(){return _getdisplaymedia.shimGetDisplayMedia}});exports.shimPeerConnection=shimPeerConnection;exports.shimReplaceTrack=shimReplaceTrack;var _utils=require("../utils");var utils=_interopRequireWildcard(_utils);var _filtericeservers=require("./filtericeservers");var _rtcpeerconnectionShim=require("rtcpeerconnection-shim");var _rtcpeerconnectionShim2=_interopRequireDefault(_rtcpeerconnectionShim);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function shimPeerConnection(window){var browserDetails=utils.detectBrowser(window);if(window.RTCIceGatherer){if(!window.RTCIceCandidate){window.RTCIceCandidate=function RTCIceCandidate(args){return args}}if(!window.RTCSessionDescription){window.RTCSessionDescription=function RTCSessionDescription(args){return args}}if(browserDetails.version<15025){var origMSTEnabled=Object.getOwnPropertyDescriptor(window.MediaStreamTrack.prototype,"enabled");Object.defineProperty(window.MediaStreamTrack.prototype,"enabled",{set:function set(value){origMSTEnabled.set.call(this,value);var ev=new Event("enabled");ev.enabled=value;this.dispatchEvent(ev)}})}}if(window.RTCRtpSender&&!("dtmf"in window.RTCRtpSender.prototype)){Object.defineProperty(window.RTCRtpSender.prototype,"dtmf",{get:function get(){if(this._dtmf===undefined){if(this.track.kind==="audio"){this._dtmf=new window.RTCDtmfSender(this)}else if(this.track.kind==="video"){this._dtmf=null}}return this._dtmf}})}if(window.RTCDtmfSender&&!window.RTCDTMFSender){window.RTCDTMFSender=window.RTCDtmfSender}var RTCPeerConnectionShim=(0,_rtcpeerconnectionShim2["default"])(window,browserDetails.version);window.RTCPeerConnection=function RTCPeerConnection(config){if(config&&config.iceServers){config.iceServers=(0,_filtericeservers.filterIceServers)(config.iceServers,browserDetails.version);utils.log("ICE servers after filtering:",config.iceServers)}return new RTCPeerConnectionShim(config)};window.RTCPeerConnection.prototype=RTCPeerConnectionShim.prototype}function shimReplaceTrack(window){if(window.RTCRtpSender&&!("replaceTrack"in window.RTCRtpSender.prototype)){window.RTCRtpSender.prototype.replaceTrack=window.RTCRtpSender.prototype.setTrack}}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.filterIceServers=filterIceServers;var _utils=require("../utils");var utils=_interopRequireWildcard(_utils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function filterIceServers(iceServers,edgeVersion){var hasTurn=false;iceServers=JSON.parse(JSON.stringify(iceServers));return iceServers.filter(function(server){if(server&&(server.urls||server.url)){var urls=server.urls||server.url;if(server.url&&!server.urls){utils.deprecated("RTCIceServer.url","RTCIceServer.urls")}var isString=typeof urls==="string";if(isString){urls=[urls]}urls=urls.filter(function(url){if(url.indexOf("stun:")===0){return false}var validTurn=url.startsWith("turn")&&!url.startsWith("turn:[")&&url.includes("transport=udp");if(validTurn&&!hasTurn){hasTurn=true;return true}return validTurn&&!hasTurn});delete server.url;server.urls=isString?urls[0]:urls;return!!urls.length}})}},{"../utils":15}],9:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.shimGetDisplayMedia=shimGetDisplayMedia;function shimGetDisplayMedia(window){if(!("getDisplayMedia"in window.navigator)){return}if(!window.navigator.mediaDevices){return}if(window.navigator.mediaDevices&&"getDisplayMedia"in window.navigator.mediaDevices){return}window.navigator.mediaDevices.getDisplayMedia=window.navigator.getDisplayMedia.bind(window.navigator)}},{}],10:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.shimGetUserMedia=shimGetUserMedia;function shimGetUserMedia(window){var navigator=window&&window.navigator;var shimError_=function shimError_(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function toString(){return this.name}}};var origGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(c){return origGetUserMedia(c)["catch"](function(e){return Promise.reject(shimError_(e))})}}},{}],11:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.shimGetDisplayMedia=exports.shimGetUserMedia=undefined;var _typeof$1=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(obj){return _typeof(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof(obj)};var _getusermedia=require("./getusermedia");Object.defineProperty(exports,"shimGetUserMedia",{enumerable:true,get:function get(){return _getusermedia.shimGetUserMedia}});var _getdisplaymedia=require("./getdisplaymedia");Object.defineProperty(exports,"shimGetDisplayMedia",{enumerable:true,get:function get(){return _getdisplaymedia.shimGetDisplayMedia}});exports.shimOnTrack=shimOnTrack;exports.shimPeerConnection=shimPeerConnection;exports.shimSenderGetStats=shimSenderGetStats;exports.shimReceiverGetStats=shimReceiverGetStats;exports.shimRemoveStream=shimRemoveStream;exports.shimRTCDataChannel=shimRTCDataChannel;exports.shimAddTransceiver=shimAddTransceiver;exports.shimCreateOffer=shimCreateOffer;exports.shimCreateAnswer=shimCreateAnswer;var _utils=require("../utils");var utils=_interopRequireWildcard(_utils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function shimOnTrack(window){if((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"&&window.RTCTrackEvent&&"receiver"in window.RTCTrackEvent.prototype&&!("transceiver"in window.RTCTrackEvent.prototype)){Object.defineProperty(window.RTCTrackEvent.prototype,"transceiver",{get:function get(){return{receiver:this.receiver}}})}}function shimPeerConnection(window){var browserDetails=utils.detectBrowser(window);if((typeof window==="undefined"?"undefined":_typeof$1(window))!=="object"||!(window.RTCPeerConnection||window.mozRTCPeerConnection)){return}if(!window.RTCPeerConnection&&window.mozRTCPeerConnection){window.RTCPeerConnection=window.mozRTCPeerConnection}if(browserDetails.version<53){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(method){var nativeMethod=window.RTCPeerConnection.prototype[method];var methodObj=_defineProperty({},method,function(){arguments[0]=new(method==="addIceCandidate"?window.RTCIceCandidate:window.RTCSessionDescription)(arguments[0]);return nativeMethod.apply(this,arguments)});window.RTCPeerConnection.prototype[method]=methodObj[method]})}if(browserDetails.version<68){var nativeAddIceCandidate=window.RTCPeerConnection.prototype.addIceCandidate;window.RTCPeerConnection.prototype.addIceCandidate=function addIceCandidate(){if(!arguments[0]){if(arguments[1]){arguments[1].apply(null)}return Promise.resolve()}if(arguments[0]&&arguments[0].candidate===""){return Promise.resolve()}return nativeAddIceCandidate.apply(this,arguments)}}var modernStatsTypes={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"};var nativeGetStats=window.RTCPeerConnection.prototype.getStats;window.RTCPeerConnection.prototype.getStats=function getStats(){var _arguments=Array.prototype.slice.call(arguments),selector=_arguments[0],onSucc=_arguments[1],onErr=_arguments[2];return nativeGetStats.apply(this,[selector||null]).then(function(stats){if(browserDetails.version<53&&!onSucc){try{stats.forEach(function(stat){stat.type=modernStatsTypes[stat.type]||stat.type})}catch(e){if(e.name!=="TypeError"){throw e}stats.forEach(function(stat,i){stats.set(i,Object.assign({},stat,{type:modernStatsTypes[stat.type]||stat.type}))})}}return stats}).then(onSucc,onErr)}}function shimSenderGetStats(window){if(!((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"&&window.RTCPeerConnection&&window.RTCRtpSender)){return}if(window.RTCRtpSender&&"getStats"in window.RTCRtpSender.prototype){return}var origGetSenders=window.RTCPeerConnection.prototype.getSenders;if(origGetSenders){window.RTCPeerConnection.prototype.getSenders=function getSenders(){var _this=this;var senders=origGetSenders.apply(this,[]);senders.forEach(function(sender){return sender._pc=_this});return senders}}var origAddTrack=window.RTCPeerConnection.prototype.addTrack;if(origAddTrack){window.RTCPeerConnection.prototype.addTrack=function addTrack(){var sender=origAddTrack.apply(this,arguments);sender._pc=this;return sender}}window.RTCRtpSender.prototype.getStats=function getStats(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(window){if(!((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"&&window.RTCPeerConnection&&window.RTCRtpSender)){return}if(window.RTCRtpSender&&"getStats"in window.RTCRtpReceiver.prototype){return}var origGetReceivers=window.RTCPeerConnection.prototype.getReceivers;if(origGetReceivers){window.RTCPeerConnection.prototype.getReceivers=function getReceivers(){var _this2=this;var receivers=origGetReceivers.apply(this,[]);receivers.forEach(function(receiver){return receiver._pc=_this2});return receivers}}utils.wrapPeerConnectionEvent(window,"track",function(e){e.receiver._pc=e.srcElement;return e});window.RTCRtpReceiver.prototype.getStats=function getStats(){return this._pc.getStats(this.track)}}function shimRemoveStream(window){if(!window.RTCPeerConnection||"removeStream"in window.RTCPeerConnection.prototype){return}window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){var _this3=this;utils.deprecated("removeStream","removeTrack");this.getSenders().forEach(function(sender){if(sender.track&&stream.getTracks().includes(sender.track)){_this3.removeTrack(sender)}})}}function shimRTCDataChannel(window){if(window.DataChannel&&!window.RTCDataChannel){window.RTCDataChannel=window.DataChannel}}function shimAddTransceiver(window){if(!((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"&&window.RTCPeerConnection)){return}var origAddTransceiver=window.RTCPeerConnection.prototype.addTransceiver;if(origAddTransceiver){window.RTCPeerConnection.prototype.addTransceiver=function addTransceiver(){this.setParametersPromises=[];var initParameters=arguments[1];var shouldPerformCheck=initParameters&&"sendEncodings"in initParameters;if(shouldPerformCheck){initParameters.sendEncodings.forEach(function(encodingParam){if("rid"in encodingParam){var ridRegex=/^[a-z0-9]{0,16}$/i;if(!ridRegex.test(encodingParam.rid)){throw new TypeError("Invalid RID value provided.")}}if("scaleResolutionDownBy"in encodingParam){if(!(parseFloat(encodingParam.scaleResolutionDownBy)>=1)){throw new RangeError("scale_resolution_down_by must be >= 1.0")}}if("maxFramerate"in encodingParam){if(!(parseFloat(encodingParam.maxFramerate)>=0)){throw new RangeError("max_framerate must be >= 0.0")}}})}var transceiver=origAddTransceiver.apply(this,arguments);if(shouldPerformCheck){var sender=transceiver.sender;var params=sender.getParameters();if(!("encodings"in params)){params.encodings=initParameters.sendEncodings;this.setParametersPromises.push(sender.setParameters(params)["catch"](function(){}))}}return transceiver}}}function shimCreateOffer(window){if(!((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"&&window.RTCPeerConnection)){return}var origCreateOffer=window.RTCPeerConnection.prototype.createOffer;window.RTCPeerConnection.prototype.createOffer=function createOffer(){var _this4=this,_arguments2=arguments;if(this.setParametersPromises&&this.setParametersPromises.length){return Promise.all(this.setParametersPromises).then(function(){return origCreateOffer.apply(_this4,_arguments2)})["finally"](function(){_this4.setParametersPromises=[]})}return origCreateOffer.apply(this,arguments)}}function shimCreateAnswer(window){if(!((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"&&window.RTCPeerConnection)){return}var origCreateAnswer=window.RTCPeerConnection.prototype.createAnswer;window.RTCPeerConnection.prototype.createAnswer=function createAnswer(){var _this5=this,_arguments3=arguments;if(this.setParametersPromises&&this.setParametersPromises.length){return Promise.all(this.setParametersPromises).then(function(){return origCreateAnswer.apply(_this5,_arguments3)})["finally"](function(){_this5.setParametersPromises=[]})}return origCreateAnswer.apply(this,arguments)}}},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.shimGetDisplayMedia=shimGetDisplayMedia;function shimGetDisplayMedia(window,preferredMediaSource){if(window.navigator.mediaDevices&&"getDisplayMedia"in window.navigator.mediaDevices){return}if(!window.navigator.mediaDevices){return}window.navigator.mediaDevices.getDisplayMedia=function getDisplayMedia(constraints){if(!(constraints&&constraints.video)){var err=new DOMException("getDisplayMedia without video "+"constraints is undefined");err.name="NotFoundError";err.code=8;return Promise.reject(err)}if(constraints.video===true){constraints.video={mediaSource:preferredMediaSource}}else{constraints.video.mediaSource=preferredMediaSource}return window.navigator.mediaDevices.getUserMedia(constraints)}}},{}],13:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _typeof$1=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(obj){return _typeof(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof(obj)};exports.shimGetUserMedia=shimGetUserMedia;var _utils=require("../utils");var utils=_interopRequireWildcard(_utils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function shimGetUserMedia(window){var browserDetails=utils.detectBrowser(window);var navigator=window&&window.navigator;var MediaStreamTrack=window&&window.MediaStreamTrack;navigator.getUserMedia=function(constraints,onSuccess,onError){utils.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia");navigator.mediaDevices.getUserMedia(constraints).then(onSuccess,onError)};if(!(browserDetails.version>55&&"autoGainControl"in navigator.mediaDevices.getSupportedConstraints())){var remap=function remap(obj,a,b){if(a in obj&&!(b in obj)){obj[b]=obj[a];delete obj[a]}};var nativeGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(c){if((typeof c==="undefined"?"undefined":_typeof$1(c))==="object"&&_typeof$1(c.audio)==="object"){c=JSON.parse(JSON.stringify(c));remap(c.audio,"autoGainControl","mozAutoGainControl");remap(c.audio,"noiseSuppression","mozNoiseSuppression")}return nativeGetUserMedia(c)};if(MediaStreamTrack&&MediaStreamTrack.prototype.getSettings){var nativeGetSettings=MediaStreamTrack.prototype.getSettings;MediaStreamTrack.prototype.getSettings=function(){var obj=nativeGetSettings.apply(this,arguments);remap(obj,"mozAutoGainControl","autoGainControl");remap(obj,"mozNoiseSuppression","noiseSuppression");return obj}}if(MediaStreamTrack&&MediaStreamTrack.prototype.applyConstraints){var nativeApplyConstraints=MediaStreamTrack.prototype.applyConstraints;MediaStreamTrack.prototype.applyConstraints=function(c){if(this.kind==="audio"&&(typeof c==="undefined"?"undefined":_typeof$1(c))==="object"){c=JSON.parse(JSON.stringify(c));remap(c,"autoGainControl","mozAutoGainControl");remap(c,"noiseSuppression","mozNoiseSuppression")}return nativeApplyConstraints.apply(this,[c])}}}}},{"../utils":15}],14:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _typeof$1=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(obj){return _typeof(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof(obj)};exports.shimLocalStreamsAPI=shimLocalStreamsAPI;exports.shimRemoteStreamsAPI=shimRemoteStreamsAPI;exports.shimCallbacksAPI=shimCallbacksAPI;exports.shimGetUserMedia=shimGetUserMedia;exports.shimConstraints=shimConstraints;exports.shimRTCIceServerUrls=shimRTCIceServerUrls;exports.shimTrackEventTransceiver=shimTrackEventTransceiver;exports.shimCreateOfferLegacy=shimCreateOfferLegacy;var _utils=require("../utils");var utils=_interopRequireWildcard(_utils);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj["default"]=obj;return newObj}}function shimLocalStreamsAPI(window){if((typeof window==="undefined"?"undefined":_typeof$1(window))!=="object"||!window.RTCPeerConnection){return}if(!("getLocalStreams"in window.RTCPeerConnection.prototype)){window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){if(!this._localStreams){this._localStreams=[]}return this._localStreams}}if(!("addStream"in window.RTCPeerConnection.prototype)){var _addTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addStream=function addStream(stream){var _this=this;if(!this._localStreams){this._localStreams=[]}if(!this._localStreams.includes(stream)){this._localStreams.push(stream)}stream.getAudioTracks().forEach(function(track){return _addTrack.call(_this,track,stream)});stream.getVideoTracks().forEach(function(track){return _addTrack.call(_this,track,stream)})};window.RTCPeerConnection.prototype.addTrack=function addTrack(track){var stream=arguments[1];if(stream){if(!this._localStreams){this._localStreams=[stream]}else if(!this._localStreams.includes(stream)){this._localStreams.push(stream)}}return _addTrack.apply(this,arguments)}}if(!("removeStream"in window.RTCPeerConnection.prototype)){window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){var _this2=this;if(!this._localStreams){this._localStreams=[]}var index=this._localStreams.indexOf(stream);if(index===-1){return}this._localStreams.splice(index,1);var tracks=stream.getTracks();this.getSenders().forEach(function(sender){if(tracks.includes(sender.track)){_this2.removeTrack(sender)}})}}}function shimRemoteStreamsAPI(window){if((typeof window==="undefined"?"undefined":_typeof$1(window))!=="object"||!window.RTCPeerConnection){return}if(!("getRemoteStreams"in window.RTCPeerConnection.prototype)){window.RTCPeerConnection.prototype.getRemoteStreams=function getRemoteStreams(){return this._remoteStreams?this._remoteStreams:[]}}if(!("onaddstream"in window.RTCPeerConnection.prototype)){Object.defineProperty(window.RTCPeerConnection.prototype,"onaddstream",{get:function get(){return this._onaddstream},set:function set(f){var _this3=this;if(this._onaddstream){this.removeEventListener("addstream",this._onaddstream);this.removeEventListener("track",this._onaddstreampoly)}this.addEventListener("addstream",this._onaddstream=f);this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(stream){if(!_this3._remoteStreams){_this3._remoteStreams=[]}if(_this3._remoteStreams.includes(stream)){return}_this3._remoteStreams.push(stream);var event=new Event("addstream");event.stream=stream;_this3.dispatchEvent(event)})})}});var origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){var pc=this;if(!this._onaddstreampoly){this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(stream){if(!pc._remoteStreams){pc._remoteStreams=[]}if(pc._remoteStreams.indexOf(stream)>=0){return}pc._remoteStreams.push(stream);var event=new Event("addstream");event.stream=stream;pc.dispatchEvent(event)})})}return origSetRemoteDescription.apply(pc,arguments)}}}function shimCallbacksAPI(window){if((typeof window==="undefined"?"undefined":_typeof$1(window))!=="object"||!window.RTCPeerConnection){return}var prototype=window.RTCPeerConnection.prototype;var origCreateOffer=prototype.createOffer;var origCreateAnswer=prototype.createAnswer;var setLocalDescription=prototype.setLocalDescription;var setRemoteDescription=prototype.setRemoteDescription;var addIceCandidate=prototype.addIceCandidate;prototype.createOffer=function createOffer(successCallback,failureCallback){var options=arguments.length>=2?arguments[2]:arguments[0];var promise=origCreateOffer.apply(this,[options]);if(!failureCallback){return promise}promise.then(successCallback,failureCallback);return Promise.resolve()};prototype.createAnswer=function createAnswer(successCallback,failureCallback){var options=arguments.length>=2?arguments[2]:arguments[0];var promise=origCreateAnswer.apply(this,[options]);if(!failureCallback){return promise}promise.then(successCallback,failureCallback);return Promise.resolve()};var withCallback=function withCallback(description,successCallback,failureCallback){var promise=setLocalDescription.apply(this,[description]);if(!failureCallback){return promise}promise.then(successCallback,failureCallback);return Promise.resolve()};prototype.setLocalDescription=withCallback;withCallback=function withCallback(description,successCallback,failureCallback){var promise=setRemoteDescription.apply(this,[description]);if(!failureCallback){return promise}promise.then(successCallback,failureCallback);return Promise.resolve()};prototype.setRemoteDescription=withCallback;withCallback=function withCallback(candidate,successCallback,failureCallback){var promise=addIceCandidate.apply(this,[candidate]);if(!failureCallback){return promise}promise.then(successCallback,failureCallback);return Promise.resolve()};prototype.addIceCandidate=withCallback}function shimGetUserMedia(window){var navigator=window&&window.navigator;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var mediaDevices=navigator.mediaDevices;var _getUserMedia=mediaDevices.getUserMedia.bind(mediaDevices);navigator.mediaDevices.getUserMedia=function(constraints){return _getUserMedia(shimConstraints(constraints))}}if(!navigator.getUserMedia&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){navigator.getUserMedia=function getUserMedia(constraints,cb,errcb){navigator.mediaDevices.getUserMedia(constraints).then(cb,errcb)}.bind(navigator)}}function shimConstraints(constraints){if(constraints&&constraints.video!==undefined){return Object.assign({},constraints,{video:utils.compactObject(constraints.video)})}return constraints}function shimRTCIceServerUrls(window){var OrigPeerConnection=window.RTCPeerConnection;window.RTCPeerConnection=function RTCPeerConnection(pcConfig,pcConstraints){if(pcConfig&&pcConfig.iceServers){var newIceServers=[];for(var i=0;i<pcConfig.iceServers.length;i++){var server=pcConfig.iceServers[i];if(!server.hasOwnProperty("urls")&&server.hasOwnProperty("url")){utils.deprecated("RTCIceServer.url","RTCIceServer.urls");server=JSON.parse(JSON.stringify(server));server.urls=server.url;delete server.url;newIceServers.push(server)}else{newIceServers.push(pcConfig.iceServers[i])}}pcConfig.iceServers=newIceServers}return new OrigPeerConnection(pcConfig,pcConstraints)};window.RTCPeerConnection.prototype=OrigPeerConnection.prototype;if("generateCertificate"in window.RTCPeerConnection){Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function get(){return OrigPeerConnection.generateCertificate}})}}function shimTrackEventTransceiver(window){if((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"&&window.RTCTrackEvent&&"receiver"in window.RTCTrackEvent.prototype&&!("transceiver"in window.RTCTrackEvent.prototype)){Object.defineProperty(window.RTCTrackEvent.prototype,"transceiver",{get:function get(){return{receiver:this.receiver}}})}}function shimCreateOfferLegacy(window){var origCreateOffer=window.RTCPeerConnection.prototype.createOffer;window.RTCPeerConnection.prototype.createOffer=function createOffer(offerOptions){if(offerOptions){if(typeof offerOptions.offerToReceiveAudio!=="undefined"){offerOptions.offerToReceiveAudio=!!offerOptions.offerToReceiveAudio}var audioTransceiver=this.getTransceivers().find(function(transceiver){return transceiver.receiver.track.kind==="audio"});if(offerOptions.offerToReceiveAudio===false&&audioTransceiver){if(audioTransceiver.direction==="sendrecv"){if(audioTransceiver.setDirection){audioTransceiver.setDirection("sendonly")}else{audioTransceiver.direction="sendonly"}}else if(audioTransceiver.direction==="recvonly"){if(audioTransceiver.setDirection){audioTransceiver.setDirection("inactive")}else{audioTransceiver.direction="inactive"}}}else if(offerOptions.offerToReceiveAudio===true&&!audioTransceiver){this.addTransceiver("audio")}if(typeof offerOptions.offerToReceiveVideo!=="undefined"){offerOptions.offerToReceiveVideo=!!offerOptions.offerToReceiveVideo}var videoTransceiver=this.getTransceivers().find(function(transceiver){return transceiver.receiver.track.kind==="video"});if(offerOptions.offerToReceiveVideo===false&&videoTransceiver){if(videoTransceiver.direction==="sendrecv"){if(videoTransceiver.setDirection){videoTransceiver.setDirection("sendonly")}else{videoTransceiver.direction="sendonly"}}else if(videoTransceiver.direction==="recvonly"){if(videoTransceiver.setDirection){videoTransceiver.setDirection("inactive")}else{videoTransceiver.direction="inactive"}}}else if(offerOptions.offerToReceiveVideo===true&&!videoTransceiver){this.addTransceiver("video")}}return origCreateOffer.apply(this,arguments)}}},{"../utils":15}],15:[function(require,module,exports){Object.defineProperty(exports,"__esModule",{value:true});var _typeof$1=typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"?function(obj){return _typeof(obj)}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof(obj)};exports.extractVersion=extractVersion;exports.wrapPeerConnectionEvent=wrapPeerConnectionEvent;exports.disableLog=disableLog;exports.disableWarnings=disableWarnings;exports.log=log;exports.deprecated=deprecated;exports.detectBrowser=detectBrowser;exports.compactObject=compactObject;exports.walkStats=walkStats;exports.filterStats=filterStats;function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var logDisabled_=true;var deprecationWarnings_=true;function extractVersion(uastring,expr,pos){var match=uastring.match(expr);return match&&match.length>=pos&&parseInt(match[pos],10)}function wrapPeerConnectionEvent(window,eventNameToWrap,wrapper){if(!window.RTCPeerConnection){return}var proto=window.RTCPeerConnection.prototype;var nativeAddEventListener=proto.addEventListener;proto.addEventListener=function(nativeEventName,cb){if(nativeEventName!==eventNameToWrap){return nativeAddEventListener.apply(this,arguments)}var wrappedCallback=function wrappedCallback(e){var modifiedEvent=wrapper(e);if(modifiedEvent){cb(modifiedEvent)}};this._eventMap=this._eventMap||{};this._eventMap[cb]=wrappedCallback;return nativeAddEventListener.apply(this,[nativeEventName,wrappedCallback])};var nativeRemoveEventListener=proto.removeEventListener;proto.removeEventListener=function(nativeEventName,cb){if(nativeEventName!==eventNameToWrap||!this._eventMap||!this._eventMap[cb]){return nativeRemoveEventListener.apply(this,arguments)}var unwrappedCb=this._eventMap[cb];delete this._eventMap[cb];return nativeRemoveEventListener.apply(this,[nativeEventName,unwrappedCb])};Object.defineProperty(proto,"on"+eventNameToWrap,{get:function get(){return this["_on"+eventNameToWrap]},set:function set(cb){if(this["_on"+eventNameToWrap]){this.removeEventListener(eventNameToWrap,this["_on"+eventNameToWrap]);delete this["_on"+eventNameToWrap]}if(cb){this.addEventListener(eventNameToWrap,this["_on"+eventNameToWrap]=cb)}},enumerable:true,configurable:true})}function disableLog(bool){if(typeof bool!=="boolean"){return new Error("Argument type: "+(typeof bool==="undefined"?"undefined":_typeof$1(bool))+". Please use a boolean.")}logDisabled_=bool;return bool?"adapter.js logging disabled":"adapter.js logging enabled"}function disableWarnings(bool){if(typeof bool!=="boolean"){return new Error("Argument type: "+(typeof bool==="undefined"?"undefined":_typeof$1(bool))+". Please use a boolean.")}deprecationWarnings_=!bool;return"adapter.js deprecation warnings "+(bool?"disabled":"enabled")}function log(){if((typeof window==="undefined"?"undefined":_typeof$1(window))==="object"){if(logDisabled_){return}if(typeof console!=="undefined"&&typeof console.log==="function"){console.log.apply(console,arguments)}}}function deprecated(oldMethod,newMethod){if(!deprecationWarnings_){return}console.warn(oldMethod+" is deprecated, please use "+newMethod+" instead.")}function detectBrowser(window){var navigator=window.navigator;var result={browser:null,version:null};if(typeof window==="undefined"||!window.navigator){result.browser="Not a browser.";return result}if(navigator.mozGetUserMedia){result.browser="firefox";result.version=extractVersion(navigator.userAgent,/Firefox\/(\d+)\./,1)}else if(navigator.webkitGetUserMedia||window.isSecureContext===false&&window.webkitRTCPeerConnection&&!window.RTCIceGatherer){result.browser="chrome";result.version=extractVersion(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2)}else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)){result.browser="edge";result.version=extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}else if(window.RTCPeerConnection&&navigator.userAgent.match(/AppleWebKit\/(\d+)\./)){result.browser="safari";result.version=extractVersion(navigator.userAgent,/AppleWebKit\/(\d+)\./,1);result.supportsUnifiedPlan=window.RTCRtpTransceiver&&"currentDirection"in window.RTCRtpTransceiver.prototype}else{result.browser="Not a supported browser.";return result}return result}function isObject(val){return Object.prototype.toString.call(val)==="[object Object]"}function compactObject(data){if(!isObject(data)){return data}return Object.keys(data).reduce(function(accumulator,key){var isObj=isObject(data[key]);var value=isObj?compactObject(data[key]):data[key];var isEmptyObject=isObj&&!Object.keys(value).length;if(value===undefined||isEmptyObject){return accumulator}return Object.assign(accumulator,_defineProperty({},key,value))},{})}function walkStats(stats,base,resultSet){if(!base||resultSet.has(base.id)){return}resultSet.set(base.id,base);Object.keys(base).forEach(function(name){if(name.endsWith("Id")){walkStats(stats,stats.get(base[name]),resultSet)}else if(name.endsWith("Ids")){base[name].forEach(function(id){walkStats(stats,stats.get(id),resultSet)})}})}function filterStats(result,track,outbound){var streamStatsType=outbound?"outbound-rtp":"inbound-rtp";var filteredResult=new Map;if(track===null){return filteredResult}var trackStats=[];result.forEach(function(value){if(value.type==="track"&&value.trackIdentifier===track.id){trackStats.push(value)}});trackStats.forEach(function(trackStat){result.forEach(function(stats){if(stats.type===streamStatsType&&stats.trackId===trackStat.id){walkStats(result,stats,filteredResult)}})});return filteredResult}},{}],16:[function(require,module,exports){var SDPUtils=require("sdp");function fixStatsType(stat){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[stat.type]||stat.type}function writeMediaSection(transceiver,caps,type,stream,dtlsRole){var sdp=SDPUtils.writeRtpDescription(transceiver.kind,caps);sdp+=SDPUtils.writeIceParameters(transceiver.iceGatherer.getLocalParameters());sdp+=SDPUtils.writeDtlsParameters(transceiver.dtlsTransport.getLocalParameters(),type==="offer"?"actpass":dtlsRole||"active");sdp+="a=mid:"+transceiver.mid+"\r\n";if(transceiver.rtpSender&&transceiver.rtpReceiver){sdp+="a=sendrecv\r\n"}else if(transceiver.rtpSender){sdp+="a=sendonly\r\n"}else if(transceiver.rtpReceiver){sdp+="a=recvonly\r\n"}else{sdp+="a=inactive\r\n"}if(transceiver.rtpSender){var trackId=transceiver.rtpSender._initialTrackId||transceiver.rtpSender.track.id;transceiver.rtpSender._initialTrackId=trackId;var msid="msid:"+(stream?stream.id:"-")+" "+trackId+"\r\n";sdp+="a="+msid;sdp+="a=ssrc:"+transceiver.sendEncodingParameters[0].ssrc+" "+msid;if(transceiver.sendEncodingParameters[0].rtx){sdp+="a=ssrc:"+transceiver.sendEncodingParameters[0].rtx.ssrc+" "+msid;sdp+="a=ssrc-group:FID "+transceiver.sendEncodingParameters[0].ssrc+" "+transceiver.sendEncodingParameters[0].rtx.ssrc+"\r\n"}}sdp+="a=ssrc:"+transceiver.sendEncodingParameters[0].ssrc+" cname:"+SDPUtils.localCName+"\r\n";if(transceiver.rtpSender&&transceiver.sendEncodingParameters[0].rtx){sdp+="a=ssrc:"+transceiver.sendEncodingParameters[0].rtx.ssrc+" cname:"+SDPUtils.localCName+"\r\n"}return sdp}function filterIceServers(iceServers,edgeVersion){var hasTurn=false;iceServers=JSON.parse(JSON.stringify(iceServers));return iceServers.filter(function(server){if(server&&(server.urls||server.url)){var urls=server.urls||server.url;if(server.url&&!server.urls){console.warn("RTCIceServer.url is deprecated! Use urls instead.")}var isString=typeof urls==="string";if(isString){urls=[urls]}urls=urls.filter(function(url){var validTurn=url.indexOf("turn:")===0&&url.indexOf("transport=udp")!==-1&&url.indexOf("turn:[")===-1&&!hasTurn;if(validTurn){hasTurn=true;return true}return url.indexOf("stun:")===0&&edgeVersion>=14393&&url.indexOf("?transport=udp")===-1});delete server.url;server.urls=isString?urls[0]:urls;return!!urls.length}})}function getCommonCapabilities(localCapabilities,remoteCapabilities){var commonCapabilities={codecs:[],headerExtensions:[],fecMechanisms:[]};var findCodecByPayloadType=function findCodecByPayloadType(pt,codecs){pt=parseInt(pt,10);for(var i=0;i<codecs.length;i++){if(codecs[i].payloadType===pt||codecs[i].preferredPayloadType===pt){return codecs[i]}}};var rtxCapabilityMatches=function rtxCapabilityMatches(lRtx,rRtx,lCodecs,rCodecs){var lCodec=findCodecByPayloadType(lRtx.parameters.apt,lCodecs);var rCodec=findCodecByPayloadType(rRtx.parameters.apt,rCodecs);return lCodec&&rCodec&&lCodec.name.toLowerCase()===rCodec.name.toLowerCase()};localCapabilities.codecs.forEach(function(lCodec){for(var i=0;i<remoteCapabilities.codecs.length;i++){var rCodec=remoteCapabilities.codecs[i];if(lCodec.name.toLowerCase()===rCodec.name.toLowerCase()&&lCodec.clockRate===rCodec.clockRate){if(lCodec.name.toLowerCase()==="rtx"&&lCodec.parameters&&rCodec.parameters.apt){if(!rtxCapabilityMatches(lCodec,rCodec,localCapabilities.codecs,remoteCapabilities.codecs)){continue}}rCodec=JSON.parse(JSON.stringify(rCodec));rCodec.numChannels=Math.min(lCodec.numChannels,rCodec.numChannels);commonCapabilities.codecs.push(rCodec);rCodec.rtcpFeedback=rCodec.rtcpFeedback.filter(function(fb){for(var j=0;j<lCodec.rtcpFeedback.length;j++){if(lCodec.rtcpFeedback[j].type===fb.type&&lCodec.rtcpFeedback[j].parameter===fb.parameter){return true}}return false});break}}});localCapabilities.headerExtensions.forEach(function(lHeaderExtension){for(var i=0;i<remoteCapabilities.headerExtensions.length;i++){var rHeaderExtension=remoteCapabilities.headerExtensions[i];if(lHeaderExtension.uri===rHeaderExtension.uri){commonCapabilities.headerExtensions.push(rHeaderExtension);break}}});return commonCapabilities}function isActionAllowedInSignalingState(action,type,signalingState){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[type][action].indexOf(signalingState)!==-1}function maybeAddCandidate(iceTransport,candidate){var alreadyAdded=iceTransport.getRemoteCandidates().find(function(remoteCandidate){return candidate.foundation===remoteCandidate.foundation&&candidate.ip===remoteCandidate.ip&&candidate.port===remoteCandidate.port&&candidate.priority===remoteCandidate.priority&&candidate.protocol===remoteCandidate.protocol&&candidate.type===remoteCandidate.type});if(!alreadyAdded){iceTransport.addRemoteCandidate(candidate)}return!alreadyAdded}function makeError(name,description){var e=new Error(description);e.name=name;e.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:undefined,OperationError:undefined}[name];return e}module.exports=function(window,edgeVersion){function addTrackToStreamAndFireEvent(track,stream){stream.addTrack(track);stream.dispatchEvent(new window.MediaStreamTrackEvent("addtrack",{track:track}))}function removeTrackFromStreamAndFireEvent(track,stream){stream.removeTrack(track);stream.dispatchEvent(new window.MediaStreamTrackEvent("removetrack",{track:track}))}function fireAddTrack(pc,track,receiver,streams){var trackEvent=new Event("track");trackEvent.track=track;trackEvent.receiver=receiver;trackEvent.transceiver={receiver:receiver};trackEvent.streams=streams;window.setTimeout(function(){pc._dispatchEvent("track",trackEvent)})}var RTCPeerConnection=function RTCPeerConnection(config){var pc=this;var _eventTarget=document.createDocumentFragment();["addEventListener","removeEventListener","dispatchEvent"].forEach(function(method){pc[method]=_eventTarget[method].bind(_eventTarget)});this.canTrickleIceCandidates=null;this.needNegotiation=false;this.localStreams=[];this.remoteStreams=[];this._localDescription=null;this._remoteDescription=null;this.signalingState="stable";this.iceConnectionState="new";this.connectionState="new";this.iceGatheringState="new";config=JSON.parse(JSON.stringify(config||{}));this.usingBundle=config.bundlePolicy==="max-bundle";if(config.rtcpMuxPolicy==="negotiate"){throw makeError("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported")}else if(!config.rtcpMuxPolicy){config.rtcpMuxPolicy="require"}switch(config.iceTransportPolicy){case"all":case"relay":break;default:config.iceTransportPolicy="all";break}switch(config.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:config.bundlePolicy="balanced";break}config.iceServers=filterIceServers(config.iceServers||[],edgeVersion);this._iceGatherers=[];if(config.iceCandidatePoolSize){for(var i=config.iceCandidatePoolSize;i>0;i--){this._iceGatherers.push(new window.RTCIceGatherer({iceServers:config.iceServers,gatherPolicy:config.iceTransportPolicy}))}}else{config.iceCandidatePoolSize=0}this._config=config;this.transceivers=[];this._sdpSessionId=SDPUtils.generateSessionId();this._sdpSessionVersion=0;this._dtlsRole=undefined;this._isClosed=false};Object.defineProperty(RTCPeerConnection.prototype,"localDescription",{configurable:true,get:function get(){return this._localDescription}});Object.defineProperty(RTCPeerConnection.prototype,"remoteDescription",{configurable:true,get:function get(){return this._remoteDescription}});RTCPeerConnection.prototype.onicecandidate=null;RTCPeerConnection.prototype.onaddstream=null;RTCPeerConnection.prototype.ontrack=null;RTCPeerConnection.prototype.onremovestream=null;RTCPeerConnection.prototype.onsignalingstatechange=null;RTCPeerConnection.prototype.oniceconnectionstatechange=null;RTCPeerConnection.prototype.onconnectionstatechange=null;RTCPeerConnection.prototype.onicegatheringstatechange=null;RTCPeerConnection.prototype.onnegotiationneeded=null;RTCPeerConnection.prototype.ondatachannel=null;RTCPeerConnection.prototype._dispatchEvent=function(name,event){if(this._isClosed){return}this.dispatchEvent(event);if(typeof this["on"+name]==="function"){this["on"+name](event)}};RTCPeerConnection.prototype._emitGatheringStateChange=function(){var event=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",event)};RTCPeerConnection.prototype.getConfiguration=function(){return this._config};RTCPeerConnection.prototype.getLocalStreams=function(){return this.localStreams};RTCPeerConnection.prototype.getRemoteStreams=function(){return this.remoteStreams};RTCPeerConnection.prototype._createTransceiver=function(kind,doNotAdd){var hasBundleTransport=this.transceivers.length>0;var transceiver={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:kind,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:true};if(this.usingBundle&&hasBundleTransport){transceiver.iceTransport=this.transceivers[0].iceTransport;transceiver.dtlsTransport=this.transceivers[0].dtlsTransport}else{var transports=this._createIceAndDtlsTransports();transceiver.iceTransport=transports.iceTransport;transceiver.dtlsTransport=transports.dtlsTransport}if(!doNotAdd){this.transceivers.push(transceiver)}return transceiver};RTCPeerConnection.prototype.addTrack=function(track,stream){if(this._isClosed){throw makeError("InvalidStateError","Attempted to call addTrack on a closed peerconnection.")}var alreadyExists=this.transceivers.find(function(s){return s.track===track});if(alreadyExists){throw makeError("InvalidAccessError","Track already exists.")}var transceiver;for(var i=0;i<this.transceivers.length;i++){if(!this.transceivers[i].track&&this.transceivers[i].kind===track.kind){transceiver=this.transceivers[i]}}if(!transceiver){transceiver=this._createTransceiver(track.kind)}this._maybeFireNegotiationNeeded();if(this.localStreams.indexOf(stream)===-1){this.localStreams.push(stream)}transceiver.track=track;transceiver.stream=stream;transceiver.rtpSender=new window.RTCRtpSender(track,transceiver.dtlsTransport);return transceiver.rtpSender};RTCPeerConnection.prototype.addStream=function(stream){var pc=this;if(edgeVersion>=15025){stream.getTracks().forEach(function(track){pc.addTrack(track,stream)})}else{var clonedStream=stream.clone();stream.getTracks().forEach(function(track,idx){var clonedTrack=clonedStream.getTracks()[idx];track.addEventListener("enabled",function(event){clonedTrack.enabled=event.enabled})});clonedStream.getTracks().forEach(function(track){pc.addTrack(track,clonedStream)})}};RTCPeerConnection.prototype.removeTrack=function(sender){if(this._isClosed){throw makeError("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.")}if(!(sender instanceof window.RTCRtpSender)){throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack "+"does not implement interface RTCRtpSender.")}var transceiver=this.transceivers.find(function(t){return t.rtpSender===sender});if(!transceiver){throw makeError("InvalidAccessError","Sender was not created by this connection.")}var stream=transceiver.stream;transceiver.rtpSender.stop();transceiver.rtpSender=null;transceiver.track=null;transceiver.stream=null;var localStreams=this.transceivers.map(function(t){return t.stream});if(localStreams.indexOf(stream)===-1&&this.localStreams.indexOf(stream)>-1){this.localStreams.splice(this.localStreams.indexOf(stream),1)}this._maybeFireNegotiationNeeded()};RTCPeerConnection.prototype.removeStream=function(stream){var pc=this;stream.getTracks().forEach(function(track){var sender=pc.getSenders().find(function(s){return s.track===track});if(sender){pc.removeTrack(sender)}})};RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(transceiver){return!!transceiver.rtpSender}).map(function(transceiver){return transceiver.rtpSender})};RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(transceiver){return!!transceiver.rtpReceiver}).map(function(transceiver){return transceiver.rtpReceiver})};RTCPeerConnection.prototype._createIceGatherer=function(sdpMLineIndex,usingBundle){var pc=this;if(usingBundle&&sdpMLineIndex>0){return this.transceivers[0].iceGatherer}else if(this._iceGatherers.length){return this._iceGatherers.shift()}var iceGatherer=new window.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});Object.defineProperty(iceGatherer,"state",{value:"new",writable:true});this.transceivers[sdpMLineIndex].bufferedCandidateEvents=[];this.transceivers[sdpMLineIndex].bufferCandidates=function(event){var end=!event.candidate||Object.keys(event.candidate).length===0;iceGatherer.state=end?"completed":"gathering";if(pc.transceivers[sdpMLineIndex].bufferedCandidateEvents!==null){pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event)}};iceGatherer.addEventListener("localcandidate",this.transceivers[sdpMLineIndex].bufferCandidates);return iceGatherer};RTCPeerConnection.prototype._gather=function(mid,sdpMLineIndex){var pc=this;var iceGatherer=this.transceivers[sdpMLineIndex].iceGatherer;if(iceGatherer.onlocalcandidate){return}var bufferedCandidateEvents=this.transceivers[sdpMLineIndex].bufferedCandidateEvents;this.transceivers[sdpMLineIndex].bufferedCandidateEvents=null;iceGatherer.removeEventListener("localcandidate",this.transceivers[sdpMLineIndex].bufferCandidates);iceGatherer.onlocalcandidate=function(evt){if(pc.usingBundle&&sdpMLineIndex>0){return}var event=new Event("icecandidate");event.candidate={sdpMid:mid,sdpMLineIndex:sdpMLineIndex};var cand=evt.candidate;var end=!cand||Object.keys(cand).length===0;if(end){if(iceGatherer.state==="new"||iceGatherer.state==="gathering"){iceGatherer.state="completed"}}else{if(iceGatherer.state==="new"){iceGatherer.state="gathering"}cand.component=1;cand.ufrag=iceGatherer.getLocalParameters().usernameFragment;var serializedCandidate=SDPUtils.writeCandidate(cand);event.candidate=Object.assign(event.candidate,SDPUtils.parseCandidate(serializedCandidate));event.candidate.candidate=serializedCandidate;event.candidate.toJSON=function(){return{candidate:event.candidate.candidate,sdpMid:event.candidate.sdpMid,sdpMLineIndex:event.candidate.sdpMLineIndex,usernameFragment:event.candidate.usernameFragment}}}var sections=SDPUtils.getMediaSections(pc._localDescription.sdp);if(!end){sections[event.candidate.sdpMLineIndex]+="a="+event.candidate.candidate+"\r\n"}else{sections[event.candidate.sdpMLineIndex]+="a=end-of-candidates\r\n"}pc._localDescription.sdp=SDPUtils.getDescription(pc._localDescription.sdp)+sections.join("");var complete=pc.transceivers.every(function(transceiver){return transceiver.iceGatherer&&transceiver.iceGatherer.state==="completed"});if(pc.iceGatheringState!=="gathering"){pc.iceGatheringState="gathering";pc._emitGatheringStateChange()}if(!end){pc._dispatchEvent("icecandidate",event)}if(complete){pc._dispatchEvent("icecandidate",new Event("icecandidate"));pc.iceGatheringState="complete";pc._emitGatheringStateChange()}};window.setTimeout(function(){bufferedCandidateEvents.forEach(function(e){iceGatherer.onlocalcandidate(e)})},0)};RTCPeerConnection.prototype._createIceAndDtlsTransports=function(){var pc=this;var iceTransport=new window.RTCIceTransport(null);iceTransport.onicestatechange=function(){pc._updateIceConnectionState();pc._updateConnectionState()};var dtlsTransport=new window.RTCDtlsTransport(iceTransport);dtlsTransport.ondtlsstatechange=function(){pc._updateConnectionState()};dtlsTransport.onerror=function(){Object.defineProperty(dtlsTransport,"state",{value:"failed",writable:true});pc._updateConnectionState()};return{iceTransport:iceTransport,dtlsTransport:dtlsTransport}};RTCPeerConnection.prototype._disposeIceAndDtlsTransports=function(sdpMLineIndex){var iceGatherer=this.transceivers[sdpMLineIndex].iceGatherer;if(iceGatherer){delete iceGatherer.onlocalcandidate;delete this.transceivers[sdpMLineIndex].iceGatherer}var iceTransport=this.transceivers[sdpMLineIndex].iceTransport;if(iceTransport){delete iceTransport.onicestatechange;delete this.transceivers[sdpMLineIndex].iceTransport}var dtlsTransport=this.transceivers[sdpMLineIndex].dtlsTransport;if(dtlsTransport){delete dtlsTransport.ondtlsstatechange;delete dtlsTransport.onerror;delete this.transceivers[sdpMLineIndex].dtlsTransport}};RTCPeerConnection.prototype._transceive=function(transceiver,send,recv){var params=getCommonCapabilities(transceiver.localCapabilities,transceiver.remoteCapabilities);if(send&&transceiver.rtpSender){params.encodings=transceiver.sendEncodingParameters;params.rtcp={cname:SDPUtils.localCName,compound:transceiver.rtcpParameters.compound};if(transceiver.recvEncodingParameters.length){params.rtcp.ssrc=transceiver.recvEncodingParameters[0].ssrc}transceiver.rtpSender.send(params)}if(recv&&transceiver.rtpReceiver&&params.codecs.length>0){if(transceiver.kind==="video"&&transceiver.recvEncodingParameters&&edgeVersion<15019){transceiver.recvEncodingParameters.forEach(function(p){delete p.rtx})}if(transceiver.recvEncodingParameters.length){params.encodings=transceiver.recvEncodingParameters}else{params.encodings=[{}]}params.rtcp={compound:transceiver.rtcpParameters.compound};if(transceiver.rtcpParameters.cname){params.rtcp.cname=transceiver.rtcpParameters.cname}if(transceiver.sendEncodingParameters.length){params.rtcp.ssrc=transceiver.sendEncodingParameters[0].ssrc}transceiver.rtpReceiver.receive(params)}};RTCPeerConnection.prototype.setLocalDescription=function(description){var pc=this;if(["offer","answer"].indexOf(description.type)===-1){return Promise.reject(makeError("TypeError",'Unsupported type "'+description.type+'"'))}if(!isActionAllowedInSignalingState("setLocalDescription",description.type,pc.signalingState)||pc._isClosed){return Promise.reject(makeError("InvalidStateError","Can not set local "+description.type+" in state "+pc.signalingState))}var sections;var sessionpart;if(description.type==="offer"){sections=SDPUtils.splitSections(description.sdp);sessionpart=sections.shift();sections.forEach(function(mediaSection,sdpMLineIndex){var caps=SDPUtils.parseRtpParameters(mediaSection);pc.transceivers[sdpMLineIndex].localCapabilities=caps});pc.transceivers.forEach(function(transceiver,sdpMLineIndex){pc._gather(transceiver.mid,sdpMLineIndex)})}else if(description.type==="answer"){sections=SDPUtils.splitSections(pc._remoteDescription.sdp);sessionpart=sections.shift();var isIceLite=SDPUtils.matchPrefix(sessionpart,"a=ice-lite").length>0;sections.forEach(function(mediaSection,sdpMLineIndex){var transceiver=pc.transceivers[sdpMLineIndex];var iceGatherer=transceiver.iceGatherer;var iceTransport=transceiver.iceTransport;var dtlsTransport=transceiver.dtlsTransport;var localCapabilities=transceiver.localCapabilities;var remoteCapabilities=transceiver.remoteCapabilities;var rejected=SDPUtils.isRejected(mediaSection)&&SDPUtils.matchPrefix(mediaSection,"a=bundle-only").length===0;if(!rejected&&!transceiver.rejected){var remoteIceParameters=SDPUtils.getIceParameters(mediaSection,sessionpart);var remoteDtlsParameters=SDPUtils.getDtlsParameters(mediaSection,sessionpart);if(isIceLite){remoteDtlsParameters.role="server"}if(!pc.usingBundle||sdpMLineIndex===0){pc._gather(transceiver.mid,sdpMLineIndex);if(iceTransport.state==="new"){iceTransport.start(iceGatherer,remoteIceParameters,isIceLite?"controlling":"controlled")}if(dtlsTransport.state==="new"){dtlsTransport.start(remoteDtlsParameters)}}var params=getCommonCapabilities(localCapabilities,remoteCapabilities);pc._transceive(transceiver,params.codecs.length>0,false)}})}pc._localDescription={type:description.type,sdp:description.sdp};if(description.type==="offer"){pc._updateSignalingState("have-local-offer")}else{pc._updateSignalingState("stable")}return Promise.resolve()};RTCPeerConnection.prototype.setRemoteDescription=function(description){var pc=this;if(["offer","answer"].indexOf(description.type)===-1){return Promise.reject(makeError("TypeError",'Unsupported type "'+description.type+'"'))}if(!isActionAllowedInSignalingState("setRemoteDescription",description.type,pc.signalingState)||pc._isClosed){return Promise.reject(makeError("InvalidStateError","Can not set remote "+description.type+" in state "+pc.signalingState))}var streams={};pc.remoteStreams.forEach(function(stream){streams[stream.id]=stream});var receiverList=[];var sections=SDPUtils.splitSections(description.sdp);var sessionpart=sections.shift();var isIceLite=SDPUtils.matchPrefix(sessionpart,"a=ice-lite").length>0;var usingBundle=SDPUtils.matchPrefix(sessionpart,"a=group:BUNDLE ").length>0;pc.usingBundle=usingBundle;var iceOptions=SDPUtils.matchPrefix(sessionpart,"a=ice-options:")[0];if(iceOptions){pc.canTrickleIceCandidates=iceOptions.substr(14).split(" ").indexOf("trickle")>=0}else{pc.canTrickleIceCandidates=false}sections.forEach(function(mediaSection,sdpMLineIndex){var lines=SDPUtils.splitLines(mediaSection);var kind=SDPUtils.getKind(mediaSection);var rejected=SDPUtils.isRejected(mediaSection)&&SDPUtils.matchPrefix(mediaSection,"a=bundle-only").length===0;var protocol=lines[0].substr(2).split(" ")[2];var direction=SDPUtils.getDirection(mediaSection,sessionpart);var remoteMsid=SDPUtils.parseMsid(mediaSection);var mid=SDPUtils.getMid(mediaSection)||SDPUtils.generateIdentifier();if(rejected||kind==="application"&&(protocol==="DTLS/SCTP"||protocol==="UDP/DTLS/SCTP")){pc.transceivers[sdpMLineIndex]={mid:mid,kind:kind,protocol:protocol,rejected:true};return}if(!rejected&&pc.transceivers[sdpMLineIndex]&&pc.transceivers[sdpMLineIndex].rejected){pc.transceivers[sdpMLineIndex]=pc._createTransceiver(kind,true)}var transceiver;var iceGatherer;var iceTransport;var dtlsTransport;var rtpReceiver;var sendEncodingParameters;var recvEncodingParameters;var localCapabilities;var track;var remoteCapabilities=SDPUtils.parseRtpParameters(mediaSection);var remoteIceParameters;var remoteDtlsParameters;if(!rejected){remoteIceParameters=SDPUtils.getIceParameters(mediaSection,sessionpart);remoteDtlsParameters=SDPUtils.getDtlsParameters(mediaSection,sessionpart);remoteDtlsParameters.role="client"}recvEncodingParameters=SDPUtils.parseRtpEncodingParameters(mediaSection);var rtcpParameters=SDPUtils.parseRtcpParameters(mediaSection);var isComplete=SDPUtils.matchPrefix(mediaSection,"a=end-of-candidates",sessionpart).length>0;var cands=SDPUtils.matchPrefix(mediaSection,"a=candidate:").map(function(cand){return SDPUtils.parseCandidate(cand)}).filter(function(cand){return cand.component===1});if((description.type==="offer"||description.type==="answer")&&!rejected&&usingBundle&&sdpMLineIndex>0&&pc.transceivers[sdpMLineIndex]){pc._disposeIceAndDtlsTransports(sdpMLineIndex);pc.transceivers[sdpMLineIndex].iceGatherer=pc.transceivers[0].iceGatherer;pc.transceivers[sdpMLineIndex].iceTransport=pc.transceivers[0].iceTransport;pc.transceivers[sdpMLineIndex].dtlsTransport=pc.transceivers[0].dtlsTransport;if(pc.transceivers[sdpMLineIndex].rtpSender){pc.transceivers[sdpMLineIndex].rtpSender.setTransport(pc.transceivers[0].dtlsTransport)}if(pc.transceivers[sdpMLineIndex].rtpReceiver){pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(pc.transceivers[0].dtlsTransport)}}if(description.type==="offer"&&!rejected){transceiver=pc.transceivers[sdpMLineIndex]||pc._createTransceiver(kind);transceiver.mid=mid;if(!transceiver.iceGatherer){transceiver.iceGatherer=pc._createIceGatherer(sdpMLineIndex,usingBundle)}if(cands.length&&transceiver.iceTransport.state==="new"){if(isComplete&&(!usingBundle||sdpMLineIndex===0)){transceiver.iceTransport.setRemoteCandidates(cands)}else{cands.forEach(function(candidate){maybeAddCandidate(transceiver.iceTransport,candidate)})}}localCapabilities=window.RTCRtpReceiver.getCapabilities(kind);if(edgeVersion<15019){localCapabilities.codecs=localCapabilities.codecs.filter(function(codec){return codec.name!=="rtx"})}sendEncodingParameters=transceiver.sendEncodingParameters||[{ssrc:(2*sdpMLineIndex+2)*1001}];var isNewTrack=false;if(direction==="sendrecv"||direction==="sendonly"){isNewTrack=!transceiver.rtpReceiver;rtpReceiver=transceiver.rtpReceiver||new window.RTCRtpReceiver(transceiver.dtlsTransport,kind);if(isNewTrack){var stream;track=rtpReceiver.track;if(remoteMsid&&remoteMsid.stream==="-");else if(remoteMsid){if(!streams[remoteMsid.stream]){streams[remoteMsid.stream]=new window.MediaStream;Object.defineProperty(streams[remoteMsid.stream],"id",{get:function get(){return remoteMsid.stream}})}Object.defineProperty(track,"id",{get:function get(){return remoteMsid.track}});stream=streams[remoteMsid.stream]}else{if(!streams["default"]){streams["default"]=new window.MediaStream}stream=streams["default"]}if(stream){addTrackToStreamAndFireEvent(track,stream);transceiver.associatedRemoteMediaStreams.push(stream)}receiverList.push([track,rtpReceiver,stream])}}else if(transceiver.rtpReceiver&&transceiver.rtpReceiver.track){transceiver.associatedRemoteMediaStreams.forEach(function(s){var nativeTrack=s.getTracks().find(function(t){return t.id===transceiver.rtpReceiver.track.id});if(nativeTrack){removeTrackFromStreamAndFireEvent(nativeTrack,s)}});transceiver.associatedRemoteMediaStreams=[]}transceiver.localCapabilities=localCapabilities;transceiver.remoteCapabilities=remoteCapabilities;transceiver.rtpReceiver=rtpReceiver;transceiver.rtcpParameters=rtcpParameters;transceiver.sendEncodingParameters=sendEncodingParameters;transceiver.recvEncodingParameters=recvEncodingParameters;pc._transceive(pc.transceivers[sdpMLineIndex],false,isNewTrack)}else if(description.type==="answer"&&!rejected){transceiver=pc.transceivers[sdpMLineIndex];iceGatherer=transceiver.iceGatherer;iceTransport=transceiver.iceTransport;dtlsTransport=transceiver.dtlsTransport;rtpReceiver=transceiver.rtpReceiver;sendEncodingParameters=transceiver.sendEncodingParameters;localCapabilities=transceiver.localCapabilities;pc.transceivers[sdpMLineIndex].recvEncodingParameters=recvEncodingParameters;pc.transceivers[sdpMLineIndex].remoteCapabilities=remoteCapabilities;pc.transceivers[sdpMLineIndex].rtcpParameters=rtcpParameters;if(cands.length&&iceTransport.state==="new"){if((isIceLite||isComplete)&&(!usingBundle||sdpMLineIndex===0)){iceTransport.setRemoteCandidates(cands)}else{cands.forEach(function(candidate){maybeAddCandidate(transceiver.iceTransport,candidate)})}}if(!usingBundle||sdpMLineIndex===0){if(iceTransport.state==="new"){iceTransport.start(iceGatherer,remoteIceParameters,"controlling")}if(dtlsTransport.state==="new"){dtlsTransport.start(remoteDtlsParameters)}}var commonCapabilities=getCommonCapabilities(transceiver.localCapabilities,transceiver.remoteCapabilities);var hasRtx=commonCapabilities.codecs.filter(function(c){return c.name.toLowerCase()==="rtx"}).length;if(!hasRtx&&transceiver.sendEncodingParameters[0].rtx){delete transceiver.sendEncodingParameters[0].rtx}pc._transceive(transceiver,direction==="sendrecv"||direction==="recvonly",direction==="sendrecv"||direction==="sendonly");if(rtpReceiver&&(direction==="sendrecv"||direction==="sendonly")){track=rtpReceiver.track;if(remoteMsid){if(!streams[remoteMsid.stream]){streams[remoteMsid.stream]=new window.MediaStream}addTrackToStreamAndFireEvent(track,streams[remoteMsid.stream]);receiverList.push([track,rtpReceiver,streams[remoteMsid.stream]])}else{if(!streams["default"]){streams["default"]=new window.MediaStream}addTrackToStreamAndFireEvent(track,streams["default"]);receiverList.push([track,rtpReceiver,streams["default"]])}}else{delete transceiver.rtpReceiver}}});if(pc._dtlsRole===undefined){pc._dtlsRole=description.type==="offer"?"active":"passive"}pc._remoteDescription={type:description.type,sdp:description.sdp};if(description.type==="offer"){pc._updateSignalingState("have-remote-offer")}else{pc._updateSignalingState("stable")}Object.keys(streams).forEach(function(sid){var stream=streams[sid];if(stream.getTracks().length){if(pc.remoteStreams.indexOf(stream)===-1){pc.remoteStreams.push(stream);var event=new Event("addstream");event.stream=stream;window.setTimeout(function(){pc._dispatchEvent("addstream",event)})}receiverList.forEach(function(item){var track=item[0];var receiver=item[1];if(stream.id!==item[2].id){return}fireAddTrack(pc,track,receiver,[stream])})}});receiverList.forEach(function(item){if(item[2]){return}fireAddTrack(pc,item[0],item[1],[])});window.setTimeout(function(){if(!(pc&&pc.transceivers)){return}pc.transceivers.forEach(function(transceiver){if(transceiver.iceTransport&&transceiver.iceTransport.state==="new"&&transceiver.iceTransport.getRemoteCandidates().length>0){console.warn("Timeout for addRemoteCandidate. Consider sending "+"an end-of-candidates notification");transceiver.iceTransport.addRemoteCandidate({})}})},4e3);return Promise.resolve()};RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(transceiver){if(transceiver.iceTransport){transceiver.iceTransport.stop()}if(transceiver.dtlsTransport){transceiver.dtlsTransport.stop()}if(transceiver.rtpSender){transceiver.rtpSender.stop()}if(transceiver.rtpReceiver){transceiver.rtpReceiver.stop()}});this._isClosed=true;this._updateSignalingState("closed")};RTCPeerConnection.prototype._updateSignalingState=function(newState){this.signalingState=newState;var event=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",event)};RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var pc=this;if(this.signalingState!=="stable"||this.needNegotiation===true){return}this.needNegotiation=true;window.setTimeout(function(){if(pc.needNegotiation){pc.needNegotiation=false;var event=new Event("negotiationneeded");pc._dispatchEvent("negotiationneeded",event)}},0)};RTCPeerConnection.prototype._updateIceConnectionState=function(){var newState;var states={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(transceiver){if(transceiver.iceTransport&&!transceiver.rejected){states[transceiver.iceTransport.state]++}});newState="new";if(states.failed>0){newState="failed"}else if(states.checking>0){newState="checking"}else if(states.disconnected>0){newState="disconnected"}else if(states["new"]>0){newState="new"}else if(states.connected>0){newState="connected"}else if(states.completed>0){newState="completed"}if(newState!==this.iceConnectionState){this.iceConnectionState=newState;var event=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",event)}};RTCPeerConnection.prototype._updateConnectionState=function(){var newState;var states={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(transceiver){if(transceiver.iceTransport&&transceiver.dtlsTransport&&!transceiver.rejected){states[transceiver.iceTransport.state]++;states[transceiver.dtlsTransport.state]++}});states.connected+=states.completed;newState="new";if(states.failed>0){newState="failed"}else if(states.connecting>0){newState="connecting"}else if(states.disconnected>0){newState="disconnected"}else if(states["new"]>0){newState="new"}else if(states.connected>0){newState="connected"}if(newState!==this.connectionState){this.connectionState=newState;var event=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",event)}};RTCPeerConnection.prototype.createOffer=function(){var pc=this;if(pc._isClosed){return Promise.reject(makeError("InvalidStateError","Can not call createOffer after close"))}var numAudioTracks=pc.transceivers.filter(function(t){return t.kind==="audio"}).length;var numVideoTracks=pc.transceivers.filter(function(t){return t.kind==="video"}).length;var offerOptions=arguments[0];if(offerOptions){if(offerOptions.mandatory||offerOptions.optional){throw new TypeError("Legacy mandatory/optional constraints not supported.")}if(offerOptions.offerToReceiveAudio!==undefined){if(offerOptions.offerToReceiveAudio===true){numAudioTracks=1}else if(offerOptions.offerToReceiveAudio===false){numAudioTracks=0}else{numAudioTracks=offerOptions.offerToReceiveAudio}}if(offerOptions.offerToReceiveVideo!==undefined){if(offerOptions.offerToReceiveVideo===true){numVideoTracks=1}else if(offerOptions.offerToReceiveVideo===false){numVideoTracks=0}else{numVideoTracks=offerOptions.offerToReceiveVideo}}}pc.transceivers.forEach(function(transceiver){if(transceiver.kind==="audio"){numAudioTracks--;if(numAudioTracks<0){transceiver.wantReceive=false}}else if(transceiver.kind==="video"){numVideoTracks--;if(numVideoTracks<0){transceiver.wantReceive=false}}});while(numAudioTracks>0||numVideoTracks>0){if(numAudioTracks>0){pc._createTransceiver("audio");numAudioTracks--}if(numVideoTracks>0){pc._createTransceiver("video");numVideoTracks--}}var sdp=SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,pc._sdpSessionVersion++);pc.transceivers.forEach(function(transceiver,sdpMLineIndex){var track=transceiver.track;var kind=transceiver.kind;var mid=transceiver.mid||SDPUtils.generateIdentifier();transceiver.mid=mid;if(!transceiver.iceGatherer){transceiver.iceGatherer=pc._createIceGatherer(sdpMLineIndex,pc.usingBundle)}var localCapabilities=window.RTCRtpSender.getCapabilities(kind);if(edgeVersion<15019){localCapabilities.codecs=localCapabilities.codecs.filter(function(codec){return codec.name!=="rtx"})}localCapabilities.codecs.forEach(function(codec){if(codec.name==="H264"&&codec.parameters["level-asymmetry-allowed"]===undefined){codec.parameters["level-asymmetry-allowed"]="1"}if(transceiver.remoteCapabilities&&transceiver.remoteCapabilities.codecs){transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec){if(codec.name.toLowerCase()===remoteCodec.name.toLowerCase()&&codec.clockRate===remoteCodec.clockRate){codec.preferredPayloadType=remoteCodec.payloadType}})}});localCapabilities.headerExtensions.forEach(function(hdrExt){var remoteExtensions=transceiver.remoteCapabilities&&transceiver.remoteCapabilities.headerExtensions||[];remoteExtensions.forEach(function(rHdrExt){if(hdrExt.uri===rHdrExt.uri){hdrExt.id=rHdrExt.id}})});var sendEncodingParameters=transceiver.sendEncodingParameters||[{ssrc:(2*sdpMLineIndex+1)*1001}];if(track){if(edgeVersion>=15019&&kind==="video"&&!sendEncodingParameters[0].rtx){sendEncodingParameters[0].rtx={ssrc:sendEncodingParameters[0].ssrc+1}}}if(transceiver.wantReceive){transceiver.rtpReceiver=new window.RTCRtpReceiver(transceiver.dtlsTransport,kind)}transceiver.localCapabilities=localCapabilities;transceiver.sendEncodingParameters=sendEncodingParameters});if(pc._config.bundlePolicy!=="max-compat"){sdp+="a=group:BUNDLE "+pc.transceivers.map(function(t){return t.mid}).join(" ")+"\r\n"}sdp+="a=ice-options:trickle\r\n";pc.transceivers.forEach(function(transceiver,sdpMLineIndex){sdp+=writeMediaSection(transceiver,transceiver.localCapabilities,"offer",transceiver.stream,pc._dtlsRole);sdp+="a=rtcp-rsize\r\n";if(transceiver.iceGatherer&&pc.iceGatheringState!=="new"&&(sdpMLineIndex===0||!pc.usingBundle)){transceiver.iceGatherer.getLocalCandidates().forEach(function(cand){cand.component=1;sdp+="a="+SDPUtils.writeCandidate(cand)+"\r\n"});if(transceiver.iceGatherer.state==="completed"){sdp+="a=end-of-candidates\r\n"}}});var desc=new window.RTCSessionDescription({type:"offer",sdp:sdp});return Promise.resolve(desc)};RTCPeerConnection.prototype.createAnswer=function(){var pc=this;if(pc._isClosed){return Promise.reject(makeError("InvalidStateError","Can not call createAnswer after close"))}if(!(pc.signalingState==="have-remote-offer"||pc.signalingState==="have-local-pranswer")){return Promise.reject(makeError("InvalidStateError","Can not call createAnswer in signalingState "+pc.signalingState))}var sdp=SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,pc._sdpSessionVersion++);if(pc.usingBundle){sdp+="a=group:BUNDLE "+pc.transceivers.map(function(t){return t.mid}).join(" ")+"\r\n"}sdp+="a=ice-options:trickle\r\n";var mediaSectionsInOffer=SDPUtils.getMediaSections(pc._remoteDescription.sdp).length;pc.transceivers.forEach(function(transceiver,sdpMLineIndex){if(sdpMLineIndex+1>mediaSectionsInOffer){return}if(transceiver.rejected){if(transceiver.kind==="application"){if(transceiver.protocol==="DTLS/SCTP"){sdp+="m=application 0 DTLS/SCTP 5000\r\n"}else{sdp+="m=application 0 "+transceiver.protocol+" webrtc-datachannel\r\n"}}else if(transceiver.kind==="audio"){sdp+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\n"+"a=rtpmap:0 PCMU/8000\r\n"}else if(transceiver.kind==="video"){sdp+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\n"+"a=rtpmap:120 VP8/90000\r\n"}sdp+="c=IN IP4 0.0.0.0\r\n"+"a=inactive\r\n"+"a=mid:"+transceiver.mid+"\r\n";return}if(transceiver.stream){var localTrack;if(transceiver.kind==="audio"){localTrack=transceiver.stream.getAudioTracks()[0]}else if(transceiver.kind==="video"){localTrack=transceiver.stream.getVideoTracks()[0]}if(localTrack){if(edgeVersion>=15019&&transceiver.kind==="video"&&!transceiver.sendEncodingParameters[0].rtx){transceiver.sendEncodingParameters[0].rtx={ssrc:transceiver.sendEncodingParameters[0].ssrc+1}}}}var commonCapabilities=getCommonCapabilities(transceiver.localCapabilities,transceiver.remoteCapabilities);var hasRtx=commonCapabilities.codecs.filter(function(c){return c.name.toLowerCase()==="rtx"}).length;if(!hasRtx&&transceiver.sendEncodingParameters[0].rtx){delete transceiver.sendEncodingParameters[0].rtx}sdp+=writeMediaSection(transceiver,commonCapabilities,"answer",transceiver.stream,pc._dtlsRole);if(transceiver.rtcpParameters&&transceiver.rtcpParameters.reducedSize){sdp+="a=rtcp-rsize\r\n"}});var desc=new window.RTCSessionDescription({type:"answer",sdp:sdp});return Promise.resolve(desc)};RTCPeerConnection.prototype.addIceCandidate=function(candidate){var pc=this;var sections;if(candidate&&!(candidate.sdpMLineIndex!==undefined||candidate.sdpMid)){return Promise.reject(new TypeError("sdpMLineIndex or sdpMid required"))}return new Promise(function(resolve,reject){if(!pc._remoteDescription){return reject(makeError("InvalidStateError","Can not add ICE candidate without a remote description"))}else if(!candidate||candidate.candidate===""){for(var j=0;j<pc.transceivers.length;j++){if(pc.transceivers[j].rejected){continue}pc.transceivers[j].iceTransport.addRemoteCandidate({});sections=SDPUtils.getMediaSections(pc._remoteDescription.sdp);sections[j]+="a=end-of-candidates\r\n";pc._remoteDescription.sdp=SDPUtils.getDescription(pc._remoteDescription.sdp)+sections.join("");if(pc.usingBundle){break}}}else{var sdpMLineIndex=candidate.sdpMLineIndex;if(candidate.sdpMid){for(var i=0;i<pc.transceivers.length;i++){if(pc.transceivers[i].mid===candidate.sdpMid){sdpMLineIndex=i;break}}}var transceiver=pc.transceivers[sdpMLineIndex];if(transceiver){if(transceiver.rejected){return resolve()}var cand=Object.keys(candidate.candidate).length>0?SDPUtils.parseCandidate(candidate.candidate):{};if(cand.protocol==="tcp"&&(cand.port===0||cand.port===9)){return resolve()}if(cand.component&&cand.component!==1){return resolve()}if(sdpMLineIndex===0||sdpMLineIndex>0&&transceiver.iceTransport!==pc.transceivers[0].iceTransport){if(!maybeAddCandidate(transceiver.iceTransport,cand)){return reject(makeError("OperationError","Can not add ICE candidate"))}}var candidateString=candidate.candidate.trim();if(candidateString.indexOf("a=")===0){candidateString=candidateString.substr(2)}sections=SDPUtils.getMediaSections(pc._remoteDescription.sdp);sections[sdpMLineIndex]+="a="+(cand.type?candidateString:"end-of-candidates")+"\r\n";pc._remoteDescription.sdp=SDPUtils.getDescription(pc._remoteDescription.sdp)+sections.join("")}else{return reject(makeError("OperationError","Can not add ICE candidate"))}}resolve()})};RTCPeerConnection.prototype.getStats=function(selector){if(selector&&selector instanceof window.MediaStreamTrack){var senderOrReceiver=null;this.transceivers.forEach(function(transceiver){if(transceiver.rtpSender&&transceiver.rtpSender.track===selector){senderOrReceiver=transceiver.rtpSender}else if(transceiver.rtpReceiver&&transceiver.rtpReceiver.track===selector){senderOrReceiver=transceiver.rtpReceiver}});if(!senderOrReceiver){throw makeError("InvalidAccessError","Invalid selector.")}return senderOrReceiver.getStats()}var promises=[];this.transceivers.forEach(function(transceiver){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(method){if(transceiver[method]){promises.push(transceiver[method].getStats())}})});return Promise.all(promises).then(function(allStats){var results=new Map;allStats.forEach(function(stats){stats.forEach(function(stat){results.set(stat.id,stat)})});return results})};var ortcObjects=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];ortcObjects.forEach(function(ortcObjectName){var obj=window[ortcObjectName];if(obj&&obj.prototype&&obj.prototype.getStats){var nativeGetstats=obj.prototype.getStats;obj.prototype.getStats=function(){return nativeGetstats.apply(this).then(function(nativeStats){var mapStats=new Map;Object.keys(nativeStats).forEach(function(id){nativeStats[id].type=fixStatsType(nativeStats[id]);mapStats.set(id,nativeStats[id])});return mapStats})}}});var methods=["createOffer","createAnswer"];methods.forEach(function(method){var nativeMethod=RTCPeerConnection.prototype[method];RTCPeerConnection.prototype[method]=function(){var args=arguments;if(typeof args[0]==="function"||typeof args[1]==="function"){return nativeMethod.apply(this,[arguments[2]]).then(function(description){if(typeof args[0]==="function"){args[0].apply(null,[description])}},function(error){if(typeof args[1]==="function"){args[1].apply(null,[error])}})}return nativeMethod.apply(this,arguments)}});methods=["setLocalDescription","setRemoteDescription","addIceCandidate"];methods.forEach(function(method){var nativeMethod=RTCPeerConnection.prototype[method];RTCPeerConnection.prototype[method]=function(){var args=arguments;if(typeof args[1]==="function"||typeof args[2]==="function"){return nativeMethod.apply(this,arguments).then(function(){if(typeof args[1]==="function"){args[1].apply(null)}},function(error){if(typeof args[2]==="function"){args[2].apply(null,[error])}})}return nativeMethod.apply(this,arguments)}});["getStats"].forEach(function(method){var nativeMethod=RTCPeerConnection.prototype[method];RTCPeerConnection.prototype[method]=function(){var args=arguments;if(typeof args[1]==="function"){return nativeMethod.apply(this,arguments).then(function(){if(typeof args[1]==="function"){args[1].apply(null)}})}return nativeMethod.apply(this,arguments)}});return RTCPeerConnection}},{sdp:17}],17:[function(require,module,exports){var SDPUtils={};SDPUtils.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)};SDPUtils.localCName=SDPUtils.generateIdentifier();SDPUtils.splitLines=function(blob){return blob.trim().split("\n").map(function(line){return line.trim()})};SDPUtils.splitSections=function(blob){var parts=blob.split("\nm=");return parts.map(function(part,index){return(index>0?"m="+part:part).trim()+"\r\n"})};SDPUtils.getDescription=function(blob){var sections=SDPUtils.splitSections(blob);return sections&&sections[0]};SDPUtils.getMediaSections=function(blob){var sections=SDPUtils.splitSections(blob);sections.shift();return sections};SDPUtils.matchPrefix=function(blob,prefix){return SDPUtils.splitLines(blob).filter(function(line){return line.indexOf(prefix)===0})};SDPUtils.parseCandidate=function(line){var parts;if(line.indexOf("a=candidate:")===0){parts=line.substring(12).split(" ")}else{parts=line.substring(10).split(" ")}var candidate={foundation:parts[0],component:parseInt(parts[1],10),protocol:parts[2].toLowerCase(),priority:parseInt(parts[3],10),ip:parts[4],address:parts[4],port:parseInt(parts[5],10),type:parts[7]};for(var i=8;i<parts.length;i+=2){switch(parts[i]){case"raddr":candidate.relatedAddress=parts[i+1];break;case"rport":candidate.relatedPort=parseInt(parts[i+1],10);break;case"tcptype":candidate.tcpType=parts[i+1];break;case"ufrag":candidate.ufrag=parts[i+1];candidate.usernameFragment=parts[i+1];break;default:candidate[parts[i]]=parts[i+1];break}}return candidate};SDPUtils.writeCandidate=function(candidate){var sdp=[];sdp.push(candidate.foundation);sdp.push(candidate.component);sdp.push(candidate.protocol.toUpperCase());sdp.push(candidate.priority);sdp.push(candidate.address||candidate.ip);sdp.push(candidate.port);var type=candidate.type;sdp.push("typ");sdp.push(type);if(type!=="host"&&candidate.relatedAddress&&candidate.relatedPort){sdp.push("raddr");sdp.push(candidate.relatedAddress);sdp.push("rport");sdp.push(candidate.relatedPort)}if(candidate.tcpType&&candidate.protocol.toLowerCase()==="tcp"){sdp.push("tcptype");sdp.push(candidate.tcpType)}if(candidate.usernameFragment||candidate.ufrag){sdp.push("ufrag");sdp.push(candidate.usernameFragment||candidate.ufrag)}return"candidate:"+sdp.join(" ")};SDPUtils.parseIceOptions=function(line){return line.substr(14).split(" ")};SDPUtils.parseRtpMap=function(line){var parts=line.substr(9).split(" ");var parsed={payloadType:parseInt(parts.shift(),10)};parts=parts[0].split("/");parsed.name=parts[0];parsed.clockRate=parseInt(parts[1],10);parsed.channels=parts.length===3?parseInt(parts[2],10):1;parsed.numChannels=parsed.channels;return parsed};SDPUtils.writeRtpMap=function(codec){var pt=codec.payloadType;if(codec.preferredPayloadType!==undefined){pt=codec.preferredPayloadType}var channels=codec.channels||codec.numChannels||1;return"a=rtpmap:"+pt+" "+codec.name+"/"+codec.clockRate+(channels!==1?"/"+channels:"")+"\r\n"};SDPUtils.parseExtmap=function(line){var parts=line.substr(9).split(" ");return{id:parseInt(parts[0],10),direction:parts[0].indexOf("/")>0?parts[0].split("/")[1]:"sendrecv",uri:parts[1]}};SDPUtils.writeExtmap=function(headerExtension){return"a=extmap:"+(headerExtension.id||headerExtension.preferredId)+(headerExtension.direction&&headerExtension.direction!=="sendrecv"?"/"+headerExtension.direction:"")+" "+headerExtension.uri+"\r\n"};SDPUtils.parseFmtp=function(line){var parsed={};var kv;var parts=line.substr(line.indexOf(" ")+1).split(";");for(var j=0;j<parts.length;j++){kv=parts[j].trim().split("=");parsed[kv[0].trim()]=kv[1]}return parsed};SDPUtils.writeFmtp=function(codec){var line="";var pt=codec.payloadType;if(codec.preferredPayloadType!==undefined){pt=codec.preferredPayloadType}if(codec.parameters&&Object.keys(codec.parameters).length){var params=[];Object.keys(codec.parameters).forEach(function(param){if(codec.parameters[param]){params.push(param+"="+codec.parameters[param])}else{params.push(param)}});line+="a=fmtp:"+pt+" "+params.join(";")+"\r\n"}return line};SDPUtils.parseRtcpFb=function(line){var parts=line.substr(line.indexOf(" ")+1).split(" ");return{type:parts.shift(),parameter:parts.join(" ")}};SDPUtils.writeRtcpFb=function(codec){var lines="";var pt=codec.payloadType;if(codec.preferredPayloadType!==undefined){pt=codec.preferredPayloadType}if(codec.rtcpFeedback&&codec.rtcpFeedback.length){codec.rtcpFeedback.forEach(function(fb){lines+="a=rtcp-fb:"+pt+" "+fb.type+(fb.parameter&&fb.parameter.length?" "+fb.parameter:"")+"\r\n"})}return lines};SDPUtils.parseSsrcMedia=function(line){var sp=line.indexOf(" ");var parts={ssrc:parseInt(line.substr(7,sp-7),10)};var colon=line.indexOf(":",sp);if(colon>-1){parts.attribute=line.substr(sp+1,colon-sp-1);parts.value=line.substr(colon+1)}else{parts.attribute=line.substr(sp+1)}return parts};SDPUtils.parseSsrcGroup=function(line){var parts=line.substr(13).split(" ");return{semantics:parts.shift(),ssrcs:parts.map(function(ssrc){return parseInt(ssrc,10)})}};SDPUtils.getMid=function(mediaSection){var mid=SDPUtils.matchPrefix(mediaSection,"a=mid:")[0];if(mid){return mid.substr(6)}};SDPUtils.parseFingerprint=function(line){var parts=line.substr(14).split(" ");return{algorithm:parts[0].toLowerCase(),value:parts[1]}};SDPUtils.getDtlsParameters=function(mediaSection,sessionpart){var lines=SDPUtils.matchPrefix(mediaSection+sessionpart,"a=fingerprint:");return{role:"auto",fingerprints:lines.map(SDPUtils.parseFingerprint)}};SDPUtils.writeDtlsParameters=function(params,setupType){var sdp="a=setup:"+setupType+"\r\n";params.fingerprints.forEach(function(fp){sdp+="a=fingerprint:"+fp.algorithm+" "+fp.value+"\r\n"});return sdp};SDPUtils.getIceParameters=function(mediaSection,sessionpart){var lines=SDPUtils.splitLines(mediaSection);lines=lines.concat(SDPUtils.splitLines(sessionpart));var iceParameters={usernameFragment:lines.filter(function(line){return line.indexOf("a=ice-ufrag:")===0})[0].substr(12),password:lines.filter(function(line){return line.indexOf("a=ice-pwd:")===0})[0].substr(10)};return iceParameters};SDPUtils.writeIceParameters=function(params){return"a=ice-ufrag:"+params.usernameFragment+"\r\n"+"a=ice-pwd:"+params.password+"\r\n"};SDPUtils.parseRtpParameters=function(mediaSection){var description={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]};var lines=SDPUtils.splitLines(mediaSection);var mline=lines[0].split(" ");for(var i=3;i<mline.length;i++){var pt=mline[i];var rtpmapline=SDPUtils.matchPrefix(mediaSection,"a=rtpmap:"+pt+" ")[0];if(rtpmapline){var codec=SDPUtils.parseRtpMap(rtpmapline);var fmtps=SDPUtils.matchPrefix(mediaSection,"a=fmtp:"+pt+" ");codec.parameters=fmtps.length?SDPUtils.parseFmtp(fmtps[0]):{};codec.rtcpFeedback=SDPUtils.matchPrefix(mediaSection,"a=rtcp-fb:"+pt+" ").map(SDPUtils.parseRtcpFb);description.codecs.push(codec);switch(codec.name.toUpperCase()){case"RED":case"ULPFEC":description.fecMechanisms.push(codec.name.toUpperCase());break}}}SDPUtils.matchPrefix(mediaSection,"a=extmap:").forEach(function(line){description.headerExtensions.push(SDPUtils.parseExtmap(line))});return description};SDPUtils.writeRtpDescription=function(kind,caps){var sdp="";sdp+="m="+kind+" ";sdp+=caps.codecs.length>0?"9":"0";sdp+=" UDP/TLS/RTP/SAVPF ";sdp+=caps.codecs.map(function(codec){if(codec.preferredPayloadType!==undefined){return codec.preferredPayloadType}return codec.payloadType}).join(" ")+"\r\n";sdp+="c=IN IP4 0.0.0.0\r\n";sdp+="a=rtcp:9 IN IP4 0.0.0.0\r\n";caps.codecs.forEach(function(codec){sdp+=SDPUtils.writeRtpMap(codec);sdp+=SDPUtils.writeFmtp(codec);sdp+=SDPUtils.writeRtcpFb(codec)});var maxptime=0;caps.codecs.forEach(function(codec){if(codec.maxptime>maxptime){maxptime=codec.maxptime}});if(maxptime>0){sdp+="a=maxptime:"+maxptime+"\r\n"}sdp+="a=rtcp-mux\r\n";if(caps.headerExtensions){caps.headerExtensions.forEach(function(extension){sdp+=SDPUtils.writeExtmap(extension)})}return sdp};SDPUtils.parseRtpEncodingParameters=function(mediaSection){var encodingParameters=[];var description=SDPUtils.parseRtpParameters(mediaSection);var hasRed=description.fecMechanisms.indexOf("RED")!==-1;var hasUlpfec=description.fecMechanisms.indexOf("ULPFEC")!==-1;var ssrcs=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map(function(line){return SDPUtils.parseSsrcMedia(line)}).filter(function(parts){return parts.attribute==="cname"});var primarySsrc=ssrcs.length>0&&ssrcs[0].ssrc;var secondarySsrc;var flows=SDPUtils.matchPrefix(mediaSection,"a=ssrc-group:FID").map(function(line){var parts=line.substr(17).split(" ");return parts.map(function(part){return parseInt(part,10)})});if(flows.length>0&&flows[0].length>1&&flows[0][0]===primarySsrc){secondarySsrc=flows[0][1]}description.codecs.forEach(function(codec){if(codec.name.toUpperCase()==="RTX"&&codec.parameters.apt){var encParam={ssrc:primarySsrc,codecPayloadType:parseInt(codec.parameters.apt,10)};if(primarySsrc&&secondarySsrc){encParam.rtx={ssrc:secondarySsrc}}encodingParameters.push(encParam);if(hasRed){encParam=JSON.parse(JSON.stringify(encParam));encParam.fec={ssrc:primarySsrc,mechanism:hasUlpfec?"red+ulpfec":"red"};encodingParameters.push(encParam)}}});if(encodingParameters.length===0&&primarySsrc){encodingParameters.push({ssrc:primarySsrc})}var bandwidth=SDPUtils.matchPrefix(mediaSection,"b=");if(bandwidth.length){if(bandwidth[0].indexOf("b=TIAS:")===0){bandwidth=parseInt(bandwidth[0].substr(7),10)}else if(bandwidth[0].indexOf("b=AS:")===0){bandwidth=parseInt(bandwidth[0].substr(5),10)*1e3*.95-50*40*8}else{bandwidth=undefined}encodingParameters.forEach(function(params){params.maxBitrate=bandwidth})}return encodingParameters};SDPUtils.parseRtcpParameters=function(mediaSection){var rtcpParameters={};var remoteSsrc=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map(function(line){return SDPUtils.parseSsrcMedia(line)}).filter(function(obj){return obj.attribute==="cname"})[0];if(remoteSsrc){rtcpParameters.cname=remoteSsrc.value;rtcpParameters.ssrc=remoteSsrc.ssrc}var rsize=SDPUtils.matchPrefix(mediaSection,"a=rtcp-rsize");rtcpParameters.reducedSize=rsize.length>0;rtcpParameters.compound=rsize.length===0;var mux=SDPUtils.matchPrefix(mediaSection,"a=rtcp-mux");rtcpParameters.mux=mux.length>0;return rtcpParameters};SDPUtils.parseMsid=function(mediaSection){var parts;var spec=SDPUtils.matchPrefix(mediaSection,"a=msid:");if(spec.length===1){parts=spec[0].substr(7).split(" ");return{stream:parts[0],track:parts[1]}}var planB=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map(function(line){return SDPUtils.parseSsrcMedia(line)}).filter(function(msidParts){return msidParts.attribute==="msid"});if(planB.length>0){parts=planB[0].value.split(" ");return{stream:parts[0],track:parts[1]}}};SDPUtils.parseSctpDescription=function(mediaSection){var mline=SDPUtils.parseMLine(mediaSection);var maxSizeLine=SDPUtils.matchPrefix(mediaSection,"a=max-message-size:");var maxMessageSize;if(maxSizeLine.length>0){maxMessageSize=parseInt(maxSizeLine[0].substr(19),10)}if(isNaN(maxMessageSize)){maxMessageSize=65536}var sctpPort=SDPUtils.matchPrefix(mediaSection,"a=sctp-port:");if(sctpPort.length>0){return{port:parseInt(sctpPort[0].substr(12),10),protocol:mline.fmt,maxMessageSize:maxMessageSize}}var sctpMapLines=SDPUtils.matchPrefix(mediaSection,"a=sctpmap:");if(sctpMapLines.length>0){var parts=SDPUtils.matchPrefix(mediaSection,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(parts[0],10),protocol:parts[1],maxMessageSize:maxMessageSize}}};SDPUtils.writeSctpDescription=function(media,sctp){var output=[];if(media.protocol!=="DTLS/SCTP"){output=["m="+media.kind+" 9 "+media.protocol+" "+sctp.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+sctp.port+"\r\n"]}else{output=["m="+media.kind+" 9 "+media.protocol+" "+sctp.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+sctp.port+" "+sctp.protocol+" 65535\r\n"]}if(sctp.maxMessageSize!==undefined){output.push("a=max-message-size:"+sctp.maxMessageSize+"\r\n")}return output.join("")};SDPUtils.generateSessionId=function(){return Math.random().toString().substr(2,21)};SDPUtils.writeSessionBoilerplate=function(sessId,sessVer,sessUser){var sessionId;var version=sessVer!==undefined?sessVer:2;if(sessId){sessionId=sessId}else{sessionId=SDPUtils.generateSessionId()}var user=sessUser||"thisisadapterortc";return"v=0\r\n"+"o="+user+" "+sessionId+" "+version+" IN IP4 127.0.0.1\r\n"+"s=-\r\n"+"t=0 0\r\n"};SDPUtils.writeMediaSection=function(transceiver,caps,type,stream){var sdp=SDPUtils.writeRtpDescription(transceiver.kind,caps);sdp+=SDPUtils.writeIceParameters(transceiver.iceGatherer.getLocalParameters());sdp+=SDPUtils.writeDtlsParameters(transceiver.dtlsTransport.getLocalParameters(),type==="offer"?"actpass":"active");sdp+="a=mid:"+transceiver.mid+"\r\n";if(transceiver.direction){sdp+="a="+transceiver.direction+"\r\n"}else if(transceiver.rtpSender&&transceiver.rtpReceiver){sdp+="a=sendrecv\r\n"}else if(transceiver.rtpSender){sdp+="a=sendonly\r\n"}else if(transceiver.rtpReceiver){sdp+="a=recvonly\r\n"}else{sdp+="a=inactive\r\n"}if(transceiver.rtpSender){var msid="msid:"+stream.id+" "+transceiver.rtpSender.track.id+"\r\n";sdp+="a="+msid;sdp+="a=ssrc:"+transceiver.sendEncodingParameters[0].ssrc+" "+msid;if(transceiver.sendEncodingParameters[0].rtx){sdp+="a=ssrc:"+transceiver.sendEncodingParameters[0].rtx.ssrc+" "+msid;sdp+="a=ssrc-group:FID "+transceiver.sendEncodingParameters[0].ssrc+" "+transceiver.sendEncodingParameters[0].rtx.ssrc+"\r\n"}}sdp+="a=ssrc:"+transceiver.sendEncodingParameters[0].ssrc+" cname:"+SDPUtils.localCName+"\r\n";if(transceiver.rtpSender&&transceiver.sendEncodingParameters[0].rtx){sdp+="a=ssrc:"+transceiver.sendEncodingParameters[0].rtx.ssrc+" cname:"+SDPUtils.localCName+"\r\n"}return sdp};SDPUtils.getDirection=function(mediaSection,sessionpart){var lines=SDPUtils.splitLines(mediaSection);for(var i=0;i<lines.length;i++){switch(lines[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return lines[i].substr(2)}}if(sessionpart){return SDPUtils.getDirection(sessionpart)}return"sendrecv"};SDPUtils.getKind=function(mediaSection){var lines=SDPUtils.splitLines(mediaSection);var mline=lines[0].split(" ");return mline[0].substr(2)};SDPUtils.isRejected=function(mediaSection){return mediaSection.split(" ",2)[1]==="0"};SDPUtils.parseMLine=function(mediaSection){var lines=SDPUtils.splitLines(mediaSection);var parts=lines[0].substr(2).split(" ");return{kind:parts[0],port:parseInt(parts[1],10),protocol:parts[2],fmt:parts.slice(3).join(" ")}};SDPUtils.parseOLine=function(mediaSection){var line=SDPUtils.matchPrefix(mediaSection,"o=")[0];var parts=line.substr(2).split(" ");return{username:parts[0],sessionId:parts[1],sessionVersion:parseInt(parts[2],10),netType:parts[3],addressType:parts[4],address:parts[5]}};SDPUtils.isValidSDP=function(blob){if(typeof blob!=="string"||blob.length===0){return false}var lines=SDPUtils.splitLines(blob);for(var i=0;i<lines.length;i++){if(lines[i].length<2||lines[i].charAt(1)!=="="){return false}}return true};if(_typeof(module)==="object"){module.exports=SDPUtils}},{}]},{},[1])(1)})})(adapeter);Janus$3.sessions={};Janus$3.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){return true}if(window.navigator.userAgent.match("Chrome")){var chromever=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10);var maxver=33;if(window.navigator.userAgent.match("Linux"))maxver=35;if(chromever>=26&&chromever<=maxver){return true}return Janus$3.extension.isInstalled()}else{return true}};var defaultExtension$1={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function isInstalled(){return document.querySelector("#janus-extension-installed")!==null},getScreen:function getScreen(callback){var pending=window.setTimeout(function(){var error=new Error("NavigatorUserMediaError");error.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)';return callback(error)},1e3);this.cache[pending]=callback;window.postMessage({type:"janusGetScreen",id:pending},"*")},init:function init(){var cache={};this.cache=cache;window.addEventListener("message",function(event){if(event.origin!=window.location.origin)return;if(event.data.type=="janusGotScreen"&&cache[event.data.id]){var callback=cache[event.data.id];delete cache[event.data.id];if(event.data.sourceId===""){var error=new Error("NavigatorUserMediaError");error.name="You cancelled the request for permission, giving up...";callback(error)}else{callback(null,event.data.sourceId)}}else if(event.data.type=="janusGetScreenPending"){console.log("clearing ",event.data.id);window.clearTimeout(event.data.id)}})}};Janus$3.useDefaultDependencies=function(deps){var f=deps&&deps.fetch||fetch;var p=deps&&deps.Promise||Promise;var socketCls=deps&&deps.WebSocket||WebSocket;return{newWebSocket:function newWebSocket(server,proto){return new socketCls(server,proto)},extension:deps&&deps.extension||defaultExtension$1,isArray:function isArray(arr){return Array.isArray(arr)},webRTCAdapter:deps&&deps.adapter||window.adapter,httpAPICall:function httpAPICall(url,options){var fetchOptions={method:options.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};if(options.verb==="POST"){fetchOptions.headers["Content-Type"]="application/json"}if(options.withCredentials!==undefined){fetchOptions.credentials=options.withCredentials===true?"include":options.withCredentials?options.withCredentials:"omit"}if(options.body!==undefined){fetchOptions.body=JSON.stringify(options.body)}var fetching=f(url,fetchOptions)["catch"](function(error){return p.reject({message:"Probably a network error, is the server down?",error:error})});if(options.timeout!==undefined){var timeout=new p(function(resolve,reject){var timerId=setTimeout(function(){clearTimeout(timerId);return reject({message:"Request timed out",timeout:options.timeout})},options.timeout)});fetching=p.race([fetching,timeout])}fetching.then(function(response){if(response.ok){if(_typeof(options.success)===_typeof(Janus$3.noop)){return response.json().then(function(parsed){options.success(parsed)})["catch"](function(error){return p.reject({message:"Failed to parse response body",error:error,response:response})})}}else{return p.reject({message:"API call failed",response:response})}})["catch"](function(error){if(_typeof(options.error)===_typeof(Janus$3.noop)){options.error(error.message||"<< internal error >>",error)}});return fetching}}};Janus$3.useOldDependencies=function(deps){var jq=deps&&deps.jQuery||jQuery;var socketCls=deps&&deps.WebSocket||WebSocket;return{newWebSocket:function newWebSocket(server,proto){return new socketCls(server,proto)},isArray:function isArray(arr){return jq.isArray(arr)},extension:deps&&deps.extension||defaultExtension$1,webRTCAdapter:deps&&deps.adapter||adapter,httpAPICall:function httpAPICall(url,options){var payload=options.body!==undefined?{contentType:"application/json",data:JSON.stringify(options.body)}:{};var credentials=options.withCredentials!==undefined?{xhrFields:{withCredentials:options.withCredentials}}:{};return jq.ajax(jq.extend(payload,credentials,{url:url,type:options.verb,cache:false,dataType:"json",async:options.async,timeout:options.timeout,success:function success(result){if(_typeof(options.success)===_typeof(Janus$3.noop)){options.success(result)}},error:function error(xhr,status,err){if(_typeof(options.error)===_typeof(Janus$3.noop)){options.error(status,err)}}}))}}};Janus$3.noop=function(){};Janus$3.dataChanDefaultLabel="JanusDataChannel";Janus$3.endOfCandidates=null;Janus$3.init=function(options){options=options||{};options.callback=typeof options.callback=="function"?options.callback:Janus$3.noop;if(Janus$3.initDone===true){options.callback()}else{if(typeof console=="undefined"||typeof console.log=="undefined")console={log:function log(){}};Janus$3.trace=Janus$3.noop;Janus$3.debug=Janus$3.noop;Janus$3.vdebug=Janus$3.noop;Janus$3.log=Janus$3.noop;Janus$3.warn=Janus$3.noop;Janus$3.error=Janus$3.noop;if(options.debug===true||options.debug==="all"){Janus$3.trace=console.trace.bind(console);Janus$3.debug=console.debug.bind(console);Janus$3.vdebug=console.debug.bind(console);Janus$3.log=console.log.bind(console);Janus$3.warn=console.warn.bind(console);Janus$3.error=console.error.bind(console)}else if(Array.isArray(options.debug)){for(var i in options.debug){var d=options.debug[i];switch(d){case"trace":Janus$3.trace=console.trace.bind(console);break;case"debug":Janus$3.debug=console.debug.bind(console);break;case"vdebug":Janus$3.vdebug=console.debug.bind(console);break;case"log":Janus$3.log=console.log.bind(console);break;case"warn":Janus$3.warn=console.warn.bind(console);break;case"error":Janus$3.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+d+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");break}}}Janus$3.log("Initializing library");var usedDependencies=options.dependencies||Janus$3.useDefaultDependencies();Janus$3.isArray=usedDependencies.isArray;Janus$3.webRTCAdapter=usedDependencies.webRTCAdapter;Janus$3.httpAPICall=usedDependencies.httpAPICall;Janus$3.newWebSocket=usedDependencies.newWebSocket;Janus$3.extension=usedDependencies.extension;Janus$3.extension.init();Janus$3.listDevices=function(callback,config){callback=typeof callback=="function"?callback:Janus$3.noop;if(config==null)config={audio:true,video:true};if(Janus$3.isGetUserMediaAvailable()){navigator.mediaDevices.getUserMedia(config).then(function(stream){navigator.mediaDevices.enumerateDevices().then(function(devices){Janus$3.debug(devices);callback(devices);try{var tracks=stream.getTracks();for(var i in tracks){var mst=tracks[i];if(mst!==null&&mst!==undefined)mst.stop()}}catch(e){}})})["catch"](function(err){Janus$3.error(err);callback([])})}else{Janus$3.warn("navigator.mediaDevices unavailable");callback([])}};Janus$3.attachMediaStream=function(element,stream){if(Janus$3.webRTCAdapter.browserDetails.browser==="chrome"){var chromever=Janus$3.webRTCAdapter.browserDetails.version;if(chromever>=52){element.srcObject=stream}else{Janus$3.error("Error attaching stream to element")}}else{element.srcObject=stream}};Janus$3.reattachMediaStream=function(to,from){if(Janus$3.webRTCAdapter.browserDetails.browser==="chrome"){var chromever=Janus$3.webRTCAdapter.browserDetails.version;if(chromever>=52){to.srcObject=from.srcObject}else if(typeof to.src!=="undefined"){to.src=from.src}else{Janus$3.error("Error reattaching stream to element")}}else{to.srcObject=from.srcObject}};var iOS=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0;var eventName=iOS?"pagehide":"beforeunload";var oldOBF=window["on"+eventName];window.addEventListener(eventName,function(event){Janus$3.log("Closing window");for(var s in Janus$3.sessions){if(Janus$3.sessions[s]!==null&&Janus$3.sessions[s]!==undefined&&Janus$3.sessions[s].destroyOnUnload){Janus$3.log("Destroying session "+s);Janus$3.sessions[s].destroy({asyncRequest:false,notifyDestroyed:false})}}if(oldOBF&&typeof oldOBF=="function")oldOBF()});Janus$3.safariVp8=false;if(Janus$3.webRTCAdapter.browserDetails.browser==="safari"&&Janus$3.webRTCAdapter.browserDetails.version>=605){if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var i in RTCRtpSender.getCapabilities("video").codecs){var codec=RTCRtpSender.getCapabilities("video").codecs[i];if(codec&&codec.mimeType&&codec.mimeType.toLowerCase()==="video/vp8"){Janus$3.safariVp8=true;break}}if(Janus$3.safariVp8){Janus$3.log("This version of Safari supports VP8")}else{Janus$3.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, "+"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}}else{var testpc=new RTCPeerConnection({},{});testpc.createOffer({offerToReceiveVideo:true}).then(function(offer){Janus$3.safariVp8=offer.sdp.indexOf("VP8")!==-1;if(Janus$3.safariVp8){Janus$3.log("This version of Safari supports VP8")}else{Janus$3.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, "+"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}testpc.close();testpc=null})}}Janus$3.unifiedPlan=false;if(Janus$3.webRTCAdapter.browserDetails.browser==="firefox"&&Janus$3.webRTCAdapter.browserDetails.version>=59){Janus$3.unifiedPlan=true}else if(Janus$3.webRTCAdapter.browserDetails.browser==="chrome"&&Janus$3.webRTCAdapter.browserDetails.version<72){Janus$3.unifiedPlan=false}else if(typeof RTCRtpTransceiver!=="undefined"&&!("currentDirection"in RTCRtpTransceiver.prototype)){Janus$3.unifiedPlan=false}else{var tempPc=new RTCPeerConnection;try{tempPc.addTransceiver("audio");Janus$3.unifiedPlan=true}catch(e){}tempPc.close()}Janus$3.initDone=true;options.callback()}};Janus$3.isWebrtcSupported=function(){return window.RTCPeerConnection!==undefined&&window.RTCPeerConnection!==null};Janus$3.isGetUserMediaAvailable=function(){return navigator.mediaDevices!==undefined&&navigator.mediaDevices!==null&&navigator.mediaDevices.getUserMedia!==undefined&&navigator.mediaDevices.getUserMedia!==null};Janus$3.randomString=function(len){var charSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var randomString="";for(var i=0;i<len;i++){var randomPoz=Math.floor(Math.random()*charSet.length);randomString+=charSet.substring(randomPoz,randomPoz+1)}return randomString};function Janus$3(gatewayCallbacks){if(Janus$3.initDone===undefined){gatewayCallbacks.error("Library not initialized");return{}}if(!Janus$3.isWebrtcSupported()){gatewayCallbacks.error("WebRTC not supported by this browser");return{}}Janus$3.log("Library initialized: "+Janus$3.initDone);gatewayCallbacks=gatewayCallbacks||{};gatewayCallbacks.success=typeof gatewayCallbacks.success=="function"?gatewayCallbacks.success:Janus$3.noop;gatewayCallbacks.error=typeof gatewayCallbacks.error=="function"?gatewayCallbacks.error:Janus$3.noop;gatewayCallbacks.destroyed=typeof gatewayCallbacks.destroyed=="function"?gatewayCallbacks.destroyed:Janus$3.noop;if(gatewayCallbacks.server===null||gatewayCallbacks.server===undefined){gatewayCallbacks.error("Invalid server url");return{}}var websockets=false;var ws=null;var wsHandlers={};var wsKeepaliveTimeoutId=null;var servers=null,serversIndex=0;var server=gatewayCallbacks.server;if(Janus$3.isArray(server)){Janus$3.log("Multiple servers provided ("+server.length+"), will use the first that works");server=null;servers=gatewayCallbacks.server;Janus$3.debug(servers)}else{if(server.indexOf("ws")===0){websockets=true;Janus$3.log("Using WebSockets to contact Janus: "+server)}else{websockets=false;Janus$3.log("Using REST API to contact Janus: "+server)}}var iceServers=gatewayCallbacks.iceServers;if(iceServers===undefined||iceServers===null)iceServers=[{urls:"stun:stun.l.google.com:19302"}];var iceTransportPolicy=gatewayCallbacks.iceTransportPolicy;var bundlePolicy=gatewayCallbacks.bundlePolicy;var ipv6Support=gatewayCallbacks.ipv6;if(ipv6Support===undefined||ipv6Support===null)ipv6Support=false;var withCredentials=false;if(gatewayCallbacks.withCredentials!==undefined&&gatewayCallbacks.withCredentials!==null)withCredentials=gatewayCallbacks.withCredentials===true;var maxev=10;if(gatewayCallbacks.max_poll_events!==undefined&&gatewayCallbacks.max_poll_events!==null)maxev=gatewayCallbacks.max_poll_events;if(maxev<1)maxev=1;var token=null;if(gatewayCallbacks.token!==undefined&&gatewayCallbacks.token!==null)token=gatewayCallbacks.token;var apisecret=null;if(gatewayCallbacks.apisecret!==undefined&&gatewayCallbacks.apisecret!==null)apisecret=gatewayCallbacks.apisecret;this.destroyOnUnload=true;if(gatewayCallbacks.destroyOnUnload!==undefined&&gatewayCallbacks.destroyOnUnload!==null)this.destroyOnUnload=gatewayCallbacks.destroyOnUnload===true;var keepAlivePeriod=25e3;if(gatewayCallbacks.keepAlivePeriod!==undefined&&gatewayCallbacks.keepAlivePeriod!==null)keepAlivePeriod=gatewayCallbacks.keepAlivePeriod;if(isNaN(keepAlivePeriod))keepAlivePeriod=25e3;var longPollTimeout=6e4;if(gatewayCallbacks.longPollTimeout!==undefined&&gatewayCallbacks.longPollTimeout!==null)longPollTimeout=gatewayCallbacks.longPollTimeout;if(isNaN(longPollTimeout))longPollTimeout=6e4;function getMaxBitrates(simulcastMaxBitrates){var maxBitrates={high:9e5,medium:3e5,low:1e5};if(simulcastMaxBitrates!==undefined&&simulcastMaxBitrates!==null){if(simulcastMaxBitrates.high)maxBitrates.high=simulcastMaxBitrates.high;if(simulcastMaxBitrates.medium)maxBitrates.medium=simulcastMaxBitrates.medium;if(simulcastMaxBitrates.low)maxBitrates.low=simulcastMaxBitrates.low}return maxBitrates}var connected=false;var sessionId=null;var pluginHandles={};var that=this;var retries=0;var transactions={};createSession(gatewayCallbacks);this.getServer=function(){return server};this.isConnected=function(){return connected};this.reconnect=function(callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$3.noop;callbacks["reconnect"]=true;createSession(callbacks)};this.getSessionId=function(){return sessionId};this.destroy=function(callbacks){destroySession(callbacks)};this.attach=function(callbacks){createHandle(callbacks)};function eventHandler(){if(sessionId==null)return;Janus$3.debug("Long poll...");if(!connected){Janus$3.warn("Is the server down? (connected=false)");return}var longpoll=server+"/"+sessionId+"?rid="+(new Date).getTime();if(maxev!==undefined&&maxev!==null)longpoll=longpoll+"&maxev="+maxev;if(token!==null&&token!==undefined)longpoll=longpoll+"&token="+encodeURIComponent(token);if(apisecret!==null&&apisecret!==undefined)longpoll=longpoll+"&apisecret="+encodeURIComponent(apisecret);Janus$3.httpAPICall(longpoll,{verb:"GET",withCredentials:withCredentials,success:handleEvent,timeout:longPollTimeout,error:function error(textStatus,errorThrown){Janus$3.error(textStatus+":",errorThrown);retries++;if(retries>3){connected=false;gatewayCallbacks.error("Lost connection to the server (is it down?)");return}eventHandler()}})}function handleEvent(json,skipTimeout){retries=0;if(!websockets&&sessionId!==undefined&&sessionId!==null&&skipTimeout!==true)eventHandler();if(!websockets&&Janus$3.isArray(json)){for(var i=0;i<json.length;i++){handleEvent(json[i],true)}return}if(json["rtcgw"]==="keepalive"){Janus$3.vdebug("Got a keepalive on session "+sessionId);return}else if(json["rtcgw"]==="ack"){Janus$3.debug("Got an ack on session "+sessionId);Janus$3.debug(json);var transaction=json["transaction"];if(transaction!==null&&transaction!==undefined){var reportSuccess=transactions[transaction];if(reportSuccess!==null&&reportSuccess!==undefined){reportSuccess(json)}delete transactions[transaction]}return}else if(json["rtcgw"]==="success"){Janus$3.debug("Got a success on session "+sessionId);Janus$3.debug(json);var transaction=json["transaction"];if(transaction!==null&&transaction!==undefined){var reportSuccess=transactions[transaction];if(reportSuccess!==null&&reportSuccess!==undefined){reportSuccess(json)}delete transactions[transaction]}return}else if(json["rtcgw"]==="trickle"){var sender=json["sender"];if(sender===undefined||sender===null){Janus$3.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$3.debug("This handle is not attached to this session");return}var candidate=json["candidate"];Janus$3.debug("Got a trickled candidate on session "+sessionId);Janus$3.debug(candidate);var config=pluginHandle.webrtcStuff;if(config.pc&&config.remoteSdp){Janus$3.debug("Adding remote candidate:",candidate);if(!candidate||candidate.completed===true){config.pc.addIceCandidate(Janus$3.endOfCandidates)}else{config.pc.addIceCandidate(candidate)}}else{Janus$3.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate");if(!config.candidates)config.candidates=[];config.candidates.push(candidate);Janus$3.debug(config.candidates)}}else if(json["rtcgw"]==="webrtcup"){Janus$3.debug("Got a webrtcup event on session "+sessionId);Janus$3.debug(json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$3.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$3.debug("This handle is not attached to this session");return}pluginHandle.webrtcState(true);return}else if(json["rtcgw"]==="hangup"){Janus$3.debug("Got a hangup event on session "+sessionId);Janus$3.debug(json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$3.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$3.debug("This handle is not attached to this session");return}pluginHandle.webrtcState(false,json["reason"]);pluginHandle.hangup()}else if(json["rtcgw"]==="detached"){Janus$3.debug("Got a detached event on session "+sessionId);Janus$3.debug(json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$3.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){return}pluginHandle.detached=true;pluginHandle.ondetached();pluginHandle.detach()}else if(json["rtcgw"]==="media"){Janus$3.debug("Got a media event on session "+sessionId);Janus$3.debug(json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$3.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$3.debug("This handle is not attached to this session");return}pluginHandle.mediaState(json["type"],json["receiving"])}else if(json["rtcgw"]==="slowlink"){Janus$3.debug("Got a slowlink event on session "+sessionId);Janus$3.debug(json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$3.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$3.debug("This handle is not attached to this session");return}pluginHandle.slowLink(json["uplink"],json["lost"])}else if(json["rtcgw"]==="error"){Janus$3.error("Ooops: "+json["error"].code+" "+json["error"].reason);Janus$3.debug(json);var transaction=json["transaction"];if(transaction!==null&&transaction!==undefined){var reportSuccess=transactions[transaction];if(reportSuccess!==null&&reportSuccess!==undefined){reportSuccess(json)}delete transactions[transaction]}return}else if(json["rtcgw"]==="event"){Janus$3.debug("Got a plugin event on session "+sessionId);Janus$3.debug(json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$3.warn("Missing sender...");return}var plugindata=json["plugindata"];if(plugindata===undefined||plugindata===null){Janus$3.warn("Missing plugindata...");return}Janus$3.debug("  -- Event is coming from "+sender+" ("+plugindata["plugin"]+")");var data=plugindata["data"];Janus$3.debug(data);var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$3.warn("This handle is not attached to this session");return}var jsep=json["jsep"];if(jsep!==undefined&&jsep!==null){Janus$3.debug("Handling SDP as well...");Janus$3.debug(jsep)}var callback=pluginHandle.onmessage;if(callback!==null&&callback!==undefined){Janus$3.debug("Notifying application...");callback(data,jsep)}else{Janus$3.debug("No provided notification callback")}}else if(json["rtcgw"]==="timeout"){Janus$3.error("Timeout on session "+sessionId);Janus$3.debug(json);if(websockets){ws.close(3504,"Gateway timeout")}return}else{Janus$3.warn("Unknown message/event  '"+json["rtcgw"]+"' on session "+sessionId);Janus$3.debug(json)}}function keepAlive(){if(server===null||!websockets||!connected)return;wsKeepaliveTimeoutId=setTimeout(keepAlive,keepAlivePeriod);var request={rtcgw:"keepalive",session_id:sessionId,transaction:Janus$3.randomString(12)};if(token!==null&&token!==undefined)request["token"]=token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;ws.send(JSON.stringify(request))}function createSession(callbacks){var transaction=Janus$3.randomString(12);var request={rtcgw:"create",transaction:transaction,token:window.EZUIKit.opt.stream,device:window.EZUIKit.opt.deviceSerial,channel:window.EZUIKit.opt.channelNo};if(callbacks["reconnect"]){connected=false;request["rtcgw"]="claim";request["session_id"]=sessionId;if(ws){ws.onopen=null;ws.onerror=null;ws.onclose=null;if(wsKeepaliveTimeoutId){clearTimeout(wsKeepaliveTimeoutId);wsKeepaliveTimeoutId=null}}}if(token!==null&&token!==undefined)request["token"]=token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;if(server===null&&Janus$3.isArray(servers)){server=servers[serversIndex];if(server.indexOf("ws")===0){websockets=true;Janus$3.log("Server #"+(serversIndex+1)+": trying WebSockets to contact Janus ("+server+")")}else{websockets=false;Janus$3.log("Server #"+(serversIndex+1)+": trying REST API to contact Janus ("+server+")")}}if(websockets){ws=Janus$3.newWebSocket(server,"rtcgw-protocol");wsHandlers={error:function error(){Janus$3.error("Error connecting to the Janus WebSockets server... "+server);if(Janus$3.isArray(servers)&&!callbacks["reconnect"]){serversIndex++;if(serversIndex==servers.length){callbacks.error("Error connecting to any of the provided Janus servers: Is the server down?");return}server=null;setTimeout(function(){createSession(callbacks)},200);return}callbacks.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function open(){transactions[transaction]=function(json){Janus$3.debug(json);if(json["rtcgw"]!=="success"){Janus$3.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error(json["error"].reason);return}wsKeepaliveTimeoutId=setTimeout(keepAlive,keepAlivePeriod);connected=true;sessionId=json["session_id"]?json["session_id"]:json.data["id"];if(callbacks["reconnect"]){Janus$3.log("Claimed session: "+sessionId)}else{Janus$3.log("Created session: "+sessionId)}Janus$3.sessions[sessionId]=that;callbacks.success()};ws.send(JSON.stringify(request))},message:function message(event){handleEvent(JSON.parse(event.data))},close:function close(){if(server===null||!connected){return}connected=false;gatewayCallbacks.error("Lost connection to the server (is it down?)")}};for(var eventName in wsHandlers){ws.addEventListener(eventName,wsHandlers[eventName])}return}Janus$3.httpAPICall(server,{verb:"POST",withCredentials:withCredentials,body:request,success:function success(json){Janus$3.debug(json);if(json["rtcgw"]!=="success"){Janus$3.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error(json["error"].reason);return}connected=true;sessionId=json["session_id"]?json["session_id"]:json.data["id"];if(callbacks["reconnect"]){Janus$3.log("Claimed session: "+sessionId)}else{Janus$3.log("Created session: "+sessionId)}Janus$3.sessions[sessionId]=that;eventHandler();callbacks.success()},error:function error(textStatus,errorThrown){Janus$3.error(textStatus+":",errorThrown);if(Janus$3.isArray(servers)&&!callbacks["reconnect"]){serversIndex++;if(serversIndex==servers.length){callbacks.error("Error connecting to any of the provided Janus servers: Is the server down?");return}server=null;setTimeout(function(){createSession(callbacks)},200);return}if(errorThrown==="")callbacks.error(textStatus+": Is the server down?");else callbacks.error(textStatus+": "+errorThrown)}})}function destroySession(callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;var asyncRequest=true;if(callbacks.asyncRequest!==undefined&&callbacks.asyncRequest!==null)asyncRequest=callbacks.asyncRequest===true;var notifyDestroyed=true;if(callbacks.notifyDestroyed!==undefined&&callbacks.notifyDestroyed!==null)notifyDestroyed=callbacks.notifyDestroyed===true;var cleanupHandles=false;if(callbacks.cleanupHandles!==undefined&&callbacks.cleanupHandles!==null)cleanupHandles=callbacks.cleanupHandles===true;Janus$3.log("Destroying session "+sessionId+" (async="+asyncRequest+")");if(!connected){Janus$3.warn("Is the server down? (connected=false)");callbacks.success();return}if(sessionId===undefined||sessionId===null){Janus$3.warn("No session to destroy");callbacks.success();if(notifyDestroyed)gatewayCallbacks.destroyed();return}if(cleanupHandles){for(var handleId in pluginHandles)destroyHandle(handleId,{noRequest:true})}var request={rtcgw:"destroy",transaction:Janus$3.randomString(12)};if(token!==null&&token!==undefined)request["token"]=token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;if(websockets){request["session_id"]=sessionId;var unbindWebSocket=function unbindWebSocket(){for(var eventName in wsHandlers){ws.removeEventListener(eventName,wsHandlers[eventName])}ws.removeEventListener("message",onUnbindMessage);ws.removeEventListener("error",onUnbindError);if(wsKeepaliveTimeoutId){clearTimeout(wsKeepaliveTimeoutId)}ws.close()};var onUnbindMessage=function onUnbindMessage(event){var data=JSON.parse(event.data);if(data.session_id==request.session_id&&data.transaction==request.transaction){unbindWebSocket();callbacks.success();if(notifyDestroyed)gatewayCallbacks.destroyed()}};var onUnbindError=function onUnbindError(event){unbindWebSocket();callbacks.error("Failed to destroy the server: Is the server down?");if(notifyDestroyed)gatewayCallbacks.destroyed()};ws.addEventListener("message",onUnbindMessage);ws.addEventListener("error",onUnbindError);ws.send(JSON.stringify(request));return}Janus$3.httpAPICall(server+"/"+sessionId,{verb:"POST",async:asyncRequest,withCredentials:withCredentials,body:request,success:function success(json){Janus$3.log("Destroyed session:");Janus$3.debug(json);sessionId=null;connected=false;if(json["rtcgw"]!=="success"){Janus$3.error("Ooops: "+json["error"].code+" "+json["error"].reason)}callbacks.success();if(notifyDestroyed)gatewayCallbacks.destroyed()},error:function error(textStatus,errorThrown){Janus$3.error(textStatus+":",errorThrown);sessionId=null;connected=false;callbacks.success();if(notifyDestroyed)gatewayCallbacks.destroyed()}})}function createHandle(callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$3.noop;callbacks.consentDialog=typeof callbacks.consentDialog=="function"?callbacks.consentDialog:Janus$3.noop;callbacks.iceState=typeof callbacks.iceState=="function"?callbacks.iceState:Janus$3.noop;callbacks.mediaState=typeof callbacks.mediaState=="function"?callbacks.mediaState:Janus$3.noop;callbacks.webrtcState=typeof callbacks.webrtcState=="function"?callbacks.webrtcState:Janus$3.noop;callbacks.slowLink=typeof callbacks.slowLink=="function"?callbacks.slowLink:Janus$3.noop;callbacks.onmessage=typeof callbacks.onmessage=="function"?callbacks.onmessage:Janus$3.noop;callbacks.onlocalstream=typeof callbacks.onlocalstream=="function"?callbacks.onlocalstream:Janus$3.noop;callbacks.onremotestream=typeof callbacks.onremotestream=="function"?callbacks.onremotestream:Janus$3.noop;callbacks.ondata=typeof callbacks.ondata=="function"?callbacks.ondata:Janus$3.noop;callbacks.ondataopen=typeof callbacks.ondataopen=="function"?callbacks.ondataopen:Janus$3.noop;callbacks.oncleanup=typeof callbacks.oncleanup=="function"?callbacks.oncleanup:Janus$3.noop;callbacks.ondetached=typeof callbacks.ondetached=="function"?callbacks.ondetached:Janus$3.noop;if(!connected){Janus$3.warn("Is the server down? (connected=false)");callbacks.error("Is the server down? (connected=false)");return}var plugin=callbacks.plugin;if(plugin===undefined||plugin===null){Janus$3.error("Invalid plugin");callbacks.error("Invalid plugin");return}var opaqueId=callbacks.opaqueId;var handleToken=callbacks.token?callbacks.token:token;var transaction=Janus$3.randomString(12);var request={rtcgw:"attach",plugin:plugin,opaque_id:opaqueId,transaction:transaction};if(handleToken!==null&&handleToken!==undefined)request["token"]=handleToken;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;if(websockets){transactions[transaction]=function(json){Janus$3.debug(json);if(json["rtcgw"]!=="success"){Janus$3.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error("Ooops: "+json["error"].code+" "+json["error"].reason);return}var handleId=json.data["id"];Janus$3.log("Created handle: "+handleId);var pluginHandle={session:that,plugin:plugin,id:handleId,token:handleToken,detached:false,webrtcStuff:{started:false,myStream:null,streamExternal:false,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:true,iceDone:false,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function getId(){return handleId},getPlugin:function getPlugin(){return plugin},getVolume:function getVolume(){return _getVolume(handleId,true)},getRemoteVolume:function getRemoteVolume(){return _getVolume(handleId,true)},getLocalVolume:function getLocalVolume(){return _getVolume(handleId,false)},isAudioMuted:function isAudioMuted(){return isMuted(handleId,false)},muteAudio:function muteAudio(){return mute(handleId,false,true)},unmuteAudio:function unmuteAudio(){return mute(handleId,false,false)},isVideoMuted:function isVideoMuted(){return isMuted(handleId,true)},muteVideo:function muteVideo(){return mute(handleId,true,true)},unmuteVideo:function unmuteVideo(){return mute(handleId,true,false)},getBitrate:function getBitrate(){return _getBitrate(handleId)},send:function send(callbacks){sendMessage(handleId,callbacks)},data:function data(callbacks){sendData(handleId,callbacks)},dtmf:function dtmf(callbacks){sendDtmf(handleId,callbacks)},consentDialog:callbacks.consentDialog,iceState:callbacks.iceState,mediaState:callbacks.mediaState,webrtcState:callbacks.webrtcState,slowLink:callbacks.slowLink,onmessage:callbacks.onmessage,createOffer:function createOffer(callbacks){prepareWebrtc(handleId,true,callbacks)},createAnswer:function createAnswer(callbacks){prepareWebrtc(handleId,false,callbacks)},handleRemoteJsep:function handleRemoteJsep(callbacks){prepareWebrtcPeer(handleId,callbacks)},onlocalstream:callbacks.onlocalstream,onremotestream:callbacks.onremotestream,ondata:callbacks.ondata,ondataopen:callbacks.ondataopen,oncleanup:callbacks.oncleanup,ondetached:callbacks.ondetached,hangup:function hangup(sendRequest){cleanupWebrtc(handleId,sendRequest===true)},detach:function detach(callbacks){destroyHandle(handleId,callbacks)}};pluginHandles[handleId]=pluginHandle;callbacks.success(pluginHandle)};request["session_id"]=sessionId;ws.send(JSON.stringify(request));return}Janus$3.httpAPICall(server+"/"+sessionId,{verb:"POST",withCredentials:withCredentials,body:request,success:function success(json){Janus$3.debug(json);if(json["rtcgw"]!=="success"){Janus$3.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error("Ooops: "+json["error"].code+" "+json["error"].reason);return}var handleId=json.data["id"];Janus$3.log("Created handle: "+handleId);var pluginHandle={session:that,plugin:plugin,id:handleId,token:handleToken,detached:false,webrtcStuff:{started:false,myStream:null,streamExternal:false,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:true,iceDone:false,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function getId(){return handleId},getPlugin:function getPlugin(){return plugin},getVolume:function getVolume(){return _getVolume(handleId,true)},getRemoteVolume:function getRemoteVolume(){return _getVolume(handleId,true)},getLocalVolume:function getLocalVolume(){return _getVolume(handleId,false)},isAudioMuted:function isAudioMuted(){return isMuted(handleId,false)},muteAudio:function muteAudio(){return mute(handleId,false,true)},unmuteAudio:function unmuteAudio(){return mute(handleId,false,false)},isVideoMuted:function isVideoMuted(){return isMuted(handleId,true)},muteVideo:function muteVideo(){return mute(handleId,true,true)},unmuteVideo:function unmuteVideo(){return mute(handleId,true,false)},getBitrate:function getBitrate(){return _getBitrate(handleId)},send:function send(callbacks){sendMessage(handleId,callbacks)},data:function data(callbacks){sendData(handleId,callbacks)},dtmf:function dtmf(callbacks){sendDtmf(handleId,callbacks)},consentDialog:callbacks.consentDialog,iceState:callbacks.iceState,mediaState:callbacks.mediaState,webrtcState:callbacks.webrtcState,slowLink:callbacks.slowLink,onmessage:callbacks.onmessage,createOffer:function createOffer(callbacks){prepareWebrtc(handleId,true,callbacks)},createAnswer:function createAnswer(callbacks){prepareWebrtc(handleId,false,callbacks)},handleRemoteJsep:function handleRemoteJsep(callbacks){prepareWebrtcPeer(handleId,callbacks)},onlocalstream:callbacks.onlocalstream,onremotestream:callbacks.onremotestream,ondata:callbacks.ondata,ondataopen:callbacks.ondataopen,oncleanup:callbacks.oncleanup,ondetached:callbacks.ondetached,hangup:function hangup(sendRequest){cleanupWebrtc(handleId,sendRequest===true)},detach:function detach(callbacks){destroyHandle(handleId,callbacks)}};pluginHandles[handleId]=pluginHandle;callbacks.success(pluginHandle)},error:function error(textStatus,errorThrown){Janus$3.error(textStatus+":",errorThrown)}})}function sendMessage(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$3.noop;if(!connected){Janus$3.warn("Is the server down? (connected=false)");callbacks.error("Is the server down? (connected=false)");return}var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");callbacks.error("Invalid handle");return}var message=callbacks.message;var jsep=callbacks.jsep;var transaction=Janus$3.randomString(12);var request={rtcgw:"message",body:message,transaction:transaction};if(pluginHandle.token!==null&&pluginHandle.token!==undefined)request["token"]=pluginHandle.token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;if(jsep!==null&&jsep!==undefined)request.jsep=jsep;Janus$3.debug("Sending message to plugin (handle="+handleId+"):");Janus$3.debug(request);if(websockets){request["session_id"]=sessionId;request["handle_id"]=handleId;transactions[transaction]=function(json){Janus$3.debug("Message sent!");Janus$3.debug(json);if(json["rtcgw"]==="success"){var plugindata=json["plugindata"];if(plugindata===undefined||plugindata===null){Janus$3.warn("Request succeeded, but missing plugindata...");callbacks.success();return}Janus$3.log("Synchronous transaction successful ("+plugindata["plugin"]+")");var data=plugindata["data"];Janus$3.debug(data);callbacks.success(data);return}else if(json["rtcgw"]!=="ack"){if(json["error"]!==undefined&&json["error"]!==null){Janus$3.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error(json["error"].code+" "+json["error"].reason)}else{Janus$3.error("Unknown error");callbacks.error("Unknown error")}return}callbacks.success()};ws.send(JSON.stringify(request));return}Janus$3.httpAPICall(server+"/"+sessionId+"/"+handleId,{verb:"POST",withCredentials:withCredentials,body:request,success:function success(json){Janus$3.debug("Message sent!");Janus$3.debug(json);if(json["rtcgw"]==="success"){var plugindata=json["plugindata"];if(plugindata===undefined||plugindata===null){Janus$3.warn("Request succeeded, but missing plugindata...");callbacks.success();return}Janus$3.log("Synchronous transaction successful ("+plugindata["plugin"]+")");var data=plugindata["data"];Janus$3.debug(data);callbacks.success(data);return}else if(json["rtcgw"]!=="ack"){if(json["error"]!==undefined&&json["error"]!==null){Janus$3.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error(json["error"].code+" "+json["error"].reason)}else{Janus$3.error("Unknown error");callbacks.error("Unknown error")}return}callbacks.success()},error:function error(textStatus,errorThrown){Janus$3.error(textStatus+":",errorThrown);callbacks.error(textStatus+": "+errorThrown)}})}function sendTrickleCandidate(handleId,candidate){if(!connected){Janus$3.warn("Is the server down? (connected=false)");return}var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");return}var request={rtcgw:"trickle",candidate:candidate,transaction:Janus$3.randomString(12)};if(pluginHandle.token!==null&&pluginHandle.token!==undefined)request["token"]=pluginHandle.token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;Janus$3.vdebug("Sending trickle candidate (handle="+handleId+"):");Janus$3.vdebug(request);if(websockets){request["session_id"]=sessionId;request["handle_id"]=handleId;ws.send(JSON.stringify(request));return}Janus$3.httpAPICall(server+"/"+sessionId+"/"+handleId,{verb:"POST",withCredentials:withCredentials,body:request,success:function success(json){Janus$3.vdebug("Candidate sent!");Janus$3.vdebug(json);if(json["rtcgw"]!=="ack"){Janus$3.error("Ooops: "+json["error"].code+" "+json["error"].reason);return}},error:function error(textStatus,errorThrown){Janus$3.error(textStatus+":",errorThrown)}})}function createDataChannel(handleId,dclabel,incoming,pendingText){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");return}var config=pluginHandle.webrtcStuff;var onDataChannelMessage=function onDataChannelMessage(event){Janus$3.log("Received message on data channel:",event);var label=event.target.label;pluginHandle.ondata(event.data,label)};var onDataChannelStateChange=function onDataChannelStateChange(event){Janus$3.log("Received state change on data channel:",event);var label=event.target.label;var dcState=config.dataChannel[label]?config.dataChannel[label].readyState:"null";Janus$3.log("State change on <"+label+"> data channel: "+dcState);if(dcState==="open"){if(config.dataChannel[label].pending&&config.dataChannel[label].pending.length>0){Janus$3.log("Sending pending messages on <"+label+">:",config.dataChannel[label].pending.length);for(var i in config.dataChannel[label].pending){var text=config.dataChannel[label].pending[i];Janus$3.log("Sending string on data channel <"+label+">: "+text);config.dataChannel[label].send(text)}config.dataChannel[label].pending=[]}pluginHandle.ondataopen(label)}};var onDataChannelError=function onDataChannelError(error){Janus$3.error("Got error on data channel:",error)};if(!incoming){config.dataChannel[dclabel]=config.pc.createDataChannel(dclabel,{ordered:false})}else{config.dataChannel[dclabel]=incoming}config.dataChannel[dclabel].onmessage=onDataChannelMessage;config.dataChannel[dclabel].onopen=onDataChannelStateChange;config.dataChannel[dclabel].onclose=onDataChannelStateChange;config.dataChannel[dclabel].onerror=onDataChannelError;config.dataChannel[dclabel].pending=[];if(pendingText)config.dataChannel[dclabel].pending.push(pendingText)}function sendData(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$3.noop;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;var text=callbacks.text;if(text===null||text===undefined){Janus$3.warn("Invalid text");callbacks.error("Invalid text");return}var label=callbacks.label?callbacks.label:Janus$3.dataChanDefaultLabel;if(!config.dataChannel[label]){createDataChannel(handleId,label,false,text);callbacks.success();return}if(config.dataChannel[label].readyState!=="open"){config.dataChannel[label].pending.push(text);callbacks.success();return}Janus$3.log("Sending string on data channel <"+label+">: "+text);config.dataChannel[label].send(text);callbacks.success()}function sendDtmf(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$3.noop;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;if(config.dtmfSender===null||config.dtmfSender===undefined){if(config.pc!==undefined&&config.pc!==null){var senders=config.pc.getSenders();var audioSender=senders.find(function(sender){return sender.track&&sender.track.kind==="audio"});if(!audioSender){Janus$3.warn("Invalid DTMF configuration (no audio track)");callbacks.error("Invalid DTMF configuration (no audio track)");return}config.dtmfSender=audioSender.dtmf;if(config.dtmfSender){Janus$3.log("Created DTMF Sender");config.dtmfSender.ontonechange=function(tone){Janus$3.debug("Sent DTMF tone: "+tone.tone)}}}if(config.dtmfSender===null||config.dtmfSender===undefined){Janus$3.warn("Invalid DTMF configuration");callbacks.error("Invalid DTMF configuration");return}}var dtmf=callbacks.dtmf;if(dtmf===null||dtmf===undefined){Janus$3.warn("Invalid DTMF parameters");callbacks.error("Invalid DTMF parameters");return}var tones=dtmf.tones;if(tones===null||tones===undefined){Janus$3.warn("Invalid DTMF string");callbacks.error("Invalid DTMF string");return}var duration=dtmf.duration;if(duration===null||duration===undefined)duration=500;var gap=dtmf.gap;if(gap===null||gap===undefined)gap=50;Janus$3.debug("Sending DTMF string "+tones+" (duration "+duration+"ms, gap "+gap+"ms)");config.dtmfSender.insertDTMF(tones,duration,gap);callbacks.success()}function destroyHandle(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$3.noop;var asyncRequest=true;if(callbacks.asyncRequest!==undefined&&callbacks.asyncRequest!==null)asyncRequest=callbacks.asyncRequest===true;var noRequest=true;if(callbacks.noRequest!==undefined&&callbacks.noRequest!==null)noRequest=callbacks.noRequest===true;Janus$3.log("Destroying handle "+handleId+" (async="+asyncRequest+")");cleanupWebrtc(handleId);var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.detached){delete pluginHandles[handleId];callbacks.success();return}if(noRequest){delete pluginHandles[handleId];callbacks.success();return}if(!connected){Janus$3.warn("Is the server down? (connected=false)");callbacks.error("Is the server down? (connected=false)");return}var request={rtcgw:"detach",transaction:Janus$3.randomString(12)};if(pluginHandle.token!==null&&pluginHandle.token!==undefined)request["token"]=pluginHandle.token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;if(websockets){request["session_id"]=sessionId;request["handle_id"]=handleId;ws.send(JSON.stringify(request));delete pluginHandles[handleId];callbacks.success();return}Janus$3.httpAPICall(server+"/"+sessionId+"/"+handleId,{verb:"POST",async:asyncRequest,withCredentials:withCredentials,body:request,success:function success(json){Janus$3.log("Destroyed handle:");Janus$3.debug(json);if(json["rtcgw"]!=="success"){Janus$3.error("Ooops: "+json["error"].code+" "+json["error"].reason)}delete pluginHandles[handleId];callbacks.success()},error:function error(textStatus,errorThrown){Janus$3.error(textStatus+":",errorThrown);delete pluginHandles[handleId];callbacks.success()}})}function streamsDone(handleId,jsep,media,callbacks,stream){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;Janus$3.debug("streamsDone:",stream);if(stream){Janus$3.debug("  -- Audio tracks:",stream.getAudioTracks());Janus$3.debug("  -- Video tracks:",stream.getVideoTracks())}var addTracks=false;if(!config.myStream||!media.update||config.streamExternal){config.myStream=stream;addTracks=true}else{if((!media.update&&isAudioSendEnabled(media)||media.update&&(media.addAudio||media.replaceAudio))&&stream.getAudioTracks()&&stream.getAudioTracks().length){config.myStream.addTrack(stream.getAudioTracks()[0]);if(Janus$3.unifiedPlan){Janus$3.log((media.replaceAudio?"Replacing":"Adding")+" audio track:",stream.getAudioTracks()[0]);var audioTransceiver=null;var transceivers=config.pc.getTransceivers();if(transceivers&&transceivers.length>0){for(var i in transceivers){var t=transceivers[i];if(t.sender&&t.sender.track&&t.sender.track.kind==="audio"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="audio"){audioTransceiver=t;break}}}if(audioTransceiver&&audioTransceiver.sender){audioTransceiver.sender.replaceTrack(stream.getAudioTracks()[0])}else{config.pc.addTrack(stream.getAudioTracks()[0],stream)}}else{Janus$3.log((media.replaceAudio?"Replacing":"Adding")+" audio track:",stream.getAudioTracks()[0]);config.pc.addTrack(stream.getAudioTracks()[0],stream)}}if((!media.update&&isVideoSendEnabled(media)||media.update&&(media.addVideo||media.replaceVideo))&&stream.getVideoTracks()&&stream.getVideoTracks().length){config.myStream.addTrack(stream.getVideoTracks()[0]);if(Janus$3.unifiedPlan){Janus$3.log((media.replaceVideo?"Replacing":"Adding")+" video track:",stream.getVideoTracks()[0]);var videoTransceiver=null;var transceivers=config.pc.getTransceivers();if(transceivers&&transceivers.length>0){for(var i in transceivers){var t=transceivers[i];if(t.sender&&t.sender.track&&t.sender.track.kind==="video"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="video"){videoTransceiver=t;break}}}if(videoTransceiver&&videoTransceiver.sender){videoTransceiver.sender.replaceTrack(stream.getVideoTracks()[0])}else{config.pc.addTrack(stream.getVideoTracks()[0],stream)}}else{Janus$3.log((media.replaceVideo?"Replacing":"Adding")+" video track:",stream.getVideoTracks()[0]);config.pc.addTrack(stream.getVideoTracks()[0],stream)}}}if(!config.pc){var pc_config={iceServers:iceServers,iceTransportPolicy:iceTransportPolicy,bundlePolicy:bundlePolicy};if(Janus$3.webRTCAdapter.browserDetails.browser==="chrome"){pc_config["sdpSemantics"]=Janus$3.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan"}var pc_constraints={optional:[{DtlsSrtpKeyAgreement:true}]};if(ipv6Support===true){pc_constraints.optional.push({googIPv6:true})}if(callbacks.rtcConstraints&&_typeof(callbacks.rtcConstraints)==="object"){Janus$3.debug("Adding custom PeerConnection constraints:",callbacks.rtcConstraints);for(var i in callbacks.rtcConstraints){pc_constraints.optional.push(callbacks.rtcConstraints[i])}}if(Janus$3.webRTCAdapter.browserDetails.browser==="edge"){pc_config.bundlePolicy="max-bundle"}Janus$3.log("Creating PeerConnection");Janus$3.debug(pc_constraints);config.pc=new RTCPeerConnection(pc_config,pc_constraints);Janus$3.debug(config.pc);if(config.pc.getStats){config.volume={};config.bitrate.value="0 kbits/sec"}Janus$3.log("Preparing local SDP and gathering candidates (trickle="+config.trickle+")");config.pc.oniceconnectionstatechange=function(e){if(config.pc)pluginHandle.iceState(config.pc.iceConnectionState)};config.pc.onicecandidate=function(event){if(event.candidate==null||Janus$3.webRTCAdapter.browserDetails.browser==="edge"&&event.candidate.candidate.indexOf("endOfCandidates")>0){Janus$3.log("End of candidates.");config.iceDone=true;if(config.trickle===true){sendTrickleCandidate(handleId,{completed:true})}else{sendSDP(handleId,callbacks)}}else{var candidate={candidate:event.candidate.candidate,sdpMid:event.candidate.sdpMid,sdpMLineIndex:event.candidate.sdpMLineIndex};if(config.trickle===true){sendTrickleCandidate(handleId,candidate)}}};config.pc.ontrack=function(event){Janus$3.log("Handling Remote Track");Janus$3.debug(event);if(!event.streams)return;config.remoteStream=event.streams[0];pluginHandle.onremotestream(config.remoteStream);if(event.track.onended)return;Janus$3.log("Adding onended callback to track:",event.track);event.track.onended=function(ev){Janus$3.log("Remote track muted/removed:",ev);if(config.remoteStream){config.remoteStream.removeTrack(ev.target);pluginHandle.onremotestream(config.remoteStream)}};event.track.onmute=event.track.onended;event.track.onunmute=function(ev){Janus$3.log("Remote track flowing again:",ev);try{config.remoteStream.addTrack(ev.target);pluginHandle.onremotestream(config.remoteStream)}catch(e){Janus$3.error(e)}}}}if(addTracks&&stream!==null&&stream!==undefined){Janus$3.log("Adding local stream");var simulcast2=callbacks.simulcast2===true?true:false;stream.getTracks().forEach(function(track){Janus$3.log("Adding local track:",track);if(!simulcast2){config.pc.addTrack(track,stream)}else{if(track.kind==="audio"){config.pc.addTrack(track,stream)}else{Janus$3.log("Enabling rid-based simulcasting:",track);var maxBitrates=getMaxBitrates(callbacks.simulcastMaxBitrates);config.pc.addTransceiver(track,{direction:"sendrecv",streams:[stream],sendEncodings:[{rid:"h",active:true,maxBitrate:maxBitrates.high},{rid:"m",active:true,maxBitrate:maxBitrates.medium,scaleResolutionDownBy:2},{rid:"l",active:true,maxBitrate:maxBitrates.low,scaleResolutionDownBy:4}]})}}})}if(isDataEnabled(media)&&!config.dataChannel[Janus$3.dataChanDefaultLabel]){Janus$3.log("Creating data channel");createDataChannel(handleId,Janus$3.dataChanDefaultLabel,false);config.pc.ondatachannel=function(event){Janus$3.log("Data channel created by Janus:",event);createDataChannel(handleId,event.channel.label,event.channel)}}if(config.myStream)pluginHandle.onlocalstream(config.myStream);if(jsep===null||jsep===undefined){createOffer(handleId,media,callbacks)}else{config.pc.setRemoteDescription(jsep).then(function(){Janus$3.log("Remote description accepted!");config.remoteSdp=jsep.sdp;if(config.candidates&&config.candidates.length>0){for(var i=0;i<config.candidates.length;i++){var candidate=config.candidates[i];Janus$3.debug("Adding remote candidate:",candidate);if(!candidate||candidate.completed===true){config.pc.addIceCandidate(Janus$3.endOfCandidates)}else{config.pc.addIceCandidate(candidate)}}config.candidates=[]}createAnswer(handleId,media,callbacks)},callbacks.error)}}function prepareWebrtc(handleId,offer,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:webrtcError;var jsep=callbacks.jsep;if(offer&&jsep){Janus$3.error("Provided a JSEP to a createOffer");callbacks.error("Provided a JSEP to a createOffer");return}else if(!offer&&(!jsep||!jsep.type||!jsep.sdp)){Janus$3.error("A valid JSEP is required for createAnswer");callbacks.error("A valid JSEP is required for createAnswer");return}callbacks.media=callbacks.media||{audio:true,video:true};var media=callbacks.media;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;config.trickle=isTrickleEnabled(callbacks.trickle);if(config.pc===undefined||config.pc===null){media.update=false;media.keepAudio=false;media.keepVideo=false}else if(config.pc!==undefined&&config.pc!==null){Janus$3.log("Updating existing media session");media.update=true;if(callbacks.stream!==null&&callbacks.stream!==undefined){if(callbacks.stream!==config.myStream){Janus$3.log("Renegotiation involves a new external stream")}}else{if(media.addAudio){media.keepAudio=false;media.replaceAudio=false;media.removeAudio=false;media.audioSend=true;if(config.myStream&&config.myStream.getAudioTracks()&&config.myStream.getAudioTracks().length){Janus$3.error("Can't add audio stream, there already is one");callbacks.error("Can't add audio stream, there already is one");return}}else if(media.removeAudio){media.keepAudio=false;media.replaceAudio=false;media.addAudio=false;media.audioSend=false}else if(media.replaceAudio){media.keepAudio=false;media.addAudio=false;media.removeAudio=false;media.audioSend=true}if(config.myStream===null||config.myStream===undefined){if(media.replaceAudio){media.keepAudio=false;media.replaceAudio=false;media.addAudio=true;media.audioSend=true}if(isAudioSendEnabled(media)){media.keepAudio=false;media.addAudio=true}}else{if(config.myStream.getAudioTracks()===null||config.myStream.getAudioTracks()===undefined||config.myStream.getAudioTracks().length===0){if(media.replaceAudio){media.keepAudio=false;media.replaceAudio=false;media.addAudio=true;media.audioSend=true}if(isAudioSendEnabled(media)){media.keepVideo=false;media.addAudio=true}}else{if(isAudioSendEnabled(media)&&!media.removeAudio&&!media.replaceAudio){media.keepAudio=true}}}if(media.addVideo){media.keepVideo=false;media.replaceVideo=false;media.removeVideo=false;media.videoSend=true;if(config.myStream&&config.myStream.getVideoTracks()&&config.myStream.getVideoTracks().length){Janus$3.error("Can't add video stream, there already is one");callbacks.error("Can't add video stream, there already is one");return}}else if(media.removeVideo){media.keepVideo=false;media.replaceVideo=false;media.addVideo=false;media.videoSend=false}else if(media.replaceVideo){media.keepVideo=false;media.addVideo=false;media.removeVideo=false;media.videoSend=true}if(config.myStream===null||config.myStream===undefined){if(media.replaceVideo){media.keepVideo=false;media.replaceVideo=false;media.addVideo=true;media.videoSend=true}if(isVideoSendEnabled(media)){media.keepVideo=false;media.addVideo=true}}else{if(config.myStream.getVideoTracks()===null||config.myStream.getVideoTracks()===undefined||config.myStream.getVideoTracks().length===0){if(media.replaceVideo){media.keepVideo=false;media.replaceVideo=false;media.addVideo=true;media.videoSend=true}if(isVideoSendEnabled(media)){media.keepVideo=false;media.addVideo=true}}else{if(isVideoSendEnabled(media)&&!media.removeVideo&&!media.replaceVideo){media.keepVideo=true}}}if(media.addData)media.data=true}if(isAudioSendEnabled(media)&&media.keepAudio&&isVideoSendEnabled(media)&&media.keepVideo){pluginHandle.consentDialog(false);streamsDone(handleId,jsep,media,callbacks,config.myStream);return}}if(media.update&&!config.streamExternal){if(media.removeAudio||media.replaceAudio){if(config.myStream&&config.myStream.getAudioTracks()&&config.myStream.getAudioTracks().length){var s=config.myStream.getAudioTracks()[0];Janus$3.log("Removing audio track:",s);config.myStream.removeTrack(s);try{s.stop()}catch(e){}}if(config.pc.getSenders()&&config.pc.getSenders().length){var ra=true;if(media.replaceAudio&&Janus$3.unifiedPlan){ra=false}if(ra){for(var index in config.pc.getSenders()){var s=config.pc.getSenders()[index];if(s&&s.track&&s.track.kind==="audio"){Janus$3.log("Removing audio sender:",s);config.pc.removeTrack(s)}}}}}if(media.removeVideo||media.replaceVideo){if(config.myStream&&config.myStream.getVideoTracks()&&config.myStream.getVideoTracks().length){var s=config.myStream.getVideoTracks()[0];Janus$3.log("Removing video track:",s);config.myStream.removeTrack(s);try{s.stop()}catch(e){}}if(config.pc.getSenders()&&config.pc.getSenders().length){var rv=true;if(media.replaceVideo&&Janus$3.unifiedPlan){rv=false}if(rv){for(var index in config.pc.getSenders()){var s=config.pc.getSenders()[index];if(s&&s.track&&s.track.kind==="video"){Janus$3.log("Removing video sender:",s);config.pc.removeTrack(s)}}}}}}if(callbacks.stream!==null&&callbacks.stream!==undefined){var stream=callbacks.stream;Janus$3.log("MediaStream provided by the application");Janus$3.debug(stream);if(media.update){if(config.myStream&&config.myStream!==callbacks.stream&&!config.streamExternal){try{var tracks=config.myStream.getTracks();for(var i in tracks){var mst=tracks[i];Janus$3.log(mst);if(mst!==null&&mst!==undefined)mst.stop()}}catch(e){}config.myStream=null}}config.streamExternal=true;pluginHandle.consentDialog(false);streamsDone(handleId,jsep,media,callbacks,stream);return}if(isAudioSendEnabled(media)||isVideoSendEnabled(media)){if(!Janus$3.isGetUserMediaAvailable()){callbacks.error("getUserMedia not available");return}var constraints={mandatory:{},optional:[]};pluginHandle.consentDialog(true);var audioSupport=isAudioSendEnabled(media);if(audioSupport===true&&media!=undefined&&media!=null){if(_typeof(media.audio)==="object"){audioSupport=media.audio}}var videoSupport=isVideoSendEnabled(media);if(videoSupport===true&&media!=undefined&&media!=null){var simulcast=callbacks.simulcast===true?true:false;var simulcast2=callbacks.simulcast2===true?true:false;if((simulcast||simulcast2)&&!jsep&&(media.video===undefined||media.video===false))media.video="hires";if(media.video&&media.video!="screen"&&media.video!="window"){if(_typeof(media.video)==="object"){videoSupport=media.video}else{var width=0;var height=0;if(media.video==="lowres"){height=240;width=320}else if(media.video==="lowres-16:9"){height=180;width=320}else if(media.video==="hires"||media.video==="hires-16:9"||media.video==="hdres"){height=720;width=1280}else if(media.video==="fhdres"){height=1080;width=1920}else if(media.video==="4kres"){height=2160;width=3840}else if(media.video==="stdres"){height=480;width=640}else if(media.video==="stdres-16:9"){height=360;width=640}else{Janus$3.log("Default video setting is stdres 4:3");height=480;width=640}Janus$3.log("Adding media constraint:",media.video);videoSupport={height:{ideal:height},width:{ideal:width}};Janus$3.log("Adding video constraint:",videoSupport)}}else if(media.video==="screen"||media.video==="window"){var callbackUserMedia=function callbackUserMedia(error,stream){pluginHandle.consentDialog(false);if(error){callbacks.error(error)}else{streamsDone(handleId,jsep,media,callbacks,stream)}};var getScreenMedia=function getScreenMedia(constraints,gsmCallback,useAudio){Janus$3.log("Adding media constraint (screen capture)");Janus$3.debug(constraints);navigator.mediaDevices.getUserMedia(constraints).then(function(stream){if(useAudio){navigator.mediaDevices.getUserMedia({audio:true,video:false}).then(function(audioStream){stream.addTrack(audioStream.getAudioTracks()[0]);gsmCallback(null,stream)})}else{gsmCallback(null,stream)}})["catch"](function(error){pluginHandle.consentDialog(false);gsmCallback(error)})};if(!media.screenshareFrameRate){media.screenshareFrameRate=3}if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){navigator.mediaDevices.getDisplayMedia({video:true}).then(function(stream){pluginHandle.consentDialog(false);if(isAudioSendEnabled(media)&&!media.keepAudio){navigator.mediaDevices.getUserMedia({audio:true,video:false}).then(function(audioStream){stream.addTrack(audioStream.getAudioTracks()[0]);streamsDone(handleId,jsep,media,callbacks,stream)})}else{streamsDone(handleId,jsep,media,callbacks,stream)}},function(error){pluginHandle.consentDialog(false);callbacks.error(error)});return}if(Janus$3.webRTCAdapter.browserDetails.browser==="chrome"){var chromever=Janus$3.webRTCAdapter.browserDetails.version;var maxver=33;if(window.navigator.userAgent.match("Linux"))maxver=35;if(chromever>=26&&chromever<=maxver){constraints={video:{mandatory:{googLeakyBucket:true,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:media.screenshareFrameRate,maxFrameRate:media.screenshareFrameRate,chromeMediaSource:"screen"}},audio:isAudioSendEnabled(media)&&!media.keepAudio};getScreenMedia(constraints,callbackUserMedia)}else{Janus$3.extension.getScreen(function(error,sourceId){if(error){pluginHandle.consentDialog(false);return callbacks.error(error)}constraints={audio:false,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:media.screenshareFrameRate,maxFrameRate:media.screenshareFrameRate},optional:[{googLeakyBucket:true},{googTemporalLayeredScreencast:true}]}};constraints.video.mandatory.chromeMediaSourceId=sourceId;getScreenMedia(constraints,callbackUserMedia,isAudioSendEnabled(media)&&!media.keepAudio)})}}else if(Janus$3.webRTCAdapter.browserDetails.browser==="firefox"){if(Janus$3.webRTCAdapter.browserDetails.version>=33){constraints={video:{mozMediaSource:media.video,mediaSource:media.video},audio:isAudioSendEnabled(media)&&!media.keepAudio};getScreenMedia(constraints,function(err,stream){callbackUserMedia(err,stream);if(!err){var lastTime=stream.currentTime;var polly=window.setInterval(function(){if(!stream)window.clearInterval(polly);if(stream.currentTime==lastTime){window.clearInterval(polly);if(stream.onended){stream.onended()}}lastTime=stream.currentTime},500)}})}else{var error=new Error("NavigatorUserMediaError");error.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)";pluginHandle.consentDialog(false);callbacks.error(error);return}}return}}if(media===null||media===undefined||media.video!=="screen"){navigator.mediaDevices.enumerateDevices().then(function(devices){var audioExist=devices.some(function(device){return device.kind==="audioinput"}),videoExist=isScreenSendEnabled(media)||devices.some(function(device){return device.kind==="videoinput"});var audioSend=isAudioSendEnabled(media);var videoSend=isVideoSendEnabled(media);var needAudioDevice=isAudioSendRequired(media);var needVideoDevice=isVideoSendRequired(media);if(audioSend||videoSend||needAudioDevice||needVideoDevice){var haveAudioDevice=audioSend?audioExist:false;var haveVideoDevice=videoSend?videoExist:false;if(!haveAudioDevice&&!haveVideoDevice){pluginHandle.consentDialog(false);callbacks.error("No capture device found");return false}else if(!haveAudioDevice&&needAudioDevice){pluginHandle.consentDialog(false);callbacks.error("Audio capture is required, but no capture device found");return false}else if(!haveVideoDevice&&needVideoDevice){pluginHandle.consentDialog(false);callbacks.error("Video capture is required, but no capture device found");return false}}var gumConstraints={audio:audioExist&&!media.keepAudio?audioSupport:false,video:videoExist&&!media.keepVideo?videoSupport:false};Janus$3.debug("getUserMedia constraints",gumConstraints);if(!gumConstraints.audio&&!gumConstraints.video){pluginHandle.consentDialog(false);streamsDone(handleId,jsep,media,callbacks,stream)}else{navigator.mediaDevices.getUserMedia(gumConstraints).then(function(stream){pluginHandle.consentDialog(false);streamsDone(handleId,jsep,media,callbacks,stream)})["catch"](function(error){pluginHandle.consentDialog(false);callbacks.error({code:error.code,name:error.name,message:error.message})})}})["catch"](function(error){pluginHandle.consentDialog(false);callbacks.error("enumerateDevices error",error)})}}else{streamsDone(handleId,jsep,media,callbacks)}}function prepareWebrtcPeer(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:webrtcError;var jsep=callbacks.jsep;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;if(jsep!==undefined&&jsep!==null){if(config.pc===null){Janus$3.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep");callbacks.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");return}config.pc.setRemoteDescription(jsep).then(function(){Janus$3.log("Remote description accepted!");config.remoteSdp=jsep.sdp;if(config.candidates&&config.candidates.length>0){for(var i=0;i<config.candidates.length;i++){var candidate=config.candidates[i];Janus$3.debug("Adding remote candidate:",candidate);if(!candidate||candidate.completed===true){config.pc.addIceCandidate(Janus$3.endOfCandidates)}else{config.pc.addIceCandidate(candidate)}}config.candidates=[]}callbacks.success()},callbacks.error)}else{callbacks.error("Invalid JSEP")}}function createOffer(handleId,media,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$3.noop;callbacks.customizeSdp=typeof callbacks.customizeSdp=="function"?callbacks.customizeSdp:Janus$3.noop;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;var simulcast=callbacks.simulcast===true?true:false;if(!simulcast){Janus$3.log("Creating offer (iceDone="+config.iceDone+")")}else{Janus$3.log("Creating offer (iceDone="+config.iceDone+", simulcast="+simulcast+")")}var mediaConstraints={};if(Janus$3.unifiedPlan){var audioTransceiver=null,videoTransceiver=null;var transceivers=config.pc.getTransceivers();if(transceivers&&transceivers.length>0){for(var i in transceivers){var t=transceivers[i];if(t.sender&&t.sender.track&&t.sender.track.kind==="audio"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="audio"){if(!audioTransceiver)audioTransceiver=t;continue}if(t.sender&&t.sender.track&&t.sender.track.kind==="video"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="video"){if(!videoTransceiver)videoTransceiver=t;continue}}}var audioSend=isAudioSendEnabled(media);var audioRecv=isAudioRecvEnabled(media);if(!audioSend&&!audioRecv){if(media.removeAudio&&audioTransceiver){if(audioTransceiver.setDirection){audioTransceiver.setDirection("inactive")}else{audioTransceiver.direction="inactive"}Janus$3.log("Setting audio transceiver to inactive:",audioTransceiver)}}else{if(audioSend&&audioRecv){if(audioTransceiver){if(audioTransceiver.setDirection){audioTransceiver.setDirection("sendrecv")}else{audioTransceiver.direction="sendrecv"}Janus$3.log("Setting audio transceiver to sendrecv:",audioTransceiver)}}else if(audioSend&&!audioRecv){if(audioTransceiver){if(audioTransceiver.setDirection){audioTransceiver.setDirection("sendonly")}else{audioTransceiver.direction="sendonly"}Janus$3.log("Setting audio transceiver to sendonly:",audioTransceiver)}}else if(!audioSend&&audioRecv){if(audioTransceiver){if(audioTransceiver.setDirection){audioTransceiver.setDirection("recvonly")}else{audioTransceiver.direction="recvonly"}Janus$3.log("Setting audio transceiver to recvonly:",audioTransceiver)}else{audioTransceiver=config.pc.addTransceiver("audio",{direction:"recvonly"});Janus$3.log("Adding recvonly audio transceiver:",audioTransceiver)}}}var videoSend=isVideoSendEnabled(media);var videoRecv=isVideoRecvEnabled(media);if(!videoSend&&!videoRecv){if(media.removeVideo&&videoTransceiver){if(videoTransceiver.setDirection){videoTransceiver.setDirection("inactive")}else{videoTransceiver.direction="inactive"}Janus$3.log("Setting video transceiver to inactive:",videoTransceiver)}}else{if(videoSend&&videoRecv){if(videoTransceiver){if(videoTransceiver.setDirection){videoTransceiver.setDirection("sendrecv")}else{videoTransceiver.direction="sendrecv"}Janus$3.log("Setting video transceiver to sendrecv:",videoTransceiver)}}else if(videoSend&&!videoRecv){if(videoTransceiver){if(videoTransceiver.setDirection){videoTransceiver.setDirection("sendonly")}else{videoTransceiver.direction="sendonly"}Janus$3.log("Setting video transceiver to sendonly:",videoTransceiver)}}else if(!videoSend&&videoRecv){if(videoTransceiver){if(videoTransceiver.setDirection){videoTransceiver.setDirection("recvonly")}else{videoTransceiver.direction="recvonly"}Janus$3.log("Setting video transceiver to recvonly:",videoTransceiver)}else{videoTransceiver=config.pc.addTransceiver("video",{direction:"recvonly"});Janus$3.log("Adding recvonly video transceiver:",videoTransceiver)}}}}else{mediaConstraints["offerToReceiveAudio"]=isAudioRecvEnabled(media);mediaConstraints["offerToReceiveVideo"]=isVideoRecvEnabled(media)}var iceRestart=callbacks.iceRestart===true?true:false;if(iceRestart){mediaConstraints["iceRestart"]=true}Janus$3.debug(mediaConstraints);var sendVideo=isVideoSendEnabled(media);if(sendVideo&&simulcast&&Janus$3.webRTCAdapter.browserDetails.browser==="firefox"){Janus$3.log("Enabling Simulcasting for Firefox (RID)");var sender=config.pc.getSenders().find(function(s){return s.track.kind=="video"});if(sender){var parameters=sender.getParameters();if(!parameters)parameters={};var maxBitrates=getMaxBitrates(callbacks.simulcastMaxBitrates);parameters.encodings=[{rid:"h",active:true,maxBitrate:maxBitrates.high},{rid:"m",active:true,maxBitrate:maxBitrates.medium,scaleResolutionDownBy:2},{rid:"l",active:true,maxBitrate:maxBitrates.low,scaleResolutionDownBy:4}];sender.setParameters(parameters)}}config.pc.createOffer(mediaConstraints).then(function(offer){Janus$3.debug(offer);var jsep={type:offer.type,sdp:offer.sdp};callbacks.customizeSdp(jsep);offer.sdp=jsep.sdp;Janus$3.log("Setting local description");if(sendVideo&&simulcast){if(Janus$3.webRTCAdapter.browserDetails.browser==="chrome"||Janus$3.webRTCAdapter.browserDetails.browser==="safari"){Janus$3.log("Enabling Simulcasting for Chrome (SDP munging)");offer.sdp=mungeSdpForSimulcasting(offer.sdp)}else if(Janus$3.webRTCAdapter.browserDetails.browser!=="firefox"){Janus$3.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")}}config.mySdp=offer.sdp;config.pc.setLocalDescription(offer)["catch"](callbacks.error);config.mediaConstraints=mediaConstraints;if(!config.iceDone&&!config.trickle){Janus$3.log("Waiting for all candidates...");return}Janus$3.log("Offer ready");Janus$3.debug(callbacks);callbacks.success(offer)},callbacks.error)}function createAnswer(handleId,media,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$3.noop;callbacks.customizeSdp=typeof callbacks.customizeSdp=="function"?callbacks.customizeSdp:Janus$3.noop;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;var simulcast=callbacks.simulcast===true?true:false;if(!simulcast){Janus$3.log("Creating answer (iceDone="+config.iceDone+")")}else{Janus$3.log("Creating answer (iceDone="+config.iceDone+", simulcast="+simulcast+")")}var mediaConstraints=null;if(Janus$3.unifiedPlan){mediaConstraints={};var audioTransceiver=null,videoTransceiver=null;var transceivers=config.pc.getTransceivers();if(transceivers&&transceivers.length>0){for(var i in transceivers){var t=transceivers[i];if(t.sender&&t.sender.track&&t.sender.track.kind==="audio"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="audio"){if(!audioTransceiver)audioTransceiver=t;continue}if(t.sender&&t.sender.track&&t.sender.track.kind==="video"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="video"){if(!videoTransceiver)videoTransceiver=t;continue}}}var audioSend=isAudioSendEnabled(media);var audioRecv=isAudioRecvEnabled(media);if(!audioSend&&!audioRecv){if(media.removeAudio&&audioTransceiver){try{if(audioTransceiver.setDirection){audioTransceiver.setDirection("inactive")}else{audioTransceiver.direction="inactive"}Janus$3.log("Setting audio transceiver to inactive:",audioTransceiver)}catch(e){Janus$3.error(e)}}}else{if(audioSend&&audioRecv){if(audioTransceiver){try{if(audioTransceiver.setDirection){audioTransceiver.setDirection("sendrecv")}else{audioTransceiver.direction="sendrecv"}Janus$3.log("Setting audio transceiver to sendrecv:",audioTransceiver)}catch(e){Janus$3.error(e)}}}else if(audioSend&&!audioRecv){try{if(audioTransceiver){if(audioTransceiver.setDirection){audioTransceiver.setDirection("sendonly")}else{audioTransceiver.direction="sendonly"}Janus$3.log("Setting audio transceiver to sendonly:",audioTransceiver)}}catch(e){Janus$3.error(e)}}else if(!audioSend&&audioRecv){if(audioTransceiver){try{if(audioTransceiver.setDirection){audioTransceiver.setDirection("recvonly")}else{audioTransceiver.direction="recvonly"}Janus$3.log("Setting audio transceiver to recvonly:",audioTransceiver)}catch(e){Janus$3.error(e)}}else{audioTransceiver=config.pc.addTransceiver("audio",{direction:"recvonly"});Janus$3.log("Adding recvonly audio transceiver:",audioTransceiver)}}}var videoSend=isVideoSendEnabled(media);var videoRecv=isVideoRecvEnabled(media);if(!videoSend&&!videoRecv){if(media.removeVideo&&videoTransceiver){try{if(videoTransceiver.setDirection){videoTransceiver.setDirection("inactive")}else{videoTransceiver.direction="inactive"}Janus$3.log("Setting video transceiver to inactive:",videoTransceiver)}catch(e){Janus$3.error(e)}}}else{if(videoSend&&videoRecv){if(videoTransceiver){try{if(videoTransceiver.setDirection){videoTransceiver.setDirection("sendrecv")}else{videoTransceiver.direction="sendrecv"}Janus$3.log("Setting video transceiver to sendrecv:",videoTransceiver)}catch(e){Janus$3.error(e)}}}else if(videoSend&&!videoRecv){if(videoTransceiver){try{if(videoTransceiver.setDirection){videoTransceiver.setDirection("sendonly")}else{videoTransceiver.direction="sendonly"}Janus$3.log("Setting video transceiver to sendonly:",videoTransceiver)}catch(e){Janus$3.error(e)}}}else if(!videoSend&&videoRecv){if(videoTransceiver){try{if(videoTransceiver.setDirection){videoTransceiver.setDirection("recvonly")}else{videoTransceiver.direction="recvonly"}Janus$3.log("Setting video transceiver to recvonly:",videoTransceiver)}catch(e){Janus$3.error(e)}}else{videoTransceiver=config.pc.addTransceiver("video",{direction:"recvonly"});Janus$3.log("Adding recvonly video transceiver:",videoTransceiver)}}}}else{if(Janus$3.webRTCAdapter.browserDetails.browser=="firefox"||Janus$3.webRTCAdapter.browserDetails.browser=="edge"){mediaConstraints={offerToReceiveAudio:isAudioRecvEnabled(media),offerToReceiveVideo:isVideoRecvEnabled(media)}}else{mediaConstraints={mandatory:{OfferToReceiveAudio:isAudioRecvEnabled(media),OfferToReceiveVideo:isVideoRecvEnabled(media)}}}}Janus$3.debug(mediaConstraints);var sendVideo=isVideoSendEnabled(media);if(sendVideo&&simulcast&&Janus$3.webRTCAdapter.browserDetails.browser==="firefox"){Janus$3.log("Enabling Simulcasting for Firefox (RID)");var sender=config.pc.getSenders()[1];Janus$3.log(sender);var parameters=sender.getParameters();Janus$3.log(parameters);var maxBitrates=getMaxBitrates(callbacks.simulcastMaxBitrates);sender.setParameters({encodings:[{rid:"high",active:true,priority:"high",maxBitrate:maxBitrates.high},{rid:"medium",active:true,priority:"medium",maxBitrate:maxBitrates.medium},{rid:"low",active:true,priority:"low",maxBitrate:maxBitrates.low}]})}config.pc.createAnswer(mediaConstraints).then(function(answer){Janus$3.debug(answer);var jsep={type:answer.type,sdp:answer.sdp};callbacks.customizeSdp(jsep);answer.sdp=jsep.sdp;Janus$3.log("Setting local description");if(sendVideo&&simulcast){if(Janus$3.webRTCAdapter.browserDetails.browser==="chrome"){Janus$3.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it")}else if(Janus$3.webRTCAdapter.browserDetails.browser!=="firefox"){Janus$3.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")}}config.mySdp=answer.sdp;config.pc.setLocalDescription(answer)["catch"](callbacks.error);config.mediaConstraints=mediaConstraints;if(!config.iceDone&&!config.trickle){Janus$3.log("Waiting for all candidates...");return}callbacks.success(answer)},callbacks.error)}function sendSDP(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$3.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$3.noop;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle, not sending anything");return}var config=pluginHandle.webrtcStuff;Janus$3.log("Sending offer/answer SDP...");if(config.mySdp===null||config.mySdp===undefined){Janus$3.warn("Local SDP instance is invalid, not sending anything...");return}config.mySdp={type:config.pc.localDescription.type,sdp:config.pc.localDescription.sdp};if(config.trickle===false)config.mySdp["trickle"]=false;Janus$3.debug(callbacks);config.sdpSent=true;callbacks.success(config.mySdp)}function _getVolume(handleId,remote){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");return 0}var stream=remote?"remote":"local";var config=pluginHandle.webrtcStuff;if(!config.volume[stream])config.volume[stream]={value:0};if(config.pc.getStats&&Janus$3.webRTCAdapter.browserDetails.browser==="chrome"){if(remote&&(config.remoteStream===null||config.remoteStream===undefined)){Janus$3.warn("Remote stream unavailable");return 0}else if(!remote&&(config.myStream===null||config.myStream===undefined)){Janus$3.warn("Local stream unavailable");return 0}if(config.volume[stream].timer===null||config.volume[stream].timer===undefined){Janus$3.log("Starting "+stream+" volume monitor");config.volume[stream].timer=setInterval(function(){config.pc.getStats(function(stats){var results=stats.result();for(var i=0;i<results.length;i++){var res=results[i];if(res.type=="ssrc"){if(remote&&res.stat("audioOutputLevel"))config.volume[stream].value=parseInt(res.stat("audioOutputLevel"));else if(!remote&&res.stat("audioInputLevel"))config.volume[stream].value=parseInt(res.stat("audioInputLevel"))}}})},200);return 0}return config.volume[stream].value}else{Janus$3.warn("Getting the "+stream+" volume unsupported by browser");return 0}}function isMuted(handleId,video){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");return true}var config=pluginHandle.webrtcStuff;if(config.pc===null||config.pc===undefined){Janus$3.warn("Invalid PeerConnection");return true}if(config.myStream===undefined||config.myStream===null){Janus$3.warn("Invalid local MediaStream");return true}if(video){if(config.myStream.getVideoTracks()===null||config.myStream.getVideoTracks()===undefined||config.myStream.getVideoTracks().length===0){Janus$3.warn("No video track");return true}return!config.myStream.getVideoTracks()[0].enabled}else{if(config.myStream.getAudioTracks()===null||config.myStream.getAudioTracks()===undefined||config.myStream.getAudioTracks().length===0){Janus$3.warn("No audio track");return true}return!config.myStream.getAudioTracks()[0].enabled}}function mute(handleId,video,mute){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");return false}var config=pluginHandle.webrtcStuff;if(config.pc===null||config.pc===undefined){Janus$3.warn("Invalid PeerConnection");return false}if(config.myStream===undefined||config.myStream===null){Janus$3.warn("Invalid local MediaStream");return false}if(video){if(config.myStream.getVideoTracks()===null||config.myStream.getVideoTracks()===undefined||config.myStream.getVideoTracks().length===0){Janus$3.warn("No video track");return false}config.myStream.getVideoTracks()[0].enabled=mute?false:true;return true}else{if(config.myStream.getAudioTracks()===null||config.myStream.getAudioTracks()===undefined||config.myStream.getAudioTracks().length===0){Janus$3.warn("No audio track");return false}config.myStream.getAudioTracks()[0].enabled=mute?false:true;return true}}function _getBitrate(handleId){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$3.warn("Invalid handle");return"Invalid handle"}var config=pluginHandle.webrtcStuff;if(config.pc===null||config.pc===undefined)return"Invalid PeerConnection";if(config.pc.getStats){if(config.bitrate.timer===null||config.bitrate.timer===undefined){Janus$3.log("Starting bitrate timer (via getStats)");config.bitrate.timer=setInterval(function(){config.pc.getStats().then(function(stats){stats.forEach(function(res){if(!res)return;var inStats=false;if((res.mediaType==="video"||res.id.toLowerCase().indexOf("video")>-1)&&res.type==="inbound-rtp"&&res.id.indexOf("rtcp")<0){inStats=true}else if(res.type=="ssrc"&&res.bytesReceived&&(res.googCodecName==="VP8"||res.googCodecName==="")){inStats=true}if(inStats){config.bitrate.bsnow=res.bytesReceived;config.bitrate.tsnow=res.timestamp;if(config.bitrate.bsbefore===null||config.bitrate.tsbefore===null){config.bitrate.bsbefore=config.bitrate.bsnow;config.bitrate.tsbefore=config.bitrate.tsnow}else{var timePassed=config.bitrate.tsnow-config.bitrate.tsbefore;if(Janus$3.webRTCAdapter.browserDetails.browser=="safari")timePassed=timePassed/1e3;var bitRate=Math.round((config.bitrate.bsnow-config.bitrate.bsbefore)*8/timePassed);if(Janus$3.webRTCAdapter.browserDetails.browser==="safari")bitRate=parseInt(bitRate/1e3);config.bitrate.value=bitRate+" kbits/sec";config.bitrate.bsbefore=config.bitrate.bsnow;config.bitrate.tsbefore=config.bitrate.tsnow}}})})},1e3);return"0 kbits/sec"}return config.bitrate.value}else{Janus$3.warn("Getting the video bitrate unsupported by browser");return"Feature unsupported by browser"}}function webrtcError(error){Janus$3.error("WebRTC error:",error)}function cleanupWebrtc(handleId,hangupRequest){Janus$3.log("Cleaning WebRTC stuff");var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined){return}var config=pluginHandle.webrtcStuff;if(config!==null&&config!==undefined){if(hangupRequest===true){var request={rtcgw:"hangup",transaction:Janus$3.randomString(12)};if(pluginHandle.token!==null&&pluginHandle.token!==undefined)request["token"]=pluginHandle.token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;Janus$3.debug("Sending hangup request (handle="+handleId+"):");Janus$3.debug(request);if(websockets){request["session_id"]=sessionId;request["handle_id"]=handleId;ws.send(JSON.stringify(request))}else{Janus$3.httpAPICall(server+"/"+sessionId+"/"+handleId,{verb:"POST",withCredentials:withCredentials,body:request})}}config.remoteStream=null;if(config.volume){if(config.volume["local"]&&config.volume["local"].timer)clearInterval(config.volume["local"].timer);if(config.volume["remote"]&&config.volume["remote"].timer)clearInterval(config.volume["remote"].timer)}config.volume={};if(config.bitrate.timer)clearInterval(config.bitrate.timer);config.bitrate.timer=null;config.bitrate.bsnow=null;config.bitrate.bsbefore=null;config.bitrate.tsnow=null;config.bitrate.tsbefore=null;config.bitrate.value=null;try{if(!config.streamExternal&&config.myStream!==null&&config.myStream!==undefined){Janus$3.log("Stopping local stream tracks");var tracks=config.myStream.getTracks();for(var i in tracks){var mst=tracks[i];Janus$3.log(mst);if(mst!==null&&mst!==undefined)mst.stop()}}}catch(e){}config.streamExternal=false;config.myStream=null;try{config.pc.close()}catch(e){}config.pc=null;config.candidates=null;config.mySdp=null;config.remoteSdp=null;config.iceDone=false;config.dataChannel={};config.dtmfSender=null}pluginHandle.oncleanup()}function mungeSdpForSimulcasting(sdp){var lines=sdp.split("\r\n");var video=false;var ssrc=[-1],ssrc_fid=[-1];var cname=null,msid=null,mslabel=null,label=null;var insertAt=-1;for(var i=0;i<lines.length;i++){var mline=lines[i].match(/m=(\w+) */);if(mline){var medium=mline[1];if(medium==="video"){if(ssrc[0]<0){video=true}else{insertAt=i;break}}else{if(ssrc[0]>-1){insertAt=i;break}}continue}if(!video)continue;var fid=lines[i].match(/a=ssrc-group:FID (\d+) (\d+)/);if(fid){ssrc[0]=fid[1];ssrc_fid[0]=fid[2];lines.splice(i,1);i--;continue}if(ssrc[0]){var match=lines[i].match("a=ssrc:"+ssrc[0]+" cname:(.+)");if(match){cname=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" msid:(.+)");if(match){msid=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" mslabel:(.+)");if(match){mslabel=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" label:(.+)");if(match){label=match[1]}if(lines[i].indexOf("a=ssrc:"+ssrc_fid[0])===0){lines.splice(i,1);i--;continue}if(lines[i].indexOf("a=ssrc:"+ssrc[0])===0){lines.splice(i,1);i--;continue}}if(lines[i].length==0){lines.splice(i,1);i--;continue}}if(ssrc[0]<0){insertAt=-1;video=false;for(var i=0;i<lines.length;i++){var mline=lines[i].match(/m=(\w+) */);if(mline){var medium=mline[1];if(medium==="video"){if(ssrc[0]<0){video=true}else{insertAt=i;break}}else{if(ssrc[0]>-1){insertAt=i;break}}continue}if(!video)continue;if(ssrc[0]<0){var value=lines[i].match(/a=ssrc:(\d+)/);if(value){ssrc[0]=value[1];lines.splice(i,1);i--;continue}}else{var match=lines[i].match("a=ssrc:"+ssrc[0]+" cname:(.+)");if(match){cname=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" msid:(.+)");if(match){msid=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" mslabel:(.+)");if(match){mslabel=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" label:(.+)");if(match){label=match[1]}if(lines[i].indexOf("a=ssrc:"+ssrc_fid[0])===0){lines.splice(i,1);i--;continue}if(lines[i].indexOf("a=ssrc:"+ssrc[0])===0){lines.splice(i,1);i--;continue}}if(lines[i].length==0){lines.splice(i,1);i--;continue}}}if(ssrc[0]<0){Janus$3.warn("Couldn't find the video SSRC, simulcasting NOT enabled");return sdp}if(insertAt<0){insertAt=lines.length}ssrc[1]=Math.floor(Math.random()*4294967295);ssrc[2]=Math.floor(Math.random()*4294967295);ssrc_fid[1]=Math.floor(Math.random()*4294967295);ssrc_fid[2]=Math.floor(Math.random()*4294967295);for(var i=0;i<ssrc.length;i++){if(cname){lines.splice(insertAt,0,"a=ssrc:"+ssrc[i]+" cname:"+cname);insertAt++}if(msid){lines.splice(insertAt,0,"a=ssrc:"+ssrc[i]+" msid:"+msid);insertAt++}if(mslabel){lines.splice(insertAt,0,"a=ssrc:"+ssrc[i]+" mslabel:"+mslabel);insertAt++}if(label){lines.splice(insertAt,0,"a=ssrc:"+ssrc[i]+" label:"+label);insertAt++}if(cname){lines.splice(insertAt,0,"a=ssrc:"+ssrc_fid[i]+" cname:"+cname);insertAt++}if(msid){lines.splice(insertAt,0,"a=ssrc:"+ssrc_fid[i]+" msid:"+msid);insertAt++}if(mslabel){lines.splice(insertAt,0,"a=ssrc:"+ssrc_fid[i]+" mslabel:"+mslabel);insertAt++}if(label){lines.splice(insertAt,0,"a=ssrc:"+ssrc_fid[i]+" label:"+label);insertAt++}}lines.splice(insertAt,0,"a=ssrc-group:FID "+ssrc[2]+" "+ssrc_fid[2]);lines.splice(insertAt,0,"a=ssrc-group:FID "+ssrc[1]+" "+ssrc_fid[1]);lines.splice(insertAt,0,"a=ssrc-group:FID "+ssrc[0]+" "+ssrc_fid[0]);lines.splice(insertAt,0,"a=ssrc-group:SIM "+ssrc[0]+" "+ssrc[1]+" "+ssrc[2]);sdp=lines.join("\r\n");if(!sdp.endsWith("\r\n"))sdp+="\r\n";return sdp}function isAudioSendEnabled(media){Janus$3.debug("isAudioSendEnabled:",media);if(media===undefined||media===null)return true;if(media.audio===false)return false;if(media.audioSend===undefined||media.audioSend===null)return true;return media.audioSend===true}function isAudioSendRequired(media){Janus$3.debug("isAudioSendRequired:",media);if(media===undefined||media===null)return false;if(media.audio===false||media.audioSend===false)return false;if(media.failIfNoAudio===undefined||media.failIfNoAudio===null)return false;return media.failIfNoAudio===true}function isAudioRecvEnabled(media){Janus$3.debug("isAudioRecvEnabled:",media);if(media===undefined||media===null)return true;if(media.audio===false)return false;if(media.audioRecv===undefined||media.audioRecv===null)return true;return media.audioRecv===true}function isVideoSendEnabled(media){Janus$3.debug("isVideoSendEnabled:",media);if(media===undefined||media===null)return true;if(media.video===false)return false;if(media.videoSend===undefined||media.videoSend===null)return true;return media.videoSend===true}function isVideoSendRequired(media){Janus$3.debug("isVideoSendRequired:",media);if(media===undefined||media===null)return false;if(media.video===false||media.videoSend===false)return false;if(media.failIfNoVideo===undefined||media.failIfNoVideo===null)return false;return media.failIfNoVideo===true}function isVideoRecvEnabled(media){Janus$3.debug("isVideoRecvEnabled:",media);if(media===undefined||media===null)return true;if(media.video===false)return false;if(media.videoRecv===undefined||media.videoRecv===null)return true;return media.videoRecv===true}function isScreenSendEnabled(media){Janus$3.debug("isScreenSendEnabled:",media);if(media===undefined||media===null)return false;if(_typeof(media.video)!=="object"||_typeof(media.video.mandatory)!=="object")return false;var constraints=media.video.mandatory;if(constraints.chromeMediaSource)return constraints.chromeMediaSource==="desktop"||constraints.chromeMediaSource==="screen";else if(constraints.mozMediaSource)return constraints.mozMediaSource==="window"||constraints.mozMediaSource==="screen";else if(constraints.mediaSource)return constraints.mediaSource==="window"||constraints.mediaSource==="screen";return false}function isDataEnabled(media){Janus$3.debug("isDataEnabled:",media);if(Janus$3.webRTCAdapter.browserDetails.browser=="edge"){Janus$3.warn("Edge doesn't support data channels yet");return false}if(media===undefined||media===null)return false;return media.data===true}function isTrickleEnabled(trickle){Janus$3.debug("isTrickleEnabled:",trickle);if(trickle===undefined||trickle===null)return true;return trickle===true}}window.Janus_Talk=Janus$3;var Janus$2=window.Janus_Talk;var janus=null;var tts=null;var opaqueId="tts-"+Janus_Talk.randomString(12);var spinner=null;Janus$2.init({debug:"all",callback:function callback(){window.stopTalk=function(){janus.destroy()};window.startTalk=function(){if(!Janus$2.isWebrtcSupported()){bootbox.alert("No WebRTC support... ");return}janus=new Janus$2({server:window.EZUIKit.opt.rtcUrl,success:function success(){janus.attach({plugin:"rtcgw.plugin.tts",opaqueId:opaqueId,success:function success(pluginHandle){tts=pluginHandle;Janus$2.log("Plugin attached! ("+tts.getPlugin()+", id="+tts.getId()+")");var url=window.EZUIKit.opt.talkLink;console.log("ttsUlr",url);var body={request:"start",url:url,codec:"opus",dir:"sendrecv",audio_debug:1,url_version:"1"};if(window.EZUIKit.opt.talkType==="gb28181"){body["devProto"]="gb28181"}Janus$2.debug("Trying a createOffer too (audio/video sendrecv)");tts.createOffer({media:{audio:true,video:false,data:false},simulcast:false,simulcast2:false,success:function success(jsep){Janus$2.debug("Got SDP!");Janus$2.debug(jsep);tts.send({message:body,jsep:jsep});if(typeof window.EZUIKit.handleTalkSuccess!=="undefined"){window.EZUIKit.handleTalkSuccess()}},error:function error(_error){Janus$2.error("WebRTC error:",_error);if(typeof window.EZUIKit.handleTalkError!=="undefined"){window.EZUIKit.handleTalkError(_error)}}})},error:function error(_error2){console.error("  -- Error attaching plugin...",_error2);bootbox.alert("Error attaching plugin... "+_error2);if(window.EZUIKit.handleTalkError!=="undefined"){window.EZUIKit.handleTalkError(_error2)}},consentDialog:function consentDialog(on){Janus$2.debug("Consent dialog should be "+(on?"on":"off")+" now")},iceState:function iceState(state){Janus$2.log("ICE state changed to "+state)},mediaState:function mediaState(medium,on){Janus$2.log("Janus "+(on?"started":"stopped")+" receiving our "+medium)},webrtcState:function webrtcState(on){Janus$2.log("Janus says our WebRTC PeerConnection is "+(on?"up":"down")+" now")},slowLink:function slowLink(uplink,lost){Janus$2.warn("Janus reports problems "+(uplink?"sending":"receiving")+" packets on this PeerConnection ("+lost+" lost packets)")},onmessage:function onmessage(msg,jsep){Janus$2.debug(" ::: Got a message :::");Janus$2.debug(msg);if(jsep!==undefined&&jsep!==null){Janus$2.debug("Handling SDP as well...");Janus$2.debug(jsep);tts.handleRemoteJsep({jsep:jsep})}var result=msg["result"];if(result!==null&&result!==undefined){if(result==="done"){bootbox.alert("The TTS Test is over");if(spinner!==null&&spinner!==undefined)spinner.stop();spinner=null;return}if(result==="msg"){if(typeof window.EZUIKit.handleTalkMessage!=="undefined"){window.EZUIKit.handleTalkMessage(msg)}}var status=result["status"];if(status==="slow_link"){toastr.warning("Janus apparently missed many packets we sent, maybe we should reduce the bitrate","Packet loss?",{timeOut:2e3})}}},onlocalstream:function onlocalstream(stream){Janus$2.debug(" ::: Got a local stream :::");Janus$2.debug(stream);Janus$2.attachMediaStream(document.getElementById("myaudio"),stream);if(tts.webrtcStuff.pc.iceConnectionState!=="completed"&&tts.webrtcStuff.pc.iceConnectionState!=="connected"){if(spinner==null){document.getElementById("audioright")}else{spinner.spin()}}var audioTracks=stream.getAudioTracks();if(audioTracks===null||audioTracks===undefined||audioTracks.length===0);},onremotestream:function onremotestream(stream){Janus$2.debug(" ::: Got a remote stream :::");Janus$2.debug(stream);Janus$2.attachMediaStream(document.getElementById("peeraudio"),stream);var audioTracks=stream.getAudioTracks();if(audioTracks===null||audioTracks===undefined||audioTracks.length===0);else{document.getElementById("peeraudio").play()}},ondataopen:function ondataopen(data){Janus$2.log("The DataChannel is available!")},ondata:function ondata(data){Janus$2.debug("We got data from the DataChannel! "+data)},oncleanup:function oncleanup(){Janus$2.log(" ::: Got a cleanup notification :::");if(spinner!==null&&spinner!==undefined)spinner.stop();spinner=null}})},error:function error(_error3){Janus$2.error(_error3);if(window.EZUIKit.handleTalkError!=="undefined"){window.EZUIKit.handleTalkError(_error3)}},destroyed:function destroyed(){}})}}});window.janus=janus;window.tts=tts;var Talk=function(){function Talk(jSPlugin){var _this=this;_classCallCheck$1(this,Talk);this.jSPlugin=jSPlugin;this.codeHandler=new UikitCode;this.pluginStatus=new Status(this,this.jSPlugin.params.id);this.talkChannelNo=jSPlugin.talkChannelNo;var audioLeft=document.createElement("div");audioLeft.id="audioleft";var audioRight=document.createElement("div");audioRight.id="audioright";audioRight.style="display:none;";var audioLeftDOM=document.createElement("audio");audioLeftDOM.id="myaudio";audioLeftDOM.muted=true;audioLeftDOM.setAttribute("autoplay",true);audioLeftDOM.setAttribute("controls",true);audioLeft.appendChild(audioLeftDOM);audioLeft.style="display:none;";var audioRightDOM=document.createElement("audio");audioRightDOM.id="peeraudio";audioRightDOM.setAttribute("autoplay",true);audioRightDOM.setAttribute("controls",true);audioRight.appendChild(audioRightDOM);window.EZUIKit["handleTalkError"]=function(err){console.log("talk err",err);if(typeof _this.jSPlugin.handleTalkError!=="undefined"){_this.jSPlugin.handleTalkError(err)}};window.EZUIKit["handleTalkSuccess"]=function(data){console.log("talk success",data);if(typeof _this.jSPlugin.handleTalkSuccess!=="undefined"){_this.jSPlugin.handleTalkSuccess(data)}};window.EZUIKit.opt={rtcUrl:"",talkLink:"",ttsUrl:"",stream:"",deviceSerial:matchEzopenUrl(this.jSPlugin.url).deviceSerial,channelNo:matchEzopenUrl(this.jSPlugin.url).channelNo};document.body.appendChild(audioLeft);document.body.appendChild(audioRight)}_createClass$1(Talk,[{key:"toString",value:function toString(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"startTalk",value:function startTalk(callback){var _this2=this;var promise=new Promise(function(resolve,reject){if(_this2.jSPlugin.capacity&&_this2.jSPlugin.capacity.support_switch_talkmode&&_this2.jSPlugin.capacity.support_switch_talkmode=="1"){fetch(_this2.jSPlugin.env.domain+"/api/service/device/talkMode"+"?deviceSerial=".concat(matchEzopenUrl(_this2.jSPlugin.url).deviceSerial),{method:"GET",headers:{accessToken:_this2.jSPlugin.accessToken}}).then(function(response){return response.json()}).then(function(res){if(res.meta&&res.meta.code==200){if(res.data&&res.data.valueInfo&&res.data.valueInfo.mode==0){fetch(_this2.jSPlugin.env.domain+"/api/v3/device/talkMode"+"?deviceSerial=".concat(matchEzopenUrl(_this2.jSPlugin.url).deviceSerial,"&channelNo=").concat(matchEzopenUrl(_this2.jSPlugin.url).channelNo,"&mode=1"),{method:"PUT",headers:{accessToken:_this2.jSPlugin.accessToken}}).then(function(response){return response.json()}).then(function(switchRes){if(switchRes.meta&&switchRes.meta.code==200){resolve()}else{resolve({code:-1,msg:"对讲模式切换失败",res:switchRes})}})["catch"](function(err){resolve({code:-1,msg:"对讲模式切换失败",res:err})})}else{resolve()}}else{resolve({code:-1,msg:"获取当前对讲模式失败",res:res})}})["catch"](function(err){resolve({code:-1,msg:"获取当前对讲模式失败",res:err})})}else{resolve({code:-1,msg:"当前设备不支持对讲模式切换"})}});promise.then(function(res){if(_this2.jSPlugin.capacity&&_this2.jSPlugin.capacity.support_talk&&!(_this2.jSPlugin.capacity&&(_this2.jSPlugin.capacity.support_talk==="3"||_this2.jSPlugin.capacity.support_talk==="1"))){if(typeof _this2.jSPlugin.params.handleError==="function"){_this2.pluginStatus.loadingSetText({text:"设备不支持对讲",color:"red",delayClear:2e3});_this2.jSPlugin.params.handleError({msg:"设备不支持对讲",retcode:-1e3,id:_this2.jSPlugin.params.id,type:"handleError"})}console.log("设备不支持对讲");return false}var formData=new FormData;formData.append("accessToken",_this2.jSPlugin.accessToken);formData.append("deviceSerial",matchEzopenUrl(_this2.jSPlugin.url).deviceSerial);formData.append("channelNo",_this2.talkChannelNo||"0");if(_this2.jSPlugin.params.extraParams&&_this2.jSPlugin.params.extraParams.talkParams){if(_typeof(_this2.jSPlugin.params.extraParams.talkParams)==="object"){for(var key in _this2.jSPlugin.params.extraParams.talkParams){data.append(key,_this2.jSPlugin.params.extraParams.talkParams[key])}}}fetch(_this2.jSPlugin.env.domain+"/api/lapp/live/talk/url",{method:"POST",body:formData}).then(function(response){return response.json()}).then(function(data){if(data.code==200){var apiResult=data.data;if(apiResult){var rtcTrunk=apiResult.rtcUrl;if(rtcTrunk.indexOf("ws")===-1){rtcTrunk=rtcTrunk.replace("https","wss").replace("rtcgw","rtcgw-ws")}window.EZUIKit.opt.rtcUrl=rtcTrunk;window.EZUIKit.opt.ttsUrl="tts://"+apiResult.ttsUrl;if(_this2.jSPlugin.params.extraParams&&_this2.jSPlugin.params.extraParams.ttsParams){if(typeof _this2.jSPlugin.params.extraParams.ttsParams==="string"){window.EZUIKit.opt.ttsUrl+="&"+_this2.jSPlugin.params.extraParams.ttsParams}else if(_typeof(_this2.jSPlugin.params.extraParams.ttsParams)==="object"){for(var key in _this2.jSPlugin.params.extraParams.ttsParams){window.EZUIKit.opt.ttsUrl+="&"+key+"="+_this2.jSPlugin.params.extraParams.ttsParams[key]}}}if(apiResult.ttsUrl.indexOf("gb28181")>-1&&apiResult.ttsUrl.indexOf("8664")>-1){window.EZUIKit.opt.ttsUrl=window.EZUIKit.opt.ttsUrl.replace("8664","8665")}window.EZUIKit.opt.deviceSerial=matchEzopenUrl(_this2.jSPlugin.url).deviceSerial;window.EZUIKit.opt.channelNo=_this2.talkChannelNo||"0";var talk="talk?dev="+window.EZUIKit.opt.deviceSerial+"&chann="+window.EZUIKit.opt.channelNo+"&encodetype=2";window.EZUIKit.opt.talkLink=window.EZUIKit.opt.ttsUrl.split("?")[0]+"/"+talk;if(apiResult.ttsUrl.indexOf("gb28181")>-1){window.EZUIKit.opt.talkType="gb28181"}if(callback){callback(apiResult.ttsUrl.indexOf("gb28181")>-1||window.EZUIKit.opt.deviceSerial.indexOf(":")!==-1)}window.EZUIKit.opt.stream=apiResult.stream;window.startTalk();if(_this2.jSPlugin.eventEmitter){_this2.jSPlugin.eventEmitter.emit("startTalk",{eventType:"startTalk",code:0,target:_this2,msg:"开启对讲"})}}}else{console.log(data.code,_this2.codeHandler.matchInfo(data.code,"talk"));_this2.pluginStatus.loadingSetText({text:_this2.codeHandler.matchInfo(data.code,"talk").msg||data.msg,color:"red",delayClear:2e3});if(_this2.jSPlugin.eventEmitter){_this2.jSPlugin.eventEmitter.emit("startTalk",{eventType:"startTalk",code:-1,target:_this2,msg:_this2.codeHandler.matchInfo(data.code,"talk").msg||data.msg})}if(typeof _this2.jSPlugin.params.handleError==="function"){_this2.jSPlugin.params.handleError({msg:data.msg,retcode:data.code,id:_this2.jSPlugin.params.id,type:"handleError"})}}})["catch"](function(err){console.log("err",err)})})["catch"](function(err){console.log("对讲开启失败：",err)})}},{key:"stopTalk",value:function stopTalk(){window.stopTalk();if(this.jSPlugin.eventEmitter){this.jSPlugin.eventEmitter.emit("stopTalk",{eventType:"stopTalk",code:0,target:this,msg:"结束对讲"})}if(document.getElementById("myaudio")&&document.getElementById("myaudio").srcObject){document.getElementById("myaudio").srcObject.getTracks()[0].stop()}}},{key:"changeTalkChannelNo",value:function changeTalkChannelNo(channelNo){if(window.EZUIKit.opt&&!!window.EZUIKit.opt.channelNo){this.talkChannelNo=channelNo;window.EZUIKit.opt.channelNo=channelNo}}}]);return Talk}();var MobilePtz=function(){function MobilePtz(jSPlugin){var _this=this;_classCallCheck$1(this,MobilePtz);this.jSPlugin=jSPlugin;this.codeHandler=new UikitCode;this.pluginStatus=new Status(this,this.jSPlugin.id);var oS=document.createElement("style");oS.innerHTML="\n    body{\n      padding: 0;\n      margin: 0;\n    }\n    #mobile-ez-ptz-container {\n      display: inline-block;\n      width: 375px;\n      text-align: center;\n    }\n    .live-ptz-title{\n      height: 25px;\n      font-size: 18px;\n      color: #2c2c2c;\n      text-align: center;\n      font-weight: 700;\n      margin: 24px 0 12px;\n    }\n    .live-ptz-intro {\n      margin-bottom: 24px;\n      color: #aaaaaa;\n    }\n    .mobile-ez-ptz-wrap {\n      background-image: linear-gradient(180deg, #f6f8ff 0%, #ededed6b 50%)\n    }\n    #mobile-ez-ptz-container .mobile-ez-ptz-container {\n      position: relative;\n      width: 260px;\n      height: 260px;\n      background: rgba(255, 255, 255, 0.80);\n      border: 1px solid rgba(255, 255, 255, 0.80);\n      border-radius: 100%;\n      cursor: pointer;\n      overflow: hidden;\n      margin: auto;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.top {\n      width: 0;\n      height: 0;\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-bottom: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 6px);\n      top: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.top.active {\n      border-bottom-color: #1890FF;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.bottom {\n      width: 0;\n      height: 0;\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-top: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 6px);\n      bottom: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.bottom.active {\n      border-top-color: #1890FF;\n\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.right {\n      width: 0;\n      height: 0;\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-left: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 6px);\n      right: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.right.active {\n      border-left-color: #1890FF;\n\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.left {\n      width: 0;\n      height: 0;\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-right: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 6px);\n      left: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.left.active {\n      border-right-color: #1890FF;\n\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .ez-ptz-main.center {\n      width: 52px;\n      height: 52px;\n      background: #FFFFFF;\n      border: 2px solid #eee;\n      border-radius: 100%;\n      top: calc(50% - 26px);\n      left: calc(50% - 26px);\n      position: absolute;\n      /* box-shadow: 0px -39px 40px 6px #1890ff; */\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-wrap {\n      display: inline-block;\n      padding: 24px 24px;\n      border-radius: 100%;\n      overflow: hidden;\n    }\n\n    #mobile-ez-ptz-container .ez-ptz-close {\n      position: absolute;\n      color: #FFFFFF;\n      top: 0;\n      right: 0px;\n    }";document.getElementsByTagName("head")[0].appendChild(oS);var mobileContainer=document.createElement("div");mobileContainer.className="mobile-ez-ptz-container";mobileContainer.id="mobile-ez-ptz-container";mobileContainer.style="display:inline-block;width: ".concat(this.jSPlugin.width,"px;text-align:center;");var mobileContainerTitle=document.createElement("div");mobileContainerTitle.className="live-ptz-title";mobileContainerTitle.id="live-ptz-title";mobileContainerTitle.innerHTML="云台控制";if(!document.getElementById("live-ptz-title")){mobileContainer.appendChild(mobileContainerTitle)}var mobileContainerIntro=document.createElement("div");mobileContainerIntro.className="live-ptz-intro";mobileContainerIntro.id="live-ptz-intro";mobileContainerIntro.innerHTML="请通过操控云台来调整摄像机视角";if(!document.getElementById("live-ptz-intro")){mobileContainer.appendChild(mobileContainerIntro)}var ptzWrap=document.createElement("div");ptzWrap.id="mobile-ez-ptz-item";ptzWrap.className="mobile-ez-ptz-wrap";ptzWrap.innerHTML='\n    <div class="mobile-ez-ptz-container" id="mobile-ez-ptz-container">\n      <div class="ez-ptz-main center"></div>\n      <div class="mobile-ez-ptz-icon top default"></div>\n      <div class="mobile-ez-ptz-icon left default"></div>\n      <div class="mobile-ez-ptz-icon bottom default"></div>\n      <div class="mobile-ez-ptz-icon right default"></div>\n    </div>\n      ';if(!document.getElementById("mobile-ez-ptz-item")){mobileContainer.appendChild(ptzWrap)}insertAfter(mobileContainer,document.getElementById("".concat(this.jSPlugin.id,"-wrap")));document.getElementById("mobile-ez-ptz-item").ontouchstart=function(e){e.preventDefault();console.log("触摸开始");_this._handlePtzTouch(e,"start")};document.getElementById("mobile-ez-ptz-item").ontouchend=function(e){e.preventDefault();console.log("触摸结束",e);_this._handlePtzTouch(e,"stop")};document.getElementById("mobile-ez-ptz-item").onmousedown=function(e){e.preventDefault();console.log("触摸开始");_this._handlePtzTouch(e,"start")};document.getElementById("mobile-ez-ptz-item").onmouseup=function(e){e.preventDefault();console.log("触摸结束",e);_this._handlePtzTouch(e,"stop")}}_createClass$1(MobilePtz,[{key:"show",value:function show(){document.getElementById("mobile-ez-ptz-item").style="display: inline-block"}},{key:"hide",value:function hide(){document.getElementById("mobile-ez-ptz-item").style="display: none"}},{key:"_handlePtzTouch",value:function _handlePtzTouch(e,type){var _this2=this;var container=document.getElementById("mobile-ez-ptz-item").getBoundingClientRect();var containerCenterX=container.left+130;var containerCenterY=container.top+130;var eventX=e.x||e.changedTouches[0].clientX;var eventY=e.y||e.changedTouches[0].clientY;var left=eventX-containerCenterX;var top=eventY-containerCenterY;var direction=0;var url=this.jSPlugin.env.domain+"/api/lapp/device/ptz/start";if(Math.abs(left)>Math.abs(top)){if(left>0){direction=3;document.getElementsByClassName("mobile-ez-ptz-icon")[3].className=document.getElementsByClassName("mobile-ez-ptz-icon")[3].className.replace("default","active")}else{direction=2;document.getElementsByClassName("mobile-ez-ptz-icon")[1].className=document.getElementsByClassName("mobile-ez-ptz-icon")[1].className.replace("default","active")}}else{if(top>0){direction=1;document.getElementsByClassName("mobile-ez-ptz-icon")[2].className=document.getElementsByClassName("mobile-ez-ptz-icon")[2].className.replace("default","active")}else{direction=0;document.getElementsByClassName("mobile-ez-ptz-icon")[0].className=document.getElementsByClassName("mobile-ez-ptz-icon")[0].className.replace("default","active")}}document.getElementById("mobile-ez-ptz-item").style="background-image:linear-gradient(".concat(direction===0?180:direction===1?0:direction===2?90:270,"deg, #c0ddf1 0%, rgba(100,143,252,0.00) 50%)");if(type==="stop"){url=this.jSPlugin.env.domain+"/api/lapp/device/ptz/stop";document.getElementById("mobile-ez-ptz-item").style="";document.getElementsByClassName("mobile-ez-ptz-icon")[3].className=document.getElementsByClassName("mobile-ez-ptz-icon")[3].className.replace("active","default");document.getElementsByClassName("mobile-ez-ptz-icon")[1].className=document.getElementsByClassName("mobile-ez-ptz-icon")[1].className.replace("active","default");document.getElementsByClassName("mobile-ez-ptz-icon")[2].className=document.getElementsByClassName("mobile-ez-ptz-icon")[2].className.replace("active","default");document.getElementsByClassName("mobile-ez-ptz-icon")[0].className=document.getElementsByClassName("mobile-ez-ptz-icon")[0].className.replace("active","default")}var data=new FormData;data.append("deviceSerial",matchEzopenUrl(this.jSPlugin.url).deviceSerial);data.append("channelNo",matchEzopenUrl(this.jSPlugin.url).channelNo);data.append("speed",1);data.append("direction",direction);data.append("accessToken",this.jSPlugin.accessToken);fetch(url,{method:"POST",body:data}).then(function(response){return response.json()}).then(function(rt){if(rt.code==200);else{console.log(rt.code,_this2.codeHandler.matchInfo(rt.code,type==="start"?"ptzStart":"ptzStop"));_this2.pluginStatus.loadingSetText({text:_this2.codeHandler.matchInfo(rt.code,type==="start"?"ptzStart":"ptzStop").msg,color:"red",delayClear:2e3});if(rt.code==60005||rt.code==60002||rt.code==60003||rt.code==60004){document.getElementById("mobile-ez-ptz-item").style="background-image:linear-gradient(".concat(direction===0?180:direction===1?0:direction===2?90:270,"deg, #f45656 0%, rgba(100,143,252,0.00) 50%)")}}})["catch"](function(err){console.log("云台调用异常",err)})}}]);return MobilePtz}();var retcode=0;var msg="成功";var data$c={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"}]},footer:{color:"#FFFFFF",backgroundColor:"rgb(0 0 0 / 0%)",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-0",iconId:"play",part:"left",defaultActive:1,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-1",iconId:"capturePicture",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-2",iconId:"sound",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-3",iconId:"pantile",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-4",iconId:"recordvideo",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-5",iconId:"talk",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-6",iconId:"hd",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-7",iconId:"webExpend",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-8",iconId:"expend",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"}]}};var emptyData={retcode:retcode,msg:msg,data:data$c};var data$b={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}};var mobileLiveFullData={data:data$b};var data$a={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:1},{iconId:"rec",part:"right",defaultActive:0,isrender:1}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}};var mobileRecFullData={data:data$a};var data$9={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}};var pcLiveFullData={data:data$9};var data$8={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}};var pcLiveSecurityData={data:data$8};var data$7={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:0},{iconId:"deviceName",part:"left",defaultActive:0,isrender:0},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:0},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:0},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:0}]}};var pcLiveSimpleData={data:data$7};var data$6={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}};var pcLiveVoiceData={data:data$6};var data$5={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:1},{iconId:"rec",part:"right",defaultActive:0,isrender:1}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}};var pcRecFullDataData={data:data$5};var data$4={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:0},{iconId:"deviceName",part:"left",defaultActive:0,isrender:0},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:0},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:0},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:0},{iconId:"speed",part:"right",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:0}]}};var miniRecData={data:data$4};var officeTemplateList=[{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"pcLive",themeIntro:"PC直播全量版",themeName:"PC直播全量版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:pcLiveFullData.data.header,footer:pcLiveFullData.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"security",themeIntro:"PC直播安防版",themeName:"PC直播安防版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:pcLiveSecurityData.data.header,footer:pcLiveSecurityData.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"voice",themeIntro:"PC直播语音版",themeName:"PC直播语音版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:pcLiveVoiceData.data.header,footer:pcLiveVoiceData.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"simple",themeIntro:"PC直播极简版",themeName:"PC直播极简版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"",header:pcLiveSimpleData.data.header,footer:pcLiveSimpleData.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"pcRec",themeIntro:"PC回放全量版",themeName:"PC回放全量版",themeType:"webRec",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:pcRecFullDataData.data.header,footer:pcRecFullDataData.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"mobileLive",themeIntro:"Mobile直播全量版",themeName:"Mobile直播全量版",themeType:"mobileLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_GmAL5IhAABZs1vUK0s564.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:mobileLiveFullData.data.header,footer:mobileLiveFullData.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"mobileRec",themeIntro:"Mobile回放全量版",themeName:"Mobile回放全量版",themeType:"mobileRec",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_GmAL5IhAABZs1vUK0s564.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:mobileRecFullData.data.header,footer:mobileRecFullData.data.footer},{autoFocus:0,createTime:"2021-06-14T08:04:37.000Z",themeId:"miniRec",themeIntro:"Mobile回放全量版",themeName:"Mobile回放全量版",themeType:"mobileRec",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_GmAL5IhAABZs1vUK0s564.png",poster:"",header:miniRecData.data.header,footer:miniRecData.data.footer}];var Zoom=function(){function Zoom(jSPlugin){var _this=this;_classCallCheck$1(this,Zoom);this.jSPlugin=jSPlugin;this.enableZoom=false;this.videoWidth=1920;this.videoHeight=1080;this.currentScale=1;this.currentPosition={x:0,y:0,xPercent:.1,yPercent:.1,xCurrentVideo:0,yCurrentVideo:0,left:0,top:0,right:1920,bottom:1080};this.clientRect=document.getElementById(jSPlugin.id).getBoundingClientRect();this.DOM=document.getElementById(jSPlugin.id);this.isFullScreen=false;var scaleDOMContainer=document.createElement("div");scaleDOMContainer.id="".concat(jSPlugin.id,"-zoom-container");scaleDOMContainer.style="position: absolute;\n    display:none;\n    left: 12px;\n    bottom: 80px;\n    zoom: ".concat(jSPlugin.isMobile?"0.8":"1");var scaleDOMHTML='\n    <div\n    style="display: inline-flex;justify-content: space-between;flex-direction: column;width: 36px;height: 160px;background:rgba(0,0,0,0.60);border-radius: 2px;align-items: center;">\n    <div id="'.concat(this.jSPlugin.id,'-scale-value" style="font-size: 12px;color:#FFFFFF;margin:10px 0;">2.0X</div>\n    <div style="width: 20px;height: 20px;margin-bottom:4px;" id="').concat(this.jSPlugin.id,'-addScale">\n      <?xml version="1.0" encoding="utf-8"?>\n      <svg version="1.1" fill="#FFFFFF" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n         viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n      <title>放大</title>\n      <g id="矩形">\n        <rect class="st0" width="20" height="20" fill="none"/>\n      </g>\n      <g id="形状结合">\n        <path class="st1" d="M10,3.8c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2S3.8,13.5,3.8,10S6.5,3.8,10,3.8z M10,5c-2.8,0-5,2.2-5,5\n          s2.2,5,5,5s5-2.2,5-5S12.8,5,10,5z"/>\n      </g>\n      <g id="路径-4">\n        <path class="st2" d="M12.5,10.7h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S12.8,10.7,12.5,10.7z"/>\n      </g>\n      <g id="路径-4备份">\n        <path class="st2" d="M10,13.2c-0.3,0-0.6-0.3-0.6-0.6v-5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v5C10.6,12.9,10.3,13.2,10,13.2z"/>\n      </g>\n      </svg>\n    </div>\n    <div style="\n    position: relative;\n    width: 2px;\n    height: 64px;\n    border-radius: 2px;\n    background: rgba(255,255,255,0.75);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;">\n    <div class="scale-body-line-dot" id="').concat(this.jSPlugin.id,'-scale-body-line-dot" style="width: 6px;\n      height: 6px;\n      background: #FFFFFF;\n      border-radius: 100%;\n      position: absolute;\n      border: 1px solid #407AFF;"></div>\n      <div id="').concat(this.jSPlugin.id,'-line-dot" style="width: 2px;\n      height: 0%;\n      border-radius: 2px;\n      background: #407AFF;\n      bottom: 0;"></div>\n    </div>\n    <div style="width: 20px;height: 20px;margin: 4px 0 10px;" id="').concat(this.jSPlugin.id,'-subScale">\n      <?xml version="1.0" encoding="utf-8"?>\n      <svg fill="#FFFFFF" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n        viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n        <title>缩小</title>\n        <g id="矩形">\n          <rect class="st0" width="20" height="20" fill="none"/>\n        </g>\n        <g id="形状结合">\n          <path class="st1" d="M10,3.8c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2S3.8,13.5,3.8,10S6.5,3.8,10,3.8z M10,5c-2.8,0-5,2.2-5,5\n            s2.2,5,5,5s5-2.2,5-5S12.8,5,10,5z"/>\n        </g>\n        <g id="路径-4">\n          <path class="st2" d="M12.5,10.7h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S12.8,10.7,12.5,10.7z"/>\n        </g>\n      </svg>\n    </div>\n  </div>\n    ');scaleDOMContainer.innerHTML=scaleDOMHTML;if(document.getElementById("".concat(jSPlugin.id,"-audioControls-left"))){document.getElementById("".concat(jSPlugin.id,"-audioControls-left")).parentNode.appendChild(scaleDOMContainer);document.getElementById("".concat(jSPlugin.id,"-addScale")).onclick=function(){_this.addScale()};document.getElementById("".concat(jSPlugin.id,"-subScale")).onclick=function(){_this.subScale()}}if(!!jSPlugin.jSPlugin){var info=jSPlugin.jSPlugin._JSPlayM4_GetFrameInfo(0);this.videoWidth=info.width||jSPlugin.width;this.videoHeight=info.height||jSPlugin.height;this.currentPosition.right=info.width;this.currentPosition.bottom=info.height;jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight,false);jSPlugin.jSPlugin.bEZoom=true}var timer=setInterval(function(){var canvasDom=document.getElementById("".concat(jSPlugin.id,"canvas0"));var canvasDrawDom=document.getElementById("".concat(jSPlugin.id,"canvas_draw0"));var playerDom=document.getElementById("".concat(jSPlugin.id,"-player"));if(jSPlugin.isMobile){if(canvasDom){canvasDom.addEventListener("touchstart",function(event){return _this.onTouchstart(event)});canvasDom.addEventListener("touchend",function(event){return _this.onTouchend(event)})}if(canvasDrawDom){canvasDrawDom.addEventListener("touchstart",function(event){return _this.onTouchstart(event)});canvasDrawDom.addEventListener("touchend",function(event){return _this.onTouchend(event)})}if(playerDom){playerDom.addEventListener("touchstart",function(event){return _this.onTouchstart(event)});playerDom.addEventListener("touchend",function(event){return _this.onTouchend(event)})}}else{if(canvasDom){canvasDom.addEventListener("mousedown",function(event){return _this.onMouseDown(event)});canvasDom.addEventListener("mouseup",function(event){return _this.onMouseUp(event)})}if(canvasDrawDom){canvasDrawDom.addEventListener("mousedown",function(event){return _this.onMouseDown(event)});canvasDrawDom.addEventListener("mouseup",function(event){return _this.onMouseUp(event)})}if(playerDom){playerDom.addEventListener("mousedown",function(event){return _this.onMouseDown(event)});playerDom.addEventListener("mouseup",function(event){return _this.onMouseUp(event)})}}clearInterval(timer)},100)}_createClass$1(Zoom,[{key:"onMouseDown",value:function onMouseDown(event){if(this.currentScale===1){return false}this.moveX=event.clientX;this.moveY=event.clientY}},{key:"onMouseUp",value:function onMouseUp(event){var currentPosition=this.currentPosition;if(this.currentScale===1){return false}currentPosition.left=currentPosition.left-(event.clientX-this.moveX);currentPosition.top=currentPosition.top-(event.clientY-this.moveY);this.doScale()}},{key:"onTouchstart",value:function onTouchstart(event){if(this.currentScale===1){return false}if(this.jSPlugin.use3DZoom||this.currentScale===1){return false}var verifyStatus=this.jSPlugin.beforeMobileZoomVerify();if(!verifyStatus){return false}if(!this.inited){var info=this.jSPlugin.jSPlugin._JSPlayM4_GetFrameInfo(0);this.videoWidth=info.width;this.videoHeight=info.height;this.currentPosition.left=0;this.currentPosition.top=0;if(this.isFullScreen){this.currentPosition.right=info.height;this.currentPosition.bottom=info.width}else{this.currentPosition.right=info.width;this.currentPosition.bottom=info.height}this.inited=true}var touches=event.touches;var events=touches[0];if(events){var point={clientX:0,clientY:0};if(this.isFullScreen){point.clientX=events.clientY;point.clientY=this.videoHeight-events.clientX}else{point.clientX=events.clientX;point.clientY=events.clientY}this.point1=point}}},{key:"onTouchend",value:function onTouchend(event){var that=this;var currentPosition=this.currentPosition;if(this.currentScale===1){return false}var touches=event.changedTouches;var events=touches[0];if(this.isFullScreen){currentPosition.top=currentPosition.top-(events.clientY-this.point1.clientX);currentPosition.left=currentPosition.left-(this.videoHeight-events.clientX-this.point1.clientY)}else{currentPosition.left=currentPosition.left-(events.clientX-that.point1.clientX);currentPosition.top=currentPosition.top-(events.clientY-that.point1.clientY)}that.doScale()}},{key:"renderDot",value:function renderDot(){var currentScale=this.currentScale;if(document.getElementById("".concat(this.jSPlugin.id,"-scale-value"))){document.getElementById("".concat(this.jSPlugin.id,"-scale-value")).innerHTML="".concat(currentScale,".0X")}if(document.getElementById("".concat(this.jSPlugin.id,"-line-dot"))){document.getElementById("".concat(this.jSPlugin.id,"-line-dot")).style.height="".concat((currentScale-1)/7*100,"%")}if(document.getElementById("".concat(this.jSPlugin.id,"-scale-body-line-dot"))){document.getElementById("".concat(this.jSPlugin.id,"-scale-body-line-dot")).style.bottom="calc(".concat((currentScale-1)/7*100,"% - 3px)")}}},{key:"getTopMostElement",value:function getTopMostElement(elm1,elm2,elm3){var rect1=elm1?elm1.getBoundingClientRect():null;var rect2=elm2?elm2.getBoundingClientRect():null;var rect3=elm3?elm3.getBoundingClientRect():null;if(!rect1&&!rect2&&!rect3){return null}if(!rect1){return rect2.top<rect3.top?elm2:elm3}if(!rect2){return rect1.top<rect3.top?elm1:elm3}if(!rect3){return rect1.top<rect2.top?elm1:elm2}var tops=[rect1.top,rect2.top,rect3.top];var maxTop=Math.max.apply(Math,tops);if(rect1.top===maxTop){return elm1}else if(rect2.top===maxTop){return elm2}else{return elm3}}},{key:"handleFullscreen",value:function handleFullscreen(flag,width,height){this.isFullScreen=flag;this.clientRect={width:width,height:height}}},{key:"startZoom",value:function startZoom(){var info=this.jSPlugin.jSPlugin._JSPlayM4_GetFrameInfo(0);this.videoWidth=info.width||this.jSPlugin.width;this.videoHeight=info.height||this.jSPlugin.height;this.currentPosition.left=0;this.currentPosition.top=0;if(this.isFullScreen){this.currentPosition.right=info.height;this.currentPosition.bottom=info.width;this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(this.videoWidth,0,0,this.videoHeight,false)}else{this.currentPosition.right=info.width;this.currentPosition.bottom=info.height;this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight,false)}this.currentScale=1;if(document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"))){document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display="block"}try{this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight,false);this.jSPlugin.jSPlugin.bEZoom=true;if(this.jSPlugin.eventEmitter){this.jSPlugin.eventEmitter.emit("startZoom",{eventType:"startZoom",code:0,target:this,msg:"开启电子放大"})}}catch(error){console.log(error);if(this.jSPlugin.eventEmitter){this.jSPlugin.eventEmitter.emit("startZoom",{eventType:"startZoom",code:-1,target:this,msg:error||"开启电子放大失败"})}}this.renderDot();this.enableZoom=true}},{key:"stopZoom",value:function stopZoom(){this.currentScale=1;try{this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight,false);if(this.jSPlugin.eventEmitter){this.jSPlugin.eventEmitter.emit("stopZoom",{eventType:"stopZoom",code:0,target:this,msg:"关闭电子放大"})}}catch(error){console.log(error);if(this.jSPlugin.eventEmitter){this.jSPlugin.eventEmitter.emit("stopZoom",{eventType:"stopZoom",code:-1,target:this,msg:error||"关闭电子放大失败"})}}if(document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"))){document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display="none"}this.renderDot();this.enableZoom=false}},{key:"doScale",value:function doScale(){var currentPosition=this.currentPosition,currentScale=this.currentScale;if(this.isFullScreen){currentPosition.left=currentPosition.left+.5*(currentPosition.right-currentPosition.left)-.5*(this.videoWidth/(currentScale*2));if(currentPosition.left<0){currentPosition.left=0}else if(currentPosition.left>this.videoWidth*4-this.videoWidth/(currentScale*2)){currentPosition.left=this.videoWidth*4-this.videoWidth/(currentScale*2)}currentPosition.right=currentPosition.left+this.videoWidth/(currentScale*2);currentPosition.top=currentPosition.top+.5*(currentPosition.bottom-currentPosition.top)-.5*(this.videoHeight/(currentScale*2));if(currentPosition.top<0){currentPosition.top=0}else if(currentPosition.top>this.videoHeight*4-this.videoHeight/(currentScale*2)){currentPosition.top=this.videoHeight*4-this.videoHeight/(currentScale*2)}currentPosition.bottom=currentPosition.top+this.videoHeight/(currentScale*2)}else{currentPosition.left=currentPosition.left+currentPosition.xPercent*(currentPosition.right-currentPosition.left)-.5*(this.videoWidth/currentScale);if(currentPosition.left<0){currentPosition.left=0}else if(currentPosition.left>this.videoWidth-this.videoWidth/currentScale){currentPosition.left=this.videoWidth-this.videoWidth/currentScale}currentPosition.right=currentPosition.left+this.videoWidth/currentScale;currentPosition.top=currentPosition.top+currentPosition.yPercent*(currentPosition.bottom-currentPosition.top)-.5*(this.videoHeight/currentScale);if(currentPosition.top<0){currentPosition.top=0}else if(currentPosition.top>this.videoHeight-this.videoHeight/currentScale){currentPosition.top=this.videoHeight-this.videoHeight/currentScale}currentPosition.bottom=currentPosition.top+this.videoHeight/currentScale}currentPosition.left=parseInt(currentPosition.left,10);currentPosition.right=parseInt(currentPosition.right,10);currentPosition.top=parseInt(currentPosition.top,10);currentPosition.bottom=parseInt(currentPosition.bottom,10);try{if(this.isFullScreen){this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(currentPosition.top,currentPosition.bottom,currentPosition.left,currentPosition.right,currentScale!=1,true)}else{if(currentPosition.left<currentPosition.right&&currentPosition.top<currentPosition.bottom&&currentPosition.bottom<=this.videoHeight&&currentPosition.right<=this.videoWidth){this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(currentPosition.left,currentPosition.right,currentPosition.top,currentPosition.bottom,currentScale!=1)}}}catch(error){console.log(error)}this.renderDot()}},{key:"addScale",value:function addScale(){var scale=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var currentScale=this.currentScale,currentPosition=this.currentPosition;if(currentScale>=8){console.log("达到最大倍率了");if(this.jSPlugin.Message){this.jSPlugin.Message["default"]("已经放大到最大倍数8.0X",document.getElementById("".concat(this.jSPlugin.id)))}return false}this.currentScale=this.currentScale+scale;if(this.currentScale>8){console.log("超出最大倍率");if(this.jSPlugin.Message){this.jSPlugin.Message["default"]("超出最大倍率8.0X",document.getElementById("".concat(this.jSPlugin.id)))}return false}currentPosition.xPercent=.5;currentPosition.yPercent=.5;this.doScale()}},{key:"subScale",value:function subScale(){var scale=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var currentScale=this.currentScale,currentPosition=this.currentPosition;if(currentScale<=1){console.log("达到最小倍率了");if(this.jSPlugin.Message){this.jSPlugin.Message["default"]("已经缩小到最小倍数1.0X",document.getElementById("".concat(this.jSPlugin.id)))}return false}if(currentScale<=1){console.log("达到最小倍率了");return false}this.currentScale=this.currentScale-scale;if(this.currentScale<1){console.log("超出最小倍率");if(this.jSPlugin.Message){this.jSPlugin.Message["default"]("超出最小倍率1.0X",document.getElementById("".concat(this.jSPlugin.id)))}return false}currentPosition.xPercent=.5;currentPosition.yPercent=.5;this.doScale()}}]);return Zoom}();var FetchData=function FetchData(url){var method=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"GET";var params=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var callback=arguments.length>3?arguments[3]:undefined;var errFun=arguments.length>4?arguments[4]:undefined;var headerOptions=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{};var headers={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"};var paramsStr="";headers=Object.assign(headers,headerOptions);var myHeaders=new Headers;Object.keys(headers).map(function(item){myHeaders.append(item,headers[item])});headers=myHeaders;Object.keys(Object.assign({},params)).forEach(function(item){var value=params[item];if(typeof params[item]==="string"){value=params[item].replace("%","%25")}if(typeof params[item]==="undefined"){return}paramsStr+="&".concat(item,"=").concat(encodeURIComponent(value))});if(paramsStr.length>0){paramsStr=["GET","PUT","DELETE"].indexOf(method.toUpperCase())!==-1?"?".concat(paramsStr.slice(1)):paramsStr.slice(1)}var fetchUrl=url+(["GET","PUT","DELETE"].indexOf(method.toUpperCase())!==-1?paramsStr:"");var requestObj={headers:headers,method:method};if(method==="POST"){requestObj.body=paramsStr}if(method==="POST"&&headerOptions&&headerOptions["Content-Type"]==="application/json"){requestObj.body=JSON.stringify(params)}if(method==="GET"){if(fetchUrl.indexOf("?")===-1){fetchUrl+="?_r=".concat(Math.random())}else{fetchUrl+="&_r=".concat(Math.random())}}fetch(fetchUrl,requestObj).then(function(response){var contentType=response.headers.get("content-type");if(contentType&&contentType.indexOf("application/json")!==-1){return response.json()}else{return response.text()}}).then(function(data){callback&&callback(data)})["catch"](function(err){errFun&&errFun(err)})};var hdIcon=function hdIcon(id,clsPrefix,color,playerWidth,MEDIAWIDTH,hd){return'\n<svg  id="'.concat(id,'-hdSelect-icon" class="theme-icon-item-icon ').concat(clsPrefix,"-btn\" data-type='hd' style=\"display: ").concat(["hd","0"].includes(hd.level)?"flex":"none",'"  fill="').concat(color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(playerWidth>MEDIAWIDTH?48:32,'" height="').concat(playerWidth>MEDIAWIDTH?48:32,'" viewBox="-6 -6 32 32">\n    <path d="M17.4,16.5H3.1c-0.8,0-1.4-0.6-1.4-1.4V5.4c0-0.9,0.7-1.6,1.6-1.6h14.1c0.8,0,1.4,0.6,1.4,1.4v9.8 C18.8,15.9,18.2,16.5,17.4,16.5z M3.3,5C3.1,5,2.9,5.2,2.9,5.4v9.7c0,0.2,0.1,0.3,0.3,0.3h14.3c0.2,0,0.3-0.1,0.3-0.3V5.3 c0-0.2-0.1-0.3-0.3-0.3H3.3z" />\n    <path d="M13.3,13.6h-1.6c-0.4,0-0.7-0.3-0.7-0.7V7.4c0-0.4,0.3-0.7,0.7-0.7h1.6c1.2,0,2.2,1,2.2,2.2v2.4 C15.6,12.6,14.6,13.6,13.3,13.6z M12.2,12.5h1.1c0.6,0,1.1-0.5,1.1-1.1V9c0-0.6-0.5-1.1-1.1-1.1h-1.1V12.5z" />\n    <path d="M5.5,13.6c-0.3,0-0.6-0.2-0.6-0.6V7.3C5,7,5.2,6.8,5.5,6.8S6.1,7,6.1,7.3v5.7C6.1,13.4,5.8,13.6,5.5,13.6z" />\n    <path d="M9.2,13.6c-0.3,0-0.6-0.2-0.6-0.6V7.3c0-0.3,0.2-0.6,0.6-0.6S9.8,7,9.8,7.3v5.7C9.8,13.4,9.5,13.6,9.2,13.6z" />\n    <rect x="5.6" y="9.6" width="3.6" height="1.1" />\n</svg>\n')};var sdIcon=function sdIcon(id,clsPrefix,color,playerWidth,MEDIAWIDTH,hd){return'\n<svg id="'.concat(id,'-sdSelect-icon" class="theme-icon-item-icon ').concat(clsPrefix,"-btn\" data-type='sd' style=\"display: ").concat(["sd","1"].includes(hd.level)?"flex":"none",'"  fill="').concat(color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(playerWidth>MEDIAWIDTH?48:32,'" height="').concat(playerWidth>MEDIAWIDTH?48:32,'" viewBox="-6 -8 40 44">\n    <path d="M24.1,23.8h-20c-1.1,0-1.9-0.9-1.9-1.9V8.4c0-1.2,1-2.2,2.1-2.2h19.7c1.1,0,1.9,0.9,1.9,1.9v13.8\n        C26,23,25.1,23.8,24.1,23.8z M4.3,7.7C4,7.7,3.7,8,3.7,8.4v13.5c0,0.2,0.2,0.4,0.4,0.4h20c0.2,0,0.4-0.2,0.4-0.4V8.2\n        c0-0.2-0.2-0.4-0.4-0.4H4.3z"/>\n    <path d="M18.4,19.8h-2.2c-0.5,0-0.9-0.4-0.9-0.9v-7.8c0-0.5,0.4-0.9,0.9-0.9h2.2c1.7,0,3.1,1.4,3.1,3.1v3.3\n    C21.5,18.4,20.1,19.8,18.4,19.8z M16.7,18.3h1.6c0.9,0,1.6-0.7,1.6-1.6v-3.3c0-0.9-0.7-1.6-1.6-1.6h-1.6V18.3z"/>\n    <path d="M10.5,19.8c1.2,0,2.1-0.3,2.7-0.9c0.6-0.6,0.9-1.3,0.9-2.1c0-0.8-0.3-1.4-0.9-1.8c-0.4-0.2-1.1-0.5-2.2-0.8\n        l0,0l-1-0.2c-0.4-0.1-0.8-0.2-1-0.4c-0.4-0.2-0.6-0.5-0.6-0.9c0-0.4,0.1-0.6,0.4-0.9s0.7-0.3,1.3-0.3c0.8,0,1.4,0.2,1.8,0.6\n        c0.2,0.3,0.3,0.6,0.4,0.9l0,0h1.4c0-0.6-0.2-1.1-0.5-1.6c-0.6-0.8-1.6-1.2-2.9-1.2c-1,0-1.8,0.3-2.4,0.8c-0.6,0.5-0.9,1.2-0.9,2\n        c0,0.7,0.3,1.3,1,1.7c0.4,0.2,0.9,0.4,1.7,0.6l0,0l1.2,0.3c0.6,0.2,1.1,0.3,1.3,0.4c0.3,0.2,0.5,0.5,0.5,0.9c0,0.5-0.2,0.9-0.6,1.1\n        s-0.9,0.4-1.5,0.4c-0.9,0-1.6-0.2-2-0.7c-0.2-0.3-0.3-0.6-0.4-1.1l0,0H6.8c0,0.9,0.3,1.6,0.9,2.2C8.2,19.5,9.2,19.8,10.5,19.8z"/>\n    <defs>\n    <filter id="Adobe_OpacityMaskFilter" filterUnits="userSpaceOnUse" x="15.2" y="10.3" width="6.2" height="9.5">\n        <feColorMatrix  type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"/>\n    </filter>\n    </defs>\n    <mask maskUnits="userSpaceOnUse" x="15.2" y="10.3" width="6.2" height="9.5" id="mask-2_2_">\n    <g class="st2">\n        <path id="path-1_2_" class="st3" d="M24.1,23.1h-20c-0.6,0-1.2-0.5-1.2-1.2V8.2C2.9,7.5,3.5,7,4.1,7h19.7c0.8,0,1.4,0.6,1.4,1.4\n        v13.5C25.2,22.6,24.7,23.1,24.1,23.1z"/>\n    </g>\n    </mask>\n    <defs>\n    <filter id="Adobe_OpacityMaskFilter_1_" filterUnits="userSpaceOnUse" x="6.8" y="10.3" width="7.3" height="9.5">\n        <feColorMatrix  type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"/>\n    </filter>\n    </defs>\n    <mask maskUnits="userSpaceOnUse" x="6.8" y="10.3" width="7.3" height="9.5" id="mask-2_3_">\n    <g class="st5">\n        <path id="path-1_3_" class="st3" d="M24.1,23.1h-20c-0.6,0-1.2-0.5-1.2-1.2V8.2C2.9,7.5,3.5,7,4.1,7h19.7c0.8,0,1.4,0.6,1.4,1.4\n        v13.5C25.2,22.6,24.7,23.1,24.1,23.1z"/>\n    </g>\n    </mask>\n</svg>\n')};var VIDEO_LEVEL2=[{name:"高清",level:"0",streamType:1,icon:hdIcon},{name:"标清",level:"1",streamType:1,icon:sdIcon}];var VIDEO_LEVEL=[{name:"高清",level:"hd",streamType:1,icon:hdIcon},{name:"标清",level:"sd",streamType:2,icon:sdIcon}];var templateDetailApi=function templateDetailApi(jSPlugin,id,successCallback,errorCallback){var success=function success(result){console.log(result);if(result.meta){successCallback(result)}};var errorFun=function errorFun(err){console.log(err);errorCallback(err)};var url="".concat(jSPlugin.env.domain,"/api/service/media/template/getDetail?accessToken=").concat(jSPlugin.accessToken,"&id=").concat(id);fetch(url,{method:"GET"}).then(function(response){return response.json()}).then(function(data){console.log("get theme data",data);success(data)})["catch"](function(error){errorFun(error)})};var postDevicePtzMirror=function postDevicePtzMirror(domain,accessToken,deviceSerial,channelNo,command){return new Promise(function(resolve,reject){request("".concat(domain,"/api/lapp/device/ptz/mirror"),"POST",{accessToken:accessToken,deviceSerial:deviceSerial,channelNo:channelNo,command:command},"",resolve)})};var getDeviceSupportQuality=function getDeviceSupportQuality(domain,accessToken,deviceSerial,channelNo){var url="".concat(domain,"/api/service/device/capacity/video/quality?accessToken=").concat(accessToken,"&deviceSerial=").concat(deviceSerial,"&channelNo=").concat(channelNo);return fetch(url,{method:"GET"}).then(function(response){return response.json()}).then(function(res){if(res.meta&&res.meta.code===200){if(res.data&&res.data.length>0){var result=res.data.find(function(item){return item.streamTypeIn===2});if(result){return VIDEO_LEVEL}}}return VIDEO_LEVEL2})["catch"](function(){return VIDEO_LEVEL2})};var styleToString$3=function styleToString(obj){var styleString="";Object.keys(obj).map(function(item,index){styleString+="".concat(item,":").concat(obj[item]).concat(index<Object.keys(obj).length-1?";":"")});return styleString};var MEDIAWIDTH$1=500;var Theme=function(){function Theme(jSPlugin){var _this=this;_classCallCheck$1(this,Theme);this.jSPlugin=jSPlugin;this.isNeedRenderHeader=false;this.isNeedRenderFooter=false;this.autoFocus=0;this.autoFocusTimer=null;this.recordTimer=null;this.nextRate=1;this.showHD=false;this.themeInited=false;this.decoderState={state:{isEditing:false,play:false,pauseDate:null,sound:false,recordvideo:false,recordCount:"00:00",talk:false,zoom:false,pantile:false,hd:{},hdList:[],speed:false,expend:false,webExpend:false,cloudRec:matchEzopenUrl(jSPlugin.url).type==="cloud.rec",rec:matchEzopenUrl(jSPlugin.url).type==="rec",type:matchEzopenUrl(jSPlugin.url).type}};this.allowZoom=!this.jSPlugin.use3DZoom;this.zoomDisable=false;this.pluginStatus=new Status(this,this.jSPlugin.params.id);this.inited=false;this.isMobile=isMobile();if(typeof jSPlugin.isMobile!=="undefined"){this.isMobile=jSPlugin.isMobile}this.pauseTime=null;this.themeData=emptyData.data;this.deviceQ;if(this.jSPlugin.themeId){switch(this.jSPlugin.themeId){case"pcLive":case"pcRec":case"mobileLive":case"mobileRec":case"security":case"voice":case"simple":case"miniRec":var ezuikitTemplateDetail=_.find(officeTemplateList,function(item){return item.themeId===_this.jSPlugin.themeId});if(ezuikitTemplateDetail){this.themeData=ezuikitTemplateDetail}this.initThemeData();break;case"themeData":this.themeData=this.jSPlugin.params.themeData;this.initThemeData();break;default:this.fetchThemeData(this.jSPlugin.themeId);break}}if(!this.jSPlugin.Talk){this.jSPlugin.Talk=new Talk(this.jSPlugin)}addCss("".concat(this.jSPlugin.staticPath,"/speed/speed.css"));addCss("".concat(this.jSPlugin.staticPath,"/css/theme.css"))}_createClass$1(Theme,[{key:"fetchThemeData",value:function fetchThemeData(themeId){var _this2=this;var successCallback=function successCallback(data){if(data.meta.code==0&&data.data){_this2.themeData=data.data;if(data.data.header){_this2.themeData.header=data.data.header;_this2.themeData.header.btnList=_this2.themeData.header.btnList.sort(function(a,b){return a.btnKey.split("-")[3]-b.btnKey.split("-")[3]})}if(data.data.footer){_this2.themeData.footer=data.data.footer;_this2.themeData.footer.btnList=_this2.themeData.footer.btnList.sort(function(a,b){return a.btnKey.split("-")[3]-b.btnKey.split("-")[3]})}_this2.initThemeData();_this2.renderThemeData()}};var errorCallback=function errorCallback(){_this2.renderThemeData()};templateDetailApi(this.jSPlugin,themeId,successCallback,errorCallback)}},{key:"changeTheme",value:function changeTheme(options){var _this3=this;if(typeof options==="string"){this.jSPlugin.themeId=options;switch(this.jSPlugin.themeId){case"pcLive":case"pcRec":case"mobileLive":case"mobileRec":case"security":case"voice":case"simple":case"miniRec":var ezuikitTemplateDetail=_.find(officeTemplateList,function(item){return item.themeId===_this3.jSPlugin.themeId});if(ezuikitTemplateDetail){this.themeData=ezuikitTemplateDetail}this.initThemeData();break;default:this.fetchThemeData(options);break}}else if(_typeof(options)==="object"){this.themeData=options;this.initThemeData();if(this.decoderState.state.isEditing){this.editStart()}}if(this.jSPlugin&&this.jSPlugin.handleThemeChange){this.jSPlugin.handleThemeChange(options)}}},{key:"renderThemeData",value:function renderThemeData(){var _this4=this;var _this$themeData=this.themeData,header=_this$themeData.header,footer=_this$themeData.footer;if(this.isNeedRenderHeader&&header){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=header.backgroundColor.replace("-diy","");document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=header.color.replace("-diy","");header.btnList.map(function(item,index){if(item.isrender){_this4.setDecoderState(_defineProperty({},item.iconId,_this4.decoderState.state[item.iconId]))}})}if(this.isNeedRenderFooter&&footer){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=footer.backgroundColor.replace("-diy","");document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=footer.color.replace("-diy","");if(this.jSPlugin.params.extraBtn){footer.btnList=[].concat(_toConsumableArray(footer.btnList),_toConsumableArray(this.jSPlugin.params.extraBtn))}footer.btnList.map(function(item,index){if(item.isrender){_this4.setDecoderState(_defineProperty({},item.iconId,_this4.decoderState.state[item.iconId]))}if(item.iconId==="play"&&item.defaultActive&&!_this4.themeInited){var checkTimer=setInterval(function(){if(window.EZUIKit[_this4.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer);_this4.jSPlugin.play();_this4.themeInited=true}},50)}});if(this.themeData.autoFocus>0){this.autoFocus=parseInt(this.themeData.autoFocus);this.startAutoFocus();document.getElementById("".concat(this.jSPlugin.id,"-wrap")).addEventListener("click",function(){if(document.getElementById("".concat(_this4.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(_this4.jSPlugin.id,"-audioControls")).style.opacity=1;document.getElementById("".concat(_this4.jSPlugin.id,"-audioControls")).style.pointerEvents="all"}_this4.startAutoFocus()})}this.setDecoderState({cloudRec:matchEzopenUrl(this.jSPlugin.url).type==="cloud.rec",rec:matchEzopenUrl(this.jSPlugin.url).type==="rec",type:matchEzopenUrl(this.jSPlugin.url).type})}else{if(!this.themeInited){var _checkTimer=setInterval(function(){if(window.EZUIKit[_this4.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(_checkTimer);_this4.jSPlugin.play();_this4.themeInited=true}},50)}}var isNeedZoom=_.findIndex(this.themeData.footer.btnList,function(v){return v.iconId==="zoom"&&v.isrender>0})>=0;if(isNeedZoom){if(this.isMobile&&!this.jSPlugin.use3DZoom){this.jSPlugin.beforeMobileZoomVerify=function(){var play=_this4.decoderState.state.play;if(!play){return false}else{return true}}}this.jSPlugin.Zoom=new Zoom(this.jSPlugin)}var checkTimer=setInterval(function(){if(window.EZUIKit[_this4.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer);_this4.jSPlugin.reSize(_this4.jSPlugin.params.width,_this4.jSPlugin.params.height)}},50)}},{key:"setDecoderState",value:function setDecoderState(options){var _this5=this;var _this$themeData2=this.themeData,header=_this$themeData2.header,footer=_this$themeData2.footer;Object.keys(options).map(function(item,index){var color="#FFFFFF";var activeColor="#FFFFFF";var _index=header.btnList.findIndex(function(i){return i.iconId===item});if(_index===-1){color=footer.color.replace("-diy","");activeColor=footer.activeColor.replace("-diy","")}else{color=header.color.replace("-diy","");activeColor=footer.activeColor.replace("-diy","")}switch(item){case"play":if(options[item]){if(document.getElementById("".concat(_this5.jSPlugin.id,"-play"))){document.getElementById("".concat(_this5.jSPlugin.id,"-play-content")).children[0].children[0].style="display:inline-block";document.getElementById("".concat(_this5.jSPlugin.id,"-play-content")).children[0].children[1].style="display:none";document.getElementById("".concat(_this5.jSPlugin.id,"-play")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-play-content")).childNodes[0].children[0].style.fill=options[item]?activeColor:color}}else{if(document.getElementById("".concat(_this5.jSPlugin.id,"-play"))){document.getElementById("".concat(_this5.jSPlugin.id,"-play-content")).children[0].children[1].style="display:inline-block";document.getElementById("".concat(_this5.jSPlugin.id,"-play-content")).children[0].children[0].style="display:none";document.getElementById("".concat(_this5.jSPlugin.id,"-play")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-play-content")).childNodes[0].children[1].style.fill=options[item]?activeColor:color}}break;case"sound":if(document.getElementById("".concat(_this5.jSPlugin.id,"-sound"))){if(options[item]){document.getElementById("".concat(_this5.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:inline-block";document.getElementById("".concat(_this5.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:none";document.getElementById("".concat(_this5.jSPlugin.id,"-sound")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-sound-content")).childNodes[0].children[1].style.fill=options[item]?activeColor:color}else{document.getElementById("".concat(_this5.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:inline-block";document.getElementById("".concat(_this5.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:none";document.getElementById("".concat(_this5.jSPlugin.id,"-sound")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-sound-content")).childNodes[0].children[0].style.fill=options[item]?activeColor:color}}break;case"recordvideo":if(document.getElementById("".concat(_this5.jSPlugin.id,"-recordvideo"))){document.getElementById("".concat(_this5.jSPlugin.id,"-recordvideo")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-recordvideo-content")).childNodes[0].style.fill=options[item]?activeColor:color;if(options[item]){_this5.countTime("add",0)}else{_this5.countTime("destroy",0)}}break;case"talk":if(document.getElementById("".concat(_this5.jSPlugin.id,"-talk"))){document.getElementById("".concat(_this5.jSPlugin.id,"-talk")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-talk-content")).childNodes[1].style.fill=options[item]?activeColor:color}break;case"zoom":if(document.getElementById("".concat(_this5.jSPlugin.id,"-zoom"))){document.getElementById("".concat(_this5.jSPlugin.id,"-zoom")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-zoom-content")).childNodes[1].style.fill=options[item]?activeColor:color}break;case"pantile":if(document.getElementById("".concat(_this5.jSPlugin.id,"-pantile"))){document.getElementById("".concat(_this5.jSPlugin.id,"-pantile")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-pantile-content")).childNodes[0].style.fill=options[item]?activeColor:color}break;case"webExpend":if(options[item]){if(document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend"))){document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend-content")).children[0].children[1].style="display:inline-block";document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend-content")).children[0].children[0].style="display:none"}if(document.getElementById("".concat(_this5.jSPlugin.id,"-expend"))){document.getElementById("".concat(_this5.jSPlugin.id,"-expend")).className="disabled"}}else{if(document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend"))){document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend-content")).children[0].children[0].style="display:inline-block";document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend-content")).children[0].children[1].style="display:none"}if(document.getElementById("".concat(_this5.jSPlugin.id,"-expend"))){document.getElementById("".concat(_this5.jSPlugin.id,"-expend")).className=""}}if(document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend"))){document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend-content")).childNodes[0].childNodes[0].style.fill=options[item]?activeColor:color;document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend-content")).childNodes[0].childNodes[1].style.fill=options[item]?activeColor:color}break;case"capturePicture":if(document.getElementById("".concat(_this5.jSPlugin.id,"-capturePicture"))){document.getElementById("".concat(_this5.jSPlugin.id,"-capturePicture")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-capturePicture-content")).childNodes[0].style.fill=options[item]?activeColor:color}break;case"expend":if(options[item]){if(document.getElementById("".concat(_this5.jSPlugin.id,"-expend"))){document.getElementById("".concat(_this5.jSPlugin.id,"-expend-content")).children[0].children[1].style="display:inline-block";document.getElementById("".concat(_this5.jSPlugin.id,"-expend-content")).children[0].children[0].style="display:none"}if(document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend"))){document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend")).className="disabled"}}else{if(document.getElementById("".concat(_this5.jSPlugin.id,"-expend"))){document.getElementById("".concat(_this5.jSPlugin.id,"-expend-content")).children[0].children[0].style="display:inline-block";document.getElementById("".concat(_this5.jSPlugin.id,"-expend-content")).children[0].children[1].style="display:none"}if(document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend"))){document.getElementById("".concat(_this5.jSPlugin.id,"-webExpend")).className=""}}if(document.getElementById("".concat(_this5.jSPlugin.id,"-expend"))){document.getElementById("".concat(_this5.jSPlugin.id,"-expend")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-expend-content")).childNodes[0].childNodes[0].style.fill=options[item]?activeColor:color;document.getElementById("".concat(_this5.jSPlugin.id,"-expend-content")).childNodes[0].childNodes[1].style.fill=options[item]?activeColor:color}break;case"hd":break;case"speed":if(document.getElementById("".concat(_this5.jSPlugin.id,"-speed"))){document.getElementById("".concat(_this5.jSPlugin.id,"-speed-content")).children[1].children[0].style.color=options[item]?activeColor:color;document.getElementById("".concat(_this5.jSPlugin.id,"-speed-content")).children[1].children[0].style.borderColor=options[item]?activeColor:color}if(document.getElementById("".concat(_this5.jSPlugin.id,"-select-mask"))){if(_this5.isMobile&&options[item]){document.getElementById("".concat(_this5.jSPlugin.id,"-select-mask")).style.display="block"}else{document.getElementById("".concat(_this5.jSPlugin.id,"-select-mask")).style.display="none"}}break;case"cloudRec":if(document.getElementById("".concat(_this5.jSPlugin.id,"-cloudRec"))){console.log("document.getElementById(`${this.jSPlugin.id}-cloudRec-content`)",document.getElementById("".concat(_this5.jSPlugin.id,"-cloudRec")));document.getElementById("".concat(_this5.jSPlugin.id,"-cloudRec")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-cloudRec-content")).children[0].children[0].style.fill=options[item]?activeColor:color}if(document.getElementById("".concat(_this5.jSPlugin.id,"-rec"))){document.getElementById("".concat(_this5.jSPlugin.id,"-rec")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-rec-content")).children[0].children[0].style.fill=options[item]?color:activeColor}break;case"rec":if(document.getElementById("".concat(_this5.jSPlugin.id,"-cloudRec"))){document.getElementById("".concat(_this5.jSPlugin.id,"-cloudRec")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-cloudRec-content")).children[0].children[0].style.fill=options[item]?color:activeColor}if(document.getElementById("".concat(_this5.jSPlugin.id,"-rec"))){document.getElementById("".concat(_this5.jSPlugin.id,"-rec")).className=options[item]?"active":"";document.getElementById("".concat(_this5.jSPlugin.id,"-rec-content")).children[0].children[0].style.fill=options[item]?activeColor:color}break}_this5.decoderState.state=Object.assign(_this5.decoderState.state,options)})}},{key:"startAutoFocus",value:function startAutoFocus(){var _this6=this;var autoFocus=this.autoFocus;if(this.autoFocusTimer){clearTimeout(this.autoFocusTimer)}this.autoFocusTimer=setTimeout(function(){if(document.getElementById("".concat(_this6.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(_this6.jSPlugin.id,"-audioControls")).style.opacity=0;document.getElementById("".concat(_this6.jSPlugin.id,"-audioControls")).style.pointerEvents="none"}},autoFocus*1e3)}},{key:"stopAutoFocus",value:function stopAutoFocus(){if(document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1;document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"}if(this.autoFocusTimer){clearTimeout(this.autoFocusTimer)}}},{key:"hideFooter",value:function hideFooter(){if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.display="none"}}},{key:"showFooter",value:function showFooter(){if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.display="block"}}},{key:"toString",value:function toString(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"renderFooter",value:function renderFooter(id,part){var _this7=this;var objItem=this.matchBtn(id);var objDOM=document.createElement("div");objDOM.className="theme-icon-item";objDOM.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-content" title="').concat(objItem.title,'" style="height:').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'px;display: flex;align-items: center;position:relative;">')).concat(objItem.domString,"</div>")+"</span>";objDOM.onclick=function(e){if(_this7.decoderState.state.isEditing){return false}objItem.onclick(e)};if(objItem.onmouseenter){objDOM.onmouseenter=function(e){if(_this7.decoderState.state.isEditing){return false}objItem.onmouseenter(e)}}if(objItem.onmouseleave){objDOM.onmouseleave=function(e){if(_this7.decoderState.state.isEditing){return false}objItem.onmouseleave(e)}}var toLeft=document.createElement("span");toLeft.className="icon-move left";toLeft.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-left" title="左移" style="position: absolute;top: calc(50% - 10px);left: -4px;"><svg fill="#ffffff" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="24" viewBox="0 0 10 15" style="background:#00000080;"><path d="M7.4,10V5.3c0-0.3-0.3-0.6-0.6-0.6c-0.1,0-0.3,0.1-0.4,0.2L3.7,7.4c-0.2,0.2-0.3,0.6,0,0.8 c0,0,0,0,0.1,0.1l2.7,2.2c0.2,0.2,0.6,0.2,0.8-0.1C7.3,10.3,7.4,10.2,7.4,10z"></path></svg></span>');toLeft.onclick=function(){_this7.editIcon(objItem.id,"left","footer")};objDOM.appendChild(toLeft);var toRight=document.createElement("span");toRight.className="icon-move right";toRight.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-right" class="ezuikit-theme-icon" title="右移" style="position: absolute;top: calc(50% - 10px);left: calc(100% - 8px);"><svg fill="#ffffff" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="24" viewBox="0 0 10 15" style="background:#00000080"><path d="M3.4,5.2v4.7c0,0.3,0.3,0.6,0.6,0.6c0.1,0,0.3-0.1,0.4-0.2l2.7-2.5c0.2-0.2,0.3-0.6,0-0.8 c0,0,0,0-0.1-0.1L4.4,4.8C4.1,4.6,3.8,4.6,3.6,4.9C3.5,5,3.4,5.1,3.4,5.2z"></path></svg></span>');toRight.onclick=function(){_this7.editIcon(objItem.id,"right","footer")};objDOM.appendChild(toRight);var toClose=document.createElement("span");toClose.className="icon-move close";toClose.innerHTML='<span id="'.concat(objItem.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: -10px;right: -10px;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15">'+'<circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" />'+'<rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" />'+'<line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" />'+'<line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" />'+"</svg>"+"</span>";toClose.onclick=function(){_this7.editIcon(objItem.id,"delete","footer")};objDOM.appendChild(toClose);if(part==="left"){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).childNodes[0].appendChild(objDOM)}else{document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).childNodes[1].appendChild(objDOM)}}},{key:"editIcon",value:function editIcon(id,type,area){console.log("编辑组件",id,type,area);var newThemeData=this.themeData;console.log("themeData",this.themeData);var btnList=this.themeData[area].btnList;var _index=_.findIndex(btnList,function(item){return item.iconId===id});var tmp=btnList[_index];switch(type){case"delete":if(id==="rec"){if(_.findIndex(btnList,function(item){return item.iconId==="cloudRec"&&item.isrender==1})===-1){if(this.jSPlugin.Message){this.jSPlugin.Message["default"]("必须选中一种存储介质")}return false}}else if(id==="cloudRec"){if(_.findIndex(btnList,function(item){return item.iconId==="rec"&&item.isrender==1})===-1){if(this.jSPlugin.Message){this.jSPlugin.Message["default"]("必须选中一种存储介质")}return false}}btnList[_index].isrender=0;break;case"right":var nextRightBtnIndex=-1;for(var i=_index+1;i<btnList.length;i++){if(btnList[i].part===btnList[_index].part&&btnList[i].isrender==1){nextRightBtnIndex=i;break}}if(nextRightBtnIndex!==-1){btnList[_index]=btnList[nextRightBtnIndex];btnList[nextRightBtnIndex]=tmp}break;case"left":var nextLeftBtnIndex=-1;for(var _i=_index-1;_i>=0;_i--){if(btnList[_i].part===btnList[_index].part&&btnList[_i].isrender==1){nextLeftBtnIndex=_i;break}}if(nextLeftBtnIndex!==-1){btnList[_index]=btnList[nextLeftBtnIndex];btnList[nextLeftBtnIndex]=tmp}break}newThemeData[area].btnList=btnList;this.changeTheme(newThemeData)}},{key:"renderHeader",value:function renderHeader(id,part){var _this8=this;var objItem=this.matchBtn(id);var objDOM=document.createElement("div");objDOM.className="theme-icon-item";objDOM.style="max-width:50%;";objDOM.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'" style="position:relative;";>')+'<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-content" title="').concat(objItem.title,'" style="display:inline-block;height:').concat(this.width>MEDIAWIDTH$1?48:32,'px;">')).concat(objItem.domString,"</span>")+'<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-remove" title="移除" style="position: absolute;top: -6px;left: 38px;display: none;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15">'+'<circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" />'+'<rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" />'+'<line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" />'+'<line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" />'+"</svg>"+"</span>"+"</span>";objDOM.onclick=function(e){if(_this8.decoderState.state.isEditing){return false}objItem.onclick(e)};var toClose=document.createElement("span");toClose.className="icon-move close";toClose.innerHTML='<span id="'.concat(objItem.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: -6px;right: -6px;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15">'+'<circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" />'+'<rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" />'+'<line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" />'+'<line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" />'+"</svg>"+"</span>";toClose.onclick=function(){_this8.editIcon(objItem.id,"delete","header")};objDOM.appendChild(toClose);if(part==="left"){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[0].appendChild(objDOM)}else{document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[1].appendChild(objDOM)}}},{key:"countTime",value:function countTime(type){var start=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var that=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var recordDOM=document.createElement("div");recordDOM.id=this.jSPlugin.id+"time-area";recordDOM.className="time-area";recordDOM.innerHTML='<span class="dot"></span><span class="value">00:00</span>';if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(recordDOM)}}if(this.countTimer){clearInterval(this.countTimer)}if(type==="add"){var i=start;document.getElementById(that.jSPlugin.id+"time-area").style.display="flex";this.countTimer=setInterval(function(){++i;document.getElementById(that.jSPlugin.id+"time-area").children[1].innerHTML=formatSeconds(i)},1e3)}else if(type==="destroy"){if(this.countTimer){clearInterval(this.countTimer)}this.countTimer=undefined;if(document.getElementById(that.jSPlugin.id+"time-area")){document.getElementById(that.jSPlugin.id+"time-area").children[1].innerHTML="00:00";document.getElementById(that.jSPlugin.id+"time-area").style.display="none"}}function formatSeconds(value){var theTime=parseInt(value);var middle=0;var hour=0;var secondV="00";var minV="00";var hourV="00";if(theTime>59){middle=parseInt(theTime/60);theTime=parseInt(theTime%60);if(middle>59){hour=parseInt(middle/60);middle=parseInt(middle%60)}}secondV=parseInt(theTime)>9?parseInt(theTime):"0"+parseInt(theTime);minV=parseInt(middle)>9?parseInt(middle):"0"+parseInt(middle);hourV=parseInt(hour)>9?parseInt(hour):"0"+parseInt(hour);if(hour>0){return hourV+":"+minV+":"+secondV}else if(middle>0){return minV+":"+secondV}else{return"00:"+secondV}}}},{key:"setDisabled",value:function setDisabled(status){var sound=this.decoderState.state.sound;var DisabledStyle=status?"cursor: not-allowed; fill: gray; color: gray":"cursor: default";document.getElementById(sound?"".concat(this.jSPlugin.id,"-sound-icon"):"".concat(this.jSPlugin.id,"-nosound-icon"))!=null&&document.getElementById(sound?"".concat(this.jSPlugin.id,"-sound-icon"):"".concat(this.jSPlugin.id,"-nosound-icon")).setAttribute("style",status?"cursor: not-allowed;fill: gray":"cursor: default");document.getElementById("".concat(this.jSPlugin.id,"-recordvideo-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-recordvideo-icon")).setAttribute("style",DisabledStyle);document.getElementById("".concat(this.jSPlugin.id,"-capturePicture-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-capturePicture-icon")).setAttribute("style",DisabledStyle);document.getElementById("".concat(this.jSPlugin.id,"-talk-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-talk-icon")).setAttribute("style",DisabledStyle);if(!this.allowZoom){document.getElementById("".concat(this.jSPlugin.id,"-zoom-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-zoom-icon")).setAttribute("style",DisabledStyle)}document.getElementById("".concat(this.jSPlugin.id,"-pantile-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-pantile-icon")).setAttribute("style",DisabledStyle);var qualityBtns=document.getElementsByClassName("".concat(this.jSPlugin.id,"-select-quality-btn"));if(qualityBtns.length){for(var i=0;i<qualityBtns.length;i++){if(status){qualityBtns[i].style.cursor="not-allowed";qualityBtns[i].style.fill="gray";qualityBtns[i].style.color="gray"}else{qualityBtns[i].style.cursor="default";qualityBtns[i].style.fill="";qualityBtns[i].style.color=""}}}document.getElementById("".concat(this.jSPlugin.id,"-speed-text"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).setAttribute("style",document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).getAttribute("style")+";"+(status?"cursor: not-allowed;color: gray;border-color: gray;":"cursor: default;color: #ffffff;border-color: #ffffff;"));this.zoomDisable=this.jSPlugin.use3DZoom&&status}},{key:"matchBtn",value:function matchBtn(btnId){var _this9=this;var _this$themeData3=this.themeData,header=_this$themeData3.header,footer=_this$themeData3.footer;var btnItem={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function onclick(){},onmoveleft:function onmoveleft(){},onmoveright:function onmoveright(){},onremove:function onremove(){}};var _index=header.btnList.findIndex(function(item){return item.iconId===btnId});if(_index===-1){btnItem.color=footer.color;btnItem.backgroundColor=footer.backgroundColor;btnItem.activeColor=footer.activeColor}else{btnItem.color=header.color;btnItem.backgroundColor=header.backgroundColor;btnItem.activeColor=header.activeColor}switch(btnId){case"play":btnItem.title="播放/结束播放";btnItem.id=btnId;btnItem.domString='<div style="height: 100%">'+'<svg id="'.concat(this.jSPlugin.id+"-play-icon",'" class="theme-icon-item-icon" style="display:none" width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'"  fill="').concat(btnItem.color,'" viewBox="-6 -6 32 32">\n            <path id="Stroke-1" class="st1" d="M10.5,1.7c-4.9,0-8.8,4-8.8,8.8s4,8.8,8.8,8.8s8.8-4,8.8-8.8S15.4,1.7,10.5,1.7z M10.5,2.7\n              c4.3,0,7.8,3.5,7.8,7.8s-3.5,7.8-7.8,7.8s-7.8-3.5-7.8-7.8S6.2,2.7,10.5,2.7z"/>\n            <path class="st2" d="M8.7,8C9,8,9.3,8.3,9.3,8.6v3.8C9.3,12.7,9,13,8.7,13C8.3,13,8,12.7,8,12.4V8.6C8,8.3,8.3,8,8.7,8z"/>\n            <path id="Rectangle-Copy-10" class="st2" d="M12.8,8c0.3,0,0.6,0.3,0.6,0.6v3.8c0,0.3-0.3,0.6-0.6,0.6c-0.3,0-0.6-0.3-0.6-0.6V8.6\n              C12.2,8.3,12.5,8,12.8,8z"/>\n          </svg>')+'<svg id="'.concat(this.jSPlugin.id+"-stop-icon",'" class="theme-icon-item-icon" fill="').concat(btnItem.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M13,9.8L10.1,8C9.9,7.9,9.7,7.9,9.5,7.9c-0.6,0-1,0.4-1,1v3.7c0,0.2,0.1,0.4,0.2,0.5c0.3,0.5,0.9,0.6,1.4,0.3 l2.9-1.8c0.1-0.1,0.2-0.2,0.3-0.3C13.6,10.7,13.4,10.1,13,9.8z" />'+'<path d="M10.5,1.9c-4.9,0-8.8,4-8.8,8.8c0,4.9,4,8.8,8.8,8.8s8.8-4,8.8-8.8C19.4,5.8,15.4,1.9,10.5,1.9z M10.5,18.5 c-4.3,0-7.8-3.5-7.8-7.8s3.5-7.8,7.8-7.8c4.3,0,7.8,3.5,7.8,7.8S14.9,18.5,10.5,18.5z" />'+"</svg>"+"</div>";btnItem.onclick=function(){var _this9$decoderState$s=_this9.decoderState.state,play=_this9$decoderState$s.play,isEditing=_this9$decoderState$s.isEditing,rec=_this9$decoderState$s.rec,cloudRec=_this9$decoderState$s.cloudRec,recordvideo=_this9$decoderState$s.recordvideo,pantile=_this9$decoderState$s.pantile;if(isEditing){return false}if(Array.isArray(window.recTimer)){window.recTimer.map(function(item){clearInterval(item)})}if(play){if(rec||cloudRec){if(_this9.Rec){_this9.Rec.unSyncTimeLine()}_this9.jSPlugin.pause().then(function(){_this9.setDecoderState({play:!play});_this9.setDisabled(play)})}else{_this9.jSPlugin.stop().then(function(){_this9.setDecoderState({play:!play});_this9.setDisabled(play)});_this9.jSPlugin.Zoom.stopZoom();_this9.jSPlugin.close3DZoom()}if(recordvideo){_this9.setDecoderState({recordvideo:false})}}else{if(rec||cloudRec){if(_this9.Rec){_this9.Rec.syncTimeLine()}_this9.jSPlugin.resume().then(function(){_this9.setDecoderState({play:!play});_this9.setDisabled(play)})}else{_this9.jSPlugin.play().then(function(){_this9.setDecoderState({play:!play});_this9.setDisabled(play)})}if(_this9.jSPlugin.use3DZoom){_this9.resetMobileZoomStatus()}}if(_this9.jSPlugin.use3DZoom){_this9.setDecoderState({zoom:false});_this9.allowZoom=false}else{_this9.allowZoom=rec||cloudRec}if(pantile&&_this9.Ptz){_this9.Ptz.hide();_this9.setDecoderState({pantile:false})}if(document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect"))){document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect")).style.display="none"}};break;case"sound":btnItem.title="声音";btnItem.id=btnId;btnItem.domString='<span style="height: 100%">'+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-nosound-icon" style="display:none" fill="').concat(btnItem.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="-6 -6 32 32">\n            <path d="M8.5,4.2c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8C5,13.2,5,12.9,5.1,12.7 c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3L9.2,5L5.9,7.8 C5.6,7.9,5.3,7.9,5.1,7.7C5,7.5,5,7.3,5.1,7.1L5.2,7L8.5,4.2z"/>\n            <path d="M5.5,6.9C5.8,6.9,6,7.1,6,7.4c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2C3.4,7.9,3.3,8,3.2,8.2l0,0.1v4 c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,12.5,6,12.7,6,13c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4 c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>\n            <path d="M17.4,7.9c0.2-0.2,0.5-0.2,0.7,0c0.2,0.2,0.2,0.4,0.1,0.6l-0.1,0.1l-3.8,3.8c-0.2,0.2-0.5,0.2-0.7,0 c-0.2-0.2-0.2-0.4-0.1-0.6l0.1-0.1L17.4,7.9z"/>\n            <path d="M13.7,7.9c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.8,3.8c0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1-0.1 l-3.7-3.8C13.5,8.4,13.5,8.1,13.7,7.9z"/>\n            </svg>')+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-sound-icon" style="display:inline-block" width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" fill="').concat(btnItem.color,'" viewBox="-6 -6 32 32">\n              <path d="M13.2,7.1c0.1-0.2,0.5-0.3,0.7-0.2c1.1,0.7,1.9,2.2,1.9,3.7c0,1.6-0.7,3-1.9,3.7\n                c-0.2,0.1-0.5,0.1-0.7-0.2c-0.1-0.2-0.1-0.5,0.2-0.7c0.8-0.5,1.4-1.6,1.4-2.9c0-1.3-0.6-2.4-1.4-2.9C13.1,7.6,13,7.3,13.2,7.1z"/>\n              <path d="M15.7,4.5c0.2-0.2,0.5-0.2,0.7-0.1C18,5.8,19,8.2,19,10.7c0,2.5-1,4.8-2.7,6.3\n                c-0.2,0.2-0.5,0.2-0.7-0.1c-0.2-0.2-0.2-0.5,0.1-0.7c1.4-1.2,2.3-3.3,2.3-5.5c0-2.2-0.9-4.3-2.3-5.5C15.5,5,15.5,4.7,15.7,4.5z"/>\n              <path id="Stroke-5" class="st1" d="M8.5,4.7c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8\n                C5,13.7,5,13.4,5.1,13.2c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3l-0.1,0\n                L5.9,8.3C5.6,8.4,5.3,8.4,5.1,8.2C5,8,5,7.7,5.1,7.6l0.1-0.1L8.5,4.7z"/>\n              <path  d="M5.5,7.4C5.8,7.4,6,7.6,6,7.9c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.2,0-0.3,0.1-0.3,0.3l0,0.1v4\n                c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,13,6,13.2,6,13.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4\n                c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>\n            </svg>')+"</span>";btnItem.onclick=function(){var _this9$decoderState$s2=_this9.decoderState.state,play=_this9$decoderState$s2.play,sound=_this9$decoderState$s2.sound,talk=_this9$decoderState$s2.talk,pantile=_this9$decoderState$s2.pantile;if(play&&!talk){if(sound){_this9.jSPlugin.closeSound();_this9.setDecoderState({sound:false})}else{_this9.jSPlugin.openSound();_this9.setDecoderState({sound:true})}if(pantile&&_this9.Ptz){_this9.Ptz.hide();_this9.setDecoderState({pantile:false})}}};break;case"recordvideo":btnItem.title="录屏";btnItem.id=btnId;btnItem.domString='<svg id="'.concat(this.jSPlugin.id,'-recordvideo-icon" class="theme-icon-item-icon" fill="').concat(btnItem.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M11.6,5.3H4.7c-1.4,0-2.5,1.1-2.5,2.5v5.9c0,1.4,1.1,2.5,2.5,2.5h6.9c1.4,0,2.5-1.1,2.5-2.5V7.7 C14.1,6.4,13,5.3,11.6,5.3z M4.7,6.3h6.9c0.8,0,1.5,0.7,1.5,1.5v5.9c0,0.8-0.7,1.5-1.5,1.5H4.7c-0.8,0-1.5-0.7-1.5-1.5V7.7 C3.3,6.9,3.9,6.3,4.7,6.3z" />'+'<path d="M16.6,6.7c0.9-0.8,2.3-0.1,2.4,1l0,0.1v5.7c0,1.2-1.3,1.9-2.3,1.2l-0.1-0.1L13.3,12 c-0.2-0.2-0.2-0.5-0.1-0.7c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.7c0.3,0.2,0.7,0.1,0.8-0.3l0-0.1V7.8c0-0.4-0.4-0.6-0.7-0.4 l-0.1,0l-3.3,2.7c-0.2,0.2-0.5,0.1-0.7-0.1c-0.2-0.2-0.1-0.5,0-0.6l0.1-0.1L16.6,6.7z" />'+"</svg>";btnItem.onclick=function(){var _this9$decoderState$s3=_this9.decoderState.state,play=_this9$decoderState$s3.play,recordvideo=_this9$decoderState$s3.recordvideo;if(play){if(recordvideo){_this9.jSPlugin.stopSave();_this9.setDecoderState({recordvideo:false})}else{_this9.jSPlugin.startSave("".concat((new Date).getTime()));_this9.setDecoderState({recordvideo:true})}}};break;case"capturePicture":btnItem.title="截图";btnItem.id=btnId;btnItem.domString='<svg id="'.concat(this.jSPlugin.id,'-capturePicture-icon" class="theme-icon-item-icon" fill="').concat(btnItem.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.8,7.7c-2,0-3.7,1.6-3.7,3.7S8.7,15,10.8,15c2,0,3.7-1.6,3.7-3.7S12.8,7.7,10.8,7.7z M10.8,8.7c1.5,0,2.7,1.2,2.7,2.7S12.2,14,10.8,14c-1.5,0-2.7-1.2-2.7-2.7S9.3,8.7,10.8,8.7z" />'+'<path d="M8.6,3.7l-0.1,0C8,3.7,7.7,4,7.5,4.3l-1,1.7l-1.3,0C4,6.1,3.1,7,3.1,8.2v7.1 c0,1.2,0.9,2.1,2.1,2.1h11.1c1.2,0,2.1-0.9,2.1-2.1V8.2l0-0.1c-0.1-1.1-1-1.9-2.1-1.9l-1.3,0l-1.1-1.8c-0.2-0.4-0.7-0.6-1.1-0.6H8.6 z M8.6,4.7h4.2c0.1,0,0.2,0.1,0.3,0.1l1.2,2c0.1,0.2,0.3,0.2,0.4,0.2h1.6c0.6,0,1.1,0.5,1.1,1.1v7.1c0,0.6-0.5,1.1-1.1,1.1H5.1 c-0.6,0-1.1-0.5-1.1-1.1V8.2c0-0.6,0.5-1.1,1.1-1.1h1.6c0.2,0,0.3-0.1,0.4-0.2l1.2-2C8.4,4.7,8.5,4.7,8.6,4.7z" />'+"</svg>";btnItem.onclick=function(){var play=_this9.decoderState.state.play;if(play){_this9.jSPlugin.capturePicture("".concat((new Date).getTime()))}else{console.log("视频未播放，无法截图")}};break;case"talk":btnItem.title="对讲";btnItem.id=btnId;btnItem.domString="<div></div>"+'<svg id="'.concat(this.jSPlugin.id,'-talk-icon" class="theme-icon-item-icon" fill="').concat(btnItem.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.1,2.7C8.5,2.7,7.2,4,7.2,5.6v5.2c0,1.6,1.3,2.9,2.9,2.9l0.2,0c1.5-0.1,2.7-1.4,2.7-2.9V5.6\tC13,4,11.7,2.7,10.1,2.7z M10.1,3.7c1.1,0,1.9,0.9,1.9,1.9v5.2c0,1-0.8,1.8-1.8,1.9l-0.1,0c-1,0-1.9-0.9-1.9-1.9V5.6 C8.2,4.5,9,3.7,10.1,3.7z" />'+'<path d="M15.1,8.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,3-2.5,5.5-5.5,5.5c-3,0-5.4-2.3-5.5-5.3l0-0.2V9 c0-0.3,0.2-0.5,0.5-0.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,2.5,2,4.5,4.5,4.5c2.4,0,4.4-1.9,4.5-4.3l0-0.2V9 C14.6,8.7,14.8,8.5,15.1,8.5z" />'+'<path d="M13.5,17.7c0.3,0,0.5,0.2,0.5,0.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-7c-0.3,0-0.5-0.2-0.5-0.5 c0-0.2,0.2-0.4,0.4-0.5l0.1,0H13.5z" />'+'<path d="M10.1,15.2c0.2,0,0.4,0.2,0.5,0.4l0,0.1v2.5c0,0.3-0.2,0.5-0.5,0.5c-0.2,0-0.4-0.2-0.5-0.4l0-0.1 v-2.5C9.6,15.4,9.8,15.2,10.1,15.2z" />'+"</svg>";btnItem.onclick=function(){var _this9$decoderState$s4=_this9.decoderState.state,talk=_this9$decoderState$s4.talk,sound=_this9$decoderState$s4.sound,play=_this9$decoderState$s4.play,pantile=_this9$decoderState$s4.pantile;if(play){if(talk){console.log("结束对讲");_this9.setDecoderState({talk:false});_this9.jSPlugin.Talk.stopTalk();var isReOpenSound=_.findIndex(_this9.themeData.footer.btnList,function(v){return v.iconId==="sound"&&v.isrender===1&&v.defaultActive===1})>-1;if(_this9.themeData&&isReOpenSound){_this9.jSPlugin.openSound();_this9.setDecoderState({sound:true})}}else{console.log("开始对讲");_this9.setDecoderState({talk:true});_this9.jSPlugin.Talk.startTalk(function(isGb){if(sound&&!isGb){_this9.jSPlugin.closeSound();_this9.setDecoderState({sound:false})}})}if(pantile&&_this9.Ptz){_this9.Ptz.hide();_this9.setDecoderState({pantile:false})}}};break;case"zoom":btnItem.title=this.jSPlugin.use3DZoom?"3D定位":"电子放大";btnItem.id=btnId;btnItem.domString="<div></div>"+'<svg id="'.concat(this.jSPlugin.id,'-zoom-icon" class="theme-icon-item-icon" fill="').concat(btnItem.color,'" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n          width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="5 -6 5 32" style="enable-background:new 0 0 20 20.1;" xml:space="preserve">\n              <path class="st1" d="M8.8,2.6c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2s-6.2-2.8-6.2-6.2S5.3,2.6,8.8,2.6z M8.8,3.9\n                c-2.8,0-5,2.2-5,5s2.2,5,5,5s5-2.2,5-5S11.5,3.9,8.8,3.9z M12.7,12.7l3.9,3.9"/>\n              <path class="st2" d="M11.2,9.5h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S11.6,9.5,11.2,9.5z"/>\n              <path class="st2" d="M8.7,12c-0.3,0-0.6-0.3-0.6-0.6v-5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v5C9.3,11.8,9.1,12,8.7,12z"/>\n              <path class="st2" d="M16.9,17.6c-0.1,0-0.3-0.1-0.4-0.2l-3.9-3.9c-0.2-0.2-0.2-0.6,0-0.8s0.6-0.2,0.8,0l3.9,3.9\n                c0.2,0.2,0.2,0.6,0,0.8C17.2,17.5,17,17.6,16.9,17.6z"/>\n          </svg>');btnItem.onclick=function(){var _this9$decoderState$s5=_this9.decoderState.state,zoom=_this9$decoderState$s5.zoom,play=_this9$decoderState$s5.play,rec=_this9$decoderState$s5.rec,cloudRec=_this9$decoderState$s5.cloudRec;_this9$decoderState$s5.pantile;if(_this9.jSPlugin.use3DZoom){if(!play){return false}if(zoom){_this9.jSPlugin.close3DZoom()}else{_this9.jSPlugin.enable3DZoom()}}else{if(_this9.zoomDisable||!rec&&!cloudRec&&!play){return false}if(zoom){console.log("结束电子放大");_this9.jSPlugin.Zoom.stopZoom()}else{console.log("开始电子放大");_this9.jSPlugin.Zoom.startZoom()}}_this9.setDecoderState({zoom:!zoom})};break;case"pantile":btnItem.title="云台控制";btnItem.id=btnId;btnItem.domString='<svg id="'.concat(this.jSPlugin.id,'-pantile-icon" class="theme-icon-item-icon" fill="').concat(btnItem.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.2,7.8c1.6,0,2.9,1.3,2.9,2.9s-1.3,2.9-2.9,2.9s-2.9-1.3-2.9-2.9S8.5,7.8,10.2,7.8z M10.2,8.8c-1.1,0-1.9,0.9-1.9,1.9s0.9,1.9,1.9,1.9s1.9-0.9,1.9-1.9S11.2,8.8,10.2,8.8z" />'+'<path d="M8.8,3.5c0.7-0.6,1.8-0.6,2.5-0.1l0.1,0.1l1.4,1.1c0.2,0.2,0.3,0.5,0.1,0.7 c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1,0l-1.4-1.1C10.5,3.9,10,3.9,9.6,4.2L9.4,4.3L8,5.4C7.8,5.5,7.5,5.5,7.3,5.3c-0.2-0.2-0.1-0.5,0-0.6 l0.1-0.1L8.8,3.5z" />'+'<path d="M2.5,12.3c-0.6-0.7-0.6-1.8-0.1-2.5l0.1-0.1l1.1-1.4c0.2-0.2,0.5-0.3,0.7-0.1 c0.2,0.2,0.2,0.4,0.1,0.6l0,0.1l-1.1,1.4C3,10.6,3,11.1,3.2,11.5l0.1,0.1L4.4,13c0.2,0.2,0.1,0.5-0.1,0.7c-0.2,0.2-0.5,0.1-0.6,0 l-0.1-0.1L2.5,12.3z" />'+'<path d="M17.7,12.3c0.6-0.7,0.6-1.8,0.1-2.5l-0.1-0.1l-1.1-1.4c-0.2-0.2-0.5-0.3-0.7-0.1 c-0.2,0.2-0.2,0.4-0.1,0.6l0,0.1l1.1,1.4c0.3,0.4,0.3,0.9,0.1,1.3l-0.1,0.1L15.8,13c-0.2,0.2-0.1,0.5,0.1,0.7c0.2,0.2,0.5,0.1,0.6,0 l0.1-0.1L17.7,12.3z" />'+'<path d="M8.8,18.2c0.7,0.6,1.8,0.6,2.5,0.1l0.1-0.1l1.4-1.1c0.2-0.2,0.3-0.5,0.1-0.7 c-0.2-0.2-0.4-0.2-0.6-0.1l-0.1,0l-1.4,1.1c-0.4,0.3-0.9,0.3-1.3,0.1l-0.1-0.1L8,16.3c-0.2-0.2-0.5-0.1-0.7,0.1 c-0.2,0.2-0.1,0.5,0,0.6l0.1,0.1L8.8,18.2z" />'+"</svg>";btnItem.onclick=function(){var _this9$decoderState$s6=_this9.decoderState.state,play=_this9$decoderState$s6.play,pantile=_this9$decoderState$s6.pantile,expend=_this9$decoderState$s6.expend;if(play){if(!pantile){console.log("显示云台");if(_this9.isMobile&&!expend){console.log("移动端，非全屏状态不展示云台");return false}_this9.Ptz.show();_this9.setDecoderState({pantile:true})}else{console.log("隐藏云台");_this9.Ptz.hide();_this9.setDecoderState({pantile:false})}}};break;case"expend":btnItem.title="全局全屏";btnItem.id=btnId;btnItem.domString='<span><svg id="'.concat(this.jSPlugin.id,'-expend-icon" class="theme-icon-item-icon" fill="').concat(btnItem.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M3.4,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-1.2,1-2.3,2.2-2.3h1.8c0.3,0,0.5,0.2,0.5,0.5S7.2,4.1,6.9,4.1H5.2 c-0.7,0-1.2,0.6-1.2,1.3v1.8C3.9,7.4,3.7,7.6,3.4,7.6z" />'+'<path d="M6.9,18.1H5.2c-1.2,0-2.2-1-2.2-2.2v-1.8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8c0,0.7,0.6,1.2,1.2,1.2 h1.8c0.3,0,0.5,0.2,0.5,0.5S7.2,18.1,6.9,18.1z" />'+'<path d="M15.7,18.1h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8c0.7,0,1.2-0.6,1.2-1.2v-1.8 c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8C17.9,17.1,16.9,18.1,15.7,18.1z" />'+'<path d="M17.4,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-0.7-0.6-1.3-1.2-1.3h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8 c1.2,0,2.2,1,2.2,2.3v1.8C17.9,7.4,17.7,7.6,17.4,7.6z" />'+"</svg>"+'<svg class="theme-icon-item-icon" style="display:none" width="'.concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" fill="').concat(btnItem.color,'" viewBox="-6 -6 32 32">\n            <path class="st1" d="M5.7,8.1H3.9c-0.3,0-0.6-0.2-0.6-0.6S3.6,7,3.9,7h1.9c0.7,0,1.3-0.6,1.3-1.3V3.8c0-0.3,0.2-0.6,0.6-0.6\n              s0.6,0.2,0.6,0.6v1.9C8.2,7,7.1,8.1,5.7,8.1z"/>\n            <path class="st1" d="M7.6,17.7c-0.3,0-0.6-0.2-0.6-0.6v-1.9c0-0.7-0.6-1.3-1.3-1.3H3.9c-0.3,0-0.6-0.2-0.6-0.6s0.2-0.6,0.6-0.6h1.9\n              c1.3,0,2.4,1.1,2.4,2.4v1.9C8.2,17.5,7.9,17.7,7.6,17.7z"/>\n            <path class="st1" d="M13.4,17.7c-0.3,0-0.6-0.2-0.6-0.6v-1.9c0-1.3,1.1-2.4,2.4-2.4h1.9c0.3,0,0.6,0.2,0.6,0.6S17.5,14,17.2,14\n              h-1.9c-0.7,0-1.3,0.6-1.3,1.3v1.9C14,17.5,13.8,17.7,13.4,17.7z"/>\n            <path class="st1" d="M17.2,8.1h-1.9c-1.3,0-2.4-1.1-2.4-2.4V3.8c0-0.3,0.2-0.6,0.6-0.6S14,3.5,14,3.8v1.9C14,6.4,14.6,7,15.3,7h1.9\n              c0.3,0,0.6,0.2,0.6,0.6S17.5,8.1,17.2,8.1z"/>\n          </svg>\n          </span>');btnItem.onclick=function(){var _this9$decoderState$s7=_this9.decoderState.state;_this9$decoderState$s7.webExpend;var expend=_this9$decoderState$s7.expend,zoom=_this9$decoderState$s7.zoom,pantile=_this9$decoderState$s7.pantile;if(!expend){console.log("执行全局全屏");if(_this9.isMobile){var heightIntercept=parseInt(getComputedStyle(document.getElementById("".concat(_this9.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(_this9.jSPlugin.id)).height,10);requestMobileFullScreen(document.getElementById("".concat(_this9.jSPlugin.id,"-wrap")));var width=document.documentElement.clientWidth;var height=document.documentElement.clientHeight;document.getElementById("".concat(_this9.jSPlugin.id)).style["backface-visibility"]="hidden";_this9.jSPlugin.jSPlugin.JS_Resize(height,width-heightIntercept,true);_this9.jSPlugin.fullScreenWidth=height;_this9.jSPlugin.fullScreenHeight=width-heightIntercept;var currentScale=_this9.jSPlugin.Zoom.currentScale;if(_this9.jSPlugin.Zoom&&_this9.jSPlugin.Zoom.handleFullscreen){_this9.jSPlugin.Zoom.handleFullscreen(!expend,height,width-heightIntercept)}_this9.jSPlugin.Zoom.stopZoom();if(zoom){setTimeout(function(){_this9.jSPlugin.Zoom.startZoom();_this9.jSPlugin.Zoom.currentScale=currentScale;_this9.jSPlugin.Zoom.doScale(currentScale)},200)}}else{var width=window.screen.width;var height=window.screen.height;var that=_this9;var promise=requestFullScreenPromise(document.getElementById("".concat(_this9.jSPlugin.id)));promise.then(function(data){_this9.jSPlugin.jSPlugin.JS_Resize(width,height);_this9.jSPlugin.fullScreenWidth=width;_this9.jSPlugin.fullScreenHeight=height})["catch"](function(err){console.log(err)});_this9.jSPlugin.close3DZoom();["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach(function(item){window.addEventListener(item,function fullscreenchange(e){var isFullScreen=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(isFullScreen){that.jSPlugin.jSPlugin.JS_Resize(width,height);that.jSPlugin.fullScreenWidth=width;that.jSPlugin.fullScreenHeight=height}else{that.jSPlugin.jSPlugin.JS_Resize(that.jSPlugin.width,that.jSPlugin.height)}return isFullScreen})})}}else{if(_this9.isMobile){var heightIntercept=parseInt(getComputedStyle(document.getElementById("".concat(_this9.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(_this9.jSPlugin.id)).height,10);if(document.getElementById("".concat(_this9.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(_this9.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-32px"}if(document.getElementById("".concat(_this9.jSPlugin.id,"-headControl"))){document.getElementById("".concat(_this9.jSPlugin.id,"-headControl")).style.position="relative"}cancelMobileFullScreen(document.getElementById("".concat(_this9.jSPlugin.id,"-wrap")),_this9.jSPlugin.width,_this9.jSPlugin.height+heightIntercept);_this9.jSPlugin.jSPlugin.JS_Resize(_this9.jSPlugin.width,_this9.jSPlugin.height);if(pantile&&_this9.Ptz){_this9.Ptz.hide();_this9.setDecoderState({pantile:false})}_this9.jSPlugin.fullScreenWidth=_this9.jSPlugin.width;_this9.jSPlugin.fullScreenHeight=_this9.jSPlugin.height;var _currentScale=_this9.jSPlugin.Zoom.currentScale;if(_this9.jSPlugin.Zoom&&_this9.jSPlugin.Zoom.handleFullscreen){_this9.jSPlugin.Zoom.handleFullscreen(!expend,_this9.jSPlugin.width,_this9.jSPlugin.height)}_this9.jSPlugin.Zoom.stopZoom();if(zoom){setTimeout(function(){_this9.jSPlugin.Zoom.startZoom();_this9.jSPlugin.Zoom.currentScale=_currentScale;_this9.jSPlugin.Zoom.doScale(_currentScale)},200)}}else{console.log("取消全局全屏");var cancelPromise=cancelFullScreenPromise();cancelPromise.then(function(data){console.log("取消全屏",data,_this9.jSPlugin);_this9.jSPlugin.jSPlugin.JS_Resize(_this9.jSPlugin.width,_this9.jSPlugin.height)})}}_this9.setDecoderState({expend:!expend})};break;case"webExpend":btnItem.title="网页全屏";btnItem.id=btnId;btnItem.domString='<span><svg id="'.concat(this.jSPlugin.id,'-webExpend-icon" class="theme-icon-item-icon" fill="').concat(btnItem.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M3.1,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-1.2,1-2.3,2.2-2.3h1.8c0.3,0,0.5,0.2,0.5,0.5S6.8,4.1,6.6,4.1H4.8 c-0.7,0-1.2,0.6-1.2,1.3v1.8C3.6,7.4,3.3,7.6,3.1,7.6z" />'+'<path d="M15.3,18.1h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8c0.7,0,1.2-0.6,1.2-1.2v-1.8 c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8C17.6,17.1,16.6,18.1,15.3,18.1z" />'+'<circle class="st2" cx="10.2" cy="10.4" r="1.1"/>'+"</svg>"+'<svg class="theme-icon-item-icon" fill="'.concat(btnItem.color,'" style="display:none;" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="-6 -6 32 32">\n          <path class="st1" d="M5.4,8.1H3.5C3.2,8.1,3,7.9,3,7.6s0.2-0.5,0.5-0.5h1.9c0.8,0,1.4-0.6,1.4-1.4V3.8c0-0.3,0.2-0.5,0.5-0.5\n            s0.5,0.2,0.5,0.5v1.9C7.7,7,6.7,8.1,5.4,8.1z"/>\n          <path class="st1" d="M13.1,17.7c-0.3,0-0.5-0.2-0.5-0.5v-1.9c0-1.3,1.1-2.4,2.4-2.4h1.9c0.3,0,0.5,0.2,0.5,0.5s-0.2,0.5-0.5,0.5H15\n            c-0.8,0-1.4,0.6-1.4,1.4v1.9C13.6,17.4,13.4,17.7,13.1,17.7z"/>\n            <circle class="st2" cx="10.2" cy="10.4" r="1.1"/>\n          ')+"</svg></span>";btnItem.onclick=function(){var _this9$decoderState$s8=_this9.decoderState.state,webExpend=_this9$decoderState$s8.webExpend,expend=_this9$decoderState$s8.expend,zoom=_this9$decoderState$s8.zoom;if(expend){console.log("正在全局全屏");return false}if(Array.isArray(window.recTimer)){window.recTimer.map(function(item){clearInterval(item)})}if(!webExpend){console.log("执行网页全屏");var footerDOMHeight=0;var headerDOMHeight=0;var width=window.screen.width;var height=window.screen.height;var that=_this9;var promise=requestFullScreenPromise(document.getElementById("".concat(_this9.jSPlugin.id,"-wrap")));promise.then(function(data){if(document.getElementById("".concat(_this9.jSPlugin.id,"-canvas-container"))){footerDOMHeight=parseInt(window.getComputedStyle(document.getElementById("".concat(_this9.jSPlugin.id,"-canvas-container"))).height,10)}if(document.getElementById("".concat(_this9.jSPlugin.id,"-headControl"))){headerDOMHeight=parseInt(window.getComputedStyle(document.getElementById("".concat(_this9.jSPlugin.id,"-headControl"))).height,10)}_this9.jSPlugin.jSPlugin.JS_Resize(width,height-footerDOMHeight-headerDOMHeight);var fullscreenchange=function fullscreenchange(){var isFullScreen=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(isFullScreen){if(document.getElementById("".concat(that.jSPlugin.id,"-loading-item-0"))){document.getElementById("".concat(that.jSPlugin.id,"-loading-item-0")).style.height=window.screen.height-parseInt(window.getComputedStyle(document.getElementById("".concat(that.jSPlugin.id,"-headControl"))).height,10)+"px"}that.jSPlugin.jSPlugin.JS_Resize(width,height-footerDOMHeight-headerDOMHeight)}else{if(document.getElementById("".concat(that.jSPlugin.id,"-loading-item-0"))){document.getElementById("".concat(that.jSPlugin.id,"-loading-item-0")).style.height=that.jSPlugin.height+parseInt(window.getComputedStyle(document.getElementById("".concat(that.jSPlugin.id,"-headControl"))).height,10)+"px"}that.jSPlugin.jSPlugin.JS_Resize(that.jSPlugin.width,that.jSPlugin.height);if(expend){that.setDecoderState({expend:false});if(zoom&&that.jSPlugin.use3DZoom){that.jSPlugin.enable3DZoom()}}}if(document.getElementById("".concat(that.jSPlugin.id,"-canvas-container"))){footerDOMHeight=parseInt(window.getComputedStyle(document.getElementById("".concat(that.jSPlugin.id,"-canvas-container"))).height,10)}if(document.getElementById("".concat(that.jSPlugin.id,"-headControl"))){headerDOMHeight=parseInt(window.getComputedStyle(document.getElementById("".concat(that.jSPlugin.id,"-headControl"))).height,10)}return isFullScreen};["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach(function(item){window.removeEventListener(item,fullscreenchange);window.addEventListener(item,fullscreenchange)})})["catch"](function(err){console.log(err)})}else{console.log("取消网页全屏");var cancelPromise=cancelFullScreenPromise();cancelPromise.then(function(data){_this9.jSPlugin.jSPlugin.JS_Resize(_this9.jSPlugin.width,_this9.jSPlugin.height)})}if(_this9.jSPlugin.Theme.Rec){setTimeout(function(){_this9.jSPlugin.Theme.Rec.recAutoSize(function(){if(_this9.jSPlugin.Zoom.currentScale>1){var currentScale=_this9.jSPlugin.Zoom.currentScale;_this9.jSPlugin.Zoom.stopZoom();setTimeout(function(){_this9.jSPlugin.Zoom.startZoom();_this9.jSPlugin.Zoom.currentScale=currentScale;_this9.jSPlugin.Zoom.doScale(currentScale)},200)}})},100)}_this9.setDecoderState({webExpend:!webExpend})};break;case"hd":var clsPrefix="".concat(this.jSPlugin.id,"-select-quality");var clsItem="".concat(clsPrefix,"-item");btnItem.title="画面清晰度";btnItem.id=btnId;btnItem.domString='<ul id="'.concat(this.jSPlugin.id,'-hdSelect" class="hd speed-select ').concat(this.isMobile?"mobile":"",'" style="display:none;bottom: calc(constant(safe-area-inset-bottom) + ').concat(this.isMobile?"80px":"50px",") !important;bottom: calc(env(safe-area-inset-bottom) + ").concat(this.isMobile?"80px":"50px",') !important;">\n          \x3c!-- 由接口返回生成 --\x3e  \n        </ul><span id="').concat(this.jSPlugin.id,'-hdSelect-icon-warp">\n           \x3c!-- 由接口返回生成 --\x3e\n          </span>');btnItem.onclick=function(e){var _this9$decoderState$s9=_this9.decoderState.state,hd=_this9$decoderState$s9.hd,expend=_this9$decoderState$s9.expend,recordvideo=_this9$decoderState$s9.recordvideo,play=_this9$decoderState$s9.play,hdList=_this9$decoderState$s9.hdList,zoom=_this9$decoderState$s9.zoom,pantile=_this9$decoderState$s9.pantile;e.stopPropagation();if(play){var id=e.target.id;var type=e.target.getAttribute("data-type");if(id.indexOf(clsPrefix)===0){if(hd.type+""!==type){var targetType=hdList.find(function(item){return item.level+""===type});if(targetType&&(targetType.streamType!==hd.streamType||targetType.level+""!==hd.level+"")){_this9.jSPlugin.changeVideoLevel(targetType);_this9.setDecoderState({hd:targetType});if(zoom){_this9.jSPlugin.Zoom.stopZoom()}var hdIcon=document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect-icon"));var sdIcon=document.getElementById("".concat(_this9.jSPlugin.id,"-sdSelect-icon"));if(hdIcon)hdIcon.style.display=["hd","0"].includes(targetType.level)?"block":"none";if(sdIcon)sdIcon.style.display=["sd","1"].includes(targetType.level)?"block":"none"}}_this9.resetMobileZoomStatus();if(recordvideo){_this9.setDecoderState({recordvideo:false})}}_this9.showHD=!_this9.showHD;if(document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect"))){document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect")).style.display=document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect")).style.display==="none"?"block":"none";if(_this9.isMobile){document.getElementById("".concat(_this9.jSPlugin.id,"-select-hd-mask")).style.display=document.getElementById("".concat(_this9.jSPlugin.id,"-select-hd-mask")).style.display==="none"?"block":"none"}if(_this9.themeData.autoFocus>0){if(document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect")).style.display==="none"){_this9.startAutoFocus()}else{_this9.stopAutoFocus()}}}if(_this9.isMobile&&expend&&_this9.showHD){document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect")).className="hd speed-select mobile expend"}else{document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect")).className=_this9.isMobile?"hd speed-select mobile":"speed-select"}if(_this9.isMobile){if(expend){document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect")).style.bottom="env(safe-area-inset-bottom)";document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect")).style.bottom="constant(safe-area-inset-bottom)"}else{document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect")).style.bottom="calc(constant(safe-area-inset-bottom) + 80px)";document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect")).style.bottom="calc(env(safe-area-inset-bottom) + 80px)"}}if(pantile&&_this9.Ptz){_this9.Ptz.hide();_this9.setDecoderState({pantile:false})}}};getDeviceSupportQuality(this.jSPlugin.env.domain,this.jSPlugin.accessToken,this.jSPlugin.deviceSerial,this.jSPlugin.channelNo).then(function(data){var videoLevel=data;_this9.setDecoderState({hdList:videoLevel});var hd=_this9.jSPlugin.url.indexOf("hd.live")>-1?videoLevel[0]:videoLevel[1];_this9.setDecoderState({hd:hd});var hdSelectListEle=document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect"));var hdSelectWarpEle=document.getElementById("".concat(_this9.jSPlugin.id,"-hdSelect-icon-warp"));if(hdSelectListEle){hdSelectListEle.innerHTML="\n            ".concat(_toConsumableArray(videoLevel).reverse().map(function(item){if(item.name&&item.level!=undefined)return'<li class="selectOption default '.concat(clsItem,'" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;" name="option" data-type="').concat(item.level,'" id="').concat(clsPrefix,"_").concat(item.level,'">').concat(item.name,"</li>")}).join(""),'\n            <li class="selectOption cancel" style="').concat(_this9.isMobile?"":"display:none;",'" name="option" id="').concat(_this9.jSPlugin.id,'-select-speed">取消</li>\n          ')}if(hdSelectWarpEle){if(_typeof(_this9.decoderState.state.hd)==="object"&&typeof _this9.decoderState.state.hd.icon==="function"){hdSelectWarpEle.innerHTML="\n              ".concat(videoLevel.map(function(item){if(item.name&&typeof item.icon==="function"){return item.icon(_this9.jSPlugin.id,clsPrefix,btnItem.color,_this9.jSPlugin.width,MEDIAWIDTH$1,_this9.decoderState.state.hd)}}).join(""),'\n              <span class=\'speed-select-mask\' style="display:none" id="').concat(_this9.jSPlugin.id,'-select-hd-mask"></span>\n            ')}else if(_typeof(_this9.decoderState.state.hd)==="object"&&typeof _this9.decoderState.state.hd.name==="string"){$(hdSelectWarpEle).prepend('<div class="theme-icon-item-icon '.concat(clsPrefix,'-btn" data-type="').concat(_this9.decoderState.state.hd.level,'" style="width: ').concat(_this9.jSPlugin.width>MEDIAWIDTH$1?48:32,'px">').concat(_this9.decoderState.state.hd.name,"</div>"))}}});return btnItem;case"speed":btnItem.title="回放倍速";btnItem.id=btnId;btnItem.domString='<ul id="'.concat(this.jSPlugin.id,'-speedSelect" class="speed speed-select ').concat(this.isMobile?"mobile":"",'" style="display:none;bottom: calc(constant(safe-area-inset-bottom) + ').concat(this.isMobile?"80px":"50px",") !important;bottom: calc(env(safe-area-inset-bottom) + ").concat(this.isMobile?"80px":"50px",') !important;">')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed4">4倍</li>')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed2">2倍</li>')+'<li class="selectOption active" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed1">1倍（正常播放）</li>')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed05">0.5倍</li>')+'<li class="selectOption cancel" style="'.concat(this.isMobile?"":"display:none;",'" name="option" id="').concat(this.jSPlugin.id,'-select-speed">取消</li>')+"</ul>"+'<span>\n          <div style="font-size: 12px;\n          vertical-align: bottom;\n          display: inline-flex;\n          padding: 0px 7px;\n          width: 48px;\n          line-height: 24px;\n          justify-content: center;\n          border: 1px solid '.concat(btnItem.color,';\n          text-align: center;border-radius: 12.5px;"\n          id="').concat(this.jSPlugin.id,'-speed-text"\n          >').concat(this.nextRate===1?"倍速":"".concat(this.nextRate,"倍").replace("3","0.5"),"</div>\n                ")+'<span class=\'speed-select-mask\' style="display:none" id="'.concat(this.jSPlugin.id,'-select-mask"></span>')+"</span>";btnItem.onclick=function(e){var _this9$decoderState$s10=_this9.decoderState.state,speed=_this9$decoderState$s10.speed,expend=_this9$decoderState$s10.expend,play=_this9$decoderState$s10.play;e.stopPropagation();if(!play){return false}if(!speed&&_this9.isMobile){document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect")).className=expend?"speed speed-select mobile expend":"speed speed-select mobile"}if(_this9.isMobile){if(expend){document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect")).style.bottom="constant(safe-area-inset-bottom)";document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect")).style.bottom="env(safe-area-inset-bottom)"}else{document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect")).style.bottom="calc(constant(safe-area-inset-bottom) + 80px)";document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect")).style.bottom="calc(env(safe-area-inset-bottom) + 80px)"}}_this9.nextRate=1;if(e.target.id){switch(e.target.id){case"".concat(_this9.jSPlugin.id,"-select-speed1"):console.log("倍速1");_this9.nextRate=1;_this9.jSPlugin.jSPlugin.JS_Speed(_this9.nextRate);_this9.changeRecSpeed(1);_this9.jSPlugin.speed=1;_this9.setDecoderState({speed:!speed});break;case"".concat(_this9.jSPlugin.id,"-select-speed2"):console.log("倍速2");_this9.nextRate=2;_this9.jSPlugin.jSPlugin.JS_Speed(_this9.nextRate);_this9.changeRecSpeed(2);_this9.jSPlugin.speed=2;_this9.setDecoderState({speed:!speed});break;case"".concat(_this9.jSPlugin.id,"-select-speed4"):console.log("倍速4");_this9.nextRate=4;_this9.jSPlugin.jSPlugin.JS_Speed(_this9.nextRate);_this9.changeRecSpeed(4);_this9.jSPlugin.speed=4;_this9.setDecoderState({speed:!speed});break;case"".concat(_this9.jSPlugin.id,"-select-speed05"):console.log("倍速05");_this9.nextRate=3;_this9.jSPlugin.jSPlugin.JS_Speed(_this9.nextRate);_this9.changeRecSpeed(.5);_this9.jSPlugin.speed=.5;_this9.setDecoderState({speed:!speed});break;default:if(!_this9.isMobile){_this9.setDecoderState({speed:true})}else{_this9.setDecoderState({speed:!speed})}break}}if(_this9.isMobile&&e.target.id==="".concat(_this9.jSPlugin.id,"-speed-text")){document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect")).style.display="block"}else{if(document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect"))){document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect")).style.display=document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect")).style.display==="none"?"block":"none"}}_this9.setDecoderState({speed:!speed});if(_this9.themeData.autoFocus>0){if(document.getElementById("".concat(_this9.jSPlugin.id,"-speedSelect")).style.display==="none"){_this9.startAutoFocus()}else{_this9.stopAutoFocus()}}};break;case"deviceName":btnItem.title="设备名称";btnItem.id=btnId;btnItem.domString="<span>设备名称</span>";btnItem.onclick=function(){};break;case"deviceID":btnItem.title="设备序列号";btnItem.id=btnId;btnItem.domString="<span>设备序列号</span>";btnItem.onclick=function(){};break;case"cloudRec":btnItem.title="云存储回放";btnItem.id=btnId;btnItem.domString='\n        <span>\n          <svg class="theme-icon-item-icon" fill="'.concat(btnItem.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg"  width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="-10 0 40 15">\n\t<path d="M9.5,13.1c-0.3,0-0.5-0.2-0.5-0.5V8.8c0-0.3,0.2-0.5,0.5-0.5S10,8.5,10,8.8v3.8C10,12.8,9.8,13.1,9.5,13.1z"/>\n\t<path d="M7.6,10.6c-0.1,0-0.3-0.1-0.4-0.2C7,10.2,7,9.9,7.3,9.7l1.9-1.7c0.2-0.2,0.5-0.2,0.7,0l1.8,1.7\n\t\tc0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.5,0.2-0.7,0L9.5,9.1l-1.6,1.4C7.8,10.6,7.7,10.6,7.6,10.6z"/>\n\t<path d="M13.2,15.7H5.6c-2.1-0.1-3.8-1.8-3.8-3.9c0-1.8,1.3-3.4,3-3.8c0.4-2.2,2.3-3.9,4.6-3.9c2.3,0,4.2,1.7,4.6,3.8\n\t\tc1.8,0.4,3.1,1.9,3.1,3.8C17.1,13.9,15.4,15.7,13.2,15.7z M5.6,14.7h7.6c1.6,0,2.9-1.3,2.9-2.9c0-1.5-1.1-2.7-2.6-2.9l-0.4,0l0-0.4\n\t\tc-0.2-1.9-1.7-3.3-3.6-3.3C7.5,5.1,6,6.6,5.8,8.5l0,0.4l-0.4,0c-1.4,0.2-2.5,1.4-2.5,2.9C2.8,13.3,4.1,14.6,5.6,14.7z"/>\n          </svg>\n        </span>\n        ');btnItem.onclick=function(){console.log("点击云回放");_this9.setDecoderState({type:"cloud.rec",cloudRec:true,rec:false});_this9.jSPlugin.changePlayUrl({type:"cloud.rec"},function(){var initDate=getQueryString("begin",_this9.jSPlugin.url)||(new Date).Format("yyyyMMdd");_this9.Rec.renderRec("".concat(initDate.slice(0,4),"-").concat(initDate.slice(4,6),"-").concat(initDate.slice(6,8)));var zoom=_this9.decoderState.state.zoom;if(zoom){_this9.setDecoderState({zoom:false});_this9.jSPlugin.Zoom.stopZoom();_this9.jSPlugin.close3DZoom()}},false)};break;case"rec":btnItem.title="本地存储";btnItem.id=btnId;btnItem.domString='\n        <span>\n        <svg class="theme-icon-item-icon" fill='.concat(btnItem.color,' version="1.1" xmlns="http://www.w3.org/2000/svg"  width="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,'" viewBox="0 0 40 15">\n          <path d="M13,16.3H5.5c-1.1,0-2-0.9-2-2V3.8c0-1.1,0.9-2,2-2h5.4c0.5,0,1,0.2,1.4,0.6l2.1,2.1C14.8,4.8,15,5.3,15,5.9\n  v8.4C15,15.4,14.1,16.3,13,16.3z M5.5,2.8c-0.6,0-1,0.4-1,1v10.5c0,0.6,0.4,1,1,1H13c0.6,0,1-0.4,1-1V5.9c0-0.3-0.1-0.5-0.3-0.7\n  L11.6,3c-0.2-0.2-0.4-0.3-0.7-0.3H5.5z"/>\n<path d="M6.3,7.3C6,7.3,5.8,7,5.8,6.8V4.5C5.8,4.2,6,4,6.3,4s0.5,0.2,0.5,0.5v2.2C6.8,7,6.6,7.3,6.3,7.3z"/>\n<path d="M8.5,7.3C8.3,7.3,8,7,8,6.8V4.5C8,4.2,8.3,4,8.5,4S9,4.2,9,4.5v2.2C9,7,8.8,7.3,8.5,7.3z"/>\n<path d="M10.8,7.3c-0.3,0-0.5-0.2-0.5-0.5V4.5c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v2.2C11.3,7,11.1,7.3,10.8,7.3z"\n  />\n        </svg>\n      </span>\n        ');btnItem.onclick=function(){console.log("点击本地回放");_this9.setDecoderState({type:"rec",cloudRec:false,rec:true});_this9.jSPlugin.changePlayUrl({type:"rec"},function(){console.log("---------本地回放");var initDate=getQueryString("begin",_this9.jSPlugin.url)||(new Date).Format("yyyyMMdd");_this9.Rec.renderRec("".concat(initDate.slice(0,4),"-").concat(initDate.slice(4,6),"-").concat(initDate.slice(6,8)));var zoom=_this9.decoderState.state.zoom;if(zoom){_this9.setDecoderState({zoom:false});_this9.jSPlugin.Zoom.stopZoom();_this9.jSPlugin.close3DZoom()}},false)};break}return btnItem}},{key:"changeRecSpeed",value:function changeRecSpeed(speed){var _this10=this;var setLiActive=function setLiActive(index){console.log("setLiActive",index);if(!document.getElementById("".concat(_this10.jSPlugin.id,"-speedSelect"))){return false}document.getElementById("".concat(_this10.jSPlugin.id,"-speedSelect")).childNodes[0].className=document.getElementById("".concat(_this10.jSPlugin.id,"-speedSelect")).childNodes[0].className.replace("active","default");document.getElementById("".concat(_this10.jSPlugin.id,"-speedSelect")).childNodes[1].className=document.getElementById("".concat(_this10.jSPlugin.id,"-speedSelect")).childNodes[1].className.replace("active","default");document.getElementById("".concat(_this10.jSPlugin.id,"-speedSelect")).childNodes[2].className=document.getElementById("".concat(_this10.jSPlugin.id,"-speedSelect")).childNodes[2].className.replace("active","default");document.getElementById("".concat(_this10.jSPlugin.id,"-speedSelect")).childNodes[3].className=document.getElementById("".concat(_this10.jSPlugin.id,"-speedSelect")).childNodes[3].className.replace("active","default");document.getElementById("".concat(_this10.jSPlugin.id,"-speedSelect")).childNodes[index].className=document.getElementById("".concat(_this10.jSPlugin.id,"-speedSelect")).childNodes[index].className.replace("default","active")};var speedText="1";switch(speed){case 1:setLiActive(2);speedText="倍速";break;case 2:setLiActive(1);speedText="".concat(speed,"倍");break;case 4:setLiActive(0);speedText="".concat(speed,"倍");break;case.5:setLiActive(3);speedText="".concat(speed,"倍");break;default:setLiActive(2);speedText="".concat(speed,"倍");break}if(document.getElementById("".concat(this.jSPlugin.id,"-speed-text"))){document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).innerHTML=speedText}}},{key:"initThemeData",value:function initThemeData(){var _this11=this;var _this$themeData4=this.themeData,header=_this$themeData4.header,footer=_this$themeData4.footer;var videoId=this.jSPlugin.id;this.header=defaultTheme.header;this.footer=defaultTheme.footer;this.isNeedRenderHeader=_.findIndex(header.btnList,function(v){return v.isrender>0})>=0&&this.jSPlugin.id!="miniRec";if(this.isMobile){this.isNeedRenderHeader=_.findIndex(header.btnList,function(v){return v.isrender>0&&v.iconId==="deviceID"||v.isrender>0&&v.iconId==="deviceName"})>=0&&this.jSPlugin.id!="miniRec"}this.isNeedRenderFooter=_.findIndex(footer.btnList,function(v){return v.isrender>0})>=0&&this.jSPlugin.id!="miniRec";console.log("miniRec："+this.jSPlugin.themeId);this.isNeedRenderTimeLine=_.findIndex(header.btnList,function(v){return v.iconId==="cloudRec"&&v.isrender===1||v.iconId==="rec"&&v.isrender===1})>=0&&!this.jSPlugin.disabledTimeLine&&this.jSPlugin.id!="miniRec";["date-switch-container-wrap","rec-type-container-wrap","mobile-rec-wrap","mobile-ez-ptz-container"].forEach(function(item,index){if(document.getElementById(item)){document.getElementById(item).parentElement.removeChild(document.getElementById(item))}});if(this.isNeedRenderHeader){if(!document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){var headerContainer=document.createElement("div");headerContainer.setAttribute("id","".concat(this.jSPlugin.id,"-headControl"));headerContainer.setAttribute("class","header-controls");headerContainer.innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' class=\"header-controls-left\" style='display:flex;width:calc(100% - 100px);overflow:hidden;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' class=\"header-controls-right\" style='display:flex;'></div>");var headerStyle={height:this.jSPlugin.width>MEDIAWIDTH$1?"48px":"32px","line-height":this.jSPlugin.width>MEDIAWIDTH$1?"48px":"32px",display:"flex","justify-content":"space-between",top:0,"z-index":1,background:"#000000",color:"#FFFFFF",width:"100%"};headerContainer.style=styleToString$3(headerStyle);document.getElementById("".concat(videoId,"-wrap")).insertBefore(headerContainer,document.getElementById(videoId));var _checkTimer2=setInterval(function(){if(window.EZUIKit[_this11.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(_checkTimer2)}},50)}else{document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;width: calc(100% - 100px);'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' style='display:flex'></div>")}}else{if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))}}if(this.isNeedRenderFooter){if(!document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){var footerContainer=document.createElement("div");footerContainer.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container"));footerContainer.setAttribute("class","ez-iframe-footer-container");var footerStyle={"min-height":this.jSPlugin.width>MEDIAWIDTH$1?"48px":"32px","max-height":this.jSPlugin.width>MEDIAWIDTH$1?"96px":"80px",position:"relative","margin-top":this.jSPlugin.width>MEDIAWIDTH$1?"-48px":"-32px",display:"flex","flex-wrap":"wrap","justify-content":"space-between","z-index":999,top:0,color:"#FFFFFF",width:"100%"};footerContainer.style=styleToString$3(footerStyle);footerContainer.innerHTML='<div id="'.concat(this.jSPlugin.id,'-audioControls" class="footer-controls" style=\'display:flex;height:').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,"px;justify-content: space-between;width:100%;z-index:999;position: relative;'><div id='").concat(this.jSPlugin.id,"-audioControls-left' class=\"footer-controls-left\" style='display:flex;'></div><div id='").concat(this.jSPlugin.id,"-audioControls-right' class=\"footer-controls-right\" style='display:flex'></div></div>");insertAfter(footerContainer,document.getElementById(videoId))}else{if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-".concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,"px");document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='<div id="'.concat(this.jSPlugin.id,'-audioControls"  class="footer-controls" style=\'display:flex;justify-content: space-between;height: ').concat(this.jSPlugin.width>MEDIAWIDTH$1?48:32,"px;width:100%;'><div id='").concat(this.jSPlugin.id,"-audioControls-left' class=\"footer-controls-left\" style='display:flex'></div><div id='").concat(this.jSPlugin.id,"-audioControls-right' class=\"footer-controls-right\" style='display:flex'></div></div>")}}}else{if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))}}if(this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=header.backgroundColor;document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=header.color;var _iterator=_createForOfIteratorHelper(header.btnList),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(item.isrender){try{this.renderHeader(item.iconId,item.part)}catch(error){}}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}if(this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=footer.backgroundColor;document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=footer.color;var _iterator2=_createForOfIteratorHelper(footer.btnList),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _item=_step2.value;if(_item.isrender){try{this.renderFooter(_item.iconId,_item.part)}catch(error){}}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}console.log("this.isNeedRenderTimeLine:"+this.isNeedRenderTimeLine);if(this.isNeedRenderTimeLine){if(this.isMobile){if(document.getElementById("".concat(this.jSPlugin.id,"-headControl-right"))){document.getElementById("".concat(this.jSPlugin.id,"-headControl-right")).style.display="none"}this.Rec=new MobileRec(this.jSPlugin,this.changeRecSpeed,this.resetMobileZoomStatus)}else{if(this.Rec){this.Rec.recInit()}else{this.jSPlugin.decoderState=this.decoderState;this.jSPlugin.setDecoderState=this.setDecoderState;this.Rec=new Rec(this.jSPlugin)}var _checkTimer3=setInterval(function(){if(window.EZUIKit[_this11.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(_checkTimer3)}},50)}}var isNeedRenderPTZ=_.findIndex(this.themeData.footer.btnList,function(v){return v.iconId==="pantile"&&v.isrender===1})>=0&&!this.jSPlugin.disabledPTZ;if(isNeedRenderPTZ){if(this.isMobile){this.MobilePtz=new MobilePtz(this.jSPlugin)}this.Ptz=new Ptz(this.jSPlugin)}var onFullscreenChange=function onFullscreenChange(){var that=_this11;var _that$decoderState$st=that.decoderState.state,expend=_that$decoderState$st.expend,zoom=_that$decoderState$st.zoom;var isFullScreen=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(that.Rec&&window.randomNum==that.jSPlugin.randomNum){setTimeout(function(){that.Rec.recAutoSize(function(){if(that.jSPlugin.Zoom.currentScale>1){var currentScale=that.jSPlugin.Zoom.currentScale;that.jSPlugin.Zoom.stopZoom();setTimeout(function(){that.jSPlugin.Zoom.startZoom();that.jSPlugin.Zoom.currentScale=currentScale;that.jSPlugin.Zoom.doScale(currentScale)},200)}})},100)}if(!isFullScreen){if(expend){if(zoom&&that.jSPlugin.use3DZoom){that.jSPlugin.enable3DZoom()}}that.setDecoderState({webExpend:false,expend:false})}if(document.getElementById("".concat(that.jSPlugin.id,"-hdSelect"))){document.getElementById("".concat(that.jSPlugin.id,"-hdSelect")).style.display="none"}if(document.getElementById("".concat(that.jSPlugin.id,"-speedSelect"))){document.getElementById("".concat(that.jSPlugin.id,"-speedSelect")).style.display="none"}if(that.isMobile){if(document.getElementById("".concat(that.jSPlugin.id,"-select-hd-mask"))){document.getElementById("".concat(that.jSPlugin.id,"-select-hd-mask")).style.display="none"}if(document.getElementById("".concat(that.jSPlugin.id,"-select-mask"))){document.getElementById("".concat(that.jSPlugin.id,"-select-mask")).style.display="none"}}if(that.themeData.autoFocus>0){that.startAutoFocus()}};["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach(function(item,index){if(window.onFullscreenChange){document.removeEventListener(item,window.onFullscreenChange)}document.addEventListener(item,onFullscreenChange);window.onFullscreenChange=onFullscreenChange});if(this.themeData.poster){this.jSPlugin.poster=this.themeData.poster;var checkTimer=setInterval(function(){if(window.EZUIKit[_this11.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer);_this11.jSPlugin.setPoster(_this11.themeData.poster)}},50)}this.inited=true;this.getDeviceInfo();this.renderThemeData()}},{key:"resetMobileZoomStatus",value:function resetMobileZoomStatus(){if(this.isMobile){var zoomidDom=document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"));if(zoomidDom&&zoomidDom.style&&zoomidDom.style.display!="none"){console.log("结束电子放大");zoomidDom.style.display="none"}if(this.jSPlugin.jSPlugin.Zoom){this.jSPlugin.jSPlugin.Zoom.resetZoom()}}}},{key:"getDeviceInfo",value:function getDeviceInfo(callback){var _this12=this;var deviceAPISuccess=function deviceAPISuccess(data){if(data.code==200&&data.data){callback&&callback(data);if(document.getElementById("".concat(_this12.jSPlugin.id,"-deviceName-content"))){document.getElementById("".concat(_this12.jSPlugin.id,"-deviceName-content")).style.maxWidth="100%";document.getElementById("".concat(_this12.jSPlugin.id,"-deviceName-content")).style.overflow="hidden";document.getElementById("".concat(_this12.jSPlugin.id,"-deviceName-content")).style.textOverflow="ellipsis";document.getElementById("".concat(_this12.jSPlugin.id,"-deviceName-content")).style.whiteSpace="nowrap";document.getElementById("".concat(_this12.jSPlugin.id,"-deviceName-content")).innerHTML=data.data.deviceName}if(document.getElementById("".concat(_this12.jSPlugin.id,"-deviceID-content"))){document.getElementById("".concat(_this12.jSPlugin.id,"-deviceID-content")).style.maxWidth="100%";document.getElementById("".concat(_this12.jSPlugin.id,"-deviceID-content")).style.overflow="hidden";document.getElementById("".concat(_this12.jSPlugin.id,"-deviceID-content")).style.textOverflow="ellipsis";document.getElementById("".concat(_this12.jSPlugin.id,"-deviceID-content")).style.whiteSpace="nowrap";document.getElementById("".concat(_this12.jSPlugin.id,"-deviceID-content")).innerHTML=matchEzopenUrl(_this12.jSPlugin.url).deviceSerial}}};request(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:matchEzopenUrl(this.jSPlugin.url).deviceSerial},"",deviceAPISuccess)}},{key:"editStart",value:function editStart(callback){var audioControlsDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var headerMessageDOM=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));if(headerMessageDOM){headerMessageDOM.setAttribute("class","header-controls themeEditing")}if(audioControlsDOM){audioControlsDOM.setAttribute("class","footer-controls themeEditing")}this.setDecoderState({isEditing:true})}},{key:"editEnd",value:function editEnd(callback){var audioControlsDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var headerMessageDOM=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));if(headerMessageDOM){headerMessageDOM.setAttribute("class","header-controls")}if(audioControlsDOM){audioControlsDOM.setAttribute("class","footer-controls")}this.setDecoderState({isEditing:false})}},{key:"webExpend",value:function webExpend(){var _this13=this;var _this$decoderState$st=this.decoderState.state;_this$decoderState$st.webExpend;var expend=_this$decoderState$st.expend,play=_this$decoderState$st.play;if(!play){return false}if(expend){console.log("正在全局全屏");return false}console.log("执行网页全屏");var footerDOMHeight=0;var headerDOMHeight=0;var promise=requestFullScreenPromise(document.getElementById("".concat(this.jSPlugin.id,"-wrap")));promise.then(function(data){console.log("全屏promise",window.screen.width);if(document.getElementById("".concat(_this13.jSPlugin.id,"-canvas-container"))){footerDOMHeight=parseInt(window.getComputedStyle(document.getElementById("".concat(_this13.jSPlugin.id,"-canvas-container"))).height,10)}if(document.getElementById("".concat(_this13.jSPlugin.id,"-headControl"))){headerDOMHeight=parseInt(window.getComputedStyle(document.getElementById("".concat(_this13.jSPlugin.id,"-headControl"))).height,10)}console.log("this.jSPlugin.JS_Resiz",footerDOMHeight,headerDOMHeight,document.body.clientWidth);_this13.jSPlugin.jSPlugin.JS_Resize(window.screen.width,window.screen.height-footerDOMHeight-headerDOMHeight)})["catch"](function(err){console.log(err)})}},{key:"expend",value:function expend(){var _this14=this;var _this$decoderState$st2=this.decoderState.state,webExpend=_this$decoderState$st2.webExpend;_this$decoderState$st2.expend;var play=_this$decoderState$st2.play;_this$decoderState$st2.pantile;if(!play){return false}if(webExpend){console.log("正在网站全屏");return false}console.log("执行全局全屏");if(this.isMobile){var heightIntercept=parseInt(getComputedStyle(document.getElementById("".concat(this.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(this.jSPlugin.id)).height,10);requestMobileFullScreen(document.getElementById("".concat(this.jSPlugin.id,"-wrap")));var width=document.documentElement.clientWidth;var height=document.documentElement.clientHeight;document.getElementById("".concat(this.jSPlugin.id)).style["backface-visibility"]="hidden";this.jSPlugin.jSPlugin.JS_Resize(height,width-heightIntercept)}else{var promise=requestFullScreenPromise(document.getElementById("".concat(this.jSPlugin.id)));promise.then(function(data){_this14.jSPlugin.jSPlugin.JS_Resize(window.screen.width,window.screen.height)})["catch"](function(err){console.log(err)})}}},{key:"disabledFECBtn",value:function disabledFECBtn(){var list=["".concat(this.jSPlugin.id,"-capturePicture"),"".concat(this.jSPlugin.id,"-capturePicture-content"),"".concat(this.jSPlugin.id,"-capturePicture-icon"),"".concat(this.jSPlugin.id,"-recordvideo"),"".concat(this.jSPlugin.id,"-recordvideo-content"),"".concat(this.jSPlugin.id,"-recordvideo-icon"),"".concat(this.jSPlugin.id,"-zoom"),"".concat(this.jSPlugin.id,"-zoom-content"),"".concat(this.jSPlugin.id,"-zoom-icon")];var container=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));if(this.jSPlugin.use3DZoom){this.jSPlugin.close3DZoom()}else{this.jSPlugin.Zoom.stopZoom()}this.setDecoderState({zoom:false});if(container){var _iterator3=_createForOfIteratorHelper(list),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var id=_step3.value;var ele=container.querySelector("#".concat(id));if(ele){ele.style.display="none"}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}},{key:"resumeFECBtn",value:function resumeFECBtn(){var list=["".concat(this.jSPlugin.id,"-capturePicture"),"".concat(this.jSPlugin.id,"-capturePicture-content"),"".concat(this.jSPlugin.id,"-capturePicture-icon"),"".concat(this.jSPlugin.id,"-recordvideo"),"".concat(this.jSPlugin.id,"-recordvideo-content"),"".concat(this.jSPlugin.id,"-recordvideo-icon"),"".concat(this.jSPlugin.id,"-zoom"),"".concat(this.jSPlugin.id,"-zoom-content"),"".concat(this.jSPlugin.id,"-zoom-icon")];var container=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));if(container){var _iterator4=_createForOfIteratorHelper(list),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var id=_step4.value;var ele=container.querySelector("#".concat(id));if(ele){ele.style.display=""}}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}}}]);return Theme}();var ToastCustom=function(){function ToastCustom(jSPlugin,isMobile){_classCallCheck$1(this,ToastCustom);this.jSPlugin=jSPlugin;this.isMobile=isMobile;this.timer=null;this.initToastCustom()}_createClass$1(ToastCustom,[{key:"initToastCustom",value:function initToastCustom(){if(!document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom"))){this.randerToast()}else{document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom")).style.display="none"}}},{key:"randerToast",value:function randerToast(){var clientWidth=this.jSPlugin.width;var ratioClient=1;if(this.isMobile){ratioClient=clientWidth/375||1}else{ratioClient=clientWidth/1024||1}var wrapVideo=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));var objDOM=document.createElement("div");objDOM.style="display:none;position:absolute;top:0;width: 100%;align-items: center;justify-content: center;";objDOM.id="".concat(this.jSPlugin.id,"-wrap-Toast-custom");if(this.isMobile){objDOM.innerHTML='<div id="'.concat(this.jSPlugin.id,'-wrap-Toast-custom-content" \n            style="padding: ').concat(12*ratioClient,"px ").concat(20*ratioClient,"px;font-size: ").concat(16*ratioClient,"px;line-height:").concat(16*ratioClient,"px;border-radius: ").concat(8*ratioClient,"px;margin-top: ").concat(667*ratioClient*.53,'px;\n            background-color: rgba(0,0,0,0.8);color:rgba(255,255,255,0.90);box-sizing: border-box;z-index: 999;">\n            </div>\n            ')}else{objDOM.innerHTML='<div id="'.concat(this.jSPlugin.id,'-wrap-Toast-custom-content" \n            style="padding: ').concat(20*ratioClient,"px ").concat(32*ratioClient,"px;font-size: ").concat(24*ratioClient,"px;line-height:").concat(24*ratioClient,"px;border-radius: ").concat(12*ratioClient,"px;margin-top: ").concat(36*ratioClient,'px;\n            background-color: rgba(0,0,0,0.7);color:rgba(255,255,255,0.90);box-sizing: border-box;z-index: 999;">\n            </div>\n            ')}wrapVideo.insertBefore(objDOM,document.getElementById(this.jSPlugin.id))}},{key:"initToastContent",value:function initToastContent(content){var _this=this;var time=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2e3;console.log("content----------------",content);this.timer=null;if(!!document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom"))){document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom")).style.display="flex";document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom-content")).innerText=content||"";this.timer=setTimeout(function(){if(document.getElementById("".concat(_this.jSPlugin.id,"-wrap"))&&document.getElementById("".concat(_this.jSPlugin.id,"-wrap-Toast-custom"))){document.getElementById("".concat(_this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("".concat(_this.jSPlugin.id,"-wrap-Toast-custom")))}},time)}else{this.randerToast();this.initToastContent(content)}}}]);return ToastCustom}();var remoteDoor=function remoteDoor(jSPlugin,successCallback,errorCallback){var success=function success(data){console.log(data);successCallback(data)};var errorFun=function errorFun(err){console.log(err);errorCallback(err)};var data=new FormData;data.append("deviceSerial",matchEzopenUrl(jSPlugin.url).deviceSerial);data.append("cmd","open");({"Content-Type":"application/x-www-form-urlencoded",accessToken:jSPlugin.accessToken});var url="".concat(jSPlugin.env.domain,"/api/v3/device/acs/remote/door?accessToken=").concat(jSPlugin.accessToken);fetch(url,{method:"POST",body:data}).then(function(response){return response.json()}).then(function(data){console.log("get theme data",data);success(data)})["catch"](function(error){errorFun(error)})};var voiceQuery=function voiceQuery(jSPlugin,successCallback,errorCallback){var success=function success(data){console.log(data);successCallback(data)};var error=function error(err){console.log(err);errorCallback(err)};var data={accessToken:jSPlugin.accessToken,pageStart:0,pageSize:4,default:true,voiceName:"轻应用语音文件"};var headers={"Content-Type":"application/x-www-form-urlencoded"};var url="".concat(jSPlugin.env.domain,"/api/lapp/voice/query");FetchData(url,"POST",data,success,error,headers)};var voiceSend=function voiceSend(jSPlugin,voiceUrl,successCallback,errorCallback){var success=function success(data){console.log(data);successCallback(data)};var errorFun=function errorFun(err){console.log(err);errorCallback(err)};var url="".concat(jSPlugin.env.domain,"/api/lapp/voice/send");var data=new FormData;data.append("deviceSerial",matchEzopenUrl(jSPlugin.url).deviceSerial);data.append("accessToken",jSPlugin.accessToken);data.append("channelNo",matchEzopenUrl(jSPlugin.url).channelNo||1);data.append("fileUrl",voiceUrl);fetch(url,{method:"POST",body:data}).then(function(response){return response.json()}).then(function(data){success(data)})["catch"](function(error){errorFun(error)})};var PcQuickReplyEle=function(){function PcQuickReplyEle(jSPlugin,switchFooter){_classCallCheck$1(this,PcQuickReplyEle);this.jSPlugin=jSPlugin;this.videoWidth=jSPlugin.width;this.switchFooter=switchFooter;this.sendLoadingStats=false;this.toastCustom=new ToastCustom(jSPlugin,false);this.quickReplyList=["你好，请将快递放在门口","你好，稍等","你好，请将快递放入小区快递柜","你好，请将外卖放在门口"];this.initQuickReply()}_createClass$1(PcQuickReplyEle,[{key:"initQuickReply",value:function initQuickReply(){if(!document.getElementById("pc-quickReply-back")){this.renderQuickReply()}if(!document.getElementById("pc-quickReply-back-item-0")){this.getQuickReplyList()}}},{key:"renderQuickReply",value:function renderQuickReply(){var _this=this;var sizeRatio=this.videoWidth/1024||1;var objDOM=document.createElement("div");objDOM.style="width:100%;";objDOM.innerHTML='<div style="width:100%;display:flex;flex-direction:row;align-items: center;">\n        <div id="pc-quickReply-back" style="display: flex;align-items: center;margin: 0 '.concat(8*sizeRatio,"px 0 ").concat(16*sizeRatio,'px;cursor: pointer;">\n            <div style="height: ').concat(32*sizeRatio,'px;">\n                <svg width="').concat(32*sizeRatio,'px" height="').concat(32*sizeRatio,'px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <title>返回</title>\n                    <defs>\n                        <filter id="filter-1">\n                            <feColorMatrix in="SourceGraphic" type="matrix" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix>\n                        </filter>\n                    </defs>\n                    <g id="控件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                        <g id="快速回复loading" transform="translate(-16.000000, -497.000000)">\n                            <g id="返回" transform="translate(0.000000, 425.000000)" filter="url(#filter-1)">\n                                <g transform="translate(16.000000, 72.000000)">\n                                    <rect id="Rectangle" x="0" y="0" width="32" height="32"></rect>\n                                    <path d="M12.5,7.5 C13.2988404,7.5 13.9518304,8.12445998 13.9974537,8.91186361 L14,9 L14,21.5 L26.5,21.5 C27.2988404,21.5 27.9518304,22.12446 27.9974537,22.9118636 L28,23 C28,23.7988404 27.37554,24.4518304 26.5881364,24.4974537 L26.5,24.5 L12.5,24.5 C11.7011596,24.5 11.0481696,23.87554 11.0025463,23.0881364 L11,23 L11,9 C11,8.17157288 11.6715729,7.5 12.5,7.5 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero" transform="translate(19.500000, 16.000000) rotate(45.000000) translate(-19.500000, -16.000000) "></path>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <span style="font-size: ').concat(24*sizeRatio,'px;">返回</span>\n        </div>\n        <div id="pc-quickReply-content" style="display: block;width:calc(100% - ').concat(160*sizeRatio,"px);margin: 0 ").concat(24*sizeRatio,'px;"></div>\n        <div id="pc-quickReply-loading" style="display: none;width:calc(100% - ').concat(160*sizeRatio,"px);margin: 0 ").concat(24*sizeRatio,'px;"></div>\n        <div id="pc-quickReply-loaderror" style="display: none;width:calc(100% - ').concat(160*sizeRatio,"px);margin: 0 ").concat(24*sizeRatio,'px;"></div>\n    </div>');document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply")).appendChild(objDOM);document.getElementById("pc-quickReply-back").onclick=function(){_this.switchFooter("onBell")}}},{key:"matchQuickReplyBtn",value:function matchQuickReplyBtn(){var _this2=this;var sizeRatio=this.videoWidth/1024||1;var contentDom=document.getElementById("pc-quickReply-content");if(this.quickReplyList&&this.quickReplyList.length>0){this.quickReplyList.forEach(function(item,index){var objDOM=document.createElement("div");objDOM.id="pc-quickReply-back-item-".concat(index);objDOM.style="margin: ".concat(8*sizeRatio,"px 0 ").concat(8*sizeRatio,"px ").concat(8*sizeRatio,"px;cursor: pointer;\n            padding: 0 ").concat(20*sizeRatio,"px;min-height: ").concat(64*sizeRatio,"px;width:calc(50% - ").concat(16*sizeRatio,"px);\n            display: inline-block;background: rgba(0,0,0,0.70);border-radius: 8px;text-align: center;\n            box-sizing: border-box;font-size:").concat(24*sizeRatio,"px;color: rgba(255,255,255,0.90);");objDOM.innerHTML='<div id="pc-quickReply-back-item-box-'.concat(index,'">\n            <span id="pc-quickReply-name-').concat(index,'" style="line-height: ').concat(64*sizeRatio,'px;">').concat(item.voiceName,"</span>\n            </div>");objDOM.onclick=function(){if(!_this2.sendLoadingStats){console.log("item:"+item);_this2.sendQuickReply(item,index)}};contentDom.appendChild(objDOM)})}}},{key:"setBtnCheckLoading",value:function setBtnCheckLoading(status,index){var sizeRatio=this.videoWidth/1024||1;if(index>-1){document.getElementById("pc-quickReply-back-item-".concat(index));var domItemBox=document.getElementById("pc-quickReply-back-item-box-".concat(index));var domItemName=document.getElementById("pc-quickReply-name-".concat(index));if(status==1){var domItemIconLoading=document.getElementById("pc-quickReply-icon-loading-".concat(index));if(!!domItemIconLoading&&!!domItemName){domItemBox.removeChild(domItemIconLoading)}}else{if(!!domItemName){var objDOM=document.createElement("span");objDOM.id="pc-quickReply-icon-loading-".concat(index);objDOM.style="vertical-align: middle;margin-right:".concat(16*sizeRatio,"px;");objDOM.innerHTML='<svg width="'.concat(30*sizeRatio,'" height="').concat(30*sizeRatio,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>');domItemBox.insertBefore(objDOM,domItemName)}}}}},{key:"getQuickReplyList",value:function getQuickReplyList(){var _this3=this;console.log("getQuickReplyList");this.madeLoadingDom(0);var successCallback=function successCallback(data){if(data&&data.code==200){var quickReplyListTmd=data.data||[];var itemArr=[];data.data.forEach(function(item,index){itemArr=item.voiceName.split("_");quickReplyListTmd[index].voiceName=itemArr[1]});_this3.quickReplyList=quickReplyListTmd;setTimeout(function(){_this3.madeLoadingDom(2)},500)}else{_this3.madeLoadingDom(1)}};var errorCallback=function errorCallback(err){console.log(err);_this3.madeLoadingDom(1)};voiceQuery(this.jSPlugin,successCallback,errorCallback)}},{key:"madeLoadingDom",value:function madeLoadingDom(status){var _this4=this;var sizeRatio=this.videoWidth/1024||1;if(status==0){document.getElementById("pc-quickReply-content").style.display="none";document.getElementById("pc-quickReply-loaderror").style.display="none";document.getElementById("pc-quickReply-loading").style.display="block";if(!document.getElementById("pc-quickReply-loading-box")){var objDOM=document.createElement("div");objDOM.id="pc-quickReply-loading-box";objDOM.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: column;";objDOM.innerHTML='<div class="" style="heigth:'.concat(40*sizeRatio,'px">\n                <svg width="').concat(40*sizeRatio,'" height="').concat(40*sizeRatio,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>\n            </div>\n            <div style="font-size: ').concat(28*sizeRatio,"px;margin-top:").concat(10*sizeRatio,"px;line-height:").concat(36*sizeRatio,'px;">加载中…</div>');document.getElementById("pc-quickReply-loading").appendChild(objDOM)}}else if(status==1){document.getElementById("pc-quickReply-content").style.display="none";document.getElementById("pc-quickReply-loading").style.display="none";document.getElementById("pc-quickReply-loaderror").style.display="block";if(!document.getElementById("pc-quickReply-loaderror-box")){var _objDOM=document.createElement("div");_objDOM.id="pc-quickReply-loaderror-box";_objDOM.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: column;";_objDOM.innerHTML='<div style="font-size: '.concat(28*sizeRatio,'px;color: rgba(255,255,255,0.90);">快速回复加载失败</div>\n            <div id="pc-quickReply-loaderror-reload" style="font-size: ').concat(24*sizeRatio,"px;margin-top:").concat(16*sizeRatio,'px;color: rgba(100,143,252,0.90);cursor: pointer;">重新加载</div>');document.getElementById("pc-quickReply-loaderror").appendChild(_objDOM);document.getElementById("pc-quickReply-loaderror-reload").onclick=function(){_this4.getQuickReplyList()}}}else{document.getElementById("pc-quickReply-loading").style.display="none";document.getElementById("pc-quickReply-loaderror").style.display="none";document.getElementById("pc-quickReply-content").style.display="block";this.matchQuickReplyBtn()}}},{key:"sendQuickReply",value:function sendQuickReply(data,index){var _this5=this;this.sendLoadingStats=true;this.setBtnCheckLoading(0,index);var successCallback=function successCallback(data){_this5.sendLoadingStats=false;_this5.setBtnCheckLoading(1,index);if(data&&data.code==200){_this5.toastCustom.initToastContent("快捷回复成功")}else{_this5.toastCustom.initToastContent("快捷回复失败，请重试")}_this5.switchFooter("onBell")};var errorCallback=function errorCallback(err){console.log(err);_this5.sendLoadingStats=false;_this5.setBtnCheckLoading(1,index);_this5.toastCustom.initToastContent("快捷回复失败，请重试");_this5.switchFooter("onBell")};voiceSend(this.jSPlugin,data.fileUrl,successCallback,errorCallback)}}]);return PcQuickReplyEle}();var PcRemoteUnlockEle=function(){function PcRemoteUnlockEle(jSPlugin,switchFooter){_classCallCheck$1(this,PcRemoteUnlockEle);this.jSPlugin=jSPlugin;this.videoWidth=jSPlugin.width;this.switchFooter=switchFooter;this.toastCustom=new ToastCustom(jSPlugin,false);this.lockStatus=false;this.initRemoteUnlock()}_createClass$1(PcRemoteUnlockEle,[{key:"initRemoteUnlock",value:function initRemoteUnlock(){if(!document.getElementById("pc-remoteUnlock-back")){this.renderRemoteUnlock()}else{this.madeSlideEvent()}}},{key:"renderRemoteUnlock",value:function renderRemoteUnlock(){var _this=this;var sizeRatio=this.videoWidth/1024||1;var objDOM=document.createElement("div");objDOM.style="width:100%;";objDOM.id="pc-remoteUnlock-box";objDOM.innerHTML='<div style="width:100%;display:flex;flex-direction:row;align-items: center;">\n        <div id="pc-remoteUnlock-back" style="display: flex;align-items: center;margin: 0 '.concat(8*sizeRatio,"px 0 ").concat(16*sizeRatio,'px;cursor: pointer;">\n            <div style="height: ').concat(32*sizeRatio,'px;">\n                <svg width="').concat(32*sizeRatio,'px" height="').concat(32*sizeRatio,'px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <title>返回</title>\n                    <defs>\n                        <filter id="filter-1">\n                            <feColorMatrix in="SourceGraphic" type="matrix" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix>\n                        </filter>\n                    </defs>\n                    <g id="控件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                        <g id="快速回复loading" transform="translate(-16.000000, -497.000000)">\n                            <g id="返回" transform="translate(0.000000, 425.000000)" filter="url(#filter-1)">\n                                <g transform="translate(16.000000, 72.000000)">\n                                    <rect id="Rectangle" x="0" y="0" width="32" height="32"></rect>\n                                    <path d="M12.5,7.5 C13.2988404,7.5 13.9518304,8.12445998 13.9974537,8.91186361 L14,9 L14,21.5 L26.5,21.5 C27.2988404,21.5 27.9518304,22.12446 27.9974537,22.9118636 L28,23 C28,23.7988404 27.37554,24.4518304 26.5881364,24.4974537 L26.5,24.5 L12.5,24.5 C11.7011596,24.5 11.0481696,23.87554 11.0025463,23.0881364 L11,23 L11,9 C11,8.17157288 11.6715729,7.5 12.5,7.5 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero" transform="translate(19.500000, 16.000000) rotate(45.000000) translate(-19.500000, -16.000000) "></path>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <span style="font-size: ').concat(24*sizeRatio,'px;user-select: none;">返回</span>\n        </div>\n        <div id="pc-remoteUnlock-content" style="display: block;width:calc(100% - ').concat(160*sizeRatio,"px);margin: 0 ").concat(24*sizeRatio,'px;"></div>\n    </div>');document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock")).appendChild(objDOM);document.getElementById("pc-remoteUnlock-back").onclick=function(){_this.goback()};this.renderRemoteUnlockSlide()}},{key:"renderRemoteUnlockSlide",value:function renderRemoteUnlockSlide(){var sizeRatio=this.videoWidth/1024||1;var contentDom=document.getElementById("pc-remoteUnlock-content");var objDOM=document.createElement("div");objDOM.id="pc-remoteUnlock-content-slide";objDOM.style="width: 100%;display: flex;justify-content: center;cursor: pointer;";objDOM.innerHTML='<div id="pc-remoteUnlock-slide-box" style="width: '.concat(400*sizeRatio,"px;line-height: ").concat(80*sizeRatio,"px;height: ").concat(80*sizeRatio,"px;border: 1px solid rgba(255,255,255,1);border-radius: ").concat(40*sizeRatio,'px;position: relative;text-align: center;">\n        <div id="pc-remoteUnlock-slide-bgColor" style="border-radius: ').concat(40*sizeRatio,"px;width: ").concat(64*sizeRatio,"px;height: ").concat(80*sizeRatio,'px;position: absolute;left: 0;top: 0;"></div>\n        <div id="pc-remoteUnlock-slide-tips" style="height: ').concat(80*sizeRatio,"px;line-height: ").concat(80*sizeRatio,"px;font-size: ").concat(24*sizeRatio,"px;border-radius: ").concat(40*sizeRatio,'px;position: absolute;text-align: center;user-select: none;color: rgba(255,255,255,0.90);width: 100%;">右滑开锁</div>\n        <div id="pc-remoteUnlock-slide-ball" style="top: ').concat(8*sizeRatio,"px;left: ").concat(8*sizeRatio,"px;width: ").concat(64*sizeRatio,"px;height: ").concat(64*sizeRatio,'px;background: #598FFF;position: absolute;text-align: center;border-radius:50%;display: flex;align-items: center;justify-content: center;">\n            <svg id="slide-ball-start" style="display: inline;" width="').concat(36*sizeRatio,'px" height="').concat(36*sizeRatio,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title></title>\n                <g id="icon/箭头向右" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                    <rect id="矩形" fill="#000000" fill-rule="nonzero" opacity="0" x="0" y="0" width="24" height="24"></rect>\n                    <path d="M14.2841136,6.3689007 L19.9432338,12.0287579 L14.2863796,17.6856122 L12.8580239,16.2572565 L16.114,12.9999007 L4.00000001,13 L4.00000001,11 L16.058,10.9999007 L12.8557579,7.79725638 L14.2841136,6.3689007 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                </g>\n            </svg>\n            <svg id="slide-ball-end"  style="display: none;" width="').concat(36*sizeRatio,'" height="').concat(36*sizeRatio,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#598FFF" p-id="2400"></path></svg>\n            \n        </div>\n    </div>');contentDom.appendChild(objDOM);this.madeSlideEvent()}},{key:"getOffsetLeft",value:function getOffsetLeft(dom){var offsetLeft=0;do{offsetLeft+=dom.offsetLeft;dom=dom.parentNode}while(dom.parentNode);return offsetLeft}},{key:"madeSlideEvent",value:function madeSlideEvent(){var sizeRatio=this.videoWidth/1024||1;var videoDom=document.getElementById("".concat(this.jSPlugin.id));var videoOffsetLeft=this.getOffsetLeft(videoDom);var box=document.getElementById("pc-remoteUnlock-slide-box");var bgColor=document.getElementById("pc-remoteUnlock-slide-bgColor");var tips=document.getElementById("pc-remoteUnlock-slide-tips");var ball=document.getElementById("pc-remoteUnlock-slide-ball");var that=this;function success(){if(!that.lockStatus){that.lockStatus=true;document.getElementById("slide-ball-start").style.display="none";document.getElementById("slide-ball-end").style.display="inline";bgColor.style.width=box.clientWidth+"px";bgColor.style.backgroundColor="#598FFF";box.style.border="0";ball.style.backgroundColor="#ffffff";tips.textContent="正在开锁";ball.onmousedown=null;document.onmousemove=null;that.sendRemoteUnlockApi()}}ball.onmousedown=function(e){var e=e||window.event;var posx=e.offsetX;ball.style.transition="";bgColor.style.transition="";document.onmouseup=function(){console.log("--------------onmouseup");if(!that.lockStatus){bgColor.style.width=0+"px";ball.style.left=8*sizeRatio+"px";ball.style.transition="left 0.6s linear";bgColor.style.transition="width 0.6s linear"}document.onmouseup=null;document.onmousemove=null};document.onmousemove=function(e){var e=e||window.event;console.log("videoDom",videoOffsetLeft);var x=e.pageX-box.offsetLeft-posx-videoOffsetLeft;var max=box.clientWidth-ball.clientWidth-8*sizeRatio;if(x<=0){x=0}if(x>=max){x=max}ball.style.left=x+"px";if(x==max&&!that.lockStatus){success()}}}}},{key:"resetRemoteUnlockSlide",value:function resetRemoteUnlockSlide(){var domBox=document.getElementById("pc-remoteUnlock-box");var domRemoteUnlock=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock"));if(!!domBox&&!!domRemoteUnlock){domRemoteUnlock.removeChild(domBox)}}},{key:"sendRemoteUnlockApi",value:function sendRemoteUnlockApi(){var _this2=this;console.log("下发远程开锁");var successCallback=function successCallback(data){if(data&&data.code==200){_this2.toastCustom.initToastContent("开锁成功")}else{_this2.toastCustom.initToastContent("开锁失败，请重试")}_this2.goback()};var errorCallback=function errorCallback(err){console.log(err);_this2.toastCustom.initToastContent("开锁失败，请重试");_this2.goback()};remoteDoor(this.jSPlugin,successCallback,errorCallback)}},{key:"goback",value:function goback(){this.switchFooter("onCall");this.resetRemoteUnlockSlide()}}]);return PcRemoteUnlockEle}();var data$3={customConfig:{defaultMicro:0,defaultPlay:0,maxTalkTime:0,bellPoster:0,maxBellTime:0},header:{onBell:{color:"#2c2c2c",backgroundColor:"#00000000 linear-gradient(180deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.00) 100%)",activeColor:"#1890FF",autoFocus:0,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"ringStatus",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"callStatus",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]}},footer:{onBell:{color:"#ffffff",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"quickReply",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"rejection",part:"left",defaultActive:0,isrender:1,color:"#2C2C2C",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"answer",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-3",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000080",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"mute",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"hangUp",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]}}};var webCallData={data:data$3};var styleToString$2=function styleToString(obj){var styleString="";Object.keys(obj).map(function(item,index){styleString+="".concat(item,":").concat(obj[item]).concat(index<Object.keys(obj).length-1?";":"")});return styleString};var Call=function(){function Call(jSPlugin,themeData,setDecoderState,decoderState){var _this=this;_classCallCheck$1(this,Call);_defineProperty(this,"autoPlayRing",function(){console.log("autoPlayRing");var bellringAudio=document.getElementById("bellring-audio");if(!!bellringAudio){bellringAudio.muted=false;bellringAudio.src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3";if(bellringAudio.paused){bellringAudio.play()}}window.removeEventListener("click",_this.autoPlayRing)});_defineProperty(this,"muteCommon",function(btnData){var _this$decoderState$st=_this.decoderState.state,talk=_this$decoderState$st.talk,sound=_this$decoderState$st.sound;if(talk){console.log("结束对讲");_this.setDecoderState({talk:false,mute:true},btnData.backgroundColor);_this.jSPlugin.Talk.stopTalk();if(!sound){_this.jSPlugin.openSound()}_this.setDecoderState({sound:true})}else{_this.setDecoderState({talk:false,mute:true},btnData.backgroundColor);if(!sound){_this.jSPlugin.openSound()}_this.setDecoderState({sound:true})}});_defineProperty(this,"switchCallStatus",function(value){var editStatus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var _this$themeData=_this.themeData,header=_this$themeData.header,footer=_this$themeData.footer;var muteData=null;if(value=="onCall"){console.log("接听");_this.bellStatus="onCall";_this.switchFooter("onCall");footer[_this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this.renderFooter(item.iconId,item)}if(item.iconId=="mute"){muteData=item}});header[_this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this.renderHeader(item.iconId,item)}});var bellHeaderDom=document.getElementById("".concat(_this.jSPlugin.id,"-header-onBell"));if(bellHeaderDom){bellHeaderDom.parentElement.removeChild(bellHeaderDom)}if(_this.themeData.customConfig.bellPoster==1){if(document.getElementById("bellring-icon")){document.getElementById("".concat(_this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}}if(_this.themeData.customConfig.defaultMicro==0&&muteData){_this.muteCommon(muteData)}else{_this.setDecoderState({mute:false},muteData.backgroundColor)}_this.removeBellRing()}else{console.log("响铃");_this.bellStatus="onBell";_this.jSPlugin.Theme.changeTheme(_this.themeData,editStatus)}});this.jSPlugin=jSPlugin;this.videoWidth=jSPlugin.width;this.videoHeight=jSPlugin.height;this.themeData=themeData;this.setDecoderState=setDecoderState;this.decoderState=decoderState;this.isNeedRenderHeader=false;this.isNeedRenderFooter=false;this.autoFocus=0,this.autoFocusTimer=null,this.bellStatus="onBell",this.recordTimer=null;this.nextRate=1;this.themeInited=false;this.inited=false;this.activeThemeStatus=true;this.activeThemeStatusTxt="模板未激活";this.toastCustom=new ToastCustom(jSPlugin,false)}_createClass$1(Call,[{key:"initBellRing",value:function initBellRing(){var _this2=this;var _this$decoderState$st2=this.decoderState.state,play=_this$decoderState$st2.play,isEditing=_this$decoderState$st2.isEditing;_this$decoderState$st2.rejection;var clientWidth=this.videoWidth;var ratioClient=clientWidth/1024;this.maxBellTime=this.themeData.customConfig.maxBellTime*1e3;var bellringDom=document.getElementById("bellring");var bellringAudioDom=document.getElementById("bellring-audio");if(!bellringDom&&!bellringAudioDom){if(!!this.jSPlugin.isNeedBellRing){var objDOM=document.createElement("div");objDOM.id="bellring";objDOM.innerHTML='<div>\n          <audio id="bellring-audio" loop autoplay>\n            <source src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3" type="audio/mpeg">\n          </audio>\n          </div>';document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(objDOM)}if(this.themeData.customConfig.bellPoster==1&&!isEditing){var bellTop=(this.videoHeight-180*ratioClient)/2;var objIconDOM=document.createElement("div");objIconDOM.id="bellring-icon";objIconDOM.style="position: absolute;pointer-events: none;background: none;width: 100%;\n          position: absolute;top: ".concat(bellTop,"px;display: flex;align-items: center;justify-content: center;");objIconDOM.innerHTML='<div style="width: '.concat(180*ratioClient,"px;height: ").concat(180*ratioClient,'px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.2);border-radius: 50%;">\n            <div style="width: ').concat(100*ratioClient,"px;height: ").concat(100*ratioClient,'px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.3);border-radius: 50%;">\n              <svg width="').concat(40*ratioClient,'px" height="').concat(40*ratioClient,'px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <title>icon/响铃</title>\n                  <g id="icon/响铃" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                      <polygon id="Path" points="0 0 40.0000002 0 40.0000002 40.0000002 0 40.0000002"></polygon>\n                      <path d="M20.0000001,4.25000002 C22.0363461,4.25000002 23.698175,5.84879552 23.8000507,7.8591997 L23.8050001,8.05500003 L23.805316,8.99953253 C27.1874196,9.97041766 29.6921839,13.0354462 29.80936,16.723731 L29.80936,16.723731 L29.8133335,16.9800001 L29.8133335,21.6416668 C29.8133335,22.3259481 30.0858837,22.9835569 30.5703302,23.4680033 L30.5703302,23.4680033 L31.6386635,24.5363367 C32.338953,25.2366262 32.760721,26.1675592 32.8273086,27.1785295 L32.8273086,27.1785295 L32.8350001,27.4233334 C32.8350001,29.577547 31.0892137,31.3233335 28.9350001,31.3233335 L28.9350001,31.3233335 L24.5666667,31.323 L24.5650266,31.3951531 C24.4527075,33.8194458 22.4520933,35.7500001 20.0000001,35.7500001 C17.5482065,35.7500001 15.5473098,33.8197367 15.4349743,31.3967059 L15.4326667,31.323 L11.0666667,31.3233335 C9.06159524,31.3233335 7.39851917,29.8069287 7.18810198,27.8229374 L7.17194359,27.6230185 L7.1666667,27.4233334 C7.1666667,26.3411154 7.59733134,25.3020086 8.36300328,24.5363367 L8.36300328,24.5363367 L9.43133662,23.4680033 C9.91578309,22.9835569 10.1883334,22.3259481 10.1883334,21.6416668 L10.1883334,21.6416668 L10.1883334,16.9800001 C10.1883334,13.1909619 12.7263704,9.99530436 16.1948593,8.99965364 L16.1950001,8.05500003 C16.1950001,5.95360729 17.8979654,4.25000002 20.0000001,4.25000002 Z M23.0656667,31.323 L16.9336667,31.323 L16.9352114,31.3619281 C17.0285826,32.9723844 18.3649772,34.2500001 20.0000001,34.2500001 C21.6352227,34.2500001 22.9714318,32.9721919 23.0647896,31.3604131 L23.0656667,31.323 Z M21.5116668,10.1783334 L18.4900001,10.1783334 C14.7336124,10.1783334 11.6883334,13.2231481 11.6883334,16.9800001 L11.6883334,16.9800001 L11.6883334,21.6416668 C11.6883334,22.7238848 11.2576687,23.7629916 10.4919968,24.5286635 L10.4919968,24.5286635 L9.42366346,25.5969969 C8.93921698,26.0814433 8.6666667,26.7390521 8.66637526,27.402427 L8.66637526,27.402427 L8.67048222,27.560237 C8.74130967,28.8268108 9.79171396,29.8233335 11.0666667,29.8233335 L11.0666667,29.8233335 L23.7906939,29.8222289 C23.8004164,29.8218553 23.8101862,29.8216668 23.8200001,29.8216668 L23.8486667,29.823 L28.9350001,29.8233335 C30.2055455,29.8233335 31.2450456,28.8367727 31.329826,27.609522 L31.3354106,27.4481422 L31.3293607,27.2529336 C31.2880301,26.6292837 31.0210852,26.0400787 30.5780034,25.5969969 L30.5780034,25.5969969 L29.50967,24.5286635 C28.7439981,23.7629916 28.3133335,22.7238848 28.3133335,21.6416668 L28.3133335,21.6416668 L28.3134279,16.9919039 L28.3098332,16.759466 C28.1934023,13.0970787 25.1864454,10.1783334 21.5116668,10.1783334 L21.5116668,10.1783334 Z M20.0000001,5.75000002 C18.7795808,5.75000002 17.7813801,6.69770708 17.7003155,7.89717688 L17.6950001,8.05500003 L17.6952875,8.7158769 C17.9568453,8.69103758 18.2219393,8.67833337 18.4900001,8.67833337 L18.4900001,8.67833337 L21.5116668,8.67833337 C21.7792577,8.67833337 22.0439466,8.69101238 22.3051575,8.71580951 L22.3050001,8.05500003 C22.3050001,6.7819079 21.273481,5.75000002 20.0000001,5.75000002 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                  </g>\n              </svg>\n            </div>\n          </div>');document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(objIconDOM);if(play&&this.bellStatus=="onBell"){this.jSPlugin.pause()}}else{if(document.getElementById("bellring-icon")){document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}}setTimeout(function(){var _this2$decoderState$s=_this2.decoderState.state,isEditing=_this2$decoderState$s.isEditing,rejection=_this2$decoderState$s.rejection;if(_this2.bellStatus=="onBell"&&!rejection){_this2.removeBellRing();if(!isEditing){_this2.answerOvertime()}}},this.maxBellTime)}}},{key:"removeBellRing",value:function removeBellRing(){if(!!document.getElementById("bellring")){document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring"))}if(!!document.getElementById("bellring-icon")){document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}}},{key:"matchBtn",value:function matchBtn(btnId,btnData){var _this3=this;var _this$themeData2=this.themeData,header=_this$themeData2.header,footer=_this$themeData2.footer;var _this$decoderState$st3=this.decoderState.state,mute=_this$decoderState$st3.mute,rejection=_this$decoderState$st3.rejection;var btnItem={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function onclick(){},onmoveleft:function onmoveleft(){},onmoveright:function onmoveright(){},onremove:function onremove(){}};var _index=header[this.bellStatus].btnList.findIndex(function(item){return item.iconId===btnId});if(_index===-1){btnItem.color=footer[this.bellStatus].color;btnItem.backgroundColor=footer[this.bellStatus].backgroundColor;btnItem.activeColor=footer[this.bellStatus].activeColor}else{btnItem.color=header[this.bellStatus].color;btnItem.backgroundColor=header[this.bellStatus].backgroundColor;btnItem.activeColor=header[this.bellStatus].activeColor}var btnWidth=this.videoWidth/6;this.videoWidth;var sizeRatio=this.videoWidth/1024||1;switch(btnId){case"ringStatus":btnItem.title=this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt;btnItem.id=btnId;btnItem.domString='<span id="header-onBell-ringStatus" style="color:'.concat(btnData.color||"#FFFFFF",";font-size: ").concat(32*sizeRatio,'px;display: block;text-align: left;font-weight: 500;" >').concat(this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt,"</span>");btnItem.onclick=function(){};return btnItem;case"deviceCategory":btnItem.title="设备名称";btnItem.id=btnId;btnItem.domString='<span id="header-onBell-deviceCategory" \n          style="\n          color:'.concat(btnData.color||"#FFFFFF",";\n          font-size: ").concat(24*sizeRatio,"px;\n          padding-top: ").concat(16*sizeRatio,'px;\n          display: block;\n          max-width: 100%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          text-align: left;\n          ">').concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>");btnItem.onclick=function(){};return btnItem;case"callStatus":btnItem.title="通话中";btnItem.id=btnId;btnItem.domString='<span id="header-onCall-ringStatus" style="color:'.concat(btnData.color||"#FFFFFF",";font-size: ").concat(32*sizeRatio,'px;display: block;text-align: left;" >通话中</span>');btnItem.onclick=function(){};return btnItem;case"deviceCategory":btnItem.title="设备名称";btnItem.id=btnId;btnItem.domString='<span id="header-onCall-deviceCategory"\n           style="color:'.concat(btnData.color||"#FFFFFF",";\n           font-size: ").concat(24*sizeRatio,"px;\n           padding-top: ").concat(16*sizeRatio,'px;\n           display: block;\n           max-width: 100%;\n           overflow: hidden;\n           text-overflow: ellipsis;\n           white-space: nowrap;\n           text-align: left;\n           ">').concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>");btnItem.onclick=function(){};return btnItem;case"rejection":btnItem.title="拒绝";btnItem.id=btnId;btnItem.domString='<div style="width: '.concat(btnWidth*.7,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width:').concat(btnWidth*.5,"px;height: ").concat(btnWidth*.5,"px;border-radius: 50%;background: ").concat(rejection?"#CCCCCC":btnData.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(btnWidth*.3,'px" height="').concat(btnWidth*.3,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>拒绝</title>\n                        <g id="icon/拒绝" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(btnWidth*.1,'px;user-select: none;">拒绝</div>\n            </div>');btnItem.onclick=function(){var _this3$decoderState$s=_this3.decoderState.state,play=_this3$decoderState$s.play,isEditing=_this3$decoderState$s.isEditing,rejection=_this3$decoderState$s.rejection;if(isEditing||rejection){return false}console.log("拒绝");if(play){_this3.jSPlugin.stop()}_this3.removeBellRing();_this3.setDecoderState({play:false,rejection:true});_this3.rejectionStatusDispose();if(typeof _this3.jSPlugin.hangUpCallback==="function"){_this3.jSPlugin.hangUpCallback("rejection")}};return btnItem;case"quickReply":btnItem.title="快捷回复";btnItem.id=btnId;btnItem.domString='<div style="width: '.concat(btnWidth*.7,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width: ').concat(btnWidth*.5,"px;height: ").concat(btnWidth*.5,"px;border-radius: 50%;background: ").concat(rejection?"#CCCCCC":btnData.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(btnWidth*.3,'px" height="').concat(btnWidth*.3,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>快捷回复</title>\n                        <g id="icon/web快捷回复" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M17.4723401,6.00464509 C24.1317208,5.8200623 29.613145,11.1601938 29.613145,17.806299 C29.613145,19.5506656 29.2343807,21.2437888 28.5133012,22.7904909 L28.638,22.51 L29.9802796,28.9334997 C30.0980856,29.4978889 29.6719785,30.0050773 29.131395,30.0271186 L29.0218792,30.0249315 L28.9025577,30.0074816 L22.488349,28.6446207 L22.3501503,28.7067675 C21.0679643,29.242563 19.6940914,29.5480927 18.2793303,29.6038407 L18.2793303,29.6038407 L17.8062986,29.6131454 C11.1610025,29.6131454 5.820073,24.1313212 6.00464384,17.4723718 C6.17540866,11.3038211 11.3038207,6.17540904 17.4723401,6.00464509 Z M17.8062986,16.2974446 C16.9707372,16.2974446 16.2926003,16.9755814 16.2926003,17.8111428 C16.2926003,18.6467043 16.9707372,19.3248411 17.8062986,19.3248411 C18.64186,19.3248411 19.3199969,18.6467043 19.3199969,17.8111428 C19.3199969,16.9755814 18.64186,16.2974446 17.8062986,16.2974446 Z M12.9624642,16.2974446 C12.1269027,16.2974446 11.4487659,16.9755814 11.4487659,17.8111428 C11.4487659,18.6467043 12.1269027,19.3248411 12.9624642,19.3248411 C13.7980256,19.3248411 14.4761624,18.6467043 14.4761624,17.8111428 C14.4761624,16.9755814 13.7980256,16.2974446 12.9624642,16.2974446 Z M22.650133,16.2974446 C21.8145716,16.2974446 21.1364348,16.9755814 21.1364348,17.8111428 C21.1364348,18.6467043 21.8145716,19.3248411 22.650133,19.3248411 C23.4856945,19.3248411 24.1638313,18.6467043 24.1638313,17.8111428 C24.1638313,16.9755814 23.4856945,16.2974446 22.650133,16.2974446 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(btnWidth*.1,'px;user-select: none;">快捷回复</div>\n            </div>');btnItem.onclick=function(){var rejection=_this3.decoderState.state.rejection;if(rejection){return false}console.log("快捷回复");_this3.switchFooter("quickReply");_this3.quickReplyEle=new PcQuickReplyEle(_this3.jSPlugin,_this3.switchFooter)};return btnItem;case"answer":btnItem.title="接听";btnItem.id=btnId;btnItem.domString='<div style="width: '.concat(btnWidth*.7,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width: ').concat(btnWidth*.5,"px;height: ").concat(btnWidth*.5,"px;border-radius: 50%;background: ").concat(rejection?"#CCCCCC":btnData.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(btnWidth*.3,'px" height="').concat(btnWidth*.3,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>接听</title>\n                        <g id="icon/接听" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M15.7728281,19.6822968 C13.2528132,17.165123 10.8435994,14.2473605 11.9999084,13.0938925 C13.6505608,11.4432401 15.0881341,10.4261428 12.1646895,6.78675259 C9.23840386,3.14452132 7.28659974,5.94011849 5.68708632,7.53963191 C3.84324225,9.38631703 5.59049048,16.2645088 12.3891328,23.0659922 C19.1877751,29.8646345 26.0688079,31.6147238 27.9154931,29.7680386 C29.5150065,28.1685252 32.3106036,26.2195622 28.6712134,23.2932765 C25.0318232,20.3669909 24.0147259,21.8045642 22.3640735,23.4580576 C21.2077645,24.6086845 18.2928431,22.1994707 15.7728281,19.6822968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.727936, 17.728157) rotate(-360.000000) translate(-17.727936, -17.728157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(btnWidth*.1,'px;user-select: none;">接听</div>\n            </div>');btnItem.onclick=function(){var _this3$decoderState$s2=_this3.decoderState.state,play=_this3$decoderState$s2.play,isEditing=_this3$decoderState$s2.isEditing,talk=_this3$decoderState$s2.talk,sound=_this3$decoderState$s2.sound,rejection=_this3$decoderState$s2.rejection;if(isEditing||rejection){return false}console.log("接听");_this3.jSPlugin.pluginStatus.loadingClear();if(!play){_this3.jSPlugin.pluginStatus.loadingStart(_this3.jSPlugin.id);_this3.jSPlugin.pluginStatus.loadingSetText({text:"视频加载中"});_this3.jSPlugin.play();_this3.setDecoderState({play:!play})}if(!talk&&_this3.themeData.customConfig.defaultMicro==1){_this3.setDecoderState({talk:true,mute:false});if(sound){_this3.jSPlugin.closeSound()}_this3.jSPlugin.Talk.startTalk()}_this3.setDecoderState({sound:false});_this3.bellStatus="onCall";_this3.switchFooter("onCall");footer[_this3.bellStatus].btnList.map(function(item,index){if(item.isrender){_this3.renderFooter(item.iconId,item)}});header[_this3.bellStatus].btnList.map(function(item,index){if(item.isrender){_this3.renderHeader(item.iconId,item)}});var bellHeaderDom=document.getElementById("".concat(_this3.jSPlugin.id,"-header-onBell"));if(bellHeaderDom){bellHeaderDom.parentElement.removeChild(bellHeaderDom)}if(_this3.themeData.customConfig.bellPoster==1){if(document.getElementById("bellring-icon")){document.getElementById("".concat(_this3.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}_this3.jSPlugin.setPoster("")}if(_this3.themeData.customConfig.defaultMicro==0){_this3.muteCommon(btnData);_this3.jSPlugin.openSound();_this3.setDecoderState({sound:true})}_this3.removeBellRing();_this3.maxTalkTime=_this3.themeData.customConfig.maxTalkTime*1e3*60;var that=_this3;setTimeout(function(){if(talk){console.log("结束对讲");that.setDecoderState({talk:false});that.jSPlugin.Talk.stopTalk()}if(play){that.jSPlugin.stop();that.setDecoderState({play:!play})}_this3.rejectionStatusDispose();if(!!_this3.remoteUnlockEle){_this3.remoteUnlockEle.goback()}if(typeof _this3.jSPlugin.hangUpCallback==="function"){_this3.jSPlugin.hangUpCallback("hangUp")}},_this3.maxTalkTime)};return btnItem;case"remoteUnlock":btnItem.title="远程开锁";btnItem.id=btnId;btnItem.domString='<div style="width: '.concat(btnWidth*.7,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width: ').concat(btnWidth*.5,"px;height: ").concat(btnWidth*.5,"px;border-radius: 50%;background: ").concat(rejection?"#CCCCCC":btnData.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(btnWidth*.3,'px" height="').concat(btnWidth*.3,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>开锁</title>\n                        <g id="icon/开锁" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M18,4 C21.3137085,4 24,6.6862915 24,10 L24,10 L24,19.787 L29.5,19.7875 C30.0522847,19.7875 30.5,20.2352153 30.5,20.7875 C30.5,21.3397847 30.0522847,21.7875 29.5,21.7875 L24,21.787 L24,26 C24,29.2383969 21.4344251,31.8775718 18.2249383,31.9958615 L18,32 C14.6862915,32 12,29.3137085 12,26 L12,26 L12,10 C12,6.6862915 14.6862915,4 18,4 Z M18,6 C15.790861,6 14,7.790861 14,10 L14,10 L14,26 C14,28.209139 15.790861,30 18,30 C20.209139,30 22,28.209139 22,26 L22,26 L22,21.787 L18.5,21.7875 C17.9477153,21.7875 17.5,21.3397847 17.5,20.7875 C17.5,20.2352153 17.9477153,19.7875 18.5,19.7875 L22,19.787 L22,10 C22,7.85780461 20.3160315,6.10892112 18.1996403,6.00489531 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(btnWidth*.1,'px;user-select: none;">远程开锁</div>\n            </div>');btnItem.onclick=function(){var _this3$decoderState$s3=_this3.decoderState.state,isEditing=_this3$decoderState$s3.isEditing,rejection=_this3$decoderState$s3.rejection;if(isEditing||_this3.bellStatus=="onBell"||rejection){return false}console.log("远程开锁");_this3.switchFooter("remoteUnlock");_this3.remoteUnlockEle=new PcRemoteUnlockEle(_this3.jSPlugin,_this3.switchFooter)};return btnItem;case"mute":btnItem.title="静音";btnItem.id=btnId;btnItem.domString='<div style="width: '.concat(btnWidth*.7,'px;display: flex;flex-direction: column;align-items: center;">\n                <div id="').concat(this.jSPlugin.id,'-icon-mute" style="width: ').concat(btnWidth*.5,"px;height: ").concat(btnWidth*.5,"px;border-radius: 50%;border: 1px solid ").concat(rejection?"#CCCCCC":btnData.backgroundColor,";background: ").concat(rejection&&mute?"#cccccc":"#ffffff",';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(btnWidth*.3,'px" height="').concat(btnWidth*.3,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>静音</title>\n                        <g id="icon/静音" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path id="icon-mute-path" d="M29.2988305,7.56559704 C29.8540627,8.1086468 29.8980234,8.97727504 29.4240597,9.57172938 L29.3223594,9.6867869 L22.585,16.574 L22.5859243,26.0592702 C22.5859243,26.9500521 21.8638029,27.6721735 20.973021,27.6721735 C20.6007147,27.6721735 20.2398727,27.5433734 19.9517149,27.3076254 L15.583,23.733 L10.4341733,28.9987008 C9.85492024,29.5909486 8.9052312,29.6014828 8.31298346,29.0222298 C7.75775121,28.47918 7.71379057,27.6105518 8.18775419,27.0160974 L8.28945454,26.9010399 L27.1776406,7.58912597 C27.7568937,6.99687823 28.7065827,6.98634397 29.2988305,7.56559704 Z M22.2503608,7.16816759 C22.4679282,7.45036017 22.5859243,7.79665625 22.5859243,8.15298221 L22.585,9.899 L10.778,21.971 L9.47580645,21.9713498 C7.69424274,21.9713498 6.25,20.5271071 6.25,18.7455434 L6.25,15.65293 C6.25,13.8713663 7.69424274,12.4271235 9.47580645,12.4271235 L12.787,12.427 L19.9882064,6.87564241 C20.6936617,6.33174431 21.7064627,6.46271229 22.2503608,7.16816759 Z" id="形状结合" fill="').concat(mute?"#ffffff":rejection?"#cccccc":btnData.backgroundColor,'"></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(btnWidth*.1,'px;user-select: none;">静音</div>\n            </div>');btnItem.onclick=function(){var _this3$decoderState$s4=_this3.decoderState.state,talk=_this3$decoderState$s4.talk,sound=_this3$decoderState$s4.sound;_this3$decoderState$s4.play;var rejection=_this3$decoderState$s4.rejection;if(rejection){return false}console.log("静音");if(talk){console.log("结束对讲");_this3.setDecoderState({talk:false,mute:true},btnData.backgroundColor);_this3.jSPlugin.Talk.stopTalk();_this3.jSPlugin.openSound();_this3.setDecoderState({sound:true})}else{console.log("开始对讲");_this3.setDecoderState({talk:true,mute:false},btnData.backgroundColor);if(sound){_this3.jSPlugin.closeSound();_this3.setDecoderState({sound:false})}_this3.jSPlugin.Talk.startTalk()}};return btnItem;case"hangUp":btnItem.title="挂断";btnItem.id=btnId;btnItem.domString='<div style="width: '.concat(btnWidth*.7,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width:').concat(btnWidth*.5,"px;height: ").concat(btnWidth*.5,"px;border-radius: 50%;background: ").concat(rejection?"#CCCCCC":btnData.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(btnWidth*.3,'px" height="').concat(btnWidth*.3,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>挂断</title>\n                        <g id="icon/挂断" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(btnWidth*.1,'px;">挂断</div>\n            </div>');btnItem.onclick=function(){var _this3$decoderState$s5=_this3.decoderState.state,talk=_this3$decoderState$s5.talk,play=_this3$decoderState$s5.play,sound=_this3$decoderState$s5.sound,rejection=_this3$decoderState$s5.rejection;if(rejection){return false}if(talk){console.log("结束对讲");_this3.setDecoderState({talk:false});_this3.jSPlugin.Talk.stopTalk()}if(play){_this3.jSPlugin.stop();_this3.setDecoderState({play:!play})}if(sound){_this3.jSPlugin.closeSound();_this3.setDecoderState({sound:false})}if(play||talk){console.log("挂断");_this3.removeBellRing();_this3.rejectionStatusDispose();if(typeof _this3.jSPlugin.hangUpCallback==="function"){_this3.jSPlugin.hangUpCallback("hangUp")}}};return btnItem;default:return btnItem}}},{key:"answerOvertime",value:function answerOvertime(){this.toastCustom.initToastContent("应答超时");var play=this.decoderState.state.play;console.log("应答超时");if(play){this.jSPlugin.stop()}this.setDecoderState({play:false,rejection:true});this.rejectionStatusDispose();this.switchFooter("onBell");if(typeof this.jSPlugin.hangUpCallback==="function"){this.jSPlugin.hangUpCallback("rejection")}}},{key:"rejectionStatusDispose",value:function rejectionStatusDispose(){var _this4=this;var footer=this.themeData.footer;var footerDom=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var footerDomCall=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));var headerRingStatusDom=document.getElementById("header-".concat(this.bellStatus,"-ringStatus"));if(this.bellStatus=="onBell"){footerDom.innerHTML="";footerDom.style.color="#ffffff"}else{footerDomCall.innerHTML="";footerDomCall.style.color="#ffffff"}console.log("rejectionStatusDispose");this.setDecoderState({rejection:true});footer[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this4.renderFooter(item.iconId,item)}});headerRingStatusDom.innerText="通话已结束";this.jSPlugin.pluginStatus.loadingClear();this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:false,type:2})}},{key:"userNoDevice",value:function userNoDevice(){var _this5=this;this.removeBellRing();this.setDecoderState({rejection:true});var footer=this.themeData.footer;var footerDom=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var footerDomCall=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));if(this.bellStatus=="onBell"){footerDom.innerHTML="";footerDom.style.color="#ffffff"}else{footerDomCall.innerHTML="";footerDomCall.style.color="#ffffff"}console.log("userNoDevice");this.setDecoderState({rejection:true});footer[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this5.renderFooter(item.iconId,item)}});this.jSPlugin.pluginStatus.loadingClear();this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:false,type:2})}},{key:"renderHeader",value:function renderHeader(id,item){var _this6=this;var sizeRatio=this.videoWidth/1024||1;var objItem=this.matchBtn(id,item);if(document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content"))){var childDOM=document.createElement("span");childDOM.innerHTML="".concat(objItem.domString);document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content")).appendChild(childDOM)}else{var objDOM=document.createElement("div");objDOM.id="".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus);objDOM.style="max-width:50%;position:relative;";objDOM.innerHTML='<span id="'.concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,'-content" style="display:inline-block;height:auto;padding-top: ').concat(32*sizeRatio,'px;";>\n        ').concat(objItem.domString,"\n      </span>");objDOM.onclick=function(e){if(_this6.decoderState.state.isEditing||!_this6.activeThemeStatus){return false}objItem.onclick(e)};document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[0].appendChild(objDOM)}}},{key:"renderFooter",value:function renderFooter(id,item){var _this7=this;var mute=this.decoderState.state.mute;console.log("-------------renderFooter");if(id=="remoteUnlock"&&!!this.jSPlugin.capacity&&(!this.jSPlugin.capacity["support_unlock"]||this.jSPlugin.capacity["support_unlock"]==0)){return false}var objItem=this.matchBtn(id,item);var btnWidth=this.videoWidth/6;var objDOM=document.createElement("div");objDOM.className="theme-icon-item";if(!!this.jSPlugin.isWebConsole){objDOM.style="padding:0 ".concat(btnWidth*.1,"px;")}else{objDOM.style="padding:0 ".concat(btnWidth*.1,"px;cursor: pointer;")}objDOM.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-content" title="').concat(objItem.title,'" style="display: flex;align-items: center;position:relative;">')).concat(objItem.domString,"</div>")+"</span>";objDOM.onclick=function(e){if(_this7.decoderState.state.isEditing||!_this7.activeThemeStatus){return false}objItem.onclick(e)};if(objItem.onmouseenter){objDOM.onmouseenter=function(e){if(_this7.decoderState.state.isEditing||!_this7.activeThemeStatus){return false}objItem.onmouseenter(e)}}if(objItem.onmouseleave){objDOM.onmouseleave=function(e){if(_this7.decoderState.state.isEditing||!_this7.activeThemeStatus){return false}objItem.onmouseleave(e)}}var iconSizeScale=this.videoWidth/597;var toLeft=document.createElement("span");toLeft.className="icon-move left";toLeft.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-left" title="左移" style="display: inline-block;border-radius: 2px;overflow: hidden;position: absolute;top: calc(50% - ').concat(35*iconSizeScale,"px); width: ").concat(10*iconSizeScale,"px; height: ").concat(40*iconSizeScale,'px;cursor: pointer;">\n        <svg width="100%" height="100%" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title></title>\n              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="H5呼叫模板" transform="translate(-614.000000, -5024.000000)">\n                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                          <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                              <g id="编组" transform="translate(170.000000, 0.000000)">\n                                  <g id="箭头左" transform="translate(0.000000, 18.000000)">\n                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>\n                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(1.000000, 15.000000)" fill="#FFFFFF">\n                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>\n                                      </g>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </g>\n          </svg>\n        </span>');toLeft.onclick=function(){_this7.editIcon(objItem.id,"left","footer")};objDOM.appendChild(toLeft);var toRight=document.createElement("span");toRight.className="icon-move right";toRight.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-right" class="ezuikit-theme-icon" title="右移" style="display: inline-block;border-radius: 2px;overflow: hidden;position: absolute;top: calc(50% - ').concat(35*iconSizeScale,"px);left: ").concat(20*iconSizeScale+btnWidth*.5,"px; width: ").concat(10*iconSizeScale,"px; height: ").concat(40*iconSizeScale,'px;cursor: pointer;">\n        <svg width="100%" height="100%" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title></title>\n              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="H5呼叫模板" transform="translate(-684.000000, -5024.000000)">\n                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                          <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                              <g id="编组" transform="translate(170.000000, 0.000000)">\n                                  <g id="箭头右" transform="translate(70.000000, 18.000000)">\n                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>\n                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(5.500000, 20.000000) scale(-1, 1) translate(-5.500000, -20.000000) translate(2.000000, 15.000000)" fill="#FFFFFF">\n                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>\n                                      </g>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </g>\n          </svg>\n        </span>');toRight.onclick=function(){_this7.editIcon(objItem.id,"right","footer")};objDOM.appendChild(toRight);if(id=="answer"||id=="rejection"||id=="hangUp");else{var toClose=document.createElement("span");toClose.className="icon-move close";toClose.innerHTML='<span id="'.concat(objItem.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: ').concat(-15*iconSizeScale-1,"px;left: ").concat(20*iconSizeScale+btnWidth*.5-4.5*iconSizeScale,'px;cursor: pointer;">\n            <svg width="').concat(18*iconSizeScale,'" height="').concat(18*iconSizeScale,'" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <title></title>\n                  <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                      <g id="H5呼叫模板" transform="translate(-680.000000, -5006.000000)">\n                          <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                              <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                                  <g id="编组" transform="translate(170.000000, 0.000000)">\n                                      <g id="关闭1" transform="translate(66.000000, 0.000000)">\n                                          <rect id="矩形" fill-rule="nonzero" x="0" y="0" width="18" height="18"></rect>\n                                          <path d="M9,1.125 C4.65117188,1.125 1.125,4.65117188 1.125,9 C1.125,13.3488281 4.65117188,16.875 9,16.875 C13.3488281,16.875 16.875,13.3488281 16.875,9 C16.875,4.65117188 13.3488281,1.125 9,1.125 Z M11.9074219,11.9917969 L10.7472656,11.9865234 L9,9.90351562 L7.25449219,11.9847656 L6.09257813,11.9900391 C6.01523438,11.9900391 5.95195313,11.9285156 5.95195313,11.8494141 C5.95195313,11.8160156 5.96425781,11.784375 5.98535156,11.7580078 L8.27226563,9.03339844 L5.98535156,6.31054687 C5.96425781,6.28417969 5.95195313,6.25253906 5.95195313,6.21914062 C5.95195313,6.14179687 6.01523438,6.07851562 6.09257813,6.07851562 L7.25449219,6.08378906 L9,8.16679687 L10.7455078,6.08554688 L11.9056641,6.08027344 C11.9830078,6.08027344 12.0462891,6.14179687 12.0462891,6.22089844 C12.0462891,6.25429687 12.0339844,6.2859375 12.0128906,6.31230469 L9.72949219,9.03515625 L12.0146484,11.7597656 C12.0357422,11.7861328 12.0480469,11.8177734 12.0480469,11.8511719 C12.0480469,11.9285156 11.9847656,11.9917969 11.9074219,11.9917969 Z" id="形状" fill="#595959"></path>\n                                      </g>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </svg>\n          </span>');toClose.onclick=function(){_this7.editIcon(objItem.id,"delete","footer")};objDOM.appendChild(toClose)}if(this.bellStatus=="onCall"){document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).appendChild(objDOM)}else{document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).appendChild(objDOM)}if(this.decoderState.state.isEditing&&id=="mute"&&this.bellStatus=="onCall"){if(this.themeData.customConfig.defaultMicro==0&&!mute){this.setDecoderState({mute:true},item.backgroundColor)}else{this.setDecoderState({mute:false},item.backgroundColor)}}}},{key:"switchFooter",value:function switchFooter(type){var footer={};if(!!this.themeData){footer=this.themeData.footer}switch(type){case"onBell":if(document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply"))){document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply")).style.display="none"}if(document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"))){if(document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display=="none"){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex"}}else{document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex"}break;case"onCall":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock")).style.display="none";document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none";document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display="flex";if(!!this.themeData){document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=footer[this.bellStatus].color}break;case"quickReply":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply")).style.display="flex";document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none";break;case"remoteUnlock":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display="none";document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none";document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock")).style.display="flex";break}}},{key:"initThemeData",value:function initThemeData(){var _this8=this;console.log("-------------initThemeData");var isEditing=this.decoderState.state.isEditing;var _this$themeData3=this.themeData,header=_this$themeData3.header,footer=_this$themeData3.footer;var videoId=this.jSPlugin.id;var clientWidth=this.videoWidth;var ratioClient=clientWidth/1024;this.isNeedRenderHeader=_.findIndex(header[this.bellStatus].btnList,function(v){return v.isrender>0})>=0;this.isNeedRenderFooter=_.findIndex(footer[this.bellStatus].btnList,function(v){return v.isrender>0})>=0;if(this.isNeedRenderHeader){if(!document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){var headerContainer=document.createElement("div");headerContainer.setAttribute("id","".concat(this.jSPlugin.id,"-headControl"));headerContainer.setAttribute("class","header-controls");headerContainer.innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' class=\"header-controls-left\" style='display:flex;width:calc(100% - 100px);overflow:hidden;padding-left: 3%;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' class=\"header-controls-right\" style='display:flex;'></div>");console.log(this.jSPlugin.height);var headerHeight=this.jSPlugin.height*.2+"px";var headerStyle={height:headerHeight,display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#FFFFFF",width:"100%",position:"relative","margin-bottom":"-"+headerHeight,"align-items":"center",background:"transparent linear-gradient(180deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.00) 100%)"};headerContainer.style=styleToString$2(headerStyle);document.getElementById("".concat(videoId,"-wrap")).insertBefore(headerContainer,document.getElementById(videoId));var _checkTimer=setInterval(function(){if(window.EZUIKit[_this8.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(_checkTimer)}},50)}else{document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;width: calc(100% - 100px);padding-left: 3%;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' style='display:flex'></div>")}}else{if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))}}var footerHeight=this.jSPlugin.height*.3;if(this.isNeedRenderFooter){if(!document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){var footerContainer=document.createElement("div");footerContainer.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container"));footerContainer.setAttribute("class","ez-iframe-footer-container");var footerStyle={"min-height":footerHeight+"px","max-height":footerHeight+"px",position:"relative","margin-top":"-"+footerHeight+"px",display:"flex","flex-wrap":"wrap","justify-content":"space-between","z-index":999,top:0,color:"#FFFFFF",width:"100%","align-items":"center","background-image":"linear-gradient(180deg, rgba(0,0,0,0.00) 0%, rgba(0,0,0,0.60) 100%)","font-size":24*ratioClient+"px"};footerContainer.style=styleToString$2(footerStyle);footerContainer.innerHTML='\n            <div id="'.concat(this.jSPlugin.id,'-audioControls" class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n            ');insertAfter(footerContainer,document.getElementById(videoId))}else{if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-".concat(footerHeight,"px");if(this.bellStatus=="onCall"){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='\n              <div id="'.concat(this.jSPlugin.id,'-audioControls"  class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 4%;width:100%;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              ')}else{document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='\n              <div id="'.concat(this.jSPlugin.id,'-audioControls"  class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 4%;width:100%;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              ')}}}}else{if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))}}if(this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=header[this.bellStatus].backgroundColor;document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=header[this.bellStatus].color;header[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this8.renderHeader(item.iconId,item)}})}if(this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=footer[this.bellStatus].backgroundColor;document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=footer[this.bellStatus].color;footer[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this8.renderFooter(item.iconId,item)}})}if(this.themeData.customConfig.bellPoster==1&&!isEditing){this.jSPlugin.poster="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPbGh2AVJB-ABDcYtyw5gk899.svg";var checkTimer=setInterval(function(){if(window.EZUIKit[_this8.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer);_this8.jSPlugin.setPoster(_this8.jSPlugin.poster)}},50)}if(this.activeThemeStatus){this.initBellRing();window.addEventListener("click",this.autoPlayRing)}this.inited=true;this.getCallDeviceInfo()}},{key:"renderThemeData",value:function renderThemeData(){var _this9=this;var isEditing=this.decoderState.state.isEditing;var _this$themeData4=this.themeData,header=_this$themeData4.header,footer=_this$themeData4.footer;if(this.isNeedRenderHeader&&header){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=header[this.bellStatus].backgroundColor.replace("-diy","");document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=header[this.bellStatus].color.replace("-diy","");header[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this9.setDecoderState(_defineProperty({},item.iconId,_this9.decoderState.state[item.iconId]))}})}if(this.isNeedRenderFooter&&footer){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=footer[this.bellStatus].backgroundColor.replace("-diy","");document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=footer[this.bellStatus].color.replace("-diy","");document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=footer[this.bellStatus].color.replace("-diy","");footer[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this9.setDecoderState(_defineProperty({},item.iconId,_this9.decoderState.state[item.iconId]))}if(index==0&&!_this9.themeInited&&_this9.activeThemeStatus){var checkTimer=setInterval(function(){if(window.EZUIKit[_this9.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer);if(_this9.themeData.customConfig.bellPoster==1&&!isEditing){_this9.jSPlugin.pluginStatus.loadingClear()}else{_this9.jSPlugin.play()}_this9.themeInited=true}},50)}});if(this.jSPlugin.url.indexOf("hd.live")!==-1){this.setDecoderState({hd:true})}if(this.themeData.autoFocus>0){this.autoFocus=parseInt(this.themeData.autoFocus);this.startAutoFocus();document.getElementById("".concat(this.jSPlugin.id,"-wrap")).addEventListener("click",function(){_this9.stopAutoFocus()})}this.setDecoderState({cloudRec:matchEzopenUrl(this.jSPlugin.url).type==="cloud.rec",rec:matchEzopenUrl(this.jSPlugin.url).type==="rec",type:matchEzopenUrl(this.jSPlugin.url).type})}else{if(!this.themeInited&&this.activeThemeStatus){var _checkTimer2=setInterval(function(){if(window.EZUIKit[_this9.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(_checkTimer2);if(_this9.themeData&&_this9.themeData.customConfig&&_this9.themeData.customConfig.bellPoster==1&&!isEditing){_this9.jSPlugin.pluginStatus.loadingClear()}else{_this9.jSPlugin.play()}_this9.themeInited=true}},50)}}var checkTimer=setInterval(function(){if(window.EZUIKit[_this9.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer);_this9.jSPlugin.reSize(_this9.jSPlugin.params.width,_this9.jSPlugin.params.height)}},50)}},{key:"setThemeData",value:function setThemeData(options,bellStatus){this.themeData=options;if(bellStatus=="onCall"){this.bellStatus="onCall"}}},{key:"startAutoFocus",value:function startAutoFocus(){var _this10=this;var autoFocus=this.autoFocus;if(this.autoFocusTimer){clearTimeout(this.autoFocusTimer)}this.autoFocusTimer=setTimeout(function(){if(document.getElementById("".concat(_this10.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(_this10.jSPlugin.id,"-audioControls")).style.opacity=0;document.getElementById("".concat(_this10.jSPlugin.id,"-audioControls")).style.pointerEvents="none"}},autoFocus*1e3)}},{key:"stopAutoFocus",value:function stopAutoFocus(){if(document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1;document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"}if(this.autoFocusTimer){clearTimeout(this.autoFocusTimer)}this.startAutoFocus()}},{key:"editIcon",value:function editIcon(id,type,area){console.log("编辑组件",id,type,area);var newThemeData=this.themeData;console.log("themeData",this.themeData);var btnList=this.themeData[area][this.bellStatus].btnList;var _index=_.findIndex(btnList,function(item){return item.iconId===id});var tmp=btnList[_index];switch(type){case"delete":btnList[_index].isrender=0;break;case"right":var nextRightBtnIndex=-1;for(var i=_index+1;i<btnList.length;i++){if(btnList[i].part===btnList[_index].part&&btnList[i].isrender==1){nextRightBtnIndex=i;break}}if(nextRightBtnIndex!==-1){btnList[_index]=btnList[nextRightBtnIndex];btnList[nextRightBtnIndex]=tmp}break;case"left":var nextLeftBtnIndex=-1;for(var _i=_index-1;_i>=0;_i--){if(btnList[_i].part===btnList[_index].part&&btnList[_i].isrender==1){nextLeftBtnIndex=_i;break}}if(nextLeftBtnIndex!==-1){btnList[_index]=btnList[nextLeftBtnIndex];btnList[nextLeftBtnIndex]=tmp}break}console.log("new btnList",btnList);newThemeData[area][this.bellStatus].btnList=btnList;this.jSPlugin.Theme.changeTheme(newThemeData)}},{key:"countTime",value:function countTime(type){var start=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var that=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var recordDOM=document.createElement("div");recordDOM.id=this.jSPlugin.id+"time-area";recordDOM.className="time-area";recordDOM.innerHTML='<span class="dot"></span><span class="value">00:00</span>';if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(recordDOM)}}if(this.countTimer){clearInterval(this.countTimer)}if(type==="add"){var i=start;document.getElementById(that.jSPlugin.id+"time-area").style.display="flex";this.countTimer=setInterval(function(){++i;document.getElementById(that.jSPlugin.id+"time-area").children[1].innerHTML=formatSeconds(i)},1e3)}else if(type==="destroy"){if(this.countTimer){clearInterval(this.countTimer)}this.countTimer=undefined;if(document.getElementById(that.jSPlugin.id+"time-area")){document.getElementById(that.jSPlugin.id+"time-area").children[1].innerHTML="00:00";document.getElementById(that.jSPlugin.id+"time-area").style.display="none"}}function formatSeconds(value){var theTime=parseInt(value);var middle=0;var hour=0;var secondV="00";var minV="00";var hourV="00";if(theTime>59){middle=parseInt(theTime/60);theTime=parseInt(theTime%60);if(middle>59){hour=parseInt(middle/60);middle=parseInt(middle%60)}}secondV=parseInt(theTime)>9?parseInt(theTime):"0"+parseInt(theTime);minV=parseInt(middle)>9?parseInt(middle):"0"+parseInt(middle);hourV=parseInt(hour)>9?parseInt(hour):"0"+parseInt(hour);if(hour>0){return hourV+":"+minV+":"+secondV}else if(middle>0){return minV+":"+secondV}else{return"00:"+secondV}}}},{key:"editStart",value:function editStart(callback){console.log("----------editStart2");var audioControlsDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var audioControlsOnCallDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));document.getElementById("".concat(this.jSPlugin.id,"-headControl"));if(audioControlsDOM){audioControlsDOM.setAttribute("class","footer-controls themeEditing")}if(audioControlsOnCallDOM){audioControlsOnCallDOM.setAttribute("class","footer-controls themeEditing")}this.setDecoderState({isEditing:true})}},{key:"editEnd",value:function editEnd(callback){console.log("----------editEnd2");var audioControlsDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var headerMessageDOM=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));var audioControlsOnCallDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));if(headerMessageDOM){headerMessageDOM.setAttribute("class","header-controls")}if(audioControlsDOM){audioControlsDOM.setAttribute("class","footer-controls")}if(audioControlsOnCallDOM){audioControlsOnCallDOM.setAttribute("class","footer-controls")}}},{key:"fetchThemeData",value:function fetchThemeData(themeId){var _this11=this;var successCallback=function successCallback(data){if(data.meta.code==0&&data.data){_this11.activeThemeStatus=true;_this11.themeData=data.data;if(data.data.header){_this11.themeData.header=data.data.header;_this11.themeData.header[_this11.bellStatus].btnList=_this11.themeData.header[_this11.bellStatus].btnList.sort(function(a,b){return a.btnKey.split("-")[3]-b.btnKey.split("-")[3]})}if(data.data.footer){_this11.themeData.footer=data.data.footer;_this11.themeData.footer[_this11.bellStatus].btnList=_this11.themeData.footer[_this11.bellStatus].btnList.sort(function(a,b){return a.btnKey.split("-")[3]-b.btnKey.split("-")[3]})}if(!_this11.jSPlugin.capacity){setTimeout(function(){_this11.initThemeData();_this11.renderThemeData()},300)}else{_this11.initThemeData();_this11.renderThemeData()}}else{_this11.activeThemeStatus=false;_this11.jSPlugin.pluginStatus.loadingClear();_this11.setDecoderState({rejection:true});if(data.meta.code=="111021"){_this11.jSPlugin.pluginStatus.loadingSetText({text:"无效的模板id",color:"#fff"});_this11.activeThemeStatusTxt="无效的模板id"}else if(data.meta.code=="111023"){_this11.jSPlugin.pluginStatus.loadingSetText({text:"您的试用特权已到期，需前往轻应用控制台购买后使用。",color:"#fff"});_this11.activeThemeStatusTxt="试用特权已到期"}else{_this11.jSPlugin.pluginStatus.loadingSetText({text:"模板未激活，请先在开放平台轻应用控制台购买模板",color:"#fff"});_this11.activeThemeStatusTxt="模板未激活"}_this11.themeData=webCallData.data;_this11.initThemeData();_this11.renderThemeData()}};var errorCallback=function errorCallback(){_this11.renderThemeData()};templateDetailApi(this.jSPlugin,themeId,successCallback,errorCallback)}},{key:"getCallDeviceInfo",value:function getCallDeviceInfo(){var _this12=this;this.videoWidth/1024||1;var that=this;var deviceAPISuccess=function deviceAPISuccess(data){if(data.code==200&&data.data){console.log("---------getCallDeviceInfo");_this12.deviceInfoData=data.data;if(data.data.isEncrypt){setTimeout(function(){console.log("---------------------视频已加密");that.jSPlugin.pluginStatus&&that.jSPlugin.pluginStatus.loadingClear();that.jSPlugin.pluginStatus.loadingSetText({text:"视频已加密",color:"#fff"})},50)}if(document.getElementById("header-".concat(_this12.bellStatus,"-deviceCategory"))){document.getElementById("header-".concat(_this12.bellStatus,"-deviceCategory")).innerText=""+data.data.deviceName}}if(data.code==20018&&!_this12.jSPlugin.isWebConsole){_this12.userNoDevice()}};request(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:matchEzopenUrl(this.jSPlugin.url).deviceSerial},"",deviceAPISuccess)}},{key:"setHeaderText",value:function setHeaderText(headerText){var sizeRatio=this.videoWidth/1024||1;if(document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content"))){document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content")).innerHTML='<span style="font-size: '.concat(32*sizeRatio,'px;display: block">').concat(headerText,'</span><span style="font-size: ').concat(24*sizeRatio,"px;padding-top: ").concat(16*sizeRatio,'px;display: block;">').concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"","</span>")}}}]);return Call}();var PopupCustom=function(){function PopupCustom(jSPlugin,heightPop){_classCallCheck$1(this,PopupCustom);this.jSPlugin=jSPlugin;this.heightPop=heightPop||366;this.initPopupCustom()}_createClass$1(PopupCustom,[{key:"initPopupCustom",value:function initPopupCustom(){if(!document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom"))){this.randerPopup()}else{document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom")).style.display="flex"}}},{key:"randerPopup",value:function randerPopup(){var _this=this;var clientWidth=document.documentElement.clientWidth;var ratioClient=clientWidth/375||1;var oS=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(oS);oS.innerHTML="@keyframes slideContentUp {0%   {bottom: -".concat(366*ratioClient,"px;}\n        25%  {bottom: -").concat(244*ratioClient,"px;}\n        50%  {bottom: -").concat(122*ratioClient,"px;}\n        100% {bottom:0;}} .open-popup{animation:slideContentUp 0.3s 1 linear; -webkit-animation: slideContentUp 0.3s 1 linear;}");var wrapVideo=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));var objDOM=document.createElement("div");objDOM.style="display:flex;";objDOM.id="".concat(this.jSPlugin.id,"-wrap-popup-custom");objDOM.innerHTML='<div id="'.concat(this.jSPlugin.id,'-wrap-popup-custom-mask" style="height:100%;width:100%;position:fixed;top:0;left:0;z-index:9998;background-color: rgba(0,0,0,0.75);overflow:hidden;">\n        </div>\n        <div id="').concat(this.jSPlugin.id,'-wrap-popup-board" class="open-popup" style="bottom:0;height: ').concat(this.heightPop*ratioClient,'px;position:fixed;left: 0; width: 100%;background-color:#ffffff;z-index: 9999;border-radius: 16px 16px 0px 0px;">\n            <div style="margin-top: ').concat(20*ratioClient,"px;padding: 0 ").concat(15*ratioClient,'px;width: 100%;display:flex;flex-direction: row;align-items: center;">\n                <div id="').concat(this.jSPlugin.id,'-popup-board-close">\n                    <svg width="').concat(24*ratioClient,'px" height="').concat(24*ratioClient,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>icon/close</title>\n                        <g id="icon/close" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <g id="common/Close/Dark">\n                                <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                                <path d="M18.1871843,5.81281566 C18.4556698,6.08130112 18.4780436,6.50270075 18.2543057,6.7966719 L18.1871843,6.87347584 L13.0611458,12.0001458 L18.1871843,17.1265242 C18.4800776,17.4194174 18.4800776,17.8942911 18.1871843,18.1871843 C17.9186989,18.4556698 17.4972993,18.4780436 17.2033281,18.2543057 L17.1265242,18.1871843 L12.0001458,13.0611458 L6.87347584,18.1871843 C6.58058262,18.4800776 6.10570888,18.4800776 5.81281566,18.1871843 C5.54433021,17.9186989 5.52195643,17.4972993 5.7456943,17.2033281 L5.81281566,17.1265242 L10.9391458,12.0001458 L5.81281566,6.87347584 C5.51992245,6.58058262 5.51992245,6.10570888 5.81281566,5.81281566 C6.08130112,5.54433021 6.50270075,5.52195643 6.7966719,5.7456943 L6.87347584,5.81281566 L12.0001458,10.9391458 L17.1265242,5.81281566 C17.4194174,5.51992245 17.8942911,5.51992245 18.1871843,5.81281566 Z" id="形状结合" fill="#2C2C2C" fill-rule="nonzero"></path>\n                            </g>\n                        </g>\n                    </svg>\n                </div>\n                <div id="popup-board-title-content" style="width: ').concat(180*ratioClient,"px;font-size: ").concat(18*ratioClient,"px;margin-left: ").concat(59*ratioClient,'px;font-family: PingFangSC-Medium;color: #2C2C2C;font-weight: 500;text-align: center;"></div>\n            </div>\n            <div id="').concat(this.jSPlugin.id,'-popup-board-content" style="width:100%;padding: 0 ').concat(15*ratioClient,"px;height: ").concat((this.heightPop-48)*ratioClient,'px;box-sizing: border-box;display: flex;align-items: center;justify-content: center;flex-direction: column;"></div>\n        </div>\n        ');wrapVideo.appendChild(objDOM);document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom-mask")).onclick=function(){_this.closePopupCustom()};document.getElementById("".concat(this.jSPlugin.id,"-popup-board-close")).onclick=function(){_this.closePopupCustom()}}},{key:"closePopupCustom",value:function closePopupCustom(){var callBack=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){};callBack();var domWrap=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));var domPop=document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom"));if(domWrap&&domPop){domWrap.removeChild(domPop)}}},{key:"initPopupContent",value:function initPopupContent(title,dom){document.getElementById("popup-board-title-content").innerText=title||"";if(dom){document.getElementById("".concat(this.jSPlugin.id,"-popup-board-content")).appendChild(dom)}}}]);return PopupCustom}();var MobileQuickReplyEle=function(){function MobileQuickReplyEle(jSPlugin,switchFooter,videoWidth){_classCallCheck$1(this,MobileQuickReplyEle);this.jSPlugin=jSPlugin;this.videoWidth=videoWidth;this.switchFooter=switchFooter;this.toastCustom=new ToastCustom(jSPlugin,true);this.sendLoadingStats=false;this.quickReplyList=["你好，请将快递放在门口","你好，稍等","你好，请将快递放入小区快递柜","你好，请将外卖放在门口"];this.popupCustom=new PopupCustom(jSPlugin,366);if(!document.getElementById("mobile-quickReply-list")){this.popupCustom.initPopupContent("快捷回复",this.renderQuickReply());this.initQuickReply()}}_createClass$1(MobileQuickReplyEle,[{key:"initQuickReply",value:function initQuickReply(){if(!document.getElementById("mobile-quickReply-list-item-0")){this.getQuickReplyList()}}},{key:"renderQuickReply",value:function renderQuickReply(){document.documentElement.clientWidth;var objDOM=document.createElement("div");objDOM.style="width:100%;";objDOM.id="mobile-quickReply-list";objDOM.innerHTML='<div id="mobile-quickReply-content" style="display: block;width:100%;margin-bottom: 36px;"></div>\n    <div id="mobile-quickReply-loading" style="display: none;width:100%;"></div>\n    <div id="mobile-quickReply-loaderror" style="display: none;width:100%;"></div>';return objDOM}},{key:"matchQuickReplyBtn",value:function matchQuickReplyBtn(){var _this=this;var sizeRatio=this.videoWidth/375||1;var contentDom=document.getElementById("mobile-quickReply-content");if(this.quickReplyList&&this.quickReplyList.length>0){this.quickReplyList.forEach(function(item,index){var objDOM=document.createElement("div");objDOM.id="mobile-quickReply-list-item-".concat(index);objDOM.style="margin: ".concat(14*sizeRatio,"px 0;\n            padding: ").concat(12*sizeRatio,"px ").concat(15*sizeRatio,"px;min-height: ").concat(50*sizeRatio,"px;width:100%;\n            background: #ffffff;border-radius: ").concat(25*sizeRatio,"px;display: flex;align-items: center;\n            box-sizing: border-box;font-size:").concat(16*sizeRatio,"px;color: #2c2c2c;");objDOM.innerHTML='\n            <svg id="mobile-quickReply-icon-'.concat(index,'" width="').concat(24*sizeRatio,'px" height="').concat(24*sizeRatio,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <title>icon/快捷回复播放</title>\n                    <g id="icon/快捷回复播放" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                        <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                        <path d="M18.9877488,4.36609064 C21.024173,6.11256041 22.2495,8.93566941 22.2495,12.0024 C22.2495,15.066006 21.0272636,17.8857191 18.9943957,19.6331539 C18.6802816,19.9031635 18.2067557,19.8674098 17.9367461,19.5532957 C17.6667365,19.2391816 17.7024902,18.7656557 18.0166043,18.4956461 C19.708691,17.0411437 20.7495,14.6399857 20.7495,12.0024 C20.7495,9.36223947 19.7060688,6.95821183 18.0112512,5.50470936 C17.6968304,5.23505702 17.6605383,4.76157212 17.9301906,4.44715124 C18.199843,4.13273036 18.6733279,4.09643829 18.9877488,4.36609064 Z M12.2442357,5.87579772 L12.2496,6.0179 L12.2496,17.9819 C12.2496,19.4241617 10.6173522,20.2281184 9.48072691,19.4058312 L9.36879527,19.318145 L5.5996,16.1243865 L3.4996,16.1249 C2.581479,16.1249 1.8284129,15.4182283 1.75540159,14.518493 L1.7496,14.3749 L1.7496,9.6249 C1.7496,8.70699712 2.45696726,7.95373471 3.35611134,7.88070323 L3.4996,7.8749 L5.5996,7.8743865 L9.36863059,4.68279453 C10.4692948,3.74976994 12.1377395,4.4768074 12.2442357,5.87579772 Z M10.3952894,5.79039368 L10.338321,5.82721597 L6.35932099,9.19721597 C6.33078024,9.2209397 6.30781291,9.23786997 6.28390041,9.25347262 L6.35932099,9.19721597 C6.32908972,9.22282023 6.29742069,9.24561685 6.26463127,9.26563212 C6.24087088,9.28012218 6.21634729,9.29327785 6.19105714,9.30506452 C6.18413632,9.30829747 6.1773583,9.31133066 6.1705483,9.31425704 C6.10964585,9.34044144 6.04445985,9.35881628 5.97637056,9.36805338 C5.95756973,9.37054904 5.94148484,9.37214804 5.92538001,9.37322799 L5.8746,9.3749 L3.4996,9.3749 C3.38149734,9.3749 3.28218291,9.45734262 3.25621762,9.56766695 L3.2496,9.6249 L3.2496,14.3749 C3.2496,14.4934644 3.33170357,14.592449 3.44222164,14.6183106 L3.4996,14.6249 L5.8746,14.6249 L5.92192315,14.6263483 C5.93923255,14.627429 5.95652113,14.629109 5.97375563,14.6313909 L5.8746,14.6249 C5.9789469,14.6249 6.0783167,14.6462095 6.168595,14.6847142 C6.18010037,14.6895946 6.19235048,14.695194 6.2044823,14.7011451 C6.22547728,14.7114805 6.24528995,14.7223727 6.26453263,14.7341072 C6.266314,14.735195 6.26795143,14.7362034 6.26958602,14.7372187 L6.28086895,14.7443598 C6.30587317,14.7605037 6.32985559,14.7780945 6.3526978,14.7970136 L6.35940473,14.802655 L10.3380567,18.1733603 C10.4825575,18.2956302 10.695338,18.2179271 10.7408386,18.0492187 L10.7496,17.9819 L10.7496,6.0179 C10.7496,5.82820058 10.5532313,5.71607381 10.3952894,5.79039368 Z M15.9361636,7.38657032 C17.3580982,8.28109203 18.2498,10.0509458 18.2498,12.0044 C18.2498,13.9607796 17.3563865,15.7307985 15.9326223,16.6154437 C15.5807928,16.8340503 15.1183629,16.7260519 14.8997563,16.3742223 C14.6811497,16.0223928 14.7891481,15.5599629 15.1409777,15.3413563 C16.1036696,14.7431949 16.7498,13.4630899 16.7498,12.0044 C16.7498,10.5466827 16.103548,9.26399865 15.1374364,8.65622968 C14.7868297,8.43566726 14.6814079,7.97264316 14.9019703,7.62203641 C15.1225327,7.27142966 15.5855568,7.1660079 15.9361636,7.38657032 Z" id="形状结合" fill="#2C2C2C" fill-rule="nonzero"></path>\n                    </g>\n                </svg>\n            <span id="mobile-quickReply-name-').concat(index,'" style="padding-left: 5px;">').concat(item.voiceName,"</span>");objDOM.onclick=function(){console.log("item:"+item);if(!_this.sendLoadingStats){_this.setBtnCheckStatus(index);_this.sendQuickReply(item)}};contentDom.appendChild(objDOM)})}}},{key:"setBtnCheckStatus",value:function setBtnCheckStatus(checked){var _this2=this;var domItem="";this.quickReplyList.forEach(function(item,index){domItem=document.getElementById("mobile-quickReply-list-item-".concat(index));if(index==checked){domItem.style.background="#F4F6FC";domItem.style.color="#648FFC";_this2.setBtnCheckLoding(0,index)}else{domItem.style.background="#ffffff";domItem.style.color="#2c2c2c"}})}},{key:"setBtnCheckLoding",value:function setBtnCheckLoding(status,index){console.log(index);var sizeRatio=this.videoWidth/375||1;if(index>-1){var domItem=document.getElementById("mobile-quickReply-list-item-".concat(index));var domItemName=document.getElementById("mobile-quickReply-name-".concat(index));var domItemIcon=document.getElementById("mobile-quickReply-icon-".concat(index));if(status==1){var domItemIconLoading=document.getElementById("mobile-quickReply-icon-loading-".concat(index));if(!!domItemIconLoading&&!!domItemName){var objDOM=document.createElement("span");objDOM.id="mobile-quickReply-icon-".concat(index);objDOM.style="height:".concat(24*sizeRatio,"px;");objDOM.innerHTML='\n                <svg width="'.concat(24*sizeRatio,'px" height="').concat(24*sizeRatio,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <title>icon/快捷回复播放</title>\n                    <g id="icon/快捷回复播放" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                        <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                        <path d="M18.9877488,4.36609064 C21.024173,6.11256041 22.2495,8.93566941 22.2495,12.0024 C22.2495,15.066006 21.0272636,17.8857191 18.9943957,19.6331539 C18.6802816,19.9031635 18.2067557,19.8674098 17.9367461,19.5532957 C17.6667365,19.2391816 17.7024902,18.7656557 18.0166043,18.4956461 C19.708691,17.0411437 20.7495,14.6399857 20.7495,12.0024 C20.7495,9.36223947 19.7060688,6.95821183 18.0112512,5.50470936 C17.6968304,5.23505702 17.6605383,4.76157212 17.9301906,4.44715124 C18.199843,4.13273036 18.6733279,4.09643829 18.9877488,4.36609064 Z M12.2442357,5.87579772 L12.2496,6.0179 L12.2496,17.9819 C12.2496,19.4241617 10.6173522,20.2281184 9.48072691,19.4058312 L9.36879527,19.318145 L5.5996,16.1243865 L3.4996,16.1249 C2.581479,16.1249 1.8284129,15.4182283 1.75540159,14.518493 L1.7496,14.3749 L1.7496,9.6249 C1.7496,8.70699712 2.45696726,7.95373471 3.35611134,7.88070323 L3.4996,7.8749 L5.5996,7.8743865 L9.36863059,4.68279453 C10.4692948,3.74976994 12.1377395,4.4768074 12.2442357,5.87579772 Z M10.3952894,5.79039368 L10.338321,5.82721597 L6.35932099,9.19721597 C6.33078024,9.2209397 6.30781291,9.23786997 6.28390041,9.25347262 L6.35932099,9.19721597 C6.32908972,9.22282023 6.29742069,9.24561685 6.26463127,9.26563212 C6.24087088,9.28012218 6.21634729,9.29327785 6.19105714,9.30506452 C6.18413632,9.30829747 6.1773583,9.31133066 6.1705483,9.31425704 C6.10964585,9.34044144 6.04445985,9.35881628 5.97637056,9.36805338 C5.95756973,9.37054904 5.94148484,9.37214804 5.92538001,9.37322799 L5.8746,9.3749 L3.4996,9.3749 C3.38149734,9.3749 3.28218291,9.45734262 3.25621762,9.56766695 L3.2496,9.6249 L3.2496,14.3749 C3.2496,14.4934644 3.33170357,14.592449 3.44222164,14.6183106 L3.4996,14.6249 L5.8746,14.6249 L5.92192315,14.6263483 C5.93923255,14.627429 5.95652113,14.629109 5.97375563,14.6313909 L5.8746,14.6249 C5.9789469,14.6249 6.0783167,14.6462095 6.168595,14.6847142 C6.18010037,14.6895946 6.19235048,14.695194 6.2044823,14.7011451 C6.22547728,14.7114805 6.24528995,14.7223727 6.26453263,14.7341072 C6.266314,14.735195 6.26795143,14.7362034 6.26958602,14.7372187 L6.28086895,14.7443598 C6.30587317,14.7605037 6.32985559,14.7780945 6.3526978,14.7970136 L6.35940473,14.802655 L10.3380567,18.1733603 C10.4825575,18.2956302 10.695338,18.2179271 10.7408386,18.0492187 L10.7496,17.9819 L10.7496,6.0179 C10.7496,5.82820058 10.5532313,5.71607381 10.3952894,5.79039368 Z M15.9361636,7.38657032 C17.3580982,8.28109203 18.2498,10.0509458 18.2498,12.0044 C18.2498,13.9607796 17.3563865,15.7307985 15.9326223,16.6154437 C15.5807928,16.8340503 15.1183629,16.7260519 14.8997563,16.3742223 C14.6811497,16.0223928 14.7891481,15.5599629 15.1409777,15.3413563 C16.1036696,14.7431949 16.7498,13.4630899 16.7498,12.0044 C16.7498,10.5466827 16.103548,9.26399865 15.1374364,8.65622968 C14.7868297,8.43566726 14.6814079,7.97264316 14.9019703,7.62203641 C15.1225327,7.27142966 15.5855568,7.1660079 15.9361636,7.38657032 Z" id="形状结合" fill="#2C2C2C" fill-rule="nonzero"></path>\n                    </g>\n                </svg>\n                ');domItem.insertBefore(objDOM,domItemName)}}else{if(!!domItemIcon&&!!domItemName){domItem.removeChild(domItemIcon);var _objDOM=document.createElement("span");_objDOM.id="mobile-quickReply-icon-loading-".concat(index);_objDOM.style="height:".concat(20*sizeRatio,"px;width: ").concat(24*sizeRatio,"px;");_objDOM.innerHTML='<svg width="'.concat(20*sizeRatio,'" height="').concat(20*sizeRatio,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#666666" p-id="2400"></path></svg>');domItem.insertBefore(_objDOM,domItemName)}}}}},{key:"getQuickReplyList",value:function getQuickReplyList(){var _this3=this;console.log("getQuickReplyList");this.madeLoadingDom(0);var successCallback=function successCallback(data){if(data&&data.code==200){var quickReplyListTmd=data.data||[];var itemArr=[];data.data.forEach(function(item,index){itemArr=item.voiceName.split("_");quickReplyListTmd[index].voiceName=itemArr[1]});_this3.quickReplyList=quickReplyListTmd;setTimeout(function(){_this3.madeLoadingDom(2)},500)}else{_this3.madeLoadingDom(1)}};var errorCallback=function errorCallback(err){console.log(err);_this3.madeLoadingDom(1)};voiceQuery(this.jSPlugin,successCallback,errorCallback)}},{key:"madeLoadingDom",value:function madeLoadingDom(status){var _this4=this;var sizeRatio=this.videoWidth/375||1;if(status==0){document.getElementById("mobile-quickReply-content").style.display="none";document.getElementById("mobile-quickReply-loaderror").style.display="none";document.getElementById("mobile-quickReply-loading").style.display="block";if(!document.getElementById("mobile-quickReply-loading-box")){var objDOM=document.createElement("div");objDOM.id="mobile-quickReply-loading-box";objDOM.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: row;";objDOM.innerHTML='<div class="" style="heigth:'.concat(20*sizeRatio,'px">\n                <svg width="').concat(20*sizeRatio,'" height="').concat(20*sizeRatio,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#666666" p-id="2400"></path></svg>   \n            </div>\n            <div style="font-size: ').concat(16*sizeRatio,"px;margin-left:",10,'px;color:#666666;">正在加载，请稍候</div>');document.getElementById("mobile-quickReply-loading").appendChild(objDOM)}}else if(status==1){document.getElementById("mobile-quickReply-content").style.display="none";document.getElementById("mobile-quickReply-loading").style.display="none";document.getElementById("mobile-quickReply-loaderror").style.display="block";if(!document.getElementById("mobile-quickReply-loaderror-box")){var _objDOM2=document.createElement("div");_objDOM2.id="mobile-quickReply-loaderror-box";_objDOM2.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: column;";_objDOM2.innerHTML='<div style="">\n                <img style="width:'.concat(186*sizeRatio,"px;height:").concat(120*sizeRatio,'px;" src="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPZ34KAAStrAAA0pZ5cGTw167.png" />\n            </div>\n            <div style="font-size: ').concat(16*sizeRatio,'px;color: #666666;">\n                <span>加载失败 </span>\n                <span id="mobile-quickReply-loaderror-reload" \n                style="color: #648FFC;-webkit-tap-highlight-color: transparent;">点击重试</span>\n            </div>');document.getElementById("mobile-quickReply-loaderror").appendChild(_objDOM2);document.getElementById("mobile-quickReply-loaderror-reload").onclick=function(){_this4.getQuickReplyList()}}}else{document.getElementById("mobile-quickReply-loading").style.display="none";document.getElementById("mobile-quickReply-loaderror").style.display="none";document.getElementById("mobile-quickReply-content").style.display="block";this.matchQuickReplyBtn()}}},{key:"sendQuickReply",value:function sendQuickReply(data){var _this5=this;this.sendLoadingStats=true;var successCallback=function successCallback(data){_this5.sendLoadingStats=false;if(data&&data.code==200){_this5.toastCustom.initToastContent("快捷回复成功")}else{_this5.toastCustom.initToastContent("快捷回复失败，请重试")}_this5.popupCustom.closePopupCustom()};var errorCallback=function errorCallback(err){console.log(err);_this5.sendLoadingStats=false;_this5.toastCustom.initToastContent("快捷回复失败，请重试");_this5.popupCustom.closePopupCustom()};voiceSend(this.jSPlugin,data.fileUrl,successCallback,errorCallback)}},{key:"closeQuickReplyEle",value:function closeQuickReplyEle(){this.popupCustom.closePopupCustom()}}]);return MobileQuickReplyEle}();var MobileRemoteUnlockEle=function(){function MobileRemoteUnlockEle(jSPlugin,switchFooter,videoWidth){_classCallCheck$1(this,MobileRemoteUnlockEle);this.jSPlugin=jSPlugin;this.videoWidth=videoWidth;this.switchFooter=switchFooter;this.toastCustom=new ToastCustom(jSPlugin,true);this.lockStatus=false;this.popupCustom=new PopupCustom(jSPlugin,265);this.popupCustom.initPopupContent("远程开锁",this.renderRemoteUnlock());this.renderRemoteUnlockSlide()}_createClass$1(MobileRemoteUnlockEle,[{key:"initRemoteUnlock",value:function initRemoteUnlock(){if(!document.getElementById("mobile-remoteUnlock-content")){this.renderRemoteUnlock()}else{this.madeSlideEvent()}}},{key:"renderRemoteUnlock",value:function renderRemoteUnlock(){var sizeRatio=this.videoWidth/1024||1;var objDOM=document.createElement("div");objDOM.style="width:100%;";objDOM.id="mobile-remoteUnlock-box";objDOM.innerHTML='<div style="width:100%;display:flex;flex-direction:row;align-items: center;">\n        <div id="mobile-remoteUnlock-content" style="display: block;width:calc(100% - '.concat(160*sizeRatio,"px);margin: 0 ").concat(24*sizeRatio,'px;"></div>\n    </div>');return objDOM}},{key:"renderRemoteUnlockSlide",value:function renderRemoteUnlockSlide(){var sizeRatio=this.videoWidth/375||1;var contentDom=document.getElementById("mobile-remoteUnlock-content");var objDOM=document.createElement("div");objDOM.id="mobile-remoteUnlock-content-slide";objDOM.style="width: 100%;display: flex;justify-content: center;padding: 0 ".concat(15*sizeRatio,"px");objDOM.innerHTML='<div id="mobile-remoteUnlock-slide-box" style="width: 100%;line-height: '.concat(60*sizeRatio,"px;height: ").concat(60*sizeRatio,"px;border: 1px solid rgba(100,143,252,1);border-radius: ").concat(30*sizeRatio,'px;position: relative;text-align: center;">\n        <div id="mobile-remoteUnlock-slide-bgColor" style="border-radius: ').concat(30*sizeRatio,"px;width: ").concat(44*sizeRatio,"px;height: ").concat(60*sizeRatio,'px;position: absolute;left: 0;top: 0;"></div>\n        <div id="mobile-remoteUnlock-slide-tips" style="height: ').concat(60*sizeRatio,"px;line-height: ").concat(60*sizeRatio,"px;font-size: ").concat(14*sizeRatio,"px;border-radius: ").concat(30*sizeRatio,'px;position: absolute;text-align: center;user-select: none;color: #666666;width: 100%;">右滑开锁</div>\n        <div id="mobile-remoteUnlock-slide-ball" style="top: ').concat(8*sizeRatio,"px;left: ").concat(8*sizeRatio,"px;width: ").concat(44*sizeRatio,"px;height: ").concat(44*sizeRatio,'px;background: #598FFF;position: absolute;text-align: center;border-radius:50%;display:flex;align-items: center;justify-content: center;">\n            <svg id="slide-ball-start" style="display: inline;" width="').concat(24*sizeRatio,'px" height="').concat(24*sizeRatio,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title>icon/箭头向右</title>\n                <g id="icon/箭头向右" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                    <rect id="矩形" fill="#000000" fill-rule="nonzero" opacity="0" x="0" y="0" width="24" height="24"></rect>\n                    <path d="M14.2841136,6.3689007 L19.9432338,12.0287579 L14.2863796,17.6856122 L12.8580239,16.2572565 L16.114,12.9999007 L4.00000001,13 L4.00000001,11 L16.058,10.9999007 L12.8557579,7.79725638 L14.2841136,6.3689007 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                </g>\n            </svg>\n            <svg id="slide-ball-end" style="display: none;" width="').concat(20*sizeRatio,'" height="').concat(20*sizeRatio,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#648ffc" p-id="2400"></path></svg>\n        </div>\n    </div>');contentDom.appendChild(objDOM);this.madeSlideEvent()}},{key:"madeSlideEvent",value:function madeSlideEvent(){var sizeRatio=this.videoWidth/375||1;var box=document.getElementById("mobile-remoteUnlock-slide-box");var bgColor=document.getElementById("mobile-remoteUnlock-slide-bgColor");var tips=document.getElementById("mobile-remoteUnlock-slide-tips");var ball=document.getElementById("mobile-remoteUnlock-slide-ball");var that=this;function success(){that.lockStatus=true;document.getElementById("slide-ball-start").style.display="none";document.getElementById("slide-ball-end").style.display="inline";bgColor.style.width=box.clientWidth+"px";bgColor.style.backgroundColor="#598FFF";box.style.border="0";ball.style.backgroundColor="#ffffff";tips.textContent="正在开锁";tips.style.color="#ffffff";ball.ontouchstart=null;that.sendRemoteUnlockApi()}ball.ontouchstart=function(e){console.log("ontouchstart");var e=e||window.event;var posx=e.touches[0].pageX;ball.style.transition="";bgColor.style.transition="";document.ontouchmove=function(e){var e=e||window.event;var x=e.touches[0].pageX-box.offsetLeft-posx;var max=box.clientWidth-ball.clientWidth-8*sizeRatio;if(x<=0){x=0}if(x>=max){x=max}ball.style.left=x+"px";if(x==max&&!that.lockStatus){success()}};document.ontouchend=function(){if(!that.lockStatus){bgColor.style.width=0+"px";ball.style.left=8*sizeRatio+"px";ball.style.transition="left 0.6s linear";bgColor.style.transition="width 0.6s linear"}document.ontouchend=null;document.ontouchmove=null}}}},{key:"resetRemoteUnlockSlide",value:function resetRemoteUnlockSlide(){var sizeRatio=this.videoWidth/1024||1;this.lockStatus=false;var box=document.getElementById("mobile-remoteUnlock-slide-box");var bgColor=document.getElementById("mobile-remoteUnlock-slide-bgColor");var tips=document.getElementById("mobile-remoteUnlock-slide-tips");var ball=document.getElementById("mobile-remoteUnlock-slide-ball");bgColor.style.width=0+"px";ball.style.left=8*sizeRatio+"px";tips.textContent="右滑开锁";tips.style.color="#666666";document.getElementById("slide-ball-start").style.display="inline";document.getElementById("slide-ball-end").style.display="none";bgColor.style.backgroundColor="#FFFFFF";box.style.border="1px solid rgba(255,255,255,1)";ball.style.backgroundColor="#598FFF"}},{key:"sendRemoteUnlockApi",value:function sendRemoteUnlockApi(){var _this=this;console.log("下发远程开锁");var successCallback=function successCallback(data){if(data&&data.code==200){_this.toastCustom.initToastContent("开锁成功")}else{_this.toastCustom.initToastContent("开锁失败，请重试")}_this.popupCustom.closePopupCustom()};var errorCallback=function errorCallback(err){console.log(err);_this.toastCustom.initToastContent("开锁失败，请重试");_this.popupCustom.closePopupCustom()};remoteDoor(this.jSPlugin,successCallback,errorCallback)}},{key:"closeRemoteUnlock",value:function closeRemoteUnlock(){this.popupCustom.closePopupCustom()}}]);return MobileRemoteUnlockEle}();var data$2={customConfig:{defaultMicro:0,defaultPlay:0,maxTalkTime:0,bellPoster:0,maxBellTime:0},header:{onBell:{color:"#2c2c2c",backgroundColor:"#00000000 linear-gradient(180deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.00) 100%)",activeColor:"#1890FF",autoFocus:0,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"ringStatus",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"callStatus",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]}},footer:{onBell:{color:"#2c2c2c",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"quickReply",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"rejection",part:"left",defaultActive:0,isrender:1,color:"#2C2C2C",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"answer",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-3",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000080",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"mute",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"hangUp",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]}}};var mobileCallData={data:data$2};var styleToString$1=function styleToString(obj){var styleString="";Object.keys(obj).map(function(item,index){styleString+="".concat(item,":").concat(obj[item]).concat(index<Object.keys(obj).length-1?";":"")});return styleString};var MobileCall=function(){function MobileCall(jSPlugin,themeData,setDecoderState,decoderState){var _this=this;_classCallCheck$1(this,MobileCall);_defineProperty(this,"switchCallStatus",function(value){var editStatus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var _this$themeData=_this.themeData,header=_this$themeData.header,footer=_this$themeData.footer;var muteData=null;if(value=="onCall"){console.log("接听");_this.bellStatus="onCall";_this.switchFooter("onCall");footer[_this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this.renderFooter(item.iconId,item)}if(item.iconId=="mute"){muteData=item}});header[_this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this.renderHeader(item.iconId,item)}});var bellHeaderDom=document.getElementById("".concat(_this.jSPlugin.id,"-header-onBell"));if(bellHeaderDom){bellHeaderDom.parentElement.removeChild(bellHeaderDom)}if(_this.themeData.customConfig.bellPoster==1){if(document.getElementById("bellring-icon")){document.getElementById("".concat(_this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}}if(_this.themeData.customConfig.defaultMicro==0&&muteData){_this.muteCommon(muteData)}else{_this.setDecoderState({mute:false},muteData.backgroundColor)}_this.removeBellRing();_this.miniRecCloseClick()}else{console.log("响铃");_this.bellStatus="onBell";_this.jSPlugin.Theme.changeTheme(_this.themeData,editStatus)}});_defineProperty(this,"muteCommon",function(btnData){var _this$decoderState$st=_this.decoderState.state,talk=_this$decoderState$st.talk,sound=_this$decoderState$st.sound;if(talk){console.log("结束对讲");_this.setDecoderState({talk:false,mute:true},btnData.backgroundColor);_this.jSPlugin.Talk.stopTalk();if(!sound){_this.jSPlugin.openSound()}_this.setDecoderState({sound:true})}else{_this.setDecoderState({talk:false,mute:true},btnData.backgroundColor);if(!sound){_this.jSPlugin.openSound()}_this.setDecoderState({sound:true})}});_defineProperty(this,"autoPlayRing",function(){console.log("autoPlayRing");var bellringAudio=document.getElementById("bellring-audio");if(!!bellringAudio){bellringAudio.muted=false;bellringAudio.src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3";if(bellringAudio.paused){bellringAudio.play()}}var isAppleDevice=_this.checkIsAppleDevice()||false;if(isAppleDevice){window.removeEventListener("touchstart",_this.autoPlayRing)}else{window.removeEventListener("click",_this.autoPlayRing)}});this.jSPlugin=jSPlugin;this.videoWidth=jSPlugin.width;this.videoHeight=jSPlugin.height;this.themeData=themeData;this.setDecoderState=setDecoderState;this.decoderState=decoderState;this.isNeedRenderHeader=false;this.isNeedRenderFooter=false;this.autoFocus=0,this.autoFocusTimer=null,this.bellStatus="onBell",this.recordTimer=null;this.nextRate=1;this.themeInited=false;this.inited=false;this.miniRecStatus="rec";this.activeThemeStatus=true;this.activeThemeStatusTxt="模板未激活";this.miniRecNum=0;this.toastCustom=new ToastCustom(jSPlugin,true)}_createClass$1(MobileCall,[{key:"initBellRing",value:function initBellRing(){var _this2=this;var _this$decoderState$st2=this.decoderState.state,play=_this$decoderState$st2.play,isEditing=_this$decoderState$st2.isEditing;var clientWidth=this.videoWidth;var ratioClient=clientWidth/375;this.maxBellTime=this.themeData.customConfig.maxBellTime*1e3;var bellringDom=document.getElementById("bellring");var bellringAudioDom=document.getElementById("bellring-audio");if(!bellringDom&&!bellringAudioDom){if(!!this.jSPlugin.isNeedBellRing){var objDOM=document.createElement("div");objDOM.id="bellring";objDOM.innerHTML='<div>\n          <audio id="bellring-audio" loop autoplay>\n            <source src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3" type="audio/mpeg">\n          </audio>\n          </div>';document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(objDOM)}if(this.themeData.customConfig.bellPoster==1&&!isEditing){var clientHeight=clientWidth*1.8;var headerHeight=6;if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){headerHeight=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+clientHeight*.1+6}var bellTop=headerHeight+(this.videoHeight-130*ratioClient)/2;var objIconDOM=document.createElement("div");objIconDOM.id="bellring-icon";objIconDOM.style="position: absolute;pointer-events: none;background: none;width: 100%;\n          position: absolute;top: ".concat(bellTop,"px;display: flex;align-items: center;justify-content: center;");objIconDOM.innerHTML='<div style="width: '.concat(130*ratioClient,"px;height: ").concat(130*ratioClient,'px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.2);border-radius: 50%;">\n            <div style="width: ').concat(80*ratioClient,"px;height: ").concat(80*ratioClient,'px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.3);border-radius: 50%;">\n              <svg width="').concat(40*ratioClient,'px" height="').concat(40*ratioClient,'px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <title>icon/响铃</title>\n                  <g id="icon/响铃" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                      <polygon id="Path" points="0 0 40.0000002 0 40.0000002 40.0000002 0 40.0000002"></polygon>\n                      <path d="M20.0000001,4.25000002 C22.0363461,4.25000002 23.698175,5.84879552 23.8000507,7.8591997 L23.8050001,8.05500003 L23.805316,8.99953253 C27.1874196,9.97041766 29.6921839,13.0354462 29.80936,16.723731 L29.80936,16.723731 L29.8133335,16.9800001 L29.8133335,21.6416668 C29.8133335,22.3259481 30.0858837,22.9835569 30.5703302,23.4680033 L30.5703302,23.4680033 L31.6386635,24.5363367 C32.338953,25.2366262 32.760721,26.1675592 32.8273086,27.1785295 L32.8273086,27.1785295 L32.8350001,27.4233334 C32.8350001,29.577547 31.0892137,31.3233335 28.9350001,31.3233335 L28.9350001,31.3233335 L24.5666667,31.323 L24.5650266,31.3951531 C24.4527075,33.8194458 22.4520933,35.7500001 20.0000001,35.7500001 C17.5482065,35.7500001 15.5473098,33.8197367 15.4349743,31.3967059 L15.4326667,31.323 L11.0666667,31.3233335 C9.06159524,31.3233335 7.39851917,29.8069287 7.18810198,27.8229374 L7.17194359,27.6230185 L7.1666667,27.4233334 C7.1666667,26.3411154 7.59733134,25.3020086 8.36300328,24.5363367 L8.36300328,24.5363367 L9.43133662,23.4680033 C9.91578309,22.9835569 10.1883334,22.3259481 10.1883334,21.6416668 L10.1883334,21.6416668 L10.1883334,16.9800001 C10.1883334,13.1909619 12.7263704,9.99530436 16.1948593,8.99965364 L16.1950001,8.05500003 C16.1950001,5.95360729 17.8979654,4.25000002 20.0000001,4.25000002 Z M23.0656667,31.323 L16.9336667,31.323 L16.9352114,31.3619281 C17.0285826,32.9723844 18.3649772,34.2500001 20.0000001,34.2500001 C21.6352227,34.2500001 22.9714318,32.9721919 23.0647896,31.3604131 L23.0656667,31.323 Z M21.5116668,10.1783334 L18.4900001,10.1783334 C14.7336124,10.1783334 11.6883334,13.2231481 11.6883334,16.9800001 L11.6883334,16.9800001 L11.6883334,21.6416668 C11.6883334,22.7238848 11.2576687,23.7629916 10.4919968,24.5286635 L10.4919968,24.5286635 L9.42366346,25.5969969 C8.93921698,26.0814433 8.6666667,26.7390521 8.66637526,27.402427 L8.66637526,27.402427 L8.67048222,27.560237 C8.74130967,28.8268108 9.79171396,29.8233335 11.0666667,29.8233335 L11.0666667,29.8233335 L23.7906939,29.8222289 C23.8004164,29.8218553 23.8101862,29.8216668 23.8200001,29.8216668 L23.8486667,29.823 L28.9350001,29.8233335 C30.2055455,29.8233335 31.2450456,28.8367727 31.329826,27.609522 L31.3354106,27.4481422 L31.3293607,27.2529336 C31.2880301,26.6292837 31.0210852,26.0400787 30.5780034,25.5969969 L30.5780034,25.5969969 L29.50967,24.5286635 C28.7439981,23.7629916 28.3133335,22.7238848 28.3133335,21.6416668 L28.3133335,21.6416668 L28.3134279,16.9919039 L28.3098332,16.759466 C28.1934023,13.0970787 25.1864454,10.1783334 21.5116668,10.1783334 L21.5116668,10.1783334 Z M20.0000001,5.75000002 C18.7795808,5.75000002 17.7813801,6.69770708 17.7003155,7.89717688 L17.6950001,8.05500003 L17.6952875,8.7158769 C17.9568453,8.69103758 18.2219393,8.67833337 18.4900001,8.67833337 L18.4900001,8.67833337 L21.5116668,8.67833337 C21.7792577,8.67833337 22.0439466,8.69101238 22.3051575,8.71580951 L22.3050001,8.05500003 C22.3050001,6.7819079 21.273481,5.75000002 20.0000001,5.75000002 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                  </g>\n              </svg>\n            </div>\n          </div>');document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(objIconDOM);if(play&&this.bellStatus=="onBell"){this.jSPlugin.pause()}}else{if(document.getElementById("bellring-icon")){document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}}setTimeout(function(){var _this2$decoderState$s=_this2.decoderState.state,isEditing=_this2$decoderState$s.isEditing,rejection=_this2$decoderState$s.rejection;if(_this2.bellStatus=="onBell"&&!rejection){_this2.removeBellRing();if(!isEditing){_this2.answerOvertime()}}},this.maxBellTime)}}},{key:"removeBellRing",value:function removeBellRing(){if(!!document.getElementById("bellring")){document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring"))}if(!!document.getElementById("bellring-icon")){document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}}},{key:"getMiniCallTimeUrl",value:function getMiniCallTimeUrl(){console.log("--------------getMiniCallTimeUrl");if(this.jSPlugin.url.indexOf("hd.live")!==-1){this.recUrl=this.jSPlugin.url.replace("hd.live","rec")}else{this.recUrl=this.jSPlugin.url.replace("live","rec")}if(!!this.jSPlugin.callTime){var callTimeCur=parseInt(this.jSPlugin.callTime);var endTime=callTimeCur+5*1e3;var beginTime=callTimeCur-10*1e3;var begin=new Date(beginTime).Format("yyyyMMddhhmmss");var end=new Date(endTime).Format("yyyyMMddhhmmss");this.recUrl="".concat(this.recUrl,"?begin=").concat(begin,"&end=").concat(end);console.log("recurl="+this.recUrl)}}},{key:"initMiniRec",value:function initMiniRec(){var _this3=this;var that=this;var clientWidth=this.videoWidth;var ratioClient=clientWidth/375;var clientHeight=clientWidth*1.8;var headerHeight=6;if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){headerHeight=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+clientHeight*.1+6}var videoTop=headerHeight+this.videoHeight+10*ratioClient;console.log(headerHeight);if(!document.getElementById("miniRecbox")){var objDOM=document.createElement("div");objDOM.id="miniRecbox";objDOM.style="-webkit-border-radius: 8px;border-radius: 8px;overflow: hidden;position: absolute;top: ".concat(videoTop,"px;right: ").concat(9*ratioClient,"px;");objDOM.innerHTML='<div id="miniRec"></div>';document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(objDOM);this.getMiniCallTimeUrl();var lineEnv={domain:"https://open.ys7.com"};this.miniRecPlayer=new EZUIKitPlayer({id:"miniRec",width:160*ratioClient,height:90*ratioClient,template:"miniRec",url:this.recUrl,accessToken:this.jSPlugin.accessToken,handleError:function handleError(err){console.log("小窗口handleError------------",err);if(err&&err.retcode==6701){_this3.miniRecNum=_this3.miniRecNum+1;console.log("小窗口miniRecNum-----------------",_this3.miniRecNum);if(_this3.miniRecNum<5){that.miniRecPlayer.changePlayUrl({type:"miniRec"})}else{console.log("小窗口------------------已播放5次，关闭小窗口");that.miniRecCloseClick()}}else{console.log("小窗口------------------播放失败，关闭小窗口");that.miniRecCloseClick()}},env:this.jSPlugin.env||lineEnv});var miniCloseDOM=document.createElement("div");miniCloseDOM.id="miniClose";miniCloseDOM.style="position: absolute;top: ".concat(videoTop+8,"px;right: ").concat(16*ratioClient,"px;");miniCloseDOM.innerHTML='<div id="miniClose-btn" style="width: '.concat(24*ratioClient,"px;height: ").concat(24*ratioClient,'px;display: flex;align-items: center;justify-content: center;border-radius: 50%;background: rgba(0,0,0,0.1);">\n          <svg width="').concat(24*ratioClient,'px" height="').concat(24*ratioClient,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title>close</title>\n              <g id="icon/close" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="common/Close/Dark">\n                      <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                      <path d="M18.1871843,5.81281566 C18.4556698,6.08130112 18.4780436,6.50270075 18.2543057,6.7966719 L18.1871843,6.87347584 L13.0611458,12.0001458 L18.1871843,17.1265242 C18.4800776,17.4194174 18.4800776,17.8942911 18.1871843,18.1871843 C17.9186989,18.4556698 17.4972993,18.4780436 17.2033281,18.2543057 L17.1265242,18.1871843 L12.0001458,13.0611458 L6.87347584,18.1871843 C6.58058262,18.4800776 6.10570888,18.4800776 5.81281566,18.1871843 C5.54433021,17.9186989 5.52195643,17.4972993 5.7456943,17.2033281 L5.81281566,17.1265242 L10.9391458,12.0001458 L5.81281566,6.87347584 C5.51992245,6.58058262 5.51992245,6.10570888 5.81281566,5.81281566 C6.08130112,5.54433021 6.50270075,5.52195643 6.7966719,5.7456943 L6.87347584,5.81281566 L12.0001458,10.9391458 L17.1265242,5.81281566 C17.4194174,5.51992245 17.8942911,5.51992245 18.1871843,5.81281566 Z" id="形状结合" fill="#fff" fill-rule="nonzero"></path>\n                  </g>\n              </g>\n          </svg>\n        </div>');document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(miniCloseDOM);document.getElementById("miniClose-btn").onclick=function(){that.miniRecCloseClick()}}else{if(document.getElementById("miniRecbox")){document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniRecbox"))}if(document.getElementById("miniClose")){document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniClose"))}this.initMiniRec()}}},{key:"initMiniImageRec",value:function initMiniImageRec(){console.log("initMiniImageRec");var clientWidth=this.videoWidth;var ratioClient=clientWidth/375;var headerHeight=6;if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){headerHeight=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+26}var videoTop=headerHeight+this.videoHeight+10*ratioClient;if(!document.getElementById("miniRecbox")){var objDOM=document.createElement("div");objDOM.id="miniRecbox";objDOM.style="-webkit-border-radius: 8px;border-radius: 8px;overflow: hidden;position: absolute;\n        top: ".concat(videoTop,"px;\n        right: ").concat(9*ratioClient,"px;\n        user-select: none;\n        ");objDOM.innerHTML='<div id="miniRec" style="width: '.concat(160*ratioClient,"px;height: ").concat(90*ratioClient,'px;display: flex;align-items: center;justify-content: center;">\n          <embed id="miniRec-embed" style="z-index: 3;position: absolute;width: ').concat(160*ratioClient,"px;height: ").concat(90*ratioClient,'px;" type="image/svg+xml" src="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPbGh2AVJB-ABDcYtyw5gk899.svg" />\n          <div style="color: #FFFFFF;font-size: 12px;z-index: 4;">示意小窗位置</div>\n        </div>');document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(objDOM);var miniCloseDOM=document.createElement("div");miniCloseDOM.id="miniClose";miniCloseDOM.style="z-index: 4;position: absolute;top: ".concat(videoTop+8,"px;right: ").concat(16*ratioClient,"px;");miniCloseDOM.innerHTML='<div id="miniClose-btn" style="width: '.concat(24*ratioClient,"px;height: ").concat(24*ratioClient,'px;display: flex;align-items: center;justify-content: center;border-radius: 50%;">\n          <svg width="').concat(24*ratioClient,'px" height="').concat(24*ratioClient,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title>close</title>\n              <g id="icon/close" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="common/Close/Dark">\n                      <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                      <path d="M18.1871843,5.81281566 C18.4556698,6.08130112 18.4780436,6.50270075 18.2543057,6.7966719 L18.1871843,6.87347584 L13.0611458,12.0001458 L18.1871843,17.1265242 C18.4800776,17.4194174 18.4800776,17.8942911 18.1871843,18.1871843 C17.9186989,18.4556698 17.4972993,18.4780436 17.2033281,18.2543057 L17.1265242,18.1871843 L12.0001458,13.0611458 L6.87347584,18.1871843 C6.58058262,18.4800776 6.10570888,18.4800776 5.81281566,18.1871843 C5.54433021,17.9186989 5.52195643,17.4972993 5.7456943,17.2033281 L5.81281566,17.1265242 L10.9391458,12.0001458 L5.81281566,6.87347584 C5.51992245,6.58058262 5.51992245,6.10570888 5.81281566,5.81281566 C6.08130112,5.54433021 6.50270075,5.52195643 6.7966719,5.7456943 L6.87347584,5.81281566 L12.0001458,10.9391458 L17.1265242,5.81281566 C17.4194174,5.51992245 17.8942911,5.51992245 18.1871843,5.81281566 Z" id="形状结合" fill="#fff" fill-rule="nonzero"></path>\n                  </g>\n              </g>\n          </svg>\n        </div>');document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(miniCloseDOM);document.getElementById("miniClose-btn").onclick=function(){}}else{document.getElementById("miniRecbox").style.top=videoTop+"px";document.getElementById("miniClose").style.top=videoTop+8+"px"}}},{key:"miniRecCloseClick",value:function miniRecCloseClick(){if(document.getElementById("miniRecbox")){console.log("---------------------miniRecCloseClick");if(this.miniRecStatus=="rec"){if(!!this.miniRecPlayer){this.miniRecPlayer.stop()}document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniClose"));document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniRecbox"))}}}},{key:"miniRecSwitchClick",value:function miniRecSwitchClick(){console.log("---------------小窗口切换");var isEditing=this.decoderState.state.isEditing;var clientWidth=this.videoWidth;var ratioClient=clientWidth/375;var clientHeight=clientWidth*1.8;var headerHeight=6;if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){headerHeight=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+clientHeight*.1+6}console.log("headerHeight-------",headerHeight);var videoTop=headerHeight+this.videoHeight+10*ratioClient;console.log("videoTop-------",videoTop);if(this.miniRecStatus=="rec"){this.miniRecStatus="live";if(!isEditing){this.miniRecPlayer.reSize(this.jSPlugin.width,this.jSPlugin.height)}else{document.getElementById("miniRec-embed").style.width=this.jSPlugin.width+"px";document.getElementById("miniRec-embed").style.height=this.jSPlugin.height+"px";document.getElementById("miniRec").style.width=this.jSPlugin.width+"px";document.getElementById("miniRec").style.height=this.jSPlugin.height+"px"}this.jSPlugin.reSize(160*ratioClient,90*ratioClient);var videoMarginTop=this.videoHeight+10*ratioClient;var footerMarginTop=clientHeight*.2-90*ratioClient-10*ratioClient;document.getElementById("".concat(this.jSPlugin.id,"-wrap")).style.width=this.videoWidth+"px";document.getElementById("".concat(this.jSPlugin.id)).style.marginTop=videoMarginTop+"px";document.getElementById("".concat(this.jSPlugin.id)).style.marginLeft=clientWidth-160*ratioClient-9+"px";document.getElementById("".concat(this.jSPlugin.id)).style.overflow="hidden";document.getElementById("".concat(this.jSPlugin.id)).style.borderRadius="8px";document.getElementById("miniRecbox").style.top=headerHeight+"px";document.getElementById("miniRecbox").style.left="0";document.getElementById("miniRecbox").style.right="0";document.getElementById("miniRecbox").style.borderRadius="0px";document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop=footerMarginTop+"px"}else{console.log(this.jSPlugin.width);this.miniRecStatus="rec";if(!isEditing){this.miniRecPlayer.reSize(160*ratioClient,90*ratioClient)}else{document.getElementById("miniRec-embed").style.width=160*ratioClient+"px";document.getElementById("miniRec-embed").style.height=90*ratioClient+"px";document.getElementById("miniRec").style.width=160*ratioClient+"px";document.getElementById("miniRec").style.height=90*ratioClient+"px"}this.jSPlugin.reSize(this.videoWidth,this.videoHeight);document.getElementById("".concat(this.jSPlugin.id,"-wrap")).style.width=this.videoWidth+ +"px";document.getElementById("".concat(this.jSPlugin.id)).style.marginTop="0";document.getElementById("".concat(this.jSPlugin.id)).style.marginLeft="0";document.getElementById("".concat(this.jSPlugin.id)).style.overflow="hidden";document.getElementById("".concat(this.jSPlugin.id)).style.borderRadius="0px";document.getElementById("miniRecbox").style.top=videoTop+"px";document.getElementById("miniRecbox").style.right="9px";document.getElementById("miniRecbox").style.left="auto";document.getElementById("miniRecbox").style.borderRadius="8px";document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop=clientHeight*.2+"px"}}},{key:"matchBtn",value:function matchBtn(btnId,btnData){var _this4=this;var _this$themeData2=this.themeData,header=_this$themeData2.header,footer=_this$themeData2.footer;var _this$decoderState$st3=this.decoderState.state,mute=_this$decoderState$st3.mute,rejection=_this$decoderState$st3.rejection;document.documentElement.clientHeight;var clientWidth=this.videoWidth;var ratioClient=clientWidth/375;var sizeRatio=this.videoWidth/375||1;var btnItem={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function onclick(){},onmoveleft:function onmoveleft(){},onmoveright:function onmoveright(){},onremove:function onremove(){}};var _index=header[this.bellStatus].btnList.findIndex(function(item){return item.iconId===btnId});if(_index===-1){btnItem.color=footer[this.bellStatus].color;btnItem.backgroundColor=footer[this.bellStatus].backgroundColor;btnItem.activeColor=footer[this.bellStatus].activeColor}else{btnItem.color=header[this.bellStatus].color;btnItem.backgroundColor=header[this.bellStatus].backgroundColor;btnItem.activeColor=header[this.bellStatus].activeColor}var btnWidth=this.videoWidth/4;switch(btnId){case"ringStatus":btnItem.title=this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt;btnItem.id=btnId;btnItem.domString='<span id="header-onBell-ringStatus" style="color:'.concat(btnData.color||"#2C2C2C",";font-size: ").concat(24*sizeRatio,'px;display: block;font-weight: 600;" >').concat(this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt,"</span>");btnItem.onclick=function(){};return btnItem;case"deviceCategory":btnItem.title="设备名称";btnItem.id=btnId;btnItem.domString='<span id="header-onBell-deviceCategory" \n          style="color:'.concat(btnData.color||"#2C2C2C",";\n          font-size: ").concat(14*sizeRatio,"px;\n          padding-top: ").concat(5*sizeRatio,'px;\n          display: block;\n          max-width: 100%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          ">').concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>");btnItem.onclick=function(){};return btnItem;case"callStatus":btnItem.title="通话中";btnItem.id=btnId;btnItem.domString='<span id="header-onCall-ringStatus" style="color:'.concat(btnData.color||"#2C2C2C",";font-size: ").concat(24*sizeRatio,'px;display: block;font-weight: 600;" >通话中</span>');btnItem.onclick=function(){};return btnItem;case"deviceCategory":btnItem.title="设备名称";btnItem.id=btnId;btnItem.domString='<span id="header-onCall-deviceCategory" \n          style="color:'.concat(btnData.color||"#2C2C2C",";\n          font-size: ").concat(14*sizeRatio,"px;\n          padding-top: ").concat(5*sizeRatio,'px;\n          display: block;\n          max-width: 100%;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          ">').concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>");btnItem.onclick=function(){};return btnItem;case"rejection":btnItem.title="拒绝";btnItem.id=btnId;btnItem.domString='<div style="width: '.concat(btnWidth*.66,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width:').concat(btnWidth*.66,"px;height: ").concat(btnWidth*.66,"px;border-radius: 50%;background: ").concat(rejection?"#CCCCCC":btnData.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(btnWidth*.4,'px" height="').concat(btnWidth*.4,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>拒绝</title>\n                        <g id="icon/拒绝" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(btnWidth*.1,'px;user-select: none;">拒绝</div>\n            </div>');btnItem.onclick=function(){var that=_this4;var _this4$decoderState$s=_this4.decoderState.state,play=_this4$decoderState$s.play,isEditing=_this4$decoderState$s.isEditing,rejection=_this4$decoderState$s.rejection;if(isEditing||rejection){return false}console.log("拒绝");if(play){_this4.jSPlugin.stop()}_this4.removeBellRing();_this4.setDecoderState({play:false,rejection:true});that.miniRecCloseClick();_this4.rejectionStatusDispose();if(typeof _this4.jSPlugin.hangUpCallback==="function"){_this4.jSPlugin.hangUpCallback("rejection")}};return btnItem;case"quickReply":btnItem.title="快捷回复";btnItem.id=btnId;btnItem.domString='<div id="'.concat(this.jSPlugin.id,'-btn-quickReply" style="width: ').concat(126*ratioClient,"px;height: ").concat(40*ratioClient,"px;color:").concat(rejection?"rgba(44,44,44,0.5)":btnItem.color,';background: #F8F8F8;border-radius: 20px;display: flex;flex-direction: row;align-items: center;justify-content: center;-webkit-tap-highlight-color:transparent;">\n                <div>\n                  <svg width="').concat(24*ratioClient,'px" height="').concat(24*ratioClient,'px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                      <title>快捷回复</title>\n                      <g id="icon/H5快捷回复" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                          <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>\n                          <path d="M10.7238197,2.25008794 C16.2230834,2.09766093 20.7496,6.50749909 20.7496,11.9958 C20.7496,13.4362841 20.4368194,14.8344518 19.8413577,16.1117061 L19.9440524,15.8792521 L21.0527769,21.184554 C21.1496277,21.6485507 20.8013031,22.0657304 20.3577211,22.0873894 L20.2613374,22.0858497 L20.1628027,22.0714397 L14.866,20.946 L14.7518767,20.9973203 C13.6930577,21.439776 12.5585243,21.69208 11.3902258,21.7381162 L11.3902258,21.7381162 L10.9996,21.7458 C5.51196728,21.7458 1.10147008,17.2189531 1.25388722,11.7200456 C1.39490345,6.62610538 5.62990538,2.39110345 10.7238197,2.25008794 Z M11.0183931,3.74628651 L10.7653544,3.74951278 C6.46729462,3.86849655 2.87229655,7.46349462 2.75331206,11.7615803 C2.62431432,16.4155628 6.35610614,20.2458 10.9996,20.2458 C12.2165433,20.2458 13.3936843,19.9831552 14.4692454,19.4827855 C14.6166569,19.4142071 14.7823612,19.395387 14.9413973,19.4291603 L14.9413973,19.4291603 L19.349,20.365 L18.4274231,15.948046 C18.4026128,15.8291836 18.4071487,15.7066932 18.4398273,15.5909727 L18.4398273,15.5909727 L18.4818423,15.4778939 C18.9851908,14.3982208 19.2496,13.216279 19.2496,11.9958 C19.2496,7.35166383 15.4197191,3.62050444 10.7653544,3.74951278 Z M10.9996,10.7498 C11.6896,10.7498 12.2496,11.3098 12.2496,11.9998 C12.2496,12.6898 11.6896,13.2498 10.9996,13.2498 C10.3096,13.2498 9.7496,12.6898 9.7496,11.9998 C9.7496,11.3098 10.3096,10.7498 10.9996,10.7498 Z M6.9996,10.7498 C7.6896,10.7498 8.2496,11.3098 8.2496,11.9998 C8.2496,12.6898 7.6896,13.2498 6.9996,13.2498 C6.3096,13.2498 5.7496,12.6898 5.7496,11.9998 C5.7496,11.3098 6.3096,10.7498 6.9996,10.7498 Z M14.9996,10.7498 C15.6896,10.7498 16.2496,11.3098 16.2496,11.9998 C16.2496,12.6898 15.6896,13.2498 14.9996,13.2498 C14.3096,13.2498 13.7496,12.6898 13.7496,11.9998 C13.7496,11.3098 14.3096,10.7498 14.9996,10.7498 Z" id="形状结合" fill="').concat(rejection?"rgba(44,44,44,0.5)":"#2c2c2c",'" fill-rule="nonzero"></path>\n                      </g>\n                  </svg>\n                </div>\n                <div style="margin-left: 5px;user-select: none;font-size:14px">快捷回复<div>\n            </div>');btnItem.onclick=function(){var _this4$decoderState$s2=_this4.decoderState.state,isEditing=_this4$decoderState$s2.isEditing,rejection=_this4$decoderState$s2.rejection;if(isEditing||rejection){return false}console.log("快捷回复");_this4.switchFooter("quickReply");_this4.quickReplyEle=new MobileQuickReplyEle(_this4.jSPlugin,_this4.switchFooter,_this4.videoWidth)};return btnItem;case"answer":btnItem.title="接听";btnItem.id=btnId;btnItem.domString='<div style="width: '.concat(btnWidth*.66,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width: ').concat(btnWidth*.66,"px;height: ").concat(btnWidth*.66,"px;border-radius: 50%;background: ").concat(rejection?"#CCCCCC":btnData.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(btnWidth*.4,'px" height="').concat(btnWidth*.4,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>接听</title>\n                        <g id="icon/接听" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M15.7728281,19.6822968 C13.2528132,17.165123 10.8435994,14.2473605 11.9999084,13.0938925 C13.6505608,11.4432401 15.0881341,10.4261428 12.1646895,6.78675259 C9.23840386,3.14452132 7.28659974,5.94011849 5.68708632,7.53963191 C3.84324225,9.38631703 5.59049048,16.2645088 12.3891328,23.0659922 C19.1877751,29.8646345 26.0688079,31.6147238 27.9154931,29.7680386 C29.5150065,28.1685252 32.3106036,26.2195622 28.6712134,23.2932765 C25.0318232,20.3669909 24.0147259,21.8045642 22.3640735,23.4580576 C21.2077645,24.6086845 18.2928431,22.1994707 15.7728281,19.6822968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.727936, 17.728157) rotate(-360.000000) translate(-17.727936, -17.728157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(btnWidth*.1,'px;user-select: none;">接听</div>\n            </div>');btnItem.onclick=function(){var _this4$decoderState$s3=_this4.decoderState.state,play=_this4$decoderState$s3.play,isEditing=_this4$decoderState$s3.isEditing,talk=_this4$decoderState$s3.talk,sound=_this4$decoderState$s3.sound,rejection=_this4$decoderState$s3.rejection;if(isEditing||rejection){return false}console.log("接听");_this4.jSPlugin.pluginStatus.loadingClear();_this4.bellStatus="onCall";_this4.switchFooter("onCall");footer[_this4.bellStatus].btnList.map(function(item,index){if(item.isrender){_this4.renderFooter(item.iconId,item)}});header[_this4.bellStatus].btnList.map(function(item,index){if(item.isrender){_this4.renderHeader(item.iconId,item)}});var bellHeaderDom=document.getElementById("".concat(_this4.jSPlugin.id,"-header-onBell"));if(bellHeaderDom){bellHeaderDom.parentElement.removeChild(bellHeaderDom)}if(_this4.themeData.customConfig.bellPoster==1){if(document.getElementById("bellring-icon")){document.getElementById("".concat(_this4.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}_this4.jSPlugin.setPoster("")}_this4.removeBellRing();_this4.miniRecCloseClick();if(!play){_this4.jSPlugin.pluginStatus.loadingStart(_this4.jSPlugin.id);_this4.jSPlugin.pluginStatus.loadingSetText({text:"视频加载中"});_this4.jSPlugin.play();_this4.setDecoderState({play:!play})}if(!talk&&_this4.themeData.customConfig.defaultMicro==1){_this4.setDecoderState({talk:true,mute:false});if(sound){_this4.jSPlugin.closeSound()}_this4.jSPlugin.Talk.startTalk()}_this4.setDecoderState({sound:false});if(_this4.themeData.customConfig.defaultMicro==0){_this4.muteCommon(btnData);_this4.jSPlugin.openSound();_this4.setDecoderState({sound:true})}_this4.maxTalkTime=_this4.themeData.customConfig.maxTalkTime*1e3*60;var that=_this4;setTimeout(function(){if(talk){console.log("结束对讲");that.setDecoderState({talk:false});that.jSPlugin.Talk.stopTalk()}if(play){that.jSPlugin.stop();that.setDecoderState({play:!play})}_this4.rejectionStatusDispose();if(!!_this4.remoteUnlockEle){_this4.remoteUnlockEle.closeRemoteUnlock()}if(typeof _this4.jSPlugin.hangUpCallback==="function"){_this4.jSPlugin.hangUpCallback("hangUp")}},_this4.maxTalkTime)};return btnItem;case"remoteUnlock":btnItem.title="远程开锁";btnItem.id=btnId;btnItem.domString='<div style="width: '.concat(btnWidth*.66,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width: ').concat(btnWidth*.66,"px;height: ").concat(btnWidth*.66,"px;border-radius: 50%;background: ").concat(rejection?"#CCCCCC":btnData.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(btnWidth*.4,'px" height="').concat(btnWidth*.4,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>开锁</title>\n                        <g id="icon/开锁" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M18,4 C21.3137085,4 24,6.6862915 24,10 L24,10 L24,19.787 L29.5,19.7875 C30.0522847,19.7875 30.5,20.2352153 30.5,20.7875 C30.5,21.3397847 30.0522847,21.7875 29.5,21.7875 L24,21.787 L24,26 C24,29.2383969 21.4344251,31.8775718 18.2249383,31.9958615 L18,32 C14.6862915,32 12,29.3137085 12,26 L12,26 L12,10 C12,6.6862915 14.6862915,4 18,4 Z M18,6 C15.790861,6 14,7.790861 14,10 L14,10 L14,26 C14,28.209139 15.790861,30 18,30 C20.209139,30 22,28.209139 22,26 L22,26 L22,21.787 L18.5,21.7875 C17.9477153,21.7875 17.5,21.3397847 17.5,20.7875 C17.5,20.2352153 17.9477153,19.7875 18.5,19.7875 L22,19.787 L22,10 C22,7.85780461 20.3160315,6.10892112 18.1996403,6.00489531 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(btnWidth*.1,'px;user-select: none;">远程开锁</div>\n            </div>');btnItem.onclick=function(){var _this4$decoderState$s4=_this4.decoderState.state,isEditing=_this4$decoderState$s4.isEditing;_this4$decoderState$s4.play;var rejection=_this4$decoderState$s4.rejection;if(isEditing||_this4.bellStatus=="onBell"||rejection){return false}console.log("远程开锁");_this4.switchFooter("remoteUnlock");_this4.remoteUnlockEle=new MobileRemoteUnlockEle(_this4.jSPlugin,_this4.switchFooter,_this4.videoWidth)};return btnItem;case"mute":btnItem.title="静音";btnItem.id=btnId;btnItem.domString='<div style="width: '.concat(btnWidth*.66,'px;display: flex;flex-direction: column;align-items: center;">\n                <div id="').concat(this.jSPlugin.id,'-icon-mute" style="width: ').concat(btnWidth*.66,"px;height: ").concat(btnWidth*.66,"px;border-radius: 50%;border: 1px solid ").concat(rejection?"#cccccc":btnData.backgroundColor,";background: ").concat(rejection&&mute?"#cccccc":"#ffffff",';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(btnWidth*.4,'px" height="').concat(btnWidth*.4,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>icon/静音</title>\n                        <g id="icon/静音" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path id="icon-mute-path" d="M29.2988305,7.56559704 C29.8540627,8.1086468 29.8980234,8.97727504 29.4240597,9.57172938 L29.3223594,9.6867869 L22.585,16.574 L22.5859243,26.0592702 C22.5859243,26.9500521 21.8638029,27.6721735 20.973021,27.6721735 C20.6007147,27.6721735 20.2398727,27.5433734 19.9517149,27.3076254 L15.583,23.733 L10.4341733,28.9987008 C9.85492024,29.5909486 8.9052312,29.6014828 8.31298346,29.0222298 C7.75775121,28.47918 7.71379057,27.6105518 8.18775419,27.0160974 L8.28945454,26.9010399 L27.1776406,7.58912597 C27.7568937,6.99687823 28.7065827,6.98634397 29.2988305,7.56559704 Z M22.2503608,7.16816759 C22.4679282,7.45036017 22.5859243,7.79665625 22.5859243,8.15298221 L22.585,9.899 L10.778,21.971 L9.47580645,21.9713498 C7.69424274,21.9713498 6.25,20.5271071 6.25,18.7455434 L6.25,15.65293 C6.25,13.8713663 7.69424274,12.4271235 9.47580645,12.4271235 L12.787,12.427 L19.9882064,6.87564241 C20.6936617,6.33174431 21.7064627,6.46271229 22.2503608,7.16816759 Z" id="形状结合" fill="').concat(mute?"#ffffff":rejection?"#cccccc":btnData.backgroundColor,'"></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(btnWidth*.1,'px;user-select: none;">静音</div>\n            </div>');btnItem.onclick=function(){var _this4$decoderState$s5=_this4.decoderState.state,talk=_this4$decoderState$s5.talk,sound=_this4$decoderState$s5.sound;_this4$decoderState$s5.play;var rejection=_this4$decoderState$s5.rejection;if(rejection){return false}console.log("静音");if(talk){console.log("结束对讲");_this4.setDecoderState({talk:false,mute:true},btnData.backgroundColor);_this4.jSPlugin.Talk.stopTalk();_this4.jSPlugin.openSound();_this4.setDecoderState({sound:true})}else{console.log("开始对讲");_this4.setDecoderState({talk:true,mute:false},btnData.backgroundColor);if(sound){_this4.jSPlugin.closeSound();_this4.setDecoderState({sound:false})}_this4.jSPlugin.Talk.startTalk()}};return btnItem;case"hangUp":btnItem.title="挂断";btnItem.id=btnId;btnItem.domString='<div style="width: '.concat(btnWidth*.66,'px;display: flex;flex-direction: column;align-items: center;">\n                <div style="width:').concat(btnWidth*.66,"px;height: ").concat(btnWidth*.66,"px;border-radius: 50%;background: ").concat(rejection?"#CCCCCC":btnData.backgroundColor,';display: flex;align-items: center;justify-content: center;" >\n                    <svg width="').concat(btnWidth*.4,'px" height="').concat(btnWidth*.4,'px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title>挂断</title>\n                        <g id="icon/挂断" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>\n                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>\n                        </g>\n                    </svg>\n                </div>\n                <div style="margin-top: ').concat(btnWidth*.1,'px;user-select: none;">挂断</div>\n            </div>');btnItem.onclick=function(){var that=_this4;var _this4$decoderState$s6=_this4.decoderState.state,talk=_this4$decoderState$s6.talk,play=_this4$decoderState$s6.play,rejection=_this4$decoderState$s6.rejection;if(rejection){return false}if(talk){console.log("结束对讲");_this4.setDecoderState({talk:false});_this4.jSPlugin.Talk.stopTalk()}if(play){_this4.jSPlugin.stop();_this4.setDecoderState({play:!play})}if(play||talk){that.miniRecCloseClick();console.log("挂断");_this4.rejectionStatusDispose();if(typeof _this4.jSPlugin.hangUpCallback==="function"){_this4.jSPlugin.hangUpCallback("hangUp")}}};return btnItem;default:return btnItem}}},{key:"answerOvertime",value:function answerOvertime(){this.toastCustom.initToastContent("应答超时");var play=this.decoderState.state.play;console.log("应答超时");if(play){this.jSPlugin.stop()}this.setDecoderState({play:false,rejection:true});this.miniRecCloseClick();this.rejectionStatusDispose();if(!!this.quickReplyEle){this.quickReplyEle.closeQuickReplyEle()}if(typeof this.jSPlugin.hangUpCallback==="function"){this.jSPlugin.hangUpCallback("rejection")}}},{key:"rejectionStatusDispose",value:function rejectionStatusDispose(){var _this5=this;var footer=this.themeData.footer;var footerDom=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var footerDomCall=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));var footerDomQuickReply=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn"));var headerRingStatusDom=document.getElementById("header-".concat(this.bellStatus,"-ringStatus"));if(this.bellStatus=="onBell"){footerDom.innerHTML="";footerDomQuickReply.innerHTML="";footerDom.style.color="#2C2C2C"}else{footerDomCall.innerHTML="";footerDomCall.style.color="#2C2C2C"}console.log("rejectionStatusDispose");this.setDecoderState({rejection:true});footer[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this5.renderFooter(item.iconId,item)}});headerRingStatusDom.innerText="通话已结束";this.jSPlugin.pluginStatus.loadingClear();this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:true,type:2})}},{key:"userNoDevice",value:function userNoDevice(){var _this6=this;this.removeBellRing();this.setDecoderState({rejection:true});var footer=this.themeData.footer;var footerDom=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var footerDomCall=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));var footerDomQuickReply=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn"));if(this.bellStatus=="onBell"){footerDom.innerHTML="";footerDomQuickReply.innerHTML="";footerDom.style.color="#2C2C2C"}else{footerDomCall.innerHTML="";footerDomCall.style.color="#2C2C2C"}console.log("userNoDevice");this.setDecoderState({rejection:true});footer[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this6.renderFooter(item.iconId,item)}});this.jSPlugin.pluginStatus.loadingClear();this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:true,type:2})}},{key:"renderHeader",value:function renderHeader(id,item){var _this7=this;var objItem=this.matchBtn(id,item);if(document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content"))){var childDOM=document.createElement("span");childDOM.innerHTML="".concat(objItem.domString);document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content")).appendChild(childDOM)}else{var objDOM=document.createElement("div");objDOM.id="".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus);objDOM.style="max-width:50%;position:relative;";objDOM.innerHTML='<span id="'.concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,'-content" style="display:inline-block;height:auto;";>\n            ').concat(objItem.domString,"\n          </span>");objDOM.onclick=function(e){if(_this7.decoderState.state.isEditing){return false}objItem.onclick(e)};document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[0].appendChild(objDOM)}}},{key:"renderFooter",value:function renderFooter(id,item){var _this8=this;var mute=this.decoderState.state.mute;if(id=="remoteUnlock"&&!!this.jSPlugin.capacity&&(!this.jSPlugin.capacity["support_unlock"]||this.jSPlugin.capacity["support_unlock"]==0)){return false}var objItem=this.matchBtn(id,item);var btnWidth=this.videoWidth/4;var objDOM=document.createElement("div");objDOM.className="theme-icon-item";if(objItem.id!=="quickReply"){objDOM.style="width:".concat(btnWidth*.66,"px;padding:0 ").concat(btnWidth*.12,"px;box-sizing: content-box;-webkit-tap-highlight-color:transparent;")}objDOM.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-content" title="').concat(objItem.title,'" style="display: flex;align-items: center;position:relative;">')).concat(objItem.domString,"</div>")+"</span>";objDOM.onclick=function(e){if(_this8.decoderState.state.isEditing||!_this8.activeThemeStatus){return false}objItem.onclick(e)};if(objItem.onmouseenter){objDOM.onmouseenter=function(e){if(_this8.decoderState.state.isEditing||!_this8.activeThemeStatus){return false}objItem.onmouseenter(e)}}if(objItem.onmouseleave){objDOM.onmouseleave=function(e){if(_this8.decoderState.state.isEditing||!_this8.activeThemeStatus){return false}objItem.onmouseleave(e)}}if(id!="quickReply"){var toLeft=document.createElement("span");toLeft.className="icon-move left";toLeft.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-left" title="左移" style="height: 40px;position: absolute;top: calc(50% - 33px);left: 1px;display: inline-block;border-radius: 2px;overflow: hidden;cursor: pointer;">\n          <svg width="10px" height="40px" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title></title>\n              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="H5呼叫模板" transform="translate(-614.000000, -5024.000000)">\n                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                          <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                              <g id="编组" transform="translate(170.000000, 0.000000)">\n                                  <g id="箭头左" transform="translate(0.000000, 18.000000)">\n                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>\n                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(1.000000, 15.000000)" fill="#FFFFFF">\n                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>\n                                      </g>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </g>\n          </svg>\n          </span>');toLeft.onclick=function(){_this8.editIcon(objItem.id,"left","footer")};objDOM.appendChild(toLeft);var toRight=document.createElement("span");toRight.className="icon-move right";toRight.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-right" class="ezuikit-theme-icon" title="右移" style="height: 40px;position: absolute;top: calc(50% - 33px);left: calc(100% - 11px);display: inline-block;border-radius: 2px;overflow: hidden;cursor: pointer;">\n          <svg width="10px" height="40px" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <title></title>\n              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                  <g id="H5呼叫模板" transform="translate(-684.000000, -5024.000000)">\n                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                          <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                              <g id="编组" transform="translate(170.000000, 0.000000)">\n                                  <g id="箭头右" transform="translate(70.000000, 18.000000)">\n                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>\n                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(5.500000, 20.000000) scale(-1, 1) translate(-5.500000, -20.000000) translate(2.000000, 15.000000)" fill="#FFFFFF">\n                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>\n                                      </g>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                  </g>\n              </g>\n          </svg>\n          </span>');toRight.onclick=function(){_this8.editIcon(objItem.id,"right","footer")};objDOM.appendChild(toRight)}if(id=="answer"||id=="rejection"||id=="hangUp");else{var toClose=document.createElement("span");toClose.className="icon-move close";toClose.innerHTML='<span id="'.concat(objItem.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: -6px;right: -2px;cursor: pointer;">\n            <svg width="16px" height="16px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title></title>\n                <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                    <g id="H5呼叫模板" transform="translate(-680.000000, -5006.000000)">\n                        <g id="编组-28" transform="translate(421.000000, 4484.000000)">\n                            <g id="编组-9" transform="translate(23.000000, 522.000000)">\n                                <g id="编组" transform="translate(170.000000, 0.000000)">\n                                    <g id="关闭1" transform="translate(66.000000, 0.000000)">\n                                        <rect id="矩形" fill-rule="nonzero" x="0" y="0" width="18" height="18"></rect>\n                                        <path d="M9,1.125 C4.65117188,1.125 1.125,4.65117188 1.125,9 C1.125,13.3488281 4.65117188,16.875 9,16.875 C13.3488281,16.875 16.875,13.3488281 16.875,9 C16.875,4.65117188 13.3488281,1.125 9,1.125 Z M11.9074219,11.9917969 L10.7472656,11.9865234 L9,9.90351562 L7.25449219,11.9847656 L6.09257813,11.9900391 C6.01523438,11.9900391 5.95195313,11.9285156 5.95195313,11.8494141 C5.95195313,11.8160156 5.96425781,11.784375 5.98535156,11.7580078 L8.27226563,9.03339844 L5.98535156,6.31054687 C5.96425781,6.28417969 5.95195313,6.25253906 5.95195313,6.21914062 C5.95195313,6.14179687 6.01523438,6.07851562 6.09257813,6.07851562 L7.25449219,6.08378906 L9,8.16679687 L10.7455078,6.08554688 L11.9056641,6.08027344 C11.9830078,6.08027344 12.0462891,6.14179687 12.0462891,6.22089844 C12.0462891,6.25429687 12.0339844,6.2859375 12.0128906,6.31230469 L9.72949219,9.03515625 L12.0146484,11.7597656 C12.0357422,11.7861328 12.0480469,11.8177734 12.0480469,11.8511719 C12.0480469,11.9285156 11.9847656,11.9917969 11.9074219,11.9917969 Z" id="形状" fill="#595959"></path>\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n            </svg>\n          </span>');toClose.onclick=function(){_this8.editIcon(objItem.id,"delete","footer")};objDOM.appendChild(toClose)}if(this.bellStatus=="onCall"){document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).appendChild(objDOM)}else{document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).appendChild(objDOM);if(objItem.id==="quickReply"){document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn")).appendChild(objDOM)}}if(this.decoderState.state.isEditing&&id=="mute"&&this.bellStatus=="onCall"){if(this.themeData.customConfig.defaultMicro==0&&!mute){this.setDecoderState({mute:true},item.backgroundColor)}else{this.setDecoderState({mute:false},item.backgroundColor)}}}},{key:"switchFooter",value:function switchFooter(type){var footer=this.themeData.footer;switch(type){case"onBell":if(document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"))){if(document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display=="none"){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex";document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn")).style.display="flex";document.getElementById("".concat(this.jSPlugin.id,"-btn-quickReply")).style.display="flex"}}else{document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex";document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn")).style.display="flex";document.getElementById("".concat(this.jSPlugin.id,"-btn-quickReply")).style.display="flex"}break;case"onCall":document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none";document.getElementById("".concat(this.jSPlugin.id,"-btn-quickReply")).style.display="none";document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display="flex";if(!!this.themeData){document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=footer[this.bellStatus].color}break}}},{key:"initThemeData",value:function initThemeData(){var _this9=this;console.log("-------------initThemeData");var _this$themeData3=this.themeData,header=_this$themeData3.header,footer=_this$themeData3.footer;var isEditing=this.decoderState.state.isEditing;var clientWidth=this.videoWidth;var ratioClient=clientWidth/375;var clientHeight=clientWidth*1.8;var videoId=this.jSPlugin.id;this.isNeedRenderHeader=_.findIndex(header[this.bellStatus].btnList,function(v){return v.isrender>0})>=0;this.isNeedRenderFooter=_.findIndex(footer[this.bellStatus].btnList,function(v){return v.isrender>0})>=0;if(this.isNeedRenderHeader){if(!document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){var _headerStyle;var headerContainer=document.createElement("div");headerContainer.setAttribute("id","".concat(this.jSPlugin.id,"-headControl"));headerContainer.setAttribute("class","header-controls");headerContainer.innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' class=\"header-controls-left\" style='display:flex;width:100%;overflow:hidden;justify-content: center;'></div>");console.log(this.jSPlugin.height);this.jSPlugin.height*.2+"px";var headerStyle=(_headerStyle={display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#FFFFFF",width:"100%",position:"relative","margin-bottom":clientHeight*.1+"px","align-items":"center","text-align":"center","font-size":"24ox"},_defineProperty(_headerStyle,"color","#2c2c2c"),_defineProperty(_headerStyle,"margin-top","6px"),_headerStyle);headerContainer.style=styleToString$1(headerStyle);document.getElementById("".concat(videoId,"-wrap")).insertBefore(headerContainer,document.getElementById(videoId));var _checkTimer=setInterval(function(){if(window.EZUIKit[_this9.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(_checkTimer)}},50)}else{document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;width:100%;overflow:hidden;justify-content: center;'></div>")}}else{if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))}}this.jSPlugin.height*.3;if(this.isNeedRenderFooter){if(!document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){var footerContainer=document.createElement("div");footerContainer.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container"));footerContainer.setAttribute("class","ez-iframe-footer-container");var footerStyle={position:"relative","margin-top":clientHeight*.2+"px",display:"flex","flex-wrap":"wrap","justify-content":"space-between","z-index":999,top:0,color:"#FFFFFF",width:"100%","align-items":"center","font-size":"12px"};footerContainer.style=styleToString$1(footerStyle);footerContainer.innerHTML='\n            <div id="'.concat(this.jSPlugin.id,'-audioControls-quickReplyBtn" class="footer-controls" style=\'min-height: ').concat(40*ratioClient,"px;margin-bottom: ").concat(40*ratioClient,"px;display:flex;justify-content: center;width:100%;z-index:999;position: relative;'></div>\n            <div id=\"").concat(this.jSPlugin.id,'-audioControls" class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n            <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n            ');insertAfter(footerContainer,document.getElementById(videoId))}else{if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="".concat(clientHeight*.2,"px");if(this.bellStatus=="onCall"){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='\n              <div id="'.concat(this.jSPlugin.id,'-audioControls-quickReplyBtn" class="footer-controls" style=\'min-height: ').concat(40*ratioClient,"px;margin-bottom: ").concat(40*ratioClient,"px;display:flex;justify-content: center;width:100%;z-index:999;position: relative;'></div>\n              <div id=\"").concat(this.jSPlugin.id,'-audioControls" class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              ')}else{document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='\n              <div id="'.concat(this.jSPlugin.id,'-audioControls-quickReplyBtn" class="footer-controls" style=\'min-height: ').concat(40*ratioClient,"px;margin-bottom: ").concat(40*ratioClient,"px;display:flex;justify-content: center;width:100%;z-index:999;position: relative;'></div>\n              <div id=\"").concat(this.jSPlugin.id,'-audioControls" class="footer-controls" style=\'display:flex;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-onCall" class="footer-controls" style=\'display:none;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-quickReply" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              <div id="').concat(this.jSPlugin.id,'-audioControls-remoteUnlock" class="footer-controls" style=\'display:none;justify-content: center;width:100%;z-index:999;position: relative;\'></div>\n              ')}}}}else{if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))}}if(this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){header[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this9.renderHeader(item.iconId,item)}})}if(this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=footer[this.bellStatus].backgroundColor;document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=footer[this.bellStatus].color;footer[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this9.renderFooter(item.iconId,item)}})}if(this.themeData.customConfig.bellPoster==1&&!isEditing){this.jSPlugin.poster="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPbGh2AVJB-ABDcYtyw5gk899.svg";var checkTimer=setInterval(function(){if(window.EZUIKit[_this9.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer);_this9.jSPlugin.setPoster(_this9.jSPlugin.poster)}},50)}else{this.jSPlugin.setPoster("")}if(this.activeThemeStatus){this.initBellRing();var isAppleDevice=this.checkIsAppleDevice()||false;if(isAppleDevice){window.addEventListener("touchstart",this.autoPlayRing)}else{window.addEventListener("click",this.autoPlayRing)}}this.inited=true;this.getCallDeviceInfo()}},{key:"checkIsAppleDevice",value:function checkIsAppleDevice(){var u=navigator.userAgent;var ios=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);var iPad=u.indexOf("iPad")>-1;var iPhone=u.indexOf("iPhone")>-1||u.indexOf("Mac")>-1;if(ios||iPad||iPhone){return true}else{return false}}},{key:"renderThemeData",value:function renderThemeData(){var _this10=this;var _this$themeData4=this.themeData,header=_this$themeData4.header,footer=_this$themeData4.footer;var isEditing=this.decoderState.state.isEditing;if(this.isNeedRenderHeader&&header){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=header[this.bellStatus].color.replace("-diy","");header[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this10.setDecoderState(_defineProperty({},item.iconId,_this10.decoderState.state[item.iconId]))}})}if(this.isNeedRenderFooter&&footer){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=footer[this.bellStatus].backgroundColor.replace("-diy","");document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=footer[this.bellStatus].color.replace("-diy","");document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=footer[this.bellStatus].color.replace("-diy","");footer[this.bellStatus].btnList.map(function(item,index){if(item.isrender){_this10.setDecoderState(_defineProperty({},item.iconId,_this10.decoderState.state[item.iconId]))}console.log("-------------activeThemeStatus");if(index==0&&!_this10.themeInited&&_this10.activeThemeStatus){var checkTimer=setInterval(function(){if(window.EZUIKit[_this10.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer);if(_this10.themeData.customConfig.bellPoster==1&&!isEditing){_this10.jSPlugin.pluginStatus.loadingClear()}else{_this10.jSPlugin.play()}_this10.themeInited=true}},50)}});if(this.jSPlugin.url.indexOf("hd.live")!==-1){this.setDecoderState({hd:true})}if(this.themeData.autoFocus>0){this.autoFocus=parseInt(this.themeData.autoFocus);this.startAutoFocus();document.getElementById("".concat(this.jSPlugin.id,"-wrap")).addEventListener("click",function(){_this10.stopAutoFocus()})}this.setDecoderState({cloudRec:matchEzopenUrl(this.jSPlugin.url).type==="cloud.rec",rec:matchEzopenUrl(this.jSPlugin.url).type==="rec",type:matchEzopenUrl(this.jSPlugin.url).type})}else{if(!this.themeInited&&this.activeThemeStatus){var _checkTimer2=setInterval(function(){if(window.EZUIKit[_this10.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(_checkTimer2);if(_this10.themeData&&_this10.themeData.customConfig&&_this10.themeData.customConfig.bellPoster==1&&!isEditing){_this10.jSPlugin.pluginStatus.loadingClear()}else{_this10.jSPlugin.play()}_this10.themeInited=true}},50)}}var checkTimer=setInterval(function(){if(window.EZUIKit[_this10.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer);_this10.jSPlugin.reSize(_this10.jSPlugin.params.width,_this10.jSPlugin.params.height)}},50);if(!isEditing&&!this.jSPlugin.isWebConsole){setTimeout(function(){if(_this10.bellStatus=="onBell"&&_this10.jSPlugin.capacity&&_this10.jSPlugin.capacity["support_doorcall_playback"]==1){console.log("小窗口initMiniRec-------------设备能力集成功");if(_this10.themeData.customConfig.miniWinRec==1){console.log("小窗口initMiniRec---------------画中画设置已开启");if(!_this10.deviceInfoData||_this10.deviceInfoData&&!_this10.deviceInfoData.isEncrypt){console.log("小窗口initMiniRec---------------设备未加密");_this10.miniRecNum=0;_this10.initMiniRec()}}}},1e3)}else{if(this.themeData.customConfig.miniWinRec==1){this.initMiniImageRec()}else{this.miniRecCloseClick()}}}},{key:"setThemeData",value:function setThemeData(options,bellStatus){this.themeData=options;if(bellStatus=="onCall"){this.bellStatus="onCall"}}},{key:"startAutoFocus",value:function startAutoFocus(){var _this11=this;var autoFocus=this.autoFocus;if(this.autoFocusTimer){clearTimeout(this.autoFocusTimer)}this.autoFocusTimer=setTimeout(function(){if(document.getElementById("".concat(_this11.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(_this11.jSPlugin.id,"-audioControls")).style.opacity=0;document.getElementById("".concat(_this11.jSPlugin.id,"-audioControls")).style.pointerEvents="none"}},autoFocus*1e3)}},{key:"stopAutoFocus",value:function stopAutoFocus(){if(document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1;document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"}if(this.autoFocusTimer){clearTimeout(this.autoFocusTimer)}this.startAutoFocus()}},{key:"editIcon",value:function editIcon(id,type,area){console.log("编辑组件",id,type,area);var newThemeData=this.themeData;console.log("themeData",this.themeData);var btnList=this.themeData[area][this.bellStatus].btnList;var _index=_.findIndex(btnList,function(item){return item.iconId===id});var tmp=btnList[_index];switch(type){case"delete":btnList[_index].isrender=0;break;case"right":var nextRightBtnIndex=-1;for(var i=_index+1;i<btnList.length;i++){if(btnList[i].part===btnList[_index].part&&btnList[i].isrender==1){nextRightBtnIndex=i;break}}if(nextRightBtnIndex!==-1){btnList[_index]=btnList[nextRightBtnIndex];btnList[nextRightBtnIndex]=tmp}break;case"left":var nextLeftBtnIndex=-1;for(var _i=_index-1;_i>=0;_i--){if(btnList[_i].part===btnList[_index].part&&btnList[_i].isrender==1){nextLeftBtnIndex=_i;break}}if(nextLeftBtnIndex!==-1){btnList[_index]=btnList[nextLeftBtnIndex];btnList[nextLeftBtnIndex]=tmp}break}console.log("new btnList",btnList);newThemeData[area][this.bellStatus].btnList=btnList;this.jSPlugin.Theme.changeTheme(newThemeData)}},{key:"countTime",value:function countTime(type){var start=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var that=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var recordDOM=document.createElement("div");recordDOM.id=this.jSPlugin.id+"time-area";recordDOM.className="time-area";recordDOM.innerHTML='<span class="dot"></span><span class="value">00:00</span>';if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(recordDOM)}}if(this.countTimer){clearInterval(this.countTimer)}if(type==="add"){var i=start;document.getElementById(that.jSPlugin.id+"time-area").style.display="flex";this.countTimer=setInterval(function(){++i;document.getElementById(that.jSPlugin.id+"time-area").children[1].innerHTML=formatSeconds(i)},1e3)}else if(type==="destroy"){if(this.countTimer){clearInterval(this.countTimer)}this.countTimer=undefined;if(document.getElementById(that.jSPlugin.id+"time-area")){document.getElementById(that.jSPlugin.id+"time-area").children[1].innerHTML="00:00";document.getElementById(that.jSPlugin.id+"time-area").style.display="none"}}function formatSeconds(value){var theTime=parseInt(value);var middle=0;var hour=0;var secondV="00";var minV="00";var hourV="00";if(theTime>59){middle=parseInt(theTime/60);theTime=parseInt(theTime%60);if(middle>59){hour=parseInt(middle/60);middle=parseInt(middle%60)}}secondV=parseInt(theTime)>9?parseInt(theTime):"0"+parseInt(theTime);minV=parseInt(middle)>9?parseInt(middle):"0"+parseInt(middle);hourV=parseInt(hour)>9?parseInt(hour):"0"+parseInt(hour);if(hour>0){return hourV+":"+minV+":"+secondV}else if(middle>0){return minV+":"+secondV}else{return"00:"+secondV}}}},{key:"editStart",value:function editStart(callback){console.log("----------editStart1");var audioControlsDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var audioControlsOnCallDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));document.getElementById("".concat(this.jSPlugin.id,"-headControl"));if(audioControlsDOM){audioControlsDOM.setAttribute("class","footer-controls themeEditing")}if(audioControlsOnCallDOM){audioControlsOnCallDOM.setAttribute("class","footer-controls themeEditing")}this.setDecoderState({isEditing:true})}},{key:"editEnd",value:function editEnd(callback){console.log("----------editEnd1");var audioControlsDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var headerMessageDOM=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));var audioControlsOnCallDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));if(headerMessageDOM){headerMessageDOM.setAttribute("class","header-controls")}if(audioControlsDOM){audioControlsDOM.setAttribute("class","footer-controls")}if(audioControlsOnCallDOM){audioControlsOnCallDOM.setAttribute("class","footer-controls")}}},{key:"fetchThemeData",value:function fetchThemeData(themeId){var _this12=this;switch(this.jSPlugin.themeId){case"pcLive":case"pcRec":case"mobileLive":case"mobileRec":case"miniRec":break;default:var successCallback=function successCallback(data){if(data.meta.code==0&&data.data){_this12.activeThemeStatus=true;_this12.themeData=data.data;if(data.data.header){_this12.themeData.header=data.data.header;_this12.themeData.header[_this12.bellStatus].btnList=_this12.themeData.header[_this12.bellStatus].btnList.sort(function(a,b){return a.btnKey.split("-")[3]-b.btnKey.split("-")[3]})}if(data.data.footer){_this12.themeData.footer=data.data.footer;_this12.themeData.footer[_this12.bellStatus].btnList=_this12.themeData.footer[_this12.bellStatus].btnList.sort(function(a,b){return a.btnKey.split("-")[3]-b.btnKey.split("-")[3]})}if(!_this12.jSPlugin.capacity){setTimeout(function(){_this12.initThemeData();_this12.renderThemeData()},300)}else{_this12.initThemeData();_this12.renderThemeData()}}else{_this12.activeThemeStatus=false;_this12.jSPlugin.pluginStatus.loadingClear();_this12.setDecoderState({rejection:true});if(data.meta.code=="111021"){_this12.jSPlugin.pluginStatus.loadingSetText({text:"无效的模板id",color:"#fff",type:1});_this12.activeThemeStatusTxt="无效的模板id"}else if(data.meta.code=="111023"){_this12.jSPlugin.pluginStatus.loadingSetText({text:"您的试用特权已到期，需前往轻应用控制台购买后使用。",color:"#fff",type:1});_this12.activeThemeStatusTxt="试用特权已到期"}else{_this12.jSPlugin.pluginStatus.loadingSetText({text:"模板未激活，请先在开放平台轻应用控制台购买模板",color:"#fff",type:1});_this12.activeThemeStatusTxt="模板未激活"}_this12.themeData=mobileCallData.data;_this12.initThemeData();_this12.renderThemeData()}};var errorCallback=function errorCallback(){_this12.renderThemeData()};templateDetailApi(this.jSPlugin,themeId,successCallback,errorCallback);break}}},{key:"getCallDeviceInfo",value:function getCallDeviceInfo(){var _this13=this;this.videoWidth/375||1;var deviceAPISuccess=function deviceAPISuccess(data){if(data.code==200&&data.data){_this13.deviceInfoData=data.data;console.log("------------getDeviceInfo");if(data.data.isEncrypt){console.log("小窗口miniRecCloseClick------------设备已加密");_this13.miniRecCloseClick();setTimeout(function(){_this13.jSPlugin.pluginStatus.loadingClear();_this13.jSPlugin.pluginStatus.loadingSetText({text:"视频已加密",color:"#fff"})},50)}if(document.getElementById("header-".concat(_this13.bellStatus,"-deviceCategory"))){document.getElementById("header-".concat(_this13.bellStatus,"-deviceCategory")).innerText=""+data.data.deviceName}}if(data.code==20018&&!_this13.jSPlugin.isWebConsole){_this13.userNoDevice()}};request(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:matchEzopenUrl(this.jSPlugin.url).deviceSerial},"",deviceAPISuccess)}},{key:"setHeaderText",value:function setHeaderText(headerText){console.log("setHeaderText");var sizeRatio=this.videoWidth/375||1;if(document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content"))){document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content")).innerHTML='<span style="font-size: '.concat(24*sizeRatio,'px;display: block">').concat(headerText,'</span><span style="font-size: ').concat(14*sizeRatio,"px;padding-top: ").concat(5*sizeRatio,'px;display: block;">').concat(this.deviceInfoData&&this.deviceInfoData.category||"","</span>")}}}]);return MobileCall}();var CallTheme=function(){function CallTheme(jSPlugin){_classCallCheck$1(this,CallTheme);this.jSPlugin=jSPlugin;this.videoWidth=jSPlugin.width;this.autoFocus=0,this.autoFocusTimer=null,this.decoderState={state:{isEditing:false,play:false,sound:false,recordvideo:false,recordCount:"00:00",talk:false,mute:false,rejection:false,cloudRec:matchEzopenUrl(jSPlugin.url).type==="cloud.rec",rec:matchEzopenUrl(jSPlugin.url).type==="rec",type:matchEzopenUrl(jSPlugin.url).type}};console.log("matchEzopenUrl(jSPlugin.url)",matchEzopenUrl(jSPlugin.url),this.decoderState.state);this.isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(typeof jSPlugin.isMobile!=="undefined"){this.isMobile=jSPlugin.isMobile}this.themeData={};if(this.jSPlugin.themeId=="themeData"){this.themeData=this.jSPlugin.params.themeData}if(this.jSPlugin.themeId){if(this.isMobile){this.call=new MobileCall(this.jSPlugin,this.themeData,this.setDecoderState,this.decoderState)}else{this.call=new Call(this.jSPlugin,this.themeData,this.setDecoderState,this.decoderState)}switch(this.jSPlugin.themeId){case"themeData":this.themeData=this.jSPlugin.params.themeData;this.call.initThemeData();this.call.renderThemeData();break;default:this.call.fetchThemeData(this.jSPlugin.themeId);break}}if(!this.jSPlugin.Talk){this.jSPlugin.Talk=new Talk(this.jSPlugin)}addCss("".concat(this.jSPlugin.staticPath,"/speed/speed.css"));addCss("".concat(this.jSPlugin.staticPath,"/css/theme.css"))}_createClass$1(CallTheme,[{key:"changeTheme",value:function changeTheme(options){var editStatus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var bellStatus=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"onBell";if(typeof options==="string"){this.jSPlugin.themeId=options;switch(this.jSPlugin.themeId){case"pcLive":case"mobileCall":case"webCall":this.call.initThemeData();this.call.renderThemeData();break;default:this.call.fetchThemeData(options);break}}else if(_typeof(options)==="object"){this.themeData=options;this.call.setThemeData(options,bellStatus);this.call.initThemeData();this.call.renderThemeData();if(this.decoderState.state.isEditing&&editStatus){this.call.editStart()}}if(this.jSPlugin&&this.jSPlugin.handleThemeChange){this.jSPlugin.handleThemeChange(options)}}},{key:"setDecoderState",value:function setDecoderState(options,backgroundColor){var _this=this;var _this$themeData=this.themeData;_this$themeData.header;_this$themeData.footer;Object.keys(options).map(function(item){switch(item){case"mute":if(document.getElementById("".concat(_this.jSPlugin.id,"-icon-mute"))){console.log("mute");if(options[item]){document.getElementById("".concat(_this.jSPlugin.id,"-icon-mute")).style.background=backgroundColor;document.getElementById("".concat(_this.jSPlugin.id,"-icon-mute")).style.border=" 1px solid ".concat(backgroundColor);document.getElementById("icon-mute-path").style.fill="#ffffff"}else{document.getElementById("".concat(_this.jSPlugin.id,"-icon-mute")).style.background="#ffffff";document.getElementById("".concat(_this.jSPlugin.id,"-icon-mute")).style.border="1px solid ".concat(backgroundColor);document.getElementById("icon-mute-path").style.fill=backgroundColor}}break}_this.decoderState.state=Object.assign(_this.decoderState.state,options)})}},{key:"startAutoFocus",value:function startAutoFocus(){var _this2=this;var autoFocus=this.autoFocus;if(this.autoFocusTimer){clearTimeout(this.autoFocusTimer)}this.autoFocusTimer=setTimeout(function(){if(document.getElementById("".concat(_this2.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(_this2.jSPlugin.id,"-audioControls")).style.opacity=0;document.getElementById("".concat(_this2.jSPlugin.id,"-audioControls")).style.pointerEvents="none"}},autoFocus*1e3)}},{key:"stopAutoFocus",value:function stopAutoFocus(){if(document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1;document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"}if(this.autoFocusTimer){clearTimeout(this.autoFocusTimer)}this.startAutoFocus()}},{key:"toString",value:function toString(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"editIcon",value:function editIcon(id,type,area){console.log("编辑组件",id,type,area);var newThemeData=this.themeData;console.log("themeData",this.themeData);var btnList=this.themeData[area].btnList;var _index=_.findIndex(btnList,function(item){return item.iconId===id});var tmp=btnList[_index];switch(type){case"delete":if(id==="rec"){if(_.findIndex(btnList,function(item){return item.iconId==="cloudRec"&&item.isrender==1})===-1){if(this.jSPlugin.Message){this.jSPlugin.Message["default"]("必须选中一种存储介质")}return false}}else if(id==="cloudRec"){if(_.findIndex(btnList,function(item){return item.iconId==="rec"&&item.isrender==1})===-1){if(this.jSPlugin.Message){this.jSPlugin.Message["default"]("必须选中一种存储介质")}return false}}btnList[_index].isrender=0;break;case"right":var nextRightBtnIndex=-1;for(var i=_index+1;i<btnList.length;i++){if(btnList[i].part===btnList[_index].part&&btnList[i].isrender==1){nextRightBtnIndex=i;break}}if(nextRightBtnIndex!==-1){btnList[_index]=btnList[nextRightBtnIndex];btnList[nextRightBtnIndex]=tmp}break;case"left":var nextLeftBtnIndex=-1;for(var _i=_index-1;_i>=0;_i--){if(btnList[_i].part===btnList[_index].part&&btnList[_i].isrender==1){nextLeftBtnIndex=_i;break}}if(nextLeftBtnIndex!==-1){btnList[_index]=btnList[nextLeftBtnIndex];btnList[nextLeftBtnIndex]=tmp}break}console.log("new btnList",btnList);newThemeData[area].btnList=btnList;this.changeTheme(newThemeData)}},{key:"countTime",value:function countTime(type){var start=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var that=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var recordDOM=document.createElement("div");recordDOM.id=this.jSPlugin.id+"time-area";recordDOM.className="time-area";recordDOM.innerHTML='<span class="dot"></span><span class="value">00:00</span>';if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(recordDOM)}}if(this.countTimer){clearInterval(this.countTimer)}if(type==="add"){var i=start;document.getElementById(that.jSPlugin.id+"time-area").style.display="flex";this.countTimer=setInterval(function(){++i;document.getElementById(that.jSPlugin.id+"time-area").children[1].innerHTML=formatSeconds(i)},1e3)}else if(type==="destroy"){if(this.countTimer){clearInterval(this.countTimer)}this.countTimer=undefined;if(document.getElementById(that.jSPlugin.id+"time-area")){document.getElementById(that.jSPlugin.id+"time-area").children[1].innerHTML="00:00";document.getElementById(that.jSPlugin.id+"time-area").style.display="none"}}function formatSeconds(value){var theTime=parseInt(value);var middle=0;var hour=0;var secondV="00";var minV="00";var hourV="00";if(theTime>59){middle=parseInt(theTime/60);theTime=parseInt(theTime%60);if(middle>59){hour=parseInt(middle/60);middle=parseInt(middle%60)}}secondV=parseInt(theTime)>9?parseInt(theTime):"0"+parseInt(theTime);minV=parseInt(middle)>9?parseInt(middle):"0"+parseInt(middle);hourV=parseInt(hour)>9?parseInt(hour):"0"+parseInt(hour);if(hour>0){return hourV+":"+minV+":"+secondV}else if(middle>0){return minV+":"+secondV}else{return"00:"+secondV}}}},{key:"editStart",value:function editStart(callback){var audioControlsDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var audioControlsOnCallDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));var headerMessageDOM=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));if(headerMessageDOM){headerMessageDOM.setAttribute("class","header-controls themeEditing")}if(audioControlsDOM){audioControlsDOM.setAttribute("class","footer-controls themeEditing")}if(audioControlsOnCallDOM){audioControlsOnCallDOM.setAttribute("class","footer-controls themeEditing")}this.setDecoderState({isEditing:true})}},{key:"editEnd",value:function editEnd(callback){var audioControlsDOM=document.getElementById("".concat(this.jSPlugin.id,"-audioControls"));var headerMessageDOM=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));if(headerMessageDOM){headerMessageDOM.setAttribute("class","header-controls")}if(audioControlsDOM){audioControlsDOM.setAttribute("class","footer-controls")}this.setDecoderState({isEditing:false})}},{key:"setDisabled",value:function setDisabled(status){}},{key:"getDeviceInfo",value:function getDeviceInfo(){var _this3=this;var sizeRatio=this.videoWidth/1024||1;var deviceAPISuccess=function deviceAPISuccess(data){if(data.code==200&&data.data){if(data.data.isEncrypt){setTimeout(function(){_this3.jSPlugin.pluginStatus.loadingClear();_this3.jSPlugin.pluginStatus.loadingSetText({text:"视频已加密",color:"#fff"})},50)}if(document.getElementById("".concat(_this3.jSPlugin.id,"-deviceCategory-content"))){document.getElementById("".concat(_this3.jSPlugin.id,"-deviceCategory-content")).style.maxWidth="100%";document.getElementById("".concat(_this3.jSPlugin.id,"-deviceCategory-content")).style.overflow="hidden";document.getElementById("".concat(_this3.jSPlugin.id,"-deviceCategory-content")).style.textOverflow="ellipsis";document.getElementById("".concat(_this3.jSPlugin.id,"-deviceCategory-content")).style.whiteSpace="nowrap";document.getElementById("".concat(_this3.jSPlugin.id,"-deviceCategory-content")).innerHTML='<span style="font-size: '.concat(32*sizeRatio,'px;display: block">有人按门铃</span><span style="font-size: ').concat(24*sizeRatio,"px;padding-top: ").concat(16*sizeRatio,'px;display: block;">').concat(data.data.category,"</span>")}}};request(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:matchEzopenUrl(this.jSPlugin.url).deviceSerial},"",deviceAPISuccess)}}]);return CallTheme}();var Timer=function(){function Timer(jSPlugin){_classCallCheck$1(this,Timer);this.jSPlugin=jSPlugin;var timer=window["EZUIKIT_TIMER_INTERVAL_".concat(jSPlugin.id)];if(timer&&Object.keys(timer).length>0){this.resetTimer()}window["EZUIKIT_TIMER_INTERVAL_".concat(jSPlugin.id)]={}}_createClass$1(Timer,[{key:"createInterval",value:function createInterval(key,fn,time){var timer=window["EZUIKIT_TIMER_INTERVAL_".concat(this.jSPlugin.id)];timer[key]=setInterval(fn,time)}},{key:"clearTimer",value:function clearTimer(key){var timer=window["EZUIKIT_TIMER_INTERVAL_".concat(this.jSPlugin.id)];if(timer[key]){clearInterval(timer[key]);delete timer[key]}}},{key:"resetTimer",value:function resetTimer(){var timer=window["EZUIKIT_TIMER_INTERVAL_".concat(this.jSPlugin.id)];for(var key in timer){clearInterval(timer[key]);delete timer[key]}}}]);return Timer}();var InspectMap=_createClass$1(function InspectMap(jSPlugin){var _this=this;_classCallCheck$1(this,InspectMap);_defineProperty(this,"initMap",function(){var that=_this;var clientWidth=_this.videoWidth;var clientHeight=_this.videoHeight;if(!document.getElementById("".concat(_this.jSPlugin.id,"-miniRecbox"))){var objDOM=document.createElement("div");objDOM.id="".concat(_this.jSPlugin.id,"-miniRecbox");objDOM.style=";position: absolute; bottom:96px;right:".concat(_this.jSPlugin.inspectVideoWidth,"px;");objDOM.innerHTML='<div  id="'.concat(_this.jSPlugin.id,'-mapbox" style="\n        width: ').concat(clientWidth*.3333,"px;\n        height: ").concat(clientHeight*.3333,'px;\n      "></div>');document.getElementById("".concat(_this.jSPlugin.id,"-wrap")).insertBefore(objDOM,document.getElementById("".concat(_this.jSPlugin.id,"-ez-iframe-footer-container")));that.map=that.loadMap("".concat(_this.jSPlugin.id,"-mapbox"))}else{document.getElementById("".concat(_this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("".concat(_this.jSPlugin.id,"-miniRecbox")));_this.initMap()}return that.map});_defineProperty(this,"loadMap",function(id){var map=new BMapGL.Map(id);map.centerAndZoom(new BMapGL.Point(116.297611,40.047363),15);map.enableScrollWheelZoom(true);return map});_defineProperty(this,"createCircle",function(lng,lat,radius,inspectPointName){var point=new BMapGL.Point(lng,lat);var marker=new BMapGL.Marker(point,{title:inspectPointName});_this.map.addOverlay(marker);if(radius==0)return;var circle=new BMapGL.Circle(new BMapGL.Point(lng,lat),radius,{strokeColor:"#ff4d4f",strokeWeight:4,strokeOpacity:1,strokeStyle:"dashed",fillOpacity:0});_this.map.addOverlay(circle)});_defineProperty(this,"createInspectPoints",function(inspectPoints){inspectPoints.map(function(v){_this.createCircle(v.longitude,v.latitude,v.radius,v.inspectPointName)})});_defineProperty(this,"createPolygon",function(path){var color=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"#407AFF";var strokeStyle=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"solid";var strokeWeight=arguments.length>3&&arguments[3]!==undefined?arguments[3]:4;var strokeOpacity=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;var fillColor=arguments.length>5&&arguments[5]!==undefined?arguments[5]:"407AFF";var fillOpacity=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var pathArr=[];var pathList=path.split(";");pathList.map(function(v){var point=v.split(",");pathArr.push(new BMapGL.Point(point[0],point[1]))});_this.inspectRange=new BMapGL.Polygon(pathArr,{strokeColor:color,strokeWeight:strokeWeight,strokeOpacity:strokeOpacity,strokeStyle:strokeStyle,fillOpacity:fillOpacity,fillColor:fillColor});_this.map.addOverlay(_this.inspectRange)});_defineProperty(this,"createTrack",function(path){var isFirst=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var color=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"#18C796";var strokeStyle=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"solid";var strokeWeight=arguments.length>4&&arguments[4]!==undefined?arguments[4]:4;var strokeOpacity=arguments.length>5&&arguments[5]!==undefined?arguments[5]:1;var fillOpacity=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;var tilt=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;var duration=arguments.length>8&&arguments[8]!==undefined?arguments[8]:500;var delay=arguments.length>9&&arguments[9]!==undefined?arguments[9]:0;var overallView=arguments.length>10&&arguments[10]!==undefined?arguments[10]:false;var point=[];path.map(function(v){var isExist=false;if(_this.currentTrack.length>0){_this.currentTrack.map(function(v1){if(v1.longitude===v.longitude&&v1.latitude===v.latitude&&v1.reportTime===v.reportTime){isExist=true}})}if(!isExist){if(point.length==0&&_this.currentTrack.length>0){point.push(new BMapGL.Point(_this.currentTrack[_this.currentTrack.length-1].longitude,_this.currentTrack[_this.currentTrack.length-1].latitude))}point.push(new BMapGL.Point(v.longitude,v.latitude))}});if(point.length==0)return;var pl=new BMapGL.Polyline(point,{strokeColor:color,strokeWeight:strokeWeight,strokeOpacity:strokeOpacity,strokeStyle:strokeStyle,fillOpacity:fillOpacity});if(isFirst){_this.map.addOverlay(pl);_this.map.centerAndZoom(point[point.length-1],15)}else{_this.trackAni=new BMapGLLib.TrackAnimation(_this.map,pl,{overallView:overallView,tilt:tilt,duration:duration,delay:delay});_this.trackAni.start()}_this.currentTrack=path;if(_this.currentTrack.length>0){if(_this.currentTrack.length>0){var firstPoint=new BMapGL.Point(_this.currentTrack[0].longitude,_this.currentTrack[0].latitude);_this.startPoint=new BMapGL.Marker(firstPoint,{icon:new BMapGL.Icon("".concat(_this.jSPlugin.staticPath,"/imgs/start.png"),new BMapGL.Size(32,47)),offset:new BMapGL.Size(0,-17)});_this.map.addOverlay(_this.startPoint);if(_this.currentTrack.length==1)return;var _point=new BMapGL.Point(_this.currentTrack[_this.currentTrack.length-1].longitude,_this.currentTrack[_this.currentTrack.length-1].latitude);if(_this.endPoint){_this.map.removeOverlay(_this.endPoint)}setTimeout(function(){_this.endPoint=new BMapGL.Marker(_point,{icon:new BMapGL.Icon("".concat(_this.jSPlugin.staticPath,"/imgs/end.png"),new BMapGL.Size(30,30))});_this.map.addOverlay(_this.endPoint)},isFirst?0:duration)}}});_defineProperty(this,"centerToTrack",function(){var lv=arguments.length>0&&arguments[0]!==undefined?arguments[0]:15;if(_this.currentTrack.length>0){if(_this.currentTrack.length==1){_this.map.centerAndZoom(new BMapGL.Point(_this.currentTrack[0].longitude,_this.currentTrack[0].latitude),lv)}else{_this.map.centerAndZoom(new BMapGL.Point(_this.currentTrack[_this.currentTrack.length-1].longitude,_this.currentTrack[_this.currentTrack.length-1].latitude),lv)}}});this.jSPlugin=jSPlugin;this.videoWidth=jSPlugin.width;this.videoHeight=jSPlugin.height;this.toastCustom=new ToastCustom(jSPlugin,false);this.currentTrack=[];this.startPoint=null;this.endPoint=null;this.trackAni=null;this.inspectRange=null;this.map=this.initMap()});var GlobalContainer=_createClass$1(function GlobalContainer(jSPlugin){var _this=this;_classCallCheck$1(this,GlobalContainer);_defineProperty(this,"init",function(){var that=_this;_this.videoWidth+290;_this.videoHeight+170;if(!document.getElementById("".concat(_this.jSPlugin.id,"-inspect-global-box"))){var objDOM=document.createElement("div");objDOM.id="".concat(_this.jSPlugin.id,"-inspect-global-box");objDOM.style=";position: absolute; left:0; top: 0; width: 100%; height: 100%; z-index: 10000; background: #fff;";objDOM.innerHTML='<div id="'.concat(_this.jSPlugin.id,'-inspect-loading-box" style="\n        overflow: auto;\n        box-sizing: border-box;\n        font-size: 14px;\n        color: #595959;\n        line-height: 24px;\n        font-weight: bold;\n        width: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n      ">\n      <div>\n      <div style="text-align:center;"><div type="default" class="ezuikit-spin ezuikit-spin-spinning"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div></div>\n      <div style="color: #595959; font-size:14px; font-weight: 400; text-align: center;">加载中…</div>\n      </div></div>\n      ');document.getElementById("".concat(_this.jSPlugin.id,"-wrap")).appendChild(objDOM)}else{if(document.getElementById("".concat(_this.jSPlugin.id,"-inspect-global-box"))){document.getElementById("".concat(_this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("".concat(_this.jSPlugin.id,"-inspect-global-box")))}that.init()}});_defineProperty(this,"deviceErrorInfo",function(opt,callback){var defaultOpt={tips:"",refreshBtn:"",refreshShow:false};var options=Object.assign(defaultOpt,opt);if(!document.getElementById("".concat(_this.jSPlugin.id,"-no-inspect-box"))){_this.videoHeight+170;var objDOM=document.createElement("div");objDOM.id="".concat(_this.jSPlugin.id,"-no-inspect-box");objDOM.style="width:100%;height:100%; background: #ffffff; display: flex; justify-content: center; align-items: center";objDOM.innerHTML='<div style="\n        overflow: auto;\n        box-sizing: border-box;\n        font-size: 14px;\n        color: #595959;\n        text-align: center;\n      ">\n      <div style="text-align:center; height: 21px;">\n      <svg t="1689074472491" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7172" xmlns:xlink="http://www.w3.org/1999/xlink" width="21" height="21"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z" fill="#FF4D4F" p-id="7173"></path></svg>\n      </div>\n      <div style="color: #595959; font-size:14px; margin: 5px 0 16px;font-weight: 400; text-align: center;">'.concat(options.tips,'</div>\n      <button id="').concat(_this.jSPlugin.id,'-inspect-device-status-refresh" style="display: ').concat(options.refreshShow?"block":"none",';  width: 80px; margin: 0 auto;" type="button" class="ezuikit-btn ezuikit-btn-primary"><span>').concat(options.refreshBtn,"</span></button>\n      </div>\n      ");document.getElementById("".concat(_this.jSPlugin.id,"-inspect-global-box")).appendChild(objDOM);document.getElementById("".concat(_this.jSPlugin.id,"-inspect-device-status-refresh")).addEventListener("click",function(){callback&&callback()})}else{if(document.getElementById("".concat(_this.jSPlugin.id,"-no-inspect-box"))){document.getElementById("".concat(_this.jSPlugin.id,"-inspect-global-box")).removeChild(document.getElementById("".concat(_this.jSPlugin.id,"-no-inspect-box")))}_this.deviceErrorInfo(opt,callback)}});_defineProperty(this,"globalContainerToggle",function(id,isShow){if(document.getElementById(id)){document.getElementById(id).style.display=isShow?"flex":"none"}});this.jSPlugin=jSPlugin;this.videoWidth=jSPlugin.width;this.videoHeight=jSPlugin.height;this.toastCustom=new ToastCustom(jSPlugin,false);this.init()});var Message=function(){function Message(params){_classCallCheck$1(this,Message);this.timer=null;var defaultParams={wrapNode:document.body,time:2e3,content:"",type:"info",center:false,top:8};this.params=_objectSpread2(_objectSpread2({},defaultParams),params);this.init()}_createClass$1(Message,[{key:"init",value:function init(){var _this=this;this.timer=null;var _this$params=this.params,wrapNode=_this$params.wrapNode,content=_this$params.content,time=_this$params.time,type=_this$params.type,center=_this$params.center,top=_this$params.top;this.wrapNode=wrapNode;var wrapToast=document.createElement("div");wrapToast.setAttribute("class","ezuikit-message");if(center){wrapToast.setAttribute("style","top: 50%; transform: translateY(-50%);")}else{wrapToast.setAttribute("style","top: ".concat(top||0,"px;"))}this.wrapNode.appendChild(wrapToast);this.initMessageContent(type,content,wrapToast);if(time===0)return;this.timer=setTimeout(function(){_this.wrapNode.removeChild(wrapToast)},time||2e3)}},{key:"initMessageContent",value:function initMessageContent(type,content,wrapToast){var messageContent=document.createElement("div");messageContent.setAttribute("class","ezuikit-message-notice");messageContent.innerHTML='\n\t\t\t<div class="ezuikit-message-notice-content">\n\t\t\t\t<div class="ezuikit-message-custom-content ezuikit-message-'.concat(type,'">\n\t\t\t\t\t<span role="img" aria-label="check-circle" class="ezdicon ezdicon-check-circle">\n\t\t\t\t\t\t').concat(type==="warning"?'<svg fill="currentColor" t="1691567271942" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z"></path></svg>':"","\n\t\t\t\t\t\t").concat(type==="info"?'<svg fill="currentColor" t="1691567317943" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m32 664a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8v-272c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272zM512 384a48 48 0 1 1 0-96A48 48 0 0 1 512 384z"></path></svg>':"","\n\t\t\t\t\t\t").concat(type==="error"?'<svg fill="currentColor" t="1691567308585" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m165.376 618.24l-65.92-0.32L512 563.392l-99.328 118.4-66.048 0.32a7.936 7.936 0 0 1-8-8c0-1.92 0.64-3.712 1.92-5.184L470.528 513.92 340.48 359.04a8 8 0 0 1 6.08-13.184l66.112 0.256L512 464.576l99.328-118.4 65.92-0.256c4.48 0 8.064 3.456 8.064 8a8.32 8.32 0 0 1-1.92 5.12l-129.92 154.944 130.048 155.008a8 8 0 0 1-6.08 13.184z"></path></svg>':"","\n\t\t\t\t\t\t").concat(type==="success"?'<svg fill="currentColor" viewBox="64 64 896 896" focusable="false" data-icon="check-circle" width="1em" height="1em" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"></path></svg>':"","\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>").concat(content,"</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t");wrapToast.appendChild(messageContent)}}]);return Message}();var Image$1=function(){function Image(params){_classCallCheck$1(this,Image);var defaultParams={id:"",width:"100%",height:"100%",preview:true,showIcon:true,src:"",alt:"",fallback:"https://img.ys7.com/group32/M00/81/9D/CtxIA2HnrGyADm_jAAAFfWjIDJs811.png"};this.params=_objectSpread2(_objectSpread2({},defaultParams),params);this.id=Math.random().toString(36).substr(2);this.init()}_createClass$1(Image,[{key:"init",value:function init(){var _this$params=this.params,id=_this$params.id,width=_this$params.width,height=_this$params.height,preview=_this$params.preview;if(document.getElementById(id)){var imgWrap=document.createElement("div");imgWrap.setAttribute("class","ezuikit-image");imgWrap.setAttribute("style","width:".concat(width,";height:").concat(height,";"));document.getElementById(id).appendChild(imgWrap);this.initImage(imgWrap);if(preview){this.initPreview(imgWrap)}}}},{key:"previewImg",value:function previewImg(){var _this$params2=this.params,src=_this$params2.src,alt=_this$params2.alt,fallback=_this$params2.fallback;var previewImg=document.createElement("div");previewImg.setAttribute("id",this.id+"-preview");previewImg.setAttribute("class","ezuikit-image-preview");previewImg.innerHTML='\n\t\t\t<div class="ezuikit-image-preview-mask"></div>\n\t\t\t<div class="ezuikit-image-preview-img-wrapper">\n\t\t\t\t<div class="ezuikit-image-preview-operations" id="'.concat(this.id,'-ezuikit-image-preview-operations">\n\t\t\t\t\t<div class="ezuikit-image-preview-operations-operation">\n\t\t\t\t\t\t<span role="img" aria-label="close" class="anticon anticon-close ezuikit-image-preview-operations-icon">\n\t\t\t\t\t\t\t<svg viewBox="64 64 896 896" focusable="false" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"></path></svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ezuikit-image-preview-wrap">\n\t\t\t\t\t<div class="ezuikit-image-preview-img-main"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t');var Img=document.createElement("img");Img.setAttribute("class","ezuikit-image-preview-img");Img.setAttribute("alt",alt);Img.setAttribute("src",src);Img.addEventListener("error",function(){Img.setAttribute("src",fallback)});document.body.appendChild(previewImg);previewImg.querySelector(".ezuikit-image-preview-img-main").appendChild(Img);document.getElementById(this.id+"-ezuikit-image-preview-operations").addEventListener("click",function(){document.body.removeChild(previewImg)})}},{key:"initImage",value:function initImage(imgWrap){var _this$params3=this.params,src=_this$params3.src,alt=_this$params3.alt,fallback=_this$params3.fallback;var Img=document.createElement("img");Img.setAttribute("class","ezuikit-image-img");Img.setAttribute("alt",alt);Img.setAttribute("src",src);Img.addEventListener("error",function(){Img.setAttribute("src",fallback)});imgWrap.appendChild(Img)}},{key:"initPreview",value:function initPreview(imgWrap){var _this=this;var showIcon=this.params.showIcon;var previewWrap=document.createElement("div");previewWrap.setAttribute("class","ezuikit-image-mask");if(showIcon){previewWrap.innerHTML='\n\t\t\t\t<div class="ezuikit-image-mask-info">\n\t\t\t\t\t<span class="ezuikit-image-anticon-eye">\n\t\t\t\t\t\t<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em"  aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>\n\t\t\t\t\t\t预览\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t'}imgWrap.appendChild(previewWrap);imgWrap.onclick=function(){_this.previewImg()}}}]);return Image}();var Popover=function(){function Popover(params){_classCallCheck$1(this,Popover);var defaultParams={id:"",parentNodeId:"",title:"",content:"",placement:"top",cancelText:"取消",arrowPointAtCenter:false,okText:"确定",onCancel:function onCancel(){},onConfirm:function onConfirm(){}};this.params=_objectSpread2(_objectSpread2({},defaultParams),params);this.initState=false;this.init(params)}_createClass$1(Popover,[{key:"init",value:function init(){var _this=this;var _this$params=this.params,id=_this$params.id,content=_this$params.content,placement=_this$params.placement,title=_this$params.title;var popoverNode=document.getElementById(id);if(popoverNode){var popover=document.createElement("div");popover.setAttribute("id",id+"-popover");popover.setAttribute("class","ezuikit-popover");popover.setAttribute("style","display:none;");popover.innerHTML='\n\t\t\t\t\t<div class="ezuikit-popover-arrow">\n\t\t\t\t\t\t<span class="ezuikit-popover-arrow-content"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ezuikit-popover-inner">\n\t\t\t\t\t\t'.concat(title?'<div class="ezuikit-popover-title">'.concat(title,"</div>"):"",'\n\t\t\t\t\t\t<div class="ezuikit-popover-inner-content">').concat(content,"</div>\n\t\t\t\t\t</div>\n\t\t\t\t");if(!document.getElementById(id+"-popover")){var parentNode=document.body;if(this.params.parentNodeId){parentNode=document.getElementById(this.params.parentNodeId)}parentNode.appendChild(popover);this.renderPopover(popover,popoverNode,placement)}document.body.addEventListener("click",function(e){_this.addEventListenerFn(e)})}}},{key:"addEventListenerFn",value:function addEventListenerFn(e){var id=this.params.id;var popoverNode=document.getElementById(id);var popover=document.getElementById(id+"-popover");if(popoverNode&&!(e.target===popoverNode||popoverNode.contains(e.target))){if(popover&&!(e.target===popover||popover.contains(e.target))){this.hidePopover()}}}},{key:"hidePopover",value:function hidePopover(){var id=this.params.id;var popover=document.getElementById(id+"-popover");if(popover){document.body.removeChild(popover)}}},{key:"renderPopover",value:function renderPopover(popover,popoverNode,placement,popoverWidthRefresh,popoverHeightRefresh){popover.style.display="block";var _popoverNode$getBound=popoverNode.getBoundingClientRect(),top=_popoverNode$getBound.top,left=_popoverNode$getBound.left,width=_popoverNode$getBound.width,height=_popoverNode$getBound.height;var _popover$getBoundingC=popover.getBoundingClientRect(),popoverWidth=_popover$getBoundingC.width,popoverHeight=_popover$getBoundingC.height;if(popoverWidthRefresh){popoverWidth=popoverWidthRefresh}if(popoverHeightRefresh){popoverHeight=popoverHeightRefresh}var parentNode=document.body;if(this.params.parentNodeId){parentNode=document.getElementById(this.params.parentNodeId)}var arrowPointAtCenter=this.params.arrowPointAtCenter;var topOffset=0;var leftOffset=0;var arrow=popover.getElementsByClassName("ezuikit-popover-arrow")[0];var _arrow$getBoundingCli=arrow.getBoundingClientRect(),arrowWidth=_arrow$getBoundingCli.width,arrowHeight=_arrow$getBoundingCli.height;if(arrowPointAtCenter){var arrowLeft=0;var arrowTop=0;switch(placement){case"top":arrowLeft=popoverWidth/2;arrowTop=popoverHeight;break;case"bottom":arrowLeft=popoverWidth/2;arrowTop=0;break;case"left":arrowLeft=popoverWidth;arrowTop=popoverHeight/2;break;case"right":arrowLeft=0;arrowTop=popoverHeight/2;break;case"topLeft":arrowLeft=(width-arrowWidth)/2;arrowTop=popoverHeight;break;case"topRight":arrowLeft=popoverWidth-(width+arrowWidth)/2;arrowTop=popoverHeight;break;case"bottomLeft":arrowLeft=(width-arrowWidth)/2;arrowTop=0;break;case"bottomRight":arrowLeft=popoverWidth-(width+arrowWidth)/2;arrowTop=0;break;case"leftTop":arrowLeft=popoverWidth;arrowTop=(height-arrowHeight)/2;break;case"leftBottom":arrowLeft=popoverWidth;arrowTop=popoverHeight-(height+arrowHeight)/2;break;case"rightTop":arrowLeft=0;arrowTop=(height-10)/2;break;case"rightBottom":arrowLeft=0;arrowTop=popoverHeight-(height+arrowHeight)/2;break;default:arrowLeft=popoverWidth/2;arrowTop=popoverHeight;break}arrow.style.left=arrowLeft+"px";arrow.style.top=arrowTop+"px"}switch(placement){case"top":topOffset=-(popoverHeight+arrowHeight);leftOffset=(width-popoverWidth)/2;popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-top");break;case"bottom":topOffset=height-arrowHeight/2;leftOffset=(width-popoverWidth)/2;popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-bottom");break;case"left":topOffset=(height-popoverHeight)/2;leftOffset=-(popoverWidth+arrowWidth/2);popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-left");break;case"right":topOffset=(height-popoverHeight)/2;leftOffset=width-arrowWidth/2;popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-right");break;case"topLeft":topOffset=-(popoverHeight+arrowHeight);leftOffset=0;popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-topLeft");break;case"topRight":topOffset=-(popoverHeight+arrowHeight);leftOffset=width-popoverWidth;popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-topRight");break;case"bottomLeft":topOffset=height-arrowHeight/2;leftOffset=0;popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-bottomLeft");break;case"bottomRight":topOffset=height-arrowHeight/2;leftOffset=width-popoverWidth;popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-bottomRight");break;case"leftTop":topOffset=0;leftOffset=-(popoverWidth+arrowWidth/2);popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-leftTop");break;case"leftBottom":topOffset=height-popoverHeight;leftOffset=-(popoverWidth+arrowWidth/2);popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-leftBottom");break;case"rightTop":topOffset=0;leftOffset=width-arrowWidth/2;popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-rightTop");break;case"rightBottom":topOffset=height-popoverHeight;leftOffset=width-arrowWidth/2;popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-rightBottom");break;default:topOffset=-popoverHeight;leftOffset=(width-popoverWidth)/2;popover.setAttribute("class","ezuikit-popover ezuikit-popover-placement-top");break}var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;var scrollLeft=document.documentElement.scrollLeft||document.body.scrollLeft;popover.style.top=top+scrollTop+topOffset+"px";popover.style.left=left+scrollLeft+leftOffset+"px";var popoverRect=popover.getBoundingClientRect();var parentRect=parentNode===document.body?{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}:parentNode.getBoundingClientRect();var newPlacement=placement;if(popoverRect.left<parentRect.left){newPlacement=newPlacement.replace("Right","Left");newPlacement=newPlacement.replace("right","left")}if(popoverRect.right>parentRect.right){newPlacement=newPlacement.replace("Left","Right");newPlacement=newPlacement.replace("left","right")}if(popoverRect.top<parentRect.top){newPlacement=newPlacement.replace("Top","Bottom");newPlacement=newPlacement.replace("top","bottom")}if(popoverRect.bottom>parentRect.bottom){newPlacement=newPlacement.replace("Bottom","Top");newPlacement=newPlacement.replace("bottom","top")}if(newPlacement!==placement){this.renderPopover(popover,popoverNode,newPlacement,popoverWidth,popoverHeight)}}}]);return Popover}();var Popconfirm=function(){function Popconfirm(params){_classCallCheck$1(this,Popconfirm);var defaultParams={id:"",content:"",placement:"top",cancelText:"取消",arrowPointAtCenter:false,okText:"确定",onCancel:function onCancel(){},onConfirm:function onConfirm(){}};this.params=_objectSpread2(_objectSpread2({},defaultParams),params);this.PopconfirmDom=null;this.init(params)}_createClass$1(Popconfirm,[{key:"init",value:function init(){var _this=this;var _this$params=this.params,content=_this$params.content,cancelText=_this$params.cancelText,okText=_this$params.okText,onCancel=_this$params.onCancel,onConfirm=_this$params.onConfirm;var contentDom=document.createElement("div");contentDom.innerHTML='\n      <div class="ezuikit-confirm">\n        <div class="ezuikit-confirm-content">\n\t\t\t\t\t<span class="ezuikit-confirm-icon">\n          \t<svg fill="currentColor" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z"></path></svg>\n          </span>\n\t\t\t\t\t<span class="ezuikit-confirm-content-label">'.concat(content,'</span>\n        </div>\n        <div class="ezuikit-popover-buttons"></div>\n      </div>\n      ');var cancelBtn=document.createElement("button");cancelBtn.className="ezuikit-btn ezuikit-cancel-btn";cancelBtn.innerText=cancelText;var okBtn=document.createElement("button");okBtn.className="ezuikit-btn ezuikit-ok-btn ezuikit-btn-primary";okBtn.innerText=okText;contentDom.querySelector(".ezuikit-popover-buttons").appendChild(cancelBtn);contentDom.querySelector(".ezuikit-popover-buttons").appendChild(okBtn);this.PopconfirmDom=new Popover(_objectSpread2(_objectSpread2({},this.params),{},{content:contentDom.innerHTML}));if(document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-cancel-btn")){document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-cancel-btn").onclick=function(){if(onCancel){onCancel()}else{_this.hide()}return}}if(document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-ok-btn")){document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-ok-btn").onclick=function(){if(onConfirm){onConfirm()}else{_this.hide()}return}}return this.PopconfirmDom}},{key:"hide",value:function hide(){this.PopconfirmDom.hidePopover()}}]);return Popconfirm}();var Video=function(){function Video(params){_classCallCheck$1(this,Video);var defaultParams={id:"",width:"100%",height:"100%",preview:true,poster:"",fallback:"https://img.ys7.com/group32/M00/81/9D/CtxIA2HnrGyADm_jAAAFfWjIDJs811.png",src:""};this.params=_objectSpread2(_objectSpread2({},defaultParams),params);this.id=Math.random().toString(36).substr(2);this.init()}_createClass$1(Video,[{key:"init",value:function init(){var _this$params=this.params,id=_this$params.id,width=_this$params.width,height=_this$params.height,preview=_this$params.preview;if(document.getElementById(id)){var videoWrap=document.createElement("div");videoWrap.setAttribute("class","ezuikit-video");videoWrap.setAttribute("style","width:".concat(width,";height:").concat(height,";"));document.getElementById(id).appendChild(videoWrap);this.initVideo(videoWrap);if(preview){this.initPreview(videoWrap)}}}},{key:"previewVideo",value:function previewVideo(){var src=this.params.src;var previewVideo=document.createElement("div");previewVideo.setAttribute("id",this.id+"-preview");previewVideo.setAttribute("class","ezuikit-image-video");previewVideo.innerHTML='\n\t\t\t<div class="ezuikit-video-preview-mask"></div>\n\t\t\t<div class="ezuikit-video-preview-img-wrapper">\n\t\t\t\t<div class="ezuikit-video-preview-operations" id="'.concat(this.id,'-ezuikit-video-preview-operations">\n\t\t\t\t\t<div class="ezuikit-video-preview-operations-operation">\n\t\t\t\t\t\t<span role="img" aria-label="close" class="anticon anticon-close ezuikit-video-preview-operations-icon">\n\t\t\t\t\t\t\t<svg viewBox="64 64 896 896" focusable="false" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"></path></svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ezuikit-video-preview-wrap">\n\t\t\t\t\t<div class="ezuikit-video-preview-img-wrapper">\n\t\t\t\t\t\t<video\n\t\t\t\t\t\t\tclass="ezuikit-video-preview-img custom-controls"\n\t\t\t\t\t\t\tsrc="').concat(src,'"\n\t\t\t\t\t\t\tautoplay \n\t\t\t\t\t\t\tcontrols \n\t\t\t\t\t\t\tcontrolslist="nodownload noremoteplayback noplaybackrate"\n\t\t\t\t\t\t\tdisablePictureInPicture\n\t\t\t\t\t\t\tdisableRemotePlayback\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t');document.body.appendChild(previewVideo);document.getElementById(this.id+"-ezuikit-video-preview-operations").addEventListener("click",function(){document.body.removeChild(previewVideo)})}},{key:"initVideo",value:function initVideo(imgWrap){var _this$params2=this.params,poster=_this$params2.poster,fallback=_this$params2.fallback;var Img=document.createElement("img");Img.setAttribute("class","ezuikit-video-img");Img.setAttribute("src",poster);Img.addEventListener("error",function(){Img.setAttribute("src",fallback)});imgWrap.appendChild(Img)}},{key:"initPreview",value:function initPreview(imgWrap){var _this=this;var previewWrap=document.createElement("div");previewWrap.setAttribute("class","ezuikit-video-mask");previewWrap.innerHTML='\n\t\t\t<div class="ezuikit-video-mask-info">\n\t\t\t\t<span class="ezuikit-video-anticon-eye">\n\t\t\t\t\t<svg width="28" height="28" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 28 28" style="enable-background:new 0 0 28 28;" xml:space="preserve">\n\t\t\t\t\t<circle cx="14" cy="14" r="14" style="opacity:0.7;fill-rule:evenodd;clip-rule:evenodd;enable-background:new;"/>\n\t\t\t\t\t<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#FFFFFF;" d="M18.3,15.2l-5.3,3.3c-0.7,0.4-1.6,0.2-2.1-0.5c-0.1-0.2-0.2-0.5-0.2-0.8v-6.6\n\t\t\t\t\t\tc0-0.8,0.7-1.5,1.5-1.5c0.3,0,0.6,0.1,0.8,0.2l5.3,3.3c0.7,0.4,0.9,1.4,0.5,2.1C18.6,14.9,18.4,15,18.3,15.2z"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t';imgWrap.appendChild(previewWrap);imgWrap.onclick=function(){_this.previewVideo()}}}]);return Video}();var getInspectDetail=function getInspectDetail(jSPlugin,successCallback,errorCallback){var success=function success(data){successCallback&&successCallback(data)};var error=function error(err){errorCallback&&errorCallback(err)};var data={accessToken:jSPlugin.accessToken,deviceSerial:matchEzopenUrl(jSPlugin.url).deviceSerial};var headers={"Content-Type":"application/x-www-form-urlencoded"};var url="".concat(jSPlugin.env.domain,"/api/service/devicekit/bodycamera/inspect/detail/latest");FetchData(url,"GET",data,success,error,headers)};var getDeviceTrace=function getDeviceTrace(jSPlugin,inspectRecordId,successCallback,errorCallback){var success=function success(data){successCallback&&successCallback(data)};var error=function error(err){errorCallback&&errorCallback(err)};var data={accessToken:jSPlugin.accessToken,inspectRecordId:inspectRecordId,page:0};var headers={"Content-Type":"application/x-www-form-urlencoded"};var url="".concat(jSPlugin.env.domain,"/api/service/devicekit/bodycamera/device/trace");FetchData(url,"GET",data,success,error,headers)};var getDeviceInfo=function getDeviceInfo(jSPlugin,successCallback,errorCallback){var success=function success(data){successCallback&&successCallback(data)};var error=function error(err){errorCallback&&errorCallback(err)};var data={accessToken:jSPlugin.accessToken,deviceSerial:matchEzopenUrl(jSPlugin.url).deviceSerial};var headers={"Content-Type":"application/x-www-form-urlencoded"};var url="".concat(jSPlugin.env.domain,"/api/service/devicekit/bodycamera");FetchData(url,"GET",data,success,error,headers)};var getEventList=function getEventList(jSPlugin,inspectRecordId){var pageStart=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var pageSize=arguments.length>3&&arguments[3]!==undefined?arguments[3]:30;var successCallback=arguments.length>4?arguments[4]:undefined;var errorCallback=arguments.length>5?arguments[5]:undefined;var success=function success(data){successCallback&&successCallback(data)};var error=function error(err){errorCallback&&errorCallback(err)};var data={accessToken:jSPlugin.accessToken,inspectRecordId:inspectRecordId,pageStart:pageStart,pageSize:pageSize};var headers={"Content-Type":"application/x-www-form-urlencoded"};var url="".concat(jSPlugin.env.domain,"/api/service/devicekit/bodycamera/inspect/event/page");FetchData(url,"GET",data,success,error,headers)};var evidence=function evidence(jSPlugin,evidenceFileType,successCallback,errorCallback){var success=function success(data){successCallback&&successCallback(data)};var error=function error(err){errorCallback&&errorCallback(err)};var data={accessToken:jSPlugin.accessToken,deviceSerial:matchEzopenUrl(jSPlugin.url).deviceSerial,validateCode:matchEzopenUrl(jSPlugin.url).validCode,channelNo:matchEzopenUrl(jSPlugin.url).channelNo,evidenceFileType:evidenceFileType};var headers={"Content-Type":"application/x-www-form-urlencoded"};var url="".concat(jSPlugin.env.domain,"/api/service/devicekit/common/file/evidence");FetchData(url,"POST",data,success,error,headers)};var evidenceStop=function evidenceStop(jSPlugin,taskId,successCallback,errorCallback){var success=function success(data){successCallback&&successCallback(data)};var error=function error(err){errorCallback&&errorCallback(err)};var data={accessToken:jSPlugin.accessToken,taskId:taskId};var headers={"Content-Type":"application/x-www-form-urlencoded"};var url="".concat(jSPlugin.env.domain,"/api/v3/open/cloud/video/frame/stop");FetchData(url,"POST",data,success,error,headers)};var getTaskDetail=function getTaskDetail(jSPlugin,taskId,successCallback,errorCallback){var success=function success(data){successCallback&&successCallback(data)};var error=function error(err){errorCallback&&errorCallback(err)};var data={accessToken:jSPlugin.accessToken,taskId:taskId};var headers={"Content-Type":"application/x-www-form-urlencoded"};var url="".concat(jSPlugin.env.domain,"/api/service/devicekit/opencloud/task/info");FetchData(url,"GET",data,success,error,headers)};var addEvent=function addEvent(jSPlugin,parms,successCallback,errorCallback){var defaultParms={accessToken:jSPlugin.accessToken,inspectRecordId:"",eventType:"",evidenceFileId:"",eventTime:"",eventBeginTime:"",eventEndTime:"",depositaryOfficer:"",eventRemark:"",evidenceFileType:""};var success=function success(data){successCallback&&successCallback(data)};var error=function error(err){errorCallback&&errorCallback(err)};var data=Object.assign(defaultParms,parms);var headers={"Content-Type":"application/x-www-form-urlencoded"};var url="".concat(jSPlugin.env.domain,"/api/service/devicekit/bodycamera/inspect/event");FetchData(url,"POST",data,success,error,headers)};var updateEvent=function updateEvent(jSPlugin,parms,successCallback,errorCallback){var defaultParms={accessToken:jSPlugin.accessToken,inspectRecordId:"",inspectEventId:"",eventType:"",eventRemark:""};var success=function success(data){successCallback&&successCallback(data)};var error=function error(err){errorCallback&&errorCallback(err)};var data=Object.assign(defaultParms,parms);var headers={"Content-Type":"application/x-www-form-urlencoded"};var url="".concat(jSPlugin.env.domain,"/api/service/devicekit/bodycamera/inspect/event/update");FetchData(url,"POST",data,success,error,headers)};var deleteEvent=function deleteEvent(jSPlugin,parms,successCallback,errorCallback){var defaultParms={accessToken:jSPlugin.accessToken,inspectEventId:""};var success=function success(data){successCallback&&successCallback(data)};var error=function error(err){errorCallback&&errorCallback(err)};var data=Object.assign(defaultParms,parms);var headers={"Content-Type":"application/x-www-form-urlencoded"};var url="".concat(jSPlugin.env.domain,"/api/service/devicekit/bodycamera/inspect/event/delete");FetchData(url,"POST",data,success,error,headers)};function formatDuring$1(millisecond){var hours=parseInt(millisecond%(1e3*60*60*24)/(1e3*60*60));var minutes=parseInt(millisecond%(1e3*60*60)/(1e3*60));var seconds=parseInt(millisecond%(1e3*60)/1e3);return(hours<10?"0".concat(hours):hours)+":"+(minutes<10?"0".concat(minutes):minutes)+":"+(seconds<10?"0".concat(seconds):seconds)}var InspectEventDetail=function(){function InspectEventDetail(jSPlugin){var currentEventInfo=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var timer=arguments.length>2?arguments[2]:undefined;var type=arguments.length>3?arguments[3]:undefined;var saveSuccessCallback=arguments.length>4&&arguments[4]!==undefined?arguments[4]:function(){};_classCallCheck$1(this,InspectEventDetail);this.jSPlugin=jSPlugin;this.currentEventInfo=currentEventInfo;this.inspectInfo=jSPlugin.Theme.inspect.inspectInfo;this.type=type;this.timer=timer;this.startTime=1e3;this.videoRecordingStatus=true;this.saveSuccessCallback=saveSuccessCallback;this.init()}_createClass$1(InspectEventDetail,[{key:"init",value:function init(){this.renderEventDetail();this.eventDetailDomEvent()}},{key:"show",value:function show(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-wrap")).setAttribute("class","inspect-event-detail-wrap show")}},{key:"hide",value:function hide(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-wrap")).setAttribute("class","inspect-event-detail-wrap");document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-box")).innerHTML=""}},{key:"validationEventTag",value:function validationEventTag(){var value=document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).value;if(value.length==0){document.getElementById("".concat(this.jSPlugin.id,"-event-tag-error")).style.display="block";document.getElementById("".concat(this.jSPlugin.id,"-event-tag-error")).innerHTML="请输入事件标签";document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).setAttribute("class","ezuikit-input input-has-error");return false}else{document.getElementById("".concat(this.jSPlugin.id,"-event-tag-error")).style.display="none";document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).setAttribute("class","ezuikit-input");return true}}},{key:"renderVideo",value:function renderVideo(taskStatus,picUrl,videoUrl){var _this=this;document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview")).innerHTML="";if(taskStatus===1||taskStatus===2){document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview")).innerHTML='\n      <div class="video-stroage-exceptional-status-tips-wrap" style="background:url('.concat(this.jSPlugin.staticPath,'/imgs/bg.svg) no-repeat 100%/cover">\n        <div class="video-stroage-exceptional-status-icon">\n        <div type="default" class="ezuikit-spin ezuikit-spin-sm ezuikit-spin-spinning ezuikit-spin-dot-white"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>\n        </div>\n        <span class="video-stroage-exceptional-status-tips">视频正在存储中…</span>\n      </div>\n     ');if(this.type!==1){var evidenceId=this.currentEventInfo.evidenceId;this.timer.clearTimer("videoRecordingStatusTimer");this.timer.createInterval("videoRecordingStatusTimer",function(){getTaskDetail(_this.jSPlugin,evidenceId,function(data){if(data.meta&&data.meta.code===200){var _data$data=data.data,_taskStatus=_data$data.taskStatus,fileUrl=_data$data.fileUrl,videoCoverPic=_data$data.videoCoverPic;var _picUrl=videoCoverPic||"".concat(_this.jSPlugin.staticPath,"/imgs/bg.svg");_this.renderVideo(_taskStatus,_picUrl,fileUrl)}})},1e3)}}else if(taskStatus===4||taskStatus===5||taskStatus===6||taskStatus===7){document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview")).innerHTML='\n        <div class="video-stroage-exceptional-status-tips-wrap video-stroage-exceptional-status-tips-error" style="background:url('.concat(this.jSPlugin.staticPath,'/imgs/bg.svg) no-repeat 100%/cover">\n          <div class="video-stroage-exceptional-status-icon">\n            <svg fill="currentColor" t="1691567317943" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m32 664a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8v-272c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272zM512 384a48 48 0 1 1 0-96A48 48 0 0 1 512 384z"></path></svg>\n          </div>\n          <span class="video-stroage-exceptional-status-tips">视频存储失败</span>\n        </div>\n       ');this.timer.clearTimer("videoRecordingStatusTimer")}else if(taskStatus===0||taskStatus===3){new Video({id:"".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview"),poster:picUrl,fallback:"".concat(this.jSPlugin.staticPath,"/imgs/bg.svg"),src:videoUrl});this.timer.clearTimer("videoRecordingStatusTimer")}}},{key:"renderEventDetail",value:function renderEventDetail(){var _this2=this;var _this$currentEventInf=this.currentEventInfo,evidenceFileType=_this$currentEventInf.evidenceFileType,fileUrl=_this$currentEventInf.fileUrl,taskStatus=_this$currentEventInf.taskStatus,videoCoverPic=_this$currentEventInf.videoCoverPic;var objDOM=document.createElement("div");objDOM.setAttribute("class","inspectEventDetail");var picUrl="";if(evidenceFileType===1){picUrl=videoCoverPic||"".concat(this.jSPlugin.staticPath,"/imgs/bg.svg")}else{picUrl=fileUrl||"".concat(this.jSPlugin.staticPath,"/imgs/bg.svg")}objDOM.innerHTML='\n      <div class="inspectEventDetail-header">\n        <div class="inspectEventDetail-back" id="'.concat(this.jSPlugin.id,'-inspectEventDetail-back">\n          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M605.888 137.344a6.4 6.4 0 0 1 1.472 4.032l0.64 70.784a6.4 6.4 0 0 1-2.368 5.056L281.6 480H876.8v64H279.744l325.376 264a6.4 6.4 0 0 1 2.368 4.928l0.128 69.632a6.4 6.4 0 0 1-10.432 4.992l-422.016-342.4a42.24 42.24 0 0 1-7.04-57.344l3.264-3.904 3.776-3.456 421.76-344a6.4 6.4 0 0 1 8.96 0.896z"></path></svg>\n        </div>\n        <div class="inspectEventDetail-type">').concat(this.type===1?"编辑":"").concat(evidenceFileType===0?"图片存证":"视频存证",'</div>\n      </div>\n      <div class="inspectEventDetail-content" style="\n        height: ').concat(document.getElementById("".concat(this.jSPlugin.id,"-wrap")).clientHeight-58-158,'px;\n        overflow: auto;\n      ">\n        ').concat(evidenceFileType===0?'<div class="inspectEventDetail-content-img-box">\n            <p class="inspectEventDetail-content-img-tips" style="display: '.concat(this.type==1?"none":"blcok",';">图片已取证，请填写存证信息：</p>\n            <div class="inspectEventDetail-content-img-detail" id="').concat(this.jSPlugin.id,'-inspectEventDetail-picUrl"></div>\n          </div>'):'<div class="inspectEventDetail-content-video-box">\n            <div\n              id="'.concat(this.jSPlugin.id,'-inspectEventDetail-content-video-timer"\n              class="inspectEventDetail-content-video-timer"\n              style="display: ').concat(this.type==1?"none":"flex",';"\n            >\n              <div class="video-recording-time-wrap">\n                <svg fill="currentColor" width="10" height="10" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 10 10" style="enable-background:new 0 0 10 10;" xml:space="preserve"><circle class="st0" cx="5" cy="5" r="3"/><path class="st1" d="M5,10c-2.8,0-5-2.2-5-5c0-2.8,2.2-5,5-5s5,2.2,5,5C10,7.8,7.8,10,5,10z M5,0.5c-2.5,0-4.5,2-4.5,4.5c0,2.5,2,4.5,4.5,4.5s4.5-2,4.5-4.5C9.5,2.5,7.5,0.5,5,0.5z"/></svg>\n                <div id="').concat(this.jSPlugin.id,'-video-recording-time" class="video-recording-time">00:00:00</div>\n              </div>\n              <button id="').concat(this.jSPlugin.id,'-video-recording-stop-btn" class="inspectEventDetail-stop-btn ezuikit-btn">\n              <span style="display:none" class="ezuikit-btn-loading-icon" style=""><span role="img" aria-label="loading" class="anticon anticon-loading anticon-spin"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></span></span>\n              停止录制\n              </button>\n            </div>\n            <div id="').concat(this.jSPlugin.id,'-inspectEventDetail-content-video-info" class="inspectEventDetail-content-video-info" style="display: ').concat(this.type==1?"block":"none",';">\n              <p class="inspectEventDetail-content-video-tips" style="display: ').concat(this.type==1?"none":"blcok",';">视频已取证：</p>\n              <div class="inspectEventDetail-content-video-detail" id="').concat(this.jSPlugin.id,'-inspectEventDetail-videoPreview"></div>\n            </div>\n          </div>'),'\n        <div class="inspectEventDetail-content-info">\n          <div class="inspectEventDetail-content-info-item">\n            <div class="inspectEventDetail-content-info-item-title">事件时间：</div>\n            <div id="').concat(this.jSPlugin.id,'-inspectEventDetail-content-info-time" class="inspectEventDetail-content-info-item-value"></div>\n          </div>\n          <div class="inspectEventDetail-content-info-item">\n            <div class="inspectEventDetail-content-info-item-title">存证人员：</div>\n            <div class="inspectEventDetail-content-info-item-value">\n              ').concat(this.type===1?this.currentEventInfo.depositaryOfficer?this.currentEventInfo.depositaryOfficer==="null"?"-":this.currentEventInfo.depositaryOfficer:"-":this.inspectInfo.inspectPerson?this.inspectInfo.inspectPerson==="null"?"-":this.inspectInfo.inspectPerson:"-",'\n            </div>\n          </div>\n          <div class="inspectEventDetail-content-info-item">\n            <div class="inspectEventDetail-content-info-item-title inspectEventDetail-content-info-item-title-required">事件标签：</div>\n            <div class="ezuikit-form-item-control-input">\n              <div class="ezuikit-form-item-control-input-content">\n                <input\n                  id="').concat(this.jSPlugin.id,'-event-tag"\n                  maxlength="32"\n                  type="text"\n                  autocomplete="off"\n                  id="control-ref_note"\n                  class="ezuikit-input"\n                  placeholder="请输入事件标签"\n                  value="').concat(this.type===1?this.currentEventInfo.eventType||"":"",'"\n                />\n              </div>\n              <div class="ezuikit-form-item-explain ezuikit-form-item-explain-connected">\n                <div id="').concat(this.jSPlugin.id,'-event-tag-error" class="ezuikit-form-item-explain-error" style="display: none">请输入事件标签</div>\n              </div>\n            </div>\n          </div>\n          <div class="inspectEventDetail-content-info-item">\n            <div class="inspectEventDetail-content-info-item-title">事件备注：</div>\n            <div class="ezuikit-input-textarea ezuikit-input-textarea-show-count" data-count="').concat(this.type===1?this.currentEventInfo.eventRemark?this.currentEventInfo.eventRemark.length:0:0,' / 100">\n              <textarea\n              id="').concat(this.jSPlugin.id,'-event-remark"\n              maxlength="100"\n              class="ezuikit-input"\n              maxlength="100"\n              placeholder="请输入事件备注"\n              autocomplete="off"\n              >').concat(this.type===1?this.currentEventInfo.eventRemark||"":"",'</textarea>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="inspectEventDetail-footer">\n        <button id="').concat(this.jSPlugin.id,'-event-cancel" class="inspectEventDetail-footer-btn ezuikit-btn">取消</button>\n        <button id="').concat(this.jSPlugin.id,'-event-ok" class="inspectEventDetail-footer-btn ezuikit-btn ezuikit-btn-primary">保存</button>\n      </div>\n    ');document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-box")).appendChild(objDOM);if(this.type===1){document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML="".concat(evidenceFileType===1?this.currentEventInfo.eventBeginTime+" ~ "+this.currentEventInfo.eventEndTime:this.currentEventInfo.eventTime)}else{document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML="".concat((new Date).Format("yyyy-MM-dd hh:mm:ss")).concat(evidenceFileType===1?" ~ -":"");if(evidenceFileType===1&&document.getElementById("".concat(this.jSPlugin.id,"-video-recording-time"))&&this.videoRecordingStatus){this.type===0&&document.getElementById("".concat(this.jSPlugin.id,"-event-ok")).setAttribute("disabled","disabled");this.timer.createInterval("videoRecordingTimer",function(){if(_this2.startTime){document.getElementById("".concat(_this2.jSPlugin.id,"-video-recording-time")).innerHTML=formatDuring$1(_this2.startTime)}_this2.startTime+=1e3;if(_this2.startTime>_this2.jSPlugin.inspectRecordingDuration){document.getElementById("".concat(_this2.jSPlugin.id,"-video-recording-stop-btn")).click();_this2.timer&&_this2.timer.clearTimer("videoRecordingTimer")}},1e3)}}if(evidenceFileType===1){var videoSrc=this.currentEventInfo&&this.currentEventInfo.fileUrl;this.renderVideo(taskStatus,picUrl,videoSrc)}else{new Image$1({id:"".concat(this.jSPlugin.id,"-inspectEventDetail-picUrl"),src:picUrl,fallback:"".concat(this.jSPlugin.staticPath,"/imgs/fallback.svg"),showIcon:false})}this.show()}},{key:"eventDetailDomEvent",value:function eventDetailDomEvent(){var _this3=this;var _this$currentEventInf2=this.currentEventInfo,evidenceFileType=_this$currentEventInf2.evidenceFileType,evidenceId=_this$currentEventInf2.evidenceId;document.getElementById("".concat(this.jSPlugin.id,"-event-cancel")).addEventListener("click",function(e){_this3.cancelPopover=new Popconfirm({id:"".concat(_this3.jSPlugin.id,"-event-cancel"),content:"确定要取消吗？".concat(_this3.type===1?"取消后编辑的内容将不会保存。":"取消后对应存证也将删除。"),placement:"topRight",arrowPointAtCenter:true,onCancel:function onCancel(){_this3.cancelPopover.hide()},onConfirm:function onConfirm(){if(evidenceFileType===1){if(_this3.videoRecordingStatus&&_this3.type===0){_this3.timer&&_this3.timer.clearTimer("videoRecordingTimer");_this3.startTime=1e3;document.getElementById("".concat(_this3.jSPlugin.id,"-video-recording-stop-btn")).click()}_this3.timer.clearTimer("videoRecordingStatusTimer")}_this3.cancelPopover.hide();_this3.hide()}})});document.getElementById("".concat(this.jSPlugin.id,"-event-ok")).addEventListener("click",function(){var flag=_this3.validationEventTag();if(!flag)return;var _this3$currentEventIn=_this3.currentEventInfo,evidenceFileType=_this3$currentEventIn.evidenceFileType,evidenceId=_this3$currentEventIn.evidenceId;var _this3$inspectInfo=_this3.inspectInfo,inspectRecordId=_this3$inspectInfo.inspectRecordId,inspectPerson=_this3$inspectInfo.inspectPerson;var eTime=document.getElementById("".concat(_this3.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML;var params={inspectRecordId:inspectRecordId,depositaryOfficer:inspectPerson,evidenceFileId:evidenceId,evidenceFileType:evidenceFileType,eventType:document.getElementById("".concat(_this3.jSPlugin.id,"-event-tag")).value,eventRemark:document.getElementById("".concat(_this3.jSPlugin.id,"-event-remark")).value};if(evidenceFileType===1){params.eventBeginTime=eTime.split("~")[0].trim();params.eventEndTime=eTime.split("~")[1].trim();_this3.timer.clearTimer("videoRecordingStatusTimer")}if(evidenceFileType===0){params.eventTime=eTime}if(_this3.type===1){params.inspectEventId=_this3.currentEventInfo.inspectEventId;delete params.depositaryOfficer;delete params.eventTime;delete params.eventBeginTime;delete params.eventEndTime;delete params.evidenceFileId;delete params.evidenceFileType;updateEvent(_this3.jSPlugin,params,function(data){if(data.meta&&data.meta.code===200){_this3.hide();_this3.saveSuccessCallback&&_this3.saveSuccessCallback({eventType:params.eventType,eventRemark:params.eventRemark})}else{new Message({type:"error",content:"保存失败，".concat(data.meta&&data.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(_this3.jSPlugin.id,"-inspect-event-box")),top:40})}},function(){new Message({type:"error",content:"保存失败，请稍后重试！",wrapNode:document.getElementById("".concat(_this3.jSPlugin.id,"-inspect-event-box")),top:40})})}if(_this3.type===0){addEvent(_this3.jSPlugin,params,function(data){if(data.meta&&data.meta.code===200){_this3.hide();_this3.saveSuccessCallback&&_this3.saveSuccessCallback()}else{new Message({type:"error",content:"保存失败，".concat(data.meta&&data.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(_this3.jSPlugin.id,"-inspect-event-box")),top:40})}},function(){new Message({type:"error",content:"保存失败，请稍后重试！",wrapNode:document.getElementById("".concat(_this3.jSPlugin.id,"-inspect-event-box")),top:40})})}});document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-back")).addEventListener("click",function(){_this3.backPopover=new Popconfirm({id:"".concat(_this3.jSPlugin.id,"-inspectEventDetail-back"),content:"确定要返回吗？".concat(_this3.type===1?"返回后编辑的内容将不会保存。":"返回后对应存证也将删除。"),placement:"bottomRight",arrowPointAtCenter:true,onCancel:function onCancel(){_this3.backPopover.hide()},onConfirm:function onConfirm(){if(evidenceFileType===1){if(_this3.videoRecordingStatus&&_this3.type===0){_this3.timer&&_this3.timer.clearTimer("videoRecordingTimer");_this3.startTime=1e3;document.getElementById("".concat(_this3.jSPlugin.id,"-video-recording-stop-btn")).click()}_this3.timer.clearTimer("videoRecordingStatusTimer")}_this3.backPopover.hide();_this3.hide()}})});if(document.getElementById("".concat(this.jSPlugin.id,"-video-recording-stop-btn"))){document.getElementById("".concat(this.jSPlugin.id,"-video-recording-stop-btn")).addEventListener("click",function(){document.getElementById("".concat(_this3.jSPlugin.id,"-video-recording-stop-btn")).setAttribute("class","inspectEventDetail-stop-btn ezuikit-btn ezuikit-btn-loading");document.getElementById("".concat(_this3.jSPlugin.id,"-video-recording-stop-btn")).querySelector(".ezuikit-btn-loading-icon").style.display="inline-block";evidenceStop(_this3.jSPlugin,evidenceId,function(res){if(document.getElementById("".concat(_this3.jSPlugin.id,"-video-recording-stop-btn"))){document.getElementById("".concat(_this3.jSPlugin.id,"-video-recording-stop-btn")).setAttribute("class","inspectEventDetail-stop-btn ezuikit-btn");document.getElementById("".concat(_this3.jSPlugin.id,"-video-recording-stop-btn")).querySelector(".ezuikit-btn-loading-icon").style.display="none"}if(res.meta&&res.meta.code===200){getTaskDetail(_this3.jSPlugin,evidenceId,function(data){if(data.meta&&data.meta.code===200){var _data$data2=data.data,taskStatus=_data$data2.taskStatus,fileUrl=_data$data2.fileUrl,videoCoverPic=_data$data2.videoCoverPic;_this3.timer&&_this3.timer.clearTimer("videoRecordingTimer");var picUrl=videoCoverPic||"".concat(_this3.jSPlugin.staticPath,"/imgs/bg.svg");_this3.renderVideo(taskStatus,picUrl,fileUrl);document.getElementById("".concat(_this3.jSPlugin.id,"-inspectEventDetail-content-video-info")).style.display="block";document.getElementById("".concat(_this3.jSPlugin.id,"-inspectEventDetail-content-video-timer")).style.display="none";var currentTime=document.getElementById("".concat(_this3.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML;document.getElementById("".concat(_this3.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML="".concat(currentTime.split("~")[0]," ~ ").concat((new Date).Format("yyyy-MM-dd hh:mm:ss"));_this3.videoRecordingStatus=false;document.getElementById("".concat(_this3.jSPlugin.id,"-event-ok")).removeAttribute("disabled")}})}else{new Message({type:"error",content:"停止录制失败，请稍后重试！",wrapNode:document.getElementById("".concat(_this3.jSPlugin.id,"-inspect-event-box")),top:40})}},function(){if(document.getElementById("".concat(_this3.jSPlugin.id,"-video-recording-stop-btn"))){document.getElementById("".concat(_this3.jSPlugin.id,"-video-recording-stop-btn")).setAttribute("class","inspectEventDetail-stop-btn ezuikit-btn");document.getElementById("".concat(_this3.jSPlugin.id,"-video-recording-stop-btn")).querySelector(".ezuikit-btn-loading-icon").style.display="none"}new Message({type:"error",content:"停止录制失败，请稍后重试！",wrapNode:document.getElementById("".concat(_this3.jSPlugin.id,"-inspect-event-box")),top:40})})})}document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).addEventListener("input",function(){_this3.validationEventTag()});document.getElementById("".concat(this.jSPlugin.id,"-event-remark")).addEventListener("input",function(e){var value=e.target.value;e.target.parentNode.setAttribute("data-count","".concat(value.length," / 100"))});document.getElementById("".concat(this.jSPlugin.id,"-event-remark")).addEventListener("focus",function(e){e.target.parentNode.setAttribute("class","ezuikit-input-textarea ezuikit-input-textarea-show-count ezuikit-input-textarea-focus")});document.getElementById("".concat(this.jSPlugin.id,"-event-remark")).addEventListener("blur",function(e){e.target.parentNode.setAttribute("class","ezuikit-input-textarea ezuikit-input-textarea-show-count")})}}]);return InspectEventDetail}();var InspectEvent=function(){function InspectEvent(jSPlugin,inspectRecordId,timer){var _this=this;_classCallCheck$1(this,InspectEvent);_defineProperty(this,"hideDelEConfirm",function(){for(var i=0;i<_this.delEConfirmList.length;i++){_this.delEConfirmList[i].hide()}});_defineProperty(this,"initRender",function(){var that=_this;if(!document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box"))){var objDOM=document.createElement("div");objDOM.id="".concat(_this.jSPlugin.id,"-inspect-event-box");objDOM.setAttribute("class","inspect-event-box");var inspectInfoControlHeight=0;if(document.getElementById("".concat(_this.jSPlugin.id,"-inspectInfoControl"))){inspectInfoControlHeight=document.getElementById("".concat(_this.jSPlugin.id,"-inspectInfoControl")).clientHeight}objDOM.style="background: #fff;position: absolute;right: 0;bottom: 0; top:".concat(inspectInfoControlHeight,"px;");objDOM.innerHTML='\n      <div id="'.concat(_this.jSPlugin.id,'-inspect-event-list-box" style="\n        width: 290px;\n        height: 100%;\n        overflow: hidden;\n        padding: 0;\n        box-sizing: border-box;\n      ">\n        <h1 style="\n          font-size: 16px;\n          color: #262626;\n          line-height: 24px;\n          font-weight: bold;\n          margin: 16px 16px 0;\n        ">巡检事件</h1>\n        <div id="').concat(_this.jSPlugin.id,'-inspect-event-btn-wrap" style="\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 16px 16px;\n        ">\n          <div>\n            <button\n              id="').concat(_this.jSPlugin.id,'-inspect-event-img"\n              style="min-width: 88px; margin: 0 auto;"\n              type="button"\n              class="ezuikit-btn ezuikit-btn-primary"\n            >\n            <span style="display:none" class="ezuikit-btn-loading-icon" style=""><span role="img" aria-label="loading" class="anticon anticon-loading anticon-spin"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></span></span>\n            图片存证\n            </button>\n            <button\n              id="').concat(_this.jSPlugin.id,'-inspect-event-video"\n              style="min-width: 88px; margin: 0 auto;"\n              type="button"\n              class="ezuikit-btn ezuikit-btn-primary"\n            >\n            <span style="display:none" class="ezuikit-btn-loading-icon" style=""><span role="img" aria-label="loading" class="anticon anticon-loading anticon-spin"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></span></span>\n            视频存证</button>\n          </div>\n          <div id="').concat(_this.jSPlugin.id,'-inspect-event-list-refresh" style="\n            width: 17px;\n            height: 32px;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          ">\n            <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="13" height="13" xmlns:xlink="http://www.w3.org/1999/xlink">\n              <path fill="currentColor" d="M960 416V192l-73.056 73.056a447.712 447.712 0 0 0-373.6-201.088C265.92 63.968 65.312 264.544 65.312 512S265.92 960.032 513.344 960.032a448.064 448.064 0 0 0 415.232-279.488 38.368 38.368 0 1 0-71.136-28.896 371.36 371.36 0 0 1-344.096 231.584C308.32 883.232 142.112 717.024 142.112 512S308.32 140.768 513.344 140.768c132.448 0 251.936 70.08 318.016 179.84L736 416h224z"></path>\n            </svg>\n          </div>\n        </div>\n        <div\n          id="').concat(_this.jSPlugin.id,'-inspect-loading"\n          class="inspect-loading"\n          style="\n            height: calc(100% - 104px);\n            position: absolute; bottom: 0; right: 0;background: #fff; bottom: 0; right: 0; z-index: 99; width: 100%; align-items: center; justify-content: center;\n            display: ').concat(_this.listLoading?"flex":"none",'\n          ">\n          <div type="default" class="ezuikit-spin ezuikit-spin-spinning"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>\n        </div>\n        <div id="').concat(_this.jSPlugin.id,'-inspect-event-list-nodata-wrap" style="\n          display: none;\n          height: calc(100% - 104px);\n          text-align: center;overflow: auto;\n        "> \n          <img style="width: 85px;height: 85px; margin: 120px auto 0;" src="').concat(_this.jSPlugin.staticPath,'/imgs/empty.png" />\n          <p style="font-size: 14px;color: #595959;text-align: center;line-height: 22px;margin: 0;">暂无事件</p>\n        </div>\n        <div class="inspect-event-list-wrap" id="').concat(_this.jSPlugin.id,'-inspect-event-list-wrap"\n          style="display: none; height: calc(100% - 104px); overflow-x: hidden; overflow-y: auto; padding-top: 4px; box-sizing: border-box; ">\n          <div id="').concat(_this.jSPlugin.id,'-inspect-event-list-wrap-main"></div>\n          <div id="').concat(_this.jSPlugin.id,'-inspect-event-list-more-loading" style="display: none;align-items: center;justify-content: center;" class="inspect-event-list-more-loading">\n            <div type="default" class="ezuikit-spin ezuikit-spin-spinning"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>\n          </div>\n        </div>\n      </div>\n      <div id="').concat(_this.jSPlugin.id,'-inspect-event-detail-wrap" class="inspect-event-detail-wrap" style="\n        height: 100%;\n      ">\n        <h1 style="\n          font-size: 16px;\n          color: #262626;\n          line-height: 24px;\n          font-weight: bold;\n          margin: 16px 16px 0;\n        ">巡检事件</h1>\n        <div id="').concat(_this.jSPlugin.id,'-inspect-event-detail-box"></div>\n      </div>\n      ');document.getElementById("".concat(_this.jSPlugin.id,"-wrap")).appendChild(objDOM);if(_this.jSPlugin.Theme.decoderState.state.play){_this.enableEvidenceBtn()}else{_this.disableEvidenceBtn()}document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-img")).onclick=function(){if(_this.listLoading||_this.startEvidence)return;_this.startEvidence=true;_this.hideDelEConfirm();document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-img")).setAttribute("class","ezuikit-btn ezuikit-btn-primary ezuikit-btn-loading");document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-img")).querySelector(".ezuikit-btn-loading-icon").style.display="inline-block";evidence(_this.jSPlugin,0,function(data){_this.startEvidence=false;document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-img")).setAttribute("class","ezuikit-btn ezuikit-btn-primary");document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-img")).querySelector(".ezuikit-btn-loading-icon").style.display="none";if(data.meta&&data.meta.code===200){new InspectEventDetail(_this.jSPlugin,data.data,_this.timer,0,function(){_this.initEvent();new Message({type:"success",content:"保存成功",wrapNode:document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box")),top:40})})}else{new Message({type:"error",content:"图片存证失败，".concat(data.meta&&data.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box")),top:40})}},function(){_this.startEvidence=false;document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-img")).setAttribute("class","ezuikit-btn ezuikit-btn-primary");document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-img")).querySelector(".ezuikit-btn-loading-icon").style.display="none";new Message({type:"error",content:"图片存证失败，请稍后重试！",wrapNode:document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box")),top:40})})};document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-video")).onclick=function(){if(_this.listLoading||_this.startEvidence)return;_this.startEvidence=true;_this.hideDelEConfirm();document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-video")).setAttribute("class","ezuikit-btn ezuikit-btn-primary ezuikit-btn-loading");document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-video")).querySelector(".ezuikit-btn-loading-icon").style.display="inline-block";evidence(_this.jSPlugin,1,function(data){_this.startEvidence=false;document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-video")).setAttribute("class","ezuikit-btn ezuikit-btn-primary");document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-video")).querySelector(".ezuikit-btn-loading-icon").style.display="none";if(data.meta&&data.meta.code===200){new InspectEventDetail(_this.jSPlugin,data.data,_this.timer,0,function(){_this.initEvent();new Message({type:"success",content:"保存成功",wrapNode:document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box")),top:40})})}else{new Message({type:"error",content:"视频存证失败，".concat(data.meta&&data.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box")),top:40})}},function(){_this.startEvidence=false;document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-video")).setAttribute("class","ezuikit-btn ezuikit-btn-primary");document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-video")).querySelector(".ezuikit-btn-loading-icon").style.display="none";new Message({type:"error",content:"视频存证失败，请稍后重试！",wrapNode:document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box")),top:40})})};document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-list-refresh")).onclick=function(){if(_this.listLoading||_this.startEvidence)return;_this.hideDelEConfirm();document.getElementById("".concat(_this.jSPlugin.id,"-inspect-loading")).style.display="block";document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-list-wrap")).style.display="none";document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-list-nodata-wrap")).style.display="none";that.initEvent()}}else{if(document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box"))){document.getElementById("".concat(_this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box")))}that.initRender()}});_defineProperty(this,"renderList",function(data){document.getElementById("".concat(_this.jSPlugin.id,"-inspect-loading")).style.display="none";var list=data.data||[];if(list.length>0){document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-list-wrap")).style.display="block";document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-list-nodata-wrap")).style.display="none";var _loop=function _loop(){var objItem=document.createElement("div");objItem.setAttribute("class","inspect-event-item");var innerHTML="";var item=list[i];objItem.setAttribute("id","".concat(_this.jSPlugin.id,"-inspect-event-item-").concat(item.inspectEventId));objItem.innerHTML=innerHTML;document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-list-wrap-main")).appendChild(objItem);var itemHeader=document.createElement("div");itemHeader.setAttribute("class","inspect-event-item-header-wrap");var time;if(item.evidenceFileType==1){time="".concat(item.eventBeginTime.split(" ")[1],"~").concat(item.eventEndTime.split(" ")[1])}if(item.evidenceFileType==0){time="".concat(item.eventTime.split(" ")[1])}var videoInspectStatus="";if(item.evidenceFileType===1){if(item.taskStatus===1||item.taskStatus===2){videoInspectStatus="storage"}else if(item.taskStatus===4||item.taskStatus===5||item.taskStatus===6||item.taskStatus===7){videoInspectStatus="storage-error"}else if(item.taskStatus===0||item.taskStatus===3){videoInspectStatus="storage-success"}}itemHeader.innerHTML='\n        <div class="inspect-event-item-header '.concat(videoInspectStatus,'">\n        <div class="inspect-event-item-header-left">\n          <span class="inspect-event-item-status-wrap">\n            <span class="inspect-event-item-status"></span>\n          </span>\n          <svg fill="currentColor" style="display: ').concat(item.evidenceFileType===1?"block":"none",'" width="16" height="16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t          viewBox="0 0 14 12" style="enable-background:new 0 0 14 12;" xml:space="preserve">\n            <path d="M1,12c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1h12c0.6,0,1,0.4,1,1v10c0,0.6-0.4,1-1,1H1z M1,11h1.6l0-3.5H1V11z\n            M10.5,1h-7v10h7V1z M13,7.5h-1.6l0,3.5H13V7.5z M6.1,4.2l2.3,1.2c0.4,0.2,0.4,0.6,0,0.8L8.1,6.3l-2,1c-0.2,0.1-0.4,0-0.4-0.2V4.4\n            C5.7,4.2,5.9,4.1,6.1,4.2z M13,6.6V4.9h-1.6v1.8H13z M1,6.6h1.6V4.9H1V6.6z M13,4V1h-1.6l0,3H13z M2.6,1H1v3h1.6L2.6,1z"/>\n          </svg>\n          <svg fill="currentColor" style="display: ').concat(item.evidenceFileType===1?"none":"block",'" width="16" height="16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n            viewBox="0 0 14 12" style="enable-background:new 0 0 14 12;" xml:space="preserve">\n            <path class="st0" d="M13,0c0.6,0,1,0.4,1,1v10c0,0.6-0.4,1-1,1H1c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1H13z M10.4,6.2L5.6,9.8L3.8,8\n            L1,10v1h12V9L10.4,6.2z M13,1H1v7.8l2.9-2.1l1.8,1.8l4.9-3.6L13,7.5V1z M5.5,2C6.3,2,7,2.7,7,3.5S6.3,5,5.5,5S4,4.3,4,3.5\n            S4.7,2,5.5,2z M5.5,3C5.2,3,5,3.2,5,3.5S5.2,4,5.5,4S6,3.8,6,3.5S5.8,3,5.5,3z"/>\n          </svg>\n          <span class="inspect-event-item-time">').concat(time||"-",'</span>\n        </div>\n        <div class="inspect-event-item-header-right">\n          <span class="inspect-event-item-header-toggle">\n          <svg fill="currentColor" class="inspect-event-item-header-toggle-up" style="display: none;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M218.496 645.312l46.464 44.032 247.616-261.568 246.4 261.504 46.528-43.904-292.8-310.72z"></path></svg>  \n          <svg fill="currentColor" class="inspect-event-item-header-toggle-down"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M218.496 378.688l46.464-44.032 247.616 261.568 246.4-261.504 46.528 43.904-292.8 310.72z"></path></svg>\n          </span>\n        </div>\n        </div>\n        ');objItem.appendChild(itemHeader);itemHeader.onclick=function(e){var tag=itemHeader.querySelector(".inspect-event-item-header-toggle-up").style.display;if(tag==="none"){itemHeader.querySelector(".inspect-event-item-header-toggle-up").style.display="block";itemHeader.querySelector(".inspect-event-item-header-toggle-down").style.display="none";objItem.querySelector(".inspect-event-item-body").style.display="block"}else{itemHeader.querySelector(".inspect-event-item-header-toggle-up").style.display="none";itemHeader.querySelector(".inspect-event-item-header-toggle-down").style.display="block";objItem.querySelector(".inspect-event-item-body").style.display="none"}};var itemBody=document.createElement("div");itemBody.setAttribute("class","inspect-event-item-body");itemBody.style.display="none";var imgSrc=(item.evidenceFileType===1?item.videoCoverPic:item.fileUrl)||"".concat(_this.jSPlugin.staticPath,"/imgs/bg.svg");itemBody.innerHTML='\n        <div class="inspect-event-item-img" id="'.concat(_this.jSPlugin.id,"-inspect-view-").concat(item.inspectEventId,'"></div>\n        <div class="inspect-event-item-body-info">\n          <div class="inspect-event-item-body-info-tag">\n            <span class="inspect-event-item-body-info-tag-label" title="').concat(item.eventType,'">').concat(item.eventType,"</span>\n          </div>\n        </div>\n        ");objItem.appendChild(itemBody);if(item.evidenceFileType==1){if(item.taskStatus===1||item.taskStatus===2){document.getElementById("".concat(_this.jSPlugin.id,"-inspect-view-").concat(item.inspectEventId)).innerHTML='\n              <div class="video-stroage-exceptional-status-tips-wrap" style="background:url('.concat(_this.jSPlugin.staticPath,'/imgs/bg.svg) no-repeat 100%/cover">\n                <div class="video-stroage-exceptional-status-icon">\n                <div type="default" class="ezuikit-spin ezuikit-spin-sm ezuikit-spin-spinning ezuikit-spin-dot-white"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>\n                </div>\n                <span class="video-stroage-exceptional-status-tips">视频正在存储中…</span>\n              </div>\n            ')}else if(item.taskStatus===4){document.getElementById("".concat(_this.jSPlugin.id,"-inspect-view-").concat(item.inspectEventId)).innerHTML='\n            <div class="video-stroage-exceptional-status-tips-wrap video-stroage-exceptional-status-tips-error" style="background:url('.concat(_this.jSPlugin.staticPath,'/imgs/bg.svg) no-repeat 100%/cover">\n              <div class="video-stroage-exceptional-status-icon">\n                <svg fill="currentColor" t="1691567317943" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m32 664a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8v-272c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272zM512 384a48 48 0 1 1 0-96A48 48 0 0 1 512 384z"></path></svg>\n              </div>\n              <span class="video-stroage-exceptional-status-tips">视频存储失败</span>\n            </div>\n            ')}else if(item.taskStatus===0||item.taskStatus===3){new Video({id:"".concat(_this.jSPlugin.id,"-inspect-view-").concat(item.inspectEventId),src:item.fileUrl,poster:imgSrc,fallback:"".concat(_this.jSPlugin.staticPath,"/imgs/bg.svg")})}}if(item.evidenceFileType==0){new Image$1({id:"".concat(_this.jSPlugin.id,"-inspect-view-").concat(item.inspectEventId),src:imgSrc,fallback:"".concat(_this.jSPlugin.staticPath,"/imgs/bg.svg"),showIcon:false})}var oprItm=document.createElement("div");oprItm.setAttribute("class","inspect-event-item-body-info-opr");var updateEventDom=document.createElement("span");updateEventDom.setAttribute("class","inspect-event-item-body-info-opr-icon");updateEventDom.innerHTML='\n          <svg fill="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M612.992 121.984a64 64 0 0 1 90.496 0l153.92 153.92a64 64 0 0 1 0 90.496l-435.2 435.2a96 96 0 0 1-23.04 17.024l525.312-0.128v64H175.808v-2.304a64 64 0 0 1-66.496-77.632l43.776-199.296a96 96 0 0 1 25.92-47.296zM523.072 302.4l-298.88 298.88a32 32 0 0 0-8.576 15.744l-43.776 199.296 190.848-51.712a32 32 0 0 0 14.272-8.256l300.032-300.032-153.92-153.92z m135.168-135.168L568.32 257.088l153.92 153.984 89.92-89.92-153.92-153.92z"></path></svg>\n        ';oprItm.appendChild(updateEventDom);var delEventDom=document.createElement("span");delEventDom.setAttribute("class","inspect-event-item-body-info-opr-icon");delEventDom.id="".concat(_this.jSPlugin.id,"-inspect-event-del-").concat(item.inspectEventId);delEventDom.innerHTML=' \n          <svg fill="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M128 320V256h767.872v64H832v512a64 64 0 0 1-64 64H256a64 64 0 0 1-64-64V320H128z m640 0H256v512h512V320zM464 432v256h-64v-256h64z m160 0v256h-64v-256h64zM704 128v64H320V128h384z"></path></svg>\n        ';oprItm.appendChild(delEventDom);updateEventDom.onclick=function(e){if(_this.startEvidence)return;new InspectEventDetail(_this.jSPlugin,item,_this.timer,1,function(updateData){new Message({type:"success",content:"保存成功",wrapNode:document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box")),top:40});item=Object.assign(item,updateData);document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-item-").concat(item.inspectEventId)).querySelector(".inspect-event-item-body-info-tag-label").innerHTML=item.eventType;document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-item-").concat(item.inspectEventId)).querySelector(".inspect-event-item-body-info-tag-label").setAttribute("title",item.eventType)})};delEventDom.onclick=function(e){if(_this.startEvidence)return;_this.delE=new Popconfirm({id:"".concat(_this.jSPlugin.id,"-inspect-event-del-").concat(item.inspectEventId),content:"确定要删除该事件吗？",placement:"topRight",arrowPointAtCenter:true,onCancel:function onCancel(){_this.delE.hide()},onConfirm:function onConfirm(){deleteEvent(_this.jSPlugin,{inspectEventId:item.inspectEventId},function(data){if(data.meta&&data.meta.code===200){_this.delE.hide();_this.initEvent();setTimeout(function(){new Message({type:"success",content:"删除成功",wrapNode:document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box")),top:40})},10)}else{new Message({type:"error",content:"删除失败，".concat(data.meta&&data.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box")),top:40})}},function(){new Message({type:"error",content:"删除失败，请稍后重试！",wrapNode:document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-box")),top:40})})}});_this.delEConfirmList.push(_this.delE)};objItem.querySelector(".inspect-event-item-body-info").appendChild(oprItm);document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-list-wrap")).onscroll=function(e){var target=e.target;_this.hideDelEConfirm();if(target.scrollTop+target.offsetHeight>=target.scrollHeight-48&&!_this.listLoading){if((data.start+1)*data.size<data.total){_this.initEvent(data.start+1)}}}};for(var i=0;i<list.length;i++){_loop()}}else{document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-list-wrap")).style.display="none";document.getElementById("".concat(_this.jSPlugin.id,"-inspect-event-list-nodata-wrap")).style.display="block"}});this.jSPlugin=jSPlugin;this.videoWidth=jSPlugin.width;this.inspectRecordId=inspectRecordId;this.timer=timer;this.listLoading=false;this.startEvidence=false;this.delEConfirmList=[];this.videoHeight=document.getElementById("".concat(jSPlugin.id,"-wrap")).clientHeight-document.getElementById("".concat(jSPlugin.id,"-inspectInfoControl")).clientHeight||jSPlugin.height;this.initEvent()}_createClass$1(InspectEvent,[{key:"initEvent",value:function initEvent(){var _this2=this;var startPage=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var pageSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:30;var that=this;that.listLoading=true;if(startPage===0){that.initRender(startPage)}else{document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-list-more-loading")).style.display="flex"}var errorCallback=function errorCallback(data){new Message({type:"error",content:data.meta&&data.meta.message||"列表获取失败，请稍后重试！",wrapNode:document.getElementById("".concat(_this2.jSPlugin.id,"-inspect-event-box")),top:40});that.renderList({})};getEventList(that.jSPlugin,that.inspectRecordId,startPage,pageSize,function(data){that.listLoading=false;document.getElementById("".concat(_this2.jSPlugin.id,"-inspect-event-list-more-loading")).style.display="none";if(data.meta&&data.meta.code===200){that.renderList(data.data||{})}else{errorCallback(data)}},function(err){that.listLoading=false;document.getElementById("".concat(_this2.jSPlugin.id,"-inspect-event-list-more-loading")).style.display="none";errorCallback(err)})}},{key:"disableEvidenceBtn",value:function disableEvidenceBtn(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-img")).setAttribute("disabled","disabled");document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-video")).setAttribute("disabled","disabled")}},{key:"enableEvidenceBtn",value:function enableEvidenceBtn(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-img")).removeAttribute("disabled");document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-video")).removeAttribute("disabled")}}]);return InspectEvent}();var SmallWinControl=function(){function SmallWinControl(jSPlugin,inspectMode,inspectMapWin,changeInspectMode,decoderState){var _this=this;_classCallCheck$1(this,SmallWinControl);_defineProperty(this,"createLocationControl",function(){var that=_this;function LocationControl(){this.defaultAnchor=BMAP_ANCHOR_BOTTOM_LEFT;this.defaultOffset=new BMapGL.Size(40,105)}LocationControl.prototype=new BMapGL.Control;LocationControl.prototype.initialize=function(map){var div=document.createElement("div");div.style.cssText="width: 26px;height: 26px;display: flex;align-items: center;justify-content: center; box-shadow: 1px 2px 1px rgb(0 0 0 / 15%); background: #fff; cursor: pointer;";div.id="".concat(that.jSPlugin.id,"-location-btn");div.innerHTML='<svg fill="#3385ff" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <path d="M510.976716 128.626761c-211.205756 0-382.401119 171.195363-382.401119 382.401119s171.195363 382.401119 382.401119 382.401119S893.377836 722.131308 893.377836 510.925552 722.182472 128.626761 510.976716 128.626761zM736.508444 736.45728c-29.265914 29.265914-63.443589 52.289797-101.407415 68.355351-29.265914 12.381733-59.964425 20.158689-91.481563 23.433197L543.619466 704.019187l-63.443589 0 0 124.431298c-32.233437-3.069851-63.443589-10.949136-93.323474-23.535525-37.963825-16.065554-72.039173-39.089437-101.407415-68.355351-29.265914-29.265914-52.289797-63.443589-68.355351-101.407415-12.381733-29.265914-20.158689-59.964425-23.433197-91.481563l126.273209 0 0-63.443589L193.554112 480.227041c3.069851-32.233437 10.949136-63.443589 23.535525-93.323474 16.065554-37.963825 39.089437-72.039173 68.355351-101.407415 29.265914-29.265914 63.443589-52.289797 101.407415-68.355351 29.879884-12.58639 61.090037-20.465674 93.323474-23.535525l0 125.863895 63.443589 0L543.619466 193.707605c31.517138 3.172179 62.215649 11.051464 91.481563 23.433197 37.963825 16.065554 72.039173 39.089437 101.407415 68.355351 29.265914 29.265914 52.289797 63.443589 68.355351 101.407415 12.58639 29.879884 20.465674 61.090037 23.535525 93.323474L703.251724 480.227041l0 63.443589 125.045268 0c-3.172179 31.517138-11.051464 62.215649-23.433197 91.481563C788.798241 673.01369 765.876686 707.089038 736.508444 736.45728z" p-id="1506"></path><path d="M516.093135 415.248526c-56.280604 0-100.793445 43.489557-100.793445 99.770161s44.512841 101.816728 100.793445 101.816728S616.886579 571.29929 616.886579 515.018687 572.373738 415.248526 516.093135 415.248526z" p-id="1507"></path>\n      </svg>';div.onclick=function(e){setTimeout(function(){that.inspectMapWin.centerToTrack(18)},100)};map.getContainer().appendChild(div);return div};return new LocationControl});_defineProperty(this,"initSwithcBtn",function(){var miniSwitchDOM=document.createElement("div");miniSwitchDOM.id="".concat(_this.jSPlugin.id,"-miniSwitch");miniSwitchDOM.style="cursor: pointer;position: absolute; bottom: 106px; right: ".concat(_this.jSPlugin.inspectVideoWidth+10,"px; z-index: 999;");miniSwitchDOM.innerHTML="<div id='".concat(_this.jSPlugin.id,'-miniSwitch-btn\' style="width: 32px;height: 32px;display: flex;align-items: center;justify-content: center;border-radius: 50%;background: rgba(0,0,0,0.70);">\n      <svg width="20px" height="20px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <title>大小窗切换</title>\n          <g id="icon/大小窗切换" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <rect id="矩形" x="0" y="0" width="24" height="24"></rect>\n              <path d="M16,3.25 C17.5187831,3.25 18.75,4.48121694 18.75,6 L18.75,6 L18.75,6.644 L19.095177,6.64456257 C20.6299163,6.64456257 21.9388658,7.64624846 22.0337198,8.99291851 L22.0392202,9.14979714 L22.0392202,17.639328 C22.0392202,19.0115638 20.7871129,20.0640733 19.2712041,20.1401546 L19.095177,20.1445626 L8.48326347,20.1445626 C6.94852423,20.1445626 5.63957467,19.1428767 5.54472071,17.7962066 L5.53922025,17.639328 L5.539,16.75 L5,16.75 C3.53746816,16.75 2.34159572,15.6082954 2.25501879,14.1675223 L2.25,14 L2.25,6 C2.25,4.48121694 3.48121694,3.25 5,3.25 L5,3.25 Z M18.75,14 C18.75,15.5187831 17.5187831,16.75 16,16.75 L16,16.75 L7.039,16.75 L7.03922025,17.639328 C7.03922025,18.1209822 7.57916546,18.5830417 8.33031492,18.6389177 L8.48326347,18.6445626 L19.095177,18.6445626 C19.873026,18.6445626 20.4615868,18.2126064 20.5321184,17.735283 L20.5392202,17.639328 L20.5392202,9.14979714 C20.5392202,8.66814298 19.999275,8.20608342 19.2481256,8.15020744 L19.095177,8.14456257 L18.75,8.144 Z M16,4.75 L5,4.75 C4.30964406,4.75 3.75,5.30964406 3.75,6 L3.75,6 L3.75,14 C3.75,14.6903559 4.30964406,15.25 5,15.25 L5,15.25 L16,15.25 C16.6903559,15.25 17.25,14.6903559 17.25,14 L17.25,14 L17.25,8.144 L17.2422027,8.14456257 L17.2422027,6.64456257 L17.25,6.644 L17.25,6 C17.25,5.35279131 16.7581253,4.8204661 16.1278052,4.75645361 L16,4.75 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>\n          </g>\n      </svg>\n    </div>');document.getElementById("".concat(_this.jSPlugin.id,"-wrap")).appendChild(miniSwitchDOM);document.getElementById("".concat(_this.jSPlugin.id,"-miniSwitch-btn")).onclick=function(){_.throttle(function(){return _this.miniRecSwitchClick()},1e3)()}});_defineProperty(this,"initMiniWinToggleBtn",function(){var clientWidth=_this.videoWidth;var clientHeight=_this.videoHeight;var smallWinWidth=clientWidth*.3333;var smallWinHeight=clientHeight*.3333;var miniToggleDOM=document.createElement("div");miniToggleDOM.id="".concat(_this.jSPlugin.id,"-miniToggle");miniToggleDOM.style="cursor: pointer;position: absolute; bottom: ".concat(smallWinHeight/2+96-30,"px; right: ").concat(_this.jSPlugin.inspectVideoWidth+smallWinWidth,"px; z-index: 999; height:60px; box-sizing: border-box; padding-top: 20px; text-align: center; width:20px; overflow: hidden; background: #000000; border-radius: 2px 0px 0px 2px; opacity: 0.7;");miniToggleDOM.innerHTML="<div id='".concat(_this.jSPlugin.id,"-miniToggle-btn'>\n    <svg id=\"").concat(_this.jSPlugin.id,'-min-win-close-icon" style="display: inline-block" width="20px" height="20px" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10867" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <path d="M378.688 217.856l-44.032 46.464 261.568 247.616-261.504 246.4 43.904 46.528 310.72-292.8z" fill="#ffffff" p-id="10868"></path>\n      </svg>\n    <svg id="').concat(_this.jSPlugin.id,'-min-win-open-icon" style="display: none" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10671" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20">\n        <path d="M645.312 217.856l44.032 46.464-261.568 247.616 261.504 246.4-43.904 46.528-310.72-292.8z" fill="#ffffff" p-id="10672"></path>\n      </svg>\n    </div>');document.getElementById("".concat(_this.jSPlugin.id,"-wrap")).appendChild(miniToggleDOM);document.getElementById("".concat(_this.jSPlugin.id,"-miniToggle")).onclick=function(){_this.miniWinToggleClick()}});_defineProperty(this,"init",function(){_this.initSwithcBtn();_this.initMiniWinToggleBtn()});_defineProperty(this,"setStyleListByIds",function(ids){ids.map(function(item){var dom=document.getElementById(item.id);if(dom){Object.keys(item.styleList).map(function(styleItem){dom.style[styleItem]=item.styleList[styleItem]})}})});this.jSPlugin=jSPlugin;this.inspectMode=inspectMode;this.inspectMapWin=inspectMapWin;this.changeInspectMode=changeInspectMode;this.videoWidth=jSPlugin.width;this.videoHeight=jSPlugin.height;this.minWinStatus="open";this.decoderState=decoderState;this.ZoomControl=new BMapGL.ZoomControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT,offset:new BMapGL.Size(40,50)});this.LocationControl=this.createLocationControl();this.NavigationControl3D=new BMapGL.NavigationControl3D({anchor:BMAP_ANCHOR_BOTTOM_LEFT,offset:new BMapGL.Size(28,105)});this.init()}_createClass$1(SmallWinControl,[{key:"miniWinToggleClick",value:function miniWinToggleClick(){var clientWidth=this.jSPlugin.width;var smallWinWidth=clientWidth*.3333;if(this.minWinStatus==="open"){this.setStyleListByIds([{id:this.inspectMode==="video"?"".concat(this.jSPlugin.id,"-mapbox"):"".concat(this.jSPlugin.id),styleList:{width:"0px"}},{id:"".concat(this.jSPlugin.id,"-miniSwitch"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-miniToggle"),styleList:{right:"".concat(this.jSPlugin.inspectVideoWidth,"px")}},{id:"".concat(this.jSPlugin.id,"-min-win-close-icon"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-min-win-open-icon"),styleList:{display:"inline-block"}}]);this.minWinStatus="close"}else{this.setStyleListByIds([{id:this.inspectMode==="video"?"".concat(this.jSPlugin.id,"-mapbox"):"".concat(this.jSPlugin.id),styleList:{width:smallWinWidth+"px"}},{id:"".concat(this.jSPlugin.id,"-miniSwitch"),styleList:{display:"block"}},{id:"".concat(this.jSPlugin.id,"-miniToggle"),styleList:{right:"".concat(this.jSPlugin.inspectVideoWidth+smallWinWidth,"px")}},{id:"".concat(this.jSPlugin.id,"-min-win-close-icon"),styleList:{display:"inline-block"}},{id:"".concat(this.jSPlugin.id,"-min-win-open-icon"),styleList:{display:"none"}}]);this.minWinStatus="open"}}},{key:"miniRecSwitchClick",value:function miniRecSwitchClick(){var _this2=this;var clientWidth=this.jSPlugin.width;var clientHeight=this.jSPlugin.height;var smallWinWidth=clientWidth*.3333;var smallWinHeight=clientHeight*.3333;if(this.inspectMode==="video"){if(this.jSPlugin.Zoom){this.jSPlugin.Zoom.stopZoom()}this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-mapbox"),styleList:{width:this.jSPlugin.width+"px",height:this.jSPlugin.height+"px",marginBottom:"-40px"}},{id:"".concat(this.jSPlugin.id,"-ez-iframe-footer-container"),styleList:{top:this.jSPlugin.height+"px"}},{id:"".concat(this.jSPlugin.id),styleList:{position:"absolute",zIndex:"100",bottom:"96px",right:"".concat(this.jSPlugin.inspectVideoWidth,"px"),overflow:"hidden"}}]);this.jSPlugin.Theme.inspect.reSizeVideo(smallWinWidth,smallWinHeight);this.inspectMode="map";this.changeInspectMode("map");this.inspectMapWin.map.addControl(this.NavigationControl3D);this.inspectMapWin.map.addControl(this.LocationControl);this.inspectMapWin.map.addControl(this.ZoomControl);this.inspectMapWin.map.addOverlay(this.inspectMapWin.inspectRange);if(document.getElementById("".concat(this.jSPlugin.id,"-loading-item-btn-wrap"))){this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-loading-item-btn"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-svg"),styleList:{display:"block"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-wrap"),styleList:{border:"none",width:"32px",height:"14px"}}])}setTimeout(function(){_this2.inspectMapWin.centerToTrack(18)},100)}else{this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-mapbox"),styleList:{width:smallWinWidth+"px",height:smallWinHeight+"px",marginBottom:"0"}},{id:"".concat(this.jSPlugin.id,"-ez-iframe-footer-container"),styleList:{top:"0px"}},{id:"".concat(this.jSPlugin.id),styleList:{position:"relative",zIndex:"0",bottom:"0",right:"0"}}]);this.jSPlugin.Theme.inspect.reSizeVideo(this.jSPlugin.width,this.jSPlugin.height);this.inspectMode="video";this.changeInspectMode("video");this.inspectMapWin.map.removeControl(this.ZoomControl);this.inspectMapWin.map.removeControl(this.NavigationControl3D);this.inspectMapWin.map.removeControl(this.LocationControl);this.inspectMapWin.map.removeOverlay(this.inspectMapWin.inspectRange);if(document.getElementById("".concat(this.jSPlugin.id,"-loading-item-btn-wrap"))){this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-loading-item-btn"),styleList:{display:"block"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-svg"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-wrap"),styleList:{border:"1px solid rgb(255, 255, 255)",width:"80px",height:"32px",color:"#fff","text-align":"center","line-height":"32px","font-size":"14px"}}])}setTimeout(function(){_this2.inspectMapWin.centerToTrack()},100);if(this.jSPlugin.Zoom&&this.decoderState.state.play){this.jSPlugin.Zoom.startZoom()}}this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-wrap"),styleList:{width:this.jSPlugin.width+this.jSPlugin.inspectVideoWidth+"px",height:this.jSPlugin.height+this.jSPlugin.inspectVideoHeight+"px"}}])}}]);return SmallWinControl}();var data$1={customConfig:{defaultMicro:0,defaultPlay:0,maxTalkTime:0,bellPoster:0,maxBellTime:0,inspectInfo:{color:"#000000",backgroundColor:"#ffffff",activeColor:"#1890FF",btnList:[{btnKey:"inspectName",iconId:"inspectName",part:"left",defaultActive:0,isrender:1,color:"#262626"},{btnKey:"inspectBeginTime",iconId:"inspectBeginTime",part:"left",defaultActive:0,isrender:1,color:"#262626"},{btnKey:"inspectPerson",iconId:"inspectPerson",part:"right",defaultActive:0,isrender:1,color:"#262626"}]}},header:{color:"#2c2c2c",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"deviceName",iconId:"deviceName",part:"left",defaultActive:0,isrender:1,color:"#ffffff"},{btnKey:"inspectTime",iconId:"inspectTime",part:"left",defaultActive:0,isrender:1,color:"#ffffff"},{btnKey:"signalType",iconId:"signalType",part:"right",defaultActive:0,isrender:1,color:"#ffffff"},{btnKey:"batteryStatus",iconId:"batteryStatus",part:"right",defaultActive:0,isrender:1,color:"#ffffff"}]},footer:{color:"#ffffff",backgroundColor:"#000000",activeColor:"blue",btnList:[{btnKey:"talk",iconId:"talk",part:"left",defaultActive:1,isrender:1,backgroundColor:"#cccccc"},{btnKey:"sound",iconId:"sound",part:"left",defaultActive:1,isrender:1,backgroundColor:"#cccccc"}]}};var webInspect={data:data$1};var styleToString=function styleToString(obj){var styleString="";Object.keys(obj).map(function(item,index){styleString+="".concat(item,":").concat(obj[item]).concat(index<Object.keys(obj).length-1?";":"")});return styleString};function formatDuring(millisecond){var hours=parseInt(millisecond%(1e3*60*60*24)/(1e3*60*60));var minutes=parseInt(millisecond%(1e3*60*60)/(1e3*60));var seconds=parseInt(millisecond%(1e3*60)/1e3);return(hours<10?"0".concat(hours):hours)+":"+(minutes<10?"0".concat(minutes):minutes)+":"+(seconds<10?"0".concat(seconds):seconds)}var MEDIAWIDTH=500;var Inspect=function(){function Inspect(jSPlugin,themeData,setDecoderState,decoderState,inspectMode,changeInspectMode,timer){_classCallCheck$1(this,Inspect);this.jSPlugin=jSPlugin;this.videoWidth=jSPlugin.width;this.videoHeight=jSPlugin.height;this.themeData=themeData;this.setDecoderState=setDecoderState;this.decoderState=decoderState;this.isNeedRenderInspectInfo=false;this.isNeedRenderHeader=false;this.isNeedRenderFooter=false;this.inspectMode=inspectMode;this.changeInspectMode=changeInspectMode;this.themeInited=false;this.inspectRecordId=null;this.inspectInfo={};this.activeThemeStatus=true;this.activeThemeStatusTxt="模板未激活";this.globalContainer=new GlobalContainer(this.jSPlugin);this.toastCustom=new ToastCustom(jSPlugin,false);this.InspectEvent=null;this.timer=timer}_createClass$1(Inspect,[{key:"renderSignalType",value:function renderSignalType(signalType){if(!signalType){return null}var objDomString;var signalTypeStr=signalType.toUpperCase();if(signalTypeStr==="WIFI"){objDomString='<span><svg t="1688983236732" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <path d="M0 352.832l93.12 98.752c231.296-245.44 606.464-245.44 837.76 0L1024 352.832C741.44 53.056 283.008 53.056 0 352.832z m372.352 395.008L512 896l139.648-148.16c-76.8-81.92-202.048-81.92-279.296 0zM186.24 550.4l93.12 98.752c128.448-136.32 336.96-136.32 465.408 0L837.824 550.4c-179.648-190.592-471.488-190.592-651.648 0z" fill="#ffffff" p-id="1530"></path>\n      </svg></span>'}else{objDomString="<span>".concat(signalType,"</span>")}return objDomString}},{key:"renderBatteryStatus",value:function renderBatteryStatus(batteryStatus){var objDomString;if(!batteryStatus||batteryStatus==0)return null;objDomString='\n    <div style="\n      display: flex;\n      align-items: center;\n      position: relative;\n    ">\n      <span style="\n        margin-right: 3px; \n        color: '.concat(batteryStatus<=20?"#FF4D4F":"#FFFFFF",'\n      ">').concat(batteryStatus,'%</span>\n      <div style="\n        position: absolute;\n        right: 6px;\n        height: 8px;\n        width: 15px;\n      ">\n        <div style="\n          width: ').concat(batteryStatus,"%;\n          height: 100%;\n          background: ").concat(batteryStatus<=20?"#FF4D4F":"#FFFFFF",'\n          "></div>\n      </div>\n      <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="32" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <path fill="').concat(batteryStatus<=20?"#FF4D4F":"#FFFFFF",'"  d="M128 213.333333l640 0q52.992 0 90.496 37.504t37.504 90.496q52.992 0 90.496 37.504t37.504 90.496l0 85.333333q0 52.992-37.504 90.496t-90.496 37.504q0 52.992-37.504 90.496t-90.496 37.504l-640 0q-52.992 0-90.496-37.504t-37.504-90.496l0-341.333333q0-52.992 37.504-90.496t90.496-37.504zM768 298.666667l-640 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333l0 341.333333q0 17.664 12.501333 30.165333t30.165333 12.501333l640 0q17.664 0 30.165333-12.501333t12.501333-30.165333l0-341.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333zM896 426.666667l0 170.666667q17.664 0 30.165333-12.501333t12.501333-30.165333l0-85.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333z"></path>\n      </svg>\n    </div>\n    ');return objDomString}},{key:"renderInspectTime",value:function renderInspectTime(inspectTime){if(!inspectTime){return null}var dateParts=inspectTime.split(" ");var date=dateParts[0].split("-");var time=dateParts[1].split(":");var dateTime=new Date(date[0],date[1]-1,date[2],time[0],time[1],time[2]);var time_Interval=(new Date).getTime()-new Date(dateTime).getTime();var objDomString;objDomString='\n    <span style="\n      display: inline-block;\n      width:8px;\n      height:8px;\n      border-radius: 100%;\n      background: #FF4D4F;\n      margin-right: 4px;\n    "></span>\n    '.concat(formatDuring(time_Interval),"\n    ");return objDomString}},{key:"matchBtn",value:function matchBtn(btnId,btnData){var _this=this;var _this$themeData=this.themeData,customConfig=_this$themeData.customConfig,header=_this$themeData.header,footer=_this$themeData.footer;var inspectInfo=customConfig.inspectInfo;var btnItem={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function onclick(){},onmoveleft:function onmoveleft(){},onmoveright:function onmoveright(){},onremove:function onremove(){}};var _index=inspectInfo.btnList.findIndex(function(item){return item.iconId===btnId});if(_index!==-1){btnItem.color=inspectInfo.color;btnItem.backgroundColor=inspectInfo.backgroundColor;btnItem.activeColor=inspectInfo.activeColor}else{_index=header.btnList.findIndex(function(item){return item.iconId===btnId});if(_index!==-1){btnItem.color=header.color;btnItem.backgroundColor=header.backgroundColor;btnItem.activeColor=header.activeColor}else{btnItem.color=footer.color;btnItem.backgroundColor=footer.backgroundColor;btnItem.activeColor=footer.activeColor}}switch(btnId){case"inspectName":btnItem.title="巡检名称";btnItem.id=btnId;btnItem.domString='<span id="'.concat(this.jSPlugin.id,'-inspectInfo-inspectName" \n        style="\n        color:').concat(btnData.color||"#262626",';\n        font-size: 18px;\n        text-align: left;\n        font-weight: bold;\n        padding: 0 16px;\n        ">巡检名称</span>');btnItem.onclick=function(){};return btnItem;case"inspectBeginTime":btnItem.title="巡检开始时间";btnItem.id=btnId;btnItem.domString='<span id="'.concat(this.jSPlugin.id,'-inspectInfo-inspectBeginTime" \n        style="\n        color:').concat(btnData.color||"#FFFFFF",';\n        font-size: 14px;\n        text-align: left;\n        padding-left: 16px;\n        border-left: 1px solid #d9d9d9;\n        line-height: 16px;\n        margin-top: 1px;\n        ">巡检开始时间：-</span>');btnItem.onclick=function(){};return btnItem;case"inspectPerson":btnItem.title="本地巡检员";btnItem.id=btnId;btnItem.domString='<span id="'.concat(this.jSPlugin.id,'-inspectInfo-inspectPerson" \n        style="\n        color:').concat(btnData.color||"#FFFFFF",';\n        font-size: 14px;\n        display: block;\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: left;\n        padding-right: 16px;\n        ">本地巡检员：-</span>');btnItem.onclick=function(){};return btnItem;case"deviceName":btnItem.title="设备名称";btnItem.id=btnId;btnItem.domString='<span id="'.concat(this.jSPlugin.id,'-header-deviceName" \n        style="\n        color:').concat(btnData.color||"#FFFFFF",";\n        font-size: 16px;\n        display: block;\n        max-width: ").concat(this.jSPlugin.width*.33,'px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: left;\n        ">设备名称</span>');btnItem.onclick=function(){};return btnItem;case"inspectTime":btnItem.title="巡检时长";btnItem.id=btnId;btnItem.domString='<span id="'.concat(this.jSPlugin.id,'-header-inspectTime-wrap" \n        style="\n        color:').concat(btnData.color||"#FFFFFF",';\n        font-size: 14px;\n        display: flex;\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: left;\n        margin-left: 32px;\n        ">巡检时长：<span id="').concat(this.jSPlugin.id,'-header-inspectTime" style="display: flex; align-items: center;">-</span></span>');btnItem.onclick=function(){};return btnItem;case"signalType":btnItem.title="信号类型";btnItem.id=btnId;btnItem.domString='<span id="'.concat(this.jSPlugin.id,'-header-signalType" \n        style="\n        color:').concat(btnData.color||"#FFFFFF",';\n        font-size: 14px;\n        display: block;\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: left;\n        "></span>');btnItem.onclick=function(){};return btnItem;case"batteryStatus":btnItem.title="设备电量";btnItem.id=btnId;btnItem.domString='<span id="'.concat(this.jSPlugin.id,'-header-batteryStatus" \n        style="\n        color:').concat(btnData.color||"#FFFFFF",';\n        font-size: 14px;\n        display: flex;\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: left;\n        margin-left: 12px;\n        align-items: center;\n        "></span>');btnItem.onclick=function(){};return btnItem;case"talk":btnItem.title="对讲";btnItem.id=btnId;btnItem.domString="<div></div>"+'<svg id="'.concat(this.jSPlugin.id,'-talk-icon" class="theme-icon-item-icon" fill="').concat(btnItem.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>MEDIAWIDTH?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.1,2.7C8.5,2.7,7.2,4,7.2,5.6v5.2c0,1.6,1.3,2.9,2.9,2.9l0.2,0c1.5-0.1,2.7-1.4,2.7-2.9V5.6\tC13,4,11.7,2.7,10.1,2.7z M10.1,3.7c1.1,0,1.9,0.9,1.9,1.9v5.2c0,1-0.8,1.8-1.8,1.9l-0.1,0c-1,0-1.9-0.9-1.9-1.9V5.6 C8.2,4.5,9,3.7,10.1,3.7z" />'+'<path d="M15.1,8.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,3-2.5,5.5-5.5,5.5c-3,0-5.4-2.3-5.5-5.3l0-0.2V9 c0-0.3,0.2-0.5,0.5-0.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,2.5,2,4.5,4.5,4.5c2.4,0,4.4-1.9,4.5-4.3l0-0.2V9 C14.6,8.7,14.8,8.5,15.1,8.5z" />'+'<path d="M13.5,17.7c0.3,0,0.5,0.2,0.5,0.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-7c-0.3,0-0.5-0.2-0.5-0.5 c0-0.2,0.2-0.4,0.4-0.5l0.1,0H13.5z" />'+'<path d="M10.1,15.2c0.2,0,0.4,0.2,0.5,0.4l0,0.1v2.5c0,0.3-0.2,0.5-0.5,0.5c-0.2,0-0.4-0.2-0.5-0.4l0-0.1 v-2.5C9.6,15.4,9.8,15.2,10.1,15.2z" />'+'</svg><span id="'.concat(this.jSPlugin.id,'-talk-label" style="margin-left: -3px">对讲</span>');btnItem.onclick=function(){var _this$decoderState$st=_this.decoderState.state,talk=_this$decoderState$st.talk,sound=_this$decoderState$st.sound,play=_this$decoderState$st.play;if(play){if(talk){console.log("结束对讲");_this.setDecoderState({talk:false});_this.jSPlugin.Talk.stopTalk();var isReOpenSound=_.findIndex(_this.themeData.footer.btnList,function(v){return v.iconId==="sound"&&v.isrender===1&&v.defaultActive===1})>-1;if(_this.themeData&&isReOpenSound){_this.jSPlugin.openSound();_this.setDecoderState({sound:true})}}else{console.log("开始对讲");_this.setDecoderState({talk:true});_this.jSPlugin.Talk.startTalk(function(isGb){if(sound&&!isGb){_this.jSPlugin.closeSound();_this.setDecoderState({sound:false})}})}}};return btnItem;case"sound":btnItem.title="音量";btnItem.id=btnId;btnItem.domString='<span style="height: 100%">'+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-nosound-icon" style="display:none" fill="').concat(btnItem.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>MEDIAWIDTH?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH?48:32,'" viewBox="-6 -7 32 31">\n          <path d="M8.5,4.2c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8C5,13.2,5,12.9,5.1,12.7 c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3L9.2,5L5.9,7.8 C5.6,7.9,5.3,7.9,5.1,7.7C5,7.5,5,7.3,5.1,7.1L5.2,7L8.5,4.2z"/>\n          <path d="M5.5,6.9C5.8,6.9,6,7.1,6,7.4c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2C3.4,7.9,3.3,8,3.2,8.2l0,0.1v4 c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,12.5,6,12.7,6,13c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4 c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>\n          <path d="M17.4,7.9c0.2-0.2,0.5-0.2,0.7,0c0.2,0.2,0.2,0.4,0.1,0.6l-0.1,0.1l-3.8,3.8c-0.2,0.2-0.5,0.2-0.7,0 c-0.2-0.2-0.2-0.4-0.1-0.6l0.1-0.1L17.4,7.9z"/>\n          <path d="M13.7,7.9c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.8,3.8c0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1-0.1 l-3.7-3.8C13.5,8.4,13.5,8.1,13.7,7.9z"/>\n          </svg>')+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-sound-icon" style="display:inline-block" width="').concat(this.jSPlugin.width>MEDIAWIDTH?48:32,'" height="').concat(this.jSPlugin.width>MEDIAWIDTH?48:32,'" fill="').concat(btnItem.color,'" viewBox="-6 -7 32 32">\n            <path d="M13.2,7.1c0.1-0.2,0.5-0.3,0.7-0.2c1.1,0.7,1.9,2.2,1.9,3.7c0,1.6-0.7,3-1.9,3.7\n              c-0.2,0.1-0.5,0.1-0.7-0.2c-0.1-0.2-0.1-0.5,0.2-0.7c0.8-0.5,1.4-1.6,1.4-2.9c0-1.3-0.6-2.4-1.4-2.9C13.1,7.6,13,7.3,13.2,7.1z"/>\n            <path d="M15.7,4.5c0.2-0.2,0.5-0.2,0.7-0.1C18,5.8,19,8.2,19,10.7c0,2.5-1,4.8-2.7,6.3\n              c-0.2,0.2-0.5,0.2-0.7-0.1c-0.2-0.2-0.2-0.5,0.1-0.7c1.4-1.2,2.3-3.3,2.3-5.5c0-2.2-0.9-4.3-2.3-5.5C15.5,5,15.5,4.7,15.7,4.5z"/>\n            <path id="Stroke-5" class="st1" d="M8.5,4.7c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8\n              C5,13.7,5,13.4,5.1,13.2c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3l-0.1,0\n              L5.9,8.3C5.6,8.4,5.3,8.4,5.1,8.2C5,8,5,7.7,5.1,7.6l0.1-0.1L8.5,4.7z"/>\n            <path  d="M5.5,7.4C5.8,7.4,6,7.6,6,7.9c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.2,0-0.3,0.1-0.3,0.3l0,0.1v4\n              c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,13,6,13.2,6,13.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4\n              c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>\n          </svg>')+'</span><span id="'.concat(this.jSPlugin.id,'-sound-label" style="margin-left: -3px; color: ').concat(btnItem.color,'">音量</span>');btnItem.onclick=function(){var _this$decoderState$st2=_this.decoderState.state,play=_this$decoderState$st2.play,sound=_this$decoderState$st2.sound,talk=_this$decoderState$st2.talk;if(play&&!talk){if(sound){_this.jSPlugin.closeSound();_this.setDecoderState({sound:false})}else{_this.jSPlugin.openSound();_this.setDecoderState({sound:true})}}};return btnItem;default:return btnItem}}},{key:"renderInspectInfo",value:function renderInspectInfo(id,item){var objItem=this.matchBtn(id,item);var childDOM=document.createElement("sapn");childDOM.innerHTML="".concat(objItem.domString);if(item.part==="left"){document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl-left")).appendChild(childDOM)}else{document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl-right")).appendChild(childDOM)}}},{key:"renderHeader",value:function renderHeader(id,item){var objItem=this.matchBtn(id,item);var objDOM=document.createElement("span");objDOM.className="".concat(this.jSPlugin.id,"-header-content");objDOM.style="display: flex; align-items: center; ";objDOM.innerHTML="\n      ".concat(objItem.domString,"\n    ");if(item.part==="left"){document.getElementById("".concat(this.jSPlugin.id,"-headControl-left")).appendChild(objDOM)}else{document.getElementById("".concat(this.jSPlugin.id,"-headControl-right")).appendChild(objDOM)}}},{key:"renderFooter",value:function renderFooter(id,item){var _this2=this;var objItem=this.matchBtn(id,item);var btnWidth=this.videoWidth/6;var objDOM=document.createElement("div");objDOM.className="theme-icon-item";if(!!this.jSPlugin.isWebConsole){objDOM.style="padding:0 ".concat(btnWidth*.1,"px;")}else{objDOM.style="padding:0 ".concat(btnWidth*.1,"px;cursor: pointer;")}objDOM.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(objItem.id,'-content" title="').concat(objItem.title,'" style="display: flex;align-items: center;position:relative;">')).concat(objItem.domString,"</div>")+"</span>";objDOM.onclick=function(e){if(_this2.decoderState.state.isEditing||!_this2.activeThemeStatus){return false}objItem.onclick(e)};if(objItem.onmouseenter){objDOM.onmouseenter=function(e){if(_this2.decoderState.state.isEditing||!_this2.activeThemeStatus){return false}objItem.onmouseenter(e)}}if(objItem.onmouseleave){objDOM.onmouseleave=function(e){if(_this2.decoderState.state.isEditing||!_this2.activeThemeStatus){return false}objItem.onmouseleave(e)}}document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).appendChild(objDOM)}},{key:"initThemeData",value:function initThemeData(){var _this3=this;var _this$themeData2=this.themeData,customConfig=_this$themeData2.customConfig,header=_this$themeData2.header,footer=_this$themeData2.footer;var inspectInfo=customConfig.inspectInfo;var videoId=this.jSPlugin.id;this.isNeedRenderInspectInfo=_.findIndex(inspectInfo.btnList,function(v){return v.isrender>0})>=0;this.isNeedRenderHeader=_.findIndex(header.btnList,function(v){return v.isrender>0})>=0;this.isNeedRenderFooter=_.findIndex(footer.btnList,function(v){return v.isrender>0})>=0;if(this.isNeedRenderInspectInfo){if(!document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl"))){var inspectInfoContainer=document.createElement("div");inspectInfoContainer.setAttribute("id","".concat(this.jSPlugin.id,"-inspectInfoControl"));inspectInfoContainer.setAttribute("class","inspectInfo-controls");inspectInfoContainer.innerHTML="<div id='".concat(this.jSPlugin.id,"-inspectInfoControl-left' class=\"inspectInfo-controls-left\" style='display:flex;overflow:hidden;'></div><div id='").concat(this.jSPlugin.id,"-inspectInfoControl-right' class=\"inspectInfo-controls-right\" style='display:flex;'></div>");var inspectInfoHeight="58px";var inspectInfoStyle={height:inspectInfoHeight,display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#000000",width:"".concat(this.jSPlugin.width+290,"px"),position:"relative","align-items":"center",background:"#ffffff","border-bottom":"1px solid #D9D9D9","box-sizing":"border-box"};inspectInfoContainer.style=styleToString(inspectInfoStyle);document.getElementById("".concat(videoId,"-wrap")).insertBefore(inspectInfoContainer,document.getElementById(this.jSPlugin.id));var checkTimer=setInterval(function(){if(window.EZUIKit[_this3.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer)}},50)}else{document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-inspectInfoControl-left' style='display:flex;'></div><div id='").concat(this.jSPlugin.id,"-inspectInfoControl-right' style='display:flex'></div>")}}else{if(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl"))){document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")))}}if(this.isNeedRenderHeader){if(!document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){var headerContainer=document.createElement("div");headerContainer.setAttribute("id","".concat(this.jSPlugin.id,"-headControl"));headerContainer.setAttribute("class","header-controls");headerContainer.innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' class=\"header-controls-left\" style='display:flex; max-width: 70%; align-items: center; overflow: hidder;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' class=\"header-controls-right\" style='display:flex; align-items: center;'></div>");var headerHeight="56px";var headerStyle={height:headerHeight,display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#FFFFFF",width:this.jSPlugin.width+"px",padding:"0 16px","box-sizing":"border-box",position:"relative","align-items":"center",background:"#000000"};headerContainer.style=styleToString(headerStyle);document.getElementById("".concat(videoId,"-wrap")).insertBefore(headerContainer,document.getElementById(videoId));var _checkTimer=setInterval(function(){if(window.EZUIKit[_this3.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(_checkTimer)}},50)}else{document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' style='display:flex'></div>")}}else{if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))}}var footerHeight="56px";if(this.isNeedRenderFooter){if(!document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){var footerContainer=document.createElement("div");footerContainer.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container"));footerContainer.setAttribute("class","ez-iframe-footer-container");var footerStyle={position:"relative",display:"flex",height:"56px","flex-wrap":"wrap","justify-content":"center","z-index":999,top:0,color:"#FFFFFF",width:this.jSPlugin.width+"px","align-items":"center","background-color":"#000000","font-size":"14px"};footerContainer.style=styleToString(footerStyle);footerContainer.innerHTML='\n          <div id="'.concat(this.jSPlugin.id,"-audioControls\" class=\"footer-controls\" style='display:flex;justify-content: center;padding: 0 4%;width:100%;z-index:999;position: relative;'>\n            <div id='").concat(this.jSPlugin.id,"-audioControls-left' class=\"footer-controls-left\" style='display:flex;margin-lefacti'></div><div id='").concat(this.jSPlugin.id,"-audioControls-right' class=\"footer-controls-right\" style='display:flex'></div>\n          </div>\n          ");insertAfter(footerContainer,document.getElementById(videoId))}else{if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-".concat(footerHeight,"px")}}}else{if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))}}if(this.isNeedRenderInspectInfo&&document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl"))){document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.background=inspectInfo.backgroundColor;document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.color=inspectInfo.color;inspectInfo.btnList.map(function(item,index){if(item.isrender){_this3.renderInspectInfo(item.iconId,item)}})}if(this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=header.backgroundColor;document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=header.color;header.btnList.map(function(item,index){if(item.isrender){_this3.renderHeader(item.iconId,item)}})}if(this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=footer.backgroundColor;document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=footer.color;footer.btnList.map(function(item,index){if(item.isrender){_this3.renderFooter(item.iconId,item)}})}this.inspectMapWin=new InspectMap(this.jSPlugin);this.inspectSmallWin=new SmallWinControl(this.jSPlugin,this.inspectMode,this.inspectMapWin,this.changeInspectMode,this.decoderState)}},{key:"renderThemeData",value:function renderThemeData(){var _this4=this;var isEditing=this.decoderState.state.isEditing;var _this$themeData3=this.themeData,inspectInfo=_this$themeData3.inspectInfo,header=_this$themeData3.header,footer=_this$themeData3.footer;if(this.isNeedRenderInspectInfo&&inspectInfo){document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.background=inspectInfo.backgroundColor.replace("-diy","");document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.color=inspectInfo.color.replace("-diy","");inspectInfo.btnList.map(function(item,index){if(item.isrender){_this4.setDecoderState(_defineProperty({},item.iconId,_this4.decoderState.state[item.iconId]))}})}if(this.isNeedRenderHeader&&header){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=header.backgroundColor.replace("-diy","");document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=header.color.replace("-diy","");header.btnList&&header.btnList.map(function(item,index){if(item.isrender){_this4.setDecoderState(_defineProperty({},item.iconId,_this4.decoderState.state[item.iconId]))}})}if(this.isNeedRenderFooter&&footer){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=footer.backgroundColor.replace("-diy","");document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=footer.color.replace("-diy","");footer.btnList.map(function(item,index){if(item.isrender){_this4.setDecoderState(_defineProperty({},item.iconId,_this4.decoderState.state[item.iconId]))}if(index==0&&!_this4.themeInited&&_this4.activeThemeStatus){var checkTimer=setInterval(function(){if(window.EZUIKit[_this4.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer);if(_this4.themeData.customConfig.bellPoster==1&&!isEditing){_this4.jSPlugin.pluginStatus.loadingClear()}else{_this4.jSPlugin.play()}_this4.themeInited=true}},50)}});this.setDecoderState({cloudRec:matchEzopenUrl(this.jSPlugin.url).type==="cloud.rec",rec:matchEzopenUrl(this.jSPlugin.url).type==="rec",type:matchEzopenUrl(this.jSPlugin.url).type})}else{if(!this.themeInited&&this.activeThemeStatus){var _checkTimer2=setInterval(function(){if(window.EZUIKit[_this4.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(_checkTimer2);if(_this4.themeData&&_this4.themeData.customConfig&&_this4.themeData.customConfig.bellPoster==1&&!isEditing){_this4.jSPlugin.pluginStatus.loadingClear()}else{_this4.jSPlugin.play()}_this4.themeInited=true}},50)}}var checkTimer=setInterval(function(){if(window.EZUIKit[_this4.jSPlugin.id].state.EZUIKitPlayer.init){clearInterval(checkTimer);_this4.reSizeVideo(_this4.videoWidth,_this4.videoHeight)}},50);if(!this.jSPlugin.Zoom)this.jSPlugin.Zoom=new Zoom(this.jSPlugin);this.getInspectDevInfo(this.jSPlugin,true,false)}},{key:"getInspectRecord",value:function getInspectRecord(){var _this5=this;var successCallback=function successCallback(data){if(data.meta.code==200&&data.data){var resultData=data.data;resultData.inspectRange&&_this5.inspectMapWin.createPolygon(resultData.inspectRange,"#407AFF","dashed",4,1,"#407AFF",.08);resultData.inspectPoints&&resultData.inspectPoints.length>0&&_this5.inspectMapWin.createInspectPoints(resultData.inspectPoints);if(_this5.inspectMode==="video"){_this5.inspectMapWin.map.removeOverlay(_this5.inspectMapWin.inspectRange)}if(document.getElementById("".concat(_this5.jSPlugin.id,"-inspectInfo-inspectName"))&&resultData.inspectName){document.getElementById("".concat(_this5.jSPlugin.id,"-inspectInfo-inspectName")).innerText=""+resultData.inspectName}if(document.getElementById("".concat(_this5.jSPlugin.id,"-inspectInfo-inspectBeginTime"))&&resultData.beginTime){document.getElementById("".concat(_this5.jSPlugin.id,"-inspectInfo-inspectBeginTime")).innerText="巡检开始时间："+resultData.beginTime}if(document.getElementById("".concat(_this5.jSPlugin.id,"-header-inspectTime"))){_this5.timer.createInterval("InspectTimer",function(){document.getElementById("".concat(_this5.jSPlugin.id,"-header-inspectTime")).innerHTML=_this5.renderInspectTime(resultData.beginTime)},1e3)}if(document.getElementById("".concat(_this5.jSPlugin.id,"-inspectInfo-inspectPerson"))&&resultData.inspectPerson){document.getElementById("".concat(_this5.jSPlugin.id,"-inspectInfo-inspectPerson")).innerText="本地巡检员："+resultData.inspectPerson}_this5.inspectInfo=resultData;resultData.inspectRecordId&&getDeviceTrace(_this5.jSPlugin,resultData.inspectRecordId,function(data){if(data.meta.code==200&&data.data){_this5.inspectMapWin.createTrack(data.data,true);_this5.timer.createInterval("TraceTimer",function(){resultData.inspectRecordId&&getDeviceTrace(_this5.jSPlugin,resultData.inspectRecordId,function(data){if(data.meta.code==200&&data.data){_this5.inspectMapWin.createTrack(data.data,false)}},function(){})},5e3)}},function(){});_this5.InspectEvent=new InspectEvent(_this5.jSPlugin,resultData.inspectRecordId,_this5.timer)}};var errorCallback=function errorCallback(err){};getInspectDetail(this.jSPlugin,successCallback,errorCallback)}},{key:"getInspectDevInfo",value:function getInspectDevInfo(jSPlugin){var _this6=this;var isFirst=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var isRefreshVideo=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var successCallback=function successCallback(data){if(data.meta&&data.meta.code==200&&data.data){if(data.data.status===1){if(isRefreshVideo&&!_this6.decoderState.state.play){_this6.jSPlugin.pluginStatus.loadingStart(_this6.jSPlugin.id);_this6.jSPlugin.pluginStatus.loadingSetText({text:"视频加载中"});_this6.jSPlugin.play()}_this6.globalContainer.globalContainerToggle("".concat(_this6.jSPlugin.id,"-inspect-global-box"),false);if(document.getElementById("".concat(_this6.jSPlugin.id,"-header-deviceName"))){document.getElementById("".concat(_this6.jSPlugin.id,"-header-deviceName")).innerText="".concat(data.data.deviceName,"(").concat(data.data.deviceSerial,")");document.getElementById("".concat(_this6.jSPlugin.id,"-header-deviceName")).setAttribute("title","".concat(data.data.deviceName,"(").concat(data.data.deviceSerial,")"))}if(document.getElementById("".concat(_this6.jSPlugin.id,"-header-signalType"))){document.getElementById("".concat(_this6.jSPlugin.id,"-header-signalType")).innerHTML=_this6.renderSignalType(data.data.signalType)}if(document.getElementById("".concat(_this6.jSPlugin.id,"-header-batteryStatus"))){document.getElementById("".concat(_this6.jSPlugin.id,"-header-batteryStatus")).innerHTML=_this6.renderBatteryStatus(data.data.batteryStatus)}_this6.timer.createInterval("InspectDevInfoTimer",function(){_this6.getInspectDevInfo(jSPlugin,false,false)},3e5);isFirst&&_this6.getInspectRecord()}else{_this6.globalContainer.globalContainerToggle("".concat(_this6.jSPlugin.id,"-inspect-loading-box"),false);_this6.jSPlugin.stop();_this6.globalContainer.deviceErrorInfo({tips:"当前设备未在巡检中",refreshBtn:"刷新",refreshShow:true},function(){_this6.globalContainer.globalContainerToggle("".concat(_this6.jSPlugin.id,"-no-inspect-box"),false);_this6.globalContainer.globalContainerToggle("".concat(_this6.jSPlugin.id,"-inspect-loading-box"),true);_this6.getInspectDevInfo(jSPlugin,true,true)})}}else{_this6.globalContainer.globalContainerToggle("".concat(_this6.jSPlugin.id,"-inspect-loading-box"),false);_this6.jSPlugin.stop();_this6.globalContainer.deviceErrorInfo({tips:data.meta.message,refreshShow:false})}};var errorCallback=function errorCallback(){_this6.globalContainer.globalContainerToggle("".concat(_this6.jSPlugin.id,"-inspect-global-box"),false)};getDeviceInfo(jSPlugin,successCallback,errorCallback)}},{key:"fetchThemeData",value:function fetchThemeData(themeId){var _this7=this;var successCallback=function successCallback(data){if(data.meta.code===0&&data.data){_this7.activeThemeStatus=true;_this7.themeData=data.data;if(!_this7.jSPlugin.capacity){setTimeout(function(){_this7.initThemeData();_this7.renderThemeData()},300)}else{_this7.initThemeData();_this7.renderThemeData()}}else{_this7.activeThemeStatus=false;_this7.jSPlugin.pluginStatus.loadingClear();if(data.meta.code=="111021"){_this7.globalContainer.globalContainerToggle("".concat(_this7.jSPlugin.id,"-inspect-loading-box"),false);_this7.jSPlugin.stop();_this7.globalContainer.deviceErrorInfo({tips:"无效的模板id",refreshBtn:"刷新",refreshShow:false});_this7.activeThemeStatusTxt="无效的模板id";return}else if(data.meta.code=="111023"){_this7.globalContainer.globalContainerToggle("".concat(_this7.jSPlugin.id,"-inspect-loading-box"),false);_this7.jSPlugin.stop();_this7.globalContainer.deviceErrorInfo({tips:"您的试用特权已到期，需前往轻应用控制台购买后使用。",refreshBtn:"刷新",refreshShow:false});_this7.activeThemeStatusTxt="试用特权已到期";return}else{_this7.globalContainer.globalContainerToggle("".concat(_this7.jSPlugin.id,"-inspect-loading-box"),false);_this7.jSPlugin.stop();_this7.globalContainer.deviceErrorInfo({tips:"模板未激活，请先在开放平台轻应用控制台购买模板",refreshBtn:"刷新",refreshShow:false});_this7.activeThemeStatusTxt="模板未激活";return}}};var errorCallback=function errorCallback(){_this7.themeData=webInspect.data;if(_this7.themeData.header){_this7.themeData.header.btnList=_this7.themeData.header.btnList.sort(function(a,b){return a.btnKey.split("-")[3]-b.btnKey.split("-")[3]})}if(_this7.themeData.footer){_this7.themeData.footer.btnList=_this7.themeData.footer.btnList.sort(function(a,b){return a.btnKey.split("-")[3]-b.btnKey.split("-")[3]})}_this7.initThemeData();_this7.renderThemeData()};templateDetailApi(this.jSPlugin,themeId,successCallback,errorCallback)}},{key:"reSizeVideo",value:function reSizeVideo(width,height){document.getElementById("".concat(this.jSPlugin.id)).style.width=width+"px";document.getElementById("".concat(this.jSPlugin.id)).style.height=height+"px";if(this.jSPlugin&&this.jSPlugin.bPlay){this.jSPlugin.JS_Resize(width,height)}else{if(document.getElementById("".concat(this.jSPlugin.id,"-player"))){document.getElementById("".concat(this.jSPlugin.id,"-player")).width=width;document.getElementById("".concat(this.jSPlugin.id,"-player")).height=height;document.getElementById("".concat(this.jSPlugin.id,"-player")).style.width=width+"px";document.getElementById("".concat(this.jSPlugin.id,"-player")).style.height=height+"px";document.getElementById("".concat(this.jSPlugin.id,"-container-0")).style.height=height+"px"}var scale=1;if(document.getElementById("".concat(this.jSPlugin.id,"canvas0"))){var isNeedScale=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(isNeedScale){scale=2}document.getElementById("".concat(this.jSPlugin.id,"canvas0")).style.width=width*scale+"px";document.getElementById("".concat(this.jSPlugin.id,"canvas0")).style.height=height*scale+"px";document.getElementById("".concat(this.jSPlugin.id,"canvas0")).width=width*scale;document.getElementById("".concat(this.jSPlugin.id,"canvas0")).height=height*scale;document.getElementById("".concat(this.jSPlugin.id,"canvas0")).parentNode.style.width=width*scale+"px";document.getElementById("".concat(this.jSPlugin.id,"canvas0")).parentNode.style.height=height*scale+"px";document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).height=height*scale}}}},{key:"reSize",value:function reSize(width,height){var smallWidth=width*.3333;var smallHeight=height*.3333;if(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl"))){document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.width=width+this.jSPlugin.inspectVideoWidth+"px"}if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.width=width+"px"}if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.width=width+"px"}if(this.jSPlugin.Theme.inspectMode==="video"){this.reSizeVideo(width,height);if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.top=0}document.getElementById("".concat(this.jSPlugin.id,"-mapbox")).style.width=smallWidth+"px";document.getElementById("".concat(this.jSPlugin.id,"-mapbox")).style.height=smallHeight+"px"}else{if(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.top=height+"px"}this.reSizeVideo(smallWidth,smallHeight);document.getElementById("".concat(this.jSPlugin.id,"-mapbox")).style.width=width+"px";document.getElementById("".concat(this.jSPlugin.id,"-mapbox")).style.height=height+"px"}document.getElementById("".concat(this.jSPlugin.id,"-miniToggle")).style.bottom=smallHeight/2+96-30+"px";document.getElementById("".concat(this.jSPlugin.id,"-miniToggle")).style.right=this.jSPlugin.inspectVideoWidth+smallWidth+"px"}}]);return Inspect}();var InspectTheme=function(){function InspectTheme(jSPlugin){var _this=this;_classCallCheck$1(this,InspectTheme);_defineProperty(this,"changeInspectMode",function(mode){_this.inspectMode=mode});this.jSPlugin=jSPlugin;this.videoWidth=jSPlugin.width;this.videoHeight=jSPlugin.height;this.inspectMode="video";this.autoFocus=0,this.decoderState={state:{isEditing:false,play:false,sound:false,recordvideo:false,recordCount:"00:00",talk:false,mute:false,rejection:false,cloudRec:matchEzopenUrl(jSPlugin.url).type==="cloud.rec",rec:matchEzopenUrl(jSPlugin.url).type==="rec",type:matchEzopenUrl(jSPlugin.url).type}};this.isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(typeof jSPlugin.isMobile!=="undefined"){this.isMobile=jSPlugin.isMobile}this.themeData=webInspect.data;if(this.jSPlugin.themeId=="themeData"){this.themeData=this.jSPlugin.params.themeData}if(!this.timer){this.timer=new Timer(jSPlugin)}if(this.jSPlugin.themeId){if(this.isMobile);else{this.inspect=new Inspect(this.jSPlugin,this.themeData,this.setDecoderState,this.decoderState,this.inspectMode,this.changeInspectMode,this.timer)}switch(this.jSPlugin.themeId){case"themeData":this.themeData=this.jSPlugin.params.themeData;this.inspect.initThemeData();this.inspect.renderThemeData();break;default:this.inspect.fetchThemeData(this.jSPlugin.themeId);break}}if(!this.jSPlugin.Talk){this.jSPlugin.Talk=new Talk(this.jSPlugin)}addCss("".concat(this.jSPlugin.staticPath,"/css/theme.css"));addCss("".concat(this.jSPlugin.staticPath,"/css/component.css"));addCss("".concat(this.jSPlugin.staticPath,"/css/inspectTheme.css"))}_createClass$1(InspectTheme,[{key:"setDecoderState",value:function setDecoderState(options,backgroundColor){var _this2=this;var color="#FFFFFF";var activeColor="#1890FF";Object.keys(options).map(function(item){switch(item){case"talk":if(document.getElementById("".concat(_this2.jSPlugin.id,"-talk"))){document.getElementById("".concat(_this2.jSPlugin.id,"-talk")).className=options[item]?"active":"";document.getElementById("".concat(_this2.jSPlugin.id,"-talk-content")).childNodes[1].style.fill=options[item]?activeColor:color;document.getElementById("".concat(_this2.jSPlugin.id,"-talk-content")).childNodes[2].style.color=options[item]?activeColor:color}break;case"sound":if(document.getElementById("".concat(_this2.jSPlugin.id,"-sound"))){if(options[item]){document.getElementById("".concat(_this2.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:inline-block";document.getElementById("".concat(_this2.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:none";document.getElementById("".concat(_this2.jSPlugin.id,"-sound")).className=options[item]?"active":"";document.getElementById("".concat(_this2.jSPlugin.id,"-sound-content")).childNodes[0].children[1].style.fill=options[item]?activeColor:color;document.getElementById("".concat(_this2.jSPlugin.id,"-sound-label")).style.color=options[item]?activeColor:color}else{document.getElementById("".concat(_this2.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:inline-block";document.getElementById("".concat(_this2.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:none";document.getElementById("".concat(_this2.jSPlugin.id,"-sound")).className=options[item]?"active":"";document.getElementById("".concat(_this2.jSPlugin.id,"-sound-label")).style.color=options[item]?activeColor:color}}break}_this2.decoderState.state=Object.assign(_this2.decoderState.state,options)})}},{key:"setDisabled",value:function setDisabled(status){var _this$decoderState$st=this.decoderState.state,sound=_this$decoderState$st.sound;_this$decoderState$st.hd;document.getElementById(sound?"".concat(this.jSPlugin.id,"-sound-icon"):"".concat(this.jSPlugin.id,"-nosound-icon"))!=null&&document.getElementById(sound?"".concat(this.jSPlugin.id,"-sound-icon"):"".concat(this.jSPlugin.id,"-nosound-icon")).setAttribute("style",status?"cursor: not-allowed;fill: gray":"cursor: default");document.getElementById("".concat(this.jSPlugin.id,"-sound-label"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-sound-label")).setAttribute("style",status?"cursor: not-allowed; color: gray":"cursor: default");document.getElementById("".concat(this.jSPlugin.id,"-talk-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-talk-icon")).setAttribute("style",status?"cursor: not-allowed;fill: gray":"cursor: default");document.getElementById("".concat(this.jSPlugin.id,"-talk-label"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-talk-label")).setAttribute("style",status?"cursor: not-allowed; color: gray":"cursor: default")}},{key:"inspectEnding",value:function inspectEnding(){var objDOM=document.createElement("div");objDOM.id="".concat(this.jSPlugin.id,"-inspect-ending-box");objDOM.style="width:100%; position: absolute; z-index: 10000;  top:58px; bottom:0; left:0; background: #ffffff;";objDOM.innerHTML='<div style="\n      overflow: auto;\n      box-sizing: border-box;\n      font-size: 14px;\n      color: #595959;\n      text-align: center;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n    ">\n      <div>\n        <div style="text-align:center; height: 21px;">\n          <svg t="1689074472491" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7172" xmlns:xlink="http://www.w3.org/1999/xlink" width="21" height="21"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z" fill="#FF4D4F" p-id="7173"></path></svg>\n        </div>\n        <div style="color: #595959; font-size:14px; margin: 5px 0 16px;font-weight: 400; text-align: center;">巡检已结束</div>\n      </div>\n    </div>\n    ';document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(objDOM);this.jSPlugin.Zoom&&this.jSPlugin.Zoom.stopZoom()}}]);return InspectTheme}();var EventEmitter=function(){function EventEmitter(){_classCallCheck$1(this,EventEmitter);this.events={}}_createClass$1(EventEmitter,[{key:"on",value:function on(type,listener){if(!type||!listener)return;this.events[type]=this.events[type]||[];this.events[type].push(listener)}},{key:"emit",value:function emit(type,arg){if(!type)return;if(this.events[type]){this.events[type].forEach(function(listener){return listener(arg)})}}},{key:"off",value:function off(type,listener){if(!type||!listener)return;if(this.events[type]){this.events[type].splice(this.events[type].indexOf(listener),1)}}},{key:"once",value:function once(type,listener){var self=this;function fn(){var args=Array.prototype.slice.call(arguments);listener.apply(null,args);self.off(type,fn)}this.on(type,fn)}},{key:"removeAllListener",value:function removeAllListener(){this.events={}}}]);return EventEmitter}();(function(global,factory){if((typeof module==="undefined"?"undefined":_typeof(module))==="object"&&_typeof(module.exports)==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("EZUIPlayer requires a window with a document")}return factory(w)}}else{factory(global)}})(typeof window!=="undefined"?window:void 0,function(window,noGlobal){var _state;function addJs(filepath,callback){var headerScript=document.getElementsByTagName("head")[0].getElementsByTagName("script");var isReady=false;for(var i=0;i<headerScript.length;i++){if(headerScript[i].getAttribute("src")==filepath){isReady=true;callback()}}if(!isReady){var oJs=document.createElement("script");oJs.setAttribute("src",filepath);oJs.onload=callback;document.getElementsByTagName("head")[0].appendChild(oJs)}}function addCss(filepath,callback){var headerLink=document.getElementsByTagName("head")[0].getElementsByTagName("link");var isReady=false;for(var i=0;i<headerLink.length;i++){if(headerLink[i].getAttribute("href")==filepath){isReady=true;callback()}}if(!isReady){var oJs=document.createElement("link");oJs.rel="stylesheet";oJs.type="text/css";oJs.href=filepath;oJs.onload=callback;document.getElementsByTagName("head")[0].appendChild(oJs)}}function request(url,method,params,header,success,error){var _url=url;var http_request=new XMLHttpRequest;http_request.onreadystatechange=function(){if(http_request.readyState==4){if(http_request.status==200){var _data=JSON.parse(http_request.responseText);success(_data)}}};http_request.open(method,_url,true);var data=new FormData;for(var i in params){data.append(i,params[i])}http_request.send(data)}var EZUIKit={EZUIKitPlayer:undefined,EZUIKitTalk:undefined,opt:{apiDomain:"https://open.ys7.com/api/lapp/live/talk/url",filePath:"https://open.ys7.com/assets/ezuikit_v2.6.4",accessToken:"",url:"",deviceSerial:"",channelNo:"",id:"",talkLink:"",rtcUrl:"",ttsUrl:"",stream:"",isReliesReady:false,template:"simple",plugin:[],audio:1,autoplay:1,videoLoading:false},state:(_state={countTimer:undefined,recodeTime:0,recodeTimer:undefined},_defineProperty(_state,"recodeTime",0),_defineProperty(_state,"fetchDefaultList",false),_defineProperty(_state,"page",0),_defineProperty(_state,"pageSize",5),_state),handleTalkSuccess:function handleTalkSuccess(){},handleTalkError:function handleTalkError(){}};var domain="https://open.ys7.com";var filePathDomain=domain;var EZUIKitPlayer=function EZUIKitPlayer(params){var _this=this;this.opt={id:params.id,apiDomain:domain+"/api/lapp/live/talk/url",filePath:filePathDomain+"/assets/ezuikit_v2.6.4",decoderVersion:"",accessToken:"",url:"",deviceSerial:"",channelNo:"",talkLink:"",rtcUrl:"",ttsUrl:"",stream:"",isReliesReady:false,template:"simple",plugin:[],audio:1,autoplay:1,fullScreenStatus:0,bSupporDoubleClickFull:true,videoLoading:false};this.params=params;if(params.id){this.opt.id=params.id}if(params.accessToken){this.opt.accessToken=params.accessToken}if(typeof params.audio!=="undefined"){this.opt.audio=params.audio}if(typeof params.decoderVersion!=="undefined"){this.opt.decoderVersion=params.decoderVersion}if(typeof params.env!=="undefined"){if(typeof params.env.domain!=="undefined"){domain=params.env.domain;this.opt.apiDomain=domain+"/api/lapp/live/talk/url"}if(typeof params.env.filePathDomain!=="undefined"){filePathDomain=params.env.filePathDomain;this.opt.filePathDomain=params.env.filePathDomain}}if(params.url){this.opt.url=params.url;this.opt.deviceSerial=params.url.split("/")[3];this.opt.channelNo=params.url.split("/")[4].split(".")[0]}if(typeof params.template!=="undefined"){this.opt.template=params.template}if(params.plugin){this.opt.plugin=params.plugin}if(typeof params.autoplay!=="undefined"){this.opt.autoplay=params.autoplay?1:0}if(typeof params.bSupporDoubleClickFull!=="undefined"){this.opt.bSupporDoubleClickFull=params.bSupporDoubleClickFull}if(typeof params.handleTalkSuccess!=="undefined"){window.EZUIKit.handleTalkSuccess=params.handleTalkSuccess}if(typeof params.handleTalkError!=="undefined"){window.EZUIKit.handleTalkError=params.handleTalkError}var id=this.opt.id;var domElement=document.getElementById(id);domElement.style.fontSize=0;domElement.style.overflowY="auto";domElement.style.position="relative";var iframe=document.createElement("iframe");function matchIframeUrl(){switch(_this.opt.template){case"simple":var iframeUrl=domain+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+_this.opt.url.replace("?","&")+"&autoplay="+_this.opt.autoplay+"&audio="+_this.opt.audio+"&accessToken="+params.accessToken+"&templete=0"+"&id="+id+"&decoderVersion="+_this.opt.decoderVersion;var controlsValue="";if(typeof params.controls!=="undefined"&&params.controls){console.log("typeof",_typeof(params.controls));controlsValue="play,voice,hd,fullScreen";if(params.controls.length>0){controlsValue=params.controls.join(",");iframeUrl+="&controls="+controlsValue}}if(params.websocketParams){iframeUrl+="&websocketParams="+JSON.stringify(params.websocketParams)}return iframeUrl;case"standard":return domain+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+_this.opt.url.replace("?","&")+"&autoplay="+_this.opt.autoplay+"&audio="+_this.opt.audio+"&accessToken="+params.accessToken+"&templete=1"+"&id="+id+"&decoderVersion="+_this.opt.decoderVersion;case"security":return domain+"/ezopen/h5/iframe_se?bSupporDoubleClickFull=0&url="+_this.opt.url.replace("?","&")+"&autoplay="+_this.opt.autoplay+"&audio="+_this.opt.audio+"&accessToken="+params.accessToken+"&templete=0"+"&id="+id+"&decoderVersion="+_this.opt.decoderVersion;case"theme":iframeUrl=domain+"/jssdk/theme.html?url=".concat(params.url,"&accessToken=").concat(params.accessToken,"&id=").concat(id,"&isMobile=").concat(params.isMobile);if(typeof params.isMobile!=="undefined"){iframeUrl+="&isMobile="+params.isMobile}if(typeof params.autoplay!=="undefined"){iframeUrl+="&autoplay="+params.autoplay}if(typeof params.domain!=="undefined"){if(params.domain=="https://test12open.ys7.com")iframeUrl+="&env="+"test12"}if(typeof params.env!=="undefined"){if(typeof params.env.domain!=="undefined"){if(params.env.domain=="https://test12open.ys7.com"){iframeUrl+="&env="+"test12"}}}if(typeof params.header!=="undefined"){iframeUrl+="&header="+params.header}return iframeUrl;default:return domain+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+_this.opt.url.replace("?","&")+"&autoplay="+_this.opt.autoplay+"&audio="+_this.opt.audio+"&accessToken="+params.accessToken+"&templete=0"+"&id="+id+"&decoderVersion="+_this.opt.decoderVersion}}iframe.src=matchIframeUrl();var iframeHeight=document.getElementById(id).offsetHeight;var iframeWidth=document.getElementById(id).offsetWidth;if(params.height){iframeHeight=parseInt(params.height);if(/\%$/.test(params.height)){iframeWidth=document.getElementById(id).offsetWidth*(parseInt(params.height)/100)}}if(params.width){iframeWidth=parseInt(params.width);if(/\%$/.test(params.width)){iframeWidth=document.getElementById(id).offsetWidth*(parseInt(params.width)/100)}}iframe.width=iframeWidth;iframe.height=iframeHeight;iframe.id="EZUIKitPlayer-"+id;iframe.setAttribute("allowfullscreen",true);iframe.setAttribute("allow","autoplay");iframe.setAttribute("frameborder",0);domElement.appendChild(iframe);var jqueryJS=_this.opt.filePath+"/js/jquery.js";var layerJs="https://open.ys7.com/assets/layer/layer.js";addJs(jqueryJS,function(){addJs(layerJs,function(){if(matchHeaderOpt().headerContainer){var headerContainer=document.createElement("div");headerContainer.setAttribute("class","panel-top");var controsDOM=document.createElement("div");controsDOM.setAttribute("class","contros");headerContainer.appendChild(controsDOM);domElement.insertBefore(headerContainer,iframe);if(matchHeaderOpt().capturePictureModule){var capturePictureDOM=document.createElement("span");capturePictureDOM.innerHTML='<span title="截图">'+'<svg id="capturePicture" title="截图" t="1578882764585" class="icon" viewBox="0 0 1024 1024" version="1.1"'+'  xmlns="http://www.w3.org/2000/svg" p-id="5958" width="24" height="24">'+"  <path"+'    d="M887.296 315.904h-153.6c-51.2 0-68.096-102.4-119.296-102.4H392.704c-34.304 0-51.2 102.4-102.4 102.4h-153.6c-29.696 0-51.2 21.504-51.2 51.2v439.296c0 25.6 21.504 47.104 51.2 47.104h751.104c29.696 0 51.2-21.504 51.2-51.2v-435.2c-0.512-30.208-21.504-51.2-51.712-51.2zM512 768c-115.2 0-204.8-89.6-204.8-200.704s89.6-200.704 204.8-200.704 204.8 89.6 204.8 200.704-93.696 200.704-204.8 200.704z m247.296-354.304c-12.8 0-25.6-12.8-25.6-25.6s12.8-25.6 25.6-25.6 25.6 12.8 25.6 25.6c0 17.408-12.8 25.6-25.6 25.6zM256 264.704c0-8.704-8.704-16.896-16.896-16.896h-51.2c-8.704 0-16.896 8.704-16.896 16.896V281.6H256v-16.896z m256 148.992c-85.504 0-153.6 68.096-153.6 153.6s68.096 153.6 153.6 153.6 153.6-68.096 153.6-153.6-68.096-153.6-153.6-153.6z"'+'    fill="#ffffff" p-id="5959"></path>'+"</svg>"+"</span>";capturePictureDOM.onclick=function(){_this.capturePicture()};controsDOM.appendChild(capturePictureDOM)}console.log("matchHeaderOpt().saveModule",matchHeaderOpt().saveModule);if(matchHeaderOpt().saveModule){var startSaveDOM=document.createElement("span");startSaveDOM.innerHTML='<span title="开始录像">'+'  <svg id="startSave" t="1578882716693" class="icon" viewBox="0 0 1024 1024" version="1.1"'+'    xmlns="http://www.w3.org/2000/svg" p-id="3782" width="24" height="24">'+"    <path"+'      d="M915.2 729.6l-128-76.8c-25.6-12.8-44.8-32-44.8-51.2V435.2c0-25.6 19.2-38.4 44.8-51.2l128-76.8c25.6-12.8 44.8 0 44.8 19.2V704c0 32-19.2 38.4-44.8 25.6z m-332.8 89.6H96c-51.2 0-89.6-38.4-89.6-89.6V332.8c0-51.2 38.4-89.6 89.6-89.6h486.4c51.2 0 89.6 38.4 89.6 89.6v396.8c0 51.2-38.4 89.6-89.6 89.6zM192 364.8c-32 6.4-57.6 32-64 64-12.8 57.6 38.4 115.2 96 102.4 32-6.4 57.6-32 64-70.4 12.8-57.6-38.4-108.8-96-96z m0 0"'+'      p-id="3783" fill="#ffffff"></path>'+"  </svg>"+"</span>";startSaveDOM.onclick=function(){_this.startSave();document.getElementById("startSave").setAttribute("class","icon hide");document.getElementById("stopSave").setAttribute("class","icon")};controsDOM.appendChild(startSaveDOM);var stopSaveDOM=document.createElement("span");stopSaveDOM.innerHTML='<span title="结束录像">'+' <svg id="stopSave" t="1578882716693" class="icon hide" viewBox="0 0 1024 1024" version="1.1"'+'   xmlns="http://www.w3.org/2000/svg" p-id="3782" width="24" height="24">'+"   <path"+'     d="M915.2 729.6l-128-76.8c-25.6-12.8-44.8-32-44.8-51.2V435.2c0-25.6 19.2-38.4 44.8-51.2l128-76.8c25.6-12.8 44.8 0 44.8 19.2V704c0 32-19.2 38.4-44.8 25.6z m-332.8 89.6H96c-51.2 0-89.6-38.4-89.6-89.6V332.8c0-51.2 38.4-89.6 89.6-89.6h486.4c51.2 0 89.6 38.4 89.6 89.6v396.8c0 51.2-38.4 89.6-89.6 89.6zM192 364.8c-32 6.4-57.6 32-64 64-12.8 57.6 38.4 115.2 96 102.4 32-6.4 57.6-32 64-70.4 12.8-57.6-38.4-108.8-96-96z m0 0"'+'     p-id="3783" fill="red"></path>'+" </svg>"+" </span>";stopSaveDOM.onclick=function(){_this.stopSave();document.getElementById("stopSave").setAttribute("class","icon hide");document.getElementById("startSave").setAttribute("class","icon")};controsDOM.appendChild(stopSaveDOM)}if(matchHeaderOpt().zoomModule){var enableZoomDOM=document.createElement("span");enableZoomDOM.innerHTML='<span title="开启电子放大">'+'  <svg id="enableZoom" t="1578882639834" class="icon" viewBox="0 0 1000 1000" version="1.1"'+'    xmlns="http://www.w3.org/2000/svg" p-id="2227" width="24" height="24">'+"    <path"+'      d="M830.6119 441.1089c0-193.7756-157.0939-350.8641-350.8775-350.8641S128.8559 247.3333 128.8559 441.1089 285.9508 791.972 479.7344 791.972 830.6119 634.8845 830.6119 441.1089zM483.2821 710.4863c-146.7975 0-265.8187-118.9953-265.8187-265.8088S336.4847 178.8697 483.2821 178.8697s265.8197 118.9953 265.8197 265.8078S630.0796 710.4863 483.2821 710.4863zM770.6031 653.5739l-72.6417 75.9485 141.6917 160.1814 82.0737-90.0739L770.6031 653.5739zM527.5849 267.4727h-88.60655762279428v132.90489048425167H306.0690340253259v88.60292721534799h132.90933675248866v132.9038911617923h88.60655762279428V488.9794719180395h132.90933675248866v-88.60292721534799H527.5849284006089V267.4726535408993z"'+'      p-id="2228" fill="#ffffff"></path>'+"  </svg>"+"</span>";enableZoomDOM.onclick=function(){_this.enableZoom();document.getElementById("enableZoom").setAttribute("class","icon hide");document.getElementById("closeZoom").setAttribute("class","icon")};controsDOM.appendChild(enableZoomDOM);var closeZoomDOM=document.createElement("span");closeZoomDOM.innerHTML='<span title="关闭电子放大">'+'  <svg id="closeZoom" t="1578882639834" class="icon hide" viewBox="0 0 1000 1000" version="1.1"'+'    xmlns="http://www.w3.org/2000/svg" p-id="2227" width="24" height="24">'+"    <path"+'      d="M830.6119 441.1089c0-193.7756-157.0939-350.8641-350.8775-350.8641S128.8559 247.3333 128.8559 441.1089 285.9508 791.972 479.7344 791.972 830.6119 634.8845 830.6119 441.1089zM483.2821 710.4863c-146.7975 0-265.8187-118.9953-265.8187-265.8088S336.4847 178.8697 483.2821 178.8697s265.8197 118.9953 265.8197 265.8078S630.0796 710.4863 483.2821 710.4863zM770.6031 653.5739l-72.6417 75.9485 141.6917 160.1814 82.0737-90.0739L770.6031 653.5739zM527.5849 267.4727h-88.60655762279428v132.90489048425167H306.0690340253259v88.60292721534799h132.90933675248866v132.9038911617923h88.60655762279428V488.9794719180395h132.90933675248866v-88.60292721534799H527.5849284006089V267.4726535408993z"'+'      p-id="2228" fill="red"></path>'+"  </svg>"+"</span>";closeZoomDOM.onclick=function(){_this.closeZoom();document.getElementById("closeZoom").setAttribute("class","icon hide");document.getElementById("enableZoom").setAttribute("class","icon")};controsDOM.appendChild(closeZoomDOM)}}function matchFooterOpt(){var result={footerContainer:false,talkModule:false,broadcastModule:false,hdModule:false,fullScreenModule:false};var template=_this.opt.template;switch(template){case"simple":if(params.footer&&params.footer instanceof Array){var footer=params.footer;result={footerContainer:true,talkModule:footer.indexOf("talk")!==-1,broadcastModule:footer.indexOf("broadcast")!==-1,hdModule:footer.indexOf("hd")!==-1,fullScreenModule:footer.indexOf("fullScreen")!==-1}}break;case"standard":if(params.footer&&params.footer instanceof Array){var footer=params.footer;result={footerContainer:true,talkModule:footer.indexOf("talk")!==-1,broadcastModule:footer.indexOf("broadcast")!==-1,hdModule:footer.indexOf("hd")!==-1,fullScreenModule:footer.indexOf("fullScreen")!==-1}}break;case"security":break;case"voice":result={footerContainer:true,talkModule:true,broadcastModule:true,hdModule:true,fullScreenModule:true};break}return result}function matchHeaderOpt(){var result={headerContainer:false,capturePictureModule:false,saveModule:false,zoomModule:false};var template=_this.opt.template;switch(template){case"simple":if(params.header&&params.header instanceof Array){var header=params.header;result={headerContainer:true,capturePictureModule:header.indexOf("capturePicture")!==-1,saveModule:header.indexOf("save")!==-1,zoomModule:header.indexOf("zoom")!==-1}}break;case"standard":break;case"security":break;case"voice":result={headerContainer:true,capturePictureModule:true,saveModule:true,zoomModule:true};break}return result}if(matchFooterOpt().footerContainer||_this.opt.plugin.indexOf("talk")!==-1){var recoderCSS=_this.opt.filePath+"/npm/css/recoder.css";var recoderJs=_this.opt.filePath+"/npm/js/recoder.js";var recorderJs=_this.opt.filePath+"/recorder.js";addCss(recoderCSS,function(){});addJs(recoderJs,function(){addJs(recorderJs,function(){})});if(_this.opt.plugin.indexOf("talk")!==-1||matchFooterOpt().talkModule){var apiSuccess=function apiSuccess(data){console.log("data",data);if(data.code==200){var apiResult=data.data;if(apiResult){var rtcTrunk=apiResult.rtcUrl;if(rtcTrunk.indexOf("ws")===-1){rtcTrunk=rtcTrunk.replace("https","wss").replace("rtcgw","rtcgw-ws")}_this.opt.rtcUrl=rtcTrunk;_this.opt.ttsUrl="tts://"+apiResult.ttsUrl;var talk="talk://"+_this.opt.deviceSerial+":0:"+_this.opt.channelNo+":cas.ys7.com:6500";_this.opt.talkLink=_this.opt.ttsUrl+"/"+talk;_this.opt.stream=apiResult.stream;console.log("_this.opt",_this.opt);if(!_this.opt.isReliesReady){var adapeterJS=_this.opt.filePath+"/npm/js/adapeter.js";var janusJS=_this.opt.filePath+"/npm/js/janus.js";var ttsJS=_this.opt.filePath+"/npm/js/tts.js";console.log("加载jquery.js");addJs(adapeterJS,function(){console.log("加载adapeter.js");addJs(janusJS,function(){console.log("加载janus.js");addJs(ttsJS,function(){console.log("加载tts.js");_this.opt.isReliesReady=true})})},function(){return!!window.adapter})}if(!document.getElementById("audioleft")){var audioleft=document.createElement("div");audioleft.style.display="none";audioleft.id="audioleft";document.body.appendChild(audioleft)}if(!document.getElementById("audioright")){var audioright=document.createElement("div");audioright.style.display="none";audioright.id="audioright";document.body.appendChild(audioright)}}}EZUIKit.opt=_this.opt;if(window.EZUIKit){window.EZUIKit.opt=_this.opt}};request(_this.opt.apiDomain,"POST",{accessToken:_this.opt.accessToken,deviceSerial:_this.opt.deviceSerial,channelNo:_this.opt.channelNo},"",apiSuccess)}if(matchFooterOpt().footerContainer){var countTime=function countTime(type,start){clearInterval(EZUIKit.state.countTimer);if(type==="add"){var i=start;EZUIKit.state.countTimer=setInterval(function(){++i;document.getElementById("time-area").innerHTML=formatSeconds(i)},1e3)}else if(type==="sub"){var i=start;EZUIKit.state.countTimer=setInterval(function(){if(i>0){i--;document.getElementById("time-area").innerHTML=formatSeconds(i)}else{clearInterval(EZUIKit.state.countTimer);EZUIKit.state.countTimer=undefined;console.log("倒计时结束，开启声音")}},1e3)}else if(type==="destory"){clearInterval(EZUIKit.state.countTimer);EZUIKit.state.countTimer=undefined;document.getElementById("time-area").innerHTML="00:00"}function formatSeconds(value){var theTime=parseInt(value);var middle=0;var hour=0;var secondV="00";var minV="00";var hourV="00";if(theTime>59){middle=parseInt(theTime/60);theTime=parseInt(theTime%60);if(middle>59){hour=parseInt(middle/60);middle=parseInt(middle%60)}}secondV=parseInt(theTime)>9?parseInt(theTime):"0"+parseInt(theTime);minV=parseInt(middle)>9?parseInt(middle):"0"+parseInt(middle);hourV=parseInt(hour)>9?parseInt(hour):"0"+parseInt(hour);if(hour>0){return hourV+":"+minV+":"+secondV}else if(middle>0){return minV+":"+secondV}else{return"00:"+secondV}}};var footerContainer=document.createElement("div");footerContainer.setAttribute("class","audio-controls");domElement.appendChild(footerContainer);if(matchFooterOpt().hdModule||matchFooterOpt().fullScreenModule){var rightContros=document.createElement("div");rightContros.setAttribute("class","contros");footerContainer.appendChild(rightContros);if(matchFooterOpt().hdModule){var hdDom=document.createElement("span");hdDom.setAttribute("id","video-hd");hdDom.innerHTML=_this.opt.url.indexOf(".hd")===-1?"标清":"高清";hdDom.onclick=function(){if(_this.opt.videoLoading){layer.msg("视频加载中，请稍后");return false}else{var stopPromise=_this.stop();_this.opt.videoLoading=true;stopPromise.then(function(data){_this.opt.videoLoading=false;if(_this.opt.url.indexOf(".hd")===-1){_this.opt.url=_this.opt.url.replace(".live",".hd.live");hdDom.innerHTML=_this.opt.url.indexOf(".hd")===-1?"标清":"高清"}else{_this.opt.url=_this.opt.url.replace(".hd.live",".live");hdDom.innerHTML=_this.opt.url.indexOf(".hd")===-1?"标清":"高清"}_this.play(_this.opt.url)})["catch"](function(error){console.log("error",error)})}};rightContros.appendChild(hdDom)}if(matchFooterOpt().fullScreenModule){var openSoundDOM=document.createElement("span");openSoundDOM.setAttribute("class","hide");openSoundDOM.setAttribute("id","ezuikit-open-sound");openSoundDOM.setAttribute("title","打开声音");openSoundDOM.setAttribute("style","vertical-align: top;");openSoundDOM.innerHTML='<svg t="1590476263239" class="icon" viewBox="0 0 1178 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2273" width="16" height="16"><path d="M665.6 51.2 665.6 51.2c-10.24-30.72-40.96-51.2-71.68-51.2-5.12 0-15.36 0-20.48 5.12l0 0L358.4 153.6 51.2 209.92l0 0C20.48 220.16 0 250.88 0 281.6 0 286.72 0 291.84 0 307.2l0 0 0 409.6 0 0c0 15.36 0 20.48 0 25.6 0 30.72 20.48 61.44 51.2 71.68l0 0L358.4 870.4l97.28 71.68 107.52 76.8 0 0c5.12 5.12 15.36 5.12 25.6 5.12 40.96 0 76.8-35.84 76.8-76.8 0-10.24 0-10.24 0-25.6l0 0L665.6 51.2zM563.2 870.4l-153.6-102.4-307.2-51.2L102.4 307.2l307.2-51.2 153.6-102.4L563.2 870.4z" p-id="2274" fill="#FF0000"></path><path d="M1049.6 537.6l112.64-112.64c20.48-20.48 20.48-56.32 0-76.8-20.48-20.48-56.32-20.48-76.8 0L972.8 460.8l-112.64-112.64c0 0 0 0 0 0-20.48-20.48-56.32-20.48-76.8 0 0 0 0 0 0 0-20.48 20.48-20.48 56.32 0 76.8l112.64 112.64-112.64 112.64c-20.48 20.48-20.48 56.32 0 76.8 20.48 20.48 56.32 20.48 76.8 0L972.8 614.4l112.64 112.64c20.48 20.48 56.32 20.48 76.8 0s20.48-56.32 0-76.8L1049.6 537.6z" p-id="2275" fill="#FF0000"></path></svg>';openSoundDOM.onclick=function(){_this.openSound(0);openSoundDOM.setAttribute("class","hide");closeSoundDOM.setAttribute("class","")};var closeSoundDOM=document.createElement("span");openSoundDOM.setAttribute("id","ezuikit-close-sound");closeSoundDOM.setAttribute("class","hide");closeSoundDOM.setAttribute("title","关闭声音");closeSoundDOM.setAttribute("style","vertical-align: top;");closeSoundDOM.innerHTML='<svg t="1590414410633" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20545" width="16" height="16"><path d="M840.533333 98.133333c-17.066667-17.066667-42.666667-17.066667-59.733333 0-17.066667 17.066667-17.066667 42.666667 0 59.733334C883.2 256 938.666667 392.533333 938.666667 533.333333c0 140.8-55.466667 277.333333-157.866667 375.466667-17.066667 17.066667-17.066667 42.666667 0 59.733333 8.533333 8.533333 21.333333 12.8 29.866667 12.8 8.533333 0 21.333333-4.266667 29.866666-12.8 115.2-110.933333 183.466667-268.8 183.466667-435.2 0-166.4-68.266667-324.266667-183.466667-435.2zM571.733333 12.8c-17.066667-8.533333-34.133333-4.266667-46.933333 8.533333L281.6 256H42.666667c-25.6 0-42.666667 17.066667-42.666667 42.666667v426.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h238.933333l243.2 234.666667c8.533333 8.533333 17.066667 12.8 29.866667 12.8 4.266667 0 12.8 0 17.066666-4.266667 17.066667-8.533333 25.6-21.333333 25.6-38.4V51.2c0-17.066667-8.533333-34.133333-25.6-38.4zM512 870.4l-183.466667-179.2c-8.533333-4.266667-17.066667-8.533333-29.866666-8.533333H85.333333V341.333333h213.333334c12.8 0 21.333333-4.266667 29.866666-12.8L512 153.6v716.8z" p-id="20546" fill="#ffffff"></path><path d="M759.466667 349.866667c-12.8-21.333333-38.4-25.6-59.733334-8.533334-21.333333 12.8-25.6 38.4-8.533333 59.733334 21.333333 29.866667 34.133333 76.8 34.133333 123.733333 0 46.933333-12.8 93.866667-34.133333 123.733333-12.8 21.333333-8.533333 46.933333 8.533333 59.733334 8.533333 4.266667 17.066667 8.533333 25.6 8.533333 12.8 0 25.6-4.266667 34.133334-17.066667 34.133333-46.933333 51.2-106.666667 51.2-174.933333 0-68.266667-17.066667-128-51.2-174.933333z" p-id="20547" fill="#ffffff"></path></svg>';closeSoundDOM.onclick=function(){_this.closeSound(0);openSoundDOM.setAttribute("class","");closeSoundDOM.setAttribute("class","hide")};rightContros.appendChild(openSoundDOM);rightContros.appendChild(closeSoundDOM)}if(_this.opt.audio==1){closeSoundDOM.setAttribute("class","")}else{openSoundDOM.setAttribute("class","");_this.closeSound(0)}if(matchFooterOpt().fullScreenModule){var fullScreenDOM=document.createElement("span");fullScreenDOM.setAttribute("title","全屏");fullScreenDOM.setAttribute("style","vertical-align: top;");fullScreenDOM.innerHTML='<svg id="fullScreen" t="1578020167938" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5035" width="16" height="16"> <path d="M348.373333 625.706667l-128 128-64 64v-128a33.28 33.28 0 0 0-35.413333-35.413334A33.493333 33.493333 0 0 0 85.333333 689.706667v213.333333A33.706667 33.706667 0 0 0 120.96 938.666667h213.333333a35.626667 35.626667 0 0 0 0-71.04h-128l64-64 128-128a35.2 35.2 0 0 0-49.92-49.92zM206.293333 156.373333h128a33.28 33.28 0 0 0 35.413334-35.413333A33.493333 33.493333 0 0 0 334.293333 85.333333H113.706667c-7.04 0-14.08 7.04-21.333334 14.293334a26.026667 26.026667 0 0 0-7.04 21.333333v213.333333a33.493333 33.493333 0 0 0 35.626667 35.413334 33.28 33.28 0 0 0 35.413333-35.413334v-128l192 192a35.2 35.2 0 0 0 49.92-49.92zM903.04 85.333333h-213.333333a33.493333 33.493333 0 0 0-35.413334 35.626667 33.28 33.28 0 0 0 35.413334 35.413333h128l-64 64-128 128a35.2 35.2 0 0 0 49.92 49.92l128-128 64-64v128a35.626667 35.626667 0 0 0 71.04 0v-213.333333A33.706667 33.706667 0 0 0 903.04 85.333333zM903.04 654.293333a33.28 33.28 0 0 0-35.413333 35.413334v128l-64-64-128-128a35.2 35.2 0 0 0-49.92 49.92l128 128 64 64h-128a35.626667 35.626667 0 0 0 0 71.04h213.333333A33.706667 33.706667 0 0 0 938.666667 903.04v-213.333333a33.493333 33.493333 0 0 0-35.626667-35.413334z" p-id="5036" fill="#ffffff"></path></svg>';fullScreenDOM.onclick=function(){_this.fullScreen()};rightContros.appendChild(fullScreenDOM)}}if(matchFooterOpt().talkModule){var startTalkDOM=document.createElement("div");var stopTalkDOM=document.createElement("div");startTalkDOM.setAttribute("class","ptp-talk off");startTalkDOM.innerHTML='<span title="对讲">'+'<svg t="1581930496966" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"'+'  p-id="1641" width="16" height="16">'+"  <path"+'    d="M715.648 647.872c-30.208-22.336-61.568 39.36-100.992 77.44-39.36 38.08-34.112 31.488-123.392-17.088S311.488 540.224 280 491.648C248.448 443.072 265.472 424.704 265.472 424.704s78.72-62.976 97.152-81.344c18.368-18.368 13.12-30.208 13.12-30.208l-128.64-190.144c-23.616-5.184-64.32 5.12-128.576 57.6C54.208 233.088 30.592 353.856 151.296 575.68c120.768 221.824 347.84 330.752 485.568 374.08 137.856 43.328 228.416-61.696 249.408-103.68 21.056-41.984 13.12-85.312 13.12-85.312S745.856 670.208 715.648 647.872z"'+'    p-id="1642" fill="#ffffff"></path>'+"  <path"+'    d="M715.328 64C580.992 64 472.192 172.864 472.192 307.2s108.8 243.2 243.136 243.2 243.2-108.864 243.2-243.2S849.6 64 715.328 64zM715.328 461.056c-84.992 0-153.856-68.864-153.856-153.856s68.864-153.856 153.856-153.856 153.856 68.928 153.856 153.856S800.32 461.056 715.328 461.056z"'+'    p-id="1643" fill="#ffffff"></path>'+"  <path"+'    d="M777.472 277.376c-18.176 0-32.96-14.784-32.96-33.024 0-8.448 3.136-16.064 8.32-21.888-11.52-5.12-24.128-8-37.568-8-51.2 0-92.672 41.472-92.672 92.736s41.472 92.736 92.672 92.736S808.064 358.4 808.064 307.2c0-13.696-3.072-26.688-8.384-38.4C793.728 274.112 786.048 277.376 777.472 277.376zM715.328 340.928c-18.624 0-33.664-15.104-33.664-33.728 0-18.624 15.04-33.728 33.664-33.728 18.688 0 33.728 15.104 33.728 33.728C749.056 325.824 734.016 340.928 715.328 340.928z"'+'    p-id="1644" fill="#ffffff"></path>'+" </svg>"+" </span>"+" <span>开启对讲</span>";startTalkDOM.onclick=function(){console.log("EZUIKit.state.countTimer",EZUIKit.state.countTimer);if(EZUIKit.state.countTimer){window.layer.msg("语音设备正忙，请稍后重试");return false}countTime("add",0);console.log("开始对讲，关闭声音");_this.closeSound(0);console.log(_this.opt);_this.startTalk();this.setAttribute("class","ptp-talk off hide");stopTalkDOM.setAttribute("class","ptp-talk on")};stopTalkDOM.setAttribute("class","ptp-talk on hide");stopTalkDOM.innerHTML='<span title="对讲">'+' <svg t="1581930496966" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"'+'    p-id="1641" width="16" height="16">'+"    <path"+'      d="M715.648 647.872c-30.208-22.336-61.568 39.36-100.992 77.44-39.36 38.08-34.112 31.488-123.392-17.088S311.488 540.224 280 491.648C248.448 443.072 265.472 424.704 265.472 424.704s78.72-62.976 97.152-81.344c18.368-18.368 13.12-30.208 13.12-30.208l-128.64-190.144c-23.616-5.184-64.32 5.12-128.576 57.6C54.208 233.088 30.592 353.856 151.296 575.68c120.768 221.824 347.84 330.752 485.568 374.08 137.856 43.328 228.416-61.696 249.408-103.68 21.056-41.984 13.12-85.312 13.12-85.312S745.856 670.208 715.648 647.872z"'+'      p-id="1642" fill="#ff0000"></path>'+"    <path"+'      d="M715.328 64C580.992 64 472.192 172.864 472.192 307.2s108.8 243.2 243.136 243.2 243.2-108.864 243.2-243.2S849.6 64 715.328 64zM715.328 461.056c-84.992 0-153.856-68.864-153.856-153.856s68.864-153.856 153.856-153.856 153.856 68.928 153.856 153.856S800.32 461.056 715.328 461.056z"'+'      p-id="1643" fill="#ff0000"></path>'+"    <path"+'      d="M777.472 277.376c-18.176 0-32.96-14.784-32.96-33.024 0-8.448 3.136-16.064 8.32-21.888-11.52-5.12-24.128-8-37.568-8-51.2 0-92.672 41.472-92.672 92.736s41.472 92.736 92.672 92.736S808.064 358.4 808.064 307.2c0-13.696-3.072-26.688-8.384-38.4C793.728 274.112 786.048 277.376 777.472 277.376zM715.328 340.928c-18.624 0-33.664-15.104-33.664-33.728 0-18.624 15.04-33.728 33.664-33.728 18.688 0 33.728 15.104 33.728 33.728C749.056 325.824 734.016 340.928 715.328 340.928z"'+'      p-id="1644" fill="#ff0000"></path>'+"  </svg>"+" </span>"+"<span>关闭对讲</span>";stopTalkDOM.onclick=function(){console.log(_this.opt);_this.stopTalk();countTime("destory",0);_this.openSound(0);this.setAttribute("class","ptp-talk on hide");startTalkDOM.setAttribute("class","ptp-talk off")};footerContainer.appendChild(startTalkDOM);footerContainer.appendChild(stopTalkDOM)}if(matchFooterOpt().broadcastModule){var fetchVoiceList=function fetchVoiceList(page){function apiSuccess(data){console.log("data",data);if(data.code==200){randerVoliceList(data.data,5);EZUIKit.state.page=data.page.page;if(page==0&&data.data.length==0&&!EZUIKit.state.fetchDefaultList){EZUIKit.state.fetchDefaultList=true;fetchVoiceList(0)}}}request(domain+"/api/lapp/voice/query","POST",{accessToken:_this.opt.accessToken,pageStart:page,pageSize:EZUIKit.state.pageSize,default:EZUIKit.state.fetchDefaultList?"true":"false"},"",apiSuccess)};var randerVoliceList=function randerVoliceList(data){console.log("renderVoliceList",data);if(data&&data.length>0){for(var i=0;i<data.length;i++){var voiceItem=document.createElement("li");voiceItem.innerHTML="<li class='voice-item' id='voice-item-"+i+"' data-time="+(data[i]["duration"]||20)+" data-url="+data[i]["fileUrl"]+">"+(data[i]["voiceName"].length>10?data[i]["voiceName"].substr(0,10)+"...":data[i]["voiceName"])+"</li>";document.getElementsByClassName("voice-list-ul")[0].append(voiceItem);voiceItem.onclick=function(e){console.log("点击元素",e.target,e.target.dataset.url);var voiceUrl=e.target.dataset.url;var time=e.target.dataset.time;playListOfVoice(voiceUrl,time)}}if(data.length===EZUIKit.state.pageSize){document.getElementById("voice-list-end").innerHTML="向下滚动加载更多"}else{document.getElementById("voice-list-end").innerHTML="没有更多数据了"}}};var playListOfVoice=function playListOfVoice(voiceUrl,time){console.log("播放语音",voiceUrl,time);function apiSuccess(data){console.log("data.data",data.data);if(data.code==200){countTime("sub",parseInt(time))}else if(data.code=="10001"){window.layer.msg("未找到当前语音")}else{window.layer.msg(data.msg||"发送失败，请稍后再试")}}request(domain+"/api/lapp/voice/send","POST",{accessToken:_this.opt.accessToken,deviceSerial:_this.opt.deviceSerial,channelNo:_this.opt.channelNo,fileUrl:voiceUrl},"",apiSuccess)};var startBroadcastDOM=document.createElement("div");var stopBroadcastDOM=document.createElement("div");startBroadcastDOM.setAttribute("class","broadcast off");stopBroadcastDOM.setAttribute("class","broadcast on hide");startBroadcastDOM.innerHTML=' <span title="语音播报">'+'  <svg t="1583561695846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"'+'    p-id="1126" width="16" height="16">'+"    <path"+'      d="M513.82044445 964.38044445c-8.192 0-15.47377778-2.73066667-21.84533334-8.192 0 0-46.42133333-41.87022222-99.21422222-86.47111112-89.20177778-73.728-117.41866667-88.29155555-123.79022222-90.112H35.04355555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666V271.70133333c0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666666H246.21511111c7.28177778-2.73066667 37.31911111-15.47377778 137.44355556-91.02222222 58.25422222-43.69066667 111.04711111-86.47111111 111.04711111-86.47111112 5.46133333-4.55111111 12.74311111-7.28177778 20.02488889-7.28177778 4.55111111 0 10.01244445 0.91022222 14.56355555 3.6408889 10.92266667 5.46133333 18.20444445 17.29422222 18.20444445 30.03733333v837.40444444c0 12.74311111-7.28177778 25.48622222-19.11466667 30.94755556-5.46133333 1.82044445-10.01244445 2.73066667-14.56355555 2.73066667zM270.79111111 724.992c19.11466667 0 48.24177778 8.192 167.48088889 106.496 16.384 13.65333333 33.67822222 28.21688889 51.88266667 43.69066667l5.46133333 4.55111111V139.71911111l-5.46133333 3.64088889c-22.75555555 17.29422222-44.60088889 34.58844445-65.536 50.06222222C293.54666667 291.72622222 264.41955555 299.008 245.30488889 299.008H82.37511111c-20.02488889 0-21.84533333 12.74311111-21.84533333 26.39644445V694.04444445c0 23.66577778 6.37155555 30.03733333 28.21688889 30.03733333h180.224l1.82044444 0.91022222z m520.64711111 162.01955555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666 0-11.83288889 8.192-20.02488889 16.384-24.576 112.86755555-67.35644445 182.04444445-191.14666667 182.04444444-324.03911111 0-132.89244445-70.08711111-256.68266667-182.04444444-324.03911111-10.01244445-5.46133333-15.47377778-14.56355555-15.47377778-24.576 0-14.56355555 11.83288889-27.30666667 26.39644445-27.30666667 5.46133333 0 10.01244445 1.82044445 16.384 5.46133333 128.34133333 76.45866667 207.53066667 218.45333333 207.53066666 369.55022222 0 152.00711111-80.09955555 293.09155555-208.44088889 369.55022223-6.37155555 5.46133333-10.92266667 7.28177778-16.384 7.28177777z m-90.112-152.91733333c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666667 0-10.01244445 4.55111111-18.20444445 12.74311111-23.66577777 61.89511111-34.58844445 100.12444445-100.12444445 100.12444444-171.12177778 0-70.08711111-37.31911111-134.71288889-96.48355555-170.21155555-8.192-4.55111111-12.74311111-13.65333333-12.74311111-23.66577778 0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666667 4.55111111 0 11.83288889 2.73066667 15.47377778 4.55111111 74.63822222 44.60088889 121.96977778 127.43111111 121.96977778 215.72266667 0 90.112-48.24177778 173.85244445-125.61066667 218.45333333-1.82044445 0-9.10222222 4.55111111-15.47377778 4.55111111z"'+'      fill="#ffffff" p-id="1127"></path>'+"  </svg>"+"</span>"+"<span>语音播报</span>";startBroadcastDOM.onclick=function(){this.setAttribute("class","broadcast off hide");stopBroadcastDOM.setAttribute("class","broadcast on")};stopBroadcastDOM.innerHTML='<div class="pop-hover">'+'  <div class="pop-hover-content">'+'    <div class="vioce-list" id="voice-list">'+'      <ul class="voice-list-ul">'+"      </ul>"+'      <div id="voice-list-end"></div>'+"    </div>"+'    <div id="voice-custom" style="text-align: center;">自定义语音</div>'+"  </div>"+"</div>"+'<span title="语音播报">'+'  <svg t="1583561695846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"'+'    p-id="1126" width="16" height="16">'+"    <path"+'      d="M513.82044445 964.38044445c-8.192 0-15.47377778-2.73066667-21.84533334-8.192 0 0-46.42133333-41.87022222-99.21422222-86.47111112-89.20177778-73.728-117.41866667-88.29155555-123.79022222-90.112H35.04355555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666V271.70133333c0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666666H246.21511111c7.28177778-2.73066667 37.31911111-15.47377778 137.44355556-91.02222222 58.25422222-43.69066667 111.04711111-86.47111111 111.04711111-86.47111112 5.46133333-4.55111111 12.74311111-7.28177778 20.02488889-7.28177778 4.55111111 0 10.01244445 0.91022222 14.56355555 3.6408889 10.92266667 5.46133333 18.20444445 17.29422222 18.20444445 30.03733333v837.40444444c0 12.74311111-7.28177778 25.48622222-19.11466667 30.94755556-5.46133333 1.82044445-10.01244445 2.73066667-14.56355555 2.73066667zM270.79111111 724.992c19.11466667 0 48.24177778 8.192 167.48088889 106.496 16.384 13.65333333 33.67822222 28.21688889 51.88266667 43.69066667l5.46133333 4.55111111V139.71911111l-5.46133333 3.64088889c-22.75555555 17.29422222-44.60088889 34.58844445-65.536 50.06222222C293.54666667 291.72622222 264.41955555 299.008 245.30488889 299.008H82.37511111c-20.02488889 0-21.84533333 12.74311111-21.84533333 26.39644445V694.04444445c0 23.66577778 6.37155555 30.03733333 28.21688889 30.03733333h180.224l1.82044444 0.91022222z m520.64711111 162.01955555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666 0-11.83288889 8.192-20.02488889 16.384-24.576 112.86755555-67.35644445 182.04444445-191.14666667 182.04444444-324.03911111 0-132.89244445-70.08711111-256.68266667-182.04444444-324.03911111-10.01244445-5.46133333-15.47377778-14.56355555-15.47377778-24.576 0-14.56355555 11.83288889-27.30666667 26.39644445-27.30666667 5.46133333 0 10.01244445 1.82044445 16.384 5.46133333 128.34133333 76.45866667 207.53066667 218.45333333 207.53066666 369.55022222 0 152.00711111-80.09955555 293.09155555-208.44088889 369.55022223-6.37155555 5.46133333-10.92266667 7.28177778-16.384 7.28177777z m-90.112-152.91733333c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666667 0-10.01244445 4.55111111-18.20444445 12.74311111-23.66577777 61.89511111-34.58844445 100.12444445-100.12444445 100.12444444-171.12177778 0-70.08711111-37.31911111-134.71288889-96.48355555-170.21155555-8.192-4.55111111-12.74311111-13.65333333-12.74311111-23.66577778 0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666667 4.55111111 0 11.83288889 2.73066667 15.47377778 4.55111111 74.63822222 44.60088889 121.96977778 127.43111111 121.96977778 215.72266667 0 90.112-48.24177778 173.85244445-125.61066667 218.45333333-1.82044445 0-9.10222222 4.55111111-15.47377778 4.55111111z"'+'      fill="#ff0000" p-id="1127"></path>'+"  </svg>"+"</span>"+"<span>语音播报</span>";stopBroadcastDOM.onclick=function(){this.setAttribute("class","broadcast on hide");startBroadcastDOM.setAttribute("class","broadcast off")};footerContainer.appendChild(startBroadcastDOM);footerContainer.appendChild(stopBroadcastDOM);document.getElementById("voice-custom").onclick=function(){console.log("显示自定义语音");startSpeakDOM.setAttribute("class","speak off")};fetchVoiceList(0);var startSpeakDOM=document.createElement("div");var stopSpeakDOM=document.createElement("div");startSpeakDOM.setAttribute("class","speak off hide");stopSpeakDOM.setAttribute("class","speak on hide");startSpeakDOM.setAttribute("id","startSpeak");stopSpeakDOM.setAttribute("id","stopSpeak");startSpeakDOM.innerHTML='<span title="按住说话">'+'  <svg t="1581994757678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"'+'    p-id="1639" width="16" height="16">'+"    <path"+'      d="M757.059829 393.846154v-52.512821h262.564103v52.512821H757.059829z m-420.102564 481.367521v96.273504h175.042735a8.752137 8.752137 0 0 1 8.752137 8.752137v35.008547a8.752137 8.752137 0 0 1-8.752137 8.752137H109.401709a8.752137 8.752137 0 0 1-8.752136-8.752137v-35.008547a8.752137 8.752137 0 0 1 8.752136-8.752137h175.042735v-96.273504C129.767932 875.213675 4.376068 749.821812 4.376068 595.145299V463.863248a26.25641 26.25641 0 1 1 52.512821 0v113.777778c0 140.174222 113.637744 253.811966 253.811966 253.811965s253.811966-113.637744 253.811966-253.811965V463.863248a26.25641 26.25641 0 1 1 52.51282 0v131.282051c0 154.676513-125.391863 280.068376-280.068376 280.068376z m-26.25641-96.273504c-111.178393 0-201.299145-90.120752-201.299146-201.299145V201.299145C109.401709 90.120752 199.522462 0 310.700855 0s201.299145 90.120752 201.299145 201.299145v376.341881c0 111.178393-90.120752 201.299145-201.299145 201.299145z m691.418803-280.068376H757.059829v-52.512821h245.059829v52.512821z m-17.504273 105.025641H757.059829v-52.512821h227.555556v52.512821z m-17.504274 105.025641H757.059829v-52.512821h210.051282v52.512821z m-8.752137 105.025641H757.059829v-52.512821h201.299145v52.512821z m-17.504273 105.025641H757.059829v-52.512821h183.794872v52.512821z m-26.25641 105.025641H757.059829v-52.512821h157.538462v52.512821z"'+'      p-id="1640" fill="#ffffff"></path>'+"  </svg>"+"</span>"+"<span>按住说话</span>";stopSpeakDOM.innerHTML='<span title="按住说话">'+'<svg t="1581994757678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"'+'  p-id="1639" width="16" height="16">'+"  <path"+'    d="M757.059829 393.846154v-52.512821h262.564103v52.512821H757.059829z m-420.102564 481.367521v96.273504h175.042735a8.752137 8.752137 0 0 1 8.752137 8.752137v35.008547a8.752137 8.752137 0 0 1-8.752137 8.752137H109.401709a8.752137 8.752137 0 0 1-8.752136-8.752137v-35.008547a8.752137 8.752137 0 0 1 8.752136-8.752137h175.042735v-96.273504C129.767932 875.213675 4.376068 749.821812 4.376068 595.145299V463.863248a26.25641 26.25641 0 1 1 52.512821 0v113.777778c0 140.174222 113.637744 253.811966 253.811966 253.811965s253.811966-113.637744 253.811966-253.811965V463.863248a26.25641 26.25641 0 1 1 52.51282 0v131.282051c0 154.676513-125.391863 280.068376-280.068376 280.068376z m-26.25641-96.273504c-111.178393 0-201.299145-90.120752-201.299146-201.299145V201.299145C109.401709 90.120752 199.522462 0 310.700855 0s201.299145 90.120752 201.299145 201.299145v376.341881c0 111.178393-90.120752 201.299145-201.299145 201.299145z m691.418803-280.068376H757.059829v-52.512821h245.059829v52.512821z m-17.504273 105.025641H757.059829v-52.512821h227.555556v52.512821z m-17.504274 105.025641H757.059829v-52.512821h210.051282v52.512821z m-8.752137 105.025641H757.059829v-52.512821h201.299145v52.512821z m-17.504273 105.025641H757.059829v-52.512821h183.794872v52.512821z m-26.25641 105.025641H757.059829v-52.512821h157.538462v52.512821z"'+'    p-id="1640" fill="#ff0000"></path>'+"</svg>"+"</span>"+"<span>松开发送</span>";footerContainer.appendChild(startSpeakDOM);footerContainer.appendChild(stopSpeakDOM);document.getElementById("voice-list").onscroll=function(e){var sum=this.scrollHeight;console.log("sum",sum,this.scrollTop,document.getElementById("voice-list").clientHeight);if(sum<=this.scrollTop+this.clientHeight){console.log("拖动到底，执行加载",EZUIKit.state.page);fetchVoiceList(++EZUIKit.state.page)}};var timeAreaDOM=document.createElement("div");timeAreaDOM.setAttribute("class","time-area");timeAreaDOM.setAttribute("id","time-area");timeAreaDOM.innerHTML="00:00";footerContainer.appendChild(timeAreaDOM);var recorder;document.getElementById("startSpeak").onmousedown=function(){if(EZUIKit.state.countTimer){window.layer.msg("语音设备正忙，请稍后重试");return false}console.log("按住说话");startSpeakDOM.setAttribute("class","speak off hide");stopSpeakDOM.setAttribute("class","speak on");voiceInit();countTime("add",0);setTimeout(function(){EZUIKit.state.recodeTime=0;startRecording()},1e3);if(EZUIKit.state.recodeTimer){clearInterval(EZUIKit.state.recodeTimer)}EZUIKit.state.recodeTimer=setInterval(function(){if(EZUIKit.state.recodeTime>=59){_this.stopTalk();countTime("destory",0);this.setAttribute("class","ptp-talk on hide");startTalkDOM.setAttribute("class","ptp-talk off");window.layer.msg("不超过1分钟")}else{EZUIKit.state.recodeTime=EZUIKit.state.recodeTime+1}},1e3);var audio_context;function startUserMedia(stream){var input=audio_context.createMediaStreamSource(stream);recorder=new window.Recorder(input)}function startRecording(){recorder&&recorder.record()}function voiceInit(){console.log("run init");try{window.AudioContext=window.AudioContext||window.webkitAudioContext;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia;window.URL=window.URL||window.webkitURL;audio_context=new AudioContext;console.log("Audio context set up.");console.log("navigator.getUserMedia "+(navigator.getUserMedia?"available.":"not present!"))}catch(e){console.log("err",e);window.layer.msg("No web audio support in this browser!")}navigator.getUserMedia({audio:true},startUserMedia,function(e){console.log("No live audio input: "+e)})}};document.getElementById("stopSpeak").onmouseup=function(){console.log("松开发送");stopSpeakDOM.setAttribute("class","speak on hide");stopSpeakFun();function stopSpeakFun(){countTime("destory",0);if(EZUIKit.state.recodeTime<1){window.layer.msg("说话时间过短");clearInterval(EZUIKit.state.recodeTimer);return false}clearInterval(EZUIKit.state.recodeTimer);wavUpload()}function wavUpload(){try{recorder&&recorder.stop();recorder&&recorder.exportWAV(function(wav_file){console.log("wav_file",wav_file);if(wav_file.size<1e3){window.layer.msg("录音失败，请重试");EZUIKit.state.recodeTime=0;return false}countTime("sub",EZUIKit.state.recodeTime+2);var formdata=new FormData;formdata.append("voiceFile",wav_file);formdata.append("accessToken",_this.opt.accessToken);formdata.append("deviceSerial",_this.opt.deviceSerial);formdata.append("channelNo",_this.opt.channelNo);function apiSuccess(data){console.log("data.data",data.data);if(data.code==200){countTime("sub",EZUIKit.state.recodeTime+2)}else if(data.code=="10001"){window.layer.msg("未找到当前语音")}else{window.layer.msg(data.msg||"发送失败，请稍后再试")}}function apiError(err){console.log("err",err)}request(domain+"/api/lapp/voice/sendonce","POST",{voiceFile:wav_file,accessToken:_this.opt.accessToken,deviceSerial:_this.opt.deviceSerial,channelNo:_this.opt.channelNo},"",apiSuccess,apiError)});recorder&&recorder.clear()}catch(err){console.log(err)}}}}}}})});var _this=this;window.addEventListener("message",function(event){event.origin;var id=_this.opt.id;if(event.data.type){switch(event.data.type){case"openSound":if(id==event.data.id&&params.openSoundCallBack){params.openSoundCallBack(event.data)}break;case"closeSound":if(id==event.data.id&&params.closeSoundCallBack){params.closeSoundCallBack(event.data)}break;case"capturePicture":if(id==event.data.id&&params.capturePictureCallBack){params.capturePictureCallBack(event.data)}break;case"startSave":if(id==event.data.id&&params.startSaveCallBack){params.startSaveCallBack(event.data)}break;case"stopSave":if(id==event.data.id&&params.stopSaveCallBack){params.stopSaveCallBack(event.data)}break;case"fullScreen":if(id==event.data.id&&params.fullScreenCallBack){params.fullScreenCallBack(event.data)}break;case"getOSDTime":if(id==event.data.id&&params.getOSDTimeCallBack){params.getOSDTimeCallBack(event.data)}break;case"handleSuccess":if(id==event.data.id&&params.handleSuccess){params.handleSuccess(event.data)}break;case"handleError":if(id==event.data.id&&params.handleError){params.handleError(event.data)}break;case"dblclick":if(id==event.data.id&&_this.opt.bSupporDoubleClickFull){if(_this.opt.fullScreenStatus===0){_this.fullScreen()}else{_this.cancelFullScreen()}}break;case"startTalk":_this.startTalk();_this.closeSound();break;case"stopTalk":_this.stopTalk();_this.openSound();break;case"clickEventHandle":console.log("event.data",event.data);if(params.clickEventHandle){params.clickEventHandle(event.data)}break;case"removeEventHandle":if(params.removeEventHandle){params.removeEventHandle(event.data)}break;case"esc":if(params.clickEventHandle){params.clickEventHandle(event.data)}break;case"iframeFullScreen":if(id==event.data.id){var requestFullScreen=function requestFullScreen(element){var requestMethod=element.requestFullScreen||element.webkitRequestFullScreen||element.mozRequestFullScreen||element.msRequestFullScreen;if(requestMethod){requestMethod.call(element)}else if(typeof window.ActiveXObject!=="undefined"){var wscript=new ActiveXObject("WScript.Shell");if(wscript!==null){wscript.SendKeys("{F11}")}}};requestFullScreen(document.getElementById("EZUIKitPlayer-"+event.data.id))}break}}});function fullscreenchange(data){_this.opt.fullScreenStatus=data?1:0;if(params.fullScreenChangeCallBack){params.fullScreenChangeCallBack({data:data,id:_this.opt.id})}}if(typeof document.fullScreen!=="undefined"){document.addEventListener("fullscreenchange",function(){var e=document.fullscreen||false;fullscreenchange(e)})}else if(typeof document.webkitIsFullScreen!=="undefined"){document.addEventListener("webkitfullscreenchange",function(){var e=document.webkitIsFullScreen||false;fullscreenchange(e)})}else if(typeof document.mozFullScreen!=="undefined"){document.addEventListener("mozfullscreenchange",function(){var e=document.mozFullScreen||false;fullscreenchange(e)})}};EZUIKitPlayer.prototype.play=function(data){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;if(_typeof(data)==="object"&&data.url){this.opt.url=data.url}if(_typeof(data)==="object"&&data.accessToken){this.opt.accessToken=data.accessToken}if(typeof data==="string"){this.opt.url=data}player.postMessage({action:"play",accessToken:this.opt.accessToken,url:this.opt.url},domain+"/ezopen/h5/iframe");var _this=this;this.opt.videoLoading=true;var promise=new Promise(function(resolve,reject){window.addEventListener("message",function(event){var playId=_this.opt.id;if(playId==event.data.id&&event.data.type==="handleSuccess"){setTimeout(function(){_this.opt.videoLoading=false},1e3);resolve(event.data)}})});return promise};EZUIKitPlayer.prototype.stop=function(){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage("stop",domain+"/ezopen/h5/iframe");var _this=this;var promise=new Promise(function(resolve,reject){window.addEventListener("message",function(event){var playId=_this.opt.id;if(playId==event.data.id&&event.data.type==="stop"){resolve(event.data)}})});return promise};EZUIKitPlayer.prototype.openSound=function(){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage("openSound",domain+"/ezopen/h5/iframe");var _this=this;var promise=new Promise(function(resolve,reject){window.addEventListener("message",function(event){var playId=_this.opt.id;if(playId==event.data.id&&event.data.type==="openSound"){resolve(event.data)}})});return promise};EZUIKitPlayer.prototype.closeSound=function(){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage("closeSound",domain+"/ezopen/h5/iframe");var _this=this;var promise=new Promise(function(resolve,reject){window.addEventListener("message",function(event){var playId=_this.opt.id;if(playId==event.data.id&&event.data.type==="closeSound"){resolve(event.data)}})});return promise};EZUIKitPlayer.prototype.startSave=function(fileName){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage({action:"startSave",fileName:fileName||"default"},domain+"/ezopen/h5/iframe");var _this=this;var promise=new Promise(function(resolve,reject){window.addEventListener("message",function(event){var playId=_this.opt.id;if(playId==event.data.id&&event.data.type==="startSave"){resolve(event.data)}})});return promise};EZUIKitPlayer.prototype.stopSave=function(){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage("stopSave",domain+"/ezopen/h5/iframe");var _this=this;var promise=new Promise(function(resolve,reject){window.addEventListener("message",function(event){var playId=_this.opt.id;if(playId==event.data.id&&event.data.type==="stopSave"){resolve(event.data)}})});return promise};EZUIKitPlayer.prototype.fullScreen=function(){if(this.opt.fullScreenStatus===1){return false}var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var width=document.documentElement.clientWidth;var height=document.documentElement.clientHeight;var wrapper=document.body;wrapper=document.getElementById(id);var style="";style+="width:"+height+"px;";style+="height:"+width+"px;";style+="-webkit-transform: rotate(90deg); transform: rotate(90deg);";style+="-webkit-transform-origin: "+width/2+"px "+width/2+"px;";style+="transform-origin: "+width/2+"px "+width/2+"px;";style+="position: fixed;top: 0;left: 0;z-index:10";wrapper.style.cssText=style;setTimeout(function(){player.postMessage("autoResize",domain+"/ezopen/h5/iframe")},500)}else{var requestFullScreen=function requestFullScreen(element){var requestMethod=element.requestFullScreen||element.webkitRequestFullScreen||element.mozRequestFullScreen||element.msRequestFullScreen;if(requestMethod){requestMethod.call(element)}else if(typeof window.ActiveXObject!=="undefined"){var wscript=new ActiveXObject("WScript.Shell");if(wscript!==null){wscript.SendKeys("{F11}")}}};requestFullScreen(document.getElementById(id))}if(this.params.fullScreenCallBack){this.params.fullScreenCallBack(this.opt.id)}this.opt.fullScreenStatus=1};EZUIKitPlayer.prototype.cancelFullScreen=function(){if(this.opt.fullScreenStatus===0){return false}var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var width=document.getElementById(id).width;var height=document.getElementById(id).height;var wrapper=document.body;wrapper=document.getElementById(id);var style="";style+="width:"+width+"px;";style+="height:"+height+"px;";style+="-webkit-transform: none; transform: none;";style+="-webkit-transform-origin: 0 0;";style+="transform-origin: 0 0;";wrapper.style.cssText=style;setTimeout(function(){player.postMessage("autoResize",domain+"/ezopen/h5/iframe")},500);var cancelFullDOMId=id+"cancel-full-screen";var cancelFullDOM=document.getElementById(cancelFullDOMId);if(cancelFullDOM){document.body.removeChild(cancelFullDOM)}}else{if(document.exitFullscreen){document.exitFullscreen()}else if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}}if(this.params.cancelFullScreenCallBack){this.params.cancelFullScreenCallBack(this.opt.id)}this.opt.fullScreenStatus=0};EZUIKitPlayer.prototype.capturePicture=function(fileName,isUndownload){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage({action:"capturePicture",fileName:fileName||"default",isUndownload:isUndownload},domain+"/ezopen/h5/iframe");var _this=this;var promise=new Promise(function(resolve,reject){window.addEventListener("message",function(event){var playId=_this.opt.id;if(playId==event.data.id&&event.data.type==="capturePicture"){resolve(event.data)}})});return promise};EZUIKitPlayer.prototype.enableZoom=function(){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage("enableZoom",domain+"/ezopen/h5/iframe")};EZUIKitPlayer.prototype.closeZoom=function(){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage("closeZoom",domain+"/ezopen/h5/iframe")};EZUIKitPlayer.prototype.getOSDTime=function(){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage("getOSDTime",domain+"/ezopen/h5/iframe");var _this=this;var promise=new Promise(function(resolve,reject){window.addEventListener("message",function(event){var playId=_this.opt.id;if(playId==event.data.id&&event.data.type==="getOSDTime"){resolve(event.data)}})});return promise};EZUIKitPlayer.prototype.autoResize=function(){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage("autoResize",domain+"/ezopen/h5/iframe")};EZUIKitPlayer.prototype.reSize=function(width,height){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;var containerDOM=document.getElementById(this.opt.id);containerDOM.style.width=width+"px";containerDOM.style.height=height+"px";document.getElementById(this.opt.id).style.width=width+"px";document.getElementById(this.opt.id).style.height=height+"px";var playDOM=document.getElementById(id);playDOM.setAttribute("width",width);playDOM.setAttribute("height",height);playDOM.style.width=width+"px";playDOM.style.height=height+"px";setTimeout(function(){player.postMessage({action:"autoResize"},domain+"/ezopen/h5/iframe")},500)};EZUIKitPlayer.prototype.startTalk=function(){console.log("执行开始对讲");console.log(this.opt);var _this=this;EZUIKit.opt=this.opt;if(window.EZUIKit){window.EZUIKit.opt=this.opt}var apiSuccess=function apiSuccess(data){if(data.code==200){var apiResult=data.data;if(apiResult){var rtcTrunk=apiResult.rtcUrl;if(rtcTrunk.indexOf("ws")===-1){rtcTrunk=rtcTrunk.replace("https","wss").replace("rtcgw","rtcgw-ws")}_this.opt.rtcUrl=rtcTrunk;_this.opt.ttsUrl="tts://"+apiResult.ttsUrl;var talk="talk://"+_this.opt.deviceSerial+":0:"+_this.opt.channelNo+":cas.ys7.com:6500";_this.opt.talkLink=_this.opt.ttsUrl+"/"+talk;_this.opt.stream=apiResult.stream;window.startTalk()}}};request(_this.opt.apiDomain,"POST",{accessToken:_this.opt.accessToken,deviceSerial:_this.opt.deviceSerial,channelNo:_this.opt.channelNo},"",apiSuccess)};EZUIKitPlayer.prototype.stopTalk=function(){console.log("执行结束对讲");window.stopTalk()};EZUIKitPlayer.prototype.edit=function(){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage("edit",domain+"/ezopen/h5/iframe")};EZUIKitPlayer.prototype.btnReRender=function(data){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage({action:"btnReRender",data:data},domain+"/ezopen/h5/iframe")};EZUIKitPlayer.prototype.changePlayUrl=function(data){if(data.deviceSerial){this.opt.deviceSerial=data.deviceSerial}if(data.channelNo){this.opt.channelNo=data.channelNo}if(data.accessToken){this.opt.accessToken=data.accessToken}var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage({action:"changePlayUrl",data:data},domain+"/ezopen/h5/iframe")};EZUIKitPlayer.prototype.fetchThemeData=function(){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage({action:"fetchThemeData"},domain+"/ezopen/h5/iframe")};EZUIKitPlayer.prototype.setThemeData=function(accessToken,header,footer){var id="EZUIKitPlayer-"+this.opt.id;var player=document.getElementById(id).contentWindow;player.postMessage({action:"setThemeData",data:{accessToken:accessToken,header:header,footer:footer}},domain+"/ezopen/h5/iframe")};EZUIKit.EZUIKitPlayer=EZUIKitPlayer;window.EZUIKitV3=EZUIKit;var EZUIKitV3=EZUIKit;return EZUIKitV3});var EZUIKitV3$1=EZUIKitV3;var dist=function debounce(fn){var wait=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var lastCallAt=void 0;var deferred=void 0;var timer=void 0;var pendingArgs=[];return function debounced(){var currentWait=getWait(wait);var currentTime=(new Date).getTime();var isCold=!lastCallAt||currentTime-lastCallAt>currentWait;lastCallAt=currentTime;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(isCold&&options.leading){return options.accumulate?Promise.resolve(fn.call(this,[args])).then(function(result){return result[0]}):Promise.resolve(fn.call.apply(fn,[this].concat(args)))}if(deferred){clearTimeout(timer)}else{deferred=defer()}pendingArgs.push(args);timer=setTimeout(flush.bind(this),currentWait);if(options.accumulate){var argsIndex=pendingArgs.length-1;return deferred.promise.then(function(results){return results[argsIndex]})}return deferred.promise};function flush(){var thisDeferred=deferred;clearTimeout(timer);Promise.resolve(options.accumulate?fn.call(this,pendingArgs):fn.apply(this,pendingArgs[pendingArgs.length-1])).then(thisDeferred.resolve,thisDeferred.reject);pendingArgs=[];deferred=null}};function getWait(wait){return typeof wait==="function"?wait():wait}function defer(){var deferred={};deferred.promise=new Promise(function(resolve,reject){deferred.resolve=resolve;deferred.reject=reject});return deferred}var debounce=getDefaultExportFromCjs(dist);(function(){var h;function l(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var m="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};function n(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof commonjsGlobal&&commonjsGlobal];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object")}var q=n(this);function r(a,b){if(b)a:{var c=q;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&m(c,a,{configurable:!0,writable:!0,value:b})}}r("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,g){this.A=f;m(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.A};var d="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",e=0;return b});r("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=q[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&m(d.prototype,a,{configurable:!0,writable:!0,value:function(){return u(l(this))}})}return a});function u(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}function v(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:l(a)}}var w;if("function"==typeof Object.setPrototypeOf)w=Object.setPrototypeOf;else{var y;a:{var z={a:!0},A={};try{A.__proto__=z;y=A.a;break a}catch(a){}y=!1}w=y?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var B=w;function C(){this.m=!1;this.j=null;this.v=void 0;this.h=1;this.u=this.C=0;this.l=null}function D(a){if(a.m)throw new TypeError("Generator is already running");a.m=!0}C.prototype.o=function(a){this.v=a};C.prototype.s=function(a){this.l={D:a,F:!0};this.h=this.C||this.u};C.prototype.return=function(a){this.l={return:a};this.h=this.u};function E(a,b){a.h=3;return{value:b}}function F(a){this.g=new C;this.G=a}F.prototype.o=function(a){D(this.g);if(this.g.j)return G(this,this.g.j.next,a,this.g.o);this.g.o(a);return H(this)};function I(a,b){D(a.g);var c=a.g.j;if(c)return G(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.g.return);a.g.return(b);return H(a)}F.prototype.s=function(a){D(this.g);if(this.g.j)return G(this,this.g.j["throw"],a,this.g.o);this.g.s(a);return H(this)};function G(a,b,c,d){try{var e=b.call(a.g.j,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.g.m=!1,e;var f=e.value}catch(g){return a.g.j=null,a.g.s(g),H(a)}a.g.j=null;d.call(a.g,f);return H(a)}function H(a){for(;a.g.h;)try{var b=a.G(a.g);if(b)return a.g.m=!1,{value:b.value,done:!1}}catch(c){a.g.v=void 0,a.g.s(c)}a.g.m=!1;if(a.g.l){b=a.g.l;a.g.l=null;if(b.F)throw b.D;return{value:b.return,done:!0}}return{value:void 0,done:!0}}function J(a){this.next=function(b){return a.o(b)};this.throw=function(b){return a.s(b)};this.return=function(b){return I(a,b)};this[Symbol.iterator]=function(){return this}}function K(a,b){b=new J(new F(b));B&&a.prototype&&B(b,a.prototype);return b}function L(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}r("Array.prototype.entries",function(a){return a?a:function(){return L(this,function(b,c){return[b,c]})}});if("undefined"!==typeof Blob&&("undefined"===typeof FormData||!FormData.prototype.keys)){var M=function(a,b){for(var c=0;c<a.length;c++)b(a[c])},N=function(a){return a.replace(/\r?\n|\r/g,"\r\n")},O=function(a,b,c){if(b instanceof Blob){c=void 0!==c?String(c+""):"string"===typeof b.name?b.name:"blob";if(b.name!==c||"[object Blob]"===Object.prototype.toString.call(b))b=new File([b],c);return[String(a),b]}return[String(a),String(b)]},P=function(a,b){if(a.length<b)throw new TypeError(b+" argument required, but only "+a.length+" present.")},Q="object"===typeof globalThis?globalThis:"object"===typeof window?window:"object"===typeof self?self:this,R=Q.FormData,S=Q.XMLHttpRequest&&Q.XMLHttpRequest.prototype.send,T=Q.Request&&Q.fetch,U=Q.navigator&&Q.navigator.sendBeacon,V=Q.Element&&Q.Element.prototype,W=Q.Symbol&&Symbol.toStringTag;W&&(Blob.prototype[W]||(Blob.prototype[W]="Blob"),"File"in Q&&!File.prototype[W]&&(File.prototype[W]="File"));try{new File([],"")}catch(a){Q.File=function(b,c,d){b=new Blob(b,d||{});Object.defineProperties(b,{name:{value:c},lastModified:{value:+(d&&void 0!==d.lastModified?new Date(d.lastModified):new Date)},toString:{value:function(){return"[object File]"}}});W&&Object.defineProperty(b,W,{value:"File"});return b}}var escape=function(a){return a.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},X=function(a){this.i=[];var b=this;a&&M(a.elements,function(c){if(c.name&&!c.disabled&&"submit"!==c.type&&"button"!==c.type&&!c.matches("form fieldset[disabled] *"))if("file"===c.type){var d=c.files&&c.files.length?c.files:[new File([],"",{type:"application/octet-stream"})];M(d,function(e){b.append(c.name,e)})}else"select-multiple"===c.type||"select-one"===c.type?M(c.options,function(e){!e.disabled&&e.selected&&b.append(c.name,e.value)}):"checkbox"===c.type||"radio"===c.type?c.checked&&b.append(c.name,c.value):(d="textarea"===c.type?N(c.value):c.value,b.append(c.name,d))})};h=X.prototype;h.append=function(a,b,c){P(arguments,2);this.i.push(O(a,b,c))};h.delete=function(a){P(arguments,1);var b=[];a=String(a);M(this.i,function(c){c[0]!==a&&b.push(c)});this.i=b};h.entries=function b(){var c,d=this;return K(b,function(e){1==e.h&&(c=0);if(3!=e.h)return c<d.i.length?e=E(e,d.i[c]):(e.h=0,e=void 0),e;c++;e.h=2})};h.forEach=function(b,c){P(arguments,1);for(var d=v(this),e=d.next();!e.done;e=d.next()){var f=v(e.value);e=f.next().value;f=f.next().value;b.call(c,f,e,this)}};h.get=function(b){P(arguments,1);var c=this.i;b=String(b);for(var d=0;d<c.length;d++)if(c[d][0]===b)return c[d][1];return null};h.getAll=function(b){P(arguments,1);var c=[];b=String(b);M(this.i,function(d){d[0]===b&&c.push(d[1])});return c};h.has=function(b){P(arguments,1);b=String(b);for(var c=0;c<this.i.length;c++)if(this.i[c][0]===b)return!0;return!1};h.keys=function c(){var d=this,e,f,g,k,p;return K(c,function(t){1==t.h&&(e=v(d),f=e.next());if(3!=t.h){if(f.done){t.h=0;return}g=f.value;k=v(g);p=k.next().value;return E(t,p)}f=e.next();t.h=2})};h.set=function(c,d,e){P(arguments,2);c=String(c);var f=[],g=O(c,d,e),k=!0;M(this.i,function(p){p[0]===c?k&&(k=!f.push(g)):f.push(p)});k&&f.push(g);this.i=f};h.values=function d(){var e=this,f,g,k,p,t;return K(d,function(x){1==x.h&&(f=v(e),g=f.next());if(3!=x.h){if(g.done){x.h=0;return}k=g.value;p=v(k);p.next();t=p.next().value;return E(x,t)}g=f.next();x.h=2})};X.prototype._asNative=function(){for(var d=new R,e=v(this),f=e.next();!f.done;f=e.next()){var g=v(f.value);f=g.next().value;g=g.next().value;d.append(f,g)}return d};X.prototype._blob=function(){var d="----formdata-polyfill-"+Math.random(),e=[],f="--"+d+'\r\nContent-Disposition: form-data; name="';this.forEach(function(g,k){return"string"==typeof g?e.push(f+escape(N(k))+('"\r\n\r\n'+N(g)+"\r\n")):e.push(f+escape(N(k))+('"; filename="'+escape(g.name)+'"\r\nContent-Type: '+(g.type||"application/octet-stream")+"\r\n\r\n"),g,"\r\n")});e.push("--"+d+"--");return new Blob(e,{type:"multipart/form-data; boundary="+d})};X.prototype[Symbol.iterator]=function(){return this.entries()};X.prototype.toString=function(){return"[object FormData]"};V&&!V.matches&&(V.matches=V.matchesSelector||V.mozMatchesSelector||V.msMatchesSelector||V.oMatchesSelector||V.webkitMatchesSelector||function(d){d=(this.document||this.ownerDocument).querySelectorAll(d);for(var e=d.length;0<=--e&&d.item(e)!==this;);return-1<e});W&&(X.prototype[W]="FormData");if(S){var Y=Q.XMLHttpRequest.prototype.setRequestHeader;Q.XMLHttpRequest.prototype.setRequestHeader=function(d,e){Y.call(this,d,e);"content-type"===d.toLowerCase()&&(this.B=!0)};Q.XMLHttpRequest.prototype.send=function(d){d instanceof X?(d=d._blob(),this.B||this.setRequestHeader("Content-Type",d.type),S.call(this,d)):S.call(this,d)}}T&&(Q.fetch=function(d,e){e&&e.body&&e.body instanceof X&&(e.body=e.body._blob());return T.call(this,d,e)});U&&(Q.navigator.sendBeacon=function(d,e){e instanceof X&&(e=e._asNative());return U.call(this,d,e)});Q.FormData=X}})();var FEC_PLACE_WALL=1;var FEC_PLACE_CEILING=3;var FEC_CORRECT_NULL=0;var FEC_CORRECT_PTZ=256;var FEC_CORRECT_360=768;var FEC_CORRECT_CYLINDER=1536;var FEC_CORRECT_ARCSPHERE_HORIZONTAL=2304;var FEC_PLACE_CEILING_CORRECT_TYPE_LIST=[{place:FEC_PLACE_CEILING,name:"鱼眼不矫正",type:0,correctType:FEC_CORRECT_NULL},{place:FEC_PLACE_CEILING,name:"360°全景",type:1,correctType:FEC_CORRECT_360},{place:FEC_PLACE_CEILING,name:"4分屏",type:4,correctList:[{correctType:FEC_CORRECT_PTZ,x:.25,y:.25},{correctType:FEC_CORRECT_PTZ,x:.75,y:.25},{correctType:FEC_CORRECT_PTZ,x:.25,y:.75},{correctType:FEC_CORRECT_PTZ,x:.75,y:.75}],correctType:FEC_CORRECT_PTZ},{place:FEC_PLACE_CEILING,name:"柱状",type:5,correctType:FEC_CORRECT_CYLINDER,viewParam:{x:0,y:0}}];var FEC_PLACE_WALL_CORRECT_TYPE_LIST=[{place:FEC_PLACE_WALL,name:"鱼眼不矫正",type:0,correctType:FEC_CORRECT_NULL},{place:FEC_PLACE_WALL,name:"360°全景",type:1,correctType:FEC_CORRECT_360},{place:FEC_PLACE_WALL,name:"4分屏",type:2,correctList:[{correctType:FEC_CORRECT_PTZ,x:.25,y:.25},{correctType:FEC_CORRECT_PTZ,x:.75,y:.25},{correctType:FEC_CORRECT_PTZ,x:.25,y:.75},{correctType:FEC_CORRECT_PTZ,x:.75,y:.75}],correctType:FEC_CORRECT_PTZ},{place:FEC_PLACE_WALL,name:"广角",type:4,correctType:FEC_CORRECT_ARCSPHERE_HORIZONTAL}];var jsPluginV31_0_0_min={exports:{}};(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal,function(){var commonjsGlobal$1=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof commonjsGlobal!=="undefined"?commonjsGlobal:typeof self!=="undefined"?self:{};function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x}var streamClient1_2_0_min={exports:{}};(function(module,exports){(function webpackUniversalModuleDefinition(root,factory){module.exports=factory()})(window,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&_typeof(value)==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=1)}([function(module,exports){var dbits;function BigInteger(a,b,c){a!=null&&("number"==typeof a?this.fromNumber(a,b,c):b==null&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function nbi(){return new BigInteger(null)}function am3(a,b,c,d,e,g){var h=b&16383;for(b>>=14;--g>=0;){var f=this[a]&16383,o=this[a++]>>14,p=b*f+o*h,f=h*f+((p&16383)<<14)+c[d]+e,e=(f>>28)+(p>>14)+b*o;c[d++]=f&268435455}return e}BigInteger.prototype.am=am3,dbits=28;BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=[],rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(a){return BI_RM.charAt(a)}function intAt(a,b){var c=BI_RC[a.charCodeAt(b)];return c==null?-1:c}function bnpCopyTo(a){for(var b=this.t-1;b>=0;--b)a[b]=this[b];a.t=this.t;a.s=this.s}function bnpFromInt(a){this.t=1;this.s=a<0?-1:0;a>0?this[0]=a:a<-1?this[0]=a+DV:this.t=0}function nbv(a){var b=nbi();b.fromInt(a);return b}function bnpFromString(a,b){var c;if(b==16)c=4;else if(b==8)c=3;else if(b==256)c=8;else if(b==2)c=1;else if(b==32)c=5;else if(b==4)c=2;else{this.fromRadix(a,b);return}this.s=this.t=0;for(var d=a.length,e=!1,g=0;--d>=0;){var h=c==8?a[d]&255:intAt(a,d);h<0?a.charAt(d)=="-"&&(e=!0):(e=!1,g==0?this[this.t++]=h:g+c>this.DB?(this[this.t-1]|=(h&(1<<this.DB-g)-1)<<g,this[this.t++]=h>>this.DB-g):this[this.t-1]|=h<<g,g+=c,g>=this.DB&&(g-=this.DB))}if(c==8&&(a[0]&128)!=0)this.s=-1,g>0&&(this[this.t-1]|=(1<<this.DB-g)-1<<g);this.clamp();e&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t}function bnToString(a){if(this.s<0)return"-"+this.negate().toString(a);if(a==16)a=4;else if(a==8)a=3;else if(a==2)a=1;else if(a==32)a=5;else if(a==64)a=6;else if(a==4)a=2;else return this.toRadix(a);var b=(1<<a)-1,c,d=!1,e="",g=this.t,h=this.DB-g*this.DB%a;if(g-- >0){if(h<this.DB&&(c=this[g]>>h)>0)d=!0,e=int2char(c);for(;g>=0;)h<a?(c=(this[g]&(1<<h)-1)<<a-h,c|=this[--g]>>(h+=this.DB-a)):(c=this[g]>>(h-=a)&b,h<=0&&(h+=this.DB,--g)),c>0&&(d=!0),d&&(e+=int2char(c))}return d?e:"0"}function bnNegate(){var a=nbi();BigInteger.ZERO.subTo(this,a);return a}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var b=this.s-a.s;if(b!=0)return b;var c=this.t,b=c-a.t;if(b!=0)return b;for(;--c>=0;)if((b=this[c]-a[c])!=0)return b;return 0}function nbits(a){var b=1,c;if((c=a>>>16)!=0)a=c,b+=16;if((c=a>>8)!=0)a=c,b+=8;if((c=a>>4)!=0)a=c,b+=4;if((c=a>>2)!=0)a=c,b+=2;a>>1!=0&&(b+=1);return b}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(a,b){var c;for(c=this.t-1;c>=0;--c)b[c+a]=this[c];for(c=a-1;c>=0;--c)b[c]=0;b.t=this.t+a;b.s=this.s}function bnpDRShiftTo(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0);b.s=this.s}function bnpLShiftTo(a,b){var c=a%this.DB,d=this.DB-c,e=(1<<d)-1,g=Math.floor(a/this.DB),h=this.s<<c&this.DM,f;for(f=this.t-1;f>=0;--f)b[f+g+1]=this[f]>>d|h,h=(this[f]&e)<<c;for(f=g-1;f>=0;--f)b[f]=0;b[g]=h;b.t=this.t+g+1;b.s=this.s;b.clamp()}function bnpRShiftTo(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)b.t=0;else{var d=a%this.DB,e=this.DB-d,g=(1<<d)-1;b[0]=this[c]>>d;for(var h=c+1;h<this.t;++h)b[h-c-1]|=(this[h]&g)<<e,b[h-c]=this[h]>>d;d>0&&(b[this.t-c-1]|=(this.s&g)<<e);b.t=this.t-c;b.clamp()}}function bnpSubTo(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=d<0?-1:0;d<-1?b[c++]=this.DV+d:d>0&&(b[c++]=d);b.t=c;b.clamp()}function bnpMultiplyTo(a,b){var c=this.abs(),d=a.abs(),e=c.t;for(b.t=e+d.t;--e>=0;)b[e]=0;for(e=0;e<d.t;++e)b[e+c.t]=c.am(0,d[e],b,e,0,c.t);b.s=0;b.clamp();this.s!=a.s&&BigInteger.ZERO.subTo(b,b)}function bnpSquareTo(a){for(var b=this.abs(),c=a.t=2*b.t;--c>=0;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);if((a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV)a[c+b.t]-=b.DV,a[c+b.t+1]=1}a.t>0&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1));a.s=0;a.clamp()}function bnpDivRemTo(a,b,c){var d=a.abs();if(!(d.t<=0)){var e=this.abs();if(e.t<d.t)b!=null&&b.fromInt(0),c!=null&&this.copyTo(c);else{c==null&&(c=nbi());var g=nbi(),h=this.s,a=a.s,f=this.DB-nbits(d[d.t-1]);f>0?(d.lShiftTo(f,g),e.lShiftTo(f,c)):(d.copyTo(g),e.copyTo(c));d=g.t;e=g[d-1];if(e!=0){var o=e*(1<<this.F1)+(d>1?g[d-2]>>this.F2:0),p=this.FV/o,o=(1<<this.F1)/o,q=1<<this.F2,n=c.t,k=n-d,j=b==null?nbi():b;g.dlShiftTo(k,j);c.compareTo(j)>=0&&(c[c.t++]=1,c.subTo(j,c));BigInteger.ONE.dlShiftTo(d,j);for(j.subTo(g,g);g.t<d;)g[g.t++]=0;for(;--k>=0;){var l=c[--n]==e?this.DM:Math.floor(c[n]*p+(c[n-1]+q)*o);if((c[n]+=g.am(0,l,c,k,0,d))<l){g.dlShiftTo(k,j);for(c.subTo(j,c);c[n]<--l;)c.subTo(j,c)}}b!=null&&(c.drShiftTo(d,b),h!=a&&BigInteger.ZERO.subTo(b,b));c.t=d;c.clamp();f>0&&c.rShiftTo(f,c);h<0&&BigInteger.ZERO.subTo(c,c)}}}}function bnMod(a){var b=nbi();this.abs().divRemTo(a,null,b);this.s<0&&b.compareTo(BigInteger.ZERO)>0&&a.subTo(b,b);return b}function Classic(a){this.m=a}function cConvert(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function cRevert(a){return a}function cReduce(a){a.divRemTo(this.m,null,a)}function cMulTo(a,b,c){a.multiplyTo(b,c);this.reduce(c)}function cSqrTo(a,b){a.squareTo(b);this.reduce(b)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var a=this[0];if((a&1)==0)return 0;var b=a&3,b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV;return b>0?this.DV-b:-b}function Montgomery(a){this.m=a;this.mp=a.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<a.DB-15)-1;this.mt2=2*a.t}function montConvert(a){var b=nbi();a.abs().dlShiftTo(this.m.t,b);b.divRemTo(this.m,null,b);a.s<0&&b.compareTo(BigInteger.ZERO)>0&&this.m.subTo(b,b);return b}function montRevert(a){var b=nbi();a.copyTo(b);this.reduce(b);return b}function montReduce(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=a[b]&32767,d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM,c=b+this.m.t;for(a[c]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp();a.drShiftTo(this.m.t,a);a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function montSqrTo(a,b){a.squareTo(b);this.reduce(b)}function montMulTo(a,b,c){a.multiplyTo(b,c);this.reduce(c)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(a,b){if(a>4294967295||a<1)return BigInteger.ONE;var c=nbi(),d=nbi(),e=b.convert(this),g=nbits(a)-1;for(e.copyTo(c);--g>=0;)if(b.sqrTo(c,d),(a&1<<g)>0)b.mulTo(d,e,c);else var h=c,c=d,d=h;return b.revert(c)}function bnModPowInt(a,b){var c;c=a<256||b.isEven()?new Classic(b):new Montgomery(b);return this.exp(a,c)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var a=nbi();this.copyTo(a);return a}function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else{if(this.t==0)return-1}}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(a){return Math.floor(Math.LN2*this.DB/Math.log(a))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function bnpToRadix(a){a==null&&(a=10);if(this.signum()==0||a<2||a>36)return"0";var b=this.chunkSize(a),b=Math.pow(a,b),c=nbv(b),d=nbi(),e=nbi(),g="";for(this.divRemTo(c,d,e);d.signum()>0;)g=(b+e.intValue()).toString(a).substr(1)+g,d.divRemTo(c,d,e);return e.intValue().toString(a)+g}function bnpFromRadix(a,b){this.fromInt(0);b==null&&(b=10);for(var c=this.chunkSize(b),d=Math.pow(b,c),e=!1,g=0,h=0,f=0;f<a.length;++f){var o=intAt(a,f);o<0?a.charAt(f)=="-"&&this.signum()==0&&(e=!0):(h=b*h+o,++g>=c&&(this.dMultiply(d),this.dAddOffset(h,0),h=g=0))}g>0&&(this.dMultiply(Math.pow(b,g)),this.dAddOffset(h,0));e&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(a,b,c){if("number"==typeof b){if(a<2)this.fromInt(1);else{this.fromNumber(a,c);this.testBit(a-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);for(this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(BigInteger.ONE.shiftLeft(a-1),this)}}else{var c=[],d=a&7;c.length=(a>>3)+1;b.nextBytes(c);d>0?c[0]&=(1<<d)-1:c[0]=0;this.fromString(c,256)}}function bnToByteArray(){var a=this.t,b=[];b[0]=this.s;var c=this.DB-a*this.DB%8,d,e=0;if(a-- >0){if(c<this.DB&&(d=this[a]>>c)!=(this.s&this.DM)>>c)b[e++]=d|this.s<<this.DB-c;for(;a>=0;)if(c<8?(d=(this[a]&(1<<c)-1)<<8-c,d|=this[--a]>>(c+=this.DB-8)):(d=this[a]>>(c-=8)&255,c<=0&&(c+=this.DB,--a)),(d&128)!=0&&(d|=-256),e==0&&(this.s&128)!=(d&128)&&++e,e>0||d!=this.s)b[e++]=d}return b}function bnEquals(a){return this.compareTo(a)==0}function bnMin(a){return this.compareTo(a)<0?this:a}function bnMax(a){return this.compareTo(a)>0?this:a}function bnpBitwiseTo(a,b,c){var d,e,g=Math.min(a.t,this.t);for(d=0;d<g;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){e=a.s&this.DM;for(d=g;d<this.t;++d)c[d]=b(this[d],e);c.t=this.t}else{e=this.s&this.DM;for(d=g;d<a.t;++d)c[d]=b(e,a[d]);c.t=a.t}c.s=b(this.s,a.s);c.clamp()}function op_and(a,b){return a&b}function bnAnd(a){var b=nbi();this.bitwiseTo(a,op_and,b);return b}function op_or(a,b){return a|b}function bnOr(a){var b=nbi();this.bitwiseTo(a,op_or,b);return b}function op_xor(a,b){return a^b}function bnXor(a){var b=nbi();this.bitwiseTo(a,op_xor,b);return b}function op_andnot(a,b){return a&~b}function bnAndNot(a){var b=nbi();this.bitwiseTo(a,op_andnot,b);return b}function bnNot(){for(var a=nbi(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];a.t=this.t;a.s=~this.s;return a}function bnShiftLeft(a){var b=nbi();a<0?this.rShiftTo(-a,b):this.lShiftTo(a,b);return b}function bnShiftRight(a){var b=nbi();a<0?this.lShiftTo(-a,b):this.rShiftTo(a,b);return b}function lbit(a){if(a==0)return-1;var b=0;(a&65535)==0&&(a>>=16,b+=16);(a&255)==0&&(a>>=8,b+=8);(a&15)==0&&(a>>=4,b+=4);(a&3)==0&&(a>>=2,b+=2);(a&1)==0&&++b;return b}function bnGetLowestSetBit(){for(var a=0;a<this.t;++a)if(this[a]!=0)return a*this.DB+lbit(this[a]);return this.s<0?this.t*this.DB:-1}function cbit(a){for(var b=0;a!=0;)a&=a-1,++b;return b}function bnBitCount(){for(var a=0,b=this.s&this.DM,c=0;c<this.t;++c)a+=cbit(this[c]^b);return a}function bnTestBit(a){var b=Math.floor(a/this.DB);return b>=this.t?this.s!=0:(this[b]&1<<a%this.DB)!=0}function bnpChangeBit(a,b){var c=BigInteger.ONE.shiftLeft(a);this.bitwiseTo(c,b,c);return c}function bnSetBit(a){return this.changeBit(a,op_or)}function bnClearBit(a){return this.changeBit(a,op_andnot)}function bnFlipBit(a){return this.changeBit(a,op_xor)}function bnpAddTo(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this[c]+a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d+=a[c],b[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=d<0?-1:0;d>0?b[c++]=d:d<-1&&(b[c++]=this.DV+d);b.t=c;b.clamp()}function bnAdd(a){var b=nbi();this.addTo(a,b);return b}function bnSubtract(a){var b=nbi();this.subTo(a,b);return b}function bnMultiply(a){var b=nbi();this.multiplyTo(a,b);return b}function bnSquare(){var a=nbi();this.squareTo(a);return a}function bnDivide(a){var b=nbi();this.divRemTo(a,b,null);return b}function bnRemainder(a){var b=nbi();this.divRemTo(a,null,b);return b}function bnDivideAndRemainder(a){var b=nbi(),c=nbi();this.divRemTo(a,b,c);return[b,c]}function bnpDMultiply(a){this[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this.clamp()}function bnpDAddOffset(a,b){if(a!=0){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}}function NullExp(){}function nNop(a){return a}function nMulTo(a,b,c){a.multiplyTo(b,c)}function nSqrTo(a,b){a.squareTo(b)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(a){return this.exp(a,new NullExp)}function bnpMultiplyLowerTo(a,b,c){var d=Math.min(this.t+a.t,b);c.s=0;for(c.t=d;d>0;)c[--d]=0;var e;for(e=c.t-this.t;d<e;++d)c[d+this.t]=this.am(0,a[d],c,d,0,this.t);for(e=Math.min(a.t,b);d<e;++d)this.am(0,a[d],c,d,0,b-d);c.clamp()}function bnpMultiplyUpperTo(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;--d>=0;)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c.clamp();c.drShiftTo(1,c)}function Barrett(a){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*a.t,this.r2);this.mu=this.r2.divide(a);this.m=a}function barrettConvert(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);else if(a.compareTo(this.m)<0)return a;else{var b=nbi();a.copyTo(b);this.reduce(b);return b}}function barrettRevert(a){return a}function barrettReduce(a){a.drShiftTo(this.m.t-1,this.r2);if(a.t>this.m.t+1)a.t=this.m.t+1,a.clamp();this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)}function barrettSqrTo(a,b){a.squareTo(b);this.reduce(b)}function barrettMulTo(a,b,c){a.multiplyTo(b,c);this.reduce(c)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(a,b){var c=a.bitLength(),d,e=nbv(1),g;if(c<=0)return e;else d=c<18?1:c<48?3:c<144?4:c<768?5:6;g=c<8?new Classic(b):b.isEven()?new Barrett(b):new Montgomery(b);var h=[],f=3,o=d-1,p=(1<<d)-1;h[1]=g.convert(this);if(d>1){c=nbi();for(g.sqrTo(h[1],c);f<=p;)h[f]=nbi(),g.mulTo(c,h[f-2],h[f]),f+=2}for(var q=a.t-1,n,k=!0,j=nbi(),c=nbits(a[q])-1;q>=0;){c>=o?n=a[q]>>c-o&p:(n=(a[q]&(1<<c+1)-1)<<o-c,q>0&&(n|=a[q-1]>>this.DB+c-o));for(f=d;(n&1)==0;)n>>=1,--f;if((c-=f)<0)c+=this.DB,--q;if(k)h[n].copyTo(e),k=!1;else{for(;f>1;)g.sqrTo(e,j),g.sqrTo(j,e),f-=2;f>0?g.sqrTo(e,j):(f=e,e=j,j=f);g.mulTo(j,h[n],e)}for(;q>=0&&(a[q]&1<<c)==0;)g.sqrTo(e,j),f=e,e=j,j=f,--c<0&&(c=this.DB-1,--q)}return g.revert(e)}function bnGCD(a){var b=this.s<0?this.negate():this.clone(),a=a.s<0?a.negate():a.clone();if(b.compareTo(a)<0)var c=b,b=a,a=c;var c=b.getLowestSetBit(),d=a.getLowestSetBit();if(d<0)return b;c<d&&(d=c);d>0&&(b.rShiftTo(d,b),a.rShiftTo(d,a));for(;b.signum()>0;)(c=b.getLowestSetBit())>0&&b.rShiftTo(c,b),(c=a.getLowestSetBit())>0&&a.rShiftTo(c,a),b.compareTo(a)>=0?(b.subTo(a,b),b.rShiftTo(1,b)):(a.subTo(b,a),a.rShiftTo(1,a));d>0&&a.lShiftTo(d,a);return a}function bnpModInt(a){if(a<=0)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0)if(b==0)c=this[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this[d])%a;return c}function bnModInverse(a){var b=a.isEven();if(this.isEven()&&b||a.signum()==0)return BigInteger.ZERO;for(var c=a.clone(),d=this.clone(),e=nbv(1),g=nbv(0),h=nbv(0),f=nbv(1);c.signum()!=0;){for(;c.isEven();){c.rShiftTo(1,c);if(b){if(!e.isEven()||!g.isEven())e.addTo(this,e),g.subTo(a,g);e.rShiftTo(1,e)}else g.isEven()||g.subTo(a,g);g.rShiftTo(1,g)}for(;d.isEven();){d.rShiftTo(1,d);if(b){if(!h.isEven()||!f.isEven())h.addTo(this,h),f.subTo(a,f);h.rShiftTo(1,h)}else f.isEven()||f.subTo(a,f);f.rShiftTo(1,f)}c.compareTo(d)>=0?(c.subTo(d,c),b&&e.subTo(h,e),g.subTo(f,g)):(d.subTo(c,d),b&&h.subTo(e,h),f.subTo(g,f))}if(d.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(f.compareTo(a)>=0)return f.subtract(a);if(f.signum()<0)f.addTo(a,f);else return f;return f.signum()<0?f.add(a):f}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=67108864/lowprimes[lowprimes.length-1];function bnIsProbablePrime(a){var b,c=this.abs();if(c.t==1&&c[0]<=lowprimes[lowprimes.length-1]){for(b=0;b<lowprimes.length;++b)if(c[0]==lowprimes[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<lowprimes.length;){for(var d=lowprimes[b],e=b+1;e<lowprimes.length&&d<lplim;)d*=lowprimes[e++];for(d=c.modInt(d);b<e;)if(d%lowprimes[b++]==0)return!1}return c.millerRabin(a)}function bnpMillerRabin(a){var b=this.subtract(BigInteger.ONE),c=b.getLowestSetBit();if(c<=0)return!1;var d=b.shiftRight(c),a=a+1>>1;if(a>lowprimes.length)a=lowprimes.length;for(var e=nbi(),g=0;g<a;++g){e.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var h=e.modPow(d,this);if(h.compareTo(BigInteger.ONE)!=0&&h.compareTo(b)!=0){for(var f=1;f++<c&&h.compareTo(b)!=0;)if(h=h.modPowInt(2,this),h.compareTo(BigInteger.ONE)==0)return!1;if(h.compareTo(b)!=0)return!1}}return!0}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;BigInteger.prototype.square=bnSquare;(function(a,b,c,d,e,g,h){function f(a){var b,d,e=this,g=a.length,f=0,h=e.i=e.j=e.m=0;e.S=[];e.c=[];for(g||(a=[g++]);f<c;)e.S[f]=f++;for(f=0;f<c;f++)b=e.S[f],h=h+b+a[f%g]&c-1,d=e.S[h],e.S[f]=d,e.S[h]=b;e.g=function(a){var b=e.S,d=e.i+1&c-1,g=b[d],f=e.j+g&c-1,h=b[f];b[d]=h;b[f]=g;for(var k=b[g+h&c-1];--a;)d=d+1&c-1,g=b[d],f=f+g&c-1,h=b[f],b[d]=h,b[f]=g,k=k*c+b[g+h&c-1];e.i=d;e.j=f;return k};e.g(c)}function o(a,b,c,d,e){c=[];e=_typeof(a);if(b&&e=="object")for(d in a)if(d.indexOf("S")<5)try{c.push(o(a[d],b-1))}catch(g){}return c.length?c:a+(e!="string"?"\0":"")}function p(a,b,d,e){a+="";for(e=d=0;e<a.length;e++){var g=b,f=e&c-1,h=(d^=b[e&c-1]*19)+a.charCodeAt(e);g[f]=h&c-1}a="";for(e in b)a+=String.fromCharCode(b[e]);return a}b.seedrandom=function(q,n){var k=[],j,q=p(o(n?[q,a]:arguments.length?q:[(new Date).getTime(),a,window],3),k);j=new f(k);p(j.S,a);b.random=function(){for(var a=j.g(d),b=h,f=0;a<e;)a=(a+f)*c,b*=c,f=j.g(1);for(;a>=g;)a/=2,b/=2,f>>>=1;return(a+f)/b};return q};h=b.pow(c,d);e=b.pow(2,e);g=e*2;p(b.random(),a)})([],Math,256,6,52);function SeededRandom(){}function SRnextBytes(a){var b;for(b=0;b<a.length;b++)a[b]=Math.floor(Math.random()*256)}SeededRandom.prototype.nextBytes=SRnextBytes;function Arcfour(){this.j=this.i=0;this.S=[]}function ARC4init(a){var b,c,d;for(b=0;b<256;++b)this.S[b]=b;for(b=c=0;b<256;++b)c=c+this.S[b]+a[b%a.length]&255,d=this.S[b],this.S[b]=this.S[c],this.S[c]=d;this.j=this.i=0}function ARC4next(){var a;this.i=this.i+1&255;this.j=this.j+this.S[this.i]&255;a=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=a;return this.S[a+this.S[this.i]&255]}Arcfour.prototype.init=ARC4init;Arcfour.prototype.next=ARC4next;function prng_newstate(){return new Arcfour}var rng_psize=256,rng_state,rng_pool,rng_pptr;function rng_seed_int(a){rng_pool[rng_pptr++]^=a&255;rng_pool[rng_pptr++]^=a>>8&255;rng_pool[rng_pptr++]^=a>>16&255;rng_pool[rng_pptr++]^=a>>24&255;rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(rng_pool==null){rng_pool=[];rng_pptr=0;var t;for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=t&255;rng_pptr=0;rng_seed_time()}function rng_get_byte(){if(rng_state==null){rng_seed_time();rng_state=prng_newstate();rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(a){var b;for(b=0;b<a.length;++b)a[b]=rng_get_byte()}function SecureRandom(){}SecureRandom.prototype.nextBytes=rng_get_bytes;function SHA256(a){function b(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535}function c(a,b){return a>>>b|a<<32-b}a=function(a){for(var a=a.replace(/\r\n/g,"\n"),b="",c=0;c<a.length;c++){var h=a.charCodeAt(c);h<128?b+=String.fromCharCode(h):(h>127&&h<2048?b+=String.fromCharCode(h>>6|192):(b+=String.fromCharCode(h>>12|224),b+=String.fromCharCode(h>>6&63|128)),b+=String.fromCharCode(h&63|128))}return b}(a);return function(a){for(var b="",c=0;c<a.length*4;c++)b+="0123456789abcdef".charAt(a[c>>2]>>(3-c%4)*8+4&15)+"0123456789abcdef".charAt(a[c>>2]>>(3-c%4)*8&15);return b}(function(a,e){var g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],f=Array(64),o,p,q,n,k,j,l,m,s,r,u,w;a[e>>5]|=128<<24-e%32;a[(e+64>>9<<4)+15]=e;for(s=0;s<a.length;s+=16){o=h[0];p=h[1];q=h[2];n=h[3];k=h[4];j=h[5];l=h[6];m=h[7];for(r=0;r<64;r++)f[r]=r<16?a[r+s]:b(b(b(c(f[r-2],17)^c(f[r-2],19)^f[r-2]>>>10,f[r-7]),c(f[r-15],7)^c(f[r-15],18)^f[r-15]>>>3),f[r-16]),u=b(b(b(b(m,c(k,6)^c(k,11)^c(k,25)),k&j^~k&l),g[r]),f[r]),w=b(c(o,2)^c(o,13)^c(o,22),o&p^o&q^p&q),m=l,l=j,j=k,k=b(n,u),n=q,q=p,p=o,o=b(u,w);h[0]=b(o,h[0]);h[1]=b(p,h[1]);h[2]=b(q,h[2]);h[3]=b(n,h[3]);h[4]=b(k,h[4]);h[5]=b(j,h[5]);h[6]=b(l,h[6]);h[7]=b(m,h[7])}return h}(function(a){for(var b=[],c=0;c<a.length*8;c+=8)b[c>>5]|=(a.charCodeAt(c/8)&255)<<24-c%32;return b}(a),a.length*8))}var sha256={hex:function hex(a){return SHA256(a)}};function SHA1(a){function b(a,b){return a<<b|a>>>32-b}function c(a){var b="",c,d;for(c=7;c>=0;c--)d=a>>>c*4&15,b+=d.toString(16);return b}var d,e,g=Array(80),h=1732584193,f=4023233417,o=2562383102,p=271733878,q=3285377520,n,k,j,l,m,a=function(a){for(var a=a.replace(/\r\n/g,"\n"),b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):(d>127&&d<2048?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b}(a);n=a.length;var s=[];for(d=0;d<n-3;d+=4)e=a.charCodeAt(d)<<24|a.charCodeAt(d+1)<<16|a.charCodeAt(d+2)<<8|a.charCodeAt(d+3),s.push(e);switch(n%4){case 0:d=2147483648;break;case 1:d=a.charCodeAt(n-1)<<24|8388608;break;case 2:d=a.charCodeAt(n-2)<<24|a.charCodeAt(n-1)<<16|32768;break;case 3:d=a.charCodeAt(n-3)<<24|a.charCodeAt(n-2)<<16|a.charCodeAt(n-1)<<8|128}for(s.push(d);s.length%16!=14;)s.push(0);s.push(n>>>29);s.push(n<<3&4294967295);for(a=0;a<s.length;a+=16){for(d=0;d<16;d++)g[d]=s[a+d];for(d=16;d<=79;d++)g[d]=b(g[d-3]^g[d-8]^g[d-14]^g[d-16],1);e=h;n=f;k=o;j=p;l=q;for(d=0;d<=19;d++)m=b(e,5)+(n&k|~n&j)+l+g[d]+1518500249&4294967295,l=j,j=k,k=b(n,30),n=e,e=m;for(d=20;d<=39;d++)m=b(e,5)+(n^k^j)+l+g[d]+1859775393&4294967295,l=j,j=k,k=b(n,30),n=e,e=m;for(d=40;d<=59;d++)m=b(e,5)+(n&k|n&j|k&j)+l+g[d]+2400959708&4294967295,l=j,j=k,k=b(n,30),n=e,e=m;for(d=60;d<=79;d++)m=b(e,5)+(n^k^j)+l+g[d]+3395469782&4294967295,l=j,j=k,k=b(n,30),n=e,e=m;h=h+e&4294967295;f=f+n&4294967295;o=o+k&4294967295;p=p+j&4294967295;q=q+l&4294967295}m=c(h)+c(f)+c(o)+c(p)+c(q);return m.toLowerCase()}var sha1={hex:function hex(a){return SHA1(a)}},MD5=function MD5(a){function b(a,b){var c,d,e,f,g;e=a&2147483648;f=b&2147483648;c=a&1073741824;d=b&1073741824;g=(a&1073741823)+(b&1073741823);return c&d?g^2147483648^e^f:c|d?g&1073741824?g^3221225472^e^f:g^1073741824^e^f:g^e^f}function c(a,c,d,e,f,g,h){a=b(a,b(b(c&d|~c&e,f),h));return b(a<<g|a>>>32-g,c)}function d(a,c,d,e,f,g,h){a=b(a,b(b(c&e|d&~e,f),h));return b(a<<g|a>>>32-g,c)}function e(a,c,d,e,f,g,h){a=b(a,b(b(c^d^e,f),h));return b(a<<g|a>>>32-g,c)}function g(a,c,d,e,f,g,h){a=b(a,b(b(d^(c|~e),f),h));return b(a<<g|a>>>32-g,c)}function h(a){var b="",c="",d;for(d=0;d<=3;d++)c=a>>>d*8&255,c="0"+c.toString(16),b+=c.substr(c.length-2,2);return b}var f=[],o,p,q,n,k,j,l,m,a=function(a){for(var a=a.replace(/\r\n/g,"\n"),b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):(d>127&&d<2048?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b}(a),f=function(a){var b,c=a.length;b=c+8;for(var d=((b-b%64)/64+1)*16,e=Array(d-1),f=0,g=0;g<c;)b=(g-g%4)/4,f=g%4*8,e[b]|=a.charCodeAt(g)<<f,g++;e[(g-g%4)/4]|=128<<g%4*8;e[d-2]=c<<3;e[d-1]=c>>>29;return e}(a);k=1732584193;j=4023233417;l=2562383102;m=271733878;for(a=0;a<f.length;a+=16)o=k,p=j,q=l,n=m,k=c(k,j,l,m,f[a+0],7,3614090360),m=c(m,k,j,l,f[a+1],12,3905402710),l=c(l,m,k,j,f[a+2],17,606105819),j=c(j,l,m,k,f[a+3],22,3250441966),k=c(k,j,l,m,f[a+4],7,4118548399),m=c(m,k,j,l,f[a+5],12,1200080426),l=c(l,m,k,j,f[a+6],17,2821735955),j=c(j,l,m,k,f[a+7],22,4249261313),k=c(k,j,l,m,f[a+8],7,1770035416),m=c(m,k,j,l,f[a+9],12,2336552879),l=c(l,m,k,j,f[a+10],17,4294925233),j=c(j,l,m,k,f[a+11],22,2304563134),k=c(k,j,l,m,f[a+12],7,1804603682),m=c(m,k,j,l,f[a+13],12,4254626195),l=c(l,m,k,j,f[a+14],17,2792965006),j=c(j,l,m,k,f[a+15],22,1236535329),k=d(k,j,l,m,f[a+1],5,4129170786),m=d(m,k,j,l,f[a+6],9,3225465664),l=d(l,m,k,j,f[a+11],14,643717713),j=d(j,l,m,k,f[a+0],20,3921069994),k=d(k,j,l,m,f[a+5],5,3593408605),m=d(m,k,j,l,f[a+10],9,38016083),l=d(l,m,k,j,f[a+15],14,3634488961),j=d(j,l,m,k,f[a+4],20,3889429448),k=d(k,j,l,m,f[a+9],5,568446438),m=d(m,k,j,l,f[a+14],9,3275163606),l=d(l,m,k,j,f[a+3],14,4107603335),j=d(j,l,m,k,f[a+8],20,1163531501),k=d(k,j,l,m,f[a+13],5,2850285829),m=d(m,k,j,l,f[a+2],9,4243563512),l=d(l,m,k,j,f[a+7],14,1735328473),j=d(j,l,m,k,f[a+12],20,2368359562),k=e(k,j,l,m,f[a+5],4,4294588738),m=e(m,k,j,l,f[a+8],11,2272392833),l=e(l,m,k,j,f[a+11],16,1839030562),j=e(j,l,m,k,f[a+14],23,4259657740),k=e(k,j,l,m,f[a+1],4,2763975236),m=e(m,k,j,l,f[a+4],11,1272893353),l=e(l,m,k,j,f[a+7],16,4139469664),j=e(j,l,m,k,f[a+10],23,3200236656),k=e(k,j,l,m,f[a+13],4,681279174),m=e(m,k,j,l,f[a+0],11,3936430074),l=e(l,m,k,j,f[a+3],16,3572445317),j=e(j,l,m,k,f[a+6],23,76029189),k=e(k,j,l,m,f[a+9],4,3654602809),m=e(m,k,j,l,f[a+12],11,3873151461),l=e(l,m,k,j,f[a+15],16,530742520),j=e(j,l,m,k,f[a+2],23,3299628645),k=g(k,j,l,m,f[a+0],6,4096336452),m=g(m,k,j,l,f[a+7],10,1126891415),l=g(l,m,k,j,f[a+14],15,2878612391),j=g(j,l,m,k,f[a+5],21,4237533241),k=g(k,j,l,m,f[a+12],6,1700485571),m=g(m,k,j,l,f[a+3],10,2399980690),l=g(l,m,k,j,f[a+10],15,4293915773),j=g(j,l,m,k,f[a+1],21,2240044497),k=g(k,j,l,m,f[a+8],6,1873313359),m=g(m,k,j,l,f[a+15],10,4264355552),l=g(l,m,k,j,f[a+6],15,2734768916),j=g(j,l,m,k,f[a+13],21,1309151649),k=g(k,j,l,m,f[a+4],6,4149444226),m=g(m,k,j,l,f[a+11],10,3174756917),l=g(l,m,k,j,f[a+2],15,718787259),j=g(j,l,m,k,f[a+9],21,3951481745),k=b(k,o),j=b(j,p),l=b(l,q),m=b(m,n);return(h(k)+h(j)+h(l)+h(m)).toLowerCase()};function parseBigInt(a,b){return new BigInteger(a,b)}function pkcs1pad2(a,b){if(b<a.length+11)throw"Message too long for RSA (n="+b+", l="+a.length+")";for(var c=[],d=a.length-1;d>=0&&b>0;){var e=a.charCodeAt(d--);e<128?c[--b]=e:e>127&&e<2048?(c[--b]=e&63|128,c[--b]=e>>6|192):(c[--b]=e&63|128,c[--b]=e>>6&63|128,c[--b]=e>>12|224)}c[--b]=0;d=new SecureRandom;for(e=[];b>2;){for(e[0]=0;e[0]==0;)d.nextBytes(e);c[--b]=e[0]}c[--b]=2;c[--b]=0;return new BigInteger(c)}function RSAKey(){this.n=null;this.e=0;this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}function RSASetPublic(a,b){a!=null&&b!=null&&a.length>0&&b.length>0?(this.n=parseBigInt(a,16),this.e=parseInt(b,16)):alert("Invalid RSA public key")}function RSADoPublic(a){return a.modPowInt(this.e,this.n)}function RSAEncrypt(a){a=pkcs1pad2(a,this.n.bitLength()+7>>3);if(a==null)return null;a=this.doPublic(a);if(a==null)return null;a=a.toString(16);return(a.length&1)==0?a:"0"+a}RSAKey.prototype.doPublic=RSADoPublic;RSAKey.prototype.setPublic=RSASetPublic;RSAKey.prototype.encrypt=RSAEncrypt;function pkcs1unpad2(a,b){for(var c=a.toByteArray(),d=0;d<c.length&&c[d]==0;)++d;if(c.length-d!=b-1||c[d]!=2)return null;for(++d;c[d]!=0;)if(++d>=c.length)return null;for(var e="";++d<c.length;){var g=c[d]&255;g<128?e+=String.fromCharCode(g):g>191&&g<224?(e+=String.fromCharCode((g&31)<<6|c[d+1]&63),++d):(e+=String.fromCharCode((g&15)<<12|(c[d+1]&63)<<6|c[d+2]&63),d+=2)}return e}function RSASetPrivate(a,b,c){a!=null&&b!=null&&a.length>0&&b.length>0?(this.n=parseBigInt(a,16),this.e=parseInt(b,16),this.d=parseBigInt(c,16)):alert("Invalid RSA private key")}function RSASetPrivateEx(a,b,c,d,e,g,h,f){a!=null&&b!=null&&a.length>0&&b.length>0?(this.n=parseBigInt(a,16),this.e=parseInt(b,16),this.d=parseBigInt(c,16),this.p=parseBigInt(d,16),this.q=parseBigInt(e,16),this.dmp1=parseBigInt(g,16),this.dmq1=parseBigInt(h,16),this.coeff=parseBigInt(f,16)):alert("Invalid RSA private key")}function RSAGenerate(a,b){var c=new SeededRandom,d=a>>1;this.e=parseInt(b,16);for(var e=new BigInteger(b,16);;){for(;;)if(this.p=new BigInteger(a-d,1,c),this.p.subtract(BigInteger.ONE).gcd(e).compareTo(BigInteger.ONE)==0&&this.p.isProbablePrime(10))break;for(;;)if(this.q=new BigInteger(d,1,c),this.q.subtract(BigInteger.ONE).gcd(e).compareTo(BigInteger.ONE)==0&&this.q.isProbablePrime(10))break;if(this.p.compareTo(this.q)<=0){var g=this.p;this.p=this.q;this.q=g}var g=this.p.subtract(BigInteger.ONE),h=this.q.subtract(BigInteger.ONE),f=g.multiply(h);if(f.gcd(e).compareTo(BigInteger.ONE)==0){this.n=this.p.multiply(this.q);this.d=e.modInverse(f);this.dmp1=this.d.mod(g);this.dmq1=this.d.mod(h);this.coeff=this.q.modInverse(this.p);break}}}function RSADoPrivate(a){if(this.p==null||this.q==null)return a.modPow(this.d,this.n);for(var b=a.mod(this.p).modPow(this.dmp1,this.p),a=a.mod(this.q).modPow(this.dmq1,this.q);b.compareTo(a)<0;)b=b.add(this.p);return b.subtract(a).multiply(this.coeff).mod(this.p).multiply(this.q).add(a)}function RSADecrypt(a){a=this.doPrivate(parseBigInt(a,16));return a==null?null:pkcs1unpad2(a,this.n.bitLength()+7>>3)}RSAKey.prototype.doPrivate=RSADoPrivate;RSAKey.prototype.setPrivate=RSASetPrivate;RSAKey.prototype.setPrivateEx=RSASetPrivateEx;RSAKey.prototype.generate=RSAGenerate;RSAKey.prototype.decrypt=RSADecrypt;var _RSASIGN_DIHEAD=[];_RSASIGN_DIHEAD.sha1="3021300906052b0e03021a05000414";_RSASIGN_DIHEAD.sha256="3031300d060960864801650304020105000420";var _RSASIGN_HASHHEXFUNC=[];_RSASIGN_HASHHEXFUNC.sha1=sha1.hex;_RSASIGN_HASHHEXFUNC.sha256=sha256.hex;function _rsasign_getHexPaddedDigestInfoForString(a,b,c){b/=4;for(var a=(0,_RSASIGN_HASHHEXFUNC[c])(a),c="00"+_RSASIGN_DIHEAD[c]+a,a="",b=b-4-c.length,d=0;d<b;d+=2)a+="ff";return sPaddedMessageHex="0001"+a+c}function _rsasign_signString(a,b){var c=_rsasign_getHexPaddedDigestInfoForString(a,this.n.bitLength(),b);return this.doPrivate(parseBigInt(c,16)).toString(16)}function _rsasign_signStringWithSHA1(a){a=_rsasign_getHexPaddedDigestInfoForString(a,this.n.bitLength(),"sha1");return this.doPrivate(parseBigInt(a,16)).toString(16)}function _rsasign_signStringWithSHA256(a){a=_rsasign_getHexPaddedDigestInfoForString(a,this.n.bitLength(),"sha256");return this.doPrivate(parseBigInt(a,16)).toString(16)}function _rsasign_getDecryptSignatureBI(a,b,c){var d=new RSAKey;d.setPublic(b,c);return d.doPublic(a)}function _rsasign_getHexDigestInfoFromSig(a,b,c){return _rsasign_getDecryptSignatureBI(a,b,c).toString(16).replace(/^1f+00/,"")}function _rsasign_getAlgNameAndHashFromHexDisgestInfo(a){for(var b in _RSASIGN_DIHEAD){var c=_RSASIGN_DIHEAD[b],d=c.length;if(a.substring(0,d)==c)return[b,a.substring(d)]}return[]}function _rsasign_verifySignatureWithArgs(a,b,c,d){b=_rsasign_getHexDigestInfoFromSig(b,c,d);c=_rsasign_getAlgNameAndHashFromHexDisgestInfo(b);if(c.length==0)return!1;b=c[1];a=(0,_RSASIGN_HASHHEXFUNC[c[0]])(a);return b==a}function _rsasign_verifyHexSignatureForMessage(a,b){var c=parseBigInt(a,16);return _rsasign_verifySignatureWithArgs(b,c,this.n.toString(16),this.e.toString(16))}function _rsasign_verifyString(a,b){var b=b.replace(/[ \n]+/g,""),c=this.doPublic(parseBigInt(b,16)).toString(16).replace(/^1f+00/,""),d=_rsasign_getAlgNameAndHashFromHexDisgestInfo(c);if(d.length==0)return!1;c=d[1];d=(0,_RSASIGN_HASHHEXFUNC[d[0]])(a);return c==d}RSAKey.prototype.signString=_rsasign_signString;RSAKey.prototype.signStringWithSHA1=_rsasign_signStringWithSHA1;RSAKey.prototype.signStringWithSHA256=_rsasign_signStringWithSHA256;RSAKey.prototype.verifyString=_rsasign_verifyString;RSAKey.prototype.verifyHexSignatureForMessage=_rsasign_verifyHexSignatureForMessage;var aes=function(){var a={Sbox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ShiftRowTab:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11]};a.Init=function(){a.Sbox_Inv=Array(256);for(var b=0;b<256;b++)a.Sbox_Inv[a.Sbox[b]]=b;a.ShiftRowTab_Inv=Array(16);for(b=0;b<16;b++)a.ShiftRowTab_Inv[a.ShiftRowTab[b]]=b;a.xtime=Array(256);for(b=0;b<128;b++)a.xtime[b]=b<<1,a.xtime[128+b]=b<<1^27};a.Done=function(){delete a.Sbox_Inv;delete a.ShiftRowTab_Inv;delete a.xtime};a.ExpandKey=function(b){var c=b.length,d,e=1;switch(c){case 16:d=176;break;case 24:d=208;break;case 32:d=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var g=c;g<d;g+=4){var h=b.slice(g-4,g);if(g%c==0){if(h=[a.Sbox[h[1]]^e,a.Sbox[h[2]],a.Sbox[h[3]],a.Sbox[h[0]]],(e<<=1)>=256)e^=283}else c>24&&g%c==16&&(h=[a.Sbox[h[0]],a.Sbox[h[1]],a.Sbox[h[2]],a.Sbox[h[3]]]);for(var f=0;f<4;f++)b[g+f]=b[g+f-c]^h[f]}};a.Encrypt=function(b,c){var d=c.length;a.AddRoundKey(b,c.slice(0,16));for(var e=16;e<d-16;e+=16)a.SubBytes(b,a.Sbox),a.ShiftRows(b,a.ShiftRowTab),a.MixColumns(b),a.AddRoundKey(b,c.slice(e,e+16));a.SubBytes(b,a.Sbox);a.ShiftRows(b,a.ShiftRowTab);a.AddRoundKey(b,c.slice(e,d))};a.Decrypt=function(b,c){var d=c.length;a.AddRoundKey(b,c.slice(d-16,d));a.ShiftRows(b,a.ShiftRowTab_Inv);a.SubBytes(b,a.Sbox_Inv);for(d-=32;d>=16;d-=16)a.AddRoundKey(b,c.slice(d,d+16)),a.MixColumns_Inv(b),a.ShiftRows(b,a.ShiftRowTab_Inv),a.SubBytes(b,a.Sbox_Inv);a.AddRoundKey(b,c.slice(0,16))};a.SubBytes=function(a,c){for(var d=0;d<16;d++)a[d]=c[a[d]]};a.AddRoundKey=function(a,c){for(var d=0;d<16;d++)a[d]^=c[d]};a.ShiftRows=function(a,c){for(var d=[].concat(a),e=0;e<16;e++)a[e]=d[c[e]]};a.MixColumns=function(b){for(var c=0;c<16;c+=4){var d=b[c+0],e=b[c+1],g=b[c+2],h=b[c+3],f=d^e^g^h;b[c+0]^=f^a.xtime[d^e];b[c+1]^=f^a.xtime[e^g];b[c+2]^=f^a.xtime[g^h];b[c+3]^=f^a.xtime[h^d]}};a.MixColumns_Inv=function(b){for(var c=0;c<16;c+=4){var d=b[c+0],e=b[c+1],g=b[c+2],h=b[c+3],f=d^e^g^h,o=a.xtime[f],p=a.xtime[a.xtime[o^d^g]]^f;f^=a.xtime[a.xtime[o^e^h]];b[c+0]^=p^a.xtime[d^e];b[c+1]^=f^a.xtime[e^g];b[c+2]^=p^a.xtime[g^h];b[c+3]^=f^a.xtime[h^d]}};return a}(),cryptico=function(){var a={};aes.Init();a.b256to64=function(a){var c,d,e,g="",f=0,o=a.length;for(e=0;e<o;e++)d=a.charCodeAt(e),f==0?(g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>2&63),c=(d&3)<<4):f==1?(g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c|d>>4&15),c=(d&15)<<2):f==2&&(g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c|d>>6&3),g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d&63)),f+=1,f==3&&(f=0);f>0&&(g+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c),g+="=");f==1&&(g+="=");return g};a.b64to256=function(a){var c,d,e="",g=0,h=0,f=a.length;for(d=0;d<f;d++)c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(d)),c>=0&&(g&&(e+=String.fromCharCode(h|c>>6-g&255)),g=g+2&7,h=c<<g&255);return e};a.b16to64=function(a){var c,d,e="";a.length%2==1&&(a="0"+a);for(c=0;c+3<=a.length;c+=3)d=parseInt(a.substring(c,c+3),16),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d&63);c+1==a.length?(d=parseInt(a.substring(c,c+1),16),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d<<2)):c+2==a.length&&(d=parseInt(a.substring(c,c+2),16),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((d&3)<<4));for(;(e.length&3)>0;)e+="=";return e};a.b64to16=function(a){var c="",d,e=0,g;for(d=0;d<a.length;++d){if(a.charAt(d)=="=")break;v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(d));v<0||(e==0?(c+=int2char(v>>2),g=v&3,e=1):e==1?(c+=int2char(g<<2|v>>4),g=v&15,e=2):e==2?(c+=int2char(g),c+=int2char(v>>2),g=v&3,e=3):(c+=int2char(g<<2|v>>4),c+=int2char(v&15),e=0))}e==1&&(c+=int2char(g<<2));return c};a.string2bytes=function(a){for(var c=[],d=0;d<a.length;d++)c.push(a.charCodeAt(d));return c};a.bytes2string=function(a){for(var c="",d=0;d<a.length;d++)c+=String.fromCharCode(a[d]);return c};a.blockXOR=function(a,c){for(var d=Array(16),e=0;e<16;e++)d[e]=a[e]^c[e];return d};a.blockIV=function(){var a=new SecureRandom,c=Array(16);a.nextBytes(c);return c};a.pad16=function(a){var c=a.slice(0),d=(16-a.length%16)%16;for(i=a.length;i<a.length+d;i++)c.push(0);return c};a.depad=function(a){for(a=a.slice(0);a[a.length-1]==0;)a=a.slice(0,a.length-1);return a};a.encryptAESCBC=function(b,c){var d=c.slice(0);aes.ExpandKey(d);for(var e=a.string2bytes(b),e=a.pad16(e),g=a.blockIV(),h=0;h<e.length/16;h++){var f=e.slice(h*16,h*16+16),o=g.slice(h*16,h*16+16),f=a.blockXOR(o,f);aes.Encrypt(f,d);g=g.concat(f)}d=a.bytes2string(g);return a.b256to64(d)};a.decryptAESCBC=function(b,c){var d=c.slice(0);aes.ExpandKey(d);for(var b=a.b64to256(b),e=a.string2bytes(b),g=[],h=1;h<e.length/16;h++){var f=e.slice(h*16,h*16+16),o=e.slice((h-1)*16,(h-1)*16+16);aes.Decrypt(f,d);f=a.blockXOR(o,f);g=g.concat(f)}g=a.depad(g);return a.bytes2string(g)};a.wrap60=function(a){for(var c="",d=0;d<a.length;d++)d%60==0&&d!=0&&(c+="\n"),c+=a[d];return c};a.generateAESKey=function(){var a=Array(16);(new SecureRandom).nextBytes(a);return a};a.generateRSAKey=function(a,c){Math.seedrandom(sha256.hex(a));var d=new RSAKey;d.generate(c,"10001");return d};a.publicKeyString=function(b){return pubkey=b.n.toString(16)};a.publicKeyID=function(a){return MD5(a)};a.publicKeyFromString=function(b){var b=b.split("|")[0],c=new RSAKey;c.setPublic(b,"10001");return c};a.encrypt=function(b,c,d){var e="";try{var h=a.publicKeyFromString(c);e+=h.encrypt(b)+"?"}catch(f){return{status:"Invalid public key"}}return{status:"success",cipher:e}};a.decrypt=function(b,c){var d=b.split("?"),e=c.decrypt(d[0]);return{status:"success",plaintext:e,signature:"unsigned"}};return a}();module.exports=cryptico},function(module,exports,__webpack_require__){module.exports=__webpack_require__(2)},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"StreamClient",function(){return StreamClient});var getRandomValues;var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){getRandomValues=typeof crypto!=="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!=="undefined"&&typeof msCrypto.getRandomValues==="function"&&msCrypto.getRandomValues.bind(msCrypto);if(!getRandomValues){throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}}return getRandomValues(rnds8)}var regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(uuid){return typeof uuid==="string"&&regex.test(uuid)}var esm_browser_validate=validate;var byteToHex=[];for(var stringify_i=0;stringify_i<256;++stringify_i){byteToHex.push((stringify_i+256).toString(16).substr(1))}function stringify(arr){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!esm_browser_validate(uuid)){throw TypeError("Stringified UUID is invalid")}return uuid}var esm_browser_stringify=stringify;function v4(options,buf,offset){options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){offset=offset||0;for(var i=0;i<16;++i){buf[offset+i]=rnds[i]}return buf}return esm_browser_stringify(rnds)}var esm_browser_v4=v4;var DirectDeviceCustom=function(){var DeviceDirect=function(){function DeviceDirect(){_classCallCheck$1(this,DeviceDirect)}_createClass$1(DeviceDirect,[{key:"createClientObject",value:function createClientObject(oWebsocket,szId,iCurChannel,iCurStream){return{socket:oWebsocket,id:szId,iCurChannel:iCurChannel,iCurStream:iCurStream,resolve:null,reject:null}}},{key:"zeroPlayCmd",value:function zeroPlayCmd(iCurChannel,iCurStream){var aCmd=[0,0,0,44,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,iCurChannel+1,0,0,0,iCurStream,0,0,4,0];return new Uint8Array(aCmd)}},{key:"playCmd",value:function playCmd(iCurChannel,iCurStream){var aCmd=[0,0,0,44,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,iCurChannel,0,0,0,iCurStream,0,0,4,0];return new Uint8Array(aCmd)}},{key:"playbackCmd",value:function playbackCmd(szStartTime,szStopTime,iCurChannel,iCurStream){var szStartDayMonthYear=szStartTime.split("T")[0];var szStartHourMinSec=szStartTime.split("T")[1];var szStartYear="0"+parseInt(szStartDayMonthYear.substring(0,4),10).toString(16);var iStartMonth=parseInt(szStartDayMonthYear.substring(4,6),10);var iStartDay=parseInt(szStartDayMonthYear.substring(6),10);var iStartHour=parseInt(szStartHourMinSec.substring(0,2),10);var iStartMin=parseInt(szStartHourMinSec.substring(2,4),10);var iStartSec=parseInt(szStartHourMinSec.substring(4,6),10);var szStopDayMonthYear=szStopTime.split("T")[0];var szStopHourMinSec=szStopTime.split("T")[1];var szStopYear="0"+parseInt(szStopDayMonthYear.substring(0,4),10).toString(16);var iStopMonth=parseInt(szStopDayMonthYear.substring(4,6),10);var iStopHour=parseInt(szStopHourMinSec.substring(0,2),10);var iStopMin=parseInt(szStopHourMinSec.substring(2,4),10);var iStopSec=parseInt(szStopHourMinSec.substring(4,6),10);var aCmd=[0,0,0,96,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,iCurChannel,0,0,parseInt(szStartYear.substring(0,2),16),parseInt(szStartYear.substring(2,4),16),0,0,0,iStartMonth,0,0,0,iStartDay,0,0,0,iStartHour,0,0,0,iStartMin,0,0,0,iStartSec,0,0,parseInt(szStopYear.substring(0,2),16),parseInt(szStopYear.substring(2,4),16),0,0,0,iStopMonth,0,0,0,iStartDay,0,0,0,iStopHour,0,0,0,iStopMin,0,0,0,iStopSec,0,0,0,0,0,0,0,0,iCurStream,0,0,0];return new Uint8Array(aCmd)}},{key:"playRateCmd",value:function playRateCmd(iRate){var szHex=(parseInt(iRate,10)>>>0).toString(16).toLocaleUpperCase().toString(16);for(var j=szHex.length;j<8;j++){szHex="0"+szHex}var aRate=[0,0,0,0];for(var _j=0,iLenRate=szHex.length;_j<iLenRate;_j=_j+2){aRate[Math.floor(_j/2)]=parseInt(szHex.substring(_j,_j+2),16)}var aCmd=[0,0,0,36,0,0,0,0,0,0,0,0,0,3,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,aRate[0],aRate[1],aRate[2],aRate[3]];return new Uint8Array(aCmd)}},{key:"pauseCmd",value:function pauseCmd(){var aCmd=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(aCmd)}},{key:"resumeCmd",value:function resumeCmd(){var aCmd=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(aCmd)}}]);return DeviceDirect}();return DeviceDirect}();var ERROR_STREAM_UNKNOWN=3001;var ERROR_STREAM_LIMIT=3002;var ERROR_BAD_AUTH=3003;var DirectDevice=function(){var DeviceDirect=function(){function DeviceDirect(){_classCallCheck$1(this,DeviceDirect)}_createClass$1(DeviceDirect,[{key:"createClientObject",value:function createClientObject(oWebsocket,szId,szPlayURL){return{socket:oWebsocket,id:szId,playURL:szPlayURL,resolve:null,reject:null}}},{key:"getMediaFromSdp",value:function getMediaFromSdp(szSdp){var iMediaIndex=szSdp.indexOf("MEDIAINFO=")+10;var szMediaInfo=szSdp.slice(iMediaIndex,iMediaIndex+80);var aMediaInfo=[];for(var _i2=0,iLen=szMediaInfo.length/2;_i2<iLen;_i2++){aMediaInfo[_i2]=parseInt(szMediaInfo.slice(_i2*2,_i2*2+2),16)}return new Uint8Array(aMediaInfo)}},{key:"playCmd",value:function playCmd(szPlayURL){var oCmd={sequence:0,cmd:"realplay",url:szPlayURL};return JSON.stringify(oCmd)}},{key:"playbackCmd",value:function playbackCmd(szStartTime,szStopTime,szPlayURL){var oCmd={sequence:0,cmd:"playback",url:szPlayURL,startTime:szStartTime,endTime:szStopTime};return JSON.stringify(oCmd)}},{key:"playRateCmd",value:function playRateCmd(iRate){var oCmd={sequence:0,cmd:"changespeed",speed:iRate};return JSON.stringify(oCmd)}},{key:"pauseCmd",value:function pauseCmd(){var oCmd={sequence:0,cmd:"pause"};return JSON.stringify(oCmd)}},{key:"resumeCmd",value:function resumeCmd(){var oCmd={sequence:0,cmd:"resume"};return JSON.stringify(oCmd)}},{key:"getError",value:function getError(oError){var iErrorNum=ERROR_STREAM_UNKNOWN;if(oError){if(parseInt(oError.statusCode,10)===6&&oError.subStatusCode==="streamLimit"){iErrorNum=ERROR_STREAM_LIMIT}else if(parseInt(oError.statusCode,10)===4&&oError.subStatusCode==="badAuthorization"){iErrorNum=ERROR_BAD_AUTH}}return{iErrorNum:iErrorNum,oError:oError}}}]);return DeviceDirect}();return DeviceDirect}();var cryptico=__webpack_require__(0);var cryptico_default=__webpack_require__.n(cryptico);var CryptoJS=CryptoJS||function(u,p){var d={},l=d.lib={},s=function s(){},t=l.Base={extend:function extend(a){s.prototype=this;var c=new s;a&&c.mixIn(a);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function create(){var a=this.extend();a.init.apply(a,arguments);return a},init:function init(){},mixIn:function mixIn(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function clone(){return this.init.prototype.extend(this)}},r=l.WordArray=t.extend({init:function init(a,c){a=this.words=a||[];this.sigBytes=c!=p?c:4*a.length},toString:function toString(a){return(a||v).stringify(this)},concat:function concat(a){var c=this.words,e=a.words,j=this.sigBytes;a=a.sigBytes;this.clamp();if(j%4)for(var k=0;k<a;k++)c[j+k>>>2]|=(e[k>>>2]>>>24-8*(k%4)&255)<<24-8*((j+k)%4);else if(65535<e.length)for(k=0;k<a;k+=4)c[j+k>>>2]=e[k>>>2];else c.push.apply(c,e);this.sigBytes+=a;return this},clamp:function clamp(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-8*(c%4);a.length=u.ceil(c/4)},clone:function clone(){var a=t.clone.call(this);a.words=this.words.slice(0);return a},random:function random(a){for(var c=[],e=0;e<a;e+=4)c.push(4294967296*u.random()|0);return new r.init(c,a)}}),w=d.enc={},v=w.Hex={stringify:function stringify(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++){var k=c[j>>>2]>>>24-8*(j%4)&255;e.push((k>>>4).toString(16));e.push((k&15).toString(16))}return e.join("")},parse:function parse(a){for(var c=a.length,e=[],j=0;j<c;j+=2)e[j>>>3]|=parseInt(a.substr(j,2),16)<<24-4*(j%8);return new r.init(e,c/2)}},b=w.Latin1={stringify:function stringify(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++)e.push(String.fromCharCode(c[j>>>2]>>>24-8*(j%4)&255));return e.join("")},parse:function parse(a){for(var c=a.length,e=[],j=0;j<c;j++)e[j>>>2]|=(a.charCodeAt(j)&255)<<24-8*(j%4);return new r.init(e,c)}},x=w.Utf8={stringify:function stringify(a){try{return decodeURIComponent(escape(b.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data")}},parse:function parse(a){return b.parse(unescape(encodeURIComponent(a)))}},q=l.BufferedBlockAlgorithm=t.extend({reset:function reset(){this._data=new r.init;this._nDataBytes=0},_append:function _append(a){"string"==typeof a&&(a=x.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function _process(a){var c=this._data,e=c.words,j=c.sigBytes,k=this.blockSize,b=j/(4*k),b=a?u.ceil(b):u.max((b|0)-this._minBufferSize,0);a=b*k;j=u.min(4*a,j);if(a){for(var q=0;q<a;q+=k)this._doProcessBlock(e,q);q=e.splice(0,a);c.sigBytes-=j}return new r.init(q,j)},clone:function clone(){var a=t.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});l.Hasher=q.extend({cfg:t.extend(),init:function init(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function reset(){q.reset.call(this);this._doReset()},update:function update(a){this._append(a);this._process();return this},finalize:function finalize(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function _createHelper(a){return function(b,e){return new a.init(e).finalize(b)}},_createHmacHelper:function _createHmacHelper(a){return function(b,e){return new n.HMAC.init(a,e).finalize(b)}}});var n=d.algo={};return d}(Math);(function(){var u=CryptoJS,p=u.lib.WordArray;u.enc.Base64={stringify:function stringify(d){var l=d.words,p=d.sigBytes,t=this._map;d.clamp();d=[];for(var r=0;r<p;r+=3)for(var w=(l[r>>>2]>>>24-8*(r%4)&255)<<16|(l[r+1>>>2]>>>24-8*((r+1)%4)&255)<<8|l[r+2>>>2]>>>24-8*((r+2)%4)&255,v=0;4>v&&r+.75*v<p;v++)d.push(t.charAt(w>>>6*(3-v)&63));if(l=t.charAt(64))for(;d.length%4;)d.push(l);return d.join("")},parse:function parse(d){var l=d.length,s=this._map,t=s.charAt(64);t&&(t=d.indexOf(t),-1!=t&&(l=t));for(var t=[],r=0,w=0;w<l;w++)if(w%4){var v=s.indexOf(d.charAt(w-1))<<2*(w%4),b=s.indexOf(d.charAt(w))>>>6-2*(w%4);t[r>>>2]|=(v|b)<<24-8*(r%4);r++}return p.create(t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(u){function p(b,n,a,c,e,j,k){b=b+(n&a|~n&c)+e+k;return(b<<j|b>>>32-j)+n}function d(b,n,a,c,e,j,k){b=b+(n&c|a&~c)+e+k;return(b<<j|b>>>32-j)+n}function l(b,n,a,c,e,j,k){b=b+(n^a^c)+e+k;return(b<<j|b>>>32-j)+n}function s(b,n,a,c,e,j,k){b=b+(a^(n|~c))+e+k;return(b<<j|b>>>32-j)+n}for(var t=CryptoJS,r=t.lib,w=r.WordArray,v=r.Hasher,r=t.algo,b=[],x=0;64>x;x++)b[x]=4294967296*u.abs(u.sin(x+1))|0;r=r.MD5=v.extend({_doReset:function _doReset(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function _doProcessBlock(q,n){for(var a=0;16>a;a++){var c=n+a,e=q[c];q[c]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var a=this._hash.words,c=q[n+0],e=q[n+1],j=q[n+2],k=q[n+3],z=q[n+4],r=q[n+5],t=q[n+6],w=q[n+7],v=q[n+8],A=q[n+9],B=q[n+10],C=q[n+11],u=q[n+12],D=q[n+13],E=q[n+14],x=q[n+15],f=a[0],m=a[1],g=a[2],h=a[3],f=p(f,m,g,h,c,7,b[0]),h=p(h,f,m,g,e,12,b[1]),g=p(g,h,f,m,j,17,b[2]),m=p(m,g,h,f,k,22,b[3]),f=p(f,m,g,h,z,7,b[4]),h=p(h,f,m,g,r,12,b[5]),g=p(g,h,f,m,t,17,b[6]),m=p(m,g,h,f,w,22,b[7]),f=p(f,m,g,h,v,7,b[8]),h=p(h,f,m,g,A,12,b[9]),g=p(g,h,f,m,B,17,b[10]),m=p(m,g,h,f,C,22,b[11]),f=p(f,m,g,h,u,7,b[12]),h=p(h,f,m,g,D,12,b[13]),g=p(g,h,f,m,E,17,b[14]),m=p(m,g,h,f,x,22,b[15]),f=d(f,m,g,h,e,5,b[16]),h=d(h,f,m,g,t,9,b[17]),g=d(g,h,f,m,C,14,b[18]),m=d(m,g,h,f,c,20,b[19]),f=d(f,m,g,h,r,5,b[20]),h=d(h,f,m,g,B,9,b[21]),g=d(g,h,f,m,x,14,b[22]),m=d(m,g,h,f,z,20,b[23]),f=d(f,m,g,h,A,5,b[24]),h=d(h,f,m,g,E,9,b[25]),g=d(g,h,f,m,k,14,b[26]),m=d(m,g,h,f,v,20,b[27]),f=d(f,m,g,h,D,5,b[28]),h=d(h,f,m,g,j,9,b[29]),g=d(g,h,f,m,w,14,b[30]),m=d(m,g,h,f,u,20,b[31]),f=l(f,m,g,h,r,4,b[32]),h=l(h,f,m,g,v,11,b[33]),g=l(g,h,f,m,C,16,b[34]),m=l(m,g,h,f,E,23,b[35]),f=l(f,m,g,h,e,4,b[36]),h=l(h,f,m,g,z,11,b[37]),g=l(g,h,f,m,w,16,b[38]),m=l(m,g,h,f,B,23,b[39]),f=l(f,m,g,h,D,4,b[40]),h=l(h,f,m,g,c,11,b[41]),g=l(g,h,f,m,k,16,b[42]),m=l(m,g,h,f,t,23,b[43]),f=l(f,m,g,h,A,4,b[44]),h=l(h,f,m,g,u,11,b[45]),g=l(g,h,f,m,x,16,b[46]),m=l(m,g,h,f,j,23,b[47]),f=s(f,m,g,h,c,6,b[48]),h=s(h,f,m,g,w,10,b[49]),g=s(g,h,f,m,E,15,b[50]),m=s(m,g,h,f,r,21,b[51]),f=s(f,m,g,h,u,6,b[52]),h=s(h,f,m,g,k,10,b[53]),g=s(g,h,f,m,B,15,b[54]),m=s(m,g,h,f,e,21,b[55]),f=s(f,m,g,h,v,6,b[56]),h=s(h,f,m,g,x,10,b[57]),g=s(g,h,f,m,t,15,b[58]),m=s(m,g,h,f,D,21,b[59]),f=s(f,m,g,h,z,6,b[60]),h=s(h,f,m,g,C,10,b[61]),g=s(g,h,f,m,j,15,b[62]),m=s(m,g,h,f,A,21,b[63]);a[0]=a[0]+f|0;a[1]=a[1]+m|0;a[2]=a[2]+g|0;a[3]=a[3]+h|0},_doFinalize:function _doFinalize(){var b=this._data,n=b.words,a=8*this._nDataBytes,c=8*b.sigBytes;n[c>>>5]|=128<<24-c%32;var e=u.floor(a/4294967296);n[(c+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;n[(c+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;b.sigBytes=4*(n.length+1);this._process();b=this._hash;n=b.words;for(a=0;4>a;a++)c=n[a],n[a]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return b},clone:function clone(){var b=v.clone.call(this);b._hash=this._hash.clone();return b}});t.MD5=v._createHelper(r);t.HmacMD5=v._createHmacHelper(r)})(Math);(function(){var u=CryptoJS,p=u.lib,d=p.Base,l=p.WordArray,p=u.algo,s=p.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:p.MD5,iterations:1}),init:function init(d){this.cfg=this.cfg.extend(d)},compute:function compute(d,r){for(var p=this.cfg,s=p.hasher.create(),b=l.create(),u=b.words,q=p.keySize,p=p.iterations;u.length<q;){n&&s.update(n);var n=s.update(d).finalize(r);s.reset();for(var a=1;a<p;a++)n=s.finalize(n),s.reset();b.concat(n)}b.sigBytes=4*q;return b}});u.EvpKDF=function(d,l,p){return s.create(p).compute(d,l)}})();CryptoJS.lib.Cipher||function(u){var p=CryptoJS,d=p.lib,l=d.Base,s=d.WordArray,t=d.BufferedBlockAlgorithm,r=p.enc.Base64,w=p.algo.EvpKDF,v=d.Cipher=t.extend({cfg:l.extend(),createEncryptor:function createEncryptor(e,a){return this.create(this._ENC_XFORM_MODE,e,a)},createDecryptor:function createDecryptor(e,a){return this.create(this._DEC_XFORM_MODE,e,a)},init:function init(e,a,b){this.cfg=this.cfg.extend(b);this._xformMode=e;this._key=a;this.reset()},reset:function reset(){t.reset.call(this);this._doReset()},process:function process(e){this._append(e);return this._process()},finalize:function finalize(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function _createHelper(e){return{encrypt:function encrypt(b,k,d){return("string"==typeof k?c:a).encrypt(e,b,k,d)},decrypt:function decrypt(b,k,d){return("string"==typeof k?c:a).decrypt(e,b,k,d)}}}});d.StreamCipher=v.extend({_doFinalize:function _doFinalize(){return this._process(!0)},blockSize:1});var b=p.mode={},x=function x(e,a,b){var c=this._iv;c?this._iv=u:c=this._prevBlock;for(var d=0;d<b;d++)e[a+d]^=c[d]},q=(d.BlockCipherMode=l.extend({createEncryptor:function createEncryptor(e,a){return this.Encryptor.create(e,a)},createDecryptor:function createDecryptor(e,a){return this.Decryptor.create(e,a)},init:function init(e,a){this._cipher=e;this._iv=a}})).extend();q.Encryptor=q.extend({processBlock:function processBlock(e,a){var b=this._cipher,c=b.blockSize;x.call(this,e,a,c);b.encryptBlock(e,a);this._prevBlock=e.slice(a,a+c)}});q.Decryptor=q.extend({processBlock:function processBlock(e,a){var b=this._cipher,c=b.blockSize,d=e.slice(a,a+c);b.decryptBlock(e,a);x.call(this,e,a,c);this._prevBlock=d}});b=b.CBC=q;q=(p.pad={}).Pkcs7={pad:function pad(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,l=[],n=0;n<c;n+=4)l.push(d);c=s.create(l,c);a.concat(c)},unpad:function unpad(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};d.BlockCipher=v.extend({cfg:v.cfg.extend({mode:b,padding:q}),reset:function reset(){v.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function _doProcessBlock(a,b){this._mode.processBlock(a,b)},_doFinalize:function _doFinalize(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=d.CipherParams=l.extend({init:function init(a){this.mixIn(a)},toString:function toString(a){return(a||this.formatter).stringify(this)}}),b=(p.format={}).OpenSSL={stringify:function stringify(a){var b=a.ciphertext;a=a.salt;return(a?s.create([1398893684,1701076831]).concat(a).concat(b):b).toString(r)},parse:function parse(a){a=r.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=s.create(b.slice(2,4));b.splice(0,4);a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},a=d.SerializableCipher=l.extend({cfg:l.extend({format:b}),encrypt:function encrypt(a,b,c,d){d=this.cfg.extend(d);var l=a.createEncryptor(c,d);b=l.finalize(b);l=l.cfg;return n.create({ciphertext:b,key:c,iv:l.iv,algorithm:a,mode:l.mode,padding:l.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function decrypt(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);return a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function _parse(a,b){return"string"==typeof a?b.parse(a,this):a}}),p=(p.kdf={}).OpenSSL={execute:function execute(a,b,c,d){d||(d=s.random(8));a=w.create({keySize:b+c}).compute(a,d);c=s.create(a.words.slice(b),4*c);a.sigBytes=4*b;return n.create({key:a,iv:c,salt:d})}},c=d.PasswordBasedCipher=a.extend({cfg:a.cfg.extend({kdf:p}),encrypt:function encrypt(b,c,d,l){l=this.cfg.extend(l);d=l.kdf.execute(d,b.keySize,b.ivSize);l.iv=d.iv;b=a.encrypt.call(this,b,c,d.key,l);b.mixIn(d);return b},decrypt:function decrypt(b,c,d,l){l=this.cfg.extend(l);c=this._parse(c,l.format);d=l.kdf.execute(d,b.keySize,b.ivSize,c.salt);l.iv=d.iv;return a.decrypt.call(this,b,c,d.key,l)}})}();(function(){for(var u=CryptoJS,p=u.lib.BlockCipher,d=u.algo,l=[],s=[],t=[],r=[],w=[],v=[],b=[],x=[],q=[],n=[],a=[],c=0;256>c;c++)a[c]=128>c?c<<1:c<<1^283;for(var e=0,j=0,c=0;256>c;c++){var k=j^j<<1^j<<2^j<<3^j<<4,k=k>>>8^k&255^99;l[e]=k;s[k]=e;var z=a[e],F=a[z],G=a[F],y=257*a[k]^16843008*k;t[e]=y<<24|y>>>8;r[e]=y<<16|y>>>16;w[e]=y<<8|y>>>24;v[e]=y;y=16843009*G^65537*F^257*z^16843008*e;b[k]=y<<24|y>>>8;x[k]=y<<16|y>>>16;q[k]=y<<8|y>>>24;n[k]=y;e?(e=z^a[a[a[G^z]]],j^=a[a[j]]):e=j=1}var H=[0,1,2,4,8,16,32,64,128,27,54],d=d.AES=p.extend({_doReset:function _doReset(){for(var a=this._key,c=a.words,d=a.sigBytes/4,a=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],j=0;j<a;j++)if(j<d)e[j]=c[j];else{var k=e[j-1];j%d?6<d&&4==j%d&&(k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255]):(k=k<<8|k>>>24,k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255],k^=H[j/d|0]<<24);e[j]=e[j-d]^k}c=this._invKeySchedule=[];for(d=0;d<a;d++)j=a-d,k=d%4?e[j]:e[j-4],c[d]=4>d||4>=j?k:b[l[k>>>24]]^x[l[k>>>16&255]]^q[l[k>>>8&255]]^n[l[k&255]]},encryptBlock:function encryptBlock(a,b){this._doCryptBlock(a,b,this._keySchedule,t,r,w,v,l)},decryptBlock:function decryptBlock(a,c){var d=a[c+1];a[c+1]=a[c+3];a[c+3]=d;this._doCryptBlock(a,c,this._invKeySchedule,b,x,q,n,s);d=a[c+1];a[c+1]=a[c+3];a[c+3]=d},_doCryptBlock:function _doCryptBlock(a,b,c,d,e,j,l,f){for(var m=this._nRounds,g=a[b]^c[0],h=a[b+1]^c[1],k=a[b+2]^c[2],n=a[b+3]^c[3],p=4,r=1;r<m;r++)var q=d[g>>>24]^e[h>>>16&255]^j[k>>>8&255]^l[n&255]^c[p++],s=d[h>>>24]^e[k>>>16&255]^j[n>>>8&255]^l[g&255]^c[p++],t=d[k>>>24]^e[n>>>16&255]^j[g>>>8&255]^l[h&255]^c[p++],n=d[n>>>24]^e[g>>>16&255]^j[h>>>8&255]^l[k&255]^c[p++],g=q,h=s,k=t;q=(f[g>>>24]<<24|f[h>>>16&255]<<16|f[k>>>8&255]<<8|f[n&255])^c[p++];s=(f[h>>>24]<<24|f[k>>>16&255]<<16|f[n>>>8&255]<<8|f[g&255])^c[p++];t=(f[k>>>24]<<24|f[n>>>16&255]<<16|f[g>>>8&255]<<8|f[h&255])^c[p++];n=(f[n>>>24]<<24|f[g>>>16&255]<<16|f[h>>>8&255]<<8|f[k&255])^c[p++];a[b]=q;a[b+1]=s;a[b+2]=t;a[b+3]=n},keySize:8});u.AES=p._createHelper(d)})();var aes=CryptoJS;var LiveMedia=function(){var MediaLive=function(){function MediaLive(){_classCallCheck$1(this,MediaLive)}_createClass$1(MediaLive,[{key:"createClientObject",value:function createClientObject(oWebsocket,szId,szPKD,szRand,oParams){var key=aes.AES.encrypt((new Date).getTime().toString(),aes.enc.Hex.parse("1234567891234567123456789123456712345678912345671234567891234567"),{mode:aes.mode.CBC,iv:aes.enc.Hex.parse("12345678912345671234567891234567"),padding:aes.pad.Pkcs7}).ciphertext.toString();if(key.length<64){key=key+key}var iv=aes.AES.encrypt((new Date).getTime().toString(),aes.enc.Hex.parse("12345678912345671234567891234567"),{mode:aes.mode.CBC,iv:aes.enc.Hex.parse("12345678912345671234567891234567"),padding:aes.pad.Pkcs7}).ciphertext.toString();return{socket:oWebsocket,id:szId,PKD:szPKD,rand:szRand,playURL:oParams.playURL||"",auth:oParams.auth||"",token:oParams.token||"",key:key,iv:iv,resolve:null,reject:null}}},{key:"playCmd",value:function playCmd(oWebsocket){var oCmd={sequence:0,cmd:"realplay",url:oWebsocket.playURL,key:cryptico_default.a.encrypt(oWebsocket.iv+":"+oWebsocket.key,oWebsocket.PKD).cipher.split("?")[0],authorization:aes.AES.encrypt(oWebsocket.rand+":"+oWebsocket.auth,aes.enc.Hex.parse(oWebsocket.key),{mode:aes.mode.CBC,iv:aes.enc.Hex.parse(oWebsocket.iv),padding:aes.pad.Pkcs7}).ciphertext.toString(),token:aes.AES.encrypt(oWebsocket.token,aes.enc.Hex.parse(oWebsocket.key),{mode:aes.mode.CBC,iv:aes.enc.Hex.parse(oWebsocket.iv),padding:aes.pad.Pkcs7}).ciphertext.toString()};return JSON.stringify(oCmd)}},{key:"playbackCmd",value:function playbackCmd(oWebsocket,szStartTime,szStopTime){var oCmd={sequence:0,cmd:"playback",url:oWebsocket.playURL,key:cryptico_default.a.encrypt(oWebsocket.iv+":"+oWebsocket.key,oWebsocket.PKD).cipher.split("?")[0],authorization:aes.AES.encrypt(oWebsocket.rand+":"+oWebsocket.auth,aes.enc.Hex.parse(oWebsocket.key),{mode:aes.mode.CBC,iv:aes.enc.Hex.parse(oWebsocket.iv),padding:aes.pad.Pkcs7}).ciphertext.toString(),token:aes.AES.encrypt(oWebsocket.token,aes.enc.Hex.parse(oWebsocket.key),{mode:aes.mode.CBC,iv:aes.enc.Hex.parse(oWebsocket.iv),padding:aes.pad.Pkcs7}).ciphertext.toString(),startTime:szStartTime,endTime:szStopTime};return JSON.stringify(oCmd)}},{key:"seekCmd",value:function seekCmd(szStartTime,szStopTime){var oCmd={sequence:0,cmd:"seek",startTime:szStartTime,endTime:szStopTime};return JSON.stringify(oCmd)}}]);return MediaLive}();return MediaLive}();var LocalService=function(){var LocalServer=function(){function LocalServer(){_classCallCheck$1(this,LocalServer)}_createClass$1(LocalServer,[{key:"createClientObject",value:function createClientObject(oWebsocket,szId,szPlayURL,oParams){return{socket:oWebsocket,id:szId,playURL:szPlayURL,deviceSerial:oParams.deviceSerial||"",verificationCode:oParams.verificationCode||"",resolve:null,reject:null}}},{key:"playCmd",value:function playCmd(oWebsocket){var oCmd={sequence:0,cmd:"realplay",deviceSerial:oWebsocket.deviceSerial,verificationCode:oWebsocket.verificationCode,url:oWebsocket.playURL};return JSON.stringify(oCmd)}},{key:"playbackCmd",value:function playbackCmd(oWebsocket,szStartTime,szStopTime){var oCmd={sequence:0,cmd:"playback",deviceSerial:oWebsocket.deviceSerial,verificationCode:oWebsocket.verificationCode,url:oWebsocket.playURL,startTime:szStartTime,endTime:szStopTime};return JSON.stringify(oCmd)}}]);return LocalServer}();return LocalServer}();var StreamClient=function(){var WEBSOCKET=Symbol("WEBSOCKET");var GETINDEX=Symbol("GETINDEX");var PROTOCOLVERSION=Symbol("PROTOCOLVERSION");var CIPHERSUITES=Symbol("CIPHERSUITES");var oDirectDeviceCustom=new DirectDeviceCustom;var oDirectDevice=new DirectDevice;var oLiveMedia=new LiveMedia;var oLocalService=new LocalService;var WebsocketClient=function(){function WebsocketClient(){_classCallCheck$1(this,WebsocketClient);this[PROTOCOLVERSION]="0.1";this[CIPHERSUITES]=0;this[WEBSOCKET]=[];this.ERRORS={};this[GETINDEX]=function(id){var iIndex=-1;for(var _i3=0,iLen=this[WEBSOCKET].length;_i3<iLen;_i3++){if(this[WEBSOCKET][_i3].id===id){iIndex=_i3;break}}return iIndex}}_createClass$1(WebsocketClient,[{key:"openStream",value:function openStream(szUrl,oParams,cbMessage,cbClose){var bIpv6=false;if(szUrl.indexOf("[")>-1){bIpv6=true}var that=this;var aUrl=szUrl.split("://");var szProtocol=aUrl[0];var szHostname="";var iPort=7681;var iCurChannel=1;var iCurStream=0;var bWebSocketVideoCtrlProxy=false;if(bIpv6){szHostname=aUrl[1].split("]:")[0]+"]";iPort=Math.floor(aUrl[1].split("]:")[1].split("/")[0]);iCurChannel=Math.floor(aUrl[1].split("]:")[1].split("/")[1]/100);iCurStream=Math.floor(aUrl[1].split("]:")[1].split("/")[1]%100)-1}else{szHostname=aUrl[1].split(":")[0];iPort=Math.floor(aUrl[1].split(":")[1].split("/")[0]);iCurChannel=Math.floor(aUrl[1].split(":")[1].split("/")[1]/100);iCurStream=Math.floor(aUrl[1].split(":")[1].split("/")[1]%100)-1;var szProxyFlag=aUrl[1].split(":")[1].split("/")[2];if(szProxyFlag!==""&&szProxyFlag==="webSocketVideoCtrlProxy"){bWebSocketVideoCtrlProxy=true}}if(iCurChannel===0){iCurStream=0}oParams=oParams||{};var szAuthType="&sessionID=";if(oParams.token&&!oParams.playURL){szAuthType="&token="}var szSessionID=oParams.sessionID||oParams.session||(oParams.playURL?"":oParams.token)||"";var oWebsocket=new window.WebSocket(szProtocol+"://"+szHostname+":"+iPort+(oParams.mode?"/"+oParams.mode:"")+(bWebSocketVideoCtrlProxy?"/webSocketVideoCtrlProxy":"")+"?version="+that[PROTOCOLVERSION]+"&cipherSuites="+that[CIPHERSUITES]+szAuthType+szSessionID+(oParams.proxy?"&proxy="+oParams.proxy:""));oWebsocket.binaryType="arraybuffer";var szId=esm_browser_v4();var iDataIndex=-1;var promise=new Promise(function(resolve,reject){oWebsocket.onopen=function(){if(!oParams.playURL&&!oParams.sessionID&&!oParams.deviceSerial&&!oParams.token){that[WEBSOCKET].push(oDirectDeviceCustom.createClientObject(oWebsocket,szId,iCurChannel,iCurStream));resolve(szId)}};oWebsocket.onmessage=function(e){if(typeof e.data==="string"){var oJSON=JSON.parse(e.data);var iWebsocketIndex=that[GETINDEX](szId);if(oJSON&&oJSON.version&&oJSON.cipherSuite){that[PROTOCOLVERSION]=oJSON.version;that[CIPHERSUITES]=parseInt(oJSON.cipherSuite,10);if(oJSON&&oJSON.PKD&&oJSON.rand){that[WEBSOCKET].push(oLiveMedia.createClientObject(oWebsocket,szId,oJSON.PKD,oJSON.rand,oParams))}else{var szPlayURL="live://"+szHostname+":"+iPort+"/"+iCurChannel+"/"+iCurStream;if(that[CIPHERSUITES]===-1){that[WEBSOCKET].push(oLocalService.createClientObject(oWebsocket,szId,szPlayURL,oParams))}else{that[WEBSOCKET].push(oDirectDevice.createClientObject(oWebsocket,szId,szPlayURL))}}resolve(szId);return}if(oJSON&&oJSON.sdp){var aSadpHeadBuf=oDirectDevice.getMediaFromSdp(oJSON.sdp);cbMessage({bHead:true,buf:aSadpHeadBuf})}if(oJSON&&oJSON.cmd){if(oJSON.cmd==="end"){cbMessage({type:"exception",cmd:oJSON.cmd})}}if(oJSON&&oJSON.statusString){if(oJSON.statusString.toLowerCase()==="ok"){if(that[WEBSOCKET][iWebsocketIndex].resolve){that[WEBSOCKET][iWebsocketIndex].resolve(oJSON)}}if(oJSON.statusString.toLowerCase()!=="ok"){var oError=oDirectDevice.getError(oJSON);if(iWebsocketIndex>-1){if(that[WEBSOCKET][iWebsocketIndex].reject){that[WEBSOCKET][iWebsocketIndex].reject(oError)}}else{reject(oError)}}}if(oJSON&&oJSON.errorCode){cbMessage(oJSON)}}else{var dataObj={};var dataBuf=new Uint8Array(e.data);iDataIndex++;if(dataBuf.byteLength===64||dataBuf.byteLength===40){var iMediaHeadIndex=-1;var iLen=dataBuf.byteLength;for(var _i4=0;_i4<iLen;_i4++){if(dataBuf[_i4]===73&&dataBuf[_i4+1]===77&&dataBuf[_i4+2]===75&&dataBuf[_i4+3]===72){iMediaHeadIndex=_i4;break}}if(iMediaHeadIndex!==-1){var aHeadBuf=dataBuf.slice(iMediaHeadIndex,iMediaHeadIndex+40);dataObj={bHead:true,buf:aHeadBuf}}else{dataObj={bHead:false,buf:dataBuf}}cbMessage(dataObj)}else{if(iDataIndex>0){dataObj={bHead:false,buf:dataBuf};cbMessage(dataObj)}}dataBuf=null;dataObj=null;e=null}};oWebsocket.onclose=function(){for(var _i5=0,iLen=that[WEBSOCKET].length;_i5<iLen;_i5++){if(that[WEBSOCKET][_i5].id===szId){that[WEBSOCKET][_i5].resolve();that[WEBSOCKET].splice(_i5,1);setTimeout(function(){cbClose()},200);break}}reject()}});return promise}},{key:"startPlay",value:function startPlay(id,szStartTime,szStopTime){var that=this;var iWebsocketIndex=this[GETINDEX](id);if(szStartTime&&szStopTime&&that[PROTOCOLVERSION]==="0.1"){szStartTime=szStartTime.replace(/-/g,"").replace(/:/g,"");szStopTime=szStopTime.replace(/-/g,"").replace(/:/g,"")}var promise=new Promise(function(resolve,reject){if(iWebsocketIndex>-1){that[WEBSOCKET][iWebsocketIndex].resolve=resolve;that[WEBSOCKET][iWebsocketIndex].reject=reject;var uIntCmd=null;if(!szStartTime||!szStopTime){if(that[WEBSOCKET][iWebsocketIndex].iCurChannel===0&&that[PROTOCOLVERSION]==="0.1"){uIntCmd=oDirectDeviceCustom.zeroPlayCmd(that[WEBSOCKET][iWebsocketIndex].iCurChannel,that[WEBSOCKET][iWebsocketIndex].iCurStream)}else{if(that[PROTOCOLVERSION]!=="0.1"){if(that[CIPHERSUITES]===0){uIntCmd=oLiveMedia.playCmd(that[WEBSOCKET][iWebsocketIndex])}else if(that[CIPHERSUITES]===1){uIntCmd=oDirectDevice.playCmd(that[WEBSOCKET][iWebsocketIndex].playURL)}else if(that[CIPHERSUITES]===-1){uIntCmd=oLocalService.playCmd(that[WEBSOCKET][iWebsocketIndex])}}else{uIntCmd=oDirectDeviceCustom.playCmd(that[WEBSOCKET][iWebsocketIndex].iCurChannel,that[WEBSOCKET][iWebsocketIndex].iCurStream)}}}else{if(that[PROTOCOLVERSION]!=="0.1"){if(that[CIPHERSUITES]===0){uIntCmd=oLiveMedia.playbackCmd(that[WEBSOCKET][iWebsocketIndex],szStartTime,szStopTime)}else if(that[CIPHERSUITES]===1){uIntCmd=oDirectDevice.playbackCmd(szStartTime,szStopTime,that[WEBSOCKET][iWebsocketIndex].playURL)}else if(that[CIPHERSUITES]===-1){uIntCmd=oLocalService.playbackCmd(that[WEBSOCKET][iWebsocketIndex],szStartTime,szStopTime)}}else{uIntCmd=oDirectDeviceCustom.playbackCmd(szStartTime,szStopTime,that[WEBSOCKET][iWebsocketIndex].iCurChannel,that[WEBSOCKET][iWebsocketIndex].iCurStream)}}that[WEBSOCKET][iWebsocketIndex].socket.send(uIntCmd);if(that[PROTOCOLVERSION]==="0.1"){resolve()}}else{if(that[PROTOCOLVERSION]==="0.1"){reject()}}});return promise}},{key:"singleFrame",value:function singleFrame(){}},{key:"setPlayRate",value:function setPlayRate(id,iRate){var that=this;var promise=new Promise(function(resolve,reject){for(var _i6=0,iLen=that[WEBSOCKET].length;_i6<iLen;_i6++){if(that[WEBSOCKET][_i6].id===id){if(that[PROTOCOLVERSION]==="0.1"){var uIntCmd=oDirectDeviceCustom.playRateCmd(iRate);that[WEBSOCKET][_i6].socket.send(uIntCmd);resolve();break}else{that[WEBSOCKET][_i6].resolve=resolve;that[WEBSOCKET][_i6].reject=reject;var szCmd=oDirectDevice.playRateCmd(iRate);that[WEBSOCKET][_i6].socket.send(szCmd)}}}});return promise}},{key:"seek",value:function seek(id,szStartTime,szStopTime){var that=this;var promise=new Promise(function(resolve,reject){for(var _i7=0,iLen=that[WEBSOCKET].length;_i7<iLen;_i7++){if(that[WEBSOCKET][_i7].id===id){that[WEBSOCKET][_i7].resolve=resolve;that[WEBSOCKET][_i7].reject=reject;var szCmd=oLiveMedia.seekCmd(szStartTime,szStopTime);that[WEBSOCKET][_i7].socket.send(szCmd)}}});return promise}},{key:"pause",value:function pause(id){var that=this;var promise=new Promise(function(resolve,reject){for(var _i8=0,iLen=that[WEBSOCKET].length;_i8<iLen;_i8++){if(that[WEBSOCKET][_i8].id===id){if(that[PROTOCOLVERSION]==="0.1"){var uIntCmd=oDirectDeviceCustom.pauseCmd();that[WEBSOCKET][_i8].socket.send(uIntCmd);resolve();break}else{that[WEBSOCKET][_i8].resolve=resolve;that[WEBSOCKET][_i8].reject=reject;var szCmd=oDirectDevice.pauseCmd();that[WEBSOCKET][_i8].socket.send(szCmd)}}}});return promise}},{key:"transmission",value:function transmission(id,szCmd){var that=this;var promise=new Promise(function(resolve,reject){for(var _i9=0,iLen=that[WEBSOCKET].length;_i9<iLen;_i9++){if(that[WEBSOCKET][_i9].id===id){that[WEBSOCKET][_i9].resolve=resolve;that[WEBSOCKET][_i9].reject=reject;that[WEBSOCKET][_i9].socket.send(szCmd)}}});return promise}},{key:"resume",value:function resume(id){var that=this;var promise=new Promise(function(resolve,reject){for(var _i10=0,iLen=that[WEBSOCKET].length;_i10<iLen;_i10++){if(that[WEBSOCKET][_i10].id===id){if(that[PROTOCOLVERSION]==="0.1"){var uIntCmd=oDirectDeviceCustom.resumeCmd();that[WEBSOCKET][_i10].socket.send(uIntCmd);resolve();break}else{that[WEBSOCKET][_i10].resolve=resolve;that[WEBSOCKET][_i10].reject=reject;var szCmd=oDirectDevice.resumeCmd();that[WEBSOCKET][_i10].socket.send(szCmd)}}}});return promise}},{key:"stop",value:function stop(id){var that=this;var promise=new Promise(function(resolve,reject){if(!id){reject()}else{var iIndex=-1;for(var _i11=0,iLen=that[WEBSOCKET].length;_i11<iLen;_i11++){if(that[WEBSOCKET][_i11].id===id){iIndex=_i11;that[WEBSOCKET][_i11].resolve=resolve;that[WEBSOCKET][_i11].socket.close(1e3,"CLOSE");break}}if(iIndex===-1){reject()}}});return promise}},{key:"stopAll",value:function stopAll(){var that=this;var promise=new Promise(function(resolve,reject){for(var _i12=0,iLen=that[WEBSOCKET].length;_i12<iLen;_i12++){that[WEBSOCKET][_i12].socket.close(1e3,"CLOSE")}console.log("停止所有流");resolve()});return promise}}]);return WebsocketClient}();return WebsocketClient}()}])})})(streamClient1_2_0_min);var streamClient1_2_0_minExports=streamClient1_2_0_min.exports;var getRandomValues;var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){getRandomValues=typeof crypto!=="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!=="undefined"&&typeof msCrypto.getRandomValues==="function"&&msCrypto.getRandomValues.bind(msCrypto);if(!getRandomValues){throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}}return getRandomValues(rnds8)}var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(uuid){return typeof uuid==="string"&&REGEX.test(uuid)}var byteToHex=[];for(var i$1=0;i$1<256;++i$1){byteToHex.push((i$1+256).toString(16).substr(1))}function stringify(arr){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!validate(uuid)){throw TypeError("Stringified UUID is invalid")}return uuid}function v4(options,buf,offset){options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){offset=offset||0;for(var i=0;i<16;++i){buf[offset+i]=rnds[i]}return buf}return stringify(rnds)}var Tool$1=function(){function Tool(){_classCallCheck$1(this,Tool);this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}_createClass$1(Tool,[{key:"$",value:function $(strExpr){var idExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;var classExpr=/^(?:\s*(<[\w\W]+>)[^>]*|.([\w-]*))$/;if(idExpr.test(strExpr)){var idMatch=idExpr.exec(strExpr);return document.getElementById(idMatch[2])}else if(classExpr.test(strExpr)){var classMatch=classExpr.exec(strExpr);var allElement=document.getElementsByTagName("*");var ClassMatch=[];for(var i=0,l=allElement.length;i<l;i++){if(allElement[i].className.match(new RegExp("(\\s|^)"+classMatch[2]+"(\\s|$)"))){ClassMatch.push(allElement[i])}}return ClassMatch}}},{key:"dateFormat",value:function dateFormat(oDate,fmt){var o={"M+":oDate.getMonth()+1,"d+":oDate.getDate(),"h+":oDate.getHours(),"m+":oDate.getMinutes(),"s+":oDate.getSeconds(),"q+":Math.floor((oDate.getMonth()+3)/3),S:oDate.getMilliseconds()};if(/(y+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,(oDate.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(fmt)){fmt=fmt.replace(RegExp.$1,RegExp.$1.length===1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return fmt}},{key:"downloadFile",value:function downloadFile(oData,szName){var oBlob=oData;if(!(oData instanceof Blob||oData instanceof File)){oBlob=new Blob([oData])}var szFileUrl=window.URL.createObjectURL(oBlob);var oLink=window.document.createElement("a");oLink.href=szFileUrl;oLink.download=szName;var oClick=document.createEvent("MouseEvents");oClick.initEvent("click",true,true);oLink.dispatchEvent(oClick)}},{key:"createxmlDoc",value:function createxmlDoc(){var xmlDoc;var aVersions=["MSXML2.DOMDocument","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","Microsoft.XmlDom"];for(var i=0,len=aVersions.length;i<len;i++){try{xmlDoc=new ActiveXObject(aVersions[i]);break}catch(e){xmlDoc=document.implementation.createDocument("","",null);break}}xmlDoc.async="false";return xmlDoc}},{key:"parseXmlFromStr",value:function parseXmlFromStr(szXml){if(null===szXml||""===szXml){return null}var xmlDoc=this.createxmlDoc();if(navigator.appName==="Netscape"||navigator.appName==="Opera"){var oParser=new DOMParser;xmlDoc=oParser.parseFromString(szXml,"text/xml")}else{xmlDoc.loadXML(szXml)}return xmlDoc}},{key:"encode",value:function encode(input){var output="";var chr1;var chr2;var chr3;var enc1;var enc2;var enc3;var enc4;var i=0;input=this._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4)}return output}},{key:"decode",value:function decode(input){var output="";var chr1;var chr2;var chr3;var enc1;var enc2;var enc3;var enc4;var i=0;input=input.replace(/[^A-Za-z0-9+/=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!==64){output=output+String.fromCharCode(chr2)}if(enc4!==64){output=output+String.fromCharCode(chr3)}}output=this._utf8_decode(output);return output}},{key:"_utf8_encode",value:function _utf8_encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext}},{key:"_utf8_decode",value:function _utf8_decode(utftext){var string="";var i=0;var c=0;var c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else if(c>191&&c<224){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode((c&31)<<6|c2&63);i+=2}else{c2=utftext.charCodeAt(i+1);var c3=utftext.charCodeAt(i+2);string+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63);i+=3}}return string}},{key:"isFirefox",value:function isFirefox(){var bRet=false;var szUserAgent=navigator.userAgent.toLowerCase();var szBrowserVersion="";var iBrowserVersion=-1;if(szUserAgent.match(/firefox\/([\d.]+)/)){szBrowserVersion=szUserAgent.match(/firefox\/([\d.]+)/)[1];iBrowserVersion=parseInt(szBrowserVersion.split(".")[0],10);if(iBrowserVersion>-1){bRet=true}}return bRet}},{key:"isSafari",value:function isSafari(){var bRet=false;var szUserAgent=navigator.userAgent.toLowerCase();var szBrowserVersion="";var iBrowserVersion=-1;if(szUserAgent.match(/version\/([\d.]+).safari./)){szBrowserVersion=szUserAgent.match(/version\/([\d.]+).safari./)[1];iBrowserVersion=parseInt(szBrowserVersion.split(".")[0],10);if(iBrowserVersion>-1){bRet=true}}return bRet}},{key:"isEdge",value:function isEdge(){return navigator.userAgent.toLowerCase().indexOf("edge")>-1}},{key:"isIOS",value:function isIOS(){var u=navigator.userAgent;var bIOS=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return bIOS}}]);return Tool}();var oTool$1=new Tool$1;var systemTransformWorkerString=function systemTransformWorkerString(){var staticPath=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"https://open.ys7.com/assets/ezuikit_v3.6";return'(function() {\n    const RECORDRTP = 0;  //录制一份未经过转封装的码流原始数据，用于定位问题\n    self.Module = { memoryInitializerRequest: loadMemInitFile(), TOTAL_MEMORY: 128*1024*1024 };\n    importScripts = (function (globalEval) {\n        var xhr = new XMLHttpRequest;\n        return function importScripts() {\n          var\n            args = Array.prototype.slice.call(arguments)\n            , len = args.length\n            , i = 0\n            , meta\n            , data\n            , content\n            ;\n          for (; i < len; i++) {\n            if (args[i].substr(0, 5).toLowerCase() === "data:") {\n              data = args[i];\n              content = data.indexOf(",");\n              meta = data.substr(5, content).toLowerCase();\n              data = decodeURIComponent(data.substr(content + 1));\n              if (/;s*base64s*[;,]/.test(meta)) {\n                data = atob(data);\n              }\n              if (/;s*charset=[uU][tT][fF]-?8s*[;,]/.test(meta)) {\n                data = decodeURIComponent(escape(data));\n              }\n            } else {\n              xhr.open("GET", args[i], false);\n              xhr.send(null);\n              data = xhr.responseText;\n            }\n            globalEval(data);\n          }\n        };\n      }(eval));\n    importScripts(\''.concat(staticPath,'/js/transform/SystemTransform.js\');\n\n    Module.postRun.push(function() {\n        postMessage({type: "loaded"});\n    });\n\n    onmessage = function (e) {\n        var data = e.data;\n\n        if ("create" === data.type) {\n            var iHeadLen = data.len;\n            var pHead = Module._malloc(iHeadLen);\n\n            var aData = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);\n            aData.set(new Uint8Array(data.buf));\n\n            var iTransType = data.packType;//目标格式 RTP->PS\n            if (RECORDRTP) {\n                postMessage({type: "created"});\n                postMessage({type: "outputData", buf: data.buf, dType: 1}, [data.buf]);\n            } else {\n                var iRet = Module._ST_Create(pHead, iHeadLen, iTransType);\n                if (iRet != 0) {\n                    console.log("_ST_Create failed!");\n                } else {\n                    Module._ST_Start();\n                    postMessage({type: "created"});\n                }\n            }\n\n        } else if ("inputData" === data.type) {\n            if (RECORDRTP) {\n                var aFileData = new Uint8Array(data.buf);  // 拷贝一份\n                var iBufferLen = aFileData.length;\n                var szBufferLen = iBufferLen.toString(16);\n                if (szBufferLen.length === 1) {\n                    szBufferLen = "000" + szBufferLen;\n                } else if (szBufferLen.length === 2) {\n                    szBufferLen = "00" + szBufferLen;\n                } else if (szBufferLen.length === 3) {\n                    szBufferLen = "0" + szBufferLen;\n                }\n                var aData = [0, 0, parseInt(szBufferLen.substring(0, 2), 16), parseInt(szBufferLen.substring(2, 4), 16)];\n                for(var iIndex = 0, iDataLength = aFileData.length; iIndex < iDataLength; iIndex++) {\n                    aData[iIndex + 4] = aFileData[iIndex]\n                }\n                var dataUint8 = new Uint8Array(aData);\n                postMessage({type: "outputData", buf: dataUint8.buffer, dType: 2}, [dataUint8.buffer]);\n            } else {\n                var iDataLen = data.len;\n                var pData = Module._malloc(iDataLen);\n\n                var aData = Module.HEAPU8.subarray(pData, pData + iDataLen);\n                aData.set(new Uint8Array(data.buf));\n\n                var iRet = Module._ST_InputData(0, pData, iDataLen);\n                if (iRet != 0) {\n                    //console.log("_ST_InputData failed!");// 一开始会有一些失败，但是不影响后面的文件存储\n                }\n\n                Module._free(pData);\n            }\n        } else if ("release" === data.type) {\n            Module._ST_Stop();\n            Module._ST_Release();\n\n            close();\n        }\n    };\n\n    function loadMemInitFile() {\n        var req = new XMLHttpRequest();\n        req.open(\'GET\', \'').concat(staticPath,"/js/transform/SystemTransform.js.mem');\n        req.responseType = 'arraybuffer';\n        req.send();\n\n        return req;\n    }\n})();")};var STORAGE_RECORD_PATH="Web/RecordFiles/";var STORAGE_CLIPS_PATH="Web/PlaybackFiles/";var STORAGE_TIMEOUT=1e3;var TRANS_SYSHEAD=1;var ERROR_MAX_FILE_SIZE=3001;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;window.URL=window.URL||window.webkitURL;var FileSystem=function(){function FileSystem(szUUID,szFileName,iStreamType,options){_classCallCheck$1(this,FileSystem);this.szUUID=szUUID;this.szFileName=szFileName;this.iStreamType=iStreamType;this.szPath="";this.bStart=false;this.aStreamList=[];this.options=options}_createClass$1(FileSystem,[{key:"init",value:function init(){var that=this;if(0===this.iStreamType){this.szPath=STORAGE_RECORD_PATH}else if(1===this.iStreamType){this.szPath=STORAGE_CLIPS_PATH}this.szPath+=this.getDateDir();var aPath=that.szPath.split("/");var oPromise=new Promise(function(resolve){window.requestFileSystem(window.TEMPORARY,that.options.iFileSize,function(fs){that.createDir(fs.root,aPath,function(){resolve()})},that.errorHandler)});return oPromise}},{key:"getDateDir",value:function getDateDir(){return oTool$1.dateFormat(new Date,"yyyy-MM-dd")}},{key:"createDir",value:function createDir(rootDirEntry,floders,cbFunc){var that=this;if(floders.length){rootDirEntry.getDirectory(floders[0],{create:true},function(dirEntry){that.createDir(dirEntry,floders.slice(1),cbFunc)},that.errorHandler)}else{cbFunc()}}},{key:"errorHandler",value:function errorHandler(){}},{key:"writeFileHeader",value:function writeFileHeader(aData){var that=this;window.requestFileSystem(window.TEMPORARY,that.options.iFileSize,function(fs){fs.root.getFile(that.szPath+"/"+that.szFileName,{create:true},function(fileEntry){fileEntry.createWriter(function(fileWriter){fileWriter.onwriteend=function(){that.bStart=true;that.writeFile(fileWriter)};fileWriter.onerror=function(){};fileWriter.seek(fileWriter.length);var oBlob=new Blob([aData]);fileWriter.write(oBlob)},that.errorHandler)},that.errorHandler)},that.errorHandler)}},{key:"writeFileContent",value:function writeFileContent(aData){this.aStreamList.push(aData)}},{key:"writeFile",value:function writeFile(fileWriter){var that=this;if(this.bStart){if(this.aStreamList.length>0){var aData=this.aStreamList.shift();fileWriter.seek(fileWriter.length);if(fileWriter.length>=this.options.iFileSize){if(this.options.cbEventHandler){this.options.cbEventHandler(ERROR_MAX_FILE_SIZE,this.szUUID)}return}var oBlob=new Blob([aData]);fileWriter.write(oBlob)}else{setTimeout(function(){that.writeFile(fileWriter)},STORAGE_TIMEOUT)}}}},{key:"stopWriteFile",value:function stopWriteFile(){var that=this;this.bStart=false;this.aStreamList.length=0;var oPromise=new Promise(function(resolve){window.requestFileSystem(window.TEMPORARY,that.options.iFileSize,function(fs){fs.root.getFile(that.szPath+"/"+that.szFileName,{create:false},function(fileEntry){fileEntry.file(function(file){resolve();oTool$1.downloadFile(file,file.name)})},that.errorHandler)},that.errorHandler)});return oPromise}}]);return FileSystem}();var Storage=function(){function Storage(szBasePath,szUUID,szFileName,aHeadBuf,iPackType,iStreamType,options,staticPath){_classCallCheck$1(this,Storage);this.szBasePath=szBasePath;this.szUUID=szUUID;this.szFileName=szFileName;this.aHeadBuf=new Uint8Array(aHeadBuf);this.iPackType=iPackType;this.iStreamType=iStreamType;this.oWorker=null;this.oFileSystem=null;this.options=options;this.bHead=true;this.staticPath=staticPath}_createClass$1(Storage,[{key:"init",value:function init(){var that=this;var oPromise=new Promise(function(resolve,reject){that.initFileSystem().then(function(){that.initWorker().then(function(){resolve(that.szUUID)},function(iError){reject(iError)})},function(iError){reject(iError)})});return oPromise}},{key:"initFileSystem",value:function initFileSystem(){var that=this;this.oFileSystem=new FileSystem(this.szUUID,this.szFileName,this.iStreamType,this.options);var oPromise=new Promise(function(resolve,reject){that.oFileSystem.init().then(function(){resolve()},function(iError){reject(iError)})});return oPromise}},{key:"initWorker",value:function initWorker(){var that=this;var oPromise=new Promise(function(resolve){var workBlob=new Blob([systemTransformWorkerString(that.staticPath)]);var url=URL.createObjectURL(workBlob);that.oWorker=new Worker(url);that.oWorker.onmessage=function(e){var data=e.data;var packType=that.iPackType;if(that.options.iPackage===1){packType=12}if("loaded"===data.type){that.oWorker.postMessage({type:"create",buf:that.aHeadBuf.buffer,len:40,packType:packType},[that.aHeadBuf.buffer])}else if("created"===data.type){resolve()}else if("outputData"===data.type){var aFileData=new Uint8Array(data.buf);if(that.options.iPackage===1){if(that.bHead){that.oFileSystem.writeFileHeader(aFileData);that.bHead=false}else{that.oFileSystem.writeFileContent(aFileData)}}else{if(TRANS_SYSHEAD===data.dType){that.oFileSystem.writeFileHeader(aFileData)}else{that.oFileSystem.writeFileContent(aFileData)}}}}});return oPromise}},{key:"inputData",value:function inputData(aData){if(this.oWorker){var aPostData=new Uint8Array(aData);this.oWorker.postMessage({type:"inputData",buf:aPostData.buffer,len:aPostData.length},[aPostData.buffer])}}},{key:"stopRecord",value:function stopRecord(){var that=this;var oPromise=new Promise(function(resolve,reject){if(that.oWorker){that.oWorker.postMessage({type:"release"})}else{reject()}if(that.oFileSystem){that.oFileSystem.stopWriteFile().then(function(){that.bHead=true;resolve()},function(){reject()})}else{reject()}});return oPromise}}]);return Storage}();var StorageManager=function(){var STORAGELIST=Symbol("STORAGELIST");var StorageManage=function(){function StorageManage(szBasePath,options,staticPath){_classCallCheck$1(this,StorageManage);this.szBasePath=szBasePath;this[STORAGELIST]={};this.options={iFileSize:1024*1024*1024};Object.assign(this.options,options);if(typeof options.staticPath==="string"){this.staticPath=options.staticPath}}_createClass$1(StorageManage,[{key:"startRecord",value:function startRecord(szFileName,aHeadBuf,iPackType,iStreamType,options){var that=this;var szUUID=v4();var oOptions=Object.assign({},this.options,options);var oStorage=new Storage(this.szBasePath,szUUID,szFileName,aHeadBuf,iPackType,iStreamType,oOptions,this.staticPath);var oPromise=new Promise(function(resolve,reject){oStorage.init().then(function(szID){that[STORAGELIST][szID]=oStorage;resolve(szID)},function(iError){reject(iError)})});return oPromise}},{key:"inputData",value:function inputData(szUUID,aData){var oStorage=this[STORAGELIST][szUUID];if(oStorage){oStorage.inputData(aData)}}},{key:"stopRecord",value:function stopRecord(szUUID){var that=this;var oPromise=new Promise(function(resolve,reject){var oStorage=that[STORAGELIST][szUUID];if(oStorage){oStorage.stopRecord().then(function(){delete that[STORAGELIST][szUUID];resolve()},function(){reject()})}else{reject()}});return oPromise}}]);return StorageManage}();return StorageManage}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return _assertThisInitialized(self)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return(hint==="string"?String:Number)(input)}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key)}var jquery={exports:{}};(function(module){(function(global,factory){{module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document")}return factory(w)}}})(typeof window!=="undefined"?window:commonjsGlobal$1,function(window,noGlobal){var arr=[];var getProto=Object.getPrototypeOf;var _slice=arr.slice;var flat=arr.flat?function(array){return arr.flat.call(array)}:function(array){return arr.concat.apply([],array)};var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var fnToString=hasOwn.toString;var ObjectFunctionString=fnToString.call(Object);var support={};var isFunction=function isFunction(obj){return typeof obj==="function"&&typeof obj.nodeType!=="number"&&typeof obj.item!=="function"};var isWindow=function isWindow(obj){return obj!=null&&obj===obj.window};var document=window.document;var preservedScriptAttributes={type:true,src:true,nonce:true,noModule:true};function DOMEval(code,node,doc){doc=doc||document;var i,val,script=doc.createElement("script");script.text=code;if(node){for(i in preservedScriptAttributes){val=node[i]||node.getAttribute&&node.getAttribute(i);if(val){script.setAttribute(i,val)}}}doc.head.appendChild(script).parentNode.removeChild(script)}function toType(obj){if(obj==null){return obj+""}return _typeof(obj)==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":_typeof(obj)}var version="3.7.1",rhtmlSuffix=/HTML$/i,jQuery=function jQuery(selector,context){return new jQuery.fn.init(selector,context)};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,length:0,toArray:function toArray(){return _slice.call(this)},get:function get(num){if(num==null){return _slice.call(this)}return num<0?this[num+this.length]:this[num]},pushStack:function pushStack(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;return ret},each:function each(callback){return jQuery.each(this,callback)},map:function map(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function slice(){return this.pushStack(_slice.apply(this,arguments))},first:function first(){return this.eq(0)},last:function last(){return this.eq(-1)},even:function even(){return this.pushStack(jQuery.grep(this,function(_elem,i){return(i+1)%2}))},odd:function odd(){return this.pushStack(jQuery.grep(this,function(_elem,i){return i%2}))},eq:function eq(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function end(){return this.prevObject||this.constructor()},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(_typeof(target)!=="object"&&!isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){copy=options[name];if(name==="__proto__"||target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=Array.isArray(copy)))){src=target[name];if(copyIsArray&&!Array.isArray(src)){clone=[]}else if(!copyIsArray&&!jQuery.isPlainObject(src)){clone={}}else{clone=src}copyIsArray=false;target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function error(msg){throw new Error(msg)},noop:function noop(){},isPlainObject:function isPlainObject(obj){var proto,Ctor;if(!obj||toString.call(obj)!=="[object Object]"){return false}proto=getProto(obj);if(!proto){return true}Ctor=hasOwn.call(proto,"constructor")&&proto.constructor;return typeof Ctor==="function"&&fnToString.call(Ctor)===ObjectFunctionString},isEmptyObject:function isEmptyObject(obj){var name;for(name in obj){return false}return true},globalEval:function globalEval(code,options,doc){DOMEval(code,{nonce:options&&options.nonce},doc)},each:function each(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break}}}return obj},text:function text(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=jQuery.text(node)}}if(nodeType===1||nodeType===11){return elem.textContent}if(nodeType===9){return elem.documentElement.textContent}if(nodeType===3||nodeType===4){return elem.nodeValue}return ret},makeArray:function makeArray(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function inArray(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},isXMLDoc:function isXMLDoc(elem){var namespace=elem&&elem.namespaceURI,docElem=elem&&(elem.ownerDocument||elem).documentElement;return!rhtmlSuffix.test(namespace||docElem&&docElem.nodeName||"HTML")},merge:function merge(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first},grep:function grep(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function map(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return flat(ret)},guid:1,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator]}jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(_i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=toType(obj);if(isFunction(obj)||isWindow(obj)){return false}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}function nodeName(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()}var pop=arr.pop;var sort=arr.sort;var splice=arr.splice;var whitespace="[\\x20\\t\\r\\n\\f]";var rtrimCSS=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g");jQuery.contains=function(a,b){var bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(a.contains?a.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))};var rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function fcssescape(ch,asCodePoint){if(asCodePoint){if(ch==="\0"){return"�"}return ch.slice(0,-1)+"\\"+ch.charCodeAt(ch.length-1).toString(16)+" "}return"\\"+ch}jQuery.escapeSelector=function(sel){return(sel+"").replace(rcssescape,fcssescape)};var preferredDoc=document,pushNative=push;(function(){var i,Expr,outermostContext,sortInput,hasDuplicate,push=pushNative,document,documentElement,documentIsHTML,rbuggyQSA,matches,expando=jQuery.expando,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),nonnativeSelectorCache=createCache(),sortOrder=function sortOrder(a,b){if(a===b){hasDuplicate=true}return 0},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|"+"loop|multiple|open|readonly|required|scoped",identifier="(?:\\\\[\\da-fA-F]{1,6}"+whitespace+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rleadingCombinator=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rdescend=new RegExp(whitespace+"|>"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,runescape=new RegExp("\\\\[\\da-fA-F]{1,6}"+whitespace+"?|\\\\([^\\r\\n\\f])","g"),funescape=function funescape(escape,nonHex){var high="0x"+escape.slice(1)-65536;if(nonHex){return nonHex}return high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)},unloadHandler=function unloadHandler(){setDocument()},inDisabledFieldset=addCombinator(function(elem){return elem.disabled===true&&nodeName(elem,"fieldset")},{dir:"parentNode",next:"legend"});function safeActiveElement(){try{return document.activeElement}catch(err){}}try{push.apply(arr=_slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:function apply(target,els){pushNative.apply(target,_slice.call(els))},call:function call(target){pushNative.apply(target,_slice.call(arguments,1))}}}function find(selector,context,results,seed){var m,i,elem,nid,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results}if(!seed){setDocument(context);context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if(m=match[1]){if(nodeType===9){if(elem=context.getElementById(m)){if(elem.id===m){push.call(results,elem);return results}}else{return results}}else{if(newContext&&(elem=newContext.getElementById(m))&&find.contains(context,elem)&&elem.id===m){push.call(results,elem);return results}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}}if(!nonnativeSelectorCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){newSelector=selector;newContext=context;if(nodeType===1&&(rdescend.test(selector)||rleadingCombinator.test(selector))){newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;if(newContext!=context||!support.scope){if(nid=context.getAttribute("id")){nid=jQuery.escapeSelector(nid)}else{context.setAttribute("id",nid=expando)}}groups=tokenize(selector);i=groups.length;while(i--){groups[i]=(nid?"#"+nid:":scope")+" "+toSelector(groups[i])}newSelector=groups.join(",")}try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){nonnativeSelectorCache(selector,true)}finally{if(nid===expando){context.removeAttribute("id")}}}}}return select(selector.replace(rtrimCSS,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()]}return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var el=document.createElement("fieldset");try{return!!fn(el)}catch(e){return false}finally{if(el.parentNode){el.parentNode.removeChild(el)}el=null}}function createInputPseudo(type){return function(elem){return nodeName(elem,"input")&&elem.type===type}}function createButtonPseudo(type){return function(elem){return(nodeName(elem,"input")||nodeName(elem,"button"))&&elem.type===type}}function createDisabledPseudo(disabled){return function(elem){if("form"in elem){if(elem.parentNode&&elem.disabled===false){if("label"in elem){if("label"in elem.parentNode){return elem.parentNode.disabled===disabled}else{return elem.disabled===disabled}}return elem.isDisabled===disabled||elem.isDisabled!==!disabled&&inDisabledFieldset(elem)===disabled}return elem.disabled===disabled}else if("label"in elem){return elem.disabled===disabled}return false}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[j=matchIndexes[i]]){seed[j]=!(matches[j]=seed[j])}}})})}function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context}function setDocument(node){var subWindow,doc=node?node.ownerDocument||node:preferredDoc;if(doc==document||doc.nodeType!==9||!doc.documentElement){return document}document=doc;documentElement=document.documentElement;documentIsHTML=!jQuery.isXMLDoc(document);matches=documentElement.matches||documentElement.webkitMatchesSelector||documentElement.msMatchesSelector;if(documentElement.msMatchesSelector&&preferredDoc!=document&&(subWindow=document.defaultView)&&subWindow.top!==subWindow){subWindow.addEventListener("unload",unloadHandler)}support.getById=assert(function(el){documentElement.appendChild(el).id=jQuery.expando;return!document.getElementsByName||!document.getElementsByName(jQuery.expando).length});support.disconnectedMatch=assert(function(el){return matches.call(el,"*")});support.scope=assert(function(){return document.querySelectorAll(":scope")});support.cssHas=assert(function(){try{document.querySelector(":has(*,:jqfake)");return false}catch(e){return true}});if(support.getById){Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}};Expr.find.ID=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var elem=context.getElementById(id);return elem?[elem]:[]}}}else{Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId}};Expr.find.ID=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var node,i,elems,elem=context.getElementById(id);if(elem){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem]}elems=context.getElementsByName(id);i=0;while(elem=elems[i++]){node=elem.getAttributeNode("id");if(node&&node.value===id){return[elem]}}}return[]}}}Expr.find.TAG=function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag)}else{return context.querySelectorAll(tag)}};Expr.find.CLASS=function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className)}};rbuggyQSA=[];assert(function(el){var input;documentElement.appendChild(el).innerHTML="<a id='"+expando+"' href='' disabled='disabled'></a>"+"<select id='"+expando+"-\r\\' disabled='disabled'>"+"<option selected=''></option></select>";if(!el.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")}if(!el.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=")}if(!el.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]")}if(!el.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}input=document.createElement("input");input.setAttribute("type","hidden");el.appendChild(input).setAttribute("name","D");documentElement.appendChild(el).disabled=true;if(el.querySelectorAll(":disabled").length!==2){rbuggyQSA.push(":enabled",":disabled")}input=document.createElement("input");input.setAttribute("name","");el.appendChild(input);if(!el.querySelectorAll("[name='']").length){rbuggyQSA.push("\\["+whitespace+"*name"+whitespace+"*="+whitespace+"*(?:''|\"\")")}});if(!support.cssHas){rbuggyQSA.push(":has")}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));sortOrder=function sortOrder(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare}compare=(a.ownerDocument||a)==(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===document||a.ownerDocument==preferredDoc&&find.contains(preferredDoc,a)){return-1}if(b===document||b.ownerDocument==preferredDoc&&find.contains(preferredDoc,b)){return 1}return sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0}return compare&4?-1:1};return document}find.matches=function(expr,elements){return find(expr,null,null,elements)};find.matchesSelector=function(elem,expr){setDocument(elem);if(documentIsHTML&&!nonnativeSelectorCache[expr+" "]&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){nonnativeSelectorCache(expr,true)}}return find(expr,document,null,[elem]).length>0};find.contains=function(context,elem){if((context.ownerDocument||context)!=document){setDocument(context)}return jQuery.contains(context,elem)};find.attr=function(elem,name){if((elem.ownerDocument||elem)!=document){setDocument(elem)}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;if(val!==undefined){return val}return elem.getAttribute(name)};find.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};jQuery.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.sortStable;sortInput=!support.sortStable&&_slice.call(results,0);sort.call(results,sortOrder);if(hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i)}}while(j--){splice.call(results,duplicates[j],1)}}sortInput=null;return results};jQuery.fn.uniqueSort=function(){return this.pushStack(jQuery.uniqueSort(_slice.apply(this)))};Expr=jQuery.expr={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function ATTR(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function CHILD(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){find.error(match[0])}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3]){find.error(match[0])}return match},PSEUDO:function PSEUDO(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr.CHILD.test(match[0])){return null}if(match[3]){match[2]=match[4]||match[5]||""}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{TAG:function TAG(nodeNameSelector){var expectedNodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return nodeName(elem,expectedNodeName)}},CLASS:function CLASS(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"")})},ATTR:function ATTR(name,operator,check){return function(elem){var result=find.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";if(operator==="="){return result===check}if(operator==="!="){return result!==check}if(operator==="^="){return check&&result.indexOf(check)===0}if(operator==="*="){return check&&result.indexOf(check)>-1}if(operator==="$="){return check&&result.slice(-check.length)===check}if(operator==="~="){return(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1}if(operator==="|="){return result===check||result.slice(0,check.length+1)===check+"-"}return false}},CHILD:function CHILD(type,what,_argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,_context,xml){var cache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while(node=node[dir]){if(ofType?nodeName(node,name):node.nodeType===1){return false}}start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if(node.nodeType===1&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}}else{if(useCache){outerCache=elem[expando]||(elem[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex}if(diff===false){while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if((ofType?nodeName(node,name):node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||(node[expando]={});outerCache[type]=[dirruns,diff]}if(node===elem){break}}}}}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function PSEUDO(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||find.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrimCSS,"$1"));return matcher[expando]?markFunction(function(seed,matches,_context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if(elem=unmatched[i]){seed[i]=!(matches[i]=elem)}}}):function(elem,_context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop()}}),has:markFunction(function(selector){return function(elem){return find(selector,elem).length>0}}),contains:markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||jQuery.text(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){find.error("unsupported lang: "+lang)}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),target:function target(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function root(elem){return elem===documentElement},focus:function focus(elem){return elem===safeActiveElement()&&document.hasFocus()&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:createDisabledPseudo(false),disabled:createDisabledPseudo(true),checked:function checked(elem){return nodeName(elem,"input")&&!!elem.checked||nodeName(elem,"option")&&!!elem.selected},selected:function selected(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},empty:function empty(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false}}return true},parent:function parent(elem){return!Expr.pseudos.empty(elem)},header:function header(elem){return rheader.test(elem.nodeName)},input:function input(elem){return rinputs.test(elem.nodeName)},button:function button(elem){return nodeName(elem,"input")&&elem.type==="button"||nodeName(elem,"button")},text:function text(elem){var attr;return nodeName(elem,"input")&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(_matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(_matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i;if(argument<0){i=argument+length}else if(argument>length){i=length}else{i=argument}for(;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i)}return matchIndexes})}};Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)}for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if(match=rleadingCombinator.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrimCSS," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}}if(!matched){break}}if(parseOnly){return soFar.length}return soFar?find.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value}return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,skip=combinator.next,key=skip||dir,checkNonElements=base&&key==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)}}return false}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true}}}}else{while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if(skip&&nodeName(elem,skip)){elem=elem[dir]||elem}else if((oldCache=outerCache[key])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return newCache[2]=oldCache[2]}else{outerCache[key]=newCache;if(newCache[2]=matcher(elem,context,xml)){return true}}}}}return false}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){find(selector,contexts[i],results)}return results}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if(elem=unmatched[i]){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,matcherOut,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems;if(matcher){matcherOut=postFinder||(seed?preFilter:preexisting||postFilter)?[]:results;matcher(matcherIn,matcherOut,context,xml)}else{matcherOut=matcherIn}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if(elem=temp[i]){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if(elem=matcherOut[i]){temp.push(matcherIn[i]=elem)}}postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!=outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret}];for(;i<len;i++){if(matcher=Expr.relative[tokens[i].type]){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrimCSS,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function superMatcher(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||.1,len=elems.length;if(outermost){outermostContext=context==document||context||outermost}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!=document){setDocument(elem);xml=!documentIsHTML}while(matcher=elementMatchers[j++]){if(matcher(elem,context||document,xml)){push.call(results,elem);break}}if(outermost){dirruns=dirrunsUnique}}if(bySet){if(elem=!matcher&&elem){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++]){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1){jQuery.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}function compile(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector)}i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector}return cached}function select(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results}else if(compiled){context=context.parentNode}selector=selector.slice(tokens.shift().value.length)}i=matchExpr.needsContext.test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type]){break}if(find=Expr.find[type]){if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results}support.sortStable=expando.split("").sort(sortOrder).join("")===expando;setDocument();support.sortDetached=assert(function(el){return el.compareDocumentPosition(document.createElement("fieldset"))&1});jQuery.find=find;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=jQuery.uniqueSort;find.compile=compile;find.select=select;find.setDocument=setDocument;find.tokenize=tokenize;find.escape=jQuery.escapeSelector;find.getText=jQuery.text;find.isXML=jQuery.isXMLDoc;find.selectors=jQuery.expr;find.support=jQuery.support;find.uniqueSort=jQuery.uniqueSort})();var dir=function dir(elem,_dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[_dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched};var _siblings=function siblings(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched};var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function winnow(elements,qualifier,not){if(isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not})}if(typeof qualifier!=="string"){return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>-1!==not})}return jQuery.filter(qualifier,elements,not)}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}if(elems.length===1&&elem.nodeType===1){return jQuery.find.matchesSelector(elem,expr)?[elem]:[]}return jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function find(selector){var i,ret,len=this.length,self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}ret=this.pushStack([]);for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}return len>1?jQuery.uniqueSort(ret):ret},filter:function filter(selector){return this.pushStack(winnow(this,selector||[],false))},not:function not(selector){return this.pushStack(winnow(this,selector||[],true))},is:function is(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this}root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem){this[0]=elem;this.length=1}return this}}else if(!context||context.jquery){return(context||root).find(selector)}else{return this.constructor(context).find(selector)}}else if(selector.nodeType){this[0]=selector;this.length=1;return this}else if(isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery)}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function has(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function closest(selectors,context){var cur,i=0,l=this.length,matched=[],targets=typeof selectors!=="string"&&jQuery(selectors);if(!rneedsContext.test(selectors)){for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(targets?targets.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched)},index:function index(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])}return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function add(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function addBack(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function parent(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function parents(elem){return dir(elem,"parentNode")},parentsUntil:function parentsUntil(elem,_i,until){return dir(elem,"parentNode",until)},next:function next(elem){return sibling(elem,"nextSibling")},prev:function prev(elem){return sibling(elem,"previousSibling")},nextAll:function nextAll(elem){return dir(elem,"nextSibling")},prevAll:function prevAll(elem){return dir(elem,"previousSibling")},nextUntil:function nextUntil(elem,_i,until){return dir(elem,"nextSibling",until)},prevUntil:function prevUntil(elem,_i,until){return dir(elem,"previousSibling",until)},siblings:function siblings(elem){return _siblings((elem.parentNode||{}).firstChild,elem)},children:function children(elem){return _siblings(elem.firstChild)},contents:function contents(elem){if(elem.contentDocument!=null&&getProto(elem.contentDocument)){return elem.contentDocument}if(nodeName(elem,"template")){elem=elem.content||elem}return jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched)}if(rparentsprev.test(name)){matched.reverse()}}return this.pushStack(matched)}});var rnothtmlwhite=/[^\x20\t\r\n\f]+/g;function createOptions(options){var object={};jQuery.each(options.match(rnothtmlwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var firing,memory,_fired,_locked,list=[],queue=[],firingIndex=-1,fire=function fire(){_locked=_locked||options.once;_fired=firing=true;for(;queue.length;firingIndex=-1){memory=queue.shift();while(++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false}}}if(!options.memory){memory=false}firing=false;if(_locked){if(memory){list=[]}else{list=""}}},self={add:function add(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory)}(function add(args){jQuery.each(args,function(_,arg){if(isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg)}}else if(arg&&arg.length&&toType(arg)!=="string"){add(arg)}})})(arguments);if(memory&&!firing){fire()}}return this},remove:function remove(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex){firingIndex--}}});return this},has:function has(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0},empty:function empty(){if(list){list=[]}return this},disable:function disable(){_locked=queue=[];list=memory="";return this},disabled:function disabled(){return!list},lock:function lock(){_locked=queue=[];if(!memory&&!firing){list=memory=""}return this},locked:function locked(){return!!_locked},fireWith:function fireWith(context,args){if(!_locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire()}}return this},fire:function fire(){self.fireWith(this,arguments);return this},fired:function fired(){return!!_fired}};return self};function Identity(v){return v}function Thrower(ex){throw ex}function adoptValue(value,resolve,reject,noValue){var method;try{if(value&&isFunction(method=value.promise)){method.call(value).done(resolve).fail(reject)}else if(value&&isFunction(method=value.then)){method.call(value,resolve,reject)}else{resolve.apply(undefined,[value].slice(noValue))}}catch(value){reject.apply(undefined,[value])}}jQuery.extend({Deferred:function Deferred(func){var tuples=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],_state="pending",_promise={state:function state(){return _state},always:function always(){deferred.done(arguments).fail(arguments);return this},catch:function _catch(fn){return _promise.then(null,fn)},pipe:function pipe(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(_i,tuple){var fn=isFunction(fns[tuple[4]])&&fns[tuple[4]];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject)}else{newDefer[tuple[0]+"With"](this,fn?[returned]:arguments)}})});fns=null}).promise()},then:function then(onFulfilled,onRejected,onProgress){var maxDepth=0;function resolve(depth,deferred,handler,special){return function(){var that=this,args=arguments,mightThrow=function mightThrow(){var returned,then;if(depth<maxDepth){return}returned=handler.apply(that,args);if(returned===deferred.promise()){throw new TypeError("Thenable self-resolution")}then=returned&&(_typeof(returned)==="object"||typeof returned==="function")&&returned.then;if(isFunction(then)){if(special){then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special))}else{maxDepth++;then.call(returned,resolve(maxDepth,deferred,Identity,special),resolve(maxDepth,deferred,Thrower,special),resolve(maxDepth,deferred,Identity,deferred.notifyWith))}}else{if(handler!==Identity){that=undefined;args=[returned]}(special||deferred.resolveWith)(that,args)}},process=special?mightThrow:function(){try{mightThrow()}catch(e){if(jQuery.Deferred.exceptionHook){jQuery.Deferred.exceptionHook(e,process.error)}if(depth+1>=maxDepth){if(handler!==Thrower){that=undefined;args=[e]}deferred.rejectWith(that,args)}}};if(depth){process()}else{if(jQuery.Deferred.getErrorHook){process.error=jQuery.Deferred.getErrorHook()}else if(jQuery.Deferred.getStackHook){process.error=jQuery.Deferred.getStackHook()}window.setTimeout(process)}}}return jQuery.Deferred(function(newDefer){tuples[0][3].add(resolve(0,newDefer,isFunction(onProgress)?onProgress:Identity,newDefer.notifyWith));tuples[1][3].add(resolve(0,newDefer,isFunction(onFulfilled)?onFulfilled:Identity));tuples[2][3].add(resolve(0,newDefer,isFunction(onRejected)?onRejected:Thrower))}).promise()},promise:function promise(obj){return obj!=null?jQuery.extend(obj,_promise):_promise}},deferred={};jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[5];_promise[tuple[1]]=list.add;if(stateString){list.add(function(){_state=stateString},tuples[3-i][2].disable,tuples[3-i][3].disable,tuples[0][2].lock,tuples[0][3].lock)}list.add(tuple[3].fire);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?undefined:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});_promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function when(singleValue){var remaining=arguments.length,i=remaining,resolveContexts=Array(i),resolveValues=_slice.call(arguments),primary=jQuery.Deferred(),updateFunc=function updateFunc(i){return function(value){resolveContexts[i]=this;resolveValues[i]=arguments.length>1?_slice.call(arguments):value;if(!--remaining){primary.resolveWith(resolveContexts,resolveValues)}}};if(remaining<=1){adoptValue(singleValue,primary.done(updateFunc(i)).resolve,primary.reject,!remaining);if(primary.state()==="pending"||isFunction(resolveValues[i]&&resolveValues[i].then)){return primary.then()}}while(i--){adoptValue(resolveValues[i],updateFunc(i),primary.reject)}return primary.promise()}});var rerrorNames=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(error,asyncError){if(window.console&&window.console.warn&&error&&rerrorNames.test(error.name)){window.console.warn("jQuery.Deferred exception: "+error.message,error.stack,asyncError)}};jQuery.readyException=function(error){window.setTimeout(function(){throw error})};var readyList=jQuery.Deferred();jQuery.fn.ready=function(fn){readyList.then(fn)["catch"](function(error){jQuery.readyException(error)});return this};jQuery.extend({isReady:false,readyWait:1,ready:function ready(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery])}});jQuery.ready.then=readyList.then;function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready()}if(document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll){window.setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed)}var access=function access(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(toType(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw)}}else if(value!==undefined){chainable=true;if(!isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function fn(elem,_key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}if(chainable){return elems}if(bulk){return fn.call(elems)}return len?fn(elems[0],key):emptyGet};var rmsPrefix=/^-ms-/,rdashAlpha=/-([a-z])/g;function fcamelCase(_all,letter){return letter.toUpperCase()}function camelCase(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)}var acceptData=function acceptData(owner){return owner.nodeType===1||owner.nodeType===9||!+owner.nodeType};function Data(){this.expando=jQuery.expando+Data.uid++}Data.uid=1;Data.prototype={cache:function cache(owner){var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true})}}}return value},set:function set(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[camelCase(data)]=value}else{for(prop in data){cache[camelCase(prop)]=data[prop]}}return cache},get:function get(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][camelCase(key)]},access:function access(owner,key,value){if(key===undefined||key&&typeof key==="string"&&value===undefined){return this.get(owner,key)}this.set(owner,key,value);return value!==undefined?value:key},remove:function remove(owner,key){var i,cache=owner[this.expando];if(cache===undefined){return}if(key!==undefined){if(Array.isArray(key)){key=key.map(camelCase)}else{key=camelCase(key);key=key in cache?[key]:key.match(rnothtmlwhite)||[]}i=key.length;while(i--){delete cache[key[i]]}}if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined}else{delete owner[this.expando]}}},hasData:function hasData(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache)}};var dataPriv=new Data;var dataUser=new Data;var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function getData(data){if(data==="true"){return true}if(data==="false"){return false}if(data==="null"){return null}if(data===+data+""){return+data}if(rbrace.test(data)){return JSON.parse(data)}return data}function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=getData(data)}catch(e){}dataUser.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({hasData:function hasData(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem)},data:function data(elem,name,_data){return dataUser.access(elem,name,_data)},removeData:function removeData(elem,name){dataUser.remove(elem,name)},_data:function _data(elem,name,data){return dataPriv.access(elem,name,data)},_removeData:function _removeData(elem,name){dataPriv.remove(elem,name)}});jQuery.fn.extend({data:function data(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=camelCase(name.slice(5));dataAttr(elem,name,data[name])}}}dataPriv.set(elem,"hasDataAttrs",true)}}return data}if(_typeof(key)==="object"){return this.each(function(){dataUser.set(this,key)})}return access(this,function(value){var data;if(elem&&value===undefined){data=dataUser.get(elem,key);if(data!==undefined){return data}data=dataAttr(elem,key);if(data!==undefined){return data}return}this.each(function(){dataUser.set(this,key,value)})},null,value,arguments.length>1,null,true)},removeData:function removeData(key){return this.each(function(){dataUser.remove(this,key)})}});jQuery.extend({queue:function queue(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||Array.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function dequeue(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function next(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function _queueHooks(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function queue(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function dequeue(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function clearQueue(type){return this.queue(type||"fx",[])},promise:function promise(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function resolve(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var documentElement=document.documentElement;var isAttached=function isAttached(elem){return jQuery.contains(elem.ownerDocument,elem)},composed={composed:true};if(documentElement.getRootNode){isAttached=function isAttached(elem){return jQuery.contains(elem.ownerDocument,elem)||elem.getRootNode(composed)===elem.ownerDocument}}var isHiddenWithinTree=function isHiddenWithinTree(elem,el){elem=el||elem;return elem.style.display==="none"||elem.style.display===""&&isAttached(elem)&&jQuery.css(elem,"display")==="none"};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=elem.nodeType&&(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){initial=initial/2;unit=unit||initialInUnit[3];initialInUnit=+initial||1;while(maxIterations--){jQuery.style(elem,prop,initialInUnit+unit);if((1-scale)*(1-(scale=currentValue()/initial||.5))<=0){maxIterations=0}initialInUnit=initialInUnit/scale}initialInUnit=initialInUnit*2;jQuery.style(elem,prop,initialInUnit+unit);valueParts=valueParts||[]}if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted}}return adjusted}var defaultDisplayMap={};function getDefaultDisplay(elem){var temp,doc=elem.ownerDocument,nodeName=elem.nodeName,display=defaultDisplayMap[nodeName];if(display){return display}temp=doc.body.appendChild(doc.createElement(nodeName));display=jQuery.css(temp,"display");temp.parentNode.removeChild(temp);if(display==="none"){display="block"}defaultDisplayMap[nodeName]=display;return display}function showHide(elements,show){var display,elem,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}display=elem.style.display;if(show){if(display==="none"){values[index]=dataPriv.get(elem,"display")||null;if(!values[index]){elem.style.display=""}}if(elem.style.display===""&&isHiddenWithinTree(elem)){values[index]=getDefaultDisplay(elem)}}else{if(display!=="none"){values[index]="none";dataPriv.set(elem,"display",display)}}}for(index=0;index<length;index++){if(values[index]!=null){elements[index].style.display=values[index]}}return elements}jQuery.fn.extend({show:function show(){return showHide(this,true)},hide:function hide(){return showHide(this)},toggle:function toggle(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHiddenWithinTree(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});var rcheckableType=/^(?:checkbox|radio)$/i;var rtagName=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i;var rscriptType=/^$|^module$|\/(?:java|ecma)script/i;(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;div.innerHTML="<option></option>";support.option=!!div.lastChild})();var wrapMap={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!support.option){wrapMap.optgroup=wrapMap.option=[1,"<select multiple='multiple'>","</select>"]}function getAll(context,tag){var ret;if(typeof context.getElementsByTagName!=="undefined"){ret=context.getElementsByTagName(tag||"*")}else if(typeof context.querySelectorAll!=="undefined"){ret=context.querySelectorAll(tag||"*")}else{ret=[]}if(tag===undefined||tag&&nodeName(context,tag)){return jQuery.merge([context],ret)}return ret}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"))}}var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,attached,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(toType(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored){ignored.push(elem)}continue}attached=isAttached(elem);tmp=getAll(fragment.appendChild(elem),"script");if(attached){setGlobalEval(tmp)}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment}var rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true}function returnFalse(){return false}function _on(elem,types,selector,data,fn,one){var origFn,type;if(_typeof(types)==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){_on(elem,type,selector,data,types[type],one)}return elem}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return elem}if(one===1){origFn=fn;fn=function fn(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return elem.each(function(){jQuery.event.add(this,types,fn,data,selector)})}jQuery.event={global:{},add:function add(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!acceptData(elem)){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(selector){jQuery.find.matchesSelector(documentElement,selector)}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events=Object.create(null)}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined}}types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}},remove:function remove(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnothtmlwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events")}},dispatch:function dispatch(nativeEvent){var i,j,ret,matched,handleObj,handlerQueue,args=new Array(arguments.length),event=jQuery.event.fix(nativeEvent),handlers=(dataPriv.get(this,"events")||Object.create(null))[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;for(i=1;i<arguments.length;i++){args[i]=arguments[i]}event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||handleObj.namespace===false||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function handlers(event,_handlers){var i,handleObj,sel,matchedHandlers,matchedSelectors,handlerQueue=[],delegateCount=_handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&!(event.type==="click"&&event.button>=1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&!(event.type==="click"&&cur.disabled===true)){matchedHandlers=[];matchedSelectors={};for(i=0;i<delegateCount;i++){handleObj=_handlers[i];sel=handleObj.selector+" ";if(matchedSelectors[sel]===undefined){matchedSelectors[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length}if(matchedSelectors[sel]){matchedHandlers.push(handleObj)}}if(matchedHandlers.length){handlerQueue.push({elem:cur,handlers:matchedHandlers})}}}}cur=this;if(delegateCount<_handlers.length){handlerQueue.push({elem:cur,handlers:_handlers.slice(delegateCount)})}return handlerQueue},addProp:function addProp(name,hook){Object.defineProperty(jQuery.Event.prototype,name,{enumerable:true,configurable:true,get:isFunction(hook)?function(){if(this.originalEvent){return hook(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[name]}},set:function set(value){Object.defineProperty(this,name,{enumerable:true,configurable:true,writable:true,value:value})}})},fix:function fix(originalEvent){return originalEvent[jQuery.expando]?originalEvent:new jQuery.Event(originalEvent)},special:{load:{noBubble:true},click:{setup:function setup(data){var el=this||data;if(rcheckableType.test(el.type)&&el.click&&nodeName(el,"input")){leverageNative(el,"click",true)}return false},trigger:function trigger(data){var el=this||data;if(rcheckableType.test(el.type)&&el.click&&nodeName(el,"input")){leverageNative(el,"click")}return true},_default:function _default(event){var target=event.target;return rcheckableType.test(target.type)&&target.click&&nodeName(target,"input")&&dataPriv.get(target,"click")||nodeName(target,"a")}},beforeunload:{postDispatch:function postDispatch(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result}}}}};function leverageNative(el,type,isSetup){if(!isSetup){if(dataPriv.get(el,type)===undefined){jQuery.event.add(el,type,returnTrue)}return}dataPriv.set(el,type,false);jQuery.event.add(el,type,{namespace:false,handler:function handler(event){var result,saved=dataPriv.get(this,type);if(event.isTrigger&1&&this[type]){if(!saved){saved=_slice.call(arguments);dataPriv.set(this,type,saved);this[type]();result=dataPriv.get(this,type);dataPriv.set(this,type,false);if(saved!==result){event.stopImmediatePropagation();event.preventDefault();return result}}else if((jQuery.event.special[type]||{}).delegateType){event.stopPropagation()}}else if(saved){dataPriv.set(this,type,jQuery.event.trigger(saved[0],saved.slice(1),this));event.stopPropagation();event.isImmediatePropagationStopped=returnTrue}}})}jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse;this.target=src.target&&src.target.nodeType===3?src.target.parentNode:src.target;this.currentTarget=src.currentTarget;this.relatedTarget=src.relatedTarget}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||Date.now();this[jQuery.expando]=true};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:false,preventDefault:function preventDefault(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function stopPropagation(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function stopImmediatePropagation(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};jQuery.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,code:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:true},jQuery.event.addProp);jQuery.each({focus:"focusin",blur:"focusout"},function(type,delegateType){function focusMappedHandler(nativeEvent){if(document.documentMode){var handle=dataPriv.get(this,"handle"),event=jQuery.event.fix(nativeEvent);event.type=nativeEvent.type==="focusin"?"focus":"blur";event.isSimulated=true;handle(nativeEvent);if(event.target===event.currentTarget){handle(event)}}else{jQuery.event.simulate(delegateType,nativeEvent.target,jQuery.event.fix(nativeEvent))}}jQuery.event.special[type]={setup:function setup(){var attaches;leverageNative(this,type,true);if(document.documentMode){attaches=dataPriv.get(this,delegateType);if(!attaches){this.addEventListener(delegateType,focusMappedHandler)}dataPriv.set(this,delegateType,(attaches||0)+1)}else{return false}},trigger:function trigger(){leverageNative(this,type);return true},teardown:function teardown(){var attaches;if(document.documentMode){attaches=dataPriv.get(this,delegateType)-1;if(!attaches){this.removeEventListener(delegateType,focusMappedHandler);dataPriv.remove(this,delegateType)}else{dataPriv.set(this,delegateType,attaches)}}else{return false}},_default:function _default(event){return dataPriv.get(event.target,type)},delegateType:delegateType};jQuery.event.special[delegateType]={setup:function setup(){var doc=this.ownerDocument||this.document||this,dataHolder=document.documentMode?this:doc,attaches=dataPriv.get(dataHolder,delegateType);if(!attaches){if(document.documentMode){this.addEventListener(delegateType,focusMappedHandler)}else{doc.addEventListener(type,focusMappedHandler,true)}}dataPriv.set(dataHolder,delegateType,(attaches||0)+1)},teardown:function teardown(){var doc=this.ownerDocument||this.document||this,dataHolder=document.documentMode?this:doc,attaches=dataPriv.get(dataHolder,delegateType)-1;if(!attaches){if(document.documentMode){this.removeEventListener(delegateType,focusMappedHandler)}else{doc.removeEventListener(type,focusMappedHandler,true)}dataPriv.remove(dataHolder,delegateType)}else{dataPriv.set(dataHolder,delegateType,attaches)}}}});jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function handle(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});jQuery.fn.extend({on:function on(types,selector,data,fn){return _on(this,types,selector,data,fn)},one:function one(types,selector,data,fn){return _on(this,types,selector,data,fn,1)},off:function off(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(_typeof(types)==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})}});var rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rcleanScript=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function manipulationTarget(elem,content){if(nodeName(elem,"table")&&nodeName(content.nodeType!==11?content:content.firstChild,"tr")){return jQuery(elem).children("tbody")[0]||elem}return elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){if((elem.type||"").slice(0,5)==="true/"){elem.type=elem.type.slice(5)}else{elem.removeAttribute("type")}return elem}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(dataPriv.hasData(src)){pdataOld=dataPriv.get(src);events=pdataOld.events;if(events){dataPriv.remove(dest,"handle events");for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur)}}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}function domManip(collection,args,callback,ignored){args=flat(args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],valueIsFunction=isFunction(value);if(valueIsFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return collection.each(function(index){var self=collection.eq(index);if(valueIsFunction){args[0]=value.call(this,index,self.html())}domManip(self,args,callback,ignored)})}if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(collection[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src&&(node.type||"").toLowerCase()!=="module"){if(jQuery._evalUrl&&!node.noModule){jQuery._evalUrl(node.src,{nonce:node.nonce||node.getAttribute("nonce")},doc)}}else{DOMEval(node.textContent.replace(rcleanScript,""),node,doc)}}}}}}return collection}function _remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node))}if(node.parentNode){if(keepData&&isAttached(node)){setGlobalEval(getAll(node,"script"))}node.parentNode.removeChild(node)}}return elem}jQuery.extend({htmlPrefilter:function htmlPrefilter(html){return html},clone:function clone(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=isAttached(elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},cleanData:function cleanData(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(acceptData(elem)){if(data=elem[dataPriv.expando]){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}elem[dataPriv.expando]=undefined}if(elem[dataUser.expando]){elem[dataUser.expando]=undefined}}}}});jQuery.fn.extend({detach:function detach(selector){return _remove(this,selector,true)},remove:function remove(selector){return _remove(this,selector)},text:function text(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value}})},null,value,arguments.length)},append:function append(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function prepend(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function before(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function after(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},empty:function empty(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function clone(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function html(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function replaceWith(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this)}}},ignored)}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var rcustomProp=/^--/;var getStyles=function getStyles(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window}return view.getComputedStyle(elem)};var swap=function swap(elem,options,callback){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.call(elem);for(name in options){elem.style[name]=old[name]}return ret};var rboxStyle=new RegExp(cssExpand.join("|"),"i");(function(){function computeStyleTests(){if(!div){return}container.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";div.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";documentElement.appendChild(container).appendChild(div);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=roundPixelMeasures(divStyle.marginLeft)===12;div.style.right="60%";pixelBoxStylesVal=roundPixelMeasures(divStyle.right)===36;boxSizingReliableVal=roundPixelMeasures(divStyle.width)===36;div.style.position="absolute";scrollboxSizeVal=roundPixelMeasures(div.offsetWidth/3)===12;documentElement.removeChild(container);div=null}function roundPixelMeasures(measure){return Math.round(parseFloat(measure))}var pixelPositionVal,boxSizingReliableVal,scrollboxSizeVal,pixelBoxStylesVal,reliableTrDimensionsVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";jQuery.extend(support,{boxSizingReliable:function boxSizingReliable(){computeStyleTests();return boxSizingReliableVal},pixelBoxStyles:function pixelBoxStyles(){computeStyleTests();return pixelBoxStylesVal},pixelPosition:function pixelPosition(){computeStyleTests();return pixelPositionVal},reliableMarginLeft:function reliableMarginLeft(){computeStyleTests();return reliableMarginLeftVal},scrollboxSize:function scrollboxSize(){computeStyleTests();return scrollboxSizeVal},reliableTrDimensions:function reliableTrDimensions(){var table,tr,trChild,trStyle;if(reliableTrDimensionsVal==null){table=document.createElement("table");tr=document.createElement("tr");trChild=document.createElement("div");table.style.cssText="position:absolute;left:-11111px;border-collapse:separate";tr.style.cssText="box-sizing:content-box;border:1px solid";tr.style.height="1px";trChild.style.height="9px";trChild.style.display="block";documentElement.appendChild(table).appendChild(tr).appendChild(trChild);trStyle=window.getComputedStyle(tr);reliableTrDimensionsVal=parseInt(trStyle.height,10)+parseInt(trStyle.borderTopWidth,10)+parseInt(trStyle.borderBottomWidth,10)===tr.offsetHeight;documentElement.removeChild(table)}return reliableTrDimensionsVal}})})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,isCustomProp=rcustomProp.test(name),style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name];if(isCustomProp&&ret){ret=ret.replace(rtrimCSS,"$1")||undefined}if(ret===""&&!isAttached(elem)){ret=jQuery.style(elem,name)}if(!support.pixelBoxStyles()&&rnumnonpx.test(ret)&&rboxStyle.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function get(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}var cssPrefixes=["Webkit","Moz","ms"],emptyStyle=document.createElement("div").style,vendorProps={};function vendorPropName(name){var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name}}}function finalPropName(name){var _final=jQuery.cssProps[name]||vendorProps[name];if(_final){return _final}if(name in emptyStyle){return name}return vendorProps[name]=vendorPropName(name)||name}var rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"};function setPositiveNumber(_elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value}function boxModelAdjustment(elem,dimension,box,isBorderBox,styles,computedVal){var i=dimension==="width"?1:0,extra=0,delta=0,marginDelta=0;if(box===(isBorderBox?"border":"content")){return 0}for(;i<4;i+=2){if(box==="margin"){marginDelta+=jQuery.css(elem,box+cssExpand[i],true,styles)}if(!isBorderBox){delta+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(box!=="padding"){delta+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}else{extra+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{if(box==="content"){delta-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(box!=="margin"){delta-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}if(!isBorderBox&&computedVal>=0){delta+=Math.max(0,Math.ceil(elem["offset"+dimension[0].toUpperCase()+dimension.slice(1)]-computedVal-delta-extra-.5))||0}return delta+marginDelta}function getWidthOrHeight(elem,dimension,extra){var styles=getStyles(elem),boxSizingNeeded=!support.boxSizingReliable()||extra,isBorderBox=boxSizingNeeded&&jQuery.css(elem,"boxSizing",false,styles)==="border-box",valueIsBorderBox=isBorderBox,val=curCSS(elem,dimension,styles),offsetProp="offset"+dimension[0].toUpperCase()+dimension.slice(1);if(rnumnonpx.test(val)){if(!extra){return val}val="auto"}if((!support.boxSizingReliable()&&isBorderBox||!support.reliableTrDimensions()&&nodeName(elem,"tr")||val==="auto"||!parseFloat(val)&&jQuery.css(elem,"display",false,styles)==="inline")&&elem.getClientRects().length){isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";valueIsBorderBox=offsetProp in elem;if(valueIsBorderBox){val=elem[offsetProp]}}val=parseFloat(val)||0;return val+boxModelAdjustment(elem,dimension,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles,val)+"px"}jQuery.extend({cssHooks:{opacity:{get:function get(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{animationIterationCount:true,aspectRatio:true,borderImageSlice:true,columnCount:true,flexGrow:true,flexShrink:true,fontWeight:true,gridArea:true,gridColumn:true,gridColumnEnd:true,gridColumnStart:true,gridRow:true,gridRowEnd:true,gridRowStart:true,lineHeight:true,opacity:true,order:true,orphans:true,scale:true,widows:true,zIndex:true,zoom:true,fillOpacity:true,floodOpacity:true,stopOpacity:true,strokeMiterlimit:true,strokeOpacity:true},cssProps:{},style:function style(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=camelCase(name),isCustomProp=rcustomProp.test(name),style=elem.style;if(!isCustomProp){name=finalPropName(origName)}hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=_typeof(value);if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number"}if(value==null||value!==value){return}if(type==="number"&&!isCustomProp){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px")}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){if(isCustomProp){style.setProperty(name,value)}else{style[name]=value}}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function css(elem,name,extra,styles){var val,num,hooks,origName=camelCase(name),isCustomProp=rcustomProp.test(name);if(!isCustomProp){name=finalPropName(origName)}hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val}return val}});jQuery.each(["height","width"],function(_i,dimension){jQuery.cssHooks[dimension]={get:function get(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&(!elem.getClientRects().length||!elem.getBoundingClientRect().width)?swap(elem,cssShow,function(){return getWidthOrHeight(elem,dimension,extra)}):getWidthOrHeight(elem,dimension,extra)}},set:function set(elem,value,extra){var matches,styles=getStyles(elem),scrollboxSizeBuggy=!support.scrollboxSize()&&styles.position==="absolute",boxSizingNeeded=scrollboxSizeBuggy||extra,isBorderBox=boxSizingNeeded&&jQuery.css(elem,"boxSizing",false,styles)==="border-box",subtract=extra?boxModelAdjustment(elem,dimension,extra,isBorderBox,styles):0;if(isBorderBox&&scrollboxSizeBuggy){subtract-=Math.ceil(elem["offset"+dimension[0].toUpperCase()+dimension.slice(1)]-parseFloat(styles[dimension])-boxModelAdjustment(elem,dimension,"border",false,styles)-.5)}if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[dimension]=value;value=jQuery.css(elem,dimension)}return setPositiveNumber(elem,value,subtract)}}});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left}))+"px"}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function expand(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(prefix!=="margin"){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function css(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(Array.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function init(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function cur(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function run(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function get(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function set(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else if(tween.elem.nodeType===1&&(jQuery.cssHooks[tween.prop]||tween.elem.style[finalPropName(tween.prop)]!=null)){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function set(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.easing={linear:function linear(p){return p},swing:function swing(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,inProgress,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function schedule(){if(inProgress){if(document.hidden===false&&window.requestAnimationFrame){window.requestAnimationFrame(schedule)}else{window.setTimeout(schedule,jQuery.fx.interval)}jQuery.fx.tick()}}function createFxNow(){window.setTimeout(function(){fxNow=undefined});return fxNow=Date.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(tween=collection[index].call(animation,prop,value)){return tween}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,hooks,oldfire,propTween,restoreDisplay,display,isBox="width"in props||"height"in props,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHiddenWithinTree(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}for(prop in props){value=props[prop];if(rfxtypes.test(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true}else{continue}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}}propTween=!jQuery.isEmptyObject(props);if(!propTween&&jQuery.isEmptyObject(orig)){return}if(isBox&&elem.nodeType===1){opts.overflow=[style.overflow,style.overflowX,style.overflowY];restoreDisplay=dataShow&&dataShow.display;if(restoreDisplay==null){restoreDisplay=dataPriv.get(elem,"display")}display=jQuery.css(elem,"display");if(display==="none"){if(restoreDisplay){display=restoreDisplay}else{showHide([elem],true);restoreDisplay=elem.style.display||restoreDisplay;display=jQuery.css(elem,"display");showHide([elem])}}if(display==="inline"||display==="inline-block"&&restoreDisplay!=null){if(jQuery.css(elem,"float")==="none"){if(!propTween){anim.done(function(){style.display=restoreDisplay});if(restoreDisplay==null){display=style.display;restoreDisplay=display==="none"?"":display}}style.display="inline-block"}}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}propTween=false;for(prop in orig){if(!propTween){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden}}else{dataShow=dataPriv.access(elem,"fxshow",{display:restoreDisplay})}if(toggle){dataShow.hidden=!hidden}if(hidden){showHide([elem],true)}anim.done(function(){if(!hidden){showHide([elem])}dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop])}})}propTween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=propTween.start;if(hidden){propTween.end=propTween.start;propTween.start=0}}}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=camelCase(index);easing=specialEasing[name];value=props[index];if(Array.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function tick(){if(stopped){return false}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}if(!length){deferred.notifyWith(elem,[animation,1,0])}deferred.resolveWith(elem,[animation]);return false},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function createTween(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function stop(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this}stopped=true;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=result.stop.bind(result)}return result}}jQuery.map(props,createTween,animation);if(isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween}]},tweener:function tweener(props,callback){if(isFunction(props)){callback=props;props=["*"]}else{props=props.match(rnothtmlwhite)}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback)}},prefilters:[defaultPrefilter],prefilter:function prefilter(callback,prepend){if(prepend){Animation.prefilters.unshift(callback)}else{Animation.prefilters.push(callback)}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&_typeof(speed)==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!isFunction(easing)&&easing};if(jQuery.fx.off){opt.duration=0}else{if(typeof opt.duration!=="number"){if(opt.duration in jQuery.fx.speeds){opt.duration=jQuery.fx.speeds[opt.duration]}else{opt.duration=jQuery.fx.speeds._default}}}if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.fn.extend({fadeTo:function fadeTo(speed,to,easing,callback){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function animate(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function doAnimation(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true)}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function stop(type,clearQueue,gotoEnd){var stopQueue=function stopQueue(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})},finish:function finish(type){if(type!==false){type=type||"fx"}return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true)}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)}}delete data.finish})}});jQuery.each(["toggle","show","hide"],function(_i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=Date.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);jQuery.fx.start()};jQuery.fx.interval=13;jQuery.fx.start=function(){if(inProgress){return}inProgress=true;schedule()};jQuery.fx.stop=function(){inProgress=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function attr(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function removeAttr(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function attr(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){hooks=jQuery.attrHooks[name.toLowerCase()]||(jQuery.expr.match.bool.test(name)?boolHook:undefined)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return}if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}elem.setAttribute(name,value+"");return value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret},attrHooks:{type:{set:function set(elem,value){if(!support.radioValue&&value==="radio"&&nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}},removeAttr:function removeAttr(elem,value){var name,i=0,attrNames=value&&value.match(rnothtmlwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){elem.removeAttribute(name)}}}});boolHook={set:function set(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(_i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle,lowercaseName=name.toLowerCase();if(!isXML){handle=attrHandle[lowercaseName];attrHandle[lowercaseName]=ret;ret=getter(elem,name,isXML)!=null?lowercaseName:null;attrHandle[lowercaseName]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function prop(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function removeProp(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({prop:function prop(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}return elem[name]=value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}return elem[name]},propHooks:{tabIndex:{get:function get(elem){var tabindex=jQuery.find.attr(elem,"tabindex");if(tabindex){return parseInt(tabindex,10)}if(rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function get(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null},set:function set(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});function stripAndCollapse(value){var tokens=value.match(rnothtmlwhite)||[];return tokens.join(" ")}function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||""}function classesToArray(value){if(Array.isArray(value)){return value}if(typeof value==="string"){return value.match(rnothtmlwhite)||[]}return[]}jQuery.fn.extend({addClass:function addClass(value){var classNames,cur,curValue,className,i,finalValue;if(isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))})}classNames=classesToArray(value);if(classNames.length){return this.each(function(){curValue=getClass(this);cur=this.nodeType===1&&" "+stripAndCollapse(curValue)+" ";if(cur){for(i=0;i<classNames.length;i++){className=classNames[i];if(cur.indexOf(" "+className+" ")<0){cur+=className+" "}}finalValue=stripAndCollapse(cur);if(curValue!==finalValue){this.setAttribute("class",finalValue)}}})}return this},removeClass:function removeClass(value){var classNames,cur,curValue,className,i,finalValue;if(isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))})}if(!arguments.length){return this.attr("class","")}classNames=classesToArray(value);if(classNames.length){return this.each(function(){curValue=getClass(this);cur=this.nodeType===1&&" "+stripAndCollapse(curValue)+" ";if(cur){for(i=0;i<classNames.length;i++){className=classNames[i];while(cur.indexOf(" "+className+" ")>-1){cur=cur.replace(" "+className+" "," ")}}finalValue=stripAndCollapse(cur);if(curValue!==finalValue){this.setAttribute("class",finalValue)}}})}return this},toggleClass:function toggleClass(value,stateVal){var classNames,className,i,self,type=_typeof(value),isValidValue=type==="string"||Array.isArray(value);if(isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal)})}if(typeof stateVal==="boolean"&&isValidValue){return stateVal?this.addClass(value):this.removeClass(value)}classNames=classesToArray(value);return this.each(function(){if(isValidValue){self=jQuery(this);for(i=0;i<classNames.length;i++){className=classNames[i];if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className)}if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"")}}})},hasClass:function hasClass(selector){var className,elem,i=0;className=" "+selector+" ";while(elem=this[i++]){if(elem.nodeType===1&&(" "+stripAndCollapse(getClass(elem))+" ").indexOf(className)>-1){return true}}return false}});var rreturn=/\r/g;jQuery.fn.extend({val:function val(value){var hooks,ret,valueIsFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;if(typeof ret==="string"){return ret.replace(rreturn,"")}return ret==null?"":ret}return}valueIsFunction=isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(valueIsFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(Array.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function get(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:stripAndCollapse(jQuery.text(elem))}},select:{get:function get(elem){var value,option,i,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one",values=one?null:[],max=one?index+1:options.length;if(index<0){i=max}else{i=one?index:0}for(;i<max;i++){option=options[i];if((option.selected||i===index)&&!option.disabled&&(!option.parentNode.disabled||!nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function set(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function set(elem,value){if(Array.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});var location=window.location;var nonce={guid:Date.now()};var rquery=/\?/;jQuery.parseXML=function(data){var xml,parserErrorElem;if(!data||typeof data!=="string"){return null}try{xml=(new window.DOMParser).parseFromString(data,"text/xml")}catch(e){}parserErrorElem=xml&&xml.getElementsByTagName("parsererror")[0];if(!xml||parserErrorElem){jQuery.error("Invalid XML: "+(parserErrorElem?jQuery.map(parserErrorElem.childNodes,function(el){return el.textContent}).join("\n"):data))}return xml};var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,stopPropagationCallback=function stopPropagationCallback(e){e.stopPropagation()};jQuery.extend(jQuery.event,{trigger:function trigger(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,lastElement,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=lastElement=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,_typeof(event)==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){lastElement=cur;event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||Object.create(null))[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&isFunction(elem[type])&&!isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;if(event.isPropagationStopped()){lastElement.addEventListener(type,stopPropagationCallback)}elem[type]();if(event.isPropagationStopped()){lastElement.removeEventListener(type,stopPropagationCallback)}jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},simulate:function simulate(type,elem,event){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem)}});jQuery.fn.extend({trigger:function trigger(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function triggerHandler(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});var rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(Array.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(_typeof(v)==="object"&&v!=null?i:"")+"]",v,traditional,add)}})}else if(!traditional&&toType(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}jQuery.param=function(a,traditional){var prefix,s=[],add=function add(key,valueOrFunction){var value=isFunction(valueOrFunction)?valueOrFunction():valueOrFunction;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value==null?"":value)};if(a==null){return""}if(Array.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&")};jQuery.fn.extend({serialize:function serialize(){return jQuery.param(this.serializeArray())},serializeArray:function serializeArray(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(_i,elem){var val=jQuery(this).val();if(val==null){return null}if(Array.isArray(val)){return jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}})}return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});var r20=/%20/g,rhash=/#.*$/,rantiCache=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnothtmlwhite)||[];if(isFunction(func)){while(dataType=dataTypes[i++]){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else{(structure[dataType]=structure[dataType]||[]).push(func)}}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport){return!(selected=dataTypeOrTransport)}});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:deep||(deep={}))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}return target}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0]in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}}if(conv!==true){if(conv&&s["throws"]){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function ajaxSetup(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function ajax(url,options){if(_typeof(url)==="object"){options=url;url=undefined}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,completed,fireGlobals,i,uncached,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),_statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function getResponseHeader(key){var match;if(completed){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()+" "]=(responseHeaders[match[1].toLowerCase()+" "]||[]).concat(match[2])}}match=responseHeaders[key.toLowerCase()+" "]}return match==null?null:match.join(", ")},getAllResponseHeaders:function getAllResponseHeaders(){return completed?responseHeadersString:null},setRequestHeader:function setRequestHeader(name,value){if(completed==null){name=requestHeadersNames[name.toLowerCase()]=requestHeadersNames[name.toLowerCase()]||name;requestHeaders[name]=value}return this},overrideMimeType:function overrideMimeType(type){if(completed==null){s.mimeType=type}return this},statusCode:function statusCode(map){var code;if(map){if(completed){jqXHR.always(map[jqXHR.status])}else{for(code in map){_statusCode[code]=[_statusCode[code],map[code]]}}}return this},abort:function abort(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText)}done(0,finalText);return this}};deferred.promise(jqXHR);s.url=((url||s.url||location.href)+"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=(s.dataType||"*").toLowerCase().match(rnothtmlwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host}catch(e){s.crossDomain=true}}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(completed){return jqXHR}fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url.replace(rhash,"");if(!s.hasContent){uncached=s.url.slice(cacheURL.length);if(s.data&&(s.processData||typeof s.data==="string")){cacheURL+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data}if(s.cache===false){cacheURL=cacheURL.replace(rantiCache,"$1");uncached=(rquery.test(cacheURL)?"&":"?")+"_="+nonce.guid+++uncached}s.url=cacheURL+uncached}else if(s.data&&s.processData&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0){s.data=s.data.replace(r20,"+")}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||completed)){return jqXHR.abort()}strAbort="abort";completeDeferred.add(s.complete);jqXHR.done(s.success);jqXHR.fail(s.error);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(completed){return jqXHR}if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{completed=false;transport.send(requestHeaders,done)}catch(e){if(completed){throw e}done(-1,e)}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(completed){return}completed=true;if(timeoutTimer){window.clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}if(!isSuccess&&jQuery.inArray("script",s.dataTypes)>-1&&jQuery.inArray("json",s.dataTypes)<0){s.converters["text script"]=function(){}}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified}}if(status===204||s.type==="HEAD"){statusText="nocontent"}else if(status===304){statusText="notmodified"}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(_statusCode);_statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active){jQuery.event.trigger("ajaxStop")}}}return jqXHR},getJSON:function getJSON(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function getScript(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],function(_i,method){jQuery[method]=function(url,data,callback,type){if(isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}});jQuery.ajaxPrefilter(function(s){var i;for(i in s.headers){if(i.toLowerCase()==="content-type"){s.contentType=s.headers[i]||""}}});jQuery._evalUrl=function(url,options,doc){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:true,async:false,global:false,converters:{"text script":function textScript(){}},dataFilter:function dataFilter(response){jQuery.globalEval(response,options,doc)}})};jQuery.fn.extend({wrapAll:function wrapAll(html){var wrap;if(this[0]){if(isFunction(html)){html=html.call(this[0])}wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function wrapInner(html){if(isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function wrap(html){var htmlIsFunction=isFunction(html);return this.each(function(i){jQuery(this).wrapAll(htmlIsFunction?html.call(this,i):html)})},unwrap:function unwrap(selector){this.parent(selector).not("body").each(function(){jQuery(this).replaceWith(this.childNodes)});return this}});jQuery.expr.pseudos.hidden=function(elem){return!jQuery.expr.pseudos.visible(elem)};jQuery.expr.pseudos.visible=function(elem){return!!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length)};jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var _callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function send(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}for(i in headers){xhr.setRequestHeader(i,headers[i])}_callback=function callback(type){return function(){if(_callback){_callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.ontimeout=xhr.onreadystatechange=null;if(type==="abort"){xhr.abort()}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error")}else{complete(xhr.status,xhr.statusText)}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders())}}}};xhr.onload=_callback();errorCallback=xhr.onerror=xhr.ontimeout=_callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(_callback){errorCallback()}})}}}_callback=_callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(_callback){throw e}}},abort:function abort(){if(_callback){_callback()}}}}});jQuery.ajaxPrefilter(function(s){if(s.crossDomain){s.contents.script=false}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function textScript(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET"}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain||s.scriptAttrs){var script,_callback2;return{send:function send(_,complete){script=jQuery("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",_callback2=function callback(evt){script.remove();_callback2=null;if(evt){complete(evt.type==="error"?404:200,evt.type)}});document.head.appendChild(script[0])},abort:function abort(){if(_callback2){_callback2()}}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function jsonpCallback(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce.guid++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName)}else{window[callbackName]=overwritten}if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});support.createHTMLDocument=function(){var body=document.implementation.createHTMLDocument("").body;body.innerHTML="<form></form><form></form>";return body.childNodes.length===2}();jQuery.parseHTML=function(data,context,keepScripts){if(typeof data!=="string"){return[]}if(typeof context==="boolean"){keepScripts=context;context=false}var base,parsed,scripts;if(!context){if(support.createHTMLDocument){context=document.implementation.createHTMLDocument("");base=context.createElement("base");base.href=document.location.href;context.head.appendChild(base)}else{context=document}}parsed=rsingleTag.exec(data);scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};jQuery.fn.load=function(url,params,callback){var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=stripAndCollapse(url.slice(off));url=url.slice(0,off)}if(isFunction(params)){callback=params;params=undefined}else if(params&&_typeof(params)==="object"){type="POST"}if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])})})}return this};jQuery.expr.pseudos.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};jQuery.offset={setOffset:function setOffset(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset))}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function offset(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var rect,win,elem=this[0];if(!elem){return}if(!elem.getClientRects().length){return{top:0,left:0}}rect=elem.getBoundingClientRect();win=elem.ownerDocument.defaultView;return{top:rect.top+win.pageYOffset,left:rect.left+win.pageXOffset}},position:function position(){if(!this[0]){return}var offsetParent,offset,doc,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offset=this.offset();doc=elem.ownerDocument;offsetParent=elem.offsetParent||doc.documentElement;while(offsetParent&&(offsetParent===doc.body||offsetParent===doc.documentElement)&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.parentNode}if(offsetParent&&offsetParent!==elem&&offsetParent.nodeType===1){parentOffset=jQuery(offsetParent).offset();parentOffset.top+=jQuery.css(offsetParent,"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent,"borderLeftWidth",true)}}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function offsetParent(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent}return offsetParent||documentElement})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win;if(isWindow(elem)){win=elem}else if(elem.nodeType===9){win=elem.defaultView}if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset)}else{elem[method]=val}},method,val,arguments.length)}});jQuery.each(["top","left"],function(_i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(isWindow(elem)){return funcName.indexOf("outer")===0?elem["inner"+name]:elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable)}})});jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(_i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.fn.extend({bind:function bind(types,data,fn){return this.on(types,null,data,fn)},unbind:function unbind(types,fn){return this.off(types,null,fn)},delegate:function delegate(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function undelegate(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)},hover:function hover(fnOver,fnOut){return this.on("mouseenter",fnOver).on("mouseleave",fnOut||fnOver)}});jQuery.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(_i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});var rtrim=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;jQuery.proxy=function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!isFunction(fn)){return undefined}args=_slice.call(arguments,2);proxy=function proxy(){return fn.apply(context||this,args.concat(_slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy};jQuery.holdReady=function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}};jQuery.isArray=Array.isArray;jQuery.parseJSON=JSON.parse;jQuery.nodeName=nodeName;jQuery.isFunction=isFunction;jQuery.isWindow=isWindow;jQuery.camelCase=camelCase;jQuery.type=toType;jQuery.now=Date.now;jQuery.isNumeric=function(obj){var type=jQuery.type(obj);return(type==="number"||type==="string")&&!isNaN(obj-parseFloat(obj))};jQuery.trim=function(text){return text==null?"":(text+"").replace(rtrim,"$1")};var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if(typeof noGlobal==="undefined"){window.jQuery=window.$=jQuery}return jQuery})})(jquery);var jqueryExports=jquery.exports;var $=getDefaultExportFromCjs(jqueryExports);var ESCanvas=function(){var self=null;var CANVAS=Symbol("CANVAS");var CONTEXT=Symbol("CONTEXT");var SHAPES=Symbol("SHAPES");var DRAWSTATUS=Symbol("DRAWSTATUS");var SHAPETYPE=Symbol("SHAPETYPE");var MAXSHAPENUMSUPPORT=Symbol("MAXSHAPENUMSUPPORT");var SHAPESTYLE=Symbol("SHAPESTYLE");var POLYGONDRAWING=Symbol("POLYGONDRAWING");var CURRENTSHAPEINFO=Symbol("CURRENTSHAPEINFO");var DRAWSHAPEMULTIONETIME=Symbol("DRAWSHAPEMULTIONETIME");var EVENTCALLBACK=Symbol("EVENTCALLBACK");function redraw(){self[CONTEXT].clearRect(0,0,self.m_iCanvasWidth,self.m_iCanvasHeight);for(var i=0,len=self[SHAPES].length;i<len;i++){self[SHAPES][i].draw()}}function addShape(oShape){var iLen=self[SHAPES].length;if(iLen<self[MAXSHAPENUMSUPPORT]){self[SHAPES].push(oShape)}}function initEvent(){var bPainting=false;var inCanvas={};var iMouseDownX=0;var iMouseDownY=0;var iTouchDownX=0;var iTouchDownY=0;var iTouchUpX=0;var iTouchUpY=0;var szStatus="draw";var oShape=null;function getChooseBoxIndex(){var iIndex=-1;for(var i=0,iLen=self[SHAPES].length;i<iLen;i++){if(self[SHAPES][i].m_bChoosed){iIndex=i;break}}return iIndex}self[CANVAS][0].oncontextmenu=function(){return false};self[CANVAS][0].onselectstart=function(){return false};self[CANVAS].unbind();self[CANVAS].bind("mousedown",function(e){if(e.button===2){if(self[POLYGONDRAWING]&&oShape){if(oShape.m_aPoint.length>=oShape.m_iMinClosed){oShape.m_bClosed=true;self[POLYGONDRAWING]=false;oShape.setPointInfo(oShape.m_aPoint);addShape(oShape);redraw();bPainting=false;if(!self[DRAWSHAPEMULTIONETIME]){self[DRAWSTATUS]=false}window.onDrawShapeEvent&&window.onDrawShapeEvent(oShape.m_szType,"onDrawEnd",oShape.m_szId)}}}else if(e.button===0){if(bPainting){if(Math.abs(e.offsetX-iMouseDownX)>2&&Math.abs(e.offsetY-iMouseDownY)>2){addShape(oShape);if(!self[DRAWSHAPEMULTIONETIME]){self[DRAWSTATUS]=false}}if(self[EVENTCALLBACK]){var oRECT={startPos:[],endPos:[]};oRECT.startPos=[iMouseDownX,iMouseDownY];oRECT.endPos=[e.offsetX,e.offsetY];self[EVENTCALLBACK]&&self[EVENTCALLBACK](oRECT);self.clearAllShape()}oShape=null;bPainting=false;return}iMouseDownX=e.offsetX;iMouseDownY=e.offsetY;szStatus="draw";if(!self[POLYGONDRAWING]){var iBoxIndex=getChooseBoxIndex();if(iBoxIndex!==-1){if(self[SHAPES][iBoxIndex].inArc(e.offsetX,e.offsetY,5)){szStatus="stretch"}}if(szStatus!=="stretch"){for(var i=0,iLen=self[SHAPES].length;i<iLen;i++){if(self[SHAPES][i].inShape(e.offsetX,e.offsetY)&&self[SHAPES][i].m_iEditType!==2){self[SHAPES][i].m_bChoosed=true;self[SHAPES][i].getMouseDownPoints(e.offsetX,e.offsetY);szStatus="drag";window.onDrawShapeEvent&&window.onDrawShapeEvent(self[SHAPES][i].m_szType,"onChoose",self[SHAPES][i].m_szId)}else{self[SHAPES][i].m_bChoosed=false}}}if(szStatus==="drag"){self[CANVAS][0].style.cursor="move"}else{self[CANVAS][0].style.cursor="default"}if("draw"===szStatus&&1===self[SHAPES].length&&1===self[SHAPES][0].m_iRedrawMode){self.deleteRepeatPolyonById(self[SHAPES][0].m_szId);self[DRAWSTATUS]=true}if(self[DRAWSTATUS]&&!self[DRAWSHAPEMULTIONETIME]){szStatus="draw"}}if(szStatus==="draw"){if(self[DRAWSTATUS]){if(self[MAXSHAPENUMSUPPORT]<=self[SHAPES].length&&self[SHAPETYPE]!=="Grid"&&self[SHAPETYPE]!=="Point"){return}if(self[SHAPETYPE]==="Rect"){oShape=new Rect;oShape.m_szTips=self[CURRENTSHAPEINFO].szTips||""}else if(self[SHAPETYPE]==="Grid"){if(self[SHAPES].length===0){oShape=new MotionGrid;addShape(oShape)}}else if(self[SHAPETYPE]==="Polygon"){if(!self[POLYGONDRAWING]){self[POLYGONDRAWING]=true;oShape=new Polygon;oShape.m_szId=self[CURRENTSHAPEINFO].szId||"";oShape.m_szTips=self[CURRENTSHAPEINFO].szTips||"";oShape.m_iMinClosed=self[CURRENTSHAPEINFO].iMinClosed||3;oShape.m_iMaxPointNum=self[CURRENTSHAPEINFO].iMaxPointNum||11;oShape.m_iPolygonType=self[CURRENTSHAPEINFO].iPolygonType;oShape.m_szDrawColor=self[CURRENTSHAPEINFO].szDrawColor;oShape.m_szFillColor=self[CURRENTSHAPEINFO].szFillColor;oShape.m_iTranslucent=self[CURRENTSHAPEINFO].iTranslucent;oShape.m_iRedrawMode=self[CURRENTSHAPEINFO].iRedrawMode}if(oShape.m_iPolygonType===1){oShape.addPoint(iMouseDownX,iMouseDownY);if(oShape.m_aPoint.length===oShape.m_iMaxPointNum){oShape.m_bClosed=true;self[POLYGONDRAWING]=false;addShape(oShape);redraw();bPainting=false;if(!self[DRAWSHAPEMULTIONETIME]){self[DRAWSTATUS]=false}window.onDrawShapeEvent&&window.onDrawShapeEvent(oShape.m_szType,"onDrawEnd",oShape.m_szId)}}}else if(self[SHAPETYPE]==="Point"){self.clearShapeByType("Point");oShape=new Point;oShape.m_szId=self[CURRENTSHAPEINFO].szId||"";oShape.m_szDrawColor=self[CURRENTSHAPEINFO].szDrawColor;oShape.setPointInfo([[iMouseDownX,iMouseDownY]]);addShape(oShape);redraw()}}}bPainting=true}});self[CANVAS].bind("mouseenter",function(e){inCanvas={isIn:true,offsetX:e.offsetX,offsetY:e.offsetY};if(self[DRAWSTATUS]){if(bPainting){if(self[SHAPETYPE]==="Rect"){oShape.move([[iMouseDownX,iMouseDownY],[e.offsetX,e.offsetY]])}else if(self[SHAPETYPE]==="Grid"){self[SHAPES][0].move(iMouseDownX,iMouseDownY,e.offsetX,e.offsetY)}}}});self[CANVAS].bind("mouseleave",function(e){inCanvas={isIn:false,offsetX:e.offsetX,offsetY:e.offsetY}});self[CANVAS].bind("mousemove",function(e){if(!self[POLYGONDRAWING]){var iBoxIndex=getChooseBoxIndex();if(iBoxIndex>-1){if(bPainting){if(szStatus==="drag"){self[SHAPES][iBoxIndex].drag(e.offsetX,e.offsetY);window.onDrawShapeEvent&&window.onDrawShapeEvent(self[SHAPES][iBoxIndex].m_szType,"onDrag",self[SHAPES][iBoxIndex].m_szId)}else if(szStatus==="stretch"){self[SHAPES][iBoxIndex].stretch(e.offsetX,e.offsetY);window.onDrawShapeEvent&&window.onDrawShapeEvent(self[SHAPES][iBoxIndex].m_szType,"onStretch",self[SHAPES][iBoxIndex].m_szId)}}}else{if(self[DRAWSTATUS]){if(bPainting){if(inCanvas.isIn){if(self[SHAPETYPE]==="Rect"){oShape.move([[iMouseDownX,iMouseDownY],[e.offsetX,e.offsetY]])}else if(self[SHAPETYPE]==="Grid"){self[SHAPES][0].move(iMouseDownX,iMouseDownY,e.offsetX,e.offsetY)}}}}}}else{if(self[DRAWSTATUS]){if(bPainting){if(self[SHAPETYPE]==="Polygon"&&oShape.m_iPolygonType===0){oShape.m_bClosed=true}redraw();oShape.move(e.offsetX,e.offsetY,iMouseDownX,iMouseDownY)}}}});self[CANVAS].bind("mouseup",function(e){self[CANVAS][0].style.cursor="default";if(oShape!==null&&typeof oShape!=="undefined"&&szStatus==="draw"){if(self[SHAPETYPE]==="Rect"){if(Math.abs(e.offsetX-iMouseDownX)>2&&Math.abs(e.offsetY-iMouseDownY)>2){addShape(oShape);if(!self[DRAWSHAPEMULTIONETIME]){self[DRAWSTATUS]=false}}if(self[EVENTCALLBACK]){var oRECT={startPos:[],endPos:[]};oRECT.startPos=[iMouseDownX,iMouseDownY];oRECT.endPos=[e.offsetX,e.offsetY];self[EVENTCALLBACK]&&self[EVENTCALLBACK](oRECT);self.clearAllShape()}oShape=null}else if(self[SHAPETYPE]==="Polygon"&&oShape.m_iPolygonType===0&&self[POLYGONDRAWING]){if(Math.abs(e.offsetX-iMouseDownX)>2&&Math.abs(e.offsetY-iMouseDownY)>2){addShape(oShape);self[POLYGONDRAWING]=false;if(!self[DRAWSHAPEMULTIONETIME]){self[DRAWSTATUS]=false}window.onDrawShapeEvent&&window.onDrawShapeEvent(oShape.m_szType,"onDrawEnd",oShape.m_szId)}}}if(!self[POLYGONDRAWING]){bPainting=false}else{bPainting=true}if(!self[POLYGONDRAWING]){redraw()}});self[CANVAS].bind("dblclick",function(){if(self[DRAWSTATUS]){if(self[SHAPETYPE]==="Grid"){self[SHAPES][0].m_szGridMap="fffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffc";redraw()}}});self[CANVAS].bind("touchstart",function(e){var viewRect=e.target.getBoundingClientRect();console.log("开始触摸：",e,viewRect);if(e.touches&&e.touches[0]){iTouchDownX=parseInt(e.touches[0].clientX-viewRect.x)>0?parseInt(e.touches[0].clientX-viewRect.x):0;iTouchDownY=parseInt(e.touches[0].clientY-viewRect.y)>0?parseInt(e.touches[0].clientY-viewRect.y):0;szStatus="draw";if(self[DRAWSTATUS]){if(self[MAXSHAPENUMSUPPORT]<=self[SHAPES].length&&self[SHAPETYPE]!=="Grid"&&self[SHAPETYPE]!=="Point"){return}if(self[SHAPETYPE]==="Rect"){oShape=new Rect;oShape.m_szTips=self[CURRENTSHAPEINFO].szTips||""}else if(self[SHAPETYPE]==="Grid"){if(self[SHAPES].length===0){oShape=new MotionGrid;addShape(oShape)}}else if(self[SHAPETYPE]==="Polygon"){if(!self[POLYGONDRAWING]){self[POLYGONDRAWING]=true;oShape=new Polygon;oShape.m_szId=self[CURRENTSHAPEINFO].szId||"";oShape.m_szTips=self[CURRENTSHAPEINFO].szTips||"";oShape.m_iMinClosed=self[CURRENTSHAPEINFO].iMinClosed||3;oShape.m_iMaxPointNum=self[CURRENTSHAPEINFO].iMaxPointNum||11;oShape.m_iPolygonType=self[CURRENTSHAPEINFO].iPolygonType;oShape.m_szDrawColor=self[CURRENTSHAPEINFO].szDrawColor;oShape.m_szFillColor=self[CURRENTSHAPEINFO].szFillColor;oShape.m_iTranslucent=self[CURRENTSHAPEINFO].iTranslucent;oShape.m_iRedrawMode=self[CURRENTSHAPEINFO].iRedrawMode}if(oShape.m_iPolygonType===1){oShape.addPoint(iTouchDownX,iTouchDownY);if(oShape.m_aPoint.length===oShape.m_iMaxPointNum){oShape.m_bClosed=true;self[POLYGONDRAWING]=false;addShape(oShape);redraw();bPainting=false;if(!self[DRAWSHAPEMULTIONETIME]){self[DRAWSTATUS]=false}window.onDrawShapeEvent&&window.onDrawShapeEvent(oShape.m_szType,"onDrawEnd",oShape.m_szId)}}}else if(self[SHAPETYPE]==="Point"){self.clearShapeByType("Point");oShape=new Point;oShape.m_szId=self[CURRENTSHAPEINFO].szId||"";oShape.m_szDrawColor=self[CURRENTSHAPEINFO].szDrawColor;oShape.setPointInfo([[iTouchDownX,iTouchDownY]]);addShape(oShape);redraw()}}bPainting=true}});self[CANVAS].bind("touchmove",function(e){var viewRect=e.target.getBoundingClientRect();if(e.touches&&e.touches[0]){iTouchUpX=parseInt(e.touches[0].clientX-viewRect.x)>0?parseInt(e.touches[0].clientX-viewRect.x):0;iTouchUpY=parseInt(e.touches[0].clientY-viewRect.y)>0?parseInt(e.touches[0].clientY-viewRect.y):0;if(!self[POLYGONDRAWING]){var iBoxIndex=getChooseBoxIndex();if(iBoxIndex>-1){if(bPainting){if(szStatus==="drag"){self[SHAPES][iBoxIndex].drag(iTouchUpX,iTouchUpY);window.onDrawShapeEvent&&window.onDrawShapeEvent(self[SHAPES][iBoxIndex].m_szType,"onDrag",self[SHAPES][iBoxIndex].m_szId)}else if(szStatus==="stretch"){self[SHAPES][iBoxIndex].stretch(iTouchUpX,iTouchUpY);window.onDrawShapeEvent&&window.onDrawShapeEvent(self[SHAPES][iBoxIndex].m_szType,"onStretch",self[SHAPES][iBoxIndex].m_szId)}}}else{if(self[DRAWSTATUS]){if(bPainting){if(self[SHAPETYPE]==="Rect"){oShape.move([[iTouchDownX*2,iTouchDownY*2],[iTouchUpX*2,iTouchUpY*2]])}else if(self[SHAPETYPE]==="Grid"){self[SHAPES][0].move(iTouchDownX,iTouchDownY,iTouchUpX,iTouchUpY)}}}}}else{if(self[DRAWSTATUS]){if(bPainting){if(self[SHAPETYPE]==="Polygon"&&oShape.m_iPolygonType===0){oShape.m_bClosed=true}redraw();oShape.move(e.touches[0].offsetX,e.touches[0].offsetY,iTouchDownX,iTouchDownY)}}}}});self[CANVAS].bind("touchend",function(e){if(!(iTouchDownX==iTouchUpX&&iTouchDownY==iTouchUpY)){self[CANVAS][0].style.cursor="default";if(oShape!==null&&typeof oShape!=="undefined"&&szStatus==="draw"){if(self[SHAPETYPE]==="Rect"){if(Math.abs(iTouchUpX-iTouchDownX)>2&&Math.abs(iTouchUpY-iTouchDownY)>2){addShape(oShape);if(!self[DRAWSHAPEMULTIONETIME]){self[DRAWSTATUS]=false}}if(self[EVENTCALLBACK]&&Math.abs(iTouchUpX-iTouchDownX)>15&&Math.abs(iTouchUpY-iTouchDownY)>15){var oRECT={startPos:[],endPos:[]};oRECT.startPos=[iTouchDownX,iTouchDownY];oRECT.endPos=[iTouchUpX,iTouchUpY];self[EVENTCALLBACK]&&self[EVENTCALLBACK](oRECT)}self.clearAllShape();oShape=null}else if(self[SHAPETYPE]==="Polygon"&&oShape.m_iPolygonType===0&&self[POLYGONDRAWING]){if(Math.abs(iTouchUpX-iTouchDownX)>2&&Math.abs(iTouchUpY-iTouchDownY)>2){addShape(oShape);self[POLYGONDRAWING]=false;if(!self[DRAWSHAPEMULTIONETIME]){self[DRAWSTATUS]=false}window.onDrawShapeEvent&&window.onDrawShapeEvent(oShape.m_szType,"onDrawEnd",oShape.m_szId)}}}if(!self[POLYGONDRAWING]){bPainting=false}else{bPainting=true}if(!self[POLYGONDRAWING]){redraw()}}})}var Shape=function(){function Shape(){_classCallCheck(this,Shape);this.m_szId="";this.m_aPoint=[];this.m_bChoosed=false;this.m_szDrawColor=self[SHAPESTYLE].szDrawColor;this.m_szFillColor=self[SHAPESTYLE].szFillColor;this.m_iTranslucent=self[SHAPESTYLE].iTranslucent;this.m_iIndexChoosePoint=-1;this.m_iDriftStartX=0;this.m_iDriftStartY=0;this.m_oEdgePoints={top:{x:0,y:0},left:{x:0,y:0},right:{x:0,y:0},bottom:{x:0,y:0}};this.m_szTips="";this.m_iEditType=0;this.m_iMinClosed=3;this.m_iMaxPointNum=11;this.m_bClosed=false;this.m_iRedrawMode=0}_createClass(Shape,[{key:"draw",value:function draw(){}},{key:"drag",value:function drag(iPointX,iPointY){if(this.m_iEditType!==2){var iLength=this.m_aPoint.length;var i=0;for(i=0;i<iLength;i++){if(this.m_aPoint[i][0]+iPointX-this.m_iDriftStartX>self.m_iCanvasWidth||this.m_aPoint[i][1]+iPointY-this.m_iDriftStartY>self.m_iCanvasHeight||this.m_aPoint[i][0]+iPointX-this.m_iDriftStartX<0||this.m_aPoint[i][1]+iPointY-this.m_iDriftStartY<0){this.m_iDriftStartX=iPointX;this.m_iDriftStartY=iPointY;return}}for(i=0;i<iLength;i++){this.m_aPoint[i][0]=this.m_aPoint[i][0]+iPointX-this.m_iDriftStartX;this.m_aPoint[i][1]=this.m_aPoint[i][1]+iPointY-this.m_iDriftStartY}this.m_iDriftStartX=iPointX;this.m_iDriftStartY=iPointY;this.setPointInfo(this.m_aPoint);redraw()}}},{key:"stretch",value:function stretch(iPointX,iPointY){if(this.m_iEditType===0){if(this.m_iIndexChoosePoint!==-1){this.m_aPoint[this.m_iIndexChoosePoint][0]=iPointX;this.m_aPoint[this.m_iIndexChoosePoint][1]=iPointY}this.setPointInfo(this.m_aPoint);redraw()}}},{key:"inShape",value:function inShape(iPointX,iPointY){var bRet=false;var iLen=this.m_aPoint.length;for(var i=0,j=iLen-1;i<iLen;j=i++){if(this.m_aPoint[i][1]>iPointY!==this.m_aPoint[j][1]>iPointY&&iPointX<(this.m_aPoint[j][0]-this.m_aPoint[i][0])*(iPointY-this.m_aPoint[i][1])/(this.m_aPoint[j][1]-this.m_aPoint[i][1])+this.m_aPoint[i][0]){bRet=!bRet}}return bRet}},{key:"inArc",value:function inArc(iPointX,iPointY,iRadius){var bRet=false;for(var i=0,iLen=this.m_aPoint.length;i<iLen;i++){var iDistance=Math.sqrt((iPointX-this.m_aPoint[i][0])*(iPointX-this.m_aPoint[i][0])+(iPointY-this.m_aPoint[i][1])*(iPointY-this.m_aPoint[i][1]));if(iDistance<iRadius){bRet=true;this.m_iIndexChoosePoint=i;break}}return bRet}},{key:"getMouseDownPoints",value:function getMouseDownPoints(iMouseDownX,iMouseDownY){this.m_iDriftStartX=iMouseDownX;this.m_iDriftStartY=iMouseDownY}},{key:"getPointInfo",value:function getPointInfo(){return this.m_aPoint}},{key:"setPointInfo",value:function setPointInfo(aPoint){if(aPoint!==null&&typeof aPoint!=="undefined"&&aPoint.length>0){this.m_aPoint=aPoint;this.setEdgePoints(aPoint)}}},{key:"addPoint",value:function addPoint(iMouseDownX,iMouseDownY){if(this.m_aPoint.length<this.m_iMaxPointNum){this.m_aPoint.push([iMouseDownX,iMouseDownY])}if(this.m_aPoint.length===this.m_iMaxPointNum){this.setPointInfo(this.m_aPoint)}}},{key:"setEdgePoints",value:function setEdgePoints(aPoint){for(var i=0,iLen=aPoint.length;i<iLen;i++){if(i===0){this.m_oEdgePoints.top.x=aPoint[i][0];this.m_oEdgePoints.top.y=aPoint[i][1];this.m_oEdgePoints.left.x=aPoint[i][0];this.m_oEdgePoints.left.y=aPoint[i][1];this.m_oEdgePoints.right.x=aPoint[i][0];this.m_oEdgePoints.right.y=aPoint[i][1];this.m_oEdgePoints.bottom.x=aPoint[i][0];this.m_oEdgePoints.bottom.y=aPoint[i][1]}else{if(aPoint[i][1]<this.m_oEdgePoints.top.y){this.m_oEdgePoints.top.x=aPoint[i][0];this.m_oEdgePoints.top.y=aPoint[i][1]}if(aPoint[i][0]>this.m_oEdgePoints.right.x){this.m_oEdgePoints.right.x=aPoint[i][0];this.m_oEdgePoints.right.y=aPoint[i][1]}if(aPoint[i][1]>this.m_oEdgePoints.bottom.y){this.m_oEdgePoints.bottom.x=aPoint[i][0];this.m_oEdgePoints.bottom.y=aPoint[i][1]}if(aPoint[i][0]<this.m_oEdgePoints.left.x){this.m_oEdgePoints.left.x=aPoint[i][0];this.m_oEdgePoints.left.y=aPoint[i][1]}}}}}]);return Shape}();var Rect=function(_Shape){_inherits(Rect,_Shape);var _super=_createSuper(Rect);function Rect(){var _this;_classCallCheck(this,Rect);_this=_super.call(this);_this.m_szType="Rect";return _this}_createClass(Rect,[{key:"setPointInfo",value:function setPointInfo(aPoint){if(aPoint!==null&&typeof aPoint!=="undefined"){var iStartX=aPoint[0][0];var iStartY=aPoint[0][1];var iEndX=aPoint[0][0];var iEndY=aPoint[0][1];for(var i=0,iLen=aPoint.length;i<iLen;i++){if(iStartX>aPoint[i][0]){iStartX=aPoint[i][0]}if(iStartY>aPoint[i][1]){iStartY=aPoint[i][1]}if(iEndX<aPoint[i][0]){iEndX=aPoint[i][0]}if(iEndY<aPoint[i][1]){iEndY=aPoint[i][1]}}this.m_aPoint=[[iStartX,iStartY],[iEndX,iStartY],[iEndX,iEndY],[iStartX,iEndY]]}}},{key:"draw",value:function draw(){self[CONTEXT].fillStyle=this.m_szFillColor;self[CONTEXT].strokeStyle=this.m_szDrawColor;var iStartX=this.m_aPoint[0][0];var iStartY=this.m_aPoint[0][1];var iWidth=this.m_aPoint[2][0]-iStartX;var iHeight=this.m_aPoint[2][1]-iStartY;self[CONTEXT].globalAlpha=this.m_iTranslucent;self[CONTEXT].fillRect(iStartX,iStartY,iWidth,iHeight);self[CONTEXT].globalAlpha=1;self[CONTEXT].fillText(this.m_szTips,(iStartX+this.m_aPoint[2][0])/2,(iStartY+this.m_aPoint[2][1])/2);if(this.m_bChoosed){var iHalfWidth=Math.round(iWidth/2);var iHalfHeight=Math.round(iHeight/2);if(this.m_iEditType===0){var aPointX=[iStartX,iStartX+iHalfWidth,iStartX+iWidth,iStartX,iStartX+iWidth,iStartX,iStartX+iHalfWidth,iStartX+iWidth];var aPointY=[iStartY,iStartY,iStartY,iStartY+iHalfHeight,iStartY+iHalfHeight,iStartY+iHeight,iStartY+iHeight,iStartY+iHeight];for(var i=0;i<8;i++){self[CONTEXT].beginPath();self[CONTEXT].arc(aPointX[i],aPointY[i],3,0,360,false);self[CONTEXT].fillStyle=this.m_szDrawColor;self[CONTEXT].closePath();self[CONTEXT].fill()}}}self[CONTEXT].strokeRect(iStartX,iStartY,iWidth,iHeight)}},{key:"stretch",value:function stretch(iPointX,iPointY){if(this.m_iEditType===0){if(this.m_iIndexChoosePoint===0){if(iPointX<this.m_aPoint[2][0]&&iPointY<this.m_aPoint[2][1]){this.m_aPoint[0][0]=iPointX;this.m_aPoint[0][1]=iPointY;this.m_aPoint[3][0]=iPointX;this.m_aPoint[1][1]=iPointY}}else if(this.m_iIndexChoosePoint===1){if(iPointY<this.m_aPoint[2][1]){this.m_aPoint[0][1]=iPointY;this.m_aPoint[1][1]=iPointY}}else if(this.m_iIndexChoosePoint===2){if(iPointX>this.m_aPoint[3][0]&&iPointY<this.m_aPoint[3][1]){this.m_aPoint[1][0]=iPointX;this.m_aPoint[1][1]=iPointY;this.m_aPoint[2][0]=iPointX;this.m_aPoint[0][1]=iPointY}}else if(this.m_iIndexChoosePoint===3){if(iPointX<this.m_aPoint[2][0]){this.m_aPoint[0][0]=iPointX;this.m_aPoint[3][0]=iPointX}}else if(this.m_iIndexChoosePoint===4){if(iPointX>this.m_aPoint[0][0]){this.m_aPoint[1][0]=iPointX;this.m_aPoint[2][0]=iPointX}}else if(this.m_iIndexChoosePoint===5){if(iPointX<this.m_aPoint[1][0]&&iPointY>this.m_aPoint[1][1]){this.m_aPoint[3][0]=iPointX;this.m_aPoint[3][1]=iPointY;this.m_aPoint[0][0]=iPointX;this.m_aPoint[2][1]=iPointY}}else if(this.m_iIndexChoosePoint===6){if(iPointY>this.m_aPoint[1][1]){this.m_aPoint[2][1]=iPointY;this.m_aPoint[3][1]=iPointY}}else if(this.m_iIndexChoosePoint===7){if(iPointX>this.m_aPoint[0][0]&&iPointY>this.m_aPoint[0][1]){this.m_aPoint[2][0]=iPointX;this.m_aPoint[2][1]=iPointY;this.m_aPoint[1][0]=iPointX;this.m_aPoint[3][1]=iPointY}}redraw()}}},{key:"move",value:function move(aPoint){redraw();this.m_bChoosed=true;var iStartX=aPoint[0][0];var iStartY=aPoint[0][1];var iEndX=aPoint[1][0];var iEndY=aPoint[1][1];this.setPointInfo([[iStartX,iStartY],[iEndX,iStartY],[iEndX,iEndY],[iStartX,iEndY]]);this.draw()}},{key:"inArc",value:function inArc(iPointX,iPointY,iRadius){var iStartX=this.m_aPoint[0][0];var iStartY=this.m_aPoint[0][1];var iWidth=this.m_aPoint[2][0]-iStartX;var iHeight=this.m_aPoint[2][1]-iStartY;var iHalfWidth=Math.round(iWidth/2);var iHalfHeight=Math.round(iHeight/2);var aPointX=[iStartX,iStartX+iHalfWidth,iStartX+iWidth,iStartX,iStartX+iWidth,iStartX,iStartX+iHalfWidth,iStartX+iWidth];var aPointY=[iStartY,iStartY,iStartY,iStartY+iHalfHeight,iStartY+iHalfHeight,iStartY+iHeight,iStartY+iHeight,iStartY+iHeight];for(var i=0;i<8;i++){var iDistance=Math.sqrt((iPointX-aPointX[i])*(iPointX-aPointX[i])+(iPointY-aPointY[i])*(iPointY-aPointY[i]));if(iDistance<iRadius){this.m_iIndexChoosePoint=i;return true}}return false}}]);return Rect}(Shape);var RectOSD=function(_Shape2){_inherits(RectOSD,_Shape2);var _super2=_createSuper(RectOSD);function RectOSD(szText,szEnabled){var _this2;_classCallCheck(this,RectOSD);_this2=_super2.call(this);_this2.m_szType="RectOSD";_this2.m_szOSDType="overlay-date";_this2.m_szText=szText||"";_this2.m_szEnabled=szEnabled||"";_this2.m_szDateStyle="";_this2.m_szClockType="";_this2.m_szDisplayWeek="";_this2.m_szId="";_this2.m_szAlignment="0";return _this2}_createClass(RectOSD,[{key:"draw",value:function draw(){if(this.m_szEnabled==="true"){var iStartX=this.m_aPoint[0][0];var iStartY=this.m_aPoint[0][1];var iWidth=this.m_aPoint[2][0]-iStartX;var iHeight=this.m_aPoint[2][1]-iStartY;self[CONTEXT].beginPath();self[CONTEXT].strokeStyle=this.m_szDrawColor;self[CONTEXT].globalAlpha=1;self[CONTEXT].rect(iStartX,iStartY,iWidth,iHeight);self[CONTEXT].font="15px serif";self[CONTEXT].strokeText(this.m_szText,iStartX,iStartY+15);self[CONTEXT].stroke()}}},{key:"drag",value:function drag(iPointX,iPointY){var iLength=this.m_aPoint.length;var i=0;if("0"===this.m_szAlignment){for(i=0;i<iLength;i++){if(this.m_aPoint[i][1]+iPointY-this.m_iDriftStartY>self.m_iCanvasHeight||this.m_aPoint[i][0]+iPointX-this.m_iDriftStartX<0||this.m_aPoint[i][1]+iPointY-this.m_iDriftStartY<0){this.m_iDriftStartX=iPointX;this.m_iDriftStartY=iPointY;return}}for(i=0;i<iLength;i++){this.m_aPoint[i][0]=this.m_aPoint[i][0]+iPointX-this.m_iDriftStartX;this.m_aPoint[i][1]=this.m_aPoint[i][1]+iPointY-this.m_iDriftStartY}}else if("1"===this.m_szAlignment||"2"===this.m_szAlignment){for(i=0;i<iLength;i++){if(this.m_aPoint[i][1]+iPointY-this.m_iDriftStartY>self.m_iCanvasHeight||this.m_aPoint[i][1]+iPointY-this.m_iDriftStartY<0){this.m_iDriftStartX=iPointX;this.m_iDriftStartY=iPointY;return}}for(i=0;i<iLength;i++){this.m_aPoint[i][1]=this.m_aPoint[i][1]+iPointY-this.m_iDriftStartY}}this.m_iDriftStartX=iPointX;this.m_iDriftStartY=iPointY;this.setEdgePoints(this.m_aPoint);redraw()}},{key:"stretch",value:function stretch(){}}]);return RectOSD}(Shape);var MotionGrid=function(_Shape3){_inherits(MotionGrid,_Shape3);var _super3=_createSuper(MotionGrid);function MotionGrid(){var _this3;_classCallCheck(this,MotionGrid);_this3=_super3.call(this);_this3.m_szType="Grid";_this3.m_iGridColNum=22;_this3.m_iGridRowNum=18;_this3.m_szGridMap="";_this3.m_aAddGridMap=[];return _this3}_createClass(MotionGrid,[{key:"draw",value:function draw(){var iWidth=self.m_iCanvasWidth/this.m_iGridColNum;var iHeight=self.m_iCanvasHeight/this.m_iGridRowNum;var szResultGridMap="";for(var i=0;i<this.m_iGridRowNum;i++){var szGridRowMap=this.m_szGridMap.substring(i*6,i*6+6);var aBinaryMap=parseInt("f"+szGridRowMap,16).toString(2).split("").slice(4);var szResultGridMapRow="";for(var j=0;j<this.m_iGridColNum;j++){var szResultGridMapRowCol="";if(aBinaryMap[j]==="1"){self[CONTEXT].strokeStyle=this.m_szDrawColor;self[CONTEXT].globalAlpha=1;self[CONTEXT].strokeRect(iWidth*j,iHeight*i,iWidth,iHeight);szResultGridMapRowCol="1"}else{szResultGridMapRowCol="0"}if(this.m_aAddGridMap.length){if(this.m_aAddGridMap[i][j]===1){self[CONTEXT].strokeStyle=this.m_szDrawColor;self[CONTEXT].strokeRect(iWidth*j,iHeight*i,iWidth,iHeight);szResultGridMapRowCol="1"}}szResultGridMapRow+=szResultGridMapRowCol}szResultGridMap+=parseInt("1111"+szResultGridMapRow+"00",2).toString(16).substring(1)}this.m_szGridMap=szResultGridMap}},{key:"move",value:function move(iMouseDownX,iMouseDownY,iMouseMoveX,iMouseMoveY){var iWidth=self.m_iCanvasWidth/this.m_iGridColNum;var iHeight=self.m_iCanvasHeight/this.m_iGridRowNum;var iStartX=Math.floor(iMouseDownX/iWidth);var iStartY=Math.floor(iMouseDownY/iHeight);var iRectColNum=Math.floor(Math.abs(iMouseMoveX-iMouseDownX)/iWidth);var iRectRowNum=Math.floor(Math.abs(iMouseMoveY-iMouseDownY)/iHeight);var iCoefficientX=1;var iCoefficientY=1;if(iMouseMoveX-iMouseDownX>0){iCoefficientX=1}else{iCoefficientX=-1}if(iMouseMoveY-iMouseDownY>0){iCoefficientY=1}else{iCoefficientY=-1}var aAddGridMap=[];for(var i=0;i<this.m_iGridRowNum;i++){aAddGridMap[i]=[];for(var j=0;j<this.m_iGridColNum;j++){if(iCoefficientX===1){if(iCoefficientY===1){if(i>=iStartY&&i<=iStartY+iRectRowNum&&j>=iStartX&&j<=iStartX+iRectColNum){aAddGridMap[i][j]=1}else{aAddGridMap[i][j]=0}}else{if(i<=iStartY&&i>=iStartY-iRectRowNum&&j>=iStartX&&j<=iStartX+iRectColNum){aAddGridMap[i][j]=1}else{aAddGridMap[i][j]=0}}}else{if(iCoefficientY===1){if(i>=iStartY&&i<=iStartY+iRectRowNum&&j<=iStartX&&j>=iStartX-iRectColNum){aAddGridMap[i][j]=1}else{aAddGridMap[i][j]=0}}else{if(i<=iStartY&&i>=iStartY-iRectRowNum&&j<=iStartX&&j>=iStartX-iRectColNum){aAddGridMap[i][j]=1}else{aAddGridMap[i][j]=0}}}}}this.m_aAddGridMap=aAddGridMap;this.draw()}}]);return MotionGrid}(Shape);var Line=function(_Shape4){_inherits(Line,_Shape4);var _super4=_createSuper(Line);function Line(){var _this4;_classCallCheck(this,Line);_this4=_super4.call(this);_this4.m_szType="Line";_this4.m_iLineType=0;_this4.m_iDirection=0;_this4.m_iArrowType=0;_this4.m_aCrossArrowPoint=[];return _this4}_createClass(Line,[{key:"draw",value:function draw(){if(this.m_iLineType===0){this.drawNormalLine()}else if(this.m_iLineType===1){this.drawArrowLine()}else if(this.m_iLineType===3){this.drawCrossLine()}else if(this.m_iLineType===4){this.drawLineCount()}}},{key:"drawNormalLine",value:function drawNormalLine(){self[CONTEXT].globalAlpha=1;if(this.m_aPoint.length>0){self[CONTEXT].beginPath();self[CONTEXT].strokeStyle=this.m_szDrawColor;self[CONTEXT].lineWidth=2;self[CONTEXT].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(var i=1,iLen=this.m_aPoint.length;i<iLen;i++){self[CONTEXT].lineTo(this.m_aPoint[i][0],this.m_aPoint[i][1])}self[CONTEXT].stroke();if(this.m_bChoosed){for(var _i=0,_iLen=this.m_aPoint.length;_i<_iLen;_i++){self[CONTEXT].beginPath();self[CONTEXT].fillStyle=this.m_szDrawColor;self[CONTEXT].arc(this.m_aPoint[_i][0],this.m_aPoint[_i][1],3,0,Math.PI*2,true);self[CONTEXT].closePath();self[CONTEXT].fill()}}if(this.m_szTips!==""){self[CONTEXT].strokeStyle=this.m_szDrawColor;self[CONTEXT].fillText(this.m_szTips,this.m_aPoint[0][0]+10,this.m_aPoint[0][1]+4)}}}},{key:"drawArrowLine",value:function drawArrowLine(iType,fromX,fromY,toX,toY,theta,headlen,width){theta=typeof theta!=="undefined"?theta:30;headlen=typeof headlen!=="undefined"?headlen:10;width=typeof width!=="undefined"?width:1;var angle=Math.atan2(fromY-toY,fromX-toX)*180/Math.PI;var angle1=(angle+theta)*Math.PI/180;var angle2=(angle-theta)*Math.PI/180;var topX=headlen*Math.cos(angle1);var topY=headlen*Math.sin(angle1);var botX=headlen*Math.cos(angle2);var botY=headlen*Math.sin(angle2);self[CONTEXT].save();self[CONTEXT].beginPath();var arrowX=fromX-topX;var arrowY=fromY-topY;self[CONTEXT].moveTo(arrowX,arrowY);self[CONTEXT].lineTo(fromX,fromY);arrowX=fromX-botX;arrowY=fromY-botY;self[CONTEXT].lineTo(arrowX,arrowY);self[CONTEXT].moveTo(fromX,fromY);self[CONTEXT].lineTo(toX,toY);if(iType===1){arrowX=toX+topX;arrowY=toY+topY;self[CONTEXT].moveTo(arrowX,arrowY);self[CONTEXT].lineTo(toX,toY);arrowX=toX+botX;arrowY=toY+botY;self[CONTEXT].lineTo(arrowX,arrowY)}self[CONTEXT].strokeStyle=this.m_szDrawColor;self[CONTEXT].lineWidth=width;self[CONTEXT].stroke();self[CONTEXT].restore()}},{key:"drawCrossLine",value:function drawCrossLine(){this.drawNormalLine();var iMiddleX=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2;var iMiddleY=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2;var angle=Math.atan2(iMiddleY-this.m_aPoint[0][1],iMiddleX-this.m_aPoint[0][0])*180/Math.PI;var angle1=(angle+90)*Math.PI/180;var angle2=(angle-90)*Math.PI/180;var topX=25*Math.cos(angle1);var topY=25*Math.sin(angle1);var botX=25*Math.cos(angle2);var botY=25*Math.sin(angle2);var arrowX=0;var arrowY=0;arrowX=iMiddleX-topX;arrowY=iMiddleY-topY;var iTextPositionA=0;var iTextPositionB=0;if(this.m_iDirection===0){iTextPositionA=-10;iTextPositionB=-15}else if(this.m_iDirection===1){iTextPositionA=10;iTextPositionB=10}else{iTextPositionA=10;iTextPositionB=-15}if(this.m_iDirection!==0){this.drawArrowLine(0,arrowX,arrowY,iMiddleX,iMiddleY)}self[CONTEXT].strokeStyle=this.m_szDrawColor;self[CONTEXT].font="8px";self[CONTEXT].strokeText("A",arrowX+iTextPositionA,arrowY+4);arrowX=iMiddleX-botX;arrowY=iMiddleY-botY;if(this.m_iDirection!==1){this.drawArrowLine(0,arrowX,arrowY,iMiddleX,iMiddleY)}self[CONTEXT].strokeStyle=this.m_szDrawColor;self[CONTEXT].font="8px";self[CONTEXT].strokeText("B",arrowX+iTextPositionB,arrowY+4)}},{key:"drawLineCount",value:function drawLineCount(){this.drawNormalLine();var iMiddleX=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2;var iMiddleY=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2;var angle=Math.atan2(iMiddleY-this.m_aPoint[0][1],iMiddleX-this.m_aPoint[0][0])*180/Math.PI;var angle1=(angle+90)*Math.PI/180;var angle2=(angle-90)*Math.PI/180;var topX=25*Math.cos(angle1);var topY=25*Math.sin(angle1);var botX=25*Math.cos(angle2);var botY=25*Math.sin(angle2);var arrowX=0;var arrowY=0;arrowX=iMiddleX-topX;arrowY=iMiddleY-topY;if(this.m_iArrowType===1){arrowX=iMiddleX-botX;arrowY=iMiddleY-botY;this.drawArrowLine(0,arrowX,arrowY,iMiddleX,iMiddleY)}else if(this.m_iArrowType===0){this.drawArrowLine(0,arrowX,arrowY,iMiddleX,iMiddleY)}this.m_aCrossArrowPoint=[[iMiddleX,iMiddleY],[arrowX,arrowY]]}},{key:"inShape",value:function inShape(iPointX,iPointY){var bRet=false;for(var i=0,iLen=this.m_aPoint.length-1;i<iLen;i++){var iLineLen=Math.sqrt((this.m_aPoint[i+1][0]-this.m_aPoint[i][0])*(this.m_aPoint[i+1][0]-this.m_aPoint[i][0])+(this.m_aPoint[i+1][1]-this.m_aPoint[i][1])*(this.m_aPoint[i+1][1]-this.m_aPoint[i][1]));var iLineLen1=Math.sqrt((iPointX-this.m_aPoint[i][0])*(iPointX-this.m_aPoint[i][0])+(iPointY-this.m_aPoint[i][1])*(iPointY-this.m_aPoint[i][1]));var iLineLen2=Math.sqrt((iPointX-this.m_aPoint[i+1][0])*(iPointX-this.m_aPoint[i+1][0])+(iPointY-this.m_aPoint[i+1][1])*(iPointY-this.m_aPoint[i+1][1]));if(iLineLen1+iLineLen2-iLineLen<1){bRet=true}}return bRet}}]);return Line}(Shape);var Polygon=function(_Shape5){_inherits(Polygon,_Shape5);var _super5=_createSuper(Polygon);function Polygon(){var _this5;_classCallCheck(this,Polygon);_this5=_super5.call(this);_this5.m_szType="Polygon";_this5.m_iPolygonType=1;return _this5}_createClass(Polygon,[{key:"setPointInfo",value:function setPointInfo(aPoint){if(aPoint!==null&&typeof aPoint!=="undefined"){if(this.m_iPolygonType===0){var iStartX=aPoint[0][0];var iStartY=aPoint[0][1];var iEndX=aPoint[0][0];var iEndY=aPoint[0][1];for(var i=0,iLen=aPoint.length;i<iLen;i++){if(iStartX>aPoint[i][0]){iStartX=aPoint[i][0]}if(iStartY>aPoint[i][1]){iStartY=aPoint[i][1]}if(iEndX<aPoint[i][0]){iEndX=aPoint[i][0]}if(iEndY<aPoint[i][1]){iEndY=aPoint[i][1]}}this.m_aPoint=[[iStartX,iStartY],[iEndX,iStartY],[iEndX,iEndY],[iStartX,iEndY]]}else if(this.m_iPolygonType===1){this.m_aPoint=aPoint}else{this.m_aPoint=aPoint}this.setEdgePoints(aPoint)}}},{key:"draw",value:function draw(){if(this.m_aPoint.length>0){self[CONTEXT].fillStyle=this.m_szFillColor;self[CONTEXT].strokeStyle=this.m_szDrawColor;self[CONTEXT].globalAlpha=1;var i=0;var iLen=0;if(this.m_bChoosed){for(i=0,iLen=this.m_aPoint.length;i<iLen;i++){self[CONTEXT].beginPath();self[CONTEXT].arc(this.m_aPoint[i][0],this.m_aPoint[i][1],3,0,360,false);self[CONTEXT].fillStyle=this.m_szDrawColor;self[CONTEXT].closePath();self[CONTEXT].fill()}}self[CONTEXT].beginPath();self[CONTEXT].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(i=0,iLen=this.m_aPoint.length;i<iLen;i++){if(i!==0){self[CONTEXT].lineTo(this.m_aPoint[i][0],this.m_aPoint[i][1])}}self[CONTEXT].stroke();if(this.m_bClosed){self[CONTEXT].fillText(this.m_szTips,(this.m_oEdgePoints.left.x+this.m_oEdgePoints.right.x)/2,(this.m_oEdgePoints.top.y+this.m_oEdgePoints.bottom.y)/2);self[CONTEXT].closePath();self[CONTEXT].stroke();self[CONTEXT].globalAlpha=this.m_iTranslucent;self[CONTEXT].fill()}}}},{key:"move",value:function move(iMouseMoveX,iMouseMoveY,iMouseDownX,iMouseDownY){if(this.m_iPolygonType===1){if(this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.length>0){self[CONTEXT].fillStyle=this.m_szFillColor;self[CONTEXT].strokeStyle=this.m_szDrawColor;self[CONTEXT].globalAlpha=1;var i=0;var iLen=0;for(i=0,iLen=this.m_aPoint.length;i<iLen;i++){self[CONTEXT].beginPath();self[CONTEXT].arc(this.m_aPoint[i][0],this.m_aPoint[i][1],3,0,360,false);self[CONTEXT].fillStyle=this.m_szDrawColor;self[CONTEXT].closePath();self[CONTEXT].fill()}self[CONTEXT].beginPath();self[CONTEXT].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(i=0,iLen=this.m_aPoint.length;i<iLen;i++){if(i!==0){self[CONTEXT].lineTo(this.m_aPoint[i][0],this.m_aPoint[i][1])}}self[CONTEXT].lineTo(iMouseMoveX,iMouseMoveY);self[CONTEXT].closePath();self[CONTEXT].stroke()}}else if(this.m_iPolygonType===0){this.m_bChoosed=true;var iStartX=iMouseDownX;var iStartY=iMouseDownY;var iEndX=iMouseMoveX;var iEndY=iMouseMoveY;this.setPointInfo([[iStartX,iStartY],[iEndX,iStartY],[iEndX,iEndY],[iStartX,iEndY]]);this.draw()}}},{key:"stretch",value:function stretch(iPointX,iPointY){if(this.m_iEditType===0){if(this.m_iPolygonType===1){if(this.m_iIndexChoosePoint!==-1){this.m_aPoint[this.m_iIndexChoosePoint][0]=iPointX;this.m_aPoint[this.m_iIndexChoosePoint][1]=iPointY}}else{if(this.m_iIndexChoosePoint===0){if(iPointX<this.m_aPoint[2][0]&&iPointY<this.m_aPoint[2][1]){this.m_aPoint[0][0]=iPointX;this.m_aPoint[0][1]=iPointY;this.m_aPoint[3][0]=iPointX;this.m_aPoint[1][1]=iPointY}}else if(this.m_iIndexChoosePoint===1){if(iPointX>this.m_aPoint[3][0]&&iPointY<this.m_aPoint[3][1]){this.m_aPoint[1][0]=iPointX;this.m_aPoint[1][1]=iPointY;this.m_aPoint[2][0]=iPointX;this.m_aPoint[0][1]=iPointY}}else if(this.m_iIndexChoosePoint===2){if(iPointX>this.m_aPoint[0][0]&&iPointY>this.m_aPoint[0][1]){this.m_aPoint[2][0]=iPointX;this.m_aPoint[2][1]=iPointY;this.m_aPoint[1][0]=iPointX;this.m_aPoint[3][1]=iPointY}}else if(this.m_iIndexChoosePoint===3){if(iPointX<this.m_aPoint[1][0]&&iPointY>this.m_aPoint[1][1]){this.m_aPoint[3][0]=iPointX;this.m_aPoint[3][1]=iPointY;this.m_aPoint[0][0]=iPointX;this.m_aPoint[2][1]=iPointY}}}this.setPointInfo(this.m_aPoint);redraw()}}}]);return Polygon}(Shape);var Point=function(_Shape6){_inherits(Point,_Shape6);var _super6=_createSuper(Point);function Point(){var _this6;_classCallCheck(this,Point);_this6=_super6.call(this);_this6.m_szType="Point";_this6.m_szId="";return _this6}_createClass(Point,[{key:"draw",value:function draw(){self[CONTEXT].beginPath();self[CONTEXT].fillStyle=this.m_szDrawColor;self[CONTEXT].globalAlpha=1;self[CONTEXT].arc(this.m_aPoint[0][0],this.m_aPoint[0][1],10,0,Math.PI*2,true);self[CONTEXT].closePath();self[CONTEXT].fill()}},{key:"drag",value:function drag(){}},{key:"stretch",value:function stretch(){}}]);return Point}(Shape);var DrawCanvas=function(){function DrawCanvas(szCanvasId){_classCallCheck(this,DrawCanvas);self=this;this[CANVAS]=$("#"+szCanvasId);this[CONTEXT]=this[CANVAS][0].getContext("2d");this[SHAPES]=[];this[DRAWSTATUS]=false;this[SHAPETYPE]="Rect";this[MAXSHAPENUMSUPPORT]=10;this[DRAWSHAPEMULTIONETIME]=true;this[CURRENTSHAPEINFO]={};this[EVENTCALLBACK]=null;this[SHAPESTYLE]={szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.7};this[POLYGONDRAWING]=false;this.m_iCanvasWidth=this[CANVAS].width();this.m_iCanvasHeight=this[CANVAS].height();this.m_iHorizontalResolution=0;this.m_iVerticalResolution=0;this.m_szDisplayMode="";this.m_szVideoFormat="";initEvent();this[SHAPES].length=0}_createClass(DrawCanvas,[{key:"setDrawMutiShapeOneTime",value:function setDrawMutiShapeOneTime(bDrawMuti){this[DRAWSHAPEMULTIONETIME]=bDrawMuti}},{key:"setMaxShapeSupport",value:function setMaxShapeSupport(iMax){this[MAXSHAPENUMSUPPORT]=iMax}},{key:"getMaxShapeSupport",value:function getMaxShapeSupport(){return this[MAXSHAPENUMSUPPORT]}},{key:"setDrawStatus",value:function setDrawStatus(bDrawStatus,cbCallback){this[DRAWSTATUS]=bDrawStatus;if(cbCallback&&bDrawStatus){this[EVENTCALLBACK]=cbCallback}if(!bDrawStatus){this[EVENTCALLBACK]=null}}},{key:"setShapeType",value:function setShapeType(szType){this[SHAPETYPE]=szType;redraw()}},{key:"setCurrentShapeInfo",value:function setCurrentShapeInfo(oShapeInfo){this[CURRENTSHAPEINFO]=oShapeInfo||{szId:"",szTips:"",iMinClosed:3,iMaxPointNum:11,iPolygonType:1,iRedrawMode:0}}},{key:"getShapeType",value:function getShapeType(){return this[SHAPETYPE]}},{key:"getAllShapesInfo",value:function getAllShapesInfo(){var aShape=[];for(var i=0,iLen=this[SHAPES].length;i<iLen;i++){if(this[SHAPES][i].m_szType==="Grid"){aShape.push({szType:this[SHAPES][i].m_szType,szGridMap:this[SHAPES][i].m_szGridMap,iGridColNum:this[SHAPES][i].m_iGridColNum,iGridRowNum:this[SHAPES][i].m_iGridRowNum})}else if(this[SHAPES][i].m_szType==="RectOSD"){aShape.push({szType:this[SHAPES][i].m_szType,szText:this[SHAPES][i].m_szText,szEnabled:this[SHAPES][i].m_szEnabled,szOSDType:this[SHAPES][i].m_szOSDType,iPositionX:this[SHAPES][i].m_aPoint[0][0],iPositionY:this[SHAPES][i].m_aPoint[0][1],szDateStyle:this[SHAPES][i].m_szDateStyle,szClockType:this[SHAPES][i].m_szClockType,szDisplayWeek:this[SHAPES][i].m_szDisplayWeek,szId:this[SHAPES][i].m_szId,szAlignment:this[SHAPES][i].m_szAlignment})}else{aShape.push({szType:this[SHAPES][i].m_szType,aPoint:this[SHAPES][i].m_aPoint,szId:this[SHAPES][i].m_szId,bChoosed:this[SHAPES][i].m_bChoosed})}}return aShape}},{key:"deleteRepeatPolyonById",value:function deleteRepeatPolyonById(id){var aShapes=this.getAllShapesInfo();var iShapesLen=aShapes.length;if(iShapesLen>0){for(var i=0;i<iShapesLen;i++){if(aShapes[i].szType==="Polygon"){if(aShapes[i].szId===id){this.deleteShape(i)}}}}}},{key:"getShapesInfoByType",value:function getShapesInfoByType(szType){var aShape=[];for(var i=0,iLen=this[SHAPES].length;i<iLen;i++){if(this[SHAPES][i].m_szType===szType){if(this[SHAPES][i].m_szType==="Grid"){aShape.push({szType:this[SHAPES][i].m_szType,szGridMap:this[SHAPES][i].m_szGridMap,iGridColNum:this[SHAPES][i].m_iGridColNum,iGridRowNum:this[SHAPES][i].m_iGridRowNum})}else if(this[SHAPES][i].m_szType==="RectOSD"){aShape.push({szType:this[SHAPES][i].m_szType,szText:this[SHAPES][i].m_szText,szEnabled:this[SHAPES][i].m_szEnabled,szOSDType:this[SHAPES][i].m_szOSDType,iPositionX:this[SHAPES][i].m_aPoint[0][0],iPositionY:this[SHAPES][i].m_aPoint[0][1],szDateStyle:this[SHAPES][i].m_szDateStyle,szClockType:this[SHAPES][i].m_szClockType,szDisplayWeek:this[SHAPES][i].m_szDisplayWeek,szId:this[SHAPES][i].m_szId,szAlignment:this[SHAPES][i].m_szAlignment})}else if(szType==="Polygon"){aShape.push({szType:this[SHAPES][i].m_szType,szId:this[SHAPES][i].m_szId,iPolygonType:this[SHAPES][i].m_iPolygonType,iMinClosed:this[SHAPES][i].m_iMinClosed,iMaxPointNum:this[SHAPES][i].m_iMaxPointNum,iEditType:this[SHAPES][i].m_iEditType,aPoint:this[SHAPES][i].m_aPoint,bClosed:this[SHAPES][i].m_bClosed,szTips:this[SHAPES][i].m_szTips,szDrawColor:this[SHAPES][i].m_szDrawColor,szFillColor:this[SHAPES][i].m_szFillColor,iTranslucent:this[SHAPES][i].m_iTranslucent})}else if(szType==="Line"){aShape.push({szType:this[SHAPES][i].m_szType,szId:this[SHAPES][i].m_szId,aPoint:this[SHAPES][i].m_aPoint,szTips:this[SHAPES][i].m_szTips,iLineType:this[SHAPES][i].m_iLineType,iDirection:this[SHAPES][i].m_iDirection,iArrowType:this[SHAPES][i].m_iArrowType,szDrawColor:this[SHAPES][i].m_szDrawColor,aCrossArrowPoint:this[SHAPES][i].m_aCrossArrowPoint})}else if(szType==="Rect"){aShape.push({szType:this[SHAPES][i].m_szType,iEditType:this[SHAPES][i].m_iEditType,aPoint:this[SHAPES][i].m_aPoint,szTips:this[SHAPES][i].m_szTips,szDrawColor:this[SHAPES][i].m_szDrawColor,szFillColor:this[SHAPES][i].m_szFillColor,iTranslucent:this[SHAPES][i].m_iTranslucent})}else{aShape.push({szType:this[SHAPES][i].m_szType,aPoint:this[SHAPES][i].m_aPoint})}}}return aShape}},{key:"setShapesInfoByType",value:function setShapesInfoByType(szType,aShapesInfo){if(!aShapesInfo){aShapesInfo=[]}var oShape=null;if(szType==="Rect"||szType==="Polygon"||szType==="Line"||szType==="Point"){for(var i=0,iLen=aShapesInfo.length;i<iLen;i++){if(szType==="Rect"){oShape=new Rect;oShape.m_iEditType=aShapesInfo[i].iEditType;oShape.m_szTips=aShapesInfo[i].szTips||"";oShape.m_szDrawColor=aShapesInfo[i].szDrawColor;oShape.m_szFillColor=aShapesInfo[i].szFillColor;oShape.m_iTranslucent=aShapesInfo[i].iTranslucent;oShape.m_iRedrawMode=aShapesInfo[i].iRedrawMode}else if(szType==="Polygon"){oShape=new Polygon;if(aShapesInfo[i].iPolygonType===0){oShape.m_bClosed=true}else{oShape.m_bClosed=aShapesInfo[i].bClosed}oShape.m_szTips=aShapesInfo[i].szTips||"";oShape.m_szId=aShapesInfo[i].szId||"";oShape.m_iPolygonType=aShapesInfo[i].iPolygonType;oShape.m_iMinClosed=aShapesInfo[i].iMinClosed||3;oShape.m_iMaxPointNum=aShapesInfo[i].iMaxPointNum||11;oShape.m_iEditType=aShapesInfo[i].iEditType;oShape.m_szDrawColor=aShapesInfo[i].szDrawColor;oShape.m_szFillColor=aShapesInfo[i].szFillColor;oShape.m_iTranslucent=aShapesInfo[i].iTranslucent;oShape.m_iRedrawMode=aShapesInfo[i].iRedrawMode}else if(szType==="Line"){oShape=new Line;oShape.m_iLineType=aShapesInfo[i].iLineType;oShape.m_szTips=aShapesInfo[i].szTips||"";oShape.m_szId=aShapesInfo[i].szId;oShape.m_iDirection=aShapesInfo[i].iDirection;oShape.m_iArrowType=aShapesInfo[i].iArrowType;oShape.m_szDrawColor=aShapesInfo[i].szDrawColor;oShape.setPointInfo(aShapesInfo[i].aPoint)}else if(szType==="Point"){oShape=new Point;oShape.m_szId=aShapesInfo[i].szId;oShape.m_szDrawColor=aShapesInfo[i].szDrawColor;oShape.setPointInfo(aShapesInfo[i].aPoint)}oShape.setPointInfo(aShapesInfo[i].aPoint);if(i===0){oShape.m_bChoosed=true}addShape(oShape)}}else if(szType==="Grid"){oShape=new MotionGrid;oShape.m_szGridMap=aShapesInfo[0].szGridMap||"";oShape.m_iGridColNum=aShapesInfo[0].iGridColNum||22;oShape.m_iGridRowNum=aShapesInfo[0].iGridRowNum||18;addShape(oShape)}redraw()}},{key:"addOSDShape",value:function addOSDShape(szText,szEnabled,iStartX,iStartY,oExtend){if(!iStartX&&!iStartY){iStartX=0;iStartY=0}if(!oExtend){oExtend={}}var oRectOSD=new RectOSD(szText,szEnabled);var iWidth=szText.replace(/[^x00-xff]/g,"rr").length*10;oRectOSD.m_szOSDType=oExtend.szOSDType||"";oRectOSD.m_szDateStyle=oExtend.szDateStyle||"";oRectOSD.m_szClockType=oExtend.szClockType||"";oRectOSD.m_szDisplayWeek=oExtend.szDisplayWeek||"";oRectOSD.m_szId=oExtend.szId||"";oRectOSD.m_szAlignment=""+oExtend.szAlignment||"0";if("0"===oRectOSD.m_szAlignment){oRectOSD.m_aPoint=[[iStartX,iStartY],[iWidth+iStartX,iStartY],[iWidth+iStartX,iStartY+20],[iStartX,iStartY+20]]}else if("1"===oRectOSD.m_szAlignment){oRectOSD.m_aPoint=[[0,iStartY],[iWidth,iStartY],[iWidth,iStartY+20],[0,iStartY+20]]}else if("2"===oRectOSD.m_szAlignment){oRectOSD.m_aPoint=[[this.m_iCanvasWidth-iWidth,iStartY],[this.m_iCanvasWidth,iStartY],[this.m_iCanvasWidth,iStartY+20],[this.m_iCanvasWidth-iWidth,iStartY+20]]}else{oRectOSD.m_aPoint=[[iStartX,iStartY],[iWidth+iStartX,iStartY],[iWidth+iStartX,iStartY+20],[iStartX,iStartY+20]]}addShape(oRectOSD);redraw()}},{key:"selectShapeById",value:function selectShapeById(szShapeType,szId){for(var i=0,iLen=self[SHAPES].length;i<iLen;i++){if(szShapeType===self[SHAPES][i].m_szType){if(szId===self[SHAPES][i].m_szId){self[SHAPES][i].m_bChoosed=true}else{self[SHAPES][i].m_bChoosed=false}}}redraw()}},{key:"setCanvasSize",value:function setCanvasSize(iWidth,iHeight){if(iWidth>0&&iHeight>0){this.m_iCanvasWidth=iWidth;this.m_iCanvasHeight=iHeight;redraw()}}},{key:"setDrawStyle",value:function setDrawStyle(szBorderColor,szFillColor,iTranslucent){this[SHAPESTYLE]={szDrawColor:szBorderColor,szFillColor:szFillColor,iTranslucent:iTranslucent}}},{key:"clearAllShape",value:function clearAllShape(){this[SHAPES].length=0;self[POLYGONDRAWING]=false;redraw()}},{key:"clearShapeByType",value:function clearShapeByType(szType){var iLen=this[SHAPES].length;for(var i=iLen;i>0;i--){if(this[SHAPES][i-1].m_szType===szType){if(szType==="Grid"){this[SHAPES][i-1].m_szGridMap="";this[SHAPES][i-1].m_aAddGridMap=[]}else{this[SHAPES].splice(i-1,1)}}}if("Polygon"===szType){self[POLYGONDRAWING]=false}redraw()}},{key:"deleteShape",value:function deleteShape(iShapeIndex){if(this[SHAPES].length>iShapeIndex){this[SHAPES].splice(iShapeIndex,1)}redraw()}},{key:"updateCanvas",value:function updateCanvas(szCanvasId){this[CANVAS]=$("#"+szCanvasId);this[CONTEXT]=this[CANVAS][0].getContext("2d");this.m_iCanvasWidth=this[CANVAS].width();this.m_iCanvasHeight=this[CANVAS].height();initEvent()}},{key:"resizeCanvas",value:function resizeCanvas(){this.m_iCanvasWidth=this[CANVAS].width();this.m_iCanvasHeight=this[CANVAS].height()}},{key:"canvasRedraw",value:function canvasRedraw(){redraw()}}]);return DrawCanvas}();return DrawCanvas}();var wasmplayer_min={exports:{}};(function(module,exports){!function(_0x47990a,_0xdb1cfc){module["exports"]=_0xdb1cfc()}(self,function(){return function(){var _0x46ae4a={477:function _(_0x5bdb75){_0x5bdb75["exports"]=function(_0x323c93,_0x4d55b2,_0x514169,_0x27445f){var _0x3b6165=self||window;try{try{var _0x279a6d;try{_0x279a6d=new _0x3b6165["Blob"]([_0x323c93])}catch(_0x2d1c0f){(_0x279a6d=new(_0x3b6165["BlobBuilder"]||_0x3b6165["WebKitBlobBuilder"]||_0x3b6165["MozBlobBuilder"]||_0x3b6165["MSBlobBuilder"]))["append"](_0x323c93),_0x279a6d=_0x279a6d["getBlob"]()}var _0x22393d=_0x3b6165["URL"]||_0x3b6165["webkitURL"],_0x2059f1=_0x22393d["createObjectURL"](_0x279a6d),_0x4f3e61=new _0x3b6165[_0x4d55b2](_0x2059f1,_0x514169);return _0x22393d["revokeObjectURL"](_0x2059f1),_0x4f3e61}catch(_0x36ee45){return new _0x3b6165[_0x4d55b2]("data:application/javascript,"["concat"](encodeURIComponent(_0x323c93)),_0x514169)}}catch(_0x50905f){if(!_0x27445f)throw Error("Inline worker is not supported");return new _0x3b6165[_0x4d55b2](_0x27445f,_0x514169)}}},61:function _(_0x260923,_0x19ae55,_0xf86b26){var _0xfa3e38=_0xf86b26(698)["default"];function _0x5b5eef(){_0x260923["exports"]=_0x5b5eef=function _0x5b5eef(){return _0x113461},_0x260923["exports"]["__esModule"]=!0,_0x260923["exports"]["default"]=_0x260923["exports"];var _0x113461={},_0x53b93b=Object["prototype"],_0xf2a88d=_0x53b93b["hasOwnProperty"],_0x25a752="function"==typeof Symbol?Symbol:{},_0x93a149=_0x25a752["iterator"]||"@@iterator",_0x382d95=_0x25a752["asyncIterator"]||"@@asyncIterator",_0xa0c512=_0x25a752["toStringTag"]||"@@toStringTag";function _0x7b31fa(_0x5d282f,_0x5a3fd6,_0x305d1a){return Object["defineProperty"](_0x5d282f,_0x5a3fd6,{value:_0x305d1a,enumerable:!0,configurable:!0,writable:!0}),_0x5d282f[_0x5a3fd6]}try{_0x7b31fa({},"")}catch(_0x27af99){_0x7b31fa=function _0x7b31fa(_0x13f761,_0x5c6bef,_0x455d01){return _0x13f761[_0x5c6bef]=_0x455d01}}function _0x515757(_0x4aeb38,_0x572594,_0x444eb5,_0x59e6b1){var _0x4fffd1=_0x572594&&_0x572594["prototype"]instanceof _0x151b84?_0x572594:_0x151b84,_0x4c4200=Object["create"](_0x4fffd1["prototype"]),_0x24bbfd=new _0x22a8ae(_0x59e6b1||[]);return _0x4c4200["_invoke"]=function(_0x1d5260,_0x3d048c,_0x765c53){var _0x33ce3a="suspendedStart";return function(_0x71b31d,_0x4431ce){if("executing"===_0x33ce3a)throw new Error("Generator is already running");if("completed"===_0x33ce3a){if("throw"===_0x71b31d)throw _0x4431ce;return _0xa99a36()}for(_0x765c53["method"]=_0x71b31d,_0x765c53["arg"]=_0x4431ce;;){var _0x3d221f=_0x765c53["delegate"];if(_0x3d221f){var _0x281ae4=_0xf87130(_0x3d221f,_0x765c53);if(_0x281ae4){if(_0x281ae4===_0x2522ce)continue;return _0x281ae4}}if("next"===_0x765c53["method"])_0x765c53["sent"]=_0x765c53["_sent"]=_0x765c53["arg"];else{if("throw"===_0x765c53["method"]){if("suspendedStart"===_0x33ce3a)throw _0x33ce3a="completed",_0x765c53["arg"];_0x765c53["dispatchException"](_0x765c53["arg"])}else"return"===_0x765c53["method"]&&_0x765c53["abrupt"]("return",_0x765c53["arg"])}_0x33ce3a="executing";var _0x4382c3=_0x3992d8(_0x1d5260,_0x3d048c,_0x765c53);if("normal"===_0x4382c3["type"]){if(_0x33ce3a=_0x765c53["done"]?"completed":"suspendedYield",_0x4382c3["arg"]===_0x2522ce)continue;return{value:_0x4382c3["arg"],done:_0x765c53["done"]}}"throw"===_0x4382c3["type"]&&(_0x33ce3a="completed",_0x765c53["method"]="throw",_0x765c53["arg"]=_0x4382c3["arg"])}}}(_0x4aeb38,_0x444eb5,_0x24bbfd),_0x4c4200}function _0x3992d8(_0x4e0668,_0xc8d4a6,_0x522a8c){try{return{type:"normal",arg:_0x4e0668["call"](_0xc8d4a6,_0x522a8c)}}catch(_0x55d507){return{type:"throw",arg:_0x55d507}}}_0x113461["wrap"]=_0x515757;var _0x2522ce={};function _0x151b84(){}function _0x1b29bc(){}function _0x27ed5f(){}var _0xd3360c={};_0x7b31fa(_0xd3360c,_0x93a149,function(){return this});var _0x566475=Object["getPrototypeOf"],_0x457c6f=_0x566475&&_0x566475(_0x566475(_0x339440([])));_0x457c6f&&_0x457c6f!==_0x53b93b&&_0xf2a88d["call"](_0x457c6f,_0x93a149)&&(_0xd3360c=_0x457c6f);var _0x191462=_0x27ed5f["prototype"]=_0x151b84["prototype"]=Object["create"](_0xd3360c);function _0xdabcbe(_0xf6fe3){["next","throw","return"]["forEach"](function(_0x1ee73c){_0x7b31fa(_0xf6fe3,_0x1ee73c,function(_0x26e365){return this["_invoke"](_0x1ee73c,_0x26e365)})})}function _0x4eee90(_0x40a594,_0x2e8583){function _0x22e914(_0xa51b63,_0x47e7c3,_0x2965c7,_0x2daa44){var _0x47ba20=_0x3992d8(_0x40a594[_0xa51b63],_0x40a594,_0x47e7c3);if("throw"!==_0x47ba20["type"]){var _0x191218=_0x47ba20["arg"],_0x2863c8=_0x191218["value"];return _0x2863c8&&"object"==_0xfa3e38(_0x2863c8)&&_0xf2a88d["call"](_0x2863c8,"__await")?_0x2e8583["resolve"](_0x2863c8["__await"])["then"](function(_0x4dc2f5){_0x22e914("next",_0x4dc2f5,_0x2965c7,_0x2daa44)},function(_0x2bece5){_0x22e914("throw",_0x2bece5,_0x2965c7,_0x2daa44)}):_0x2e8583["resolve"](_0x2863c8)["then"](function(_0x39c006){_0x191218["value"]=_0x39c006,_0x2965c7(_0x191218)},function(_0x534598){return _0x22e914("throw",_0x534598,_0x2965c7,_0x2daa44)})}_0x2daa44(_0x47ba20["arg"])}var _0xf219ed;this["_invoke"]=function(_0x1ac674,_0x333258){function _0x32e3ee(){return new _0x2e8583(function(_0x58359e,_0x34cdc0){_0x22e914(_0x1ac674,_0x333258,_0x58359e,_0x34cdc0)})}return _0xf219ed=_0xf219ed?_0xf219ed["then"](_0x32e3ee,_0x32e3ee):_0x32e3ee()}}function _0xf87130(_0x1aa617,_0x188086){var _0x69e7ad=_0x1aa617["iterator"][_0x188086["method"]];if(void 0===_0x69e7ad){if(_0x188086["delegate"]=null,"throw"===_0x188086["method"]){if(_0x1aa617["iterator"]["return"]&&(_0x188086["method"]="return",_0x188086["arg"]=void 0,_0xf87130(_0x1aa617,_0x188086),"throw"===_0x188086["method"]))return _0x2522ce;_0x188086["method"]="throw",_0x188086["arg"]=new TypeError("The iterator does not provide a 'throw' method")}return _0x2522ce}var _0x159294=_0x3992d8(_0x69e7ad,_0x1aa617["iterator"],_0x188086["arg"]);if("throw"===_0x159294["type"])return _0x188086["method"]="throw",_0x188086["arg"]=_0x159294["arg"],_0x188086["delegate"]=null,_0x2522ce;var _0x599df7=_0x159294["arg"];return _0x599df7?_0x599df7["done"]?(_0x188086[_0x1aa617["resultName"]]=_0x599df7["value"],_0x188086["next"]=_0x1aa617["nextLoc"],"return"!==_0x188086["method"]&&(_0x188086["method"]="next",_0x188086["arg"]=void 0),_0x188086["delegate"]=null,_0x2522ce):_0x599df7:(_0x188086["method"]="throw",_0x188086["arg"]=new TypeError("iterator result is not an object"),_0x188086["delegate"]=null,_0x2522ce)}function _0x42acdf(_0x327adb){var _0x4b3196={tryLoc:_0x327adb[0]};1 in _0x327adb&&(_0x4b3196["catchLoc"]=_0x327adb[1]),2 in _0x327adb&&(_0x4b3196["finallyLoc"]=_0x327adb[2],_0x4b3196["afterLoc"]=_0x327adb[3]),this["tryEntries"]["push"](_0x4b3196)}function _0x44b729(_0xb491f1){var _0x56be76=_0xb491f1["completion"]||{};_0x56be76["type"]="normal",delete _0x56be76["arg"],_0xb491f1["completion"]=_0x56be76}function _0x22a8ae(_0x2ddc46){this["tryEntries"]=[{tryLoc:"root"}],_0x2ddc46["forEach"](_0x42acdf,this),this["reset"](!0)}function _0x339440(_0x3237ff){if(_0x3237ff){var _0xb37066=_0x3237ff[_0x93a149];if(_0xb37066)return _0xb37066["call"](_0x3237ff);if("function"==typeof _0x3237ff["next"])return _0x3237ff;if(!isNaN(_0x3237ff["length"])){var _0x3d30ea=-1,_0x5efe12=function _0x3e9303(){for(;++_0x3d30ea<_0x3237ff["length"];)if(_0xf2a88d["call"](_0x3237ff,_0x3d30ea))return _0x3e9303["value"]=_0x3237ff[_0x3d30ea],_0x3e9303["done"]=!1,_0x3e9303;return _0x3e9303["value"]=void 0,_0x3e9303["done"]=!0,_0x3e9303};return _0x5efe12["next"]=_0x5efe12}}return{next:_0xa99a36}}function _0xa99a36(){return{value:void 0,done:!0}}return _0x1b29bc["prototype"]=_0x27ed5f,_0x7b31fa(_0x191462,"constructor",_0x27ed5f),_0x7b31fa(_0x27ed5f,"constructor",_0x1b29bc),_0x1b29bc["displayName"]=_0x7b31fa(_0x27ed5f,_0xa0c512,"GeneratorFunction"),_0x113461["isGeneratorFunction"]=function(_0x171c52){var _0x3a3770="function"==typeof _0x171c52&&_0x171c52["constructor"];return!!_0x3a3770&&(_0x3a3770===_0x1b29bc||"GeneratorFunction"===(_0x3a3770["displayName"]||_0x3a3770["name"]))},_0x113461["mark"]=function(_0x356f9d){return Object["setPrototypeOf"]?Object["setPrototypeOf"](_0x356f9d,_0x27ed5f):(_0x356f9d["__proto__"]=_0x27ed5f,_0x7b31fa(_0x356f9d,_0xa0c512,"GeneratorFunction")),_0x356f9d["prototype"]=Object["create"](_0x191462),_0x356f9d},_0x113461["awrap"]=function(_0x38ca23){return{__await:_0x38ca23}},_0xdabcbe(_0x4eee90["prototype"]),_0x7b31fa(_0x4eee90["prototype"],_0x382d95,function(){return this}),_0x113461["AsyncIterator"]=_0x4eee90,_0x113461["async"]=function(_0xf5e5e0,_0x4de259,_0x29dbd6,_0x35a37d,_0xa9ef88){void 0===_0xa9ef88&&(_0xa9ef88=Promise);var _0x4c5a6d=new _0x4eee90(_0x515757(_0xf5e5e0,_0x4de259,_0x29dbd6,_0x35a37d),_0xa9ef88);return _0x113461["isGeneratorFunction"](_0x4de259)?_0x4c5a6d:_0x4c5a6d["next"]()["then"](function(_0x4fced2){return _0x4fced2["done"]?_0x4fced2["value"]:_0x4c5a6d["next"]()})},_0xdabcbe(_0x191462),_0x7b31fa(_0x191462,_0xa0c512,"Generator"),_0x7b31fa(_0x191462,_0x93a149,function(){return this}),_0x7b31fa(_0x191462,"toString",function(){return"[object Generator]"}),_0x113461["keys"]=function(_0x2945b6){var _0x3ae89=[];for(var _0x507d28 in _0x2945b6)_0x3ae89["push"](_0x507d28);return _0x3ae89["reverse"](),function _0x476aa7(){for(;_0x3ae89["length"];){var _0x44a0e5=_0x3ae89["pop"]();if(_0x44a0e5 in _0x2945b6)return _0x476aa7["value"]=_0x44a0e5,_0x476aa7["done"]=!1,_0x476aa7}return _0x476aa7["done"]=!0,_0x476aa7}},_0x113461["values"]=_0x339440,_0x22a8ae["prototype"]={constructor:_0x22a8ae,reset:function reset(_0x5ddf83){if(this["prev"]=0,this["next"]=0,this["sent"]=this["_sent"]=void 0,this["done"]=!1,this["delegate"]=null,this["method"]="next",this["arg"]=void 0,this["tryEntries"]["forEach"](_0x44b729),!_0x5ddf83){for(var _0x59602f in this)"t"===_0x59602f["charAt"](0)&&_0xf2a88d["call"](this,_0x59602f)&&!isNaN(+_0x59602f["slice"](1))&&(this[_0x59602f]=void 0)}},stop:function stop(){this["done"]=!0;var _0xb49df9=this["tryEntries"][0]["completion"];if("throw"===_0xb49df9["type"])throw _0xb49df9["arg"];return this["rval"]},dispatchException:function dispatchException(_0x5ee2ad){if(this["done"])throw _0x5ee2ad;var _0x490ad5=this;function _0xd99872(_0x53713e,_0x1b7619){return _0x4aa07e["type"]="throw",_0x4aa07e["arg"]=_0x5ee2ad,_0x490ad5["next"]=_0x53713e,_0x1b7619&&(_0x490ad5["method"]="next",_0x490ad5["arg"]=void 0),!!_0x1b7619}for(var _0x4f9d11=this["tryEntries"]["length"]-1;_0x4f9d11>=0;--_0x4f9d11){var _0x323e66=this["tryEntries"][_0x4f9d11],_0x4aa07e=_0x323e66["completion"];if("root"===_0x323e66["tryLoc"])return _0xd99872("end");if(_0x323e66["tryLoc"]<=this["prev"]){var _0x32d8c8=_0xf2a88d["call"](_0x323e66,"catchLoc"),_0x48e991=_0xf2a88d["call"](_0x323e66,"finallyLoc");if(_0x32d8c8&&_0x48e991){if(this["prev"]<_0x323e66["catchLoc"])return _0xd99872(_0x323e66["catchLoc"],!0);if(this["prev"]<_0x323e66["finallyLoc"])return _0xd99872(_0x323e66["finallyLoc"])}else{if(_0x32d8c8){if(this["prev"]<_0x323e66["catchLoc"])return _0xd99872(_0x323e66["catchLoc"],!0)}else{if(!_0x48e991)throw new Error("try statement without catch or finally");if(this["prev"]<_0x323e66["finallyLoc"])return _0xd99872(_0x323e66["finallyLoc"])}}}}},abrupt:function abrupt(_0x2667ec,_0x50a676){for(var _0x297ccd=this["tryEntries"]["length"]-1;_0x297ccd>=0;--_0x297ccd){var _0xb43e=this["tryEntries"][_0x297ccd];if(_0xb43e["tryLoc"]<=this["prev"]&&_0xf2a88d["call"](_0xb43e,"finallyLoc")&&this["prev"]<_0xb43e["finallyLoc"]){var _0x45c742=_0xb43e;break}}_0x45c742&&("break"===_0x2667ec||"continue"===_0x2667ec)&&_0x45c742["tryLoc"]<=_0x50a676&&_0x50a676<=_0x45c742["finallyLoc"]&&(_0x45c742=null);var _0xcabeca=_0x45c742?_0x45c742["completion"]:{};return _0xcabeca["type"]=_0x2667ec,_0xcabeca["arg"]=_0x50a676,_0x45c742?(this["method"]="next",this["next"]=_0x45c742["finallyLoc"],_0x2522ce):this["complete"](_0xcabeca)},complete:function complete(_0x2079d6,_0x4a7159){if("throw"===_0x2079d6["type"])throw _0x2079d6["arg"];return"break"===_0x2079d6["type"]||"continue"===_0x2079d6["type"]?this["next"]=_0x2079d6["arg"]:"return"===_0x2079d6["type"]?(this["rval"]=this["arg"]=_0x2079d6["arg"],this["method"]="return",this["next"]="end"):"normal"===_0x2079d6["type"]&&_0x4a7159&&(this["next"]=_0x4a7159),_0x2522ce},finish:function finish(_0x4881e6){for(var _0x2e297c=this["tryEntries"]["length"]-1;_0x2e297c>=0;--_0x2e297c){var _0x37fbe7=this["tryEntries"][_0x2e297c];if(_0x37fbe7["finallyLoc"]===_0x4881e6)return this["complete"](_0x37fbe7["completion"],_0x37fbe7["afterLoc"]),_0x44b729(_0x37fbe7),_0x2522ce}},catch:function _catch(_0x4a293a){for(var _0x172a83=this["tryEntries"]["length"]-1;_0x172a83>=0;--_0x172a83){var _0x289e4e=this["tryEntries"][_0x172a83];if(_0x289e4e["tryLoc"]===_0x4a293a){var _0x115a93=_0x289e4e["completion"];if("throw"===_0x115a93["type"]){var _0x316c0e=_0x115a93["arg"];_0x44b729(_0x289e4e)}return _0x316c0e}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(_0x41faed,_0x38f827,_0x36ab4f){return this["delegate"]={iterator:_0x339440(_0x41faed),resultName:_0x38f827,nextLoc:_0x36ab4f},"next"===this["method"]&&(this["arg"]=void 0),_0x2522ce}},_0x113461}_0x260923["exports"]=_0x5b5eef,_0x260923["exports"]["__esModule"]=!0,_0x260923["exports"]["default"]=_0x260923["exports"]},698:function _(_0x5ba480){function _0x1dd605(_0x112a2d){return _0x5ba480["exports"]=_0x1dd605="function"==typeof Symbol&&"symbol"==_typeof(Symbol["iterator"])?function(_0x3e629a){return _typeof(_0x3e629a)}:function(_0x35f406){return _0x35f406&&"function"==typeof Symbol&&_0x35f406["constructor"]===Symbol&&_0x35f406!==Symbol["prototype"]?"symbol":_typeof(_0x35f406)},_0x5ba480["exports"]["__esModule"]=!0,_0x5ba480["exports"]["default"]=_0x5ba480["exports"],_0x1dd605(_0x112a2d)}_0x5ba480["exports"]=_0x1dd605,_0x5ba480["exports"]["__esModule"]=!0,_0x5ba480["exports"]["default"]=_0x5ba480["exports"]},687:function _(_0x3354d,_0x5e2ce5,_0xd82909){var _0x185b8d=_0xd82909(61)();_0x3354d["exports"]=_0x185b8d;try{regeneratorRuntime=_0x185b8d}catch(_0x4658b4){"object"==(typeof globalThis==="undefined"?"undefined":_typeof(globalThis))?globalThis["regeneratorRuntime"]=_0x185b8d:Function("r","regeneratorRuntime = r")(_0x185b8d)}}},_0x561b32={};function _0x3db1c2(_0x3cbbcf){var _0x5f4101=_0x561b32[_0x3cbbcf];if(void 0!==_0x5f4101)return _0x5f4101["exports"];var _0x20b58b=_0x561b32[_0x3cbbcf]={exports:{}};return _0x46ae4a[_0x3cbbcf](_0x20b58b,_0x20b58b["exports"],_0x3db1c2),_0x20b58b["exports"]}_0x3db1c2["n"]=function(_0x1ee727){var _0x20d7a1=_0x1ee727&&_0x1ee727["__esModule"]?function(){return _0x1ee727["default"]}:function(){return _0x1ee727};return _0x3db1c2["d"](_0x20d7a1,{a:_0x20d7a1}),_0x20d7a1},_0x3db1c2["d"]=function(_0xae82,_0x2bf53e){for(var _0x5e9f99 in _0x2bf53e)_0x3db1c2["o"](_0x2bf53e,_0x5e9f99)&&!_0x3db1c2["o"](_0xae82,_0x5e9f99)&&Object["defineProperty"](_0xae82,_0x5e9f99,{enumerable:!0,get:_0x2bf53e[_0x5e9f99]})},_0x3db1c2["o"]=function(_0x361621,_0x4efe69){return Object["prototype"]["hasOwnProperty"]["call"](_0x361621,_0x4efe69)},_0x3db1c2["r"]=function(_0x5450ff){"undefined"!=typeof Symbol&&Symbol["toStringTag"]&&Object["defineProperty"](_0x5450ff,Symbol["toStringTag"],{value:"Module"}),Object["defineProperty"](_0x5450ff,"__esModule",{value:!0})};var _0x399207={};return function(){function _0x540ab2(_0x2f3bd9,_0x3bf65b){if(!(_0x2f3bd9 instanceof _0x3bf65b))throw new TypeError("Cannot call a class as a function")}function _0x375eb9(_0x236098,_0x5256aa){for(var _0x376290=0;_0x376290<_0x5256aa["length"];_0x376290++){var _0x39293e=_0x5256aa[_0x376290];_0x39293e["enumerable"]=_0x39293e["enumerable"]||!1,_0x39293e["configurable"]=!0,"value"in _0x39293e&&(_0x39293e["writable"]=!0),Object["defineProperty"](_0x236098,_0x39293e["key"],_0x39293e)}}function _0x132bfb(_0x1fa801,_0x44c313,_0x36397e){return _0x44c313&&_0x375eb9(_0x1fa801["prototype"],_0x44c313),_0x36397e&&_0x375eb9(_0x1fa801,_0x36397e),Object["defineProperty"](_0x1fa801,"prototype",{writable:!1}),_0x1fa801}_0x3db1c2["r"](_0x399207),_0x3db1c2["d"](_0x399207,{JSPlayCtrl:function JSPlayCtrl(){return _0xd02664}});var _0x34c64b=1281,_0x34c711=1282,_0x50343f=1285,_0x485962=1287,_0x52a940=1288,_0xfdd9cf=1289,_0x16368b=1298,_0x4e31b9=1302,_0x2d5181=1,_0xe76158=2,_0x2dad09=3,_0x44955c=0,_0x5583d8=256,_0x2e6b56=512,_0x3ab30c=768,_0x553581=1024,_0x2e57c2=1280,_0x30e5af=1536,_0x3c1d0c=1792,_0x53b3cd=2048,_0x3572ec=2304,_0x1ed5ce=2560,_0x29624e=1,_0x59207d=2,_0x314b8c=4,_0x1080c7=8,_0x51b898=16,_0x168a5f=32;function _0x919d33(_0x53b9ce,_0x46511a,_0x10cdf9,_0xdbf937,_0x8865a6,_0x1e7882,_0x4ec262){try{var _0x218842=_0x53b9ce[_0x1e7882](_0x4ec262),_0x1256dc=_0x218842["value"]}catch(_0x4920d8){return void _0x10cdf9(_0x4920d8)}_0x218842["done"]?_0x46511a(_0x1256dc):Promise["resolve"](_0x1256dc)["then"](_0xdbf937,_0x8865a6)}var _0x385521=_0x3db1c2(687),_0x1b0558=_0x3db1c2["n"](_0x385521),_0x563960=_0x3db1c2(477),_0x2eef43=_0x3db1c2["n"](_0x563960);function _0x669bd9(){return _0x2eef43()("((()=>{'use strict';function _0x4fb29f(_0x699af8,_0x553231){if(!(_0x699af8 instanceof _0x553231))throw new TypeError('Cannot\\x20call\\x20a\\x20class\\x20as\\x20a\\x20function');}function _0x23fecc(_0x70a94,_0x326780){for(var _0x1e2a92=0x0;_0x1e2a92<_0x326780['length'];_0x1e2a92++){var _0x222ecd=_0x326780[_0x1e2a92];_0x222ecd['enumerable']=_0x222ecd['enumerable']||!0x1,_0x222ecd['configurable']=!0x0,'value'in _0x222ecd&&(_0x222ecd['writable']=!0x0),Object['defineProperty'](_0x70a94,_0x222ecd['key'],_0x222ecd);}}function _0x1706bb(_0x19300f,_0x130bb8,_0x1d8784){return _0x130bb8&&_0x23fecc(_0x19300f['prototype'],_0x130bb8),_0x1d8784&&_0x23fecc(_0x19300f,_0x1d8784),Object['defineProperty'](_0x19300f,'prototype',{'writable':!0x1}),_0x19300f;}var _0x5b7647=0x501,_0x580ddf=0x502,_0xab93fd=0x505,_0x586693=0x507,_0x575a0d=0x508,_0x3c54c3=0x509,_0x3fad75=0x512,_0xb2e391=0x516,_0x4ef29e=0x1,_0x1afba3=0x2,_0xe61a6b=0x3,_0x1f6d80=0x0,_0x37736a=0x100,_0x6e1995=0x200,_0x58eeae=0x300,_0x939021=0x400,_0x1dfea6=0x500,_0x50a2e1=0x600,_0xdb36bc=0x700,_0x364205=0x800,_0x47baa5=0x900,_0x233b51=0xa00,_0x53f7f9=0x1,_0x41d529=0x2,_0x1c4c09=0x4,_0x34899b=0x8,_0x2c7294=0x10,_0x441385=0x20,_0x102364=(function(){function _0xfa9232(_0x6dc8fe,_0x327ffb,_0x5ee886){_0x4fb29f(this,_0xfa9232),this['width']=0x0,this['height']=0x0,this['decoderObj']=null,this['FirstFrame']=!0x0,this['ready_frames']=[],this['underflow']=!0x0,this['sab']=_0x6dc8fe,this['frameRate']=0x1e,this['needSetPreSoft']=!0x1,this['decoderCurStatus']=0x2,this['decoderOutSuccess']=!0x1,this['decoderObjNeedReset']=!0x1,this['oVideoRenderHandle']=_0x327ffb,this['output']=this['output']['bind'](this),this['reportError']=this['reportError']['bind'](this),this['player']=null,null!=_0x5ee886&&(this['player']=_0x5ee886),this['curFrame']=null;}return _0x1706bb(_0xfa9232,[{'key':'initDecoder','value':function(){if(null==this['decoderObj']){var _0x2deb5b={'output':this['output'],'error':this['reportError']};this['decoderObj']=new VideoDecoder(_0x2deb5b);}this['underflow']&&(this['underflow']=!0x1,setTimeout(this['oVideoRenderHandle']['RenderFrame'](),0x0),this['oVideoRenderHandle']['displayRunning']=!0x0),this['decoderCurStatus']=0x2,this['FirstFrame']=!0x0;}},{'key':'inputData','value':function(_0x32cf80,_0x30da9e){null!=this['decoderObj']&&('configured'==this['decoderObj']['state']||this['FirstFrame'])&&this['decodeProcess'](_0x32cf80,_0x30da9e),_0x30da9e['nStreamEnd']&&this['SetStreamEnd']();}},{'key':'concatenate','value':function(_0x14391f){for(var _0x8cd8ab=0x0,_0x4903b5=arguments['length'],_0x4274de=new Array(_0x4903b5>0x1?_0x4903b5-0x1:0x0),_0x176be7=0x1;_0x176be7<_0x4903b5;_0x176be7++)_0x4274de[_0x176be7-0x1]=arguments[_0x176be7];for(var _0x5350d1=0x0,_0x462a13=_0x4274de;_0x5350d1<_0x462a13['length'];_0x5350d1++){var _0x3aac3a=_0x462a13[_0x5350d1];_0x8cd8ab+=_0x3aac3a['length'];}for(var _0x27919b=new _0x14391f(_0x8cd8ab),_0x2984b9=0x0,_0x2535a0=0x0,_0x3f8c56=_0x4274de;_0x2535a0<_0x3f8c56['length'];_0x2535a0++){var _0x3a4513=_0x3f8c56[_0x2535a0];_0x27919b['set'](_0x3a4513,_0x2984b9),_0x2984b9+=_0x3a4513['length'];}return _0x27919b;}},{'key':'processData','value':function(_0x5c3678){for(var _0x57871d=null,_0x47605d=null,_0xcff061=null,_0xe7f948=!0x1,_0x5dba88=!0x1,_0x4ce21e=0x0,_0x181e70=0x0;_0x181e70<_0x5c3678['length']-0x4;_0x181e70++){if(0x0!=_0x5c3678[_0x181e70]||0x0!=_0x5c3678[_0x181e70+0x1]||0x0!=_0x5c3678[_0x181e70+0x2]||0x1!=_0x5c3678[_0x181e70+0x3]||0x67!=_0x5c3678[_0x181e70+0x4]&&0x27!=_0x5c3678[_0x181e70+0x4]||(0x0!=_0x181e70?(_0x5dba88=!0x0,_0x57871d=_0x5c3678['slice'](_0x181e70),_0x4ce21e=_0x181e70):_0x57871d=_0x5c3678),0x0==_0x5c3678[_0x181e70]&&0x0==_0x5c3678[_0x181e70+0x1]&&0x0==_0x5c3678[_0x181e70+0x2]&&0x1==_0x5c3678[_0x181e70+0x3]&&(0x9==_0x5c3678[_0x181e70+0x4]||0x6==_0x5c3678[_0x181e70+0x4])){if(null==_0x57871d)continue;null==_0x47605d&&(_0x47605d=_0x5c3678['slice'](_0x4ce21e,_0x181e70),_0xe7f948=!0x0);}if(0x0==_0x5c3678[_0x181e70]&&0x0==_0x5c3678[_0x181e70+0x1]&&0x0==_0x5c3678[_0x181e70+0x2]&&0x1==_0x5c3678[_0x181e70+0x3]&&(0x65==_0x5c3678[_0x181e70+0x4]||0x25==_0x5c3678[_0x181e70+0x4])){_0xe7f948&&(_0xcff061=_0x5c3678['slice'](_0x181e70));break;}}return _0xe7f948?this['concatenate'](Uint8Array,_0x47605d,_0xcff061):_0x5dba88?_0x57871d:_0x5c3678;}},{'key':'processData1','value':function(_0x312d7a){return 0x0!=_0x312d7a[0x0]||0x0!=_0x312d7a[0x1]||0x0!=_0x312d7a[0x2]||0x1!=_0x312d7a[0x3]||0x9!=_0x312d7a[0x4]&&0x6!=_0x312d7a[0x4]?_0x312d7a:_0x312d7a['slice'](0x5);}},{'key':'formatVideoDecoderConfigure','value':function(_0x9f08,_0x2f93e2,_0x2dc5b4,_0x369db2){var _0xa447e1='';if(0x5==_0x2f93e2)_0xa447e1='hvc1.1.6.L123.00',console['log']('265\\x20hard\\x20decoder');else{if(0x100==_0x2f93e2){for(var _0x1f45d9=0x0;_0x1f45d9<_0x9f08['length'];_0x1f45d9++)if(0x67===_0x9f08[_0x1f45d9]||0x27===_0x9f08[_0x1f45d9]){var _0x114ef4=_0x9f08['subarray'](_0x1f45d9+0x1,_0x1f45d9+0x4);_0xa447e1='avc1.';for(var _0x4d7a92=0x0;_0x4d7a92<0x3;_0x4d7a92++){var _0x1e881e=_0x114ef4[_0x4d7a92]['toString'](0x10);_0x1e881e['length']<0x2&&(_0x1e881e='0'+_0x1e881e),_0xa447e1+=_0x1e881e;}break;}console['log']('264\\x20hard\\x20decoder');}else console['log']('Support\\x20Error:\\x20hard\\x20decoder\\x20only\\x20support\\x20264\\x20and\\x20265\\x20!!!');}var _0x51c13a={'codec':_0xa447e1,'hardwareAcceleration':'prefer-hardware','optimizeForLatency':0x1};return 0x5!=_0x2f93e2&&this['needSetPreSoft']&&(_0x51c13a['hardwareAcceleration']='prefer-software'),_0x51c13a;}},{'key':'decodeProcess','value':function(_0x3afe3b,_0x599685){var _0x50c32e=this;this['frameRate']!=_0x599685['frameRate']&&(this['frameRate']=_0x599685['frameRate']),this['width']!=_0x599685['width']&&(this['width']=_0x599685['width']),this['height']!=_0x599685['height']&&(this['height']=_0x599685['height']),_0x599685['needSetPreSoft']&&(this['needSetPreSoft']=_0x599685['needSetPreSoft']);var _0x190a27=_0x3afe3b;if(0x4!=this['decoderCurStatus']&&null!=this['decoderObj']){if('configured'==this['decoderObj']['state']){var _0x22eea7=new EncodedVideoChunk({'data':_0x190a27,'timestamp':_0x599685['timeStamp'],'type':_0x599685['isKeyFrame']?'key':'delta'});this['decoderObj']['decode'](_0x22eea7),_0x190a27=null,_0x3afe3b=null,_0x22eea7=null,_0x599685['frameType'];}else{if(_0x599685['isKeyFrame']&&'unconfigured'==this['decoderObj']['state']){var _0x31ccdf=this['formatVideoDecoderConfigure'](_0x3afe3b,_0x599685['codecType'],_0x599685['width'],_0x599685['height']);if(''==_0x31ccdf['codec'])return-0x1;VideoDecoder['isConfigSupported'](_0x31ccdf)['then'](function(_0x399d9f){if(_0x399d9f['supported']){_0x50c32e['decoderObj']['configure'](_0x31ccdf),_0x190a27=_0x50c32e['processData'](_0x3afe3b),_0x50c32e['FirstFrame']=!0x1;var _0x197914=new EncodedVideoChunk({'data':_0x190a27,'timestamp':_0x599685['timeStamp'],'type':_0x599685['isKeyFrame']?'key':'delta'});_0x50c32e['decoderObj']['decode'](_0x197914),_0x31ccdf=null,_0x190a27=null,_0x3afe3b=null;}else console['log']('%c4>HardDecoder\\x20ConfigSupported\\x20error,switch\\x20hard\\x20to\\x20soft','color:\\x20red'),_0x50c32e['oVideoRenderHandle']['HardDecodeError']();})['catch'](function(){console['log']('VideoDecoder.js\\x20isConfigSupported\\x20error\\x20switch\\x20hard\\x20to\\x20soft\\x20'),_0x50c32e['oVideoRenderHandle']['HardDecodeError']();});}}}}},{'key':'output','value':function(_0x1fad0e){if('configured'==this['decoderObj']['state'])_0x1fad0e['format'],_0x1fad0e['codedWidth'],_0x1fad0e['codedHeight'],_0x1fad0e['displayWidth'],_0x1fad0e['displayHeight'],_0x1fad0e['duration'],_0x1fad0e['timestamp'],(this['ready_frames']['push'](_0x1fad0e),this['decoderOutSuccess']||(this['decoderOutSuccess']=!0x0),this['decoderObj']['decodeQueueSize']<=0x1&&(this['player']?this['player']['JSPlayM4_GetRawData']():postMessage({'function':'GetRawData'})));else _0x1fad0e['close']();}},{'key':'output2','value':function(_0x4d6080){var _0x1cc81b=this;_0x4d6080['timestamp'],createImageBitmap(_0x4d6080)['then'](function(_0x6e7c54){_0x4d6080['close'](),_0x1cc81b['ready_frames']['push'](_0x6e7c54);});}},{'key':'reportError','value':function(_0x5ae46a){this['decoderOutSuccess']?this['decoderObjNeedReset']=!0x0:(this['oVideoRenderHandle']['HardDecodeError'](),console['log']('%cswitch\\x20hardVideoDecoder\\x20to\\x20softVideoDecoder','color:\\x20red'));}},{'key':'destroyDecoder','value':function(){var _0x573c05=this;return new Promise(function(_0x40d531,_0x2540c7){_0x573c05['clearDecoderObjBuffer']()['then'](function(){null!=_0x573c05['decoderObj']&&('closed'!=_0x573c05['decoderObj']['state']&&_0x573c05['decoderObj']['close'](),console['log']('>>>JS\\x2001\\x20destroy\\x20decoderObj'),_0x573c05['decoderObj']=null),_0x573c05['decoderCurStatus']=0x4,_0x573c05['decoderOutSuccess']=!0x1,_0x573c05['FirstFrame']=!0x0,_0x573c05['underflow']=!0x0,_0x573c05['needSetPreSoft']=!0x1,_0x573c05['decoderObjNeedReset']=!0x1,_0x40d531();},function(){_0x2540c7();});});}},{'key':'resetDecoder','value':function(){var _0x2b72fa=this;return new Promise(function(_0x262efd,_0x1c5d2c){_0x2b72fa['destroyDecoder']()['then'](function(){_0x2b72fa['initDecoder'](),console['log']('%c\\x20reset\\x20hard\\x20decoder','color:red'),_0x262efd();},function(){_0x1c5d2c();});});}},{'key':'clearDecoderObjBuffer','value':function(){var _0x849742=this;return new Promise(function(_0x11d2ac,_0x4d2b1b){for(var _0x22970f=_0x849742['ready_frames']['length'],_0x27b8c2=0x0;_0x27b8c2<_0x22970f;_0x27b8c2++){_0x849742['ready_frames']['shift']()['close']();}_0x849742['ready_frames']['splice'](0x0,_0x849742['ready_frames']['length']),null!=_0x849742['decoderObj']&&'configured'==_0x849742['decoderObj']['state']&&_0x849742['decoderObj']['reset'](),_0x11d2ac();});}},{'key':'SetStreamEnd','value':function(){return 0x0==this['decoderObj']['decodeQueueSize']&&0x0==this['ready_frames']['length']&&(this['decoderObj']['flush'](),console['log']('flush')),0x1;}},{'key':'GetFrame','value':function(){var _0x19bc51=this;return new Promise(function(_0x4f3a38,_0x208db9){if(null!=_0x19bc51['curFrame']){var _0x7f32cb=_0x19bc51['ready_frames']['shift']();_0x7f32cb['close'](),_0x7f32cb=null,_0x19bc51['curFrame']=null;}0x0!=_0x19bc51['ready_frames']['length']?(_0x19bc51['curFrame']=_0x19bc51['ready_frames'][0x0],_0x4f3a38(_0x19bc51['curFrame'])):(_0x19bc51['curFrame']=null,_0x4f3a38(null));});}},{'key':'GetFrameBufferLength','value':function(){return this['ready_frames']['length'];}},{'key':'GetImageYUV','value':function(){var _0x449755=this;return new Promise(function(_0x3889bc,_0x5a10e1){var _0x31c165=null;if(null!=_0x449755['curFrame']?_0x31c165=_0x449755['curFrame']:0x0!=_0x449755['ready_frames']['length']&&(_0x31c165=_0x449755['ready_frames'][0x0]),null!=_0x31c165){var _0x1ded23=_0x31c165['displayWidth'],_0x23b9ee=_0x31c165['displayHeight'],_0x454e52=_0x1ded23*_0x23b9ee*0x3/0x2,_0x578998=new Uint8Array(_0x454e52),_0x2146c8=_0x31c165['format'];_0x31c165['copyTo'](_0x578998)['then'](function(){console['log']('2\\x20yuvLength:'+_0x454e52+',displayWidth:'+_0x1ded23),_0x3889bc({'yuvFrameBuffer':_0x578998,'yuvLength':_0x454e52,'displayWidth':_0x1ded23,'displayHeight':_0x23b9ee,'yuvType':_0x2146c8});});}else _0x3889bc({'yuvFrameBuffer':-0x1,'yuvLength':-0x1,'displayWidth':-0x1,'displayHeight':-0x1,'yuvType':-0x1});});}}]),_0xfa9232;}()),_0x1b3061=0x1,_0x2a6293=0x80000001,_0x431a2e=0x80000003,_0x1f1f19=0x80000004,_0x4a3918=0x80000005,_0x4f3ec1=0x8000000a,_0x2bc1a4=0x8000000d,_0x4f7f9a=0x8000000e,_0x24d6ec=0x1,_0x2b52b0=0x2,_0x24b5aa={'SR_DE_NULL':0x0,'SR_DE_FISH_ORIGINAL':0x1,'SR_DE_FISH_PTZ_CEILING':0x2,'SR_DE_FISH_PTZ_FLOOR':0x3,'SR_DE_FISH_PTZ_WALL':0x4,'SR_DE_FISH_PANORAMA_CEILING_360':0x5,'SR_DE_FISH_PANORAMA_CEILING_180':0x6,'SR_DE_FISH_PANORAMA_FLOOR_360':0x7,'SR_DE_FISH_PANORAMA_FLOOR_180':0x8,'SR_DE_FISH_PANORAMA_WALL':0x9,'SR_DE_FISH_SEMISPHERE':0xa,'SR_DE_EAGLEEYE_SEMISPHERE':0xb,'SR_DE_EAGLEEYE_PLANE':0xc,'SR_DE_FISH_CYLINDER_CEILING':0xd,'SR_DE_FISH_CYLINDER_FLOOR':0xe,'SR_DE_FISH_CYLINDER_SPLIT_CEILING':0xf,'SR_DE_FISH_CYLINDER_SPLIT_FLOOR':0x10,'SR_DE_FISH_PLANET':0x11,'SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL':0x12,'SR_DE_FISH_ARCSPHERE_VERTICAL_WALL':0x13,'SR_DE_FISH_ANIMATION_SWITCH_CEILING':0x14,'SR_DE_FISH_ANIMATION_SWITCH_FLOOR':0x15,'SR_DE_PANORAMA_SPHERE':0x16,'SR_DE_PANORAMA_PLANET':0x17},_0x26fdc6=0x0,_0x41de94=0x1,_0x395519=0x2,_0x428c76=0x3,_0xa6febe=0x4,_0x20ae93=0x5,_0x5a0c52=0x6,_0x1aec18=0x100,_0xef11b=0x1,_0x132faf=0x2,_0x14fa4a=0x3,_0xc17459=0x4,_0x44b8bc=0x0,_0x1f7677=0x1,_0x29bcd1=0x2,_0xd185d0=0x1,_0x32648d=0x2,_0x2d568c=0x3,_0x1bccf7=0x0,_0x355dce=0x1,_0x108b92=0x1,_0x596e5b=0x2,_0x38a98d=0x1,_0x569be1=0x2,_0x1f07f3=0x3,_0x29c4a5=0x4,_0x257672=0x5,_0x5a101a='\\x0aattribute\\x20vec3\\x20xy;\\x0aattribute\\x20vec2\\x20uv;\\x0auniform\\x20int\\x20bCapture;\\x20\\x0a\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x0avoid\\x20main(void)\\x20{\\x0a\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(xy.x,\\x20-xy.y,\\x20xy.z,\\x201.0);\\x0a\\x20\\x20}\\x0a\\x20\\x20else\\x0a\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(xy,\\x201.0);\\x0a\\x20\\x20}\\x0a\\x20\\x20v_uv\\x20=\\x20uv;\\x0a}\\x0a',_0x4c5fbd='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec3\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20\\x20color;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20float\\x20\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20-position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20position.z;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20colorOut\\x20=\\x20color;\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x2b6b='\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20mediump\\x20float\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20lowp\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20mediump\\x20float\\x20fx\\x20=\\x20abs(pp);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fx\\x20>\\x200.2)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20=\\x20colorOut.a*(1.25\\x20-\\x201.25*fx);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x201cc4='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20position;\\x20\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20\\x20\\x20mat4\\x20\\x20\\x20matRotate;\\x20\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20position;\\x20//*\\x20matRotate;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20\\x20-position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x5d87e4='\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20*=\\x20fAlpha;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x33feef=0x20,_0x2ede4c=0x400,_0x39301c=0.05,_0x254b59=0.000001,_0x4d4446=3.1415926,_0x1405aa=0.02,_0x4a31eb=0x3e8,_0x3d12aa=0.78539815,_0x2c9909=0x28,_0x514d22=-0x1,_0x377d36=_0x4d4446/0x12,_0x7263cc=_0x4d4446/0x3,_0x2421ad=_0x4d4446/0x6,_0x5938fc=_0x4d4446/0x9,_0x51f2ac=0.000001,_0xdfffa4='undefined'!=typeof Float32Array?Float32Array:Array;Math['random'],Math['PI'],Math['hypot']||(Math['hypot']=function(){for(var _0x48cc99=0x0,_0x295bf1=arguments['length'];_0x295bf1--;)_0x48cc99+=arguments[_0x295bf1]*arguments[_0x295bf1];return Math['sqrt'](_0x48cc99);});function _0x2d7236(){var _0x40f8f2=new _0xdfffa4(0x10);return _0xdfffa4!=Float32Array&&(_0x40f8f2[0x1]=0x0,_0x40f8f2[0x2]=0x0,_0x40f8f2[0x3]=0x0,_0x40f8f2[0x4]=0x0,_0x40f8f2[0x6]=0x0,_0x40f8f2[0x7]=0x0,_0x40f8f2[0x8]=0x0,_0x40f8f2[0x9]=0x0,_0x40f8f2[0xb]=0x0,_0x40f8f2[0xc]=0x0,_0x40f8f2[0xd]=0x0,_0x40f8f2[0xe]=0x0),_0x40f8f2[0x0]=0x1,_0x40f8f2[0x5]=0x1,_0x40f8f2[0xa]=0x1,_0x40f8f2[0xf]=0x1,_0x40f8f2;}function _0x226a44(_0x45e62c,_0x2883ed,_0x34aa52){var _0x18278a=_0x2883ed[0x0],_0x12ac47=_0x2883ed[0x1],_0x171929=_0x2883ed[0x2],_0x26b1e=_0x2883ed[0x3],_0x1a216a=_0x2883ed[0x4],_0x47a739=_0x2883ed[0x5],_0x2d1d9f=_0x2883ed[0x6],_0x11d211=_0x2883ed[0x7],_0x56dce3=_0x2883ed[0x8],_0xf585b6=_0x2883ed[0x9],_0x3b6b5f=_0x2883ed[0xa],_0x1708a6=_0x2883ed[0xb],_0x19c04f=_0x2883ed[0xc],_0x4f1fde=_0x2883ed[0xd],_0x4b9f37=_0x2883ed[0xe],_0x2b6158=_0x2883ed[0xf],_0x306874=_0x34aa52[0x0],_0x350468=_0x34aa52[0x1],_0x1800b1=_0x34aa52[0x2],_0x3664b1=_0x34aa52[0x3];return _0x45e62c[0x0]=_0x306874*_0x18278a+_0x350468*_0x1a216a+_0x1800b1*_0x56dce3+_0x3664b1*_0x19c04f,_0x45e62c[0x1]=_0x306874*_0x12ac47+_0x350468*_0x47a739+_0x1800b1*_0xf585b6+_0x3664b1*_0x4f1fde,_0x45e62c[0x2]=_0x306874*_0x171929+_0x350468*_0x2d1d9f+_0x1800b1*_0x3b6b5f+_0x3664b1*_0x4b9f37,_0x45e62c[0x3]=_0x306874*_0x26b1e+_0x350468*_0x11d211+_0x1800b1*_0x1708a6+_0x3664b1*_0x2b6158,_0x306874=_0x34aa52[0x4],_0x350468=_0x34aa52[0x5],_0x1800b1=_0x34aa52[0x6],_0x3664b1=_0x34aa52[0x7],_0x45e62c[0x4]=_0x306874*_0x18278a+_0x350468*_0x1a216a+_0x1800b1*_0x56dce3+_0x3664b1*_0x19c04f,_0x45e62c[0x5]=_0x306874*_0x12ac47+_0x350468*_0x47a739+_0x1800b1*_0xf585b6+_0x3664b1*_0x4f1fde,_0x45e62c[0x6]=_0x306874*_0x171929+_0x350468*_0x2d1d9f+_0x1800b1*_0x3b6b5f+_0x3664b1*_0x4b9f37,_0x45e62c[0x7]=_0x306874*_0x26b1e+_0x350468*_0x11d211+_0x1800b1*_0x1708a6+_0x3664b1*_0x2b6158,_0x306874=_0x34aa52[0x8],_0x350468=_0x34aa52[0x9],_0x1800b1=_0x34aa52[0xa],_0x3664b1=_0x34aa52[0xb],_0x45e62c[0x8]=_0x306874*_0x18278a+_0x350468*_0x1a216a+_0x1800b1*_0x56dce3+_0x3664b1*_0x19c04f,_0x45e62c[0x9]=_0x306874*_0x12ac47+_0x350468*_0x47a739+_0x1800b1*_0xf585b6+_0x3664b1*_0x4f1fde,_0x45e62c[0xa]=_0x306874*_0x171929+_0x350468*_0x2d1d9f+_0x1800b1*_0x3b6b5f+_0x3664b1*_0x4b9f37,_0x45e62c[0xb]=_0x306874*_0x26b1e+_0x350468*_0x11d211+_0x1800b1*_0x1708a6+_0x3664b1*_0x2b6158,_0x306874=_0x34aa52[0xc],_0x350468=_0x34aa52[0xd],_0x1800b1=_0x34aa52[0xe],_0x3664b1=_0x34aa52[0xf],_0x45e62c[0xc]=_0x306874*_0x18278a+_0x350468*_0x1a216a+_0x1800b1*_0x56dce3+_0x3664b1*_0x19c04f,_0x45e62c[0xd]=_0x306874*_0x12ac47+_0x350468*_0x47a739+_0x1800b1*_0xf585b6+_0x3664b1*_0x4f1fde,_0x45e62c[0xe]=_0x306874*_0x171929+_0x350468*_0x2d1d9f+_0x1800b1*_0x3b6b5f+_0x3664b1*_0x4b9f37,_0x45e62c[0xf]=_0x306874*_0x26b1e+_0x350468*_0x11d211+_0x1800b1*_0x1708a6+_0x3664b1*_0x2b6158,_0x45e62c;}function _0xa4762a(_0xa483b5,_0xf631e8,_0x3fd89b,_0x3d549b){var _0x564410,_0x36ffba,_0x5b04bf,_0x2899c6,_0xe5efda,_0x34327b,_0x4812e9,_0x4650f0,_0x3063e0,_0xad0f15,_0x45b73e,_0x49fdf9,_0x3f215b,_0x4132d1,_0x38f42f,_0x5e318a,_0x34863d,_0x1a7d93,_0x1bb01a,_0x58dcb0,_0x51cb5e,_0x12859a,_0x400412,_0x46dd5d,_0x49f80f=_0x3d549b[0x0],_0x7b5459=_0x3d549b[0x1],_0xfc11e0=_0x3d549b[0x2],_0x9a0550=Math['hypot'](_0x49f80f,_0x7b5459,_0xfc11e0);return _0x9a0550<_0x51f2ac?null:(_0x49f80f*=_0x9a0550=0x1/_0x9a0550,_0x7b5459*=_0x9a0550,_0xfc11e0*=_0x9a0550,_0x564410=Math['sin'](_0x3fd89b),_0x5b04bf=0x1-(_0x36ffba=Math['cos'](_0x3fd89b)),_0x2899c6=_0xf631e8[0x0],_0xe5efda=_0xf631e8[0x1],_0x34327b=_0xf631e8[0x2],_0x4812e9=_0xf631e8[0x3],_0x4650f0=_0xf631e8[0x4],_0x3063e0=_0xf631e8[0x5],_0xad0f15=_0xf631e8[0x6],_0x45b73e=_0xf631e8[0x7],_0x49fdf9=_0xf631e8[0x8],_0x3f215b=_0xf631e8[0x9],_0x4132d1=_0xf631e8[0xa],_0x38f42f=_0xf631e8[0xb],_0x5e318a=_0x49f80f*_0x49f80f*_0x5b04bf+_0x36ffba,_0x34863d=_0x7b5459*_0x49f80f*_0x5b04bf+_0xfc11e0*_0x564410,_0x1a7d93=_0xfc11e0*_0x49f80f*_0x5b04bf-_0x7b5459*_0x564410,_0x1bb01a=_0x49f80f*_0x7b5459*_0x5b04bf-_0xfc11e0*_0x564410,_0x58dcb0=_0x7b5459*_0x7b5459*_0x5b04bf+_0x36ffba,_0x51cb5e=_0xfc11e0*_0x7b5459*_0x5b04bf+_0x49f80f*_0x564410,_0x12859a=_0x49f80f*_0xfc11e0*_0x5b04bf+_0x7b5459*_0x564410,_0x400412=_0x7b5459*_0xfc11e0*_0x5b04bf-_0x49f80f*_0x564410,_0x46dd5d=_0xfc11e0*_0xfc11e0*_0x5b04bf+_0x36ffba,_0xa483b5[0x0]=_0x2899c6*_0x5e318a+_0x4650f0*_0x34863d+_0x49fdf9*_0x1a7d93,_0xa483b5[0x1]=_0xe5efda*_0x5e318a+_0x3063e0*_0x34863d+_0x3f215b*_0x1a7d93,_0xa483b5[0x2]=_0x34327b*_0x5e318a+_0xad0f15*_0x34863d+_0x4132d1*_0x1a7d93,_0xa483b5[0x3]=_0x4812e9*_0x5e318a+_0x45b73e*_0x34863d+_0x38f42f*_0x1a7d93,_0xa483b5[0x4]=_0x2899c6*_0x1bb01a+_0x4650f0*_0x58dcb0+_0x49fdf9*_0x51cb5e,_0xa483b5[0x5]=_0xe5efda*_0x1bb01a+_0x3063e0*_0x58dcb0+_0x3f215b*_0x51cb5e,_0xa483b5[0x6]=_0x34327b*_0x1bb01a+_0xad0f15*_0x58dcb0+_0x4132d1*_0x51cb5e,_0xa483b5[0x7]=_0x4812e9*_0x1bb01a+_0x45b73e*_0x58dcb0+_0x38f42f*_0x51cb5e,_0xa483b5[0x8]=_0x2899c6*_0x12859a+_0x4650f0*_0x400412+_0x49fdf9*_0x46dd5d,_0xa483b5[0x9]=_0xe5efda*_0x12859a+_0x3063e0*_0x400412+_0x3f215b*_0x46dd5d,_0xa483b5[0xa]=_0x34327b*_0x12859a+_0xad0f15*_0x400412+_0x4132d1*_0x46dd5d,_0xa483b5[0xb]=_0x4812e9*_0x12859a+_0x45b73e*_0x400412+_0x38f42f*_0x46dd5d,_0xf631e8!==_0xa483b5&&(_0xa483b5[0xc]=_0xf631e8[0xc],_0xa483b5[0xd]=_0xf631e8[0xd],_0xa483b5[0xe]=_0xf631e8[0xe],_0xa483b5[0xf]=_0xf631e8[0xf]),_0xa483b5);}var _0x26fe67=function(_0x427ddf,_0x2b577c,_0x41785b,_0x4b34d4,_0x2d0a99){var _0x460571=0x1/Math['tan'](_0x2b577c/0x2);if(_0x427ddf[0x0]=_0x460571/_0x41785b,_0x427ddf[0x1]=0x0,_0x427ddf[0x2]=0x0,_0x427ddf[0x3]=0x0,_0x427ddf[0x4]=0x0,_0x427ddf[0x5]=_0x460571,_0x427ddf[0x6]=0x0,_0x427ddf[0x7]=0x0,_0x427ddf[0x8]=0x0,_0x427ddf[0x9]=0x0,_0x427ddf[0xb]=-0x1,_0x427ddf[0xc]=0x0,_0x427ddf[0xd]=0x0,_0x427ddf[0xf]=0x0,null!=_0x2d0a99&&_0x2d0a99!==0x1/0x0){var _0x11d8c9=0x1/(_0x4b34d4-_0x2d0a99);_0x427ddf[0xa]=(_0x2d0a99+_0x4b34d4)*_0x11d8c9,_0x427ddf[0xe]=0x2*_0x2d0a99*_0x4b34d4*_0x11d8c9;}else _0x427ddf[0xa]=-0x1,_0x427ddf[0xe]=-0x2*_0x4b34d4;return _0x427ddf;},_0x1eb65b=function(_0x5bb32a,_0x34662d,_0x303393,_0xf92bb7,_0x5968d0,_0x9b3603,_0x21d911){var _0x50d878=0x1/(_0x34662d-_0x303393),_0x1d4090=0x1/(_0xf92bb7-_0x5968d0),_0x51ce19=0x1/(_0x9b3603-_0x21d911);return _0x5bb32a[0x0]=-0x2*_0x50d878,_0x5bb32a[0x1]=0x0,_0x5bb32a[0x2]=0x0,_0x5bb32a[0x3]=0x0,_0x5bb32a[0x4]=0x0,_0x5bb32a[0x5]=-0x2*_0x1d4090,_0x5bb32a[0x6]=0x0,_0x5bb32a[0x7]=0x0,_0x5bb32a[0x8]=0x0,_0x5bb32a[0x9]=0x0,_0x5bb32a[0xa]=0x2*_0x51ce19,_0x5bb32a[0xb]=0x0,_0x5bb32a[0xc]=(_0x34662d+_0x303393)*_0x50d878,_0x5bb32a[0xd]=(_0x5968d0+_0xf92bb7)*_0x1d4090,_0x5bb32a[0xe]=(_0x21d911+_0x9b3603)*_0x51ce19,_0x5bb32a[0xf]=0x1,_0x5bb32a;};function _0x1043c0(){var _0x2a5565=new _0xdfffa4(0x3);return _0xdfffa4!=Float32Array&&(_0x2a5565[0x0]=0x0,_0x2a5565[0x1]=0x0,_0x2a5565[0x2]=0x0),_0x2a5565;}function _0xfeae46(_0x56db96,_0x47f6ef,_0xed1545){var _0x133160=new _0xdfffa4(0x3);return _0x133160[0x0]=_0x56db96,_0x133160[0x1]=_0x47f6ef,_0x133160[0x2]=_0xed1545,_0x133160;}function _0x117650(_0x58963e,_0xffc0b1){return _0x58963e[0x0]*_0xffc0b1[0x0]+_0x58963e[0x1]*_0xffc0b1[0x1]+_0x58963e[0x2]*_0xffc0b1[0x2];}function _0x5c3010(_0x1df367,_0x48fc0a,_0x40882c){var _0x52422f=_0x48fc0a[0x0],_0x18a9e2=_0x48fc0a[0x1],_0xd6f563=_0x48fc0a[0x2],_0x1d525b=_0x40882c[0x0],_0x5cc3c6=_0x40882c[0x1],_0x9490c5=_0x40882c[0x2];return _0x1df367[0x0]=_0x18a9e2*_0x9490c5-_0xd6f563*_0x5cc3c6,_0x1df367[0x1]=_0xd6f563*_0x1d525b-_0x52422f*_0x9490c5,_0x1df367[0x2]=_0x52422f*_0x5cc3c6-_0x18a9e2*_0x1d525b,_0x1df367;}var _0x140098,_0x42d692=function(_0x16237c){var _0xf05046=_0x16237c[0x0],_0x4fca6f=_0x16237c[0x1],_0x1e8b66=_0x16237c[0x2];return Math['hypot'](_0xf05046,_0x4fca6f,_0x1e8b66);};_0x140098=_0x1043c0(),!(function(){var _0x220e7e,_0x1e1ad9=(_0x220e7e=new _0xdfffa4(0x4),_0xdfffa4!=Float32Array&&(_0x220e7e[0x0]=0x0,_0x220e7e[0x1]=0x0,_0x220e7e[0x2]=0x0,_0x220e7e[0x3]=0x0),_0x220e7e);}());function _0x26615c(){var _0x3ba273=new _0xdfffa4(0x4);return _0xdfffa4!=Float32Array&&(_0x3ba273[0x0]=0x0,_0x3ba273[0x1]=0x0,_0x3ba273[0x2]=0x0),_0x3ba273[0x3]=0x1,_0x3ba273;}function _0x31aee3(_0x223035,_0x2ab1e1,_0x332403,_0x511972){var _0xc9207f,_0x3ded29,_0x383652,_0x35ce9b,_0x28bfc4,_0x20b6c4=_0x2ab1e1[0x0],_0x5b6589=_0x2ab1e1[0x1],_0x4f0e23=_0x2ab1e1[0x2],_0x351223=_0x2ab1e1[0x3],_0x19193c=_0x332403[0x0],_0x1d8f46=_0x332403[0x1],_0x21324d=_0x332403[0x2],_0x376172=_0x332403[0x3];return(_0x3ded29=_0x20b6c4*_0x19193c+_0x5b6589*_0x1d8f46+_0x4f0e23*_0x21324d+_0x351223*_0x376172)<0x0&&(_0x3ded29=-_0x3ded29,_0x19193c=-_0x19193c,_0x1d8f46=-_0x1d8f46,_0x21324d=-_0x21324d,_0x376172=-_0x376172),0x1-_0x3ded29>_0x51f2ac?(_0xc9207f=Math['acos'](_0x3ded29),_0x383652=Math['sin'](_0xc9207f),_0x35ce9b=Math['sin']((0x1-_0x511972)*_0xc9207f)/_0x383652,_0x28bfc4=Math['sin'](_0x511972*_0xc9207f)/_0x383652):(_0x35ce9b=0x1-_0x511972,_0x28bfc4=_0x511972),_0x223035[0x0]=_0x35ce9b*_0x20b6c4+_0x28bfc4*_0x19193c,_0x223035[0x1]=_0x35ce9b*_0x5b6589+_0x28bfc4*_0x1d8f46,_0x223035[0x2]=_0x35ce9b*_0x4f0e23+_0x28bfc4*_0x21324d,_0x223035[0x3]=_0x35ce9b*_0x351223+_0x28bfc4*_0x376172,_0x223035;}var _0x5b29b3=function(_0x46eb10,_0xdfa43f){var _0x5dc0e6=_0xdfa43f[0x0],_0x15cd47=_0xdfa43f[0x1],_0x35b550=_0xdfa43f[0x2],_0x197974=_0xdfa43f[0x3],_0x10e880=_0x5dc0e6*_0x5dc0e6+_0x15cd47*_0x15cd47+_0x35b550*_0x35b550+_0x197974*_0x197974;return _0x10e880>0x0&&(_0x10e880=0x1/Math['sqrt'](_0x10e880)),_0x46eb10[0x0]=_0x5dc0e6*_0x10e880,_0x46eb10[0x1]=_0x15cd47*_0x10e880,_0x46eb10[0x2]=_0x35b550*_0x10e880,_0x46eb10[0x3]=_0x197974*_0x10e880,_0x46eb10;},_0xc3cb6f,_0x370867,_0x4d0635,_0x2051d8,_0x564332,_0x1c1dc5,_0x144493;_0xc3cb6f=_0x1043c0(),_0x370867=_0xfeae46(0x1,0x0,0x0),_0x4d0635=_0xfeae46(0x0,0x1,0x0),_0x2051d8=_0x26615c(),_0x564332=_0x26615c(),_0x1c1dc5=new _0xdfffa4(0x9),_0xdfffa4!=Float32Array&&(_0x1c1dc5[0x1]=0x0,_0x1c1dc5[0x2]=0x0,_0x1c1dc5[0x3]=0x0,_0x1c1dc5[0x5]=0x0,_0x1c1dc5[0x6]=0x0,_0x1c1dc5[0x7]=0x0),_0x1c1dc5[0x0]=0x1,_0x1c1dc5[0x4]=0x1,_0x1c1dc5[0x8]=0x1,_0x144493=_0x1c1dc5,!(function(){var _0x13d014=(function(){var _0x9d7c4=new _0xdfffa4(0x2);return _0xdfffa4!=Float32Array&&(_0x9d7c4[0x0]=0x0,_0x9d7c4[0x1]=0x0),_0x9d7c4;}());}());var _0x1edb9a,_0x260fee=(function(){function _0x3ea75d(){_0x4fb29f(this,_0x3ea75d),this['fFov']=0.785,this['fAspect']=0x1,this['fNear']=0.02,this['fFar']=0x3e8,this['fTheta']=0x0,this['fAlpha']=0x0,this['fBeta']=0x0,this['fScale']=0x1,this['bOrtho']=!0x1,this['matView']=_0x2d7236(),this['matProj']=_0x2d7236(),this['vecEye']=_0xfeae46(0x0,0x0,0x0),this['vecCenter']=_0xfeae46(0x0,0x0,0x64),this['vecUp']=_0xfeae46(0x0,0x1,0x0);}return _0x1706bb(_0x3ea75d,[{'key':'SetYaw','value':function(_0x4d5165){this['fTheta']=_0x4d5165;}},{'key':'GetYaw','value':function(){return this['fTheta'];}},{'key':'SetPitch','value':function(_0x2376ff){this['fAlpha']=_0x2376ff;}},{'key':'GetPitch','value':function(){return this['fAlpha'];}},{'key':'SetRoll','value':function(_0x2b8d2e){this['fBeta']=_0x2b8d2e;}},{'key':'GetRoll','value':function(){return this['fBeta'];}},{'key':'SetScale','value':function(_0x21554c){this['fScale']=_0x21554c;}},{'key':'GetScale','value':function(){return this['fScale'];}},{'key':'SetFov','value':function(_0x339696){this['fFov']=_0x339696;}},{'key':'SetAspect','value':function(_0x4327cc){this['fAspect']=_0x4327cc;}},{'key':'SetNear','value':function(_0x3844e9){this['fNear']=_0x3844e9;}},{'key':'SetFar','value':function(_0x2ce30a){this['fFar']=_0x2ce30a;}},{'key':'SetOrtho','value':function(_0x45e2ab){this['bOrtho']=_0x45e2ab;}},{'key':'UpdateCamera','value':function(_0x4d24ed,_0x4fd05d){if(!(_0x4d24ed<=0x0||_0x4fd05d<=0x0)){if(0x1==this['bOrtho'])_0x1eb65b(this['matProj'],0x0,_0x4d24ed,_0x4fd05d,0x0,this['fNear'],this['fFar']);else{var _0x3ab6ee=this['fFov']/_0x4d4446*0xb4;_0x26fe67(this['matProj'],_0x3ab6ee,_0x4d24ed/_0x4fd05d,this['fNear'],this['fFar']);}this['vecEye']=_0xfeae46(0x0,0x0,this['fScale']),this['vecCenter']=_0xfeae46(0x0,0x0,0x0),this['vecUp']=_0xfeae46(0x0,0x1,0x0);var _0x49b4d3=_0xfeae46(0x1,0x0,0x0),_0x2296ca=_0xfeae46(0x0,0x1,0x0),_0x5c45fe=_0xfeae46(0x0,0x0,0x1),_0x5e6346=_0x2d7236();!function(_0x2173eb,_0x3757a3,_0x225323,_0x159b41){var _0x2dfdb2,_0x1e25c0,_0x2f8f48,_0x4bfb71,_0x117f72,_0x21048d,_0x9efae7,_0x2196bc,_0x4d1806,_0x22df30,_0x28ae7c=_0x3757a3[0x0],_0x3bed9f=_0x3757a3[0x1],_0x16aa3a=_0x3757a3[0x2],_0x340f5e=_0x159b41[0x0],_0x3b6439=_0x159b41[0x1],_0x441945=_0x159b41[0x2],_0x301059=_0x225323[0x0],_0x4bfe52=_0x225323[0x1],_0x47f287=_0x225323[0x2];Math['abs'](_0x28ae7c-_0x301059)<_0x51f2ac&&Math['abs'](_0x3bed9f-_0x4bfe52)<_0x51f2ac&&Math['abs'](_0x16aa3a-_0x47f287)<_0x51f2ac?function(_0x75d8f5){_0x75d8f5[0x0]=0x1,_0x75d8f5[0x1]=0x0,_0x75d8f5[0x2]=0x0,_0x75d8f5[0x3]=0x0,_0x75d8f5[0x4]=0x0,_0x75d8f5[0x5]=0x1,_0x75d8f5[0x6]=0x0,_0x75d8f5[0x7]=0x0,_0x75d8f5[0x8]=0x0,_0x75d8f5[0x9]=0x0,_0x75d8f5[0xa]=0x1,_0x75d8f5[0xb]=0x0,_0x75d8f5[0xc]=0x0,_0x75d8f5[0xd]=0x0,_0x75d8f5[0xe]=0x0,_0x75d8f5[0xf]=0x1;}(_0x2173eb):(_0x9efae7=_0x28ae7c-_0x301059,_0x2196bc=_0x3bed9f-_0x4bfe52,_0x4d1806=_0x16aa3a-_0x47f287,_0x2dfdb2=_0x3b6439*(_0x4d1806*=_0x22df30=0x1/Math['hypot'](_0x9efae7,_0x2196bc,_0x4d1806))-_0x441945*(_0x2196bc*=_0x22df30),_0x1e25c0=_0x441945*(_0x9efae7*=_0x22df30)-_0x340f5e*_0x4d1806,_0x2f8f48=_0x340f5e*_0x2196bc-_0x3b6439*_0x9efae7,(_0x22df30=Math['hypot'](_0x2dfdb2,_0x1e25c0,_0x2f8f48))?(_0x2dfdb2*=_0x22df30=0x1/_0x22df30,_0x1e25c0*=_0x22df30,_0x2f8f48*=_0x22df30):(_0x2dfdb2=0x0,_0x1e25c0=0x0,_0x2f8f48=0x0),_0x4bfb71=_0x2196bc*_0x2f8f48-_0x4d1806*_0x1e25c0,_0x117f72=_0x4d1806*_0x2dfdb2-_0x9efae7*_0x2f8f48,_0x21048d=_0x9efae7*_0x1e25c0-_0x2196bc*_0x2dfdb2,(_0x22df30=Math['hypot'](_0x4bfb71,_0x117f72,_0x21048d))?(_0x4bfb71*=_0x22df30=0x1/_0x22df30,_0x117f72*=_0x22df30,_0x21048d*=_0x22df30):(_0x4bfb71=0x0,_0x117f72=0x0,_0x21048d=0x0),_0x2173eb[0x0]=_0x2dfdb2,_0x2173eb[0x1]=_0x4bfb71,_0x2173eb[0x2]=_0x9efae7,_0x2173eb[0x3]=0x0,_0x2173eb[0x4]=_0x1e25c0,_0x2173eb[0x5]=_0x117f72,_0x2173eb[0x6]=_0x2196bc,_0x2173eb[0x7]=0x0,_0x2173eb[0x8]=_0x2f8f48,_0x2173eb[0x9]=_0x21048d,_0x2173eb[0xa]=_0x4d1806,_0x2173eb[0xb]=0x0,_0x2173eb[0xc]=-(_0x2dfdb2*_0x28ae7c+_0x1e25c0*_0x3bed9f+_0x2f8f48*_0x16aa3a),_0x2173eb[0xd]=-(_0x4bfb71*_0x28ae7c+_0x117f72*_0x3bed9f+_0x21048d*_0x16aa3a),_0x2173eb[0xe]=-(_0x9efae7*_0x28ae7c+_0x2196bc*_0x3bed9f+_0x4d1806*_0x16aa3a),_0x2173eb[0xf]=0x1);}(_0x5e6346,this['vecEye'],this['vecCenter'],this['vecUp']);var _0xb0fd36=_0x2d7236(),_0x314b0d=_0x2d7236(),_0x222d00=_0x2d7236(),_0x545ace=_0x2d7236();_0xa4762a(_0x314b0d,_0xb0fd36,-this['fAlpha'],_0x49b4d3),_0xa4762a(_0x222d00,_0x314b0d,-this['fTheta'],_0x2296ca),_0xa4762a(_0x545ace,_0x222d00,-this['fBeta'],_0x5c45fe),_0x226a44(this['matView'],_0x5e6346,_0x545ace);}}},{'key':'GetView','value':function(){return this['matView'];}},{'key':'GetProj','value':function(){return this['matProj'];}}]),_0x3ea75d;}()),_0x4fb568=(function(){function _0x271598(){_0x4fb29f(this,_0x271598),this['canvas']=null,this['ctx']=null,this['videoShaderProgram']=0x0,this['vertexPosBuffer']=0x0,this['texturePosBuffer']=0x0,this['pFrameData']=null,this['frameDisplayWidth']=0x0,this['frameDisplayHeight']=0x0,this['onlySupportedWebGL1']=!0x1,this['bAntialias']=!0x1,this['bRecreateTex']=!0x0,this['nSurfaceTexture']=[],this['nMaxPointNum']=0x0,this['pLinePosVertices']=null,this['pLineClrVertices']=null,this['glLinePosBuffer']=0x0,this['glLineClrBuffer']=0x0,this['nLineTriangleNum']=0x0,this['nLineShaderProgram']=0x0,this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=0x0,this['glBlockPosBuffer']=0x0,this['glBlockClrBuffer']=0x0,this['nBlockShaderProgram']=0x0,this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,this['nFontColorTexture']=0x0,this['pFontColorBuffer']=0x0,this['nFontShaderProgram']=0x0,this['nFontBGNum']=0x0,this['pstFontBGLines']=[],this['nImageShaderProgram']=0x0,this['pImagePosVertices']=null,this['pImageClrVertices']=null,this['glImagePosBuffer']=0x0,this['glImageClrBuffer']=0x0,this['nImageColorTexture']=null,this['nDrawImageWidth']=0x0,this['nDrawImageHeight']=0x0,this['nImageColorTextures']=[],this['pFishParamManager']=null,this['enDisplayEffect']=_0x24b5aa['SR_DE_NULL'],this['nFECPort']=_0x514d22,this['bIsCapturing']=!0x1,this['pSemiSpherePos']=null,this['pSemiSphereTex']=null,this['nSemiSpherePosNum']=0x0,this['nSemiSpherePosSize']=0x0,this['nSemiSphereTexSize']=0x0,this['pCylinderPos']=null,this['pCylinderTex']=null,this['nCylinderPosNum']=0x0,this['nCylinderPosSize']=0x0,this['nCylinderTexSize']=0x0,this['fCylinderHeight']=0x0,this['fCylinderRadius']=0x0,this['pArcSpherePos']=null,this['pArcSphereTex']=null,this['nArcSpherePosNum']=0x0,this['nArcSpherePosSize']=0x0,this['nArcSphereTexSize']=0x0,this['fImageWidth']=0x1,this['fImageHeight']=0x1,this['fTexCenterX']=0.5,this['fTexCenterY']=0.5,this['fTexRadius']=0.5,this['b3DPort']=!0x1,this['pCamera']=null,this['fRotateX']=0x0,this['fRotateY']=0x0,this['fScale']=0x0,this['fRotateLimitX']=0x0,this['fRotateLimitY']=0x0,this['pfuncCBIn']=null,this['pfuncCBOut']=null,this['pUserIn']=null,this['pUserOut']=null,this['bCullBack']=!0x1,this['fSrcUseLeft']=0x0,this['fSrcUseRight']=0x1,this['fSrcUseTop']=0x0,this['fSrcUseBottom']=0x1,this['fDstUseLeft']=0x0,this['fDstUseRight']=0x1,this['fDstUseTop']=0x0,this['fDstUseBottom']=0x1,this['enPixelFormat']=_0x26fdc6,this['nTextureNum']=0x0,this['textCanvas']=null,this['textCanvasCtx']=null,this['nCaptureWidth']=0x0,this['nCaptureHeight']=0x0,this['nCaptureRTTex']=0x0,this['nCaptureFBO']=0x0,this['nCaptureFBOWidth']=0x0,this['nCaptureFBOHeight']=0x0,this['nCaptureDepthbuffer']=0x0,this['bCaptureResInit']=!0x1,this['fBrightness']=0x0,this['fHue']=0x0,this['fSaturation']=0x0,this['fContrast']=0x0,this['fSharpness']=0x0,this['nPostProc']=0x0;}return _0x1706bb(_0x271598,[{'key':'CompileProgram','value':function(_0x1b180a,_0x3bcc85){var _0x1694e6=this['ctx'];if(null==_0x1694e6||null==_0x1b180a||null==_0x3bcc85)return-0x1;var _0x4a693f=_0x1694e6['createShader'](_0x1694e6['VERTEX_SHADER']);if(_0x1694e6['shaderSource'](_0x4a693f,_0x1b180a),_0x1694e6['compileShader'](_0x4a693f),!_0x1694e6['getShaderParameter'](_0x4a693f,_0x1694e6['COMPILE_STATUS']))return console['log']('Vertex\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x1694e6['getShaderInfoLog'](_0x4a693f)),-0x1;var _0xeeede9=_0x1694e6['createShader'](_0x1694e6['FRAGMENT_SHADER']);if(_0x1694e6['shaderSource'](_0xeeede9,_0x3bcc85),_0x1694e6['compileShader'](_0xeeede9),!_0x1694e6['getShaderParameter'](_0xeeede9,_0x1694e6['COMPILE_STATUS']))return console['log']('Fragment\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x1694e6['getShaderInfoLog'](_0xeeede9)),-0x1;var _0x447d5a=_0x1694e6['createProgram']();return _0x1694e6['attachShader'](_0x447d5a,_0x4a693f),_0x1694e6['attachShader'](_0x447d5a,_0xeeede9),_0x1694e6['linkProgram'](_0x447d5a),_0x1694e6['getProgramParameter'](_0x447d5a,_0x1694e6['LINK_STATUS'])?(_0x1694e6['deleteShader'](_0x4a693f),_0x1694e6['deleteShader'](_0xeeede9),_0x447d5a):(console['log']('Program\\x20failed\\x20to\\x20compile:\\x20'+_0x1694e6['getProgramInfoLog'](_0x447d5a)),-0x1);}},{'key':'SR_Init','value':function(_0x5a06a2,_0x328c9a){if(null==_0x5a06a2)return _0x4a3918;if(this['canvas']=_0x5a06a2,this['ctx']=this['canvas']['getContext']('webgl2'),this['ctx']||(this['ctx']=this['canvas']['getContext']('webgl')||this['canvas']['getContext']('experimental-webgl'),this['onlySupportedWebGL1']=!0x0,console['log']('only\\x20support\\x20webgl1')),!this['ctx'])return console['log']('your\\x20browser\\x20does\\x20not\\x20support\\x20WebGL'),_0x4f7f9a;if(_0x328c9a==_0x395519||_0x328c9a==_0x5a0c52)return _0x2a6293;switch(_0x328c9a){case _0x41de94:case _0x428c76:this['nTextureNum']=0x3;break;case _0x395519:case _0x5a0c52:this['nTextureNum']=0x2;break;case _0x1aec18:this['nTextureNum']=0x1;break;default:return _0x2a6293;}return this['enPixelFormat']=_0x328c9a,_0x1b3061;}},{'key':'SR_Draw','value':function(_0x3832d7,_0x57389a,_0xe0a964,_0x3a0c5d,_0x1036f0){if(null==this['ctx'])return _0x1f1f19;var _0x20e4b9=this['nTextureNum'];if(null==_0x3832d7||_0x57389a<=0x0||_0xe0a964<=0x0)return _0x4a3918;if(0x0==this['videoShaderProgram']||0x0==this['vertexPosBuffer']||0x0==this['texturePosBuffer'])return _0x1f1f19;var _0x5231f4=_0x1b3061;if(_0x1aec18==this['enPixelFormat'])this['frameDisplayWidth']=_0x57389a,this['frameDisplayHeight']=_0xe0a964;else{if(_0x5231f4=this['_ResizeFrameData'](_0x3832d7,_0x57389a,_0xe0a964,_0x3a0c5d),_0x1b3061!=_0x5231f4)return _0x5231f4;}if(this['ctx']['useProgram'](this['videoShaderProgram']),0x1==this['bRecreateTex']){if(this['enPixelFormat']==_0x1aec18){if(0x0!=this['nSurfaceTexture'][0x0]){var _0xfa0b72=this['nSurfaceTexture'][0x0];this['ctx']['deleteTexture'](_0xfa0b72),this['nSurfaceTexture'][0x0]=0x0;}var _0x93f822=this['ctx']['createTexture']();if(_0x93f822<=0x0)return _0x2bc1a4;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],_0x93f822),0x1==this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['nSurfaceTexture'][0x0]=_0x93f822;}else{if(this['enPixelFormat']==_0x41de94||this['enPixelFormat']==_0x428c76)for(var _0xca3e66=0x0;_0xca3e66<_0x20e4b9;_0xca3e66++){if(0x0!=this['nSurfaceTexture'][_0xca3e66]){var _0x1bdc00=this['nSurfaceTexture'][_0xca3e66];this['ctx']['deleteTexture'](_0x1bdc00),this['nSurfaceTexture'][_0xca3e66]=0x0;}var _0x408d72=this['ctx']['createTexture']();if(_0x408d72<=0x0)return _0x2bc1a4;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],_0x408d72),0x1==this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),0x0==_0xca3e66){var _0x4ed047=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Ytexture');this['ctx']['uniform1i'](_0x4ed047,0x0);}else{if(0x1==_0xca3e66){var _0x3ec95c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Utexture');this['ctx']['uniform1i'](_0x3ec95c,0x1);}else{if(0x2==_0xca3e66){var _0x30cbce=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Vtexture');this['ctx']['uniform1i'](_0x30cbce,0x2);}}}this['nSurfaceTexture'][_0xca3e66]=_0x408d72,this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],null);}}this['bRecreateTex']=!0x1;}this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x24d7f4=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x24d7f4<0x0)return _0x2bc1a4;this['ctx']['vertexAttribPointer'](_0x24d7f4,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x24d7f4),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x4aaa92=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x4aaa92<0x0)return _0x2bc1a4;this['ctx']['vertexAttribPointer'](_0x4aaa92,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x4aaa92),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null);var _0x172dcd=this['enDisplayEffect'],_0x4d1606=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCapture');if(_0x4d1606<=0x0)return _0x2bc1a4;this['ctx']['uniform1i'](_0x4d1606,0x0);var _0x54e27d=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'nPostProc');switch(this['ctx']['uniform1i'](_0x54e27d,this['nPostProc']),0x1==this['nPostProc']&&(_0x5231f4=this['_SetImagePostProcess']()),_0x172dcd){case _0x24b5aa['SR_DE_NULL']:break;case _0x24b5aa['SR_DE_FISH_ORIGINAL']:case _0x24b5aa['SR_DE_FISH_PTZ_CEILING']:case _0x24b5aa['SR_DE_FISH_PTZ_FLOOR']:case _0x24b5aa['SR_DE_FISH_PTZ_WALL']:case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:if(null==this['pFishParamManager'])return _0x1f1f19;var _0x381430={};if(_0x5231f4=this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0x381430),_0x1b3061!=_0x5231f4)return _0x5231f4;if(_0x24b5aa['SR_DE_FISH_ORIGINAL']==_0x172dcd){var _0x362c21=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bBlack');if(_0x362c21<=0x0)return _0x2bc1a4;this['ctx']['uniform1i'](_0x362c21,_0x381430['bBlack']);var _0x94bb4=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCut');if(_0x94bb4<=0x0)return _0x2bc1a4;this['ctx']['uniform1i'](_0x94bb4,_0x381430['bCut']);}if(_0x24b5aa['SR_DE_FISH_PTZ_CEILING']==_0x172dcd||_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']==_0x172dcd||_0x24b5aa['SR_DE_FISH_PTZ_WALL']==_0x172dcd){var _0x2d5294=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleCos');if(_0x2d5294<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x2d5294,_0x381430['fCosH']);var _0x23299b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleSin');if(_0x23299b<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x23299b,_0x381430['fSinH']);var _0x153862=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleCos');if(_0x153862<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x153862,_0x381430['fCosV']);var _0x3cc92c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleSin');if(_0x3cc92c<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x3cc92c,_0x381430['fSinV']);var _0xcb13de=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fZoom');if(_0xcb13de<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0xcb13de,_0x381430['fZoom']);}if(_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']==_0x172dcd||_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']==_0x172dcd||_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x172dcd||_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x172dcd){var _0x29ea2b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAngle');if(_0x29ea2b<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x29ea2b,_0x381430['fAngle']);}var _0x49b545=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0x49b545<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x49b545,_0x381430['fRXLeft']);var _0x3d7e9d=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0x3d7e9d<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x3d7e9d,_0x381430['fRXRight']);var _0x2dc3da=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x2dc3da<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x2dc3da,_0x381430['fRYTop']);var _0x2adfed=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x2adfed<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x2adfed,_0x381430['fRYBottom']);break;case _0x24b5aa['SR_DE_FISH_SEMISPHERE']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x3e15d5=this['pCamera']['GetView'](),_0x5c6f7e=this['pCamera']['GetProj'](),_0x247909=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x247909<=0x0)return _0x2bc1a4;this['ctx']['uniformMatrix4fv'](_0x247909,!0x1,_0x3e15d5);var _0x1b530c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x1b530c<=0x0)return _0x2bc1a4;this['ctx']['uniformMatrix4fv'](_0x1b530c,!0x1,_0x5c6f7e);break;case _0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']:case _0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']:case _0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x2447e8=this['pCamera']['GetView'](),_0x37e1a6=this['pCamera']['GetProj'](),_0x4fd5e4=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x4fd5e4<=0x0)return _0x2bc1a4;this['ctx']['uniformMatrix4fv'](_0x4fd5e4,!0x1,_0x2447e8);var _0x1950bb=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x1950bb<=0x0)return _0x2bc1a4;this['ctx']['uniformMatrix4fv'](_0x1950bb,!0x1,_0x37e1a6);break;default:return _0x2a6293;}if(this['canvas']['width']<=0x0||this['canvas']['height']<=0x0)return _0x4f7f9a;if(null!=_0x1036f0&&(_0x5231f4=this['SR_SetDisplayRect'](_0x1036f0['fx'],_0x1036f0['fy'],_0x1036f0['width'],_0x1036f0['height'],_0x2b52b0))!=_0x1b3061)return _0x5231f4;if(null!=_0x1036f0?this['ctx']['viewport'](this['canvas']['width']*this['fDstUseLeft'],this['canvas']['height']*this['fDstUseTop'],this['canvas']['width']*this['fDstUseRight'],this['canvas']['height']*this['fDstUseBottom']):(this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx']['clear'](this['ctx']['COLOR_BUFFER_BIT']|this['ctx']['DEPTH_BUFFER_BIT'])),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),this['enPixelFormat']==_0x1aec18)this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],_0x57389a,_0xe0a964,0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x3832d7),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);else{if(this['enPixelFormat']==_0x41de94){var _0x356034=this['pFrameData']['subarray'](0x0,_0x57389a*_0xe0a964);this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x57389a,_0xe0a964,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x356034);var _0xfc7e8b=this['pFrameData']['subarray'](_0x57389a*_0xe0a964+_0x57389a/0x2*_0xe0a964/0x2,_0x57389a*_0xe0a964+_0x57389a/0x2*_0xe0a964/0x2+_0x57389a/0x2*_0xe0a964/0x2);this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x57389a/0x2,_0xe0a964/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0xfc7e8b);var _0x16f860=this['pFrameData']['subarray'](_0x57389a*_0xe0a964,_0x57389a*_0xe0a964+_0x57389a/0x2*_0xe0a964/0x2);this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x57389a/0x2,_0xe0a964/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x16f860),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']),_0x356034=null,_0xfc7e8b=null,_0x16f860=null;}else this['enPixelFormat']==_0x428c76&&(_0x356034=this['pFrameData']['subarray'](0x0,_0x57389a*_0xe0a964),(this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x57389a,_0xe0a964,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x356034)),_0xfc7e8b=this['pFrameData']['subarray'](_0x57389a*_0xe0a964,_0x57389a*_0xe0a964+_0x57389a/0x2*_0xe0a964/0x2),(this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x57389a/0x2,_0xe0a964/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0xfc7e8b)),_0x16f860=this['pFrameData']['subarray'](_0x57389a*_0xe0a964+_0x57389a/0x2*_0xe0a964/0x2,_0x57389a*_0xe0a964+_0x57389a/0x2*_0xe0a964/0x2+_0x57389a/0x2*_0xe0a964/0x2),(this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x57389a/0x2,_0xe0a964/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x16f860),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']),_0x356034=null,_0xfc7e8b=null,_0x16f860=null));}if(this['onlySupportedWebGL1']||this['ctx']['clearBufferfi'](this['ctx']['DEPTH_STENCIL'],0x0,0x1,0x0),0x0==this['b3DPort'])this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4);else{if(this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_SEMISPHERE']){if(this['nSemiSpherePosNum']<=0x0)return _0x1f1f19;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']||this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']){if(this['nCylinderPosNum']<=0x0)return _0x1f1f19;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nCylinderPosNum']);}else{if(this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(this['nArcSpherePosNum']<=0x0)return _0x1f1f19;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nArcSpherePosNum']);}}}}if(this['ctx']['useProgram'](null),null!=this['pFishParamManager']){var _0x3bd1d8=this['pFishParamManager']['GetWndPort']();_0x3bd1d8!=_0x514d22&&_0x3bd1d8==this['nFECPort']&&this['DrawPTZLines']();}return null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),null!=this['pfuncCBOut']&&this['pfuncCBOut'](this['pUserOut']),_0x1b3061;}},{'key':'DrawPTZLines','value':function(){if(null==this['pFishParamManager'])return _0x1f1f19;var _0x4d1c80=this['pFishParamManager']['GetPTZDisplayMode']();if(_0x4d1c80==_0x29bcd1||_0x4d1c80==_0x1f7677){for(var _0x31c029=0x0,_0x1e548c={'fR':0x0,'fG':0x0,'fB':0x0,'fA':0x0},_0x59312d=_0x1b3061,_0x3d6a31=0x0;_0x3d6a31<_0x33feef;++_0x3d6a31)if(0x0!=this['pFishParamManager']['IsPortAllocated'](_0x3d6a31)&&(_0x31c029=0x2,_0x59312d=this['pFishParamManager']['GetPTZColor'](_0x3d6a31,_0x1e548c),_0x1b3061==_0x59312d)){0x1==this['pFishParamManager']['IsPTZSelected'](_0x3d6a31)&&(_0x31c029+=0x1);var _0x1996cb=this['pFishParamManager']['GetWndPort']();if(_0x3d6a31!=_0x1996cb&&_0x29bcd1==_0x4d1c80){if(_0x24b5aa['SR_DE_FISH_ORIGINAL']==this['pFishParamManager']['GetDisplayEffect'](_0x1996cb)){var _0x5aa688={};if(_0x59312d=this['pFishParamManager']['GetPTZPoints'](_0x3d6a31,_0x5aa688,_0x29bcd1),_0x1b3061!=_0x59312d)continue;if(null!=_0x5aa688['pstPoints']&&0x0!=_0x5aa688['nPointNum']&&(_0x59312d=this['SR_DrawLines'](_0x5aa688['pstPoints'],_0x5aa688['nPointNum'],!0x0,_0x1e548c,_0x31c029,!0x1),_0x1b3061!=_0x59312d))continue;}else{var _0x17d7cc;if((_0x17d7cc=this['pFishParamManager']['GetPTZFragmentNum'](_0x3d6a31))<=0x0)continue;for(var _0x3ffbe1=0x0;_0x3ffbe1<_0x17d7cc;_0x3ffbe1++){var _0x378a3d={};this['pFishParamManager']['GetPTZFragmentPoints'](_0x3d6a31,_0x378a3d,_0x3ffbe1),null!=_0x378a3d['pstPoints']&&0x0!=_0x378a3d['nPointNum']&&this['SR_DrawLines'](_0x378a3d['pstPoints'],_0x378a3d['nPointNum'],!0x1,_0x1e548c,_0x31c029,!0x1);}}}else{if(_0x3d6a31!=_0x1996cb&&_0x1f7677==_0x4d1c80){var _0x41f271={};if(_0x59312d=this['pFishParamManager']['GetPTZPoints'](_0x3d6a31,_0x41f271,_0x1f7677),_0x1b3061!=_0x59312d)continue;if(null!=_0x41f271['pstPoints']&&0x0!=_0x41f271['nPointNum']&&(_0x59312d=this['SR_DrawLines'](_0x41f271['pstPoints'],_0x41f271['nPointNum'],!0x0,_0x1e548c,_0x31c029,!0x1),_0x1b3061!=_0x59312d))continue;}}}}return _0x1b3061;}},{'key':'DrawFillBlock','value':function(_0x43703c,_0x2eb8c6,_0x30f2e7){if(null==this['ctx'])return _0x1f1f19;if(null==_0x43703c||_0x2eb8c6<0x1||_0x30f2e7<0x2)return _0x4a3918;for(var _0x5607c=0x0,_0x4ab3=0x0;_0x4ab3<_0x2eb8c6;++_0x4ab3){if(null==_0x43703c[_0x4ab3]['pstPoints']||_0x43703c[_0x4ab3]['nPointNum']<0x3||!0x0!==_0x43703c[_0x4ab3]['bLoop']||null==_0x43703c[_0x4ab3]['pstColor'])return _0x4a3918;_0x5607c+=_0x43703c[_0x4ab3]['nPointNum'];}if(_0x5607c!==_0x30f2e7)return _0x4a3918;var _0x12141d=_0x30f2e7-0x2*_0x2eb8c6;if(_0x12141d>this['nMaxFillBlockTriNum']&&(this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=_0x12141d),0x0==this['glBlockPosBuffer']&&(this['glBlockPosBuffer']=this['ctx']['createBuffer'](),0x0==this['glBlockPosBuffer']))return _0x2bc1a4;if(0x0==this['glBlockClrBuffer']&&(this['glBlockClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glBlockClrBuffer']))return _0x2bc1a4;if(null==this['pFillBlockPosVertices']){var _0x4372e5=this['nMaxFillBlockTriNum'];if(this['pFillBlockPosVertices']=new Float32Array(0x3*_0x4372e5*0x3),null==this['pFillBlockPosVertices'])return _0x431a2e;}if(this['pFillBlockPosVertices']['fill'](0x0),null==this['pFillBlockClrVertices']){var _0x33e1aa=this['nMaxFillBlockTriNum'];if(this['pFillBlockClrVertices']=new Float32Array(0x4*_0x33e1aa*0x3),null==this['pFillBlockClrVertices'])return _0x431a2e;}this['pFillBlockClrVertices']['fill'](0x0);for(var _0x5c3b9f=0x0,_0x1bef37=0x0,_0x38d305=0x0,_0xaa193d=null,_0x129917=null,_0x34cf49={},_0x583f3c={},_0x4ceb77={},_0x2a8c07=0x0;_0x2a8c07<_0x2eb8c6;++_0x2a8c07){_0x38d305=_0x43703c[_0x2a8c07]['nPointNum'],_0xaa193d=_0x43703c[_0x2a8c07]['pstPoints'],_0x129917=_0x43703c[_0x2a8c07]['pstColor'],_0x34cf49['fX']=(_0xaa193d[0x0]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x34cf49['fX']=this['fDstUseLeft']+_0x34cf49['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x34cf49['fX']=0x2*_0x34cf49['fX']-0x1,_0x34cf49['fY']=(_0xaa193d[0x0]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x34cf49['fY']=this['fDstUseTop']+_0x34cf49['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x34cf49['fY']=0x1-0x2*_0x34cf49['fY'];for(var _0x723be7=0x1;_0x723be7<_0x38d305-0x1;_0x723be7++)_0x583f3c['fX']=(_0xaa193d[_0x723be7]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x583f3c['fX']=this['fDstUseLeft']+_0x583f3c['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x583f3c['fX']=0x2*_0x583f3c['fX']-0x1,_0x583f3c['fY']=(_0xaa193d[_0x723be7]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x583f3c['fY']=this['fDstUseTop']+_0x583f3c['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x583f3c['fY']=0x1-0x2*_0x583f3c['fY'],_0x4ceb77['fX']=(_0xaa193d[_0x723be7+0x1]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x4ceb77['fX']=this['fDstUseLeft']+_0x4ceb77['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x4ceb77['fX']=0x2*_0x4ceb77['fX']-0x1,_0x4ceb77['fY']=(_0xaa193d[_0x723be7+0x1]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x4ceb77['fY']=this['fDstUseTop']+_0x4ceb77['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x4ceb77['fY']=0x1-0x2*_0x4ceb77['fY'],this['pFillBlockPosVertices'][_0x5c3b9f++]=_0x34cf49['fX'],this['pFillBlockPosVertices'][_0x5c3b9f++]=_0x34cf49['fY'],this['pFillBlockPosVertices'][_0x5c3b9f++]=0x0,this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fR'],this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fG'],this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fB'],this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fA'],this['pFillBlockPosVertices'][_0x5c3b9f++]=_0x583f3c['fX'],this['pFillBlockPosVertices'][_0x5c3b9f++]=_0x583f3c['fY'],this['pFillBlockPosVertices'][_0x5c3b9f++]=0x0,this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fR'],this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fG'],this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fB'],this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fA'],this['pFillBlockPosVertices'][_0x5c3b9f++]=_0x4ceb77['fX'],this['pFillBlockPosVertices'][_0x5c3b9f++]=_0x4ceb77['fY'],this['pFillBlockPosVertices'][_0x5c3b9f++]=0x0,this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fR'],this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fG'],this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fB'],this['pFillBlockClrVertices'][_0x1bef37++]=_0x129917['fA'];}if(0x0==this['nBlockShaderProgram']&&(this['nBlockShaderProgram']=this['CompileProgram'](_0x4c5fbd,_0x2b6b),this['nBlockShaderProgram']<=0x0))return _0x2bc1a4;this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockPosBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pFillBlockPosVertices'],this['ctx']['STATIC_DRAW']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockClrBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pFillBlockClrVertices'],this['ctx']['STATIC_DRAW']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['useProgram'](this['nBlockShaderProgram']);var _0x149917=this['ctx']['getUniformLocation'](this['nLineShaderProgram'],'bCapture');if(_0x149917<=0x0)return _0x2bc1a4;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x149917,0x1):this['ctx']['uniform1i'](_0x149917,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockPosBuffer']);var _0x39011c=this['ctx']['getAttribLocation'](this['nBlockShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x39011c),this['ctx']['vertexAttribPointer'](_0x39011c,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockClrBuffer']);var _0x37746e=this['ctx']['getAttribLocation'](this['nBlockShaderProgram'],'color');return this['ctx']['enableVertexAttribArray'](_0x37746e),this['ctx']['vertexAttribPointer'](_0x37746e,0x4,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x3*_0x12141d),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0x1b3061;}},{'key':'ComputeLinePoint','value':function(_0x2e747f,_0x279edd){if(null==_0x2e747f||_0x279edd<0x1)return _0x4a3918;if(null==this['pLinePosVertices']||null==this['pLineClrVertices'])return _0x1f1f19;var _0x472487=0x0,_0x2e6161=0x0;0x1==this['bIsCapturing']?(_0x472487=(this['fDstUseRight']-this['fDstUseLeft'])*this['nCaptureWidth'],_0x2e6161=(this['fDstUseBottom']-this['fDstUseTop'])*this['nCaptureHeight']):(_0x472487=(this['fDstUseRight']-this['fDstUseLeft'])*this['canvas']['width'],_0x2e6161=(this['fDstUseBottom']-this['fDstUseTop'])*this['canvas']['height']);for(var _0x27eea1=0x0,_0x27e5da=0x0,_0x167c2f=0x0,_0x5104c1=0x0,_0x320d30=0x0,_0xf74d16=0x0,_0x39c112=0x0,_0x33422c=0x0,_0x55bf95=0x0,_0x1f9f3f=0x0,_0x41a622=0x0,_0x3fbc82=0x0;_0x3fbc82<_0x279edd;++_0x3fbc82){var _0x24be2c=[];if(!((_0x41a622=_0x2e747f[_0x3fbc82]['nPointNum'])<=0x0)){for(var _0x37aceb=0x0;_0x37aceb<_0x41a622;++_0x37aceb){var _0x2b1023={};_0x2b1023['fX']=(_0x2e747f[_0x3fbc82]['pstPoints'][_0x37aceb]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x2b1023['fX']=this['fDstUseLeft']+_0x2b1023['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x2b1023['fX']=0x2*_0x2b1023['fX']-0x1,_0x2b1023['fY']=(_0x2e747f[_0x3fbc82]['pstPoints'][_0x37aceb]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x2b1023['fY']=this['fDstUseTop']+_0x2b1023['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x2b1023['fY']=0x1-0x2*_0x2b1023['fY'],_0x24be2c['push'](_0x2b1023);}if(this['canvas']['width']<=0x0||this['canvas']['height']<=0x0)return _0x4f7f9a;if(_0xf74d16=3.5*_0x2e747f[_0x3fbc82]['nLineWidth']/_0x472487,_0x39c112=3.5*_0x2e747f[_0x3fbc82]['nLineWidth']/_0x2e6161,_0xf74d16<=0x0||_0x39c112<=0x0)return _0x4a3918;var _0x48d94c=_0x2e747f[_0x3fbc82]['pstColor'];if(null==_0x48d94c||null==_0x48d94c)return _0x4a3918;for(var _0x2b6e3d=0x0;_0x2b6e3d<_0x41a622-0x1;++_0x2b6e3d)_0x27e5da=_0x24be2c[_0x2b6e3d+0x1]['fX']-_0x24be2c[_0x2b6e3d]['fX'],_0x167c2f=_0x24be2c[_0x2b6e3d+0x1]['fY']-_0x24be2c[_0x2b6e3d]['fY'],_0x27eea1=Math['sqrt'](_0x27e5da*_0x27e5da+_0x167c2f*_0x167c2f),Math['abs'](_0x27eea1-0x0)<0.000001||(_0x5104c1=-_0xf74d16*_0x167c2f/_0x27eea1/0x2,_0x320d30=_0x39c112*_0x27e5da/_0x27eea1/0x2,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d]['fX']+_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d]['fY']+_0x320d30,this['pLinePosVertices'][_0x55bf95++]=-0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d+0x1]['fX']-_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d+0x1]['fY']-_0x320d30,this['pLinePosVertices'][_0x55bf95++]=0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d]['fX']-_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d]['fY']-_0x320d30,this['pLinePosVertices'][_0x55bf95++]=0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d]['fX']+_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d]['fY']+_0x320d30,this['pLinePosVertices'][_0x55bf95++]=-0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d+0x1]['fX']+_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d+0x1]['fY']+_0x320d30,this['pLinePosVertices'][_0x55bf95++]=-0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d+0x1]['fX']-_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x2b6e3d+0x1]['fY']-_0x320d30,this['pLinePosVertices'][_0x55bf95++]=0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],_0x33422c+=0x2);0x1==_0x2e747f[_0x3fbc82]['bLoop']&&0x2<_0x41a622&&(_0x27e5da=_0x24be2c[_0x41a622-0x1]['fX']-_0x24be2c[0x0]['fX'],_0x167c2f=_0x24be2c[_0x41a622-0x1]['fY']-_0x24be2c[0x0]['fY'],_0x27eea1=Math['sqrt'](_0x27e5da*_0x27e5da+_0x167c2f*_0x167c2f),Math['abs'](_0x27eea1-0x0)>0.000001&&(_0x5104c1=-_0xf74d16*_0x167c2f/_0x27eea1/0x2,_0x320d30=_0x39c112*_0x27e5da/_0x27eea1/0x2,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[0x0]['fX']+_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[0x0]['fY']+_0x320d30,this['pLinePosVertices'][_0x55bf95++]=-0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x41a622-0x1]['fX']-_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x41a622-0x1]['fY']-_0x320d30,this['pLinePosVertices'][_0x55bf95++]=0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[0x0]['fX']-_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[0x0]['fY']-_0x320d30,this['pLinePosVertices'][_0x55bf95++]=0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[0x0]['fX']+_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[0x0]['fY']+_0x320d30,this['pLinePosVertices'][_0x55bf95++]=-0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x41a622-0x1]['fX']+_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x41a622-0x1]['fY']+_0x320d30,this['pLinePosVertices'][_0x55bf95++]=-0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x41a622-0x1]['fX']-_0x5104c1,this['pLinePosVertices'][_0x55bf95++]=_0x24be2c[_0x41a622-0x1]['fY']-_0x320d30,this['pLinePosVertices'][_0x55bf95++]=0x1,this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fR'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fG'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fB'],this['pLineClrVertices'][_0x1f9f3f++]=_0x48d94c['fA'],_0x33422c+=0x2));}}return 0x0==_0x33422c?_0x4a3918:(this['nLineTriangleNum']=_0x33422c,_0x1b3061);}},{'key':'SR_DrawLines','value':function(_0x586144,_0x2804e9,_0x5c53aa,_0x1d7984,_0x45268f,_0x5b04b9){var _0x52a6b1=[],_0x5a2f21={};return _0x5a2f21['pstPoints']=_0x586144,_0x5a2f21['nPointNum']=_0x2804e9,_0x5a2f21['bLoop']=_0x5c53aa,_0x5a2f21['pstColor']=_0x1d7984,_0x5a2f21['nLineWidth']=_0x45268f,_0x52a6b1['push'](_0x5a2f21),this['SR_DrawLinesEx'](_0x52a6b1,0x1,_0x2804e9,_0x5b04b9);}},{'key':'SR_DrawLinesEx','value':function(_0x4efa73,_0x111e50,_0x3a0efa,_0x53c148){if(null==this['ctx'])return _0x1f1f19;if(null==_0x4efa73||_0x111e50<0x1||_0x3a0efa<0x2)return _0x4a3918;if(0x0==this['nLineShaderProgram']){var _0x587baf=this['CompileProgram'](_0x4c5fbd,_0x2b6b);if(_0x587baf<=0x0)return _0x2bc1a4;this['nLineShaderProgram']=_0x587baf;}if(0x1==_0x53c148)return this['DrawFillBlock'](_0x4efa73,_0x111e50,_0x3a0efa);for(var _0xce9ff4=0x0,_0x442151=0x0;_0x442151<_0x111e50;++_0x442151){if(null==_0x4efa73[_0x442151]['pstPoints']||_0x4efa73[_0x442151]['nPointNum']<=0x1||_0x4efa73[_0x442151]['nPointNum']>=0x400||_0x4efa73[_0x442151]['nLineWidth']<=0x0||null==_0x4efa73[_0x442151]['pstColor'])return _0x4a3918;_0xce9ff4+=_0x4efa73[_0x442151]['nPointNum'];}if(_0xce9ff4!=_0x3a0efa)return _0x4a3918;if((_0xce9ff4+=_0x111e50)>this['nMaxPointNum']&&(this['nMaxPointNum']=_0xce9ff4,this['pLinePosVertices']=null,this['pLineClrVertices']=null),null==this['pLinePosVertices']&&(this['pLinePosVertices']=new Float32Array(0x6*this['nMaxPointNum']*0x3),null==this['pLinePosVertices']))return _0x431a2e;if(this['pLinePosVertices']['fill'](0x0),null==this['pLineClrVertices']&&(this['pLineClrVertices']=new Float32Array(0x6*this['nMaxPointNum']*0x4),null==this['pLineClrVertices']))return _0x431a2e;if(this['pLineClrVertices']['fill'](0x0),0x0==this['glLinePosBuffer']&&(this['glLinePosBuffer']=this['ctx']['createBuffer'](),0x0==this['glLinePosBuffer']))return _0x2bc1a4;if(0x0==this['glLineClrBuffer']&&(this['glLineClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glLineClrBuffer']))return _0x2bc1a4;var _0x1366a2=this['ComputeLinePoint'](_0x4efa73,_0x111e50);if(_0x1b3061!=_0x1366a2)return _0x1366a2;this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']);var _0x5aa318=this['nLineShaderProgram'];this['ctx']['useProgram'](_0x5aa318);var _0x54e5f2=this['ctx']['getUniformLocation'](this['nLineShaderProgram'],'bCapture');if(_0x54e5f2<=0x0)return _0x2bc1a4;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x54e5f2,0x1):this['ctx']['uniform1i'](_0x54e5f2,0x0);var _0x14f0e2=this['glLinePosBuffer'],_0x4927e5=this['glLineClrBuffer'],_0x346ece=this['nLineTriangleNum'],_0x35cf6b=this['pLinePosVertices'],_0x48a45a=this['pLineClrVertices'];this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x14f0e2),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x35cf6b,this['ctx']['STATIC_DRAW']);var _0x232f21=this['ctx']['getAttribLocation'](_0x5aa318,'position');this['ctx']['enableVertexAttribArray'](_0x232f21),this['ctx']['vertexAttribPointer'](_0x232f21,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x4927e5),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x48a45a,this['ctx']['STATIC_DRAW']);var _0x335af6=this['ctx']['getAttribLocation'](_0x5aa318,'color');return this['ctx']['enableVertexAttribArray'](_0x335af6),this['ctx']['vertexAttribPointer'](_0x335af6,0x4,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),0x1==this['bIsCapturing']?this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']):this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x3*_0x346ece),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0x1b3061;}},{'key':'SR_DrawFont','value':function(_0x207834,_0x4bd0cf,_0x296773,_0x29e826,_0x4c46d4,_0x3d05bc,_0x41f882,_0x5b8788,_0x15198e,_0x1416a7,_0x4d656d){if(null==_0x207834||null==_0x4bd0cf||null==_0x296773||_0x29e826<=0x1||_0x4c46d4<=0x1)return _0x4a3918;if(0x1==_0x3d05bc&&null==_0x41f882)return _0x4a3918;var _0x7f3c5e=[],_0xf0c30a={};return _0xf0c30a['bBackground']=_0x3d05bc,_0xf0c30a['nFontWidth']=_0x29e826,_0xf0c30a['nFontHeight']=_0x4c46d4,_0xf0c30a['pstBGColor']=_0x41f882,_0xf0c30a['pstFontColor']=_0x296773,_0xf0c30a['pString']=_0x207834,_0xf0c30a['pstStartPos']=_0x4bd0cf,_0xf0c30a['fRotateAngle']=_0x5b8788,_0xf0c30a['pFontFamily']=_0x15198e,_0xf0c30a['textAlign']=_0x1416a7,_0xf0c30a['textBaseline']=_0x4d656d,_0x7f3c5e['push'](_0xf0c30a),this['SR_DrawFontEx'](_0x7f3c5e,0x1);}},{'key':'SR_DrawFontEx','value':function(_0x1b06e2,_0x1e8cb7){if(null==this['ctx'])return _0x1f1f19;if(0x0>_0x1e8cb7||null==_0x1b06e2)return _0x4a3918;var _0x1aec41,_0x29a2ab,_0x3a6002=0x0,_0xce9576=0x0;if(0x1==this['bIsCapturing']){if(0x0==this['nCaptureWidth']||0x0==this['nCaptureHeight'])return _0x1f1f19;_0x3a6002=Math['round']((this['fDstUseRight']-this['fDstUseLeft'])*this['nCaptureWidth']),_0xce9576=Math['round']((this['fDstUseBottom']-this['fDstUseTop'])*this['nCaptureHeight']);}else _0x3a6002=Math['round']((this['fDstUseRight']-this['fDstUseLeft'])*this['canvas']['width']),_0xce9576=Math['round']((this['fDstUseBottom']-this['fDstUseTop'])*this['canvas']['height']);if(_0x3a6002=_0x3a6002+0x4-_0x3a6002%0x4,_0xce9576=_0xce9576+0x4-_0xce9576%0x4,this['nDrawFontWidth']==_0x3a6002&&this['nDrawFontHeight']==_0xce9576||(this['pFontColorBuffer']=null,this['nFontColorTexture']=0x0,this['nDrawFontWidth']=_0x3a6002,this['nDrawFontHeight']=_0xce9576,null!=this['textCanvas']&&(this['textCanvas']['remove'](),this['textCanvas']=null,this['textCanvasCtx']=null)),0x0==this['nFontColorTexture']){if(this['nFontColorTexture']=this['ctx']['createTexture'](),0x0==this['nFontColorTexture'])return _0x2bc1a4;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(null==this['textCanvas']){if(this['textCanvas']=document['createElement']('canvas'),null==this['textCanvas'])return _0x4f3ec1;if(this['textCanvasCtx']=this['textCanvas']['getContext']('2d'),null==this['textCanvasCtx'])return _0x4f3ec1;this['textCanvasCtx']['canvas']['width']=this['nDrawFontWidth'],this['textCanvasCtx']['canvas']['height']=this['nDrawFontHeight'];}this['textCanvasCtx']['clearRect'](0x0,0x0,this['nDrawFontWidth'],this['nDrawFontHeight']);for(var _0x1a2e94=0x0;_0x1a2e94<_0x1e8cb7;++_0x1a2e94){var _0xb49b61=_0x1b06e2[_0x1a2e94]['nFontWidth'],_0x47f847=_0x1b06e2[_0x1a2e94]['nFontHeight'];0x1==this['bIsCapturing']&&(_0xb49b61=Math['round'](0.7*this['nCaptureWidth']/this['canvas']['width']*_0xb49b61),_0x47f847=Math['round'](0.7*this['nCaptureHeight']/this['canvas']['height']*_0x47f847));var _0x234d03=_0xb49b61<_0x47f847?_0xb49b61:_0x47f847;this['textCanvasCtx']['font']=_0x234d03['toString']()+'px\\x20'+_0x1b06e2[_0x1a2e94]['pFontFamily'],null==_0x1b06e2[_0x1a2e94]['textAlign']||null==_0x1b06e2[_0x1a2e94]['textAlign']?this['textCanvasCtx']['textAlign']='left':this['textCanvasCtx']['textAlign']=_0x1b06e2[_0x1a2e94]['textAlign'],null==_0x1b06e2[_0x1a2e94]['textBaseline']||null==_0x1b06e2[_0x1a2e94]['textBaseline']?this['textCanvasCtx']['textBaseline']='top':this['textCanvasCtx']['textBaseline']=_0x1b06e2[_0x1a2e94]['textBaseline'];var _0x4317b3=parseInt(0xff*_0x1b06e2[_0x1a2e94]['pstFontColor']['fR']),_0x462f38=parseInt(0xff*_0x1b06e2[_0x1a2e94]['pstFontColor']['fG']),_0x2e8212=parseInt(0xff*_0x1b06e2[_0x1a2e94]['pstFontColor']['fB']),_0x1010a2=_0x4317b3<0x10?'0'+_0x4317b3['toString'](0x10):_0x4317b3['toString'](0x10),_0x5db7c8=_0x462f38<0x10?'0'+_0x462f38['toString'](0x10):_0x462f38['toString'](0x10),_0x4d95c5=_0x2e8212<0x10?'0'+_0x2e8212['toString'](0x10):_0x2e8212['toString'](0x10);this['textCanvasCtx']['fillStyle']='#'+_0x1010a2+_0x5db7c8+_0x4d95c5,this['textCanvasCtx']['globalAlpha']=_0x1b06e2[_0x1a2e94]['pstFontColor']['fA'];var _0x1ec605=_0x1b06e2[_0x1a2e94]['pstStartPos']['fX']*this['nDrawFontWidth'],_0x22c799=_0x1b06e2[_0x1a2e94]['pstStartPos']['fY']*this['nDrawFontHeight'];this['textCanvasCtx']['save'](),this['textCanvasCtx']['translate'](_0x1ec605,_0x22c799),this['textCanvasCtx']['rotate'](_0x1b06e2[_0x1a2e94]['fRotateAngle']*Math['PI']/0xb4),this['textCanvasCtx']['fillText'](_0x1b06e2[_0x1a2e94]['pString'],0x0,0x0),this['textCanvasCtx']['restore']();}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],this['textCanvasCtx']['canvas']),0x0==this['nFontShaderProgram']&&(this['nFontShaderProgram']=this['CompileProgram']('\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20texCoord;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.x\\x20\\x20=\\x20position.x;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20\\x20=\\x20position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20-position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.z\\x20\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.w\\x20\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a','\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x0a\\x20\\x20\\x20\\x20}\\x0a'),this['nFontShaderProgram']<=0x0))return _0x2bc1a4;0x1==this['bIsCapturing']?(_0x1aec41=this['nCaptureWidth']+0x4-this['nCaptureWidth']%0x4,_0x29a2ab=this['nCaptureHeight']+0x4-this['nCaptureHeight']%0x4):(_0x1aec41=this['canvas']['width']+0x4-this['canvas']['width']%0x4,_0x29a2ab=this['canvas']['height']+0x4-this['canvas']['height']%0x4),this['ctx']['viewport'](0x0,0x0,_0x1aec41,_0x29a2ab),this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),this['ctx']['useProgram'](this['nFontShaderProgram']);var _0x4a294e=this['ctx']['getUniformLocation'](this['nFontShaderProgram'],'bCapture');if(_0x4a294e<=0x0)return _0x2bc1a4;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x4a294e,0x1):this['ctx']['uniform1i'](_0x4a294e,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']);var _0x33a210=this['ctx']['getUniformLocation'](this['nFontShaderProgram'],'texture');this['ctx']['uniform1i'](_0x33a210,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x291a57=this['ctx']['getAttribLocation'](this['nFontShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x291a57),this['ctx']['vertexAttribPointer'](_0x291a57,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x508eba=this['ctx']['getAttribLocation'](this['nFontShaderProgram'],'texCoord');return this['ctx']['enableVertexAttribArray'](_0x508eba),this['ctx']['vertexAttribPointer'](_0x508eba,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],null),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0x1b3061;}},{'key':'SR_DrawImage','value':function(_0x264c41,_0x27100a,_0x1b4d6b,_0x5dfaf9,_0x128666,_0x50e8c7){if(null==this['ctx'])return _0x1f1f19;if(null==_0x264c41||_0x27100a<=0x0||_0x1b4d6b<=0x0||null==_0x5dfaf9||_0x50e8c7<0x0||_0x50e8c7>0x1)return _0x4a3918;if(this['nDrawImageWidth']=_0x27100a,this['nDrawImageHeight']=_0x1b4d6b,0x0==this['glImagePosBuffer']&&(this['glImagePosBuffer']=this['ctx']['createBuffer'](),0x0==this['glImagePosBuffer']))return _0x2bc1a4;if(0x0==this['glImageClrBuffer']&&(this['glImageClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glImageClrBuffer']))return _0x2bc1a4;if(null==this['pImageClrVertices']){if(this['pImageClrVertices']=new Float32Array(0xc),null==this['pImageClrVertices'])return _0x431a2e;this['pImageClrVertices'][0x0]=0x0,this['pImageClrVertices'][0x1]=0x0,this['pImageClrVertices'][0x2]=0x0,this['pImageClrVertices'][0x3]=0x1,this['pImageClrVertices'][0x4]=0x1,this['pImageClrVertices'][0x5]=0x0,this['pImageClrVertices'][0x6]=0x1,this['pImageClrVertices'][0x7]=0x0,this['pImageClrVertices'][0x8]=0x0,this['pImageClrVertices'][0x9]=0x1,this['pImageClrVertices'][0xa]=0x1,this['pImageClrVertices'][0xb]=0x1;}var _0x582cce={},_0x1a5faa={};if(_0x582cce['fLeft']=(_0x5dfaf9['fLeft']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x582cce['fRight']=(_0x5dfaf9['fRight']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x582cce['fTop']=(_0x5dfaf9['fTop']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x582cce['fBottom']=(_0x5dfaf9['fBottom']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x1a5faa['fLeft']=this['fDstUseLeft']+_0x582cce['fLeft']*(this['fDstUseRight']-this['fDstUseLeft']),_0x1a5faa['fRight']=this['fDstUseLeft']+_0x582cce['fRight']*(this['fDstUseRight']-this['fDstUseLeft']),_0x1a5faa['fTop']=this['fDstUseTop']+_0x582cce['fTop']*(this['fDstUseBottom']-this['fDstUseTop']),_0x1a5faa['fBottom']=this['fDstUseTop']+_0x582cce['fBottom']*(this['fDstUseBottom']-this['fDstUseTop']),null==this['pImagePosVertices']&&(this['pImagePosVertices']=new Float32Array(0xc),null==this['pImagePosVertices']))return _0x431a2e;switch(this['pImagePosVertices']['fill'](0x0),this['pImagePosVertices'][0x0]=0x2*_0x1a5faa['fLeft']-0x1,this['pImagePosVertices'][0x1]=0x1-0x2*_0x1a5faa['fTop'],this['pImagePosVertices'][0x2]=0x2*_0x1a5faa['fLeft']-0x1,this['pImagePosVertices'][0x3]=0x1-0x2*_0x1a5faa['fBottom'],this['pImagePosVertices'][0x4]=0x2*_0x1a5faa['fRight']-0x1,this['pImagePosVertices'][0x5]=0x1-0x2*_0x1a5faa['fTop'],this['pImagePosVertices'][0x6]=0x2*_0x1a5faa['fRight']-0x1,this['pImagePosVertices'][0x7]=0x1-0x2*_0x1a5faa['fTop'],this['pImagePosVertices'][0x8]=0x2*_0x1a5faa['fLeft']-0x1,this['pImagePosVertices'][0x9]=0x1-0x2*_0x1a5faa['fBottom'],this['pImagePosVertices'][0xa]=0x2*_0x1a5faa['fRight']-0x1,this['pImagePosVertices'][0xb]=0x1-0x2*_0x1a5faa['fBottom'],0x1==this['bIsCapturing']?this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']):this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),_0x128666){case _0x20ae93:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x2bc1a4;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x264c41),0x0==this['nImageShaderProgram']){var _0x88e731=this['CompileProgram'](_0x201cc4,_0x5d87e4);if(_0x88e731<=0x0)return _0x2bc1a4;this['nImageShaderProgram']=_0x88e731;}break;case _0xa6febe:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x2bc1a4;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGB'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGB'],this['ctx']['UNSIGNED_SHORT_5_6_5'],_0x264c41),0x0==this['nImageShaderProgram']){var _0x4d4362=this['CompileProgram'](_0x201cc4,'\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x20\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20*=\\x20fAlpha;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a');if(_0x4d4362<=0x0)return _0x2bc1a4;this['nImageShaderProgram']=_0x4d4362;}break;case _0x41de94:for(var _0xd8050d=0x0;_0xd8050d<0x3;_0xd8050d++){if(this['nImageColorTextures'][_0xd8050d]=this['ctx']['createTexture'](),0x0==this['nImageColorTextures'][_0xd8050d])return _0x2bc1a4;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][_0xd8050d]),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x264c41),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth']/0x2,this['nDrawImageHeight']/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x264c41+this['nDrawImageWidth']*this['nDrawImageHeight']*0x5/0x4),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth']/0x2,this['nDrawImageHeight']/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x264c41+this['nDrawImageWidth']*this['nDrawImageHeight']),0x0==this['nImageShaderProgram']){var _0x26d81b=this['CompileProgram'](_0x201cc4,'\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Ytexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Utexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Vtexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,\\x20g,\\x20b,\\x20y,\\x20u,\\x20v;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20pp.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20pp.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20pp.st).r;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x201.1643\\x20*\\x20(y\\x20-\\x200.0625);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20u\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20v\\x20-\\x200.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20y\\x20+\\x201.5958\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20y\\x20-\\x200.39173\\x20*\\x20u\\x20-\\x200.81290\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20y\\x20+\\x202.017\\x20*\\x20u;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r,\\x20g,\\x20b,\\x20fAlpha);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a');if(_0x26d81b<=0x0)return _0x2bc1a4;this['nImageShaderProgram']=_0x26d81b;}break;case _0x1aec18:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x2bc1a4;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}this['ctx']['useProgram'](this['videoShaderProgram']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x4ec1c5=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x4ec1c5<0x0)return _0x2bc1a4;this['ctx']['vertexAttribPointer'](_0x4ec1c5,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x4ec1c5),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x53d187=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x53d187<0x0)return _0x2bc1a4;if(this['ctx']['vertexAttribPointer'](_0x53d187,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x53d187),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['useProgram'](null),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x264c41),0x0==this['nImageShaderProgram']){var _0x5e76a2=this['CompileProgram'](_0x201cc4,_0x5d87e4);if(_0x5e76a2<=0x0)return _0x2bc1a4;this['nImageShaderProgram']=_0x5e76a2;}break;default:return _0x2a6293;}var _0x503c87=this['nImageShaderProgram'];this['ctx']['useProgram'](_0x503c87);var _0x15f9c7=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'bCapture');if(_0x15f9c7<=0x0)return _0x2bc1a4;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x15f9c7,0x1):this['ctx']['uniform1i'](_0x15f9c7,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']);var _0x46868b=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'texture');this['ctx']['uniform1i'](_0x46868b,0x0),_0x46868b=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'fAlpha'),this['ctx']['uniform1f'](_0x46868b,_0x50e8c7),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glImagePosBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pImagePosVertices'],this['ctx']['STATIC_DRAW']);var _0x47771b=this['ctx']['getAttribLocation'](this['nImageShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x47771b),this['ctx']['vertexAttribPointer'](_0x47771b,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glImageClrBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pImageClrVertices'],this['ctx']['STATIC_DRAW']);var _0x21bb3e=this['ctx']['getAttribLocation'](this['nImageShaderProgram'],'texCoord');return this['ctx']['enableVertexAttribArray'](_0x21bb3e),this['ctx']['vertexAttribPointer'](_0x21bb3e,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x6),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0x1b3061;}},{'key':'SR_AddSubPort','value':function(_0x100003){var _0x1bad3a,_0x55cbfc,_0x3f91bf=_0x514d22;if(null==this['ctx'])return _0x3f91bf;if(null!=this['pFishParamManager']?_0x3f91bf=this['pFishParamManager']['GetFECPort'](_0x100003):_0x100003==_0x24b5aa['SR_DE_NULL']&&(_0x3f91bf=0x0),_0x3f91bf==_0x514d22)return _0x514d22;switch(this['nFECPort']=_0x3f91bf,_0x100003){case _0x24b5aa['SR_DE_NULL']:_0x1bad3a=_0x5a101a,this['enPixelFormat']==_0x1aec18?_0x55cbfc='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fWndWidth;\\x0auniform\\x20float\\x20fWndHeight;\\x0auniform\\x20float\\x20fBrightness;\\x0auniform\\x20float\\x20fHue;\\x0auniform\\x20float\\x20fSaturation;\\x0auniform\\x20float\\x20fContrast;\\x0auniform\\x20float\\x20fSharpness;\\x0auniform\\x20int\\x20nPostProc;\\x0avec3\\x20rgb2hsv(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(0.0,\\x20-1.0\\x20/\\x203.0,\\x202.0\\x20/\\x203.0,\\x20-1.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20p\\x20=\\x20c.g\\x20<\\x20c.b\\x20?\\x20vec4(c.bg,\\x20K.wz)\\x20:\\x20vec4(c.gb,\\x20K.xy);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20q\\x20=\\x20c.r\\x20<\\x20p.x\\x20?\\x20vec4(p.xyw,\\x20c.r)\\x20:\\x20vec4(c.r,\\x20p.yzx);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20q.x\\x20-\\x20min(q.w,\\x20q.y);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20e\\x20=\\x201.0e-10;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(abs(q.z\\x20+\\x20(q.w\\x20-\\x20q.y)\\x20/\\x20(6.0\\x20*\\x20d\\x20+\\x20e)),\\x20d\\x20/\\x20(q.x\\x20+\\x20e),\\x20q.x);\\x20\\x0a}\\x20\\x0avec3\\x20hsv2rgb(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(1.0,\\x202.0\\x20/\\x203.0,\\x201.0\\x20/\\x203.0,\\x203.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20p\\x20=\\x20abs(fract(c.xxx\\x20+\\x20K.xyz)\\x20*\\x206.0\\x20-\\x20K.www);\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20c.z\\x20*\\x20mix(K.xxx,\\x20clamp(p\\x20-\\x20K.xxx,\\x200.0,\\x201.0),\\x20c.y);\\x20\\x0a}\\x20\\x0avec3\\x20sharpen()\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20sharpenColor;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offWidth\\x20=\\x201.0\\x20/\\x20fWndWidth;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offHeight\\x20=\\x201.0\\x20/\\x20fWndHeight;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20tempSharpness\\x20=\\x20fSharpness\\x20*\\x20100.0;\\x20\\x0a\\x20\\x20\\x20\\x20vec2\\x20uv\\x20\\x20\\x20\\x20\\x20=\\x20v_uv;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20\\x20=\\x20(1.0\\x20+\\x204.0\\x20*\\x20tempSharpness)\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(-offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20-offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20return\\x20sharpenColor;\\x20\\x0a}\\x20\\x0avoid\\x20main(void)\\x20\\x0a{\\x0a\\x20\\x20\\x20\\x20if(1\\x20==\\x20nPostProc)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragRGB\\x20=\\x20sharpen();\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//sharpen\\x20锐度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragHSV\\x20=\\x20rgb2hsv(fragRGB);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.x\\x20=\\x20fragHSV.x\\x20+\\x20fHue;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//hue\\x20色度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.y\\x20=\\x20fragHSV.y\\x20*\\x20(fSaturation\\x20+\\x201.0);\\x20\\x20\\x20\\x20//saturation\\x20饱和度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20hsv2rgb(fragHSV);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fBrightness\\x20>\\x200.0)\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//brightness\\x20亮度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20(1.0\\x20-\\x20fragRGB)\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20fragRGB\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tempContrast\\x20=\\x20fContrast\\x20>\\x200.0\\x20?\\x20fContrast\\x20*\\x2010.0\\x20:\\x20fContrast;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20((fragRGB\\x20-\\x200.5)\\x20*\\x20max(tempContrast\\x20+\\x201.0,\\x200.0))\\x20+\\x200.5;\\x20\\x20\\x20\\x20\\x20\\x20//contrast\\x20对比度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(fragRGB,\\x201.0);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a\\x20\\x20\\x20\\x20}\\x0a}\\x0a':this['enPixelFormat']!=_0x41de94&&this['enPixelFormat']!=_0x428c76||(_0x55cbfc='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20Ytexture;\\x0auniform\\x20sampler2D\\x20Utexture;\\x0auniform\\x20sampler2D\\x20Vtexture;\\x0auniform\\x20float\\x20fWndWidth;\\x0auniform\\x20float\\x20fWndHeight;\\x0auniform\\x20float\\x20fBrightness;\\x0auniform\\x20float\\x20fHue;\\x0auniform\\x20float\\x20fSaturation;\\x0auniform\\x20float\\x20fContrast;\\x0auniform\\x20float\\x20fSharpness;\\x0auniform\\x20int\\x20nPostProc;\\x0avec3\\x20rgb;\\x0avec3\\x20yuv2rgb(float\\x20y,\\x20float\\x20u,\\x20float\\x20v)\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x0a\\x20\\x20\\x20\\x20y\\x20=\\x201.1643\\x20*\\x20(y\\x20-\\x200.0625);\\x20\\x0a\\x20\\x20\\x20\\x20u\\x20=\\x20u\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20v\\x20=\\x20v\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20y\\x20+\\x201.5958\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20y\\x20-\\x200.39173\\x20*\\x20u\\x20-\\x200.81290\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20y\\x20+\\x202.017\\x20*\\x20u;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(r,\\x20g,\\x20b);\\x0a}\\x0avec3\\x20rgb2hsv(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(0.0,\\x20-1.0\\x20/\\x203.0,\\x202.0\\x20/\\x203.0,\\x20-1.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20p\\x20=\\x20c.g\\x20<\\x20c.b\\x20?\\x20vec4(c.bg,\\x20K.wz)\\x20:\\x20vec4(c.gb,\\x20K.xy);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20q\\x20=\\x20c.r\\x20<\\x20p.x\\x20?\\x20vec4(p.xyw,\\x20c.r)\\x20:\\x20vec4(c.r,\\x20p.yzx);\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20q.x\\x20-\\x20min(q.w,\\x20q.y);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20e\\x20=\\x201.0e-10;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(abs(q.z\\x20+\\x20(q.w\\x20-\\x20q.y)\\x20/\\x20(6.0\\x20*\\x20d\\x20+\\x20e)),\\x20d\\x20/\\x20(q.x\\x20+\\x20e),\\x20q.x);\\x20\\x0a}\\x20\\x0a\\x0avec3\\x20hsv2rgb(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(1.0,\\x202.0\\x20/\\x203.0,\\x201.0\\x20/\\x203.0,\\x203.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20p\\x20=\\x20abs(fract(c.xxx\\x20+\\x20K.xyz)\\x20*\\x206.0\\x20-\\x20K.www);\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20c.z\\x20*\\x20mix(K.xxx,\\x20clamp(p\\x20-\\x20K.xxx,\\x200.0,\\x201.0),\\x20c.y);\\x20\\x0a}\\x20\\x0a\\x0avec3\\x20sharpen(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20sharpenColor;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorY;\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorU;\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorV;\\x0a\\x20\\x20\\x20\\x20float\\x20offWidth\\x20\\x20=\\x201.0\\x20/\\x20fWndWidth;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offHeight\\x20=\\x201.0\\x20/\\x20fWndHeight;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20tempSharpness\\x20=\\x20fSharpness\\x20*\\x20100.0;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20=\\x20(1.0\\x20+\\x204.0\\x20*\\x20tempSharpness)\\x20*\\x20c;\\x0a\\x0a\\x20\\x20\\x20\\x20vec2\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(-offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20offHeight);\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20-offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20return\\x20sharpenColor;\\x20\\x0a}\\x20\\x0avoid\\x20main(void)\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20y,\\x20u,\\x20v;\\x0a\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20rgb\\x20=\\x20yuv2rgb(y,\\x20u,\\x20v);\\x0a\\x20\\x20\\x20\\x20if(1\\x20==\\x20nPostProc)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragRGB\\x20=\\x20sharpen(rgb);\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//sharpen\\x20锐度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragHSV\\x20=\\x20rgb2hsv(fragRGB);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.x\\x20=\\x20fragHSV.x\\x20+\\x20fHue;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//hue\\x20色度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.y\\x20=\\x20fragHSV.y\\x20*\\x20(fSaturation\\x20+\\x201.0);\\x20\\x20\\x20\\x20//saturation\\x20饱和度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20hsv2rgb(fragHSV);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fBrightness\\x20>\\x200.0)\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//brightness\\x20亮度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20(1.0\\x20-\\x20fragRGB)\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20fragRGB\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tempContrast\\x20=\\x20fContrast\\x20>\\x200.0\\x20?\\x20fContrast\\x20*\\x2010.0\\x20:\\x20fContrast;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20((fragRGB\\x20-\\x200.5)\\x20*\\x20max(tempContrast\\x20+\\x201.0,\\x200.0))\\x20+\\x200.5;\\x20\\x20\\x20\\x20\\x20\\x20//contrast\\x20对比度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(fragRGB,\\x201.0);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(rgb,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a}\\x0a'),this['b3DPort']=!0x1;break;case _0x24b5aa['SR_DE_FISH_ORIGINAL']:_0x1bad3a=_0x5a101a,_0x55cbfc='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fRX1;\\x0auniform\\x20float\\x20fRX2;\\x0auniform\\x20float\\x20fRY1;\\x0auniform\\x20float\\x20fRY2;\\x0auniform\\x20int\\x20bBlack;\\x20\\x0auniform\\x20int\\x20bCut;\\x0a\\x0avoid\\x20main()\\x0a{\\x20\\x0a\\x09float\\x20r,g,b;\\x0a\\x09vec4\\x20origin;\\x0a\\x0a\\x09float\\x20\\x20w;\\x0a\\x09float\\x20\\x20h;\\x0a\\x09float\\x20\\x20fCenterX;\\x0a\\x09float\\x20\\x20fCenterY;\\x0a\\x09float\\x20\\x20fRadius;\\x0a\\x09w\\x20=\\x201.0;\\x0a\\x09h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x09fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x09fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x09fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x09float\\x20\\x20leftCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x09float\\x20\\x20topCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20bottomCut\\x20=\\x201.0;\\x0a\\x09if(bCut\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09if(fRX1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09leftCut\\x20=\\x20fRX1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRX2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09rightCut\\x20=\\x20fRX2;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09topCut\\x20=\\x20fRY1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09bottomCut\\x20=\\x20fRY2;\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x09origin.s\\x20=\\x20v_uv.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x09origin.t\\x20=\\x20v_uv.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x0a\\x09r\\x20=\\x20texture2D(texture,\\x20origin.st).r;\\x20\\x0a\\x09g\\x20=\\x20texture2D(texture,\\x20origin.st).g;\\x20\\x0a\\x09b\\x20=\\x20texture2D(texture,\\x20origin.st).b;\\x20\\x0a\\x0a\\x09if(bBlack\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09float\\x20tmpX,\\x20tmpY;\\x0a\\x09\\x09tmpX\\x20=\\x20origin.s\\x20*\\x20w;\\x20\\x0a\\x09\\x09tmpY\\x20=\\x20origin.t\\x20*\\x20h;\\x20\\x0a\\x09\\x09float\\x20d2\\x20=\\x20(tmpX-fCenterX)*(tmpX-fCenterX)\\x20+\\x20(tmpY-fCenterY)*(tmpY-fCenterY);\\x0a\\x09\\x09if(d2\\x20>\\x20fRadius*fRadius)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09r\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09g\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09b\\x20=\\x200.0;\\x20\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x0a\\x09gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x0a',this['b3DPort']=!0x1;break;case _0x24b5aa['SR_DE_FISH_PTZ_CEILING']:_0x1bad3a=_0x5a101a,_0x55cbfc='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x0auniform\\x20float\\x20fVAngleCos;\\x0auniform\\x20float\\x20fVAngleSin;\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x200.5\\x20-\\x20v_uv.t;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(-(origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x24b5aa['SR_DE_FISH_PTZ_FLOOR']:_0x1bad3a=_0x5a101a,_0x55cbfc='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20((origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x24b5aa['SR_DE_FISH_PTZ_WALL']:_0x1bad3a=_0x5a101a,_0x55cbfc='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin3;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z3;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20origin3.s\\x20=\\x20origin2.s*fHAngleCos\\x20+\\x20z2*fHAngleSin\\x20;\\x0a\\x20\\x20\\x20\\x20origin3.t\\x20=\\x20origin2.y;\\x0a\\x20\\x20\\x20\\x20z3\\x20=\\x20z2*fHAngleCos\\x20-\\x20origin2.x*fHAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t\\x20+\\x20z3*z3);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20(tmp*origin3.s\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(tmp*origin3.t\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']:_0x1bad3a=_0x5a101a,_0x55cbfc='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20v_uv.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r,\\x20g,\\x20b,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']:_0x1bad3a=_0x5a101a,_0x55cbfc='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20newpp.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']:_0x1bad3a=_0x5a101a,_0x55cbfc='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20v_uv.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']:_0x1bad3a=_0x5a101a,_0x55cbfc='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20newpp.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:_0x1bad3a=_0x5a101a,_0x55cbfc='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20defaultTopCut\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20defaultBottomCut\\x20=\\x200.9;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20leftCut\\x20=\\x200.0;\\x20\\x20\\x20\\x20///<当图像中圆不完整时需要切掉无图像部分,即使图像完整,为了效果,也要切掉上下固定的一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20topCut\\x20=\\x20defaultTopCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20bottomCut\\x20=\\x20defaultBottomCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20leftCut\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20rightCut\\x20=\\x201.0\\x20-\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20defaultTopCut)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20topCut\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20topCut\\x20=\\x20defaultTopCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x201.0\\x20-\\x20defaultBottomCut)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20bottomCut\\x20=\\x201.0\\x20-\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20bottomCut\\x20=\\x20defaultBottomCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20v_uv.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20v_uv.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmpx\\x20=\\x20origin.s\\x20*\\x202.0\\x20*\\x20fRadius\\x20+\\x20fCenterX\\x20-\\x20fRadius;\\x20///<纹理坐标转化为原图上的实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmpy\\x20=\\x20origin.t\\x20*\\x202.0\\x20*\\x20fRadius\\x20+\\x20fCenterY\\x20-\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20sqrt(fRadius*fRadius\\x20-\\x20(tmpy-fCenterY)*(tmpy-fCenterY));\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20((tmpx-fCenterX)\\x20*\\x20d\\x20/\\x20fRadius\\x20+\\x20fCenterX)\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20tmpy\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x24b5aa['SR_DE_FISH_SEMISPHERE']:case _0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']:case _0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']:case _0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x100003==_0x24b5aa['SR_DE_FISH_SEMISPHERE']&&(this['bCullBack']=!0x0),_0x1bad3a='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20xy;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec2\\x20uv;\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matProj;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matView;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20matProj\\x20*\\x20matView\\x20*\\x20xy;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v_uv\\x20=\\x20uv;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v_uv.y\\x20=\\x201.0\\x20-\\x20uv.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x55cbfc='\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x0;break;default:return _0x2a6293;}var _0x392145=this['CompileProgram'](_0x1bad3a,_0x55cbfc);if(_0x392145<=0x0)return _0x2bc1a4;this['videoShaderProgram']=_0x392145;var _0x3bbdbe=null,_0x558878=null,_0x9ad3d1=_0x1b3061;if(0x0==this['b3DPort'])_0x3bbdbe=new Float32Array([-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,0x1,0x0,0x1,-0x1,0x0]),_0x558878=new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1]);else{var _0x16b6be={},_0x4a0389=!0x1;if(null==this['pFishParamManager'])return _0x1f1f19;for(var _0x1ad691=0x0;_0x1ad691<_0x33feef;++_0x1ad691)if(_0x1ad691!=_0x3f91bf&&_0x1b3061==this['pFishParamManager']['GetRenderParam'](_0x1ad691,_0x16b6be)){_0x4a0389=!0x0;break;}var _0x212a84=0x0,_0x17df03=0x1,_0x259840=0x0,_0x2bad03=0x1;if(0x1==_0x4a0389&&(_0x212a84=_0x16b6be['fRXLeft'],_0x17df03=_0x16b6be['fRXRight'],_0x259840=_0x16b6be['fRYTop'],_0x2bad03=_0x16b6be['fRYBottom']),_0x100003==_0x24b5aa['SR_DE_FISH_SEMISPHERE'])_0x9ad3d1=this['_CreateSemiSphere'](_0x212a84,_0x17df03,_0x259840,_0x2bad03),_0x3bbdbe=this['pSemiSpherePos'],_0x558878=this['pSemiSphereTex'];else{if(_0x100003==_0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']||_0x100003==_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR'])_0x9ad3d1=this['_CreateCylinder'](_0x100003,_0x212a84,_0x17df03,_0x259840,_0x2bad03,0x2,0x2),_0x3bbdbe=this['pCylinderPos'],_0x558878=this['pCylinderTex'];else{if(_0x100003!=_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']&&_0x100003!=_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])return _0x2a6293;0x0==_0x4a0389?_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x100003?(_0x212a84=0.05,_0x17df03=0.95,_0x259840=-0.3,_0x2bad03=1.3):_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x100003&&(_0x212a84=-0.16,_0x17df03=1.16,_0x259840=0.005,_0x2bad03=0.995):_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x100003?(_0x16b6be['fRYTop']>0x0||_0x16b6be['fRYBottom']<0x1)&&(_0x212a84=0.05,_0x17df03=0.95,_0x259840=-0.3,_0x2bad03=1.3):_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x100003&&(_0x16b6be['fRXLeft']>0x0||_0x16b6be['fRXRight']<0x1)&&(_0x212a84=-0.16,_0x17df03=1.16,_0x259840=0.005,_0x2bad03=0.995),_0x9ad3d1=this['_CreateArcSphere'](_0x100003,_0x212a84,_0x17df03,_0x259840,_0x2bad03),_0x3bbdbe=this['pArcSpherePos'],_0x558878=this['pArcSphereTex'];}}if(_0x9ad3d1!=_0x1b3061)return _0x9ad3d1;var _0x4d20b0={};if((_0x9ad3d1=this['pFishParamManager']['GetFishParam'](this['nFECPort'],_0x4d20b0))!=_0x1b3061)return _0x9ad3d1;if(_0x4d20b0['nFishParamType']=_0xef11b,_0x4d20b0['fRXLeft']=_0x212a84,_0x4d20b0['fRXRight']=_0x17df03,_0x4d20b0['fRYTop']=_0x259840,_0x4d20b0['fRYBottom']=_0x2bad03,this['pFishParamManager']['SetFishParam'](this['nFECPort'],_0x4d20b0),_0x9ad3d1!=_0x1b3061)return _0x9ad3d1;}if(null==_0x3bbdbe||null==_0x558878)return _0x2a6293;var _0x4f9e59=this['ctx']['createBuffer']();this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x4f9e59),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x3bbdbe,this['ctx']['STATIC_DRAW']),this['vertexPosBuffer']=_0x4f9e59;var _0x7d03b1=this['ctx']['createBuffer']();return this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x7d03b1),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x558878,this['ctx']['STATIC_DRAW']),this['texturePosBuffer']=_0x7d03b1,this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),0x0==this['b3DPort']&&(_0x3bbdbe=null,_0x558878=null),_0x9ad3d1=this['InitCamera'](_0x100003),_0x1b3061!=_0x9ad3d1?_0x9ad3d1:(this['enDisplayEffect']=_0x100003,this['nFECPort']);}},{'key':'SR_DelSubPort','value':function(_0x3e8207){return null==this['ctx']?_0x1f1f19:(null!=this['pFishParamManager']&&this['nFECPort']==_0x3e8207&&this['pFishParamManager']['FreeFECPort'](this['nFECPort']),this['enDisplayEffect']=_0x24b5aa['SR_DE_NULL'],0x0!=this['videoShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['videoShaderProgram']),this['videoShaderProgram']=0x0),0x0!=this['vertexPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['vertexPosBuffer']),this['vertexPosBuffer']=0x0),0x0!=this['texturePosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['texturePosBuffer']),this['texturePosBuffer']=0x0),this['nMaxPointNum']=0x0,this['pLinePosVertices']=null,this['pLineClrVertices']=null,0x0!=this['glLinePosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glLinePosBuffer']),this['glLinePosBuffer']=0x0),0x0!=this['glLineTexBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glLineTexBuffer']),this['glLineTexBuffer']=0x0),this['nLineTriangleNum']=0x0,0x0!=this['nLineShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nLineShaderProgram']),this['nLineShaderProgram']=0x0),this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=0x0,0x0!=this['glBlockPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glBlockPosBuffer']),this['glBlockPosBuffer']=0x0),0x0!=this['glBlockClrBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glBlockClrBuffer']),this['glBlockClrBuffer']=0x0),0x0!=this['nBlockShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nBlockShaderProgram']),this['nBlockShaderProgram']=0x0),this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,0x0!=this['nFontColorTexture']&&null!=this['ctx']&&(this['ctx']['deleteTexture'](this['nFontColorTexture']),this['nFontColorTexture']=0x0),this['pFontColorBuffer']=0x0,0x0!=this['nFontShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nFontShaderProgram']),this['nFontShaderProgram']=0x0),0x0!=this['nCaptureRTTex']&&(this['ctx']['deleteTexture'](this['nCaptureRTTex']),this['nCaptureRTTex']=0x0),0x0!=this['nCaptureFBO']&&(this['ctx']['deleteFramebuffer'](this['nCaptureFBO']),this['nCaptureFBO']=0x0),0x0!=this['nCaptureDepthbuffer']&&(this['ctx']['deleteRenderbuffer'](this['nCaptureDepthbuffer']),this['nCaptureDepthbuffer']=0x0),this['bCaptureResInit']=!0x1,this['pSemiSpherePos']=null,this['pSemiSphereTex']=null,this['nSemiSpherePosNum']=0x0,this['nSemiSpherePosSize']=0x0,this['nSemiSphereTexSize']=0x0,this['pCylinderPos']=null,this['pCylinderTex']=null,this['nCylinderPosNum']=0x0,this['nCylinderPosSize']=0x0,this['nCylinderTexSize']=0x0,this['fCylinderHeight']=0x0,this['fCylinderRadius']=0x0,this['pArcSpherePos']=null,this['pArcSphereTex']=null,this['nArcSpherePosNum']=0x0,this['nArcSpherePosSize']=0x0,this['nArcSphereTexSize']=0x0,this['b3DPort']=!0x1,this['pCamera']=null,this['fRotateX']=0x0,this['fRotateY']=0x0,this['fScale']=0x0,this['pfuncCBIn']=null,this['pfuncCBOut']=null,this['pUserIn']=null,this['pUserOut']=null,this['ctx']['disable'](this['ctx']['CULL_FACE']),this['ctx']['disable'](this['ctx']['DEPTH_TEST']),_0x1b3061);}},{'key':'SR_GetFishParam','value':function(_0x1464bc){return null==_0x1464bc?_0x4a3918:null==this['pFishParamManager']?_0x1f1f19:this['pFishParamManager']['GetFishParam'](this['nFECPort'],_0x1464bc);}},{'key':'SR_SetFishParam','value':function(_0x258743){return null==_0x258743?_0x4a3918:null==this['pFishParamManager']?_0x1f1f19:this['pFishParamManager']['SetFishParam'](this['nFECPort'],_0x258743);}},{'key':'SR_SetDisplayRect','value':function(_0x46a2b9,_0x492af0,_0x4b3531,_0x4d2a83,_0x5beca4){if(null==this['ctx'])return _0x1f1f19;var _0x23bfa7=_0x46a2b9,_0x3e38a1=_0x492af0,_0x18aee1=_0x46a2b9+_0x4b3531,_0x43c6f0=_0x492af0+_0x4d2a83,_0x21efdd=null,_0x110a80=null;switch(_0x5beca4){case _0x24d6ec:if(this['frameDisplayWidth']>0x0&&this['frameDisplayHeight']>0x0){if(this['fSrcUseLeft']=_0x23bfa7/this['frameDisplayWidth'],this['fSrcUseLeft']<0x0?this['fSrcUseLeft']=0x0:this['fSrcUseLeft']>0x1&&(this['fSrcUseLeft']=0x1),this['fSrcUseTop']=_0x3e38a1/this['frameDisplayHeight'],this['fSrcUseTop']<0x0?this['fSrcUseTop']=0x0:this['fSrcUseTop']>0x1&&(this['fSrcUseTop']=0x1),this['fSrcUseRight']=_0x18aee1/this['frameDisplayWidth'],this['fSrcUseRight']<0x0?this['fSrcUseRight']=0x0:this['fSrcUseRight']>0x1&&(this['fSrcUseRight']=0x1),this['fSrcUseBottom']=_0x43c6f0/this['frameDisplayHeight'],this['fSrcUseBottom']<0x0?this['fSrcUseBottom']=0x0:this['fSrcUseBottom']>0x1&&(this['fSrcUseBottom']=0x1),this['fSrcUseLeft']>=this['fSrcUseRight']||this['fSrcUseTop']>=this['fSrcUseBottom'])return _0x4a3918;_0x21efdd=new Float32Array([this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseBottom']]);}else _0x21efdd=new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1]);this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']),this['ctx']['bufferSubData'](this['ctx']['ARRAY_BUFFER'],0x0,_0x21efdd),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),_0x21efdd=null;break;case _0x2b52b0:if(this['frameDisplayWidth']>0x0&&this['frameDisplayHeight']>0x0){if(this['fDstUseLeft']=_0x23bfa7/this['frameDisplayWidth'],this['fDstUseLeft']<0x0?this['fDstUseLeft']=0x0:this['fDstUseLeft']>0x1&&(this['fDstUseLeft']=0x1),this['fDstUseTop']=_0x3e38a1/this['frameDisplayHeight'],this['fDstUseTop']<0x0?this['fDstUseTop']=0x0:this['fDstUseTop']>0x1&&(this['fDstUseTop']=0x1),this['fDstUseRight']=_0x18aee1/this['frameDisplayWidth'],this['fDstUseRight']<0x0?this['fDstUseRight']=0x0:this['fDstUseRight']>0x1&&(this['fDstUseRight']=0x1),this['fDstUseBottom']=_0x43c6f0/this['frameDisplayHeight'],this['fDstUseBottom']<0x0?this['fDstUseBottom']=0x0:this['fDstUseBottom']>0x1&&(this['fDstUseBottom']=0x1),this['fDstUseLeft']>=this['fDstUseRight']||this['fDstUseTop']>=this['fDstUseBottom'])return _0x4a3918;(_0x110a80=new Float32Array(0xc))[0x0]=0x2*this['fDstUseLeft']-0x1,_0x110a80[0x1]=0x1-0x2*this['fDstUseBottom'],_0x110a80[0x2]=0x0,_0x110a80[0x3]=0x2*this['fDstUseLeft']-0x1,_0x110a80[0x4]=0x1-0x2*this['fDstUseTop'],_0x110a80[0x5]=0x0,_0x110a80[0x6]=0x2*this['fDstUseRight']-0x1,_0x110a80[0x7]=0x1-0x2*this['fDstUseTop'],_0x110a80[0x8]=0x0,_0x110a80[0x9]=0x2*this['fDstUseRight']-0x1,_0x110a80[0xa]=0x1-0x2*this['fDstUseBottom'],_0x110a80[0xb]=0x0,this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']),this['ctx']['bufferSubData'](this['ctx']['ARRAY_BUFFER'],0x0,_0x110a80),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),_0x110a80=null;}break;default:return _0x2a6293;}return _0x1b3061;}},{'key':'SR_Destroy','value':function(){if(null==this['ctx'])return _0x1f1f19;this['frameDisplayWidth']=0x0,this['frameDisplayHeight']=0x0,this['pFrameData']=null;for(var _0x3b95f8=0x0;_0x3b95f8<this['nTextureNum'];_0x3b95f8++)0x0!=this['nSurfaceTexture'][_0x3b95f8]&&null!=this['ctx']&&(this['ctx']['deleteTexture'](this['nSurfaceTexture'][_0x3b95f8]),this['nSurfaceTexture'][_0x3b95f8]=0x0);return this['SR_DelSubPort'](this['nFECPort']),this['ctx']['getExtension']('WEBGL_lose_context')['loseContext'](),this['ctx']=null,this['onlySupportedWebGL1']=!0x1,this['bAntialias']=!0x1,this['bRecreateTex']=!0x0,this['pFishParamManager']=null,_0x1b3061;}},{'key':'SR_SetCanvasSize','value':function(_0x2bc7c1,_0x2d1bec){return this['canvas']['width']=_0x2bc7c1,this['canvas']['height']=_0x2d1bec,_0x1b3061;}},{'key':'SR_GetCanvasSize','value':function(){return console['log']('canvas\\x20width:'+this['canvas']['width']+',height:'+this['canvas']['height']),_0x1b3061;}},{'key':'SR_SetAntialias','value':function(_0x3ae7b6){return 0x1==this['onlySupportedWebGL1']?_0x2a6293:(this['bAntialias']!=_0x3ae7b6&&(this['bRecreateTex']=!0x0,this['bAntialias']=_0x3ae7b6),_0x1b3061);}},{'key':'SR_SetPTZDisplayMode','value':function(_0x52da8b){return null==this['pFishParamManager']?_0x1f1f19:this['pFishParamManager']['SetPTZDisplayMode'](_0x52da8b);}},{'key':'SR_SetFishParamManager','value':function(_0x2f6af9){return null!=this['pFishParamManager']?_0x2a6293:(this['pFishParamManager']=_0x2f6af9,_0x1b3061);}},{'key':'_CreateSemiSphere','value':function(_0x3822c2,_0x4f690f,_0x3a0a18,_0x3ba39a){if(null!=this['pSemiSpherePos']||null!=this['pSemiSphereTex'])return _0x1f1f19;this['pSemiSpherePos']=new Float32Array(0xa8c0),this['pSemiSphereTex']=new Float32Array(0x7080);for(var _0xfca460=(_0x4f690f-_0x3822c2)/(_0x3ba39a-_0x3a0a18),_0x22131e=(_0x4f690f-_0x3822c2)/0x2*0x1,_0x49c1d9=6.2831852/0x3c,_0x399253=0.0392699075,_0x204c73=0x0,_0xd11696=0x0,_0x3d5cb6=0x0,_0x2f78d0=0x0;_0x2f78d0<0x3c;++_0x2f78d0)for(var _0x5cfda1=0x0;_0x5cfda1<0x28;++_0x5cfda1){var _0x4e5186=_0x2f78d0*_0x49c1d9;0x0==_0x2f78d0&&(_0x204c73=_0x4e5186);var _0x3d5139=0x3b==_0x2f78d0?_0x204c73:(_0x2f78d0+0x1)*_0x49c1d9,_0x564eac=-_0x5cfda1*_0x399253,_0x1ce3b9=-(_0x5cfda1+0x1)*_0x399253,_0x3255ac=void 0x0,_0x16b006=void 0x0;this['pSemiSpherePos'][_0xd11696]=-0x1*Math['cos'](_0x564eac)*Math['cos'](_0x4e5186),this['pSemiSpherePos'][_0xd11696+0x1]=0x1*Math['sin'](_0x564eac),this['pSemiSpherePos'][_0xd11696+0x2]=-0x1*Math['cos'](_0x564eac)*Math['sin'](_0x4e5186),_0x16b006=0.5-0.5*(0x1+_0x564eac/1.5707963)*Math['sin'](_0x4e5186),_0x3255ac=0.5-0.5*(0x1+_0x564eac/1.5707963)*Math['cos'](_0x4e5186),this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x3255ac*_0x22131e+0x1*_0x3822c2)/0x1,this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x16b006*_0x22131e+_0x3a0a18*_0xfca460)/_0xfca460,_0xd11696+=0x3,this['pSemiSpherePos'][_0xd11696]=-0x1*Math['cos'](_0x1ce3b9)*Math['cos'](_0x4e5186),this['pSemiSpherePos'][_0xd11696+0x1]=0x1*Math['sin'](_0x1ce3b9),this['pSemiSpherePos'][_0xd11696+0x2]=-0x1*Math['cos'](_0x1ce3b9)*Math['sin'](_0x4e5186),_0x16b006=0.5-0.5*(0x1+_0x1ce3b9/1.5707963)*Math['sin'](_0x4e5186),_0x3255ac=0.5-0.5*(0x1+_0x1ce3b9/1.5707963)*Math['cos'](_0x4e5186),this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x3255ac*_0x22131e+0x1*_0x3822c2)/0x1,this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x16b006*_0x22131e+_0x3a0a18*_0xfca460)/_0xfca460,_0xd11696+=0x3,this['pSemiSpherePos'][_0xd11696]=-0x1*Math['cos'](_0x564eac)*Math['cos'](_0x3d5139),this['pSemiSpherePos'][_0xd11696+0x1]=0x1*Math['sin'](_0x564eac),this['pSemiSpherePos'][_0xd11696+0x2]=-0x1*Math['cos'](_0x564eac)*Math['sin'](_0x3d5139),_0x16b006=0.5-0.5*(0x1+_0x564eac/1.5707963)*Math['sin'](_0x3d5139),_0x3255ac=0.5-0.5*(0x1+_0x564eac/1.5707963)*Math['cos'](_0x3d5139),this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x3255ac*_0x22131e+0x1*_0x3822c2)/0x1,this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x16b006*_0x22131e+_0x3a0a18*_0xfca460)/_0xfca460,_0xd11696+=0x3,this['pSemiSpherePos'][_0xd11696]=-0x1*Math['cos'](_0x564eac)*Math['cos'](_0x3d5139),this['pSemiSpherePos'][_0xd11696+0x1]=0x1*Math['sin'](_0x564eac),this['pSemiSpherePos'][_0xd11696+0x2]=-0x1*Math['cos'](_0x564eac)*Math['sin'](_0x3d5139),_0x16b006=0.5-0.5*(0x1+_0x564eac/1.5707963)*Math['sin'](_0x3d5139),_0x3255ac=0.5-0.5*(0x1+_0x564eac/1.5707963)*Math['cos'](_0x3d5139),this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x3255ac*_0x22131e+0x1*_0x3822c2)/0x1,this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x16b006*_0x22131e+_0x3a0a18*_0xfca460)/_0xfca460,_0xd11696+=0x3,this['pSemiSpherePos'][_0xd11696]=-0x1*Math['cos'](_0x1ce3b9)*Math['cos'](_0x4e5186),this['pSemiSpherePos'][_0xd11696+0x1]=0x1*Math['sin'](_0x1ce3b9),this['pSemiSpherePos'][_0xd11696+0x2]=-0x1*Math['cos'](_0x1ce3b9)*Math['sin'](_0x4e5186),_0x16b006=0.5-0.5*(0x1+_0x1ce3b9/1.5707963)*Math['sin'](_0x4e5186),_0x3255ac=0.5-0.5*(0x1+_0x1ce3b9/1.5707963)*Math['cos'](_0x4e5186),this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x3255ac*_0x22131e+0x1*_0x3822c2)/0x1,this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x16b006*_0x22131e+_0x3a0a18*_0xfca460)/_0xfca460,_0xd11696+=0x3,this['pSemiSpherePos'][_0xd11696]=-0x1*Math['cos'](_0x1ce3b9)*Math['cos'](_0x3d5139),this['pSemiSpherePos'][_0xd11696+0x1]=0x1*Math['sin'](_0x1ce3b9),this['pSemiSpherePos'][_0xd11696+0x2]=-0x1*Math['cos'](_0x1ce3b9)*Math['sin'](_0x3d5139),_0x16b006=0.5-0.5*(0x1+_0x1ce3b9/1.5707963)*Math['sin'](_0x3d5139),_0x3255ac=0.5-0.5*(0x1+_0x1ce3b9/1.5707963)*Math['cos'](_0x3d5139),this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x3255ac*_0x22131e+0x1*_0x3822c2)/0x1,this['pSemiSphereTex'][_0x3d5cb6++]=(0x2*_0x16b006*_0x22131e+_0x3a0a18*_0xfca460)/_0xfca460,_0xd11696+=0x3;}return this['nSemiSpherePosNum']=_0xd11696/0x3,this['nSemiSpherePosSize']=0x3,this['nSemiSphereTexSize']=0x2,_0x1b3061;}},{'key':'_CreateCylinder','value':function(_0x560a56,_0x57a1e2,_0x654b01,_0x274e2f,_0x33042a,_0x23323b,_0x42c4ef){if(null!=this['pCylinderPos']||null!=this['pCylinderTex'])return _0x1f1f19;if(Math['abs'](_0x23323b-0x0)<_0x254b59)this['fCylinderHeight']=0x2;else{if(_0x23323b<0.5||_0x23323b>0x6)return _0x4a3918;this['fCylinderHeight']=_0x23323b;}if(Math['abs'](_0x42c4ef-0x0)<_0x254b59)this['fCylinderRadius']=_0x560a56==_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']||_0x560a56==_0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']?0x2:0x1;else{if(_0x42c4ef<0.5||_0x42c4ef>0x4)return _0x4a3918;this['fCylinderRadius']=_0x42c4ef;}if(this['pCylinderPos']=new Float32Array(0xa8c0),this['pCylinderTex']=new Float32Array(0x7080),null==this['pCylinderPos']||null==this['pCylinderTex'])return this['pCylinderPos']=null,this['pCylinderTex']=null,_0x431a2e;for(var _0x5642a3=(_0x654b01-_0x57a1e2)/(_0x33042a-_0x274e2f),_0x5b7bb3=(_0x654b01-_0x57a1e2)/0x2*0x1,_0x5653b0=6.2831852/0x3c,_0x29ca80=this['fCylinderHeight']/_0x2c9909,_0x21e86d=0x0,_0x5b0c9f=0x0,_0x2be08b=0x0;_0x2be08b<0x3c;++_0x2be08b)for(var _0x38a445=0x0;_0x38a445<_0x2c9909;++_0x38a445){var _0x240c3a=_0x2be08b*_0x5653b0,_0x3883f4=(_0x2be08b+0x1)*_0x5653b0,_0x3ba9a4=void 0x0,_0x227295=void 0x0;this['pCylinderPos'][_0x21e86d]=-this['fCylinderRadius']*Math['sin'](_0x240c3a),this['pCylinderPos'][_0x21e86d+0x1]=this['fCylinderHeight']/0x2-_0x38a445*_0x29ca80,this['pCylinderPos'][_0x21e86d+0x2]=-this['fCylinderRadius']*Math['cos'](_0x240c3a),_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']==_0x560a56||_0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x560a56?(_0x3ba9a4=0.5+(0.1+0.01*_0x38a445)*Math['sin'](_0x240c3a),_0x227295=0.5+(0.1+0.01*_0x38a445)*Math['cos'](_0x240c3a)):(_0x3ba9a4=0.5-(0.5-0.01*_0x38a445)*Math['sin'](_0x240c3a),_0x227295=0.5+(0.5-0.01*_0x38a445)*Math['cos'](_0x240c3a)),this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x3ba9a4*_0x5b7bb3+0x1*_0x57a1e2)/0x1,this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x227295*_0x5b7bb3+_0x274e2f*_0x5642a3)/_0x5642a3,_0x21e86d+=0x3,this['pCylinderPos'][_0x21e86d]=-this['fCylinderRadius']*Math['sin'](_0x240c3a),this['pCylinderPos'][_0x21e86d+0x1]=this['fCylinderHeight']/0x2-(_0x38a445+0x1)*_0x29ca80,this['pCylinderPos'][_0x21e86d+0x2]=-this['fCylinderRadius']*Math['cos'](_0x240c3a),_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']==_0x560a56||_0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x560a56?(_0x3ba9a4=0.5+(0.1+0.01*(_0x38a445+0x1))*Math['sin'](_0x240c3a),_0x227295=0.5+(0.1+0.01*(_0x38a445+0x1))*Math['cos'](_0x240c3a)):(_0x3ba9a4=0.5-(0.5-0.01*(_0x38a445+0x1))*Math['sin'](_0x240c3a),_0x227295=0.5+(0.5-0.01*(_0x38a445+0x1))*Math['cos'](_0x240c3a)),this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x3ba9a4*_0x5b7bb3+0x1*_0x57a1e2)/0x1,this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x227295*_0x5b7bb3+_0x274e2f*_0x5642a3)/_0x5642a3,_0x21e86d+=0x3,this['pCylinderPos'][_0x21e86d]=-this['fCylinderRadius']*Math['sin'](_0x3883f4),this['pCylinderPos'][_0x21e86d+0x1]=this['fCylinderHeight']/0x2-_0x38a445*_0x29ca80,this['pCylinderPos'][_0x21e86d+0x2]=-this['fCylinderRadius']*Math['cos'](_0x3883f4),_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']==_0x560a56||_0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x560a56?(_0x3ba9a4=0.5+(0.1+0.01*_0x38a445)*Math['sin'](_0x3883f4),_0x227295=0.5+(0.1+0.01*_0x38a445)*Math['cos'](_0x3883f4)):(_0x3ba9a4=0.5-(0.5-0.01*_0x38a445)*Math['sin'](_0x3883f4),_0x227295=0.5+(0.5-0.01*_0x38a445)*Math['cos'](_0x3883f4)),this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x3ba9a4*_0x5b7bb3+0x1*_0x57a1e2)/0x1,this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x227295*_0x5b7bb3+_0x274e2f*_0x5642a3)/_0x5642a3,_0x21e86d+=0x3,this['pCylinderPos'][_0x21e86d]=-this['fCylinderRadius']*Math['sin'](_0x3883f4),this['pCylinderPos'][_0x21e86d+0x1]=this['fCylinderHeight']/0x2-_0x38a445*_0x29ca80,this['pCylinderPos'][_0x21e86d+0x2]=-this['fCylinderRadius']*Math['cos'](_0x3883f4),_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']==_0x560a56||_0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x560a56?(_0x3ba9a4=0.5+(0.1+0.01*_0x38a445)*Math['sin'](_0x3883f4),_0x227295=0.5+(0.1+0.01*_0x38a445)*Math['cos'](_0x3883f4)):(_0x3ba9a4=0.5-(0.5-0.01*_0x38a445)*Math['sin'](_0x3883f4),_0x227295=0.5+(0.5-0.01*_0x38a445)*Math['cos'](_0x3883f4)),this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x3ba9a4*_0x5b7bb3+0x1*_0x57a1e2)/0x1,this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x227295*_0x5b7bb3+_0x274e2f*_0x5642a3)/_0x5642a3,_0x21e86d+=0x3,this['pCylinderPos'][_0x21e86d]=-this['fCylinderRadius']*Math['sin'](_0x240c3a),this['pCylinderPos'][_0x21e86d+0x1]=this['fCylinderHeight']/0x2-(_0x38a445+0x1)*_0x29ca80,this['pCylinderPos'][_0x21e86d+0x2]=-this['fCylinderRadius']*Math['cos'](_0x240c3a),_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']==_0x560a56||_0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x560a56?(_0x3ba9a4=0.5+(0.1+0.01*(_0x38a445+0x1))*Math['sin'](_0x240c3a),_0x227295=0.5+(0.1+0.01*(_0x38a445+0x1))*Math['cos'](_0x240c3a)):(_0x3ba9a4=0.5-(0.5-0.01*(_0x38a445+0x1))*Math['sin'](_0x240c3a),_0x227295=0.5+(0.5-0.01*(_0x38a445+0x1))*Math['cos'](_0x240c3a)),this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x3ba9a4*_0x5b7bb3+0x1*_0x57a1e2)/0x1,this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x227295*_0x5b7bb3+_0x274e2f*_0x5642a3)/_0x5642a3,_0x21e86d+=0x3,this['pCylinderPos'][_0x21e86d]=-this['fCylinderRadius']*Math['sin'](_0x3883f4),this['pCylinderPos'][_0x21e86d+0x1]=this['fCylinderHeight']/0x2-(_0x38a445+0x1)*_0x29ca80,this['pCylinderPos'][_0x21e86d+0x2]=-this['fCylinderRadius']*Math['cos'](_0x3883f4),_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']==_0x560a56||_0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x560a56?(_0x3ba9a4=0.5+(0.1+0.01*(_0x38a445+0x1))*Math['sin'](_0x3883f4),_0x227295=0.5+(0.1+0.01*(_0x38a445+0x1))*Math['cos'](_0x3883f4)):(_0x3ba9a4=0.5-(0.5-0.01*(_0x38a445+0x1))*Math['sin'](_0x3883f4),_0x227295=0.5+(0.5-0.01*(_0x38a445+0x1))*Math['cos'](_0x3883f4)),this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x3ba9a4*_0x5b7bb3+0x1*_0x57a1e2)/0x1,this['pCylinderTex'][_0x5b0c9f++]=(0x2*_0x227295*_0x5b7bb3+_0x274e2f*_0x5642a3)/_0x5642a3,_0x21e86d+=0x3;}return this['nCylinderPosNum']=_0x21e86d/0x3,this['nCylinderPosSize']=0x3,this['nCylinderTexSize']=0x2,_0x1b3061;}},{'key':'_CreateArcSphere','value':function(_0x5f5ca7,_0x4fc936,_0x3da2b0,_0x231ff5,_0x489971){if(null!=this['pArcSpherePos']||null!=this['pArcSphereTex'])return _0x1f1f19;if(_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']){if(_0x231ff5>0x0||_0x489971<0x1)return SR_ERR_PARAM;}else{if(_0x5f5ca7!=_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])return _0x2a6293;if(_0x4fc936>0x0||_0x3da2b0<0x1)return SR_ERR_PARAM;}this['fImageWidth']=0x1,this['fImageHeight']=(_0x3da2b0-_0x4fc936)/(_0x489971-_0x231ff5),this['fTexCenterX']=(_0x4fc936+_0x3da2b0)/0x2*this['fImageWidth'],this['fTexCenterY']=(_0x231ff5+_0x489971)/0x2*this['fImageHeight'],this['fTexRadius']=(_0x3da2b0-_0x4fc936)/0x2*this['fImageWidth'];var _0x2273a7=0x19;if(null==this['pArcSphereTex']&&(this['pArcSphereTex']=new Float32Array(0x3960),null==this['pArcSphereTex']))return _0x431a2e;if(null==this['pArcSpherePos']&&(this['pArcSpherePos']=new Float32Array(0x5610),null==this['pArcSpherePos']))return _0x431a2e;var _0x10e362=new Float32Array(0x40);if(null==_0x10e362)return _0x431a2e;var _0xd4e379=_0x1b3061;if(_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?_0xd4e379=this['_ComputeLatitudeHorizontal'](_0x10e362,_0x2273a7,0x28,0x1):_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&(_0xd4e379=this['_ComputeLatitudeVertical'](_0x10e362,_0x2273a7,0x28,0x1)),_0x1b3061!=_0xd4e379)return this['pArcSpherePos']=null,this['pArcSphereTex']=null,_0xd4e379;this['fFirstLatitude']=_0x10e362[0xc],this['fLastLatitude']=_0x10e362[0x33];var _0x50e1d5=0x0,_0x22b07b=0x0,_0x4bec9d=new Float32Array(0x5);if(null==_0x4bec9d)return this['pArcSpherePos']=null,this['pArcSphereTex']=null,_0x431a2e;for(var _0x3ef922=_0x4d4446/0x18,_0x18d9bc=-0xc;_0x18d9bc<0xc;++_0x18d9bc)for(var _0x1a6a18=_0x18d9bc<0x0?-_0x18d9bc:_0x18d9bc,_0x11333e=_0x18d9bc<0x0?_0x1a6a18:_0x1a6a18+0x1,_0x3d1d5d=_0x18d9bc<0x0?0x40-0x2*(_0x1a6a18-0x1)-0x2:0x40-0x2*_0x1a6a18-0x2,_0x5e549d=0x0;_0x5e549d<_0x3d1d5d;++_0x5e549d,++_0x11333e)_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x3ef922*_0x18d9bc,_0x10e362[_0x11333e],_0x4bec9d):_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x3ef922*_0x18d9bc,_0x10e362[_0x11333e],_0x4bec9d),this['pArcSpherePos'][_0x50e1d5]=_0x4bec9d[0x0],this['pArcSpherePos'][_0x50e1d5+0x1]=_0x4bec9d[0x1],this['pArcSpherePos'][_0x50e1d5+0x2]=_0x4bec9d[0x2],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x3],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x4],_0x50e1d5+=0x3,_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x3ef922*(_0x18d9bc+0x1),_0x10e362[_0x11333e],_0x4bec9d):_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x3ef922*(_0x18d9bc+0x1),_0x10e362[_0x11333e],_0x4bec9d),this['pArcSpherePos'][_0x50e1d5]=_0x4bec9d[0x0],this['pArcSpherePos'][_0x50e1d5+0x1]=_0x4bec9d[0x1],this['pArcSpherePos'][_0x50e1d5+0x2]=_0x4bec9d[0x2],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x3],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x4],_0x50e1d5+=0x3,_0x18d9bc>=0x0&&0x0==_0x5e549d?_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x3ef922*_0x18d9bc,_0x10e362[_0x11333e-0x1],_0x4bec9d):_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x3ef922*_0x18d9bc,_0x10e362[_0x11333e-0x1],_0x4bec9d):_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x3ef922*(_0x18d9bc+0x1),_0x10e362[_0x11333e-0x1],_0x4bec9d):_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x3ef922*(_0x18d9bc+0x1),_0x10e362[_0x11333e-0x1],_0x4bec9d),this['pArcSpherePos'][_0x50e1d5]=_0x4bec9d[0x0],this['pArcSpherePos'][_0x50e1d5+0x1]=_0x4bec9d[0x1],this['pArcSpherePos'][_0x50e1d5+0x2]=_0x4bec9d[0x2],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x3],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x4],_0x50e1d5+=0x3,_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x3ef922*(_0x18d9bc+0x1),_0x10e362[_0x11333e],_0x4bec9d):_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x3ef922*(_0x18d9bc+0x1),_0x10e362[_0x11333e],_0x4bec9d),this['pArcSpherePos'][_0x50e1d5]=_0x4bec9d[0x0],this['pArcSpherePos'][_0x50e1d5+0x1]=_0x4bec9d[0x1],this['pArcSpherePos'][_0x50e1d5+0x2]=_0x4bec9d[0x2],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x3],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x4],_0x50e1d5+=0x3,_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x3ef922*_0x18d9bc,_0x10e362[_0x11333e],_0x4bec9d):_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x3ef922*_0x18d9bc,_0x10e362[_0x11333e],_0x4bec9d),this['pArcSpherePos'][_0x50e1d5]=_0x4bec9d[0x0],this['pArcSpherePos'][_0x50e1d5+0x1]=_0x4bec9d[0x1],this['pArcSpherePos'][_0x50e1d5+0x2]=_0x4bec9d[0x2],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x3],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x4],_0x50e1d5+=0x3,_0x18d9bc<0x0&&_0x5e549d==_0x3d1d5d-0x1?_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x3ef922*(_0x18d9bc+0x1),_0x10e362[_0x11333e+0x1],_0x4bec9d):_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x3ef922*(_0x18d9bc+0x1),_0x10e362[_0x11333e+0x1],_0x4bec9d):_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x3ef922*_0x18d9bc,_0x10e362[_0x11333e+0x1],_0x4bec9d):_0x5f5ca7==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x3ef922*_0x18d9bc,_0x10e362[_0x11333e+0x1],_0x4bec9d),this['pArcSpherePos'][_0x50e1d5]=_0x4bec9d[0x0],this['pArcSpherePos'][_0x50e1d5+0x1]=_0x4bec9d[0x1],this['pArcSpherePos'][_0x50e1d5+0x2]=_0x4bec9d[0x2],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x3],this['pArcSphereTex'][_0x22b07b++]=_0x4bec9d[0x4],_0x50e1d5+=0x3;return this['nArcSpherePosNum']=_0x50e1d5/0x3,this['nArcSpherePosSize']=0x3,this['nArcSphereTexSize']=0x2,_0x10e362=null,_0x4bec9d=null,_0x1b3061;}},{'key':'_ComputeIntersectionOfPlaneAndLongtitude','value':function(_0x501b47,_0x32fe63,_0x2ea18e){if(null==_0x501b47)return _0x4a3918;var _0x394e4e,_0x126b94=_0x501b47[0x1]*_0x2ea18e,_0x5074b7=_0x501b47[0x2]*_0x2ea18e*Math['sin'](_0x32fe63),_0x1d225d=-_0x501b47[0x3],_0xf88c1c=0x0,_0x190ad5=0x0;if(_0x501b47[0x1]>0x0){var _0x482283=_0x126b94*_0x126b94*_0x1d225d*_0x1d225d-(_0x126b94*_0x126b94+_0x5074b7*_0x5074b7)*(_0x1d225d*_0x1d225d-_0x5074b7*_0x5074b7);_0xf88c1c=(-_0x126b94*_0x1d225d-Math['sqrt'](_0x482283))/(_0x126b94*_0x126b94+_0x5074b7*_0x5074b7),_0x482283=_0x5074b7*_0x5074b7*_0x1d225d*_0x1d225d-(_0x126b94*_0x126b94+_0x5074b7*_0x5074b7)*(_0x1d225d*_0x1d225d-_0x126b94*_0x126b94),_0x190ad5=(-_0x5074b7*_0x1d225d+Math['sqrt'](_0x482283))/(_0x126b94*_0x126b94+_0x5074b7*_0x5074b7);}if(_0x501b47[0x1]<0x0){var _0x45f568=_0x126b94*_0x126b94*_0x1d225d*_0x1d225d-(_0x126b94*_0x126b94+_0x5074b7*_0x5074b7)*(_0x1d225d*_0x1d225d-_0x5074b7*_0x5074b7);_0xf88c1c=(-_0x126b94*_0x1d225d+Math['sqrt'](_0x45f568))/(_0x126b94*_0x126b94+_0x5074b7*_0x5074b7),_0x45f568=_0x5074b7*_0x5074b7*_0x1d225d*_0x1d225d-(_0x126b94*_0x126b94+_0x5074b7*_0x5074b7)*(_0x1d225d*_0x1d225d-_0x126b94*_0x126b94),_0x190ad5=(-_0x5074b7*_0x1d225d+Math['sqrt'](_0x45f568))/(_0x126b94*_0x126b94+_0x5074b7*_0x5074b7);}return _0x2ea18e*Math['cos'](_0x32fe63)*_0x190ad5,_0x394e4e=-_0x2ea18e*_0xf88c1c,-_0x2ea18e*Math['sin'](_0x32fe63)*_0x190ad5,Math['asin'](_0x394e4e/_0x2ea18e);}},{'key':'_ComputeLatitudeHorizontal','value':function(_0x423581,_0x1129fe,_0x2d8502,_0xda86d6){if(null==_0x423581)return _0x4a3918;var _0x15816f=0x0,_0x40bc04=(this['fTexCenterY'],_0x4d4446/(_0x1129fe-0x1)),_0x5ed5b5=_0x4d4446*this['fTexCenterY']/(0x2*this['fTexRadius']),_0x39faf6=Math['asin'](this['fTexCenterY']/this['fTexRadius']),_0x3855cc=Math['atan'](Math['cos'](_0x5ed5b5)/(Math['sin'](_0x5ed5b5)-Math['sin'](_0x39faf6))),_0xe2e118=new Float32Array(0x4);_0xe2e118[0x0]=0x0,_0xe2e118[0x1]=Math['sin'](_0x3855cc),_0xe2e118[0x2]=Math['cos'](_0x3855cc),_0xe2e118[0x3]=-_0xda86d6*Math['sin'](_0x3855cc)*Math['sin'](_0x39faf6),_0x423581[_0x15816f++]=_0x5ed5b5;for(var _0x5aa786=0x1;_0x5aa786<=(_0x1129fe-0x3)/0x2;++_0x5aa786){var _0x363e87=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0xe2e118,1.5707963-_0x40bc04*_0x5aa786,_0xda86d6);_0x423581[_0x15816f++]=_0x363e87;}for(var _0x58e336=-Math['asin']((this['fImageHeight']-this['fTexCenterY'])/this['fTexRadius']),_0x538aa7=_0x39faf6,_0xe8be06=(_0x538aa7-_0x58e336)/(_0x2d8502-0x1),_0x28ee2a=0x0;_0x28ee2a<_0x2d8502;++_0x28ee2a)_0x423581[_0x15816f++]=_0x538aa7-_0x28ee2a*_0xe8be06;var _0x4e31f0=_0x58e336,_0x309d02=_0x4d4446*(this['fTexCenterY']-this['fImageHeight'])/(0x2*this['fTexRadius']);_0x3855cc=Math['atan'](Math['cos'](_0x309d02)/(Math['sin'](_0x4e31f0)-Math['sin'](_0x309d02)));var _0x186516=new Float32Array(0x4);_0x186516[0x0]=0x0,_0x186516[0x1]=-Math['sin'](_0x3855cc),_0x186516[0x2]=Math['cos'](_0x3855cc),_0x186516[0x3]=_0xda86d6*Math['sin'](_0x3855cc)*Math['sin'](_0x4e31f0);for(var _0x1a006b=0x1;_0x1a006b<=(_0x1129fe-0x3)/0x2;++_0x1a006b){var _0x4d32e7=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x186516,_0x40bc04*_0x1a006b,_0xda86d6);_0x423581[_0x15816f++]=_0x4d32e7;}return _0x423581[_0x15816f++]=_0x309d02,_0xe2e118=null,_0x186516=null,_0x1b3061;}},{'key':'_ComputeVertexAndTexturePosHorizontal','value':function(_0x55991f,_0x1a3d9c,_0x23b1be,_0x438ccf){if(null==_0x438ccf)return _0x4a3918;_0x438ccf[0x2]=-_0x55991f*Math['cos'](_0x23b1be)*Math['sin'](_0x1a3d9c),_0x438ccf[0x0]=_0x55991f*Math['cos'](_0x23b1be)*Math['cos'](_0x1a3d9c),_0x438ccf[0x1]=_0x55991f*Math['sin'](_0x23b1be);var _0x37d615,_0x387358=-Math['asin'](-_0x438ccf[0x2]/_0x55991f)/_0x4d4446;_0x37d615=_0x23b1be>=0x0?Math['acos'](_0x438ccf[0x0]/Math['sqrt'](_0x438ccf[0x0]*_0x438ccf[0x0]+_0x438ccf[0x1]*_0x438ccf[0x1])):6.2831852-Math['acos'](_0x438ccf[0x0]/Math['sqrt'](_0x438ccf[0x0]*_0x438ccf[0x0]+_0x438ccf[0x1]*_0x438ccf[0x1]));var _0x59788f=this['fTexCenterX']-this['fTexRadius'],_0x183f4a=this['fTexRadius']-this['fTexCenterY'];return _0x438ccf[0x3]=(Math['cos'](_0x37d615)*this['fTexRadius']*(0x1+0x2*_0x387358)+this['fTexRadius']+_0x59788f)/this['fImageWidth'],_0x438ccf[0x4]=(Math['sin'](_0x37d615)*this['fTexRadius']*(-0x1-0x2*_0x387358)+this['fTexRadius']-_0x183f4a)/this['fImageHeight'],_0x1b3061;}},{'key':'_ComputeLatitudeVertical','value':function(_0x1b052b,_0x3f8ca7,_0xea02ba,_0x38f84c){if(null==_0x1b052b)return SR_ERR_PARAM;var _0x37725f=0x0,_0x2b590f=_0x4d4446/(_0x3f8ca7-0x1),_0x29b3dc=_0x4d4446*this['fTexCenterX']/(0x2*this['fTexRadius']),_0x153421=Math['asin'](this['fTexCenterX']/this['fTexRadius']),_0x1c0ac7=Math['atan'](Math['cos'](_0x29b3dc)/(Math['sin'](_0x29b3dc)-Math['sin'](_0x153421))),_0x8c62ce=new Float32Array(0x4);_0x8c62ce[0x0]=0x0,_0x8c62ce[0x1]=Math['sin'](_0x1c0ac7),_0x8c62ce[0x2]=Math['cos'](_0x1c0ac7),_0x8c62ce[0x3]=-_0x38f84c*Math['sin'](_0x1c0ac7)*Math['sin'](_0x153421),_0x1b052b[_0x37725f++]=_0x29b3dc;for(var _0x300cb3=0x1;_0x300cb3<=(_0x3f8ca7-0x3)/0x2;++_0x300cb3){var _0x5f579f=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x8c62ce,1.5707963-_0x2b590f*_0x300cb3,_0x38f84c);_0x1b052b[_0x37725f++]=_0x5f579f;}for(var _0x1f4c80=-Math['asin']((this['fImageWidth']-this['fTexCenterX'])/this['fTexRadius']),_0x1eb567=_0x153421,_0x337c6c=(_0x1eb567-_0x1f4c80)/(_0xea02ba-0x1),_0x10ff68=0x0;_0x10ff68<_0xea02ba;++_0x10ff68)_0x1b052b[_0x37725f++]=_0x1eb567-_0x10ff68*_0x337c6c;var _0x2e3737=_0x1f4c80,_0x15073a=_0x4d4446*(this['fTexCenterX']-this['fImageWidth'])/(0x2*this['fTexRadius']);_0x1c0ac7=Math['atan'](Math['cos'](_0x15073a)/(Math['sin'](_0x2e3737)-Math['sin'](_0x15073a)));var _0x22abb1=new Float32Array(0x4);_0x22abb1[0x0]=0x0,_0x22abb1[0x1]=-Math['sin'](_0x1c0ac7),_0x22abb1[0x2]=Math['cos'](_0x1c0ac7),_0x22abb1[0x3]=_0x38f84c*Math['sin'](_0x1c0ac7)*Math['sin'](_0x2e3737);for(var _0x2ca239=0x1;_0x2ca239<=(_0x3f8ca7-0x3)/0x2;++_0x2ca239){var _0x5cc339=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x22abb1,_0x2b590f*_0x2ca239,_0x38f84c);_0x1b052b[_0x37725f++]=_0x5cc339;}return _0x1b052b[_0x37725f++]=_0x15073a,_0x8c62ce=null,_0x22abb1=null,_0x1b3061;}},{'key':'_ComputeVertexAndTexturePosVertical','value':function(_0x1765b5,_0x5d5eec,_0x6a2d67,_0x4bbb1d){if(null==_0x4bbb1d)return SR_ERR_PARAM;_0x4bbb1d[0x2]=-_0x1765b5*Math['cos'](_0x6a2d67)*Math['sin'](_0x5d5eec),_0x4bbb1d[0x1]=_0x1765b5*Math['cos'](_0x6a2d67)*Math['cos'](_0x5d5eec),_0x4bbb1d[0x0]=-_0x1765b5*Math['sin'](_0x6a2d67);var _0x2586f0,_0x1abc06=-Math['asin'](-_0x4bbb1d[0x2]/_0x1765b5)/_0x4d4446;_0x2586f0=_0x5d5eec<=1.5707963?Math['acos'](_0x4bbb1d[0x0]/Math['sqrt'](_0x4bbb1d[0x0]*_0x4bbb1d[0x0]+_0x4bbb1d[0x1]*_0x4bbb1d[0x1])):6.2831852-Math['acos'](_0x4bbb1d[0x0]/Math['sqrt'](_0x4bbb1d[0x0]*_0x4bbb1d[0x0]+_0x4bbb1d[0x1]*_0x4bbb1d[0x1]));var _0x85b168=this['fTexCenterX']-this['fTexRadius'],_0x59f689=this['fTexRadius']-this['fTexCenterY'];return _0x4bbb1d[0x3]=(Math['cos'](_0x2586f0)*this['fTexRadius']*(0x1+0x2*_0x1abc06)+this['fTexRadius']+_0x85b168)/this['fImageWidth'],_0x4bbb1d[0x4]=(Math['sin'](_0x2586f0)*this['fTexRadius']*(-0x1-0x2*_0x1abc06)+this['fTexRadius']-_0x59f689)/this['fImageHeight'],_0x1b3061;}},{'key':'InitCamera','value':function(_0x5078f8){if(null!=this['pCamera'])return SR_ERR_CALL_ORDER;switch(_0x5078f8){case _0x24b5aa['SR_DE_NULL']:case _0x24b5aa['SR_DE_FISH_ORIGINAL']:case _0x24b5aa['SR_DE_FISH_PTZ_CEILING']:case _0x24b5aa['SR_DE_FISH_PTZ_FLOOR']:case _0x24b5aa['SR_DE_FISH_PTZ_WALL']:case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:return _0x1b3061;case _0x24b5aa['SR_DE_FISH_SEMISPHERE']:if(this['pCamera']=new _0x260fee(),null==this['pCamera'])return _0x431a2e;this['pCamera']['SetFov'](_0x3d12aa),this['pCamera']['SetNear'](_0x1405aa),this['pCamera']['SetFar'](_0x4a31eb),this['fRotateX']=1.57,this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['fScale']=0x3,this['pCamera']['SetScale'](this['fScale']);break;case _0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']:case _0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']:if(this['pCamera']=new _0x260fee(),null==this['pCamera'])return _0x431a2e;this['pCamera']['SetFov'](_0x3d12aa),this['pCamera']['SetNear'](_0x1405aa),this['pCamera']['SetFar'](_0x4a31eb),this['fRotateX']=0.785,this['pCamera']['SetPitch'](-this['fRotateX']),this['fScale']=0x6,this['pCamera']['SetScale'](this['fScale']);break;case _0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:case _0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:if(this['pCamera']=new _0x260fee(),null==this['pCamera'])return _0x431a2e;this['pCamera']['SetOrtho'](!0x0),this['pCamera']['SetNear'](_0x1405aa),this['pCamera']['SetFar'](_0x4a31eb),this['fScale']=0x3,this['pCamera']['SetScale'](this['fScale']);break;case _0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:if(this['pCamera']=new _0x260fee(),null==this['pCamera'])return _0x431a2e;this['pCamera']['SetFov'](_0x3d12aa),this['pCamera']['SetNear'](_0x1405aa),this['pCamera']['SetFar'](_0x4a31eb),this['fScale']=0x2,this['pCamera']['SetScale'](this['fScale']),_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x5078f8?(this['fRotateLimitX']=_0x377d36,this['fRotateLimitY']=_0x7263cc):(this['fRotateLimitX']=_0x2421ad,this['fRotateLimitY']=_0x5938fc);break;default:return _0x2a6293;}return _0x1b3061;}},{'key':'SR_SetViewParam','value':function(_0x2ac0f2,_0x228116){if(!this['b3DPort'])return _0x2a6293;switch(_0x2ac0f2){case _0xd185d0:if((this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])&&(_0x228116>this['fRotateLimitX']||_0x228116<-this['fRotateLimitX']))return _0x4a3918;this['fRotateX']=_0x228116;break;case _0x32648d:if((this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])&&(_0x228116>this['fRotateLimitY']||_0x228116<-this['fRotateLimitY']))return _0x4a3918;this['fRotateY']=_0x228116;break;case _0x2d568c:if(this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_SEMISPHERE']){if(_0x228116<-0.8||_0x228116>0x384)return _0x4a3918;}else{if(this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']||this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']){if(_0x228116<0x0||_0x228116>0x384)return _0x4a3918;}else{if(this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(_0x228116<-0.3||_0x228116>0x5)return _0x4a3918;this['_ComputeRotateLimits']();}}}this['fScale']=_0x228116;break;default:return _0x2a6293;}return _0x1b3061;}},{'key':'SR_GetViewParam','value':function(_0x511b0d,_0x5434a5){if(!this['b3DPort'])return _0x1f1f19;var _0x5b2221=0x0;switch(_0x511b0d){case _0xd185d0:_0x5b2221=this['fRotateX'];break;case _0x32648d:_0x5b2221=this['fRotateY'];break;case _0x2d568c:_0x5b2221=this['fScale'];break;default:return _0x2a6293;}return _0x5434a5['fValue']=_0x5b2221,_0x1b3061;}},{'key':'SR_SetCallBack','value':function(_0x13ddcb,_0x5be806,_0x26ba6a){switch(_0x26ba6a){case _0x1bccf7:this['pfuncCBIn']=_0x13ddcb,this['pUserIn']=_0x5be806;break;case _0x355dce:this['pfuncCBOut']=_0x13ddcb,this['pUserOut']=_0x5be806;break;default:return _0x2a6293;}return _0x1b3061;}},{'key':'SR_SetRenderState','value':function(_0x266cc3,_0x45d00a){switch(_0x266cc3){case _0x108b92:if(this['b3DPort'])return _0x2a6293;break;case _0x596e5b:if(!this['b3DPort'])return _0x2a6293;Math['abs'](_0x45d00a-0x0)<_0x254b59?this['bCullBack']=!0x1:this['bCullBack']=!0x0;break;default:return _0x2a6293;}return _0x1b3061;}},{'key':'SR_SetPTZColor','value':function(_0x3c80bd,_0x1fc16b){return null==this['pFishParamManager']?_0x1f1f19:this['pFishParamManager']['SetPTZColor'](_0x3c80bd,_0x1fc16b);}},{'key':'SR_GetPTZColor','value':function(_0x585b11,_0x3a1168){return null==this['pFishParamManager']?_0x1f1f19:this['pFishParamManager']['GetPTZColor'](_0x585b11,_0x3a1168);}},{'key':'SR_SetPTZPort','value':function(_0x5928cf){return null==this['pFishParamManager']?_0x1f1f19:this['pFishParamManager']['SetPTZPort'](_0x5928cf);}},{'key':'SR_GetPTZPort','value':function(_0x453845,_0x103914,_0x59c601){return null==this['pFishParamManager']?_0x1f1f19:null==_0x59c601?_0x4a3918:this['pFishParamManager']['GetPTZPort'](_0x453845,_0x103914,_0x59c601);}},{'key':'SR_GetCaptureSize','value':function(_0x47cb9d){if(null==_0x47cb9d)return _0x4a3918;if(null==this['ctx'])return _0x1f1f19;if(null==_0x47cb9d['nWidth']||null==_0x47cb9d['nWidth']||null==_0x47cb9d['nHeight']||null==_0x47cb9d['nHeight'])return _0x4a3918;var _0x25c947=0x0,_0x1fa021=0x0;if(0x0==_0x47cb9d['nWidth']&&0x0==_0x47cb9d['nHeight'])switch(this['enDisplayEffect']){case _0x24b5aa['SR_DE_FISH_PTZ_WALL']:case _0x24b5aa['SR_DE_FISH_PTZ_CEILING']:case _0x24b5aa['SR_DE_FISH_PTZ_FLOOR']:_0x25c947=Math['round'](0x5*this['frameDisplayHeight']/0x8),_0x1fa021=Math['round'](0x3*_0x25c947/0x4);break;case _0x24b5aa['SR_DE_NULL']:_0x25c947=Math['round']((this['fSrcUseRight']-this['fSrcUseLeft'])*this['frameDisplayWidth']),_0x1fa021=Math['round']((this['fSrcUseBottom']-this['fSrcUseTop'])*this['frameDisplayHeight']);break;case _0x24b5aa['SR_DE_FISH_ORIGINAL']:case _0x24b5aa['SR_DE_FISH_SEMISPHERE']:case _0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']:case _0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']:case _0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x25c947=Math['round'](this['frameDisplayWidth']),_0x1fa021=Math['round'](this['frameDisplayHeight']);break;case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']:this['frameDisplayHeight']>=0x800?(_0x25c947=0x1800,_0x1fa021=0x360):this['frameDisplayHeight']>=0x600&&0x800>this['frameDisplayHeight']?(_0x25c947=0x1000,_0x1fa021=0x240):(_0x25c947=Math['round'](3.14*this['frameDisplayHeight']/1.6),_0x1fa021=Math['round'](0x9*this['frameDisplayWidth']/0x10),_0x25c947=Math['round'](0x2*_0x25c947),_0x1fa021=Math['round'](_0x1fa021/0x2));break;case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']:this['frameDisplayHeight']>=0xc00?(_0x25c947=0x1000,_0x1fa021=0x900):this['frameDisplayHeight']>=0x800&&0xc00>this['frameDisplayHeight']?(_0x25c947=0xc00,_0x1fa021=0x6c0):this['frameDisplayHeight']>=0x600&&0x800>this['frameDisplayHeight']?(_0x25c947=0x800,_0x1fa021=0x480):(_0x25c947=Math['round'](3.14*this['frameDisplayHeight']/1.6),_0x1fa021=Math['round'](0x9*_0x25c947/0x10));break;case _0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:_0x25c947=Math['round'](this['frameDisplayHeight']),_0x1fa021=Math['round'](0x9*_0x25c947/0x10);break;default:return _0x4a3918;}else _0x25c947=Math['round'](_0x47cb9d['nWidth']),_0x1fa021=Math['round'](_0x47cb9d['nHeight']);return _0x25c947<0x10||_0x1fa021<0x10?_0x4a3918:(this['nCaptureWidth']=0x4*Math['round'](_0x25c947/0x4),this['nCaptureHeight']=Math['round'](_0x1fa021),_0x47cb9d['nWidth']=this['nCaptureWidth'],_0x47cb9d['nHeight']=this['nCaptureHeight'],_0x47cb9d['nBufferLen']=this['nCaptureWidth']*this['nCaptureHeight']*0x4,_0x1b3061);}},{'key':'SR_CaptureScreen','value':function(_0x162b18){var _0x35bcf2=_0x1b3061;if(_0x35bcf2=this['_BeginCapture'](),_0x1b3061!=_0x35bcf2)return _0x35bcf2;if(0x0==this['videoShaderProgram']||0x0==this['vertexPosBuffer']||0x0==this['texturePosBuffer'])return _0x1f1f19;this['ctx']['useProgram'](this['videoShaderProgram']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x239f23=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x239f23<0x0)return _0x2bc1a4;this['ctx']['vertexAttribPointer'](_0x239f23,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x239f23),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x4f2ddf=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x4f2ddf<0x0)return _0x2bc1a4;this['ctx']['vertexAttribPointer'](_0x4f2ddf,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x4f2ddf),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null);var _0x200507=this['enDisplayEffect'],_0x45de9d=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCapture');if(_0x45de9d<=0x0)return _0x2bc1a4;switch(this['ctx']['uniform1i'](_0x45de9d,0x1),_0x200507){case _0x24b5aa['SR_DE_NULL']:break;case _0x24b5aa['SR_DE_FISH_ORIGINAL']:case _0x24b5aa['SR_DE_FISH_PTZ_CEILING']:case _0x24b5aa['SR_DE_FISH_PTZ_FLOOR']:case _0x24b5aa['SR_DE_FISH_PTZ_WALL']:case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:if(null==this['pFishParamManager'])return _0x1f1f19;var _0x1df7b6={};if(_0x35bcf2=this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0x1df7b6),_0x1b3061!=_0x35bcf2)return _0x35bcf2;if(_0x24b5aa['SR_DE_FISH_ORIGINAL']==_0x200507){var _0x55b113=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bBlack');if(_0x55b113<=0x0)return _0x2bc1a4;this['ctx']['uniform1i'](_0x55b113,_0x1df7b6['bBlack']);var _0x15ffd6=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCut');if(_0x15ffd6<=0x0)return _0x2bc1a4;this['ctx']['uniform1i'](_0x15ffd6,_0x1df7b6['bCut']);}if(_0x24b5aa['SR_DE_FISH_PTZ_CEILING']==_0x200507||_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']==_0x200507||_0x24b5aa['SR_DE_FISH_PTZ_WALL']==_0x200507){var _0x10bcec=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleCos');if(_0x10bcec<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x10bcec,_0x1df7b6['fCosH']);var _0xf1dc14=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleSin');if(_0xf1dc14<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0xf1dc14,_0x1df7b6['fSinH']);var _0x5422c8=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleCos');if(_0x5422c8<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x5422c8,_0x1df7b6['fCosV']);var _0x14a0c7=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleSin');if(_0x14a0c7<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x14a0c7,_0x1df7b6['fSinV']);var _0x4faf91=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fZoom');if(_0x4faf91<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x4faf91,_0x1df7b6['fZoom']);}if(_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']==_0x200507||_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']==_0x200507||_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x200507||_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x200507){var _0x141a29=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAngle');if(_0x141a29<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x141a29,_0x1df7b6['fAngle']);}var _0x192249=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0x192249<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x192249,_0x1df7b6['fRXLeft']);var _0x143b92=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0x143b92<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x143b92,_0x1df7b6['fRXRight']);var _0x523199=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x523199<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x523199,_0x1df7b6['fRYTop']);var _0x1a0478=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x1a0478<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x1a0478,_0x1df7b6['fRYBottom']);break;case _0x24b5aa['SR_DE_FISH_SEMISPHERE']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x22d977=this['pCamera']['GetView'](),_0x38ffd3=this['pCamera']['GetProj'](),_0xb85ab3=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0xb85ab3<=0x0)return _0x2bc1a4;this['ctx']['uniformMatrix4fv'](_0xb85ab3,!0x1,_0x22d977);var _0x303b13=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x303b13<=0x0)return _0x2bc1a4;this['ctx']['uniformMatrix4fv'](_0x303b13,!0x1,_0x38ffd3);break;case _0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']:case _0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']:case _0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x39a227=this['pCamera']['GetView'](),_0x410ee8=this['pCamera']['GetProj'](),_0x1025ec=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x1025ec<=0x0)return _0x2bc1a4;this['ctx']['uniformMatrix4fv'](_0x1025ec,!0x1,_0x39a227);var _0x23635e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x23635e<=0x0)return _0x2bc1a4;this['ctx']['uniformMatrix4fv'](_0x23635e,!0x1,_0x410ee8);break;default:return _0x2a6293;}if(this['nCaptureWidth']<=0x0||this['nCaptureHeight']<=0x0)return _0x4f7f9a;if(this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx']['clear'](this['ctx']['COLOR_BUFFER_BIT']|this['ctx']['DEPTH_BUFFER_BIT']),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),this['enPixelFormat']==_0x1aec18?this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]):(this['enPixelFormat']==_0x41de94||this['enPixelFormat']==_0x428c76)&&(this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2])),this['onlySupportedWebGL1']||this['ctx']['clearBufferfi'](this['ctx']['DEPTH_STENCIL'],0x0,0x1,0x0),0x0==this['b3DPort'])this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4);else{if(this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_SEMISPHERE']){if(this['nSemiSpherePosNum']<=0x0)return _0x1f1f19;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']||this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']){if(this['nCylinderPosNum']<=0x0)return _0x1f1f19;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nCylinderPosNum']);}else{if(this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(this['nArcSpherePosNum']<=0x0)return _0x1f1f19;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nArcSpherePosNum']);}}}}return this['ctx']['useProgram'](null),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),null!=this['pfuncCBOut']&&this['pfuncCBOut'](this['pUserOut']),_0x35bcf2=this['_EndCapture'](_0x162b18),_0x1b3061!=_0x35bcf2?_0x35bcf2:_0x1b3061;}},{'key':'SR_SetImagePostProcess','value':function(_0x5e751b,_0xfd0397){if(null==this['ctx'])return _0x1f1f19;if(_0x257672==_0x5e751b||_0x569be1==_0x5e751b){if(0x0-_0xfd0397>_0x254b59||_0xfd0397-0x1>_0x254b59)return _0x4a3918;}else{if((_0x38a98d==_0x5e751b||_0x1f07f3==_0x5e751b||_0x29c4a5==_0x5e751b)&&(-0x1-_0xfd0397>_0x254b59||_0xfd0397-0x1>_0x254b59))return _0x4a3918;}switch(_0x5e751b){case _0x38a98d:this['fBrightness']=_0xfd0397;break;case _0x569be1:this['fHue']=_0xfd0397;break;case _0x1f07f3:this['fSaturation']=_0xfd0397;break;case _0x29c4a5:this['fContrast']=_0xfd0397;break;case _0x257672:this['fSharpness']=_0xfd0397;break;default:return _0x2a6293;}return Math['abs'](this['fBrightness']-0x0)<_0x254b59&&Math['abs'](this['fHue']-0x0)<_0x254b59&&Math['abs'](this['fSaturation']-0x0)<_0x254b59&&Math['abs'](this['fContrast']-0x0)<_0x254b59&&Math['abs'](this['fSharpness']-0x0)<_0x254b59?this['nPostProc']=0x0:this['nPostProc']=0x1,_0x1b3061;}},{'key':'_BeginCapture','value':function(){var _0x3608ad=_0x1b3061;return 0x0==this['bCaptureResInit']&&(_0x3608ad=this['_InitRenderTarget'](this['nCaptureWidth'],this['nCaptureHeight'],!0x1,!0x0),_0x1b3061!=_0x3608ad)?_0x3608ad:(_0x3608ad=this['_Resize'](this['nCaptureWidth'],this['nCaptureHeight'],!0x1,!0x0),_0x1b3061!=_0x3608ad?_0x3608ad:(this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['bIsCapturing']=!0x0,_0x1b3061));}},{'key':'_InitRenderTarget','value':function(_0x5ec0a8,_0xd1d6a6,_0x549397,_0x1397bf){if(0x0!=this['nCaptureRTTex']||0x0!=this['nCaptureFBO'])return _0x1f1f19;if(_0x5ec0a8<=0x0||_0xd1d6a6<=0x0)return _0x4a3918;if(this['nCaptureRTTex']=this['ctx']['createTexture'](),this['nCaptureRTTex']<=0x0)return _0x2bc1a4;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nCaptureRTTex']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],_0x5ec0a8,_0xd1d6a6,0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],null),0x0==this['nCaptureFBO']&&(this['nCaptureFBO']=this['ctx']['createFramebuffer'](),this['nCaptureFBO']<=0x0))return _0x2bc1a4;if(this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['ctx']['framebufferTexture2D'](this['ctx']['FRAMEBUFFER'],this['ctx']['COLOR_ATTACHMENT0'],this['ctx']['TEXTURE_2D'],this['nCaptureRTTex'],0x0),0x1==_0x1397bf&&0x0==this['nCaptureDepthbuffer']){if(this['nCaptureDepthbuffer']=this['ctx']['createRenderbuffer'](),this['nCaptureDepthbuffer']<=0x0)return _0x2bc1a4;this['ctx']['bindRenderbuffer'](this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']),this['ctx']['renderbufferStorage'](this['ctx']['RENDERBUFFER'],this['ctx']['DEPTH_COMPONENT16'],_0x5ec0a8,_0xd1d6a6),this['ctx']['framebufferRenderbuffer'](this['ctx']['FRAMEBUFFER'],this['ctx']['DEPTH_ATTACHMENT'],this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']);}return this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),this['nCaptureFBOWidth']=_0x5ec0a8,this['nCaptureFBOHeight']=_0xd1d6a6,this['bCaptureResInit']=!0x0,_0x1b3061;}},{'key':'_Resize','value':function(_0x109c22,_0x13ba97,_0x5a3e54,_0xc20d50){if(this['nCaptureFBOWidth']!=_0x109c22||this['nCaptureFBOHeight']!=_0x13ba97){if(this['nCaptureFBOWidth']=_0x109c22,this['nCaptureFBOHeight']=_0x13ba97,0x0!=this['nCaptureRTTex']&&(this['ctx']['deleteTexture'](this['nCaptureRTTex']),this['nCaptureRTTex']=0x0),0x0!=this['nCaptureDepthbuffer']&&(this['ctx']['deleteRenderbuffer'](this['nCaptureDepthbuffer']),this['nCaptureDepthbuffer']=0x0),0x0==this['nCaptureRTTex']&&(this['nCaptureRTTex']=this['ctx']['createTexture'](),this['nCaptureRTTex']<=0x0))return _0x2bc1a4;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nCaptureRTTex']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nCaptureFBOWidth'],this['nCaptureFBOHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],null),this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['ctx']['framebufferTexture2D'](this['ctx']['FRAMEBUFFER'],this['ctx']['COLOR_ATTACHMENT0'],this['ctx']['TEXTURE_2D'],this['nCaptureRTTex'],0x0),0x1==_0xc20d50&&0x0==this['nCaptureDepthbuffer']){if(this['nCaptureDepthbuffer']=this['ctx']['createRenderbuffer'](),this['nCaptureDepthbuffer']<=0x0)return _0x2bc1a4;this['ctx']['bindRenderbuffer'](this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']),this['ctx']['renderbufferStorage'](this['ctx']['RENDERBUFFER'],this['ctx']['DEPTH_COMPONENT16'],_0x109c22,_0x13ba97),this['ctx']['framebufferRenderbuffer'](this['ctx']['FRAMEBUFFER'],this['ctx']['DEPTH_ATTACHMENT'],this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']);}this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null);}return _0x1b3061;}},{'key':'_EndCapture','value':function(_0x3ef95a){return null==this['ctx']?_0x1f1f19:null==_0x3ef95a['pBuffer']||null==_0x3ef95a['pBuffer']?_0x4a3918:(this['ctx']['readPixels'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight'],this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x3ef95a['pBuffer']),this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),this['bIsCapturing']=!0x1,_0x1b3061);}},{'key':'_ResizeFrameData','value':function(_0x23687e,_0x500781,_0xbe247,_0x3c8dc6){if(0x0==_0x500781%0x8&&null==_0x3c8dc6)return this['frameDisplayWidth']=Math['round'](_0x500781),this['frameDisplayHeight']=Math['round'](_0xbe247),this['pFrameData']=_0x23687e,_0x1b3061;if(null!=_0x3c8dc6&&0x0==_0x3c8dc6['nCropBottom']&&0x0==_0x3c8dc6['nCropLeft']&&0x0==_0x3c8dc6['nCropRight']&&0x0==_0x3c8dc6['nCropTop']&&0x0==_0x500781%0x8)return this['frameDisplayWidth']=Math['round'](_0x500781),this['frameDisplayHeight']=Math['round'](_0xbe247),this['pFrameData']=_0x23687e,_0x1b3061;if((null==this['pFrameData']||this['frameDisplayWidth']!=_0x500781/0x8*0x8||this['frameDisplayHeight']!=_0xbe247)&&(this['frameDisplayWidth']=0x8*Math['round'](_0x500781/0x8),this['frameDisplayHeight']=Math['round'](_0xbe247),this['pFrameData']=null,this['pFrameData']=new Uint8Array(this['frameDisplayWidth']*this['frameDisplayHeight']*0x3/0x2),null==this['pFrameData']))return _0x431a2e;var _0x3be6c8=0x0,_0x206a0e=0x0,_0x5ab810=Math['round'](_0x3c8dc6['nCodeWidth']),_0x134742=Math['round'](_0x3c8dc6['nCodeHeight']),_0x5cfe2a=0x0;if(_0x41de94==this['enPixelFormat']||_0x428c76==this['enPixelFormat']){var _0x316b8b,_0x38ae76,_0x31e7cf;null!=_0x3c8dc6?(_0x3be6c8=Math['round'](_0x3c8dc6['nCropLeft']),_0x206a0e=Math['round'](_0x3c8dc6['nCropTop']),_0x316b8b=_0x23687e['subarray'](_0x3be6c8*_0x5ab810+_0x206a0e,_0x5ab810*_0x134742),_0x38ae76=_0x23687e['subarray'](_0x5ab810*_0x134742+_0x206a0e*_0x5ab810/0x4+_0x3be6c8/0x2,_0x5ab810*_0x134742*0x5/0x4),_0x31e7cf=_0x23687e['subarray'](_0x5ab810*_0x134742*0x5/0x4+_0x206a0e*_0x5ab810/0x4+_0x3be6c8/0x2,_0x5ab810*_0x134742*0x3/0x2),_0x5cfe2a=_0x5ab810):(_0x316b8b=_0x23687e['subarray'](0x0,_0x500781*_0xbe247),_0x38ae76=_0x23687e['subarray'](_0x500781*_0xbe247,_0x500781*_0xbe247*0x5/0x4),_0x31e7cf=_0x23687e['subarray'](_0x500781*_0xbe247*0x5/0x4,_0x500781*_0xbe247*0x3/0x2),_0x5cfe2a=this['frameDisplayWidth']);for(var _0x2b2398=null,_0x15e73f=0x0;_0x15e73f<this['frameDisplayHeight'];++_0x15e73f){var _0x318b11=Math['round'](_0x15e73f*_0x5cfe2a),_0x193f5b=Math['round'](_0x15e73f*_0x5cfe2a+this['frameDisplayWidth']);_0x2b2398=_0x316b8b['slice'](_0x318b11,_0x193f5b);var _0x1062f7=Math['round'](_0x15e73f*this['frameDisplayWidth']);this['pFrameData']['set'](_0x2b2398,_0x1062f7);}for(var _0x1fdf8d=0x0;_0x1fdf8d<this['frameDisplayHeight']/0x2;++_0x1fdf8d){var _0x2189f2=Math['round'](_0x1fdf8d*_0x5cfe2a/0x2),_0x3e0239=Math['round'](_0x1fdf8d*_0x5cfe2a/0x2+this['frameDisplayWidth']/0x2);_0x2b2398=_0x38ae76['slice'](_0x2189f2,_0x3e0239);var _0x168669=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']+_0x1fdf8d*this['frameDisplayWidth']/0x2);this['pFrameData']['set'](_0x2b2398,_0x168669);}for(var _0x4c180b=0x0;_0x4c180b<this['frameDisplayHeight']/0x2;++_0x4c180b){var _0x2a32a9=Math['round'](_0x4c180b*_0x5cfe2a/0x2),_0x29ccee=Math['round'](_0x4c180b*_0x5cfe2a/0x2+this['frameDisplayWidth']/0x2);_0x2b2398=_0x31e7cf['slice'](_0x2a32a9,_0x29ccee);var _0x5423b8=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']*0x5/0x4+_0x4c180b*this['frameDisplayWidth']/0x2);this['pFrameData']['set'](_0x2b2398,_0x5423b8);}_0x316b8b=null,_0x38ae76=null,_0x31e7cf=null,_0x2b2398=null;}else{if(_0x395519==this['enPixelFormat']){var _0x561047,_0x2b2570,_0x2ca1bb;null!=_0x3c8dc6?(_0x3be6c8=Math['round'](_0x3c8dc6['nCropLeft']),_0x206a0e=Math['round'](_0x3c8dc6['nCropTop']),_0x561047=_0x23687e['subarray'](_0x206a0e*_0x5ab810+_0x3be6c8,_0x5ab810*_0x134742),_0x2b2570=_0x23687e['subarray'](_0x5ab810*_0x134742+_0x206a0e*_0x5ab810/0x4+_0x3be6c8/0x2,_0x5ab810*_0x134742*0x3/0x2),_0x5cfe2a=Math['round'](_0x3c8dc6['nCodeWidth'])):(_0x561047=_0x23687e['subarray'](0x0,_0x5ab810*_0x134742),_0x2b2570=_0x23687e['subarray'](_0x5ab810*_0x134742,_0x5ab810*_0x134742*0x3/0x2),_0x5cfe2a=this['frameDisplayWidth']);for(var _0x40e279=0x0;_0x40e279<this['frameDisplayHeight'];++_0x40e279){var _0x523f19=Math['round'](_0x40e279*_0x5cfe2a),_0x263091=Math['round'](_0x40e279*_0x5cfe2a+this['frameDisplayWidth']);_0x2ca1bb=_0x561047['slice'](_0x523f19,_0x263091);var _0x37ba87=Math['round'](_0x40e279*this['frameDisplayWidth']);this['pFrameData']['set'](_0x2ca1bb,_0x37ba87);}for(var _0x527b2b=0x0;_0x527b2b<this['frameDisplayHeight']/0x2;++_0x527b2b){var _0x547835=Math['round'](_0x527b2b*_0x5cfe2a),_0x5e5376=Math['round'](_0x527b2b*_0x5cfe2a+this['frameDisplayWidth']);_0x2ca1bb=_0x2b2570['slice'](_0x547835,_0x5e5376);var _0x485ee5=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']+_0x527b2b*this['frameDisplayWidth']);this['pFrameData']['set'](_0x2ca1bb,_0x485ee5);}_0x561047=null,_0x2b2570=null,_0x2ca1bb=null;}}return _0x1b3061;}},{'key':'_SetImagePostProcess','value':function(){var _0x2d0555=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fBrightness');if(_0x2d0555<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x2d0555,this['fBrightness']);var _0x35ef26=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHue');if(_0x35ef26<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x35ef26,this['fHue']);var _0x3b3622=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fSaturation');if(_0x3b3622<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x3b3622,this['fSaturation']);var _0x3831a0=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fContrast');if(_0x3831a0<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x3831a0,this['fContrast']);var _0xdc7bb7=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fSharpness');if(_0xdc7bb7<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0xdc7bb7,this['fSharpness']);var _0x5e70b7=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fWndWidth');if(_0x5e70b7<=0x0)return _0x2bc1a4;this['ctx']['uniform1f'](_0x5e70b7,this['frameDisplayWidth']);var _0x5c7c20=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fWndHeight');return _0x5c7c20<=0x0?_0x2bc1a4:(this['ctx']['uniform1f'](_0x5c7c20,this['frameDisplayHeight']),_0x1b3061);}},{'key':'_ComputeRotateLimits','value':function(){if(this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){var _0x308b7b,_0x5ad783;if(this['enDisplayEffect']==_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?(_0x308b7b=_0x377d36,_0x5ad783=_0x7263cc):(_0x308b7b=_0x2421ad,_0x5ad783=_0x5938fc),0x0==this['canvas']['width']||0x0==this['canvas']['height'])this['fRotateLimitX']=_0x308b7b,this['fRotateLimitY']=_0x5ad783;else{var _0x4b6a1e=Math['tan'](2.748893525);if(Math['abs'](_0x4b6a1e*this['fScale'])<0x1){var _0x69648d=_0x4b6a1e*_0x4b6a1e+0x1,_0x24d084=-0x2*_0x4b6a1e*_0x4b6a1e*this['fScale'],_0x1452fd=_0x4b6a1e*_0x4b6a1e*this['fScale']*this['fScale']-0x1,_0x822e28=(-_0x24d084-Math['sqrt'](_0x24d084*_0x24d084-0x4*_0x69648d*_0x1452fd))/(0x2*_0x69648d),_0x1c066a=_0x4b6a1e*(_0x822e28-this['fScale']);this['fRotateLimitX']=Math['acos'](_0x1c066a/Math['sqrt'](_0x822e28*_0x822e28+_0x1c066a*_0x1c066a)),this['fRotateLimitX']<_0x308b7b&&(this['fRotateLimitX']=_0x308b7b);}else this['fRotateLimitX']=_0x308b7b;var _0x58fc3d=Math['atan'](this['canvas']['width']/this['canvas']['height']*Math['tan'](_0x3d12aa/0x2));if(_0x4b6a1e=Math['tan'](_0x4d4446-_0x58fc3d),Math['abs'](_0x4b6a1e*this['fScale'])<0x1){var _0x3b2b17=_0x4b6a1e*_0x4b6a1e+0x1,_0x2a15d2=-0x2*_0x4b6a1e*_0x4b6a1e*this['fScale'],_0xb63e2=_0x4b6a1e*_0x4b6a1e*this['fScale']*this['fScale']-0x1,_0x2d0d94=(-_0x2a15d2-Math['sqrt'](_0x2a15d2*_0x2a15d2-0x4*_0x3b2b17*_0xb63e2))/(0x2*_0x3b2b17),_0x42058e=_0x4b6a1e*(_0x2d0d94-this['fScale']);this['fRotateLimitY']=Math['acos'](_0x42058e/Math['sqrt'](_0x2d0d94*_0x2d0d94+_0x42058e*_0x42058e)),this['fRotateLimitY']<_0x5ad783&&(this['fRotateLimitY']=_0x5ad783);}else this['fRotateLimitY']=_0x5ad783;}this['fRotateX']>this['fRotateLimitX']&&(this['fRotateX']=this['fRotateLimitX']),this['fRotateX']<-this['fRotateLimitX']&&(this['fRotateX']=-this['fRotateLimitX']),this['fRotateY']>this['fRotateLimitY']&&(this['fRotateY']=this['fRotateLimitX']),this['fRotateY']<-this['fRotateLimitX']&&(this['fRotateY']=-this['fRotateLimitX']);}return _0x1b3061;}}]),_0x271598;}()),_0x1588a4=(function(){function _0x1b5711(){_0x4fb29f(this,_0x1b5711),this['canvas']=null,this['ctx']=null,this['regionSx']=0x0,this['regionSy']=0x0,this['regionSw']=0x0,this['regionSh']=0x0,this['needRect']=!0x1,this['bAntialias']=!0x1,this['bRecreateAntia']=!0x1,this['pfuncCBIn']=null,this['pUserIn']=null,this['pfuncCBOut']=null,this['pUserOut']=null;}return _0x1706bb(_0x1b5711,[{'key':'SR_Init','value':function(_0x3a55b5){this['canvas']=_0x3a55b5,this['ctx']=this['canvas']['getContext']('2d'),this['ctx']||console['log']('your\\x20browser\\x20does\\x20not\\x20support\\x202d\\x20render');}},{'key':'SR_Draw','value':function(_0x503ffd){return this['needRect']?this['ctx']['drawImage'](_0x503ffd,this['regionSx'],this['regionSy'],this['regionSw'],this['regionSh'],0x0,0x0,this['canvas']['width'],this['canvas']['height']):this['ctx']['drawImage'](_0x503ffd,0x0,0x0,_0x503ffd['displayWidth'],_0x503ffd['displayHeight'],0x0,0x0,this['canvas']['width'],this['canvas']['height']),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),0x1;}},{'key':'GetCanvasData','value':function(_0x29c476){console['log']('%c\\x20start\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');var _0x1dc5e3=this['ctx']['getImageData'](0x0,0x0,this['canvas']['width'],this['canvas']['height']);console['log']('%c\\x202\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');var _0x23aec2='jpeg',_0x236a9b='image/jpeg',_0x185823=document['createElement']('canvas'),_0x7227c4=_0x185823['getContext']('2d');_0x185823['width']=this['canvas']['width'],_0x185823['height']=this['canvas']['height'],_0x7227c4['putImageData'](_0x1dc5e3,0x0,0x0);var _0x715f79=_0x185823['toDataURL'](),_0x36018a=document['createElement']('a');_0x36018a['download']=new Date()['getTime']()+'.'+_0x23aec2,_0x36018a['href']=_0x715f79,_0x36018a['dataset']['downloadurl']=[_0x236a9b,_0x36018a['download'],_0x36018a['href']]['join'](':'),document['body']['appendChild'](_0x36018a),_0x36018a['click'](),document['body']['removeChild'](_0x36018a),console['log']('%c\\x20end\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');}},{'key':'SR_DelSubPort','value':function(_0x2e65b3){return 0x0;}},{'key':'SR_AddSubPort','value':function(_0x2f206d){return 0x0;}},{'key':'SR_SetDisplayRect','value':function(_0x4cca0c,_0x48d8d2,_0x1eb5fe,_0x505981){this['regionSx']=_0x4cca0c,this['regionSy']=_0x48d8d2,this['regionSw']=_0x1eb5fe,this['regionSh']=_0x505981,this['needRect']=!0x0;}},{'key':'SR_Destroy','value':function(){this['canvas']=null,this['ctx']=null,this['regionSx']=0x0,this['regionSy']=0x0,this['regionSw']=0x0,this['regionSh']=0x0,this['needRect']=!0x1;}},{'key':'SR_SetCanvasSize','value':function(_0x544f03,_0x2701b8){this['canvas']['width']=_0x544f03,this['canvas']['height']=_0x2701b8;}},{'key':'SR_GetCanvasSize','value':function(){console['log']('canvas\\x20width:'+this['canvas']['width']+',height:'+this['canvas']['height']);}},{'key':'SR_SetAntialias','value':function(_0x15c1ca){return _0x15c1ca!=this['bAntialias']?(this['bAntialias']=_0x15c1ca,this['bRecreateAntia']=!0x0):this['bRecreateAntia']=!0x1,this['bRecreateAntia']&&(this['bAntialias']?(this['canvas']['width']=0x5*this['canvas']['width'],this['canvas']['height']=0x5*this['canvas']['height'],this['canvas']['style']['transform']='scale(0.2)',this['canvas']['style']['transformOrigin']='0\\x200'):(this['canvas']['width']=this['canvas']['width']/0x5,this['canvas']['height']=this['canvas']['height']/0x5,this['canvas']['style']['transform']='scale(1)',this['canvas']['style']['transformOrigin']='0\\x200')),0x1;}},{'key':'SR_SetCallBack','value':function(_0x4115c6,_0x4612a7,_0x263f3e){switch(_0x263f3e){case _0x1bccf7:this['pfuncCBIn']=_0x4115c6,this['pUserIn']=_0x4612a7;break;case _0x355dce:this['pfuncCBOut']=_0x4115c6,this['pUserOut']=_0x4612a7;break;default:return 0x0;}return 0x1;}},{'key':'SR_DrawFont','value':function(_0x3451e6,_0x25c4a8,_0x1eef77,_0x1110d1,_0x17a16d,_0x4b93c3,_0x1fe7dc,_0x15620a,_0x11b3dd){var _0x3d3781=[],_0x59a952={};return _0x59a952['bBackground']=_0x4b93c3,_0x59a952['nFontWidth']=_0x1110d1,_0x59a952['nFontHeight']=_0x17a16d,_0x59a952['pstBGColor']=_0x1fe7dc,_0x59a952['pstFontColor']=_0x1eef77,_0x59a952['pString']=_0x3451e6,_0x59a952['pstStartPos']=_0x25c4a8,_0x59a952['fRotateAngle']=_0x15620a,_0x59a952['pFontFamily']=_0x11b3dd,_0x3d3781['push'](_0x59a952),this['SR_DrawFontEx'](_0x3d3781,0x1),0x1;}},{'key':'SR_DrawFontEx','value':function(_0x1ffecd,_0x282417){for(var _0x1deb7e=0x0;_0x1deb7e<_0x282417;_0x1deb7e++){this['ctx']['textBaseline']='top';var _0x23eed1=_0x1ffecd[_0x1deb7e]['nFontWidth'],_0x28ac1b=_0x1ffecd[_0x1deb7e]['nFontHeight'],_0xe80c8c=(_0x23eed1=Math['round'](_0x23eed1))<(_0x28ac1b=Math['round'](_0x28ac1b))?_0x23eed1:_0x28ac1b;this['ctx']['font']=_0xe80c8c['toString']()+'px\\x20'+_0x1ffecd[_0x1deb7e]['pFontFamily'];var _0x1af78e=parseInt(0xff*_0x1ffecd[_0x1deb7e]['pstFontColor']['fR']),_0x46985d=parseInt(0xff*_0x1ffecd[_0x1deb7e]['pstFontColor']['fG']),_0x54d88b=parseInt(0xff*_0x1ffecd[_0x1deb7e]['pstFontColor']['fB']),_0x26d37e=_0x1af78e<0x10?'0'+_0x1af78e['toString'](0x10):_0x1af78e['toString'](0x10),_0xe37e81=_0x46985d<0x10?'0'+_0x46985d['toString'](0x10):_0x46985d['toString'](0x10),_0x39e1cf=_0x54d88b<0x10?'0'+_0x54d88b['toString'](0x10):_0x54d88b['toString'](0x10);this['ctx']['fillStyle']='#'+_0x26d37e+_0xe37e81+_0x39e1cf,this['ctx']['globalAlpha']=_0x1ffecd[_0x1deb7e]['pstFontColor']['fA'],this['ctx']['fillText'](_0x1ffecd[_0x1deb7e]['pString'],_0x1ffecd[_0x1deb7e]['pstStartPos']['fX']*this['canvas']['width'],_0x1ffecd[_0x1deb7e]['pstStartPos']['fY']*this['canvas']['height']);}return 0x1;}},{'key':'SR_DrawImage','value':function(_0x7bcb58,_0x3dc0e1,_0x3a2ddc,_0x343568,_0x5f4615,_0x291625){return 0x1;}},{'key':'SR_DrawLinesEx','value':function(_0x38dae1,_0x180a9b,_0x231c11,_0x580524){return 0x1;}}]),_0x1b5711;}()),_0x454116=(function(){function _0x507dc0(){_0x4fb29f(this,_0x507dc0),this['bPortAllocated']=[],this['pRenderParam']=[],this['pFishParam']=[],this['stPTZColor']=[],this['pPTZSetColor']=null,this['nBasePTZPointNum']=[],this['nOriPTZPointNum']=[],this['nPanoPTZPointNum']=[],this['nPTZFragmentNum']=[],this['pBasePTZPoints']=[],this['pPanoPTZPoints']=[],this['pRectPoints']=[],this['nPTZRectNum']=[],this['nPTZDisplayMode']=_0x44b8bc,this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1,this['pOriPTZPoints']=[],this['nWndPort']=_0x514d22,this['nPlaceType']=0x0,this['nPTZFragmentNode']=[],this['bPTZSelected']=[],this['nPTZDisplayMode']=_0x29bcd1;for(var _0x1a6391=0x0;_0x1a6391<_0x33feef;++_0x1a6391){this['bPortAllocated'][_0x1a6391]=!0x1,this['bPTZSelected'][_0x1a6391]=!0x1,this['pRenderParam'][_0x1a6391]=null,this['pFishParam'][_0x1a6391]=null,this['stPTZColor'][_0x1a6391]={},this['stPTZColor'][_0x1a6391]['fR']=0x0,this['stPTZColor'][_0x1a6391]['fG']=0x0,this['stPTZColor'][_0x1a6391]['fB']=0x0,this['stPTZColor'][_0x1a6391]['fA']=0x0,this['nBasePTZPointNum'][_0x1a6391]=0x0,this['nOriPTZPointNum'][_0x1a6391]=0x0,this['nPanoPTZPointNum'][_0x1a6391]=0x0,this['nPTZRectNum'][_0x1a6391]=0x0,this['pPanoPTZPoints'][_0x1a6391]=[],this['pRectPoints'][_0x1a6391]=[],this['pBasePTZPoints'][_0x1a6391]=[],this['pOriPTZPoints'][_0x1a6391]=[];for(var _0x162f60=0x0;_0x162f60<0x4;++_0x162f60)this['pRectPoints'][_0x1a6391][_0x162f60]={},this['pRectPoints'][_0x1a6391][_0x162f60]['fX']=0x0,this['pRectPoints'][_0x1a6391][_0x162f60]['fY']=0x0;for(var _0x5b25bf=0x0;_0x5b25bf<_0x2ede4c;++_0x5b25bf)this['pBasePTZPoints'][_0x1a6391][_0x5b25bf]={},this['pBasePTZPoints'][_0x1a6391][_0x5b25bf]['fX']=0x0,this['pBasePTZPoints'][_0x1a6391][_0x5b25bf]['fY']=0x0,this['pOriPTZPoints'][_0x1a6391][_0x5b25bf]={},this['pOriPTZPoints'][_0x1a6391][_0x5b25bf]['fX']=0x0,this['pOriPTZPoints'][_0x1a6391][_0x5b25bf]['fY']=0x0,this['pPanoPTZPoints'][_0x1a6391][_0x5b25bf]={},this['pPanoPTZPoints'][_0x1a6391][_0x5b25bf]['fX']=0x0,this['pPanoPTZPoints'][_0x1a6391][_0x5b25bf]['fY']=0x0;this['nPTZFragmentNum'][_0x1a6391]=0x0,this['nPTZFragmentNode'][_0x1a6391]=[];for(var _0x266e21=0x0;_0x266e21<0x64;++_0x266e21)this['nPTZFragmentNode'][_0x1a6391][_0x266e21]=0x0;}this['InitColorList']();}return _0x1706bb(_0x507dc0,[{'key':'GetFECPort','value':function(_0x47d9cd){for(var _0x120278=_0x514d22,_0x1a26ec=0x0;_0x1a26ec<_0x33feef;++_0x1a26ec)if(0x0==this['bPortAllocated'][_0x1a26ec]){_0x120278=_0x1a26ec;break;}if(_0x120278==_0x514d22)return _0x120278;if(_0x47d9cd==_0x24b5aa['SR_DE_NULL'])return _0x120278;var _0x158256=this['JudgeDisplayEffect'](_0x47d9cd);if(_0x1b3061!=_0x158256)return this['FreeFECPort'](_0x120278),_0x120278=_0x514d22;if(_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']==_0x47d9cd||_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']==_0x47d9cd||_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x47d9cd||_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x47d9cd||_0x24b5aa['SR_DE_FISH_PANORAMA_WALL']==_0x47d9cd||_0x24b5aa['SR_DE_FISH_ORIGINAL']==_0x47d9cd){if(_0x514d22!=this['nWndPort'])return this['FreeFECPort'](_0x120278),_0x120278=_0x514d22;this['nWndPort']=_0x120278;}if(!(_0x24b5aa['SR_DE_FISH_PTZ_CEILING']!=_0x47d9cd&&_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']!=_0x47d9cd&&_0x24b5aa['SR_DE_FISH_PTZ_WALL']!=_0x47d9cd||_0x514d22==this['nWndPort']||null==this['pRenderParam'][this['nWndPort']]||_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][this['nWndPort']]['nDisplayEffect']&&_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']!=this['pRenderParam'][this['nWndPort']]['nDisplayEffect']))return this['FreeFECPort'](_0x120278),_0x120278=_0x514d22;if(_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']==_0x47d9cd||_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x47d9cd){for(var _0x48ec2d=0x0;_0x48ec2d<_0x33feef;++_0x48ec2d)if(null!=this['pRenderParam'][_0x48ec2d]&&(_0x24b5aa['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x48ec2d]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x48ec2d]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x48ec2d]['nDisplayEffect']))return this['FreeFECPort'](_0x120278),_0x120278=_0x514d22;}if(_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x47d9cd){for(var _0x4f36db=0x0;_0x4f36db<_0x33feef;++_0x4f36db)if(null!=this['pRenderParam'][_0x4f36db]&&_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this['pRenderParam'][_0x4f36db]['nDisplayEffect'])return this['FreeFECPort'](_0x120278),_0x120278=_0x514d22;}if(_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x47d9cd){for(var _0x2e4233=0x0;_0x2e4233<_0x33feef;++_0x2e4233)if(null!=this['pRenderParam'][_0x2e4233]&&_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==this['pRenderParam'][_0x2e4233]['nDisplayEffect'])return this['FreeFECPort'](_0x120278),_0x120278=_0x514d22;}return this['pRenderParam'][_0x120278]={},this['pRenderParam'][_0x120278]['fCosH']=0x1,this['pRenderParam'][_0x120278]['fSinH']=0x0,this['pRenderParam'][_0x120278]['fCosV']=0x1,this['pRenderParam'][_0x120278]['fSinV']=0x0,this['pRenderParam'][_0x120278]['fAngle']=0x0,this['pRenderParam'][_0x120278]['fRX1']=this['fRX1'],this['pRenderParam'][_0x120278]['fRX2']=this['fRX2'],this['pRenderParam'][_0x120278]['fRY1']=this['fRY1'],this['pRenderParam'][_0x120278]['fRY2']=this['fRY2'],this['pRenderParam'][_0x120278]['bBlack']=this['bBlack'],this['pRenderParam'][_0x120278]['fZoom']=0.035+0.8,this['pRenderParam'][_0x120278]['nDisplayEffect']=_0x47d9cd,this['pRenderParam'][_0x120278]['bBlack']=!0x1,this['pRenderParam'][_0x120278]['bCut']=!0x1,this['pFishParam'][_0x120278]={},this['pFishParam'][_0x120278]['nFishParamType']=0x0,this['pFishParam'][_0x120278]['bCut']=!0x1,this['pFishParam'][_0x120278]['fAngle']=this['pRenderParam'][_0x120278]['fAngle'],this['pFishParam'][_0x120278]['fPTZX']=0.5,this['pFishParam'][_0x120278]['fPTZY']=0.5,this['pFishParam'][_0x120278]['fRXLeft']=this['pRenderParam'][_0x120278]['fRX1'],this['pFishParam'][_0x120278]['fRXRight']=this['pRenderParam'][_0x120278]['fRX2'],this['pFishParam'][_0x120278]['fRYTop']=this['pRenderParam'][_0x120278]['fRY1'],this['pFishParam'][_0x120278]['fRYBottom']=this['pRenderParam'][_0x120278]['fRY2'],this['pFishParam'][_0x120278]['bBlack']=this['pRenderParam'][_0x120278]['bBlack'],this['pFishParam'][_0x120278]['fZoom']=(this['pRenderParam'][_0x120278]['fZoom']-0.8)/0x7,this['bPortAllocated'][_0x120278]=!0x0,_0x120278;}},{'key':'FreeFECPort','value':function(_0x27497a){if(_0x27497a<0x0||_0x27497a>=_0x33feef)return _0x4a3918;this['nWndPort']==_0x27497a&&(this['nWndPort']=_0x514d22),null!=this['pRenderParam'][_0x27497a]&&(this['pRenderParam'][_0x27497a]['fCosH']=0x1,this['pRenderParam'][_0x27497a]['fSinH']=0x0,this['pRenderParam'][_0x27497a]['fCosV']=0x1,this['pRenderParam'][_0x27497a]['fSinV']=0x0,this['pRenderParam'][_0x27497a]['fAngle']=0x0,this['pRenderParam'][_0x27497a]['fZoom']=0x0,this['pRenderParam'][_0x27497a]['fRX1']=0x0,this['pRenderParam'][_0x27497a]['fRX2']=0x1,this['pRenderParam'][_0x27497a]['fRY1']=0x0,this['pRenderParam'][_0x27497a]['fRY2']=0x1,this['pRenderParam'][_0x27497a]['nDisplayEffect']=0x0,this['pRenderParam'][_0x27497a]['bBlack']=!0x1,this['pRenderParam'][_0x27497a]['bCut']=!0x1),null!=this['pFishParam'][_0x27497a]&&(this['pFishParam'][_0x27497a]['nFishParamType']=0x0,this['pFishParam'][_0x27497a]['fRXLeft']=0x0,this['pFishParam'][_0x27497a]['fRXRight']=0x1,this['pFishParam'][_0x27497a]['fRYTop']=0x0,this['pFishParam'][_0x27497a]['fRYBottom']=0x1,this['pFishParam'][_0x27497a]['bBlack']=!0x1,this['pFishParam'][_0x27497a]['bCut']=!0x1,this['pFishParam'][_0x27497a]['fAngle']=0x0,this['pFishParam'][_0x27497a]['fZoom']=0x0,this['pFishParam'][_0x27497a]['fPTZX']=0.5,this['pFishParam'][_0x27497a]['fPTZY']=0.5),this['nBasePTZPointNum'][_0x27497a]=0x0,this['nOriPTZPointNum'][_0x27497a]=0x0,this['nPanoPTZPointNum'][_0x27497a]=0x0,this['nPTZRectNum'][_0x27497a]=0x0;for(var _0x84077f=0x0;_0x84077f<0x4;++_0x84077f)this['pRectPoints'][_0x27497a][_0x84077f]['fX']=0x0,this['pRectPoints'][_0x27497a][_0x84077f]['fY']=0x0;for(var _0x325665=0x0;_0x325665<_0x2ede4c;++_0x325665)this['pBasePTZPoints'][_0x27497a][_0x325665]['fX']=0x0,this['pBasePTZPoints'][_0x27497a][_0x325665]['fY']=0x0,this['pOriPTZPoints'][_0x27497a][_0x325665]['fX']=0x0,this['pOriPTZPoints'][_0x27497a][_0x325665]['fY']=0x0,this['pPanoPTZPoints'][_0x27497a][_0x325665]['fX']=0x0,this['pPanoPTZPoints'][_0x27497a][_0x325665]['fY']=0x0;if(null!=this['pPTZSetColor']&&(this['pPTZSetColor'][_0x27497a]['fA']=0x0,this['pPTZSetColor'][_0x27497a]['fR']=0x0,this['pPTZSetColor'][_0x27497a]['fG']=0x0,this['pPTZSetColor'][_0x27497a]['fB']=0x0),this['bPTZSelected'][_0x27497a]=!0x1,0x0!=this['nPlaceType']){var _0xea185d=!0x1;if(null!=this['pRenderParam'][i]){for(var _0x389909=0x0;_0x389909<_0x33feef;++_0x389909)if(null!=this['pRenderParam'][_0x389909]&&(_0x24b5aa['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PANORAMA_WALL']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_CEILING']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==this['pRenderParam'][_0x389909]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this['pRenderParam'][_0x389909]['nDisplayEffect'])){_0xea185d=!0x0;break;}}_0xea185d||(this['nPlaceType']=0x0);}for(var _0x4c576a=!0x1,_0x40d54c=0x0;_0x40d54c<_0x33feef;++_0x40d54c)if(null!=this['pRenderParam'][_0x40d54c]){_0x4c576a=!0x0;break;}_0x4c576a||(this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1),this['nPTZFragmentNum'][_0x27497a]=0x0;for(var _0x55d6e8=0x0;_0x55d6e8<0x64;++_0x55d6e8)this['nPTZFragmentNode'][_0x27497a][_0x55d6e8]=0x0;return this['bPortAllocated'][_0x27497a]=!0x1,_0x1b3061;}},{'key':'DeInit','value':function(){for(var _0xeac298=0x0;_0xeac298<_0x33feef;++_0xeac298){for(var _0x1653e5=0x0;_0x1653e5<0x4;++_0x1653e5)this['pRectPoints'][_0xeac298][_0x1653e5]=null;for(var _0x13a46d=0x0;_0x13a46d<_0x2ede4c;++_0x13a46d)this['pBasePTZPoints'][_0xeac298][_0x13a46d]=null,this['pOriPTZPoints'][_0xeac298][_0x13a46d]=null,this['pPanoPTZPoints'][_0xeac298][_0x13a46d]=null;this['nPTZFragmentNum'][_0xeac298]=0x0,this['nPTZFragmentNode'][_0xeac298]=null,this['bPortAllocated'][_0xeac298]=!0x1,this['bPTZSelected'][_0xeac298]=!0x1,this['pRenderParam'][_0xeac298]=null,this['pFishParam'][_0xeac298]=null,this['stPTZColor'][_0xeac298]=null,this['nBasePTZPointNum'][_0xeac298]=0x0,this['nOriPTZPointNum'][_0xeac298]=0x0,this['nPanoPTZPointNum'][_0xeac298]=0x0,this['nPTZRectNum'][_0xeac298]=0x0,this['pPanoPTZPoints'][_0xeac298]=null,this['pRectPoints'][_0xeac298]=null,this['pBasePTZPoints'][_0xeac298]=null,this['pOriPTZPoints'][_0xeac298]=null;}return this['bPortAllocated']=null,this['pRenderParam']=null,this['pFishParam']=null,this['stPTZColor']=null,this['pPTZSetColor']=null,this['nBasePTZPointNum']=null,this['nOriPTZPointNum']=null,this['nPanoPTZPointNum']=null,this['nPTZFragmentNum']=null,this['pBasePTZPoints']=null,this['pPanoPTZPoints']=null,this['pRectPoints']=null,this['nPTZRectNum']=null,this['nPTZDisplayMode']=_0x44b8bc,this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1,this['pOriPTZPoints']=null,this['pBasePTZPoints']=null,this['nWndPort']=_0x514d22,this['nPlaceType']=0x0,this['nPTZFragmentNode']=null,this['bPTZSelected']=null,this['nPTZDisplayMode']=_0x29bcd1,_0x1b3061;}},{'key':'InitColorList','value':function(){this['stPTZColor'][0x0]['fR']=0.5,this['stPTZColor'][0x0]['fG']=0.5,this['stPTZColor'][0x0]['fB']=0x0,this['stPTZColor'][0x0]['fA']=0x1,this['stPTZColor'][0x1]['fR']=0x1,this['stPTZColor'][0x1]['fG']=0x0,this['stPTZColor'][0x1]['fB']=0x0,this['stPTZColor'][0x1]['fA']=0x1,this['stPTZColor'][0x2]['fR']=0x0,this['stPTZColor'][0x2]['fG']=0x1,this['stPTZColor'][0x2]['fB']=0x0,this['stPTZColor'][0x2]['fA']=0x1,this['stPTZColor'][0x3]['fR']=0x0,this['stPTZColor'][0x3]['fG']=0x0,this['stPTZColor'][0x3]['fB']=0x1,this['stPTZColor'][0x3]['fA']=0x1,this['stPTZColor'][0x4]['fR']=0x1,this['stPTZColor'][0x4]['fG']=0x1,this['stPTZColor'][0x4]['fB']=0x0,this['stPTZColor'][0x4]['fA']=0x1,this['stPTZColor'][0x5]['fR']=0.5,this['stPTZColor'][0x5]['fG']=0x0,this['stPTZColor'][0x5]['fB']=0x1,this['stPTZColor'][0x5]['fA']=0x1,this['stPTZColor'][0x6]['fR']=0x0,this['stPTZColor'][0x6]['fG']=0x1,this['stPTZColor'][0x6]['fB']=0x1,this['stPTZColor'][0x6]['fA']=0x1,this['stPTZColor'][0x7]['fR']=0x1,this['stPTZColor'][0x7]['fG']=0.5,this['stPTZColor'][0x7]['fB']=0x0,this['stPTZColor'][0x7]['fA']=0x1,this['stPTZColor'][0x8]['fR']=0x0,this['stPTZColor'][0x8]['fG']=0.5,this['stPTZColor'][0x8]['fB']=0.5,this['stPTZColor'][0x8]['fA']=0x1;for(var _0x8e1521=0x9;_0x8e1521<_0x33feef;_0x8e1521++)this['stPTZColor'][_0x8e1521]['fR']=0x1*_0x8e1521/_0x33feef,this['stPTZColor'][_0x8e1521]['fG']=0x1*_0x8e1521/_0x33feef,this['stPTZColor'][_0x8e1521]['fB']=0x1*_0x8e1521/_0x33feef,this['stPTZColor'][_0x8e1521]['fA']=0x1;return _0x1b3061;}},{'key':'GetRangePoints','value':function(_0x2cb985){if(_0x2cb985<0x0||_0x2cb985>=_0x33feef)return _0x4a3918;if(null==this['pRenderParam'][_0x2cb985])return _0x1f1f19;var _0x38625c=0x0,_0x7e6bb1=0x0;switch(this['nOriPTZPointNum'][_0x2cb985]=0x0,this['nBasePTZPointNum'][_0x2cb985]=0x0,this['pRenderParam'][_0x2cb985]['nDisplayEffect']){case _0x24b5aa['SR_DE_FISH_PTZ_CEILING']:for(_0x7e6bb1=0x0;_0x7e6bb1<0x1;_0x7e6bb1+=0.01)this['GetFishPTZCeiling'](_0x38625c,_0x7e6bb1,_0x2cb985);for(_0x7e6bb1=0.9995,_0x38625c=0x0;_0x38625c<0x1;_0x38625c+=0.02)this['GetFishPTZCeiling'](_0x38625c,_0x7e6bb1,_0x2cb985);for(_0x38625c=0.999,_0x7e6bb1=0.9995;_0x7e6bb1>=0x0;_0x7e6bb1-=0.01)this['GetFishPTZCeiling'](_0x38625c,_0x7e6bb1,_0x2cb985);for(_0x7e6bb1=0x0,_0x38625c=0.999;_0x38625c>=0x0;_0x38625c-=0.02)this['GetFishPTZCeiling'](_0x38625c,_0x7e6bb1,_0x2cb985);break;case _0x24b5aa['SR_DE_FISH_PTZ_FLOOR']:for(_0x7e6bb1=0x0;_0x7e6bb1<0x1;_0x7e6bb1+=0.01)this['GetFishPTZFloor'](_0x38625c,_0x7e6bb1,_0x2cb985);for(_0x7e6bb1=0.9995,_0x38625c=0x0;_0x38625c<0x1;_0x38625c+=0.02)this['GetFishPTZFloor'](_0x38625c,_0x7e6bb1,_0x2cb985);for(_0x38625c=0.999,_0x7e6bb1=0.9995;_0x7e6bb1>=0x0;_0x7e6bb1-=0.01)this['GetFishPTZFloor'](_0x38625c,_0x7e6bb1,_0x2cb985);for(_0x7e6bb1=0x0,_0x38625c=0.999;_0x38625c>=0x0;_0x38625c-=0.02)this['GetFishPTZFloor'](_0x38625c,_0x7e6bb1,_0x2cb985);break;case _0x24b5aa['SR_DE_FISH_PTZ_WALL']:for(_0x7e6bb1=0x0;_0x7e6bb1<0x1;_0x7e6bb1+=0.01)this['GetFishPTZWALL'](_0x38625c,_0x7e6bb1,_0x2cb985);for(_0x7e6bb1=0.9995,_0x38625c=0x0;_0x38625c<0x1;_0x38625c+=0.02)this['GetFishPTZWALL'](_0x38625c,_0x7e6bb1,_0x2cb985);for(_0x38625c=0.999,_0x7e6bb1=0.9995;_0x7e6bb1>=0x0;_0x7e6bb1-=0.01)this['GetFishPTZWALL'](_0x38625c,_0x7e6bb1,_0x2cb985);for(_0x7e6bb1=0x0,_0x38625c=0.999;_0x38625c>=0x0;_0x38625c-=0.02)this['GetFishPTZWALL'](_0x38625c,_0x7e6bb1,_0x2cb985);break;default:return _0x2a6293;}return _0x1b3061;}},{'key':'TransformPTZRangePoints','value':function(_0x3f6bcc){if(_0x514d22==this['nWndPort'])return _0x1f1f19;if(null==this['pBasePTZPoints'][_0x3f6bcc]||null==this['pRenderParam'][this['nWndPort']])return _0x1f1f19;this['nPanoPTZPointNum'][_0x3f6bcc]=0x0;var _0x2c2e3a=_0x1b3061,_0x2378b6=this['nWndPort'];switch(this['pRenderParam'][_0x2378b6]['nDisplayEffect']){case _0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:if(_0x2c2e3a=this['GetPanoPTZWall'](_0x3f6bcc),_0x1b3061!=_0x2c2e3a)return _0x2c2e3a;break;case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x2c2e3a=this['GetPanoPTZFloor'](_0x3f6bcc),_0x1b3061!=_0x2c2e3a)return _0x2c2e3a;break;case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x2c2e3a=this['GetPanoPTZCeiling'](_0x3f6bcc),_0x1b3061!=_0x2c2e3a)return _0x2c2e3a;}return this['CalcPTZFragmentPoints'](_0x3f6bcc),_0x1b3061;}},{'key':'GetRectPoints','value':function(_0x579c3c){if(_0x579c3c<0x0||_0x579c3c>=_0x33feef)return _0x4a3918;if(this['nWndPort']==_0x514d22)return _0x1f1f19;if(null==this['pRenderParam'][this['nWndPort']]||null==this['pFishParam'][_0x579c3c])return _0x1f1f19;var _0x7d5542=this['pRenderParam'][this['nWndPort']]['nDisplayEffect'],_0x54e714=_0x1b3061,_0x4e30f0={'fX':0x0,'fY':0x0};switch(_0x7d5542){case _0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:if(_0x54e714=this['GetPointFish2PanoWall'](_0x4e30f0,this['pFishParam'][_0x579c3c]['fPTZX'],this['pFishParam'][_0x579c3c]['fPTZY']),_0x1b3061!=_0x54e714)return _0x54e714;break;case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x54e714=this['GetPointFish2PanoFloor'](_0x4e30f0,this['pFishParam'][_0x579c3c]['fPTZX'],this['pFishParam'][_0x579c3c]['fPTZY']),_0x1b3061!=_0x54e714)return _0x2a6293==_0x54e714&&(this['pRectPoints'][_0x579c3c]=null),_0x54e714;break;case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x54e714=this['GetPointFish2PanoCeiling'](_0x4e30f0,this['pFishParam'][_0x579c3c]['fPTZX'],this['pFishParam'][_0x579c3c]['fPTZY']),_0x1b3061!=_0x54e714)return _0x2a6293==_0x54e714&&(this['pRectPoints'][_0x579c3c]=null),_0x54e714;break;case _0x24b5aa['SR_DE_FISH_ORIGINAL']:_0x4e30f0['fX']=this['pFishParam'][_0x579c3c]['fPTZX'],_0x4e30f0['fY']=this['pFishParam'][_0x579c3c]['fPTZY'];}if(null==this['pRectPoints'][_0x579c3c]){this['pRectPoints'][_0x579c3c]=[];for(var _0x2defa2=0x0;_0x2defa2<0x4;++_0x2defa2)this['pRectPoints'][_0x579c3c][_0x2defa2]={},this['pRectPoints'][_0x579c3c][_0x2defa2]['fX']=0x0,this['pRectPoints'][_0x579c3c][_0x2defa2]['fY']=0x0;}return this['pRectPoints'][_0x579c3c][0x0]['fX']=_0x4e30f0['fX']-_0x39301c,this['pRectPoints'][_0x579c3c][0x0]['fY']=_0x4e30f0['fY']-_0x39301c,this['pRectPoints'][_0x579c3c][0x1]['fX']=_0x4e30f0['fX']+_0x39301c,this['pRectPoints'][_0x579c3c][0x1]['fY']=_0x4e30f0['fY']-_0x39301c,this['pRectPoints'][_0x579c3c][0x2]['fX']=_0x4e30f0['fX']+_0x39301c,this['pRectPoints'][_0x579c3c][0x2]['fY']=_0x4e30f0['fY']+_0x39301c,this['pRectPoints'][_0x579c3c][0x3]['fX']=_0x4e30f0['fX']-_0x39301c,this['pRectPoints'][_0x579c3c][0x3]['fY']=_0x4e30f0['fY']+_0x39301c,this['nPTZRectNum'][_0x579c3c]=0x4,_0x1b3061;}},{'key':'GetFishPTZCeiling','value':function(_0x1a10d1,_0x4e1fce,_0x4b1513){var _0x38853f,_0x4079b3,_0x8c4f1c,_0x19f933,_0x54a826,_0x572405,_0x543c24,_0x5cf7f8={'fX':0x0,'fY':0x0},_0x411721={'fX':0x0,'fY':0x0},_0xe47871={'fX':0x0,'fY':0x0},_0x2c79c2={};_0x19f933=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x54a826=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x572405=(this['fRY1']+this['fRY2'])/0x2*_0x19f933,_0x543c24=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x5cf7f8['fX']=_0x4e1fce-0.5,_0x5cf7f8['fY']=0.5-_0x1a10d1,_0x38853f=this['pRenderParam'][_0x4b1513]['fZoom'],_0x411721['fX']=_0x5cf7f8['fX'],_0x411721['fY']=_0x5cf7f8['fY']*this['pRenderParam'][_0x4b1513]['fCosV']+_0x38853f*this['pRenderParam'][_0x4b1513]['fSinV'],_0x4079b3=_0x38853f*this['pRenderParam'][_0x4b1513]['fCosV']-_0x5cf7f8['fY']*this['pRenderParam'][_0x4b1513]['fSinV'],_0x8c4f1c=Math['sqrt'](_0x411721['fX']*_0x411721['fX']+_0x411721['fY']*_0x411721['fY']);var _0x90cc8c=Math['sqrt'](_0x411721['fX']*_0x411721['fX']+_0x411721['fY']*_0x411721['fY']+_0x4079b3*_0x4079b3),_0x4346ac=Math['asin'](_0x8c4f1c/_0x90cc8c)/1.5707963*0.5;_0x411721['fX']=_0x4346ac*_0x411721['fX']/_0x8c4f1c,_0x411721['fY']=_0x4346ac*_0x411721['fY']/_0x8c4f1c,_0xe47871['fX']=_0x411721['fX']*this['pRenderParam'][_0x4b1513]['fCosH']-_0x411721['fY']*this['pRenderParam'][_0x4b1513]['fSinH'],_0xe47871['fY']=_0x411721['fX']*this['pRenderParam'][_0x4b1513]['fSinH']+_0x411721['fY']*this['pRenderParam'][_0x4b1513]['fCosH'],_0x2c79c2['fX']=0x2*_0xe47871['fX']*_0x543c24+_0x54a826,_0x2c79c2['fY']=0x2*-_0xe47871['fY']*_0x543c24+_0x572405;var _0x7227c1=this['nBasePTZPointNum'][_0x4b1513];this['pBasePTZPoints'][_0x4b1513][_0x7227c1]['fX']=_0xe47871['fX']+0.5,this['pBasePTZPoints'][_0x4b1513][_0x7227c1]['fY']=0.5-_0xe47871['fY'],this['nBasePTZPointNum'][_0x4b1513]=this['nBasePTZPointNum'][_0x4b1513]+0x1;var _0x28986f=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x516734=this['fRY1']<=0x0?0x0:this['fRY1']*_0x19f933,_0x426d6d=this['fRX2']>=0x1?0x1-_0x28986f:0x1*this['fRX2']-_0x28986f,_0x29feb1=this['fRY2']>=0x1?_0x19f933-_0x516734:this['fRY2']*_0x19f933-_0x516734;if(_0x2c79c2['fX']=(_0x2c79c2['fX']-_0x28986f)/_0x426d6d,_0x2c79c2['fY']=(_0x2c79c2['fY']-_0x516734)/_0x29feb1,_0x2c79c2['fX']<=0x1&&_0x2c79c2['fY']<=0x1&&_0x2c79c2['fX']>=0x0&&_0x2c79c2['fY']>=0x0){var _0x12537a=this['nOriPTZPointNum'][_0x4b1513];this['pOriPTZPoints'][_0x4b1513][_0x12537a]['fX']=_0x2c79c2['fX'],this['pOriPTZPoints'][_0x4b1513][_0x12537a]['fY']=_0x2c79c2['fY'],this['nOriPTZPointNum'][_0x4b1513]=this['nOriPTZPointNum'][_0x4b1513]+0x1;}return _0x1b3061;}},{'key':'GetFishPTZFloor','value':function(_0x1f7a71,_0x100f3e,_0x23f5a7){var _0x56216f,_0x5435b0,_0x5c4ba7,_0x52909e,_0x48061f,_0x7abefa,_0x48f570,_0x5a428b={'fX':0x0,'fY':0x0},_0x220fe7={'fX':0x0,'fY':0x0},_0x3bdbf3={'fX':0x0,'fY':0x0},_0x373ae4={};_0x52909e=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x48061f=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x7abefa=(this['fRY1']+this['fRY2'])/0x2*_0x52909e,_0x48f570=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x5a428b['fX']=_0x1f7a71-0.5,_0x5a428b['fY']=_0x100f3e-0.5,_0x56216f=this['pRenderParam'][_0x23f5a7]['fZoom'],_0x220fe7['fX']=_0x5a428b['fX'],_0x220fe7['fY']=_0x5a428b['fY']*this['pRenderParam'][_0x23f5a7]['fCosV']+_0x56216f*this['pRenderParam'][_0x23f5a7]['fSinV'],_0x5435b0=_0x56216f*this['pRenderParam'][_0x23f5a7]['fCosV']-_0x5a428b['fY']*this['pRenderParam'][_0x23f5a7]['fSinV'],_0x5c4ba7=Math['sqrt'](_0x220fe7['fX']*_0x220fe7['fX']+_0x220fe7['fY']*_0x220fe7['fY']);var _0x255faf=Math['sqrt'](_0x220fe7['fX']*_0x220fe7['fX']+_0x220fe7['fY']*_0x220fe7['fY']+_0x5435b0*_0x5435b0),_0xd08579=Math['asin'](_0x5c4ba7/_0x255faf)/1.5707963*0.5;_0x220fe7['fX']=_0xd08579*_0x220fe7['fX']/_0x5c4ba7,_0x220fe7['fY']=_0xd08579*_0x220fe7['fY']/_0x5c4ba7,_0x3bdbf3['fX']=_0x220fe7['fX']*this['pRenderParam'][_0x23f5a7]['fCosH']-_0x220fe7['fY']*this['pRenderParam'][_0x23f5a7]['fSinH'],_0x3bdbf3['fY']=_0x220fe7['fX']*this['pRenderParam'][_0x23f5a7]['fSinH']+_0x220fe7['fY']*this['pRenderParam'][_0x23f5a7]['fCosH'],_0x373ae4['fX']=0x2*_0x3bdbf3['fX']*_0x48f570+_0x48061f,_0x373ae4['fY']=0x2*_0x3bdbf3['fY']*_0x48f570+_0x7abefa;var _0x5b15c7=this['nBasePTZPointNum'][_0x23f5a7];this['pBasePTZPoints'][_0x23f5a7][_0x5b15c7]['fX']=_0x3bdbf3['fX']+0.5,this['pBasePTZPoints'][_0x23f5a7][_0x5b15c7]['fY']=_0x3bdbf3['fY']+0.5,this['nBasePTZPointNum'][_0x23f5a7]=this['nBasePTZPointNum'][_0x23f5a7]+0x1;var _0x571250=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x557845=this['fRY1']<=0x0?0x0:this['fRY1']*_0x52909e,_0x1de1d7=this['fRX2']>=0x1?0x1-_0x571250:0x1*this['fRX2']-_0x571250,_0xf07d61=this['fRY2']>=0x1?_0x52909e-_0x557845:this['fRY2']*_0x52909e-_0x557845;if(_0x373ae4['fX']=(_0x373ae4['fX']-_0x571250)/_0x1de1d7,_0x373ae4['fY']=(_0x373ae4['fY']-_0x557845)/_0xf07d61,_0x373ae4['fX']<=0x1&&_0x373ae4['fY']<=0x1&&_0x373ae4['fX']>=0x0&&_0x373ae4['fY']>=0x0){var _0x33efda=this['nOriPTZPointNum'][_0x23f5a7];this['pOriPTZPoints'][_0x23f5a7][_0x33efda]['fX']=_0x373ae4['fX'],this['pOriPTZPoints'][_0x23f5a7][_0x33efda]['fY']=_0x373ae4['fY'],this['nOriPTZPointNum'][_0x23f5a7]=this['nOriPTZPointNum'][_0x23f5a7]+0x1;}return _0x1b3061;}},{'key':'GetFishPTZWALL','value':function(_0x534530,_0x5f00a7,_0xdfe68e){var _0x2e4a2b,_0x207f0a,_0xcb5461,_0x3ed38e,_0x3a9e3b,_0x3f9fe9,_0x4c7522,_0x2482f0,_0x55ab10={'fX':0x0,'fY':0x0},_0xf0e4ff={'fX':0x0,'fY':0x0},_0x3462eb={'fX':0x0,'fY':0x0},_0x2b17cc={};_0x3a9e3b=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x3f9fe9=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x4c7522=(this['fRY1']+this['fRY2'])/0x2*_0x3a9e3b,_0x2482f0=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x55ab10['fX']=_0x5f00a7-0.5,_0x55ab10['fY']=_0x534530-0.5,_0x2e4a2b=this['pRenderParam'][_0xdfe68e]['fZoom'],_0xf0e4ff['fX']=_0x55ab10['fX'],_0xf0e4ff['fY']=_0x55ab10['fY']*this['pRenderParam'][_0xdfe68e]['fCosV']+_0x2e4a2b*this['pRenderParam'][_0xdfe68e]['fSinV'],_0x207f0a=_0x2e4a2b*this['pRenderParam'][_0xdfe68e]['fCosV']-_0x55ab10['fY']*this['pRenderParam'][_0xdfe68e]['fSinV'],_0x3462eb['fX']=_0xf0e4ff['fX']*this['pRenderParam'][_0xdfe68e]['fCosH']+_0x207f0a*this['pRenderParam'][_0xdfe68e]['fSinH'],_0x3462eb['fY']=_0xf0e4ff['fY'],_0xcb5461=_0x207f0a*this['pRenderParam'][_0xdfe68e]['fCosH']-_0xf0e4ff['fX']*this['pRenderParam'][_0xdfe68e]['fSinH'],_0x3ed38e=Math['sqrt'](_0x3462eb['fX']*_0x3462eb['fX']+_0x3462eb['fY']*_0x3462eb['fY']);var _0x554a7c=Math['sqrt'](_0x3462eb['fX']*_0x3462eb['fX']+_0x3462eb['fY']*_0x3462eb['fY']+_0xcb5461*_0xcb5461),_0x4a7274=Math['asin'](_0x3ed38e/_0x554a7c)/1.5707963*0.5;_0x2b17cc['fX']=_0x4a7274*_0x3462eb['fX']/_0x3ed38e*_0x2482f0*0x2+_0x3f9fe9,_0x2b17cc['fY']=_0x4a7274*_0x3462eb['fY']/_0x3ed38e*_0x2482f0*0x2+_0x4c7522;var _0x3e75d9=this['nBasePTZPointNum'][_0xdfe68e];this['pBasePTZPoints'][_0xdfe68e][_0x3e75d9]['fX']=_0x4a7274*_0x3462eb['fX']/_0x3ed38e+0.5,this['pBasePTZPoints'][_0xdfe68e][_0x3e75d9]['fY']=_0x4a7274*_0x3462eb['fY']/_0x3ed38e+0.5,this['nBasePTZPointNum'][_0xdfe68e]=this['nBasePTZPointNum'][_0xdfe68e]+0x1;var _0x549bde=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x38e6e3=this['fRY1']<=0x0?0x0:this['fRY1']*_0x3a9e3b,_0x1b5c8a=this['fRX2']>=0x1?0x1-_0x549bde:0x1*this['fRX2']-_0x549bde,_0x141998=this['fRY2']>=0x1?_0x3a9e3b-_0x38e6e3:this['fRY2']*_0x3a9e3b-_0x38e6e3;if(_0x2b17cc['fX']=(_0x2b17cc['fX']-_0x549bde)/_0x1b5c8a,_0x2b17cc['fY']=(_0x2b17cc['fY']-_0x38e6e3)/_0x141998,_0x2b17cc['fX']<=0x1&&_0x2b17cc['fY']<=0x1&&_0x2b17cc['fX']>=0x0&&_0x2b17cc['fY']>=0x0){var _0x226432=this['nOriPTZPointNum'][_0xdfe68e];this['pOriPTZPoints'][_0xdfe68e][_0x226432]['fX']=_0x2b17cc['fX'],this['pOriPTZPoints'][_0xdfe68e][_0x226432]['fY']=_0x2b17cc['fY'],this['nOriPTZPointNum'][_0xdfe68e]=this['nOriPTZPointNum'][_0xdfe68e]+0x1;}return _0x1b3061;}},{'key':'GetPanoPTZCeiling','value':function(_0x735db4){if(null==this['pRenderParam'][_0x735db4]||null==this['pRenderParam'][this['nWndPort']])return _0x1f1f19;if(null==this['pBasePTZPoints'][_0x735db4])return _0x1f1f19;var _0x149102,_0x585eae,_0x3f64af=this['nBasePTZPointNum'][_0x735db4];_0x149102=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x585eae=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x2a67f5,_0x4c7b22=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRY1']<0x0||this['fRX1']<0x0)&&(this['fRX1']<0x0&&(_0x2a67f5=0x1*-this['fRX1'])>_0x4c7b22&&(_0x4c7b22=_0x2a67f5),this['fRX2']>0x1&&(_0x2a67f5=0x1*(this['fRX2']-0x1))>_0x4c7b22&&(_0x4c7b22=_0x2a67f5),this['fRY1']<0x0&&(_0x2a67f5=-this['fRY1']*_0x149102)>_0x4c7b22&&(_0x4c7b22=_0x2a67f5),this['fRY2']>0x1&&(_0x2a67f5=(this['fRY2']-0x1)*_0x149102)>_0x4c7b22&&(_0x4c7b22=_0x2a67f5));for(var _0x4a3e9e,_0x4461b0=_0x4c7b22/_0x585eae,_0x240f33={'fX':0x0,'fY':0x0},_0x46fb84={'fX':0x0,'fY':0x0},_0x3ac124=0x0;_0x3ac124<_0x3f64af;++_0x3ac124)if(_0x46fb84['fX']=this['pBasePTZPoints'][_0x735db4][_0x3ac124]['fX'],_0x46fb84['fY']=this['pBasePTZPoints'][_0x735db4][_0x3ac124]['fY'],!(Math['abs'](_0x46fb84['fX']-0.5)<_0x254b59&&Math['abs'](_0x46fb84['fY']-0.5)<_0x254b59)){var _0x242230={'fX':0x0,'fY':0x0},_0x44ac8d={'fX':0x0,'fY':0x0};_0x242230['fX']=_0x46fb84['fX']-0.5,_0x242230['fY']=_0x46fb84['fY']-0.5,_0x44ac8d['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x44ac8d['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x3f8f4b=Math['sqrt'](_0x242230['fX']*_0x242230['fX']+_0x242230['fY']*_0x242230['fY']),_0x23c6d4=Math['sqrt'](_0x44ac8d['fX']*_0x44ac8d['fX']+_0x44ac8d['fY']*_0x44ac8d['fY']);if(_0x4a3e9e=Math['acos']((_0x242230['fX']*_0x44ac8d['fX']+_0x242230['fY']*_0x44ac8d['fY'])/(_0x3f8f4b*_0x23c6d4)),_0x242230['fX']*_0x44ac8d['fY']-_0x242230['fY']*_0x44ac8d['fX']>0x0&&(_0x4a3e9e=6.2831852-_0x4a3e9e),_0x240f33['fX']=_0x4a3e9e/6.2831853,_0x240f33['fY']=(0x2*(0.5-_0x3f8f4b)-_0x4461b0)/(0.8-_0x4461b0),_0x240f33['fY']>=0x0&&_0x240f33['fX']>=0x0&&_0x240f33['fY']<=0x1&&_0x240f33['fX']<=0x1){var _0x570945=this['nPanoPTZPointNum'][_0x735db4];this['pPanoPTZPoints'][_0x735db4][_0x570945]['fX']=_0x240f33['fX'],this['pPanoPTZPoints'][_0x735db4][_0x570945]['fY']=_0x240f33['fY'],this['nPanoPTZPointNum'][_0x735db4]=this['nPanoPTZPointNum'][_0x735db4]+0x1;}}return _0x1b3061;}},{'key':'GetPanoPTZFloor','value':function(_0x387365){if(null==this['pRenderParam'][_0x387365]||null==this['pRenderParam'][this['nWndPort']])return _0x1f1f19;if(null==this['pBasePTZPoints'][_0x387365])return _0x1f1f19;var _0x380064,_0x5d2038,_0x565e9e=this['nBasePTZPointNum'][_0x387365];_0x380064=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x5d2038=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x32822e,_0x886e93=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRY1']<0x0||this['fRX1']<0x0)&&(this['fRX1']<0x0&&(_0x32822e=0x1*-this['fRX1'])>_0x886e93&&(_0x886e93=_0x32822e),this['fRX2']>0x1&&(_0x32822e=0x1*(this['fRX2']-0x1))>_0x886e93&&(_0x886e93=_0x32822e),this['fRY1']<0x0&&(_0x32822e=-this['fRY1']*_0x380064)>_0x886e93&&(_0x886e93=_0x32822e),this['fRY2']>0x1&&(_0x32822e=(this['fRY2']-0x1)*_0x380064)>_0x886e93&&(_0x886e93=_0x32822e));for(var _0x4434e8,_0x1049df=_0x886e93/_0x5d2038,_0x38f516={'fX':0x0,'fY':0x0},_0x4f655={'fX':0x0,'fY':0x0},_0x24c1e1=0x0;_0x24c1e1<_0x565e9e;++_0x24c1e1)if(_0x4f655['fX']=this['pBasePTZPoints'][_0x387365][_0x24c1e1]['fX'],_0x4f655['fY']=this['pBasePTZPoints'][_0x387365][_0x24c1e1]['fY'],!(Math['abs'](_0x4f655['fX']-0.5)<_0x254b59&&Math['abs'](_0x4f655['fY']-0.5)<_0x254b59)){var _0x22fff4={'fX':0x0,'fY':0x0},_0x493ef3={'fX':0x0,'fY':0x0};_0x22fff4['fX']=_0x4f655['fX']-0.5,_0x22fff4['fY']=_0x4f655['fY']-0.5,_0x493ef3['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x493ef3['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x4eee13=Math['sqrt'](_0x22fff4['fX']*_0x22fff4['fX']+_0x22fff4['fY']*_0x22fff4['fY']),_0x7beda9=Math['sqrt'](_0x493ef3['fX']*_0x493ef3['fX']+_0x493ef3['fY']*_0x493ef3['fY']);if(_0x4434e8=Math['acos']((_0x22fff4['fX']*_0x493ef3['fX']+_0x22fff4['fY']*_0x493ef3['fY'])/(_0x4eee13*_0x7beda9)),_0x22fff4['fX']*_0x493ef3['fY']-_0x22fff4['fY']*_0x493ef3['fX']>0x0&&(_0x4434e8=6.2831852-_0x4434e8),_0x38f516['fX']=0x1-_0x4434e8/6.2831853,_0x38f516['fY']=0x1-(0x2*(0.5-_0x4eee13)-_0x1049df)/(0.8-_0x1049df),_0x38f516['fY']>=0x0&&_0x38f516['fX']>=0x0&&_0x38f516['fY']<=0x1&&_0x38f516['fX']<=0x1){var _0x472d34=this['nPanoPTZPointNum'][_0x387365];this['pPanoPTZPoints'][_0x387365][_0x472d34]['fX']=_0x38f516['fX'],this['pPanoPTZPoints'][_0x387365][_0x472d34]['fY']=_0x38f516['fY'],this['nPanoPTZPointNum'][_0x387365]=this['nPanoPTZPointNum'][_0x387365]+0x1;}}return _0x1b3061;}},{'key':'GetPanoPTZWall','value':function(_0x41da79){if(null==this['pRenderParam'][_0x41da79]||null==this['pRenderParam'][this['nWndPort']])return _0x1f1f19;if(null==this['pBasePTZPoints'][_0x41da79])return _0x1f1f19;var _0x36e424,_0x458f3b,_0x2463d8=this['nBasePTZPointNum'][_0x41da79];_0x36e424=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x458f3b=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x439894,_0x43cc73,_0x3d9ff2,_0x5b3019,_0x5f2a46,_0x3a20f4=0x0,_0x22f2f7=0x1,_0x38503c=0.1,_0x5e59de=0.9;this['fRX1']<0x0&&(_0x439894=0x1*-this['fRX1'],_0x3a20f4=_0x439894/=0x2*_0x458f3b),this['fRX2']>0x1&&(_0x43cc73=0x1*(this['fRX2']-0x1),_0x22f2f7=0x1-(_0x43cc73/=0x2*_0x458f3b)),this['fRY1']<0x0&&(_0x3d9ff2=-this['fRY1']*_0x36e424,_0x38503c=(_0x3d9ff2/=0x2*_0x458f3b)>0.1?_0x3d9ff2:0.1),this['fRY2']>0x1&&(_0x5b3019=(this['fRY2']-0x1)*_0x36e424,_0x5e59de=(_0x5b3019/=0x2*_0x458f3b)>0x1-0.9?0x1-_0x5b3019:0.9);for(var _0x371a35={'fX':0x0,'fY':0x0},_0x1dd2b6={'fX':0x0,'fY':0x0},_0x35d056=0x0;_0x35d056<_0x2463d8;++_0x35d056){_0x1dd2b6['fX']=this['pBasePTZPoints'][_0x41da79][_0x35d056]['fX'],_0x1dd2b6['fY']=this['pBasePTZPoints'][_0x41da79][_0x35d056]['fY'];var _0x31299e=0x2*_0x1dd2b6['fX']*_0x458f3b,_0x1a8d5a=0x2*_0x1dd2b6['fY']*_0x458f3b;if(_0x5f2a46=Math['sqrt'](_0x458f3b*_0x458f3b-(_0x1a8d5a-_0x458f3b)*(_0x1a8d5a-_0x458f3b)),!(Math['abs'](_0x5f2a46)<_0x254b59)&&(_0x1dd2b6['fX']=_0x458f3b*(_0x31299e-_0x458f3b)/_0x5f2a46+_0x458f3b,_0x1dd2b6['fY']=_0x1a8d5a,_0x371a35['fX']=(_0x1dd2b6['fX']-0x2*_0x3a20f4*_0x458f3b)/(0x2*(_0x22f2f7-_0x3a20f4)*_0x458f3b),_0x371a35['fY']=(_0x1dd2b6['fY']-0x2*_0x38503c*_0x458f3b)/(0x2*(_0x5e59de-_0x38503c)*_0x458f3b),_0x371a35['fY']>=0x0&&_0x371a35['fX']>=0x0&&_0x371a35['fY']<=0x1&&_0x371a35['fX']<=0x1)){var _0x4e44a4=this['nPanoPTZPointNum'][_0x41da79];this['pPanoPTZPoints'][_0x41da79][_0x4e44a4]['fX']=_0x371a35['fX'],this['pPanoPTZPoints'][_0x41da79][_0x4e44a4]['fY']=_0x371a35['fY'],this['nPanoPTZPointNum'][_0x41da79]=this['nPanoPTZPointNum'][_0x41da79]+0x1;}}return _0x1b3061;}},{'key':'GetPointPano2FishCeiling','value':function(_0x39f0c7,_0x157c55,_0x493e84){if(null==_0x39f0c7||null==this['pRenderParam'][this['nWndPort']])return _0x1f1f19;var _0x3b6adf,_0x2eb19d;_0x3b6adf=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x2eb19d=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x3a2b92,_0xf42e00=0x0,_0x3a9432=0x1,_0xe11a3f=0x0,_0x2dfe29=0x1,_0xb34112=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&((_0x3a2b92=0x1*-this['fRX1'])>_0xb34112&&(_0xb34112=_0x3a2b92),_0xf42e00=_0x3a2b92/=0x2*_0x2eb19d),this['fRX2']>0x1&&((_0x3a2b92=0x1*(this['fRX2']-0x1))>_0xb34112&&(_0xb34112=_0x3a2b92),_0x3a9432=0x1-(_0x3a2b92/=0x2*_0x2eb19d)),this['fRY1']<0x0&&((_0x3a2b92=-this['fRY1']*_0x3b6adf)>_0xb34112&&(_0xb34112=_0x3a2b92),_0xe11a3f=_0x3a2b92/=0x2*_0x2eb19d),this['fRY2']>0x1&&((_0x3a2b92=(this['fRY2']-0x1)*_0x3b6adf)>_0xb34112&&(_0xb34112=_0x3a2b92),_0x2dfe29=0x1-(_0x3a2b92/=0x2*_0x2eb19d)));var _0x44071e,_0xbb4eae,_0x4348b3=_0xb34112/_0x2eb19d,_0x5e9c60={},_0x2dcefa={};return _0x5e9c60['fX']=_0x157c55,_0x5e9c60['fY']=(0.8-_0x4348b3)*_0x493e84+_0x4348b3,_0x44071e=6.2831853*_0x5e9c60['fX']+this['pRenderParam'][this['nWndPort']]['fAngle'],_0xbb4eae=0.5*(0x1-_0x5e9c60['fY']),_0x2dcefa['fX']=0.5-_0xbb4eae*Math['sin'](_0x44071e),_0x2dcefa['fY']=0.5+_0xbb4eae*Math['cos'](_0x44071e),_0x2dcefa['fX']=(_0x2dcefa['fX']-_0xf42e00)/(_0x3a9432-_0xf42e00),_0x2dcefa['fY']=(_0x2dcefa['fY']-_0xe11a3f)/(_0x2dfe29-_0xe11a3f),_0x39f0c7['fX']=_0x2dcefa['fX'],_0x39f0c7['fY']=_0x2dcefa['fY'],_0x1b3061;}},{'key':'GetPointPano2FishFloor','value':function(_0x1908e8,_0x4ff4a0,_0x2450d2){if(null==this['pRenderParam'][this['nWndPort']])return _0x1f1f19;if(null==_0x1908e8)return _0x4a3918;var _0x2be04f,_0x293a40;_0x2be04f=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x293a40=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x4d816f,_0x37663b=0x0,_0x5cc373=0x1,_0x2d3ca7=0x0,_0x25e937=0x1,_0x114a9f=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&((_0x4d816f=0x1*-this['fRX1'])>_0x114a9f&&(_0x114a9f=_0x4d816f),_0x37663b=_0x4d816f/=0x2*_0x293a40),this['fRX2']>0x1&&((_0x4d816f=0x1*(this['fRX2']-0x1))>_0x114a9f&&(_0x114a9f=_0x4d816f),_0x5cc373=0x1-(_0x4d816f/=0x2*_0x293a40)),this['fRY1']<0x0&&((_0x4d816f=-this['fRY1']*_0x2be04f)>_0x114a9f&&(_0x114a9f=_0x4d816f),_0x2d3ca7=_0x4d816f/=0x2*_0x293a40),this['fRY2']>0x1&&((_0x4d816f=(this['fRY2']-0x1)*_0x2be04f)>_0x114a9f&&(_0x114a9f=_0x4d816f),_0x25e937=0x1-(_0x4d816f/=0x2*_0x293a40)));var _0x21f70f,_0xcca089,_0x8f3c46=_0x114a9f/_0x293a40,_0x101ca1={},_0x1c02aa={};return _0x101ca1['fX']=0x1-_0x4ff4a0,_0x101ca1['fY']=(0.8-_0x8f3c46)*(0x1-_0x2450d2)+_0x8f3c46,_0x21f70f=6.2831853*_0x101ca1['fX']+this['pRenderParam'][this['nWndPort']]['fAngle'],_0xcca089=0.5*(0x1-_0x101ca1['fY']),_0x1c02aa['fX']=0.5-_0xcca089*Math['sin'](_0x21f70f),_0x1c02aa['fY']=0.5+_0xcca089*Math['cos'](_0x21f70f),_0x1c02aa['fX']=(_0x1c02aa['fX']-_0x37663b)/(_0x5cc373-_0x37663b),_0x1c02aa['fY']=(_0x1c02aa['fY']-_0x2d3ca7)/(_0x25e937-_0x2d3ca7),_0x1908e8['fX']=_0x1c02aa['fX'],_0x1908e8['fY']=_0x1c02aa['fY'],_0x1b3061;}},{'key':'GetPointPano2FishWall','value':function(_0x3d0d58,_0x475eb3,_0x89b65){if(null==this['pRenderParam'][this['nWndPort']])return _0x1f1f19;if(null==_0x3d0d58)return _0x4a3918;var _0x5373f9,_0x4ef231;_0x5373f9=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x4ef231=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x4c0c22,_0x229389,_0x43e27b,_0x89f873,_0x56915c=0x0,_0x2f3c1c=0x1,_0xa94545=0.1,_0x4fe2bf=0.9,_0x48b852=0x0,_0xea3145=0x1,_0x23f535=0x0,_0x2e0ad2=0x1;this['fRX1']<0x0&&(_0x4c0c22=0x1*-this['fRX1'],_0x56915c=_0x4c0c22/=0x2*_0x4ef231,_0x48b852=_0x4c0c22),this['fRX2']>0x1&&(_0x229389=0x1*(this['fRX2']-0x1),_0x2f3c1c=0x1-(_0x229389/=0x2*_0x4ef231),_0xea3145=0x1-_0x229389),this['fRY1']<0x0&&(_0x43e27b=-this['fRY1']*_0x5373f9,_0xa94545=(_0x43e27b/=0x2*_0x4ef231)>0.1?_0x43e27b:0.1,_0x23f535=_0x43e27b),this['fRY2']>0x1&&(_0x89f873=(this['fRY2']-0x1)*_0x5373f9,_0x4fe2bf=(_0x89f873/=0x2*_0x4ef231)>0x1-0.9?0x1-_0x89f873:0.9,_0x2e0ad2=0x1-_0x89f873);var _0x227a0e={},_0x157d9a={};_0x227a0e['fX']=_0x475eb3*(_0x2f3c1c-_0x56915c)+_0x56915c,_0x227a0e['fY']=_0x89b65*(_0x4fe2bf-_0xa94545)+_0xa94545;var _0x34a911=Math['sqrt'](0.25-(_0x227a0e['fY']-0.5)*(_0x227a0e['fY']-0.5));return _0x157d9a['fX']=(_0x227a0e['fX']-0.5)*_0x34a911/0.5+0.5,_0x157d9a['fY']=_0x227a0e['fY'],_0x157d9a['fX']=(_0x157d9a['fX']-_0x48b852)/(_0xea3145-_0x48b852),_0x157d9a['fY']=(_0x157d9a['fY']-_0x23f535)/(_0x2e0ad2-_0x23f535),_0x3d0d58['fX']=_0x157d9a['fX'],_0x3d0d58['fY']=_0x157d9a['fY'],_0x1b3061;}},{'key':'UpdatePTZPosition','value':function(_0x52c0a7,_0x418c4e,_0x452f53){if(null==this['pRenderParam'][_0x52c0a7])return _0x1f1f19;var _0x39816d={'fHAngleSin':0x0,'fHAngleCos':0x0,'fVAngleSin':0x0,'fVAngleCos':0x0},_0x2e875c=_0x1b3061;if(_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x52c0a7]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x52c0a7]['nDisplayEffect']){if((_0x2e875c=this['ComputeAngleVertical'](_0x418c4e,_0x452f53,_0x39816d,this['pRenderParam'][_0x52c0a7]['nDisplayEffect']))!=_0x1b3061)return _0x2e875c;}else{if(_0x24b5aa['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x52c0a7]['nDisplayEffect'])return _0x2a6293;if((_0x2e875c=this['ComputeAngleHorizontal'](_0x418c4e,_0x452f53,_0x39816d))!=_0x1b3061)return _0x2e875c;}return 0x0==this['IsInImage'](this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2'],_0x39816d,this['pRenderParam'][_0x52c0a7]['fZoom'],this['pRenderParam'][_0x52c0a7]['nDisplayEffect'])?_0x4a3918:(this['pRenderParam'][_0x52c0a7]['fCosH']=_0x39816d['fHAngleCos'],this['pRenderParam'][_0x52c0a7]['fSinH']=_0x39816d['fHAngleSin'],this['pRenderParam'][_0x52c0a7]['fCosV']=_0x39816d['fVAngleCos'],this['pRenderParam'][_0x52c0a7]['fSinV']=_0x39816d['fVAngleSin'],_0x1b3061);}},{'key':'JudgeDisplayEffect','value':function(_0x38800c){var _0x196536=0x0;switch(_0x196536){case 0x0:return _0x196536=this['GetPlaceType'](_0x38800c),0x4==this['nPlaceType']&&(this['nPlaceType']=0x0),_0x1b3061;case 0x3:return(_0x196536=this['GetPlaceType'](_0x38800c))==this['nPlaceType']||0x4==this['nPlaceType']?_0x1b3061:_0x2a6293;case 0x2:case 0x1:return(_0x196536=this['GetPlaceType'](_0x38800c))==this['nPlaceType']||0x4==_0x196536?_0x1b3061:_0x2a6293;default:return _0x2a6293;}return _0x2a6293;}},{'key':'GetPlaceType','value':function(_0x2dbe4b){switch(_0x2dbe4b){case _0x24b5aa['SR_DE_FISH_PTZ_CEILING']:case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']:case _0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:return 0x3;case _0x24b5aa['SR_DE_FISH_PTZ_FLOOR']:case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x24b5aa['SR_DE_FISH_PANARAMA_FLOOR_180']:case _0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']:case _0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:return 0x2;case _0x24b5aa['SR_DE_FISH_PTZ_WALL']:case _0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:case _0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:return 0x1;case _0x24b5aa['SR_DE_FISH_SEMISPHERE']:case _0x24b5aa['SR_DE_FISH_ORIGINAL']:case _0x24b5aa['SR_DE_FISH_PLANET']:case _0x24b5aa['SR_DE_FISH_SPHERE']:case _0x24b5aa['SR_DE_FISH_PLANET']:return 0x4;default:return 0x0;}return 0x0;}},{'key':'SetFishParam','value':function(_0x4e78af,_0x250eb3){if(_0x4e78af<0x0||_0x4e78af>=_0x33feef)return _0x4a3918;if(null==_0x250eb3)return _0x4a3918;if(null==this['pRenderParam'][_0x4e78af])return _0x1f1f19;var _0x105c71=_0x1b3061;switch(_0x250eb3['nFishParamType']){case _0xef11b:if((_0x105c71=this['UpdateCircyeParam'](_0x250eb3['fRXLeft'],_0x250eb3['fRXRight'],_0x250eb3['fRYTop'],_0x250eb3['fRYBottom']))!=_0x1b3061)return _0x105c71;this['pRenderParam'][_0x4e78af]['bCut']=_0x250eb3['bCut'],this['bBlack']=_0x250eb3['bBlack'];break;case _0x132faf:if(_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']!=this['pRenderParam'][_0x4e78af]['nDisplayEffect']&&_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][_0x4e78af]['nDisplayEffect']&&_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']!=this['pRenderParam'][_0x4e78af]['nDisplayEffect']&&_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']!=this['pRenderParam'][_0x4e78af]['nDisplayEffect'])return _0x2a6293;if((_0x105c71=this['UpdateWideScanAngle'](_0x4e78af,_0x250eb3['fAngle']))!=_0x1b3061)return _0x105c71;this['pFishParam'][_0x4e78af]['fAngle']=_0x250eb3['fAngle'];break;case _0x14fa4a:if(_0x24b5aa['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x4e78af]['nDisplayEffect']&&_0x24b5aa['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x4e78af]['nDisplayEffect']&&_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x4e78af]['nDisplayEffect'])return _0x2a6293;if((_0x105c71=this['UpdateRangeParam'](_0x4e78af,_0x250eb3['fZoom']))!=_0x1b3061)return _0x105c71;this['pFishParam'][_0x4e78af]['fZoom']=_0x250eb3['fZoom'];break;case _0xc17459:if(_0x24b5aa['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x4e78af]['nDisplayEffect']&&_0x24b5aa['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x4e78af]['nDisplayEffect']&&_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x4e78af]['nDisplayEffect'])return _0x2a6293;if((_0x105c71=this['UpdatePTZPosition'](_0x4e78af,_0x250eb3['fPTZX'],_0x250eb3['fPTZY'],this['pRenderParam'][_0x4e78af]['fZoom'],!0x0))!=_0x1b3061)return _0x105c71;this['pFishParam'][_0x4e78af]['fPTZX']=_0x250eb3['fPTZX'],this['pFishParam'][_0x4e78af]['fPTZY']=_0x250eb3['fPTZY'];break;default:return _0x2a6293;}return _0x105c71=this['ComputePTZPoints']();}},{'key':'GetFishParam','value':function(_0x3439ee,_0x819c40){return _0x3439ee<0x0||_0x3439ee>=_0x33feef||null==_0x819c40||null==this['pFishParam'][_0x3439ee]?_0x4a3918:(_0x819c40['fRXLeft']=this['fRX1'],_0x819c40['fRXRight']=this['fRX2'],_0x819c40['fRYTop']=this['fRY1'],_0x819c40['fRYBottom']=this['fRY2'],_0x819c40['bBlack']=this['bBlack'],_0x819c40['bCut']=this['pRenderParam'][_0x3439ee]['bCut'],_0x819c40['nFishParamType']=this['pFishParam'][_0x3439ee]['nFishParamType'],_0x819c40['fAngle']=this['pFishParam'][_0x3439ee]['fAngle'],_0x819c40['fZoom']=this['pFishParam'][_0x3439ee]['fZoom'],_0x819c40['fPTZX']=this['pFishParam'][_0x3439ee]['fPTZX'],_0x819c40['fPTZY']=this['pFishParam'][_0x3439ee]['fPTZY'],_0x1b3061);}},{'key':'GetRenderParam','value':function(_0x18f239,_0x9575e8){return _0x18f239<0x0||_0x18f239>=_0x33feef||null==_0x9575e8||null==this['pRenderParam'][_0x18f239]?_0x4a3918:(_0x9575e8['fRXLeft']=this['fRX1'],_0x9575e8['fRXRight']=this['fRX2'],_0x9575e8['fRYTop']=this['fRY1'],_0x9575e8['fRYBottom']=this['fRY2'],_0x9575e8['bBlack']=this['bBlack'],_0x9575e8['fCosH']=this['pRenderParam'][_0x18f239]['fCosH'],_0x9575e8['fSinH']=this['pRenderParam'][_0x18f239]['fSinH'],_0x9575e8['fCosV']=this['pRenderParam'][_0x18f239]['fCosV'],_0x9575e8['fSinV']=this['pRenderParam'][_0x18f239]['fSinV'],_0x9575e8['fAngle']=this['pRenderParam'][_0x18f239]['fAngle'],_0x9575e8['fZoom']=this['pRenderParam'][_0x18f239]['fZoom'],_0x9575e8['nDisplayEffect']=this['pRenderParam'][_0x18f239]['nDisplayEffect'],_0x9575e8['bCut']=this['pRenderParam'][_0x18f239]['bCut'],_0x1b3061);}},{'key':'UpdateCircyeParam','value':function(_0x2a85b9,_0x16a7e2,_0xa23d24,_0x2a5447){if(_0x2a85b9<=-0.5||_0x2a85b9>=0.4||_0x16a7e2<=0.6||_0x16a7e2>=1.5||_0xa23d24<=-0.5||_0xa23d24>=0.4||_0x2a5447<=0.6||_0x2a5447>=1.5||_0x2a85b9+_0x16a7e2<=0.8||_0x2a85b9+_0x16a7e2>=1.2||_0xa23d24+_0x2a5447<=0.8||_0xa23d24+_0x2a5447>=1.2)return _0x4a3918;if(_0x2a85b9<0x0||_0x16a7e2>0x1||_0xa23d24<0x0||_0x2a5447>0x1){for(var _0x17d181=0x0;_0x17d181<_0x33feef;++_0x17d181)if(null!=this['pRenderParam'][_0x17d181]&&(_0x24b5aa['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x17d181]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x17d181]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x17d181]['nDisplayEffect'])){var _0x578d63={};if(_0x578d63['fHAngleCos']=this['pRenderParam'][_0x17d181]['fCosH'],_0x578d63['fHAngleSin']=this['pRenderParam'][_0x17d181]['fSinH'],_0x578d63['fVAngleCos']=this['pRenderParam'][_0x17d181]['fCosV'],_0x578d63['fVAngleSin']=this['pRenderParam'][_0x17d181]['fSinV'],0x0==this['IsInImage'](_0x2a85b9,_0x16a7e2,_0xa23d24,_0x2a5447,_0x578d63,this['pRenderParam'][_0x17d181]['fZoom'],this['pRenderParam'][_0x17d181]['nDisplayEffect']))return _0x4a3918;}}return this['fRX1']=_0x2a85b9,this['fRX2']=_0x16a7e2,this['fRY1']=_0xa23d24,this['fRY2']=_0x2a5447,_0x1b3061;}},{'key':'UpdateWideScanAngle','value':function(_0x10f576,_0x19dcb2){return null==this['pRenderParam'][_0x10f576]?_0x1f1f19:(_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']==this['pRenderParam'][_0x10f576]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']==this['pRenderParam'][_0x10f576]['nDisplayEffect']?this['pRenderParam'][_0x10f576]['fAngle']=_0x19dcb2:_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']!=this['pRenderParam'][_0x10f576]['nDisplayEffect']&&_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][_0x10f576]['nDisplayEffect']||(this['pRenderParam'][_0x10f576]['fAngle']=-_0x19dcb2),_0x1b3061);}},{'key':'ComputeAngleVertical','value':function(_0x3f889a,_0x56f410,_0x7bf815,_0x155527){var _0x360962=_0x3f889a,_0x452e0d=_0x56f410,_0x3bbf8e=Math['sqrt']((_0x452e0d-0.5)*(_0x452e0d-0.5)+(_0x360962-0.5)*(_0x360962-0.5));if(_0x3bbf8e>0.5)return _0x4a3918;if(_0x3bbf8e<0.001)return _0x7bf815['fVAngleCos']=0x1,_0x7bf815['fVAngleSin']=0x0,_0x7bf815['fHAngleCos']=0x1,_0x7bf815['fHAngleSin']=0x0,_0x1b3061;if(_0x155527==_0x24b5aa['SR_DE_FISH_PTZ_CEILING']){_0x7bf815['fHAngleCos']=(0.5-_0x452e0d)/_0x3bbf8e,_0x7bf815['fHAngleSin']=(0.5-_0x360962)/_0x3bbf8e;var _0x307476=_0x3bbf8e*_0x4d4446;_0x7bf815['fVAngleCos']=Math['cos'](_0x307476),_0x7bf815['fVAngleSin']=Math['sin'](_0x307476);}else{if(_0x155527!=_0x24b5aa['SR_DE_FISH_PTZ_FLOOR'])return _0x4a3918;_0x7bf815['fHAngleCos']=(_0x452e0d-0.5)/_0x3bbf8e,_0x7bf815['fHAngleSin']=(0.5-_0x360962)/_0x3bbf8e;var _0x5d5169=_0x3bbf8e*_0x4d4446;_0x7bf815['fVAngleCos']=Math['cos'](_0x5d5169),_0x7bf815['fVAngleSin']=Math['sin'](_0x5d5169);}return _0x1b3061;}},{'key':'ComputeAngleHorizontal','value':function(_0x5c4df8,_0x55be39,_0x25b6a9){var _0x167d7d,_0x24db45,_0x190412,_0x17f298,_0x300b8f,_0x422742,_0xd88ff9,_0x389cf7=_0x5c4df8;return(_0x55be39-(_0x300b8f=0.5))*(_0x55be39-_0x300b8f)+(_0x389cf7-_0x300b8f)*(_0x389cf7-_0x300b8f)>0.25?_0x4a3918:(_0x422742=(_0x55be39-_0x300b8f)/_0x300b8f*_0x4d4446/0x2,_0x167d7d=Math['cos'](_0x422742),_0x24db45=Math['sin'](_0x422742),(_0x389cf7-_0x300b8f)/_0x300b8f/_0x167d7d>0x1||(_0x389cf7-_0x300b8f)/_0x300b8f/_0x167d7d<-0x1?_0x4a3918:(_0xd88ff9=(_0x389cf7-_0x300b8f)/_0x300b8f/_0x167d7d*_0x4d4446/0x2,_0x190412=Math['cos'](_0xd88ff9),_0x17f298=Math['sin'](_0xd88ff9),_0x25b6a9['fVAngleCos']=_0x167d7d,_0x25b6a9['fVAngleSin']=_0x24db45,_0x25b6a9['fHAngleCos']=_0x190412,_0x25b6a9['fHAngleSin']=_0x17f298,_0x1b3061));}},{'key':'IsInImage','value':function(_0x511289,_0x2091b2,_0x16ec14,_0x2d34e8,_0x38d844,_0x18e85b,_0x151a18){return 0x1!=this['IsOutofImage'](_0x511289,_0x2091b2,_0x16ec14,_0x2d34e8,_0x38d844['fHAngleCos'],_0x38d844['fHAngleSin'],_0x38d844['fVAngleCos'],_0x38d844['fVAngleSin'],_0x18e85b,0x1,0.5,_0x151a18)&&(0x1!=this['IsOutofImage'](_0x511289,_0x2091b2,_0x16ec14,_0x2d34e8,_0x38d844['fHAngleCos'],_0x38d844['fHAngleSin'],_0x38d844['fVAngleCos'],_0x38d844['fVAngleSin'],_0x18e85b,0x0,0.5,_0x151a18)&&(0x1!=this['IsOutofImage'](_0x511289,_0x2091b2,_0x16ec14,_0x2d34e8,_0x38d844['fHAngleCos'],_0x38d844['fHAngleSin'],_0x38d844['fVAngleCos'],_0x38d844['fVAngleSin'],_0x18e85b,0.5,0x1,_0x151a18)&&(0x1!=this['IsOutofImage'](_0x511289,_0x2091b2,_0x16ec14,_0x2d34e8,_0x38d844['fHAngleCos'],_0x38d844['fHAngleSin'],_0x38d844['fVAngleCos'],_0x38d844['fVAngleSin'],_0x18e85b,0.5,0x0,_0x151a18)&&(0x1!=this['IsOutofImage'](_0x511289,_0x2091b2,_0x16ec14,_0x2d34e8,_0x38d844['fHAngleCos'],_0x38d844['fHAngleSin'],_0x38d844['fVAngleCos'],_0x38d844['fVAngleSin'],_0x18e85b,0x0,0x0,_0x151a18)&&(0x1!=this['IsOutofImage'](_0x511289,_0x2091b2,_0x16ec14,_0x2d34e8,_0x38d844['fHAngleCos'],_0x38d844['fHAngleSin'],_0x38d844['fVAngleCos'],_0x38d844['fVAngleSin'],_0x18e85b,0x0,0x1,_0x151a18)&&(0x1!=this['IsOutofImage'](_0x511289,_0x2091b2,_0x16ec14,_0x2d34e8,_0x38d844['fHAngleCos'],_0x38d844['fHAngleSin'],_0x38d844['fVAngleCos'],_0x38d844['fVAngleSin'],_0x18e85b,0x1,0x1,_0x151a18)&&0x1!=this['IsOutofImage'](_0x511289,_0x2091b2,_0x16ec14,_0x2d34e8,_0x38d844['fHAngleCos'],_0x38d844['fHAngleSin'],_0x38d844['fVAngleCos'],_0x38d844['fVAngleSin'],_0x18e85b,0x1,0x0,_0x151a18)))))));}},{'key':'IsOutofImage','value':function(_0x383ef0,_0x5c9b75,_0x26a2c4,_0x36a077,_0x1d0521,_0xd4b289,_0x13d31e,_0x5418b6,_0x3b6ec6,_0x51d0af,_0x495de0,_0xdefcf9){var _0x548c34,_0x13f452,_0x269b1d,_0x503837,_0x3fbfdc,_0x47f352,_0x360b79,_0x45ad87,_0x2fad24,_0x1de875,_0x295881,_0x4e0e15,_0x1599d5;if(0x1,_0x295881=(_0x383ef0+_0x5c9b75)/0x2*0x1,_0x4e0e15=(_0x26a2c4+_0x36a077)/0x2*(_0x1de875=(_0x5c9b75-_0x383ef0)/(_0x36a077-_0x26a2c4)),_0x1599d5=(_0x5c9b75-_0x383ef0)/0x2*0x1,_0xdefcf9==_0x24b5aa['SR_DE_FISH_PTZ_CEILING']){if(_0x13f452=_0x51d0af-0.5,_0x269b1d=(_0x548c34=0.5-_0x495de0)*_0x13d31e+(_0x47f352=_0x3b6ec6)*_0x5418b6,(_0x360b79=_0x47f352*_0x13d31e-_0x548c34*_0x5418b6)<=0x0)return!0x0;_0x2fad24=Math['sqrt'](_0x13f452*_0x13f452+_0x269b1d*_0x269b1d);var _0xb77393=Math['sqrt'](_0x13f452*_0x13f452+_0x269b1d*_0x269b1d+_0x360b79*_0x360b79),_0x143e24=Math['asin'](_0x2fad24/_0xb77393)/1.5707963*0.5;if(_0x3fbfdc=(-((_0x13f452=_0x143e24*_0x13f452/_0x2fad24)*_0xd4b289+(_0x269b1d=_0x143e24*_0x269b1d/_0x2fad24)*_0x1d0521)*_0x1599d5*0x2+_0x4e0e15)/_0x1de875,(_0x503837=((_0x13f452*_0x1d0521-_0x269b1d*_0xd4b289)*_0x1599d5*0x2+_0x295881)/0x1)<0x0||_0x503837>0x1||_0x3fbfdc<0x0||_0x3fbfdc>0x1)return!0x0;}if(_0xdefcf9==_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']){if(_0x13f452=_0x51d0af-0.5,_0x269b1d=(_0x548c34=_0x495de0-0.5)*_0x13d31e+(_0x47f352=_0x3b6ec6)*_0x5418b6,(_0x360b79=_0x47f352*_0x13d31e-_0x548c34*_0x5418b6)<=0x0)return!0x0;_0x2fad24=Math['sqrt'](_0x13f452*_0x13f452+_0x269b1d*_0x269b1d);var _0x53034b=Math['sqrt'](_0x13f452*_0x13f452+_0x269b1d*_0x269b1d+_0x360b79*_0x360b79),_0x36f94e=Math['asin'](_0x2fad24/_0x53034b)/1.5707963*0.5;if(_0x3fbfdc=(((_0x13f452=_0x36f94e*_0x13f452/_0x2fad24)*_0xd4b289+(_0x269b1d=_0x36f94e*_0x269b1d/_0x2fad24)*_0x1d0521)*_0x1599d5*0x2+_0x4e0e15)/_0x1de875,(_0x503837=((_0x13f452*_0x1d0521-_0x269b1d*_0xd4b289)*_0x1599d5*0x2+_0x295881)/0x1)<0x0||_0x503837>0x1||_0x3fbfdc<0x0||_0x3fbfdc>0x1)return!0x0;}if(_0xdefcf9==_0x24b5aa['SR_DE_FISH_PTZ_WALL']){if(_0x503837=(_0x13f452=_0x51d0af-0.5)*_0x1d0521+(_0x360b79=(_0x47f352=_0x3b6ec6)*_0x13d31e-(_0x548c34=_0x495de0-0.5)*_0x5418b6)*_0xd4b289,_0x3fbfdc=_0x269b1d=_0x548c34*_0x13d31e+_0x47f352*_0x5418b6,(_0x45ad87=_0x360b79*_0x1d0521-_0x13f452*_0xd4b289)<=0x0)return!0x0;_0x2fad24=Math['sqrt'](_0x503837*_0x503837+_0x3fbfdc*_0x3fbfdc);var _0x36cc9d=Math['sqrt'](_0x503837*_0x503837+_0x3fbfdc*_0x3fbfdc+_0x45ad87*_0x45ad87),_0x2ccca5=Math['asin'](_0x2fad24/_0x36cc9d)/1.5707963*0.5;if(_0x3fbfdc=(_0x2ccca5*_0x3fbfdc/_0x2fad24*_0x1599d5*0x2+_0x4e0e15)/_0x1de875,(_0x503837=(_0x2ccca5*_0x503837/_0x2fad24*_0x1599d5*0x2+_0x295881)/0x1)<0x0||_0x503837>0x1||_0x3fbfdc<0x0||_0x3fbfdc>0x1)return!0x0;}return!0x1;}},{'key':'ComputePTZPoints','value':function(){if(_0x514d22==this['nWndPort'])return _0x1f1f19;for(var _0x16cdc0=0x0;_0x16cdc0<_0x33feef;++_0x16cdc0)if(null!=this['pRenderParam'][_0x16cdc0]&&(_0x24b5aa['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x16cdc0]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x16cdc0]['nDisplayEffect']||_0x24b5aa['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x16cdc0]['nDisplayEffect'])){var _0x33edd1=_0x1b3061;if(this['nPTZDisplayMode']==_0x29bcd1){if(_0x33edd1=this['GetRangePoints'](_0x16cdc0),_0x1b3061!=_0x33edd1)continue;if(_0x33edd1=this['TransformPTZRangePoints'](_0x16cdc0),_0x1b3061!=_0x33edd1)continue;}else{if(this['nPTZDisplayMode']==_0x1f7677&&(_0x33edd1=this['GetRectPoints'](_0x16cdc0),_0x1b3061!=_0x33edd1))continue;}}return _0x1b3061;}},{'key':'GetWndPort','value':function(){return this['nWndPort'];}},{'key':'GetPTZDisplayMode','value':function(){return this['nPTZDisplayMode'];}},{'key':'GetPTZColor','value':function(_0x5b6ac5,_0x3d4c40){return _0x5b6ac5<0x0||_0x5b6ac5>=_0x33feef||null==_0x3d4c40?_0x4a3918:(_0x3d4c40['fA']=this['stPTZColor'][_0x5b6ac5]['fA'],_0x3d4c40['fR']=this['stPTZColor'][_0x5b6ac5]['fR'],_0x3d4c40['fG']=this['stPTZColor'][_0x5b6ac5]['fG'],_0x3d4c40['fB']=this['stPTZColor'][_0x5b6ac5]['fB'],null!=this['pPTZSetColor']&&(Math['abs'](this['pPTZSetColor'][_0x5b6ac5]['fA'])<_0x254b59||Math['abs'](this['pPTZSetColor'][_0x5b6ac5]['fR'])<_0x254b59||Math['abs'](this['pPTZSetColor'][_0x5b6ac5]['fG'])<_0x254b59||Math['abs'](this['pPTZSetColor'][_0x5b6ac5]['fB'])<_0x254b59)&&(_0x3d4c40['fA']=this['pPTZSetColor'][_0x5b6ac5]['fA'],_0x3d4c40['fR']=this['pPTZSetColor'][_0x5b6ac5]['fR'],_0x3d4c40['fG']=this['pPTZSetColor'][_0x5b6ac5]['fG'],_0x3d4c40['fB']=this['pPTZSetColor'][_0x5b6ac5]['fB']),_0x1b3061);}},{'key':'SetPTZColor','value':function(_0x1e911e,_0x3efa1c){if(_0x1e911e<0x0||_0x1e911e>=_0x33feef)return _0x4a3918;if(null==_0x3efa1c)return _0x4a3918;if(null==this['pPTZSetColor']){this['pPTZSetColor']=[];for(var _0x2f0f08=0x0;_0x2f0f08<_0x33feef;++_0x2f0f08)this['pPTZSetColor'][_0x2f0f08]={},this['pPTZSetColor'][_0x2f0f08]['fR']=0x0,this['pPTZSetColor'][_0x2f0f08]['fG']=0x0,this['pPTZSetColor'][_0x2f0f08]['fB']=0x0,this['pPTZSetColor'][_0x2f0f08]['fA']=0x1;}return this['pPTZSetColor'][_0x1e911e]['fR']=_0x3efa1c['fR'],this['pPTZSetColor'][_0x1e911e]['fG']=_0x3efa1c['fG'],this['pPTZSetColor'][_0x1e911e]['fB']=_0x3efa1c['fB'],this['pPTZSetColor'][_0x1e911e]['fA']=_0x3efa1c['fA'],_0x1b3061;}},{'key':'IsPTZSelected','value':function(_0x5d01fa){return!(_0x5d01fa<0x0||_0x5d01fa>=_0x33feef)&&this['bPTZSelected'][_0x5d01fa];}},{'key':'GetPTZPort','value':function(_0x14edcc,_0x4921d0,_0x47b98d){if(this['nWndPort']==_0x514d22)return _0x1f1f19;if(null==this['pRenderParam'][this['nWndPort']])return _0x1f1f19;var _0x4c5fd6=_0x33feef,_0x53e7df={};_0x53e7df['fX']=_0x14edcc,_0x53e7df['fY']=_0x4921d0;for(var _0x1b6a7b=0x0;_0x1b6a7b<_0x33feef;++_0x1b6a7b)this['bPTZSelected'][_0x1b6a7b]=!0x1;if(this['nPTZDisplayMode']==_0x29bcd1){switch(this['pRenderParam'][this['nWndPort']]['nDisplayEffect']){case _0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']:this['GetPointPano2FishFloor'](_0x53e7df,_0x14edcc,_0x4921d0);break;case _0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']:this['GetPointPano2FishCeiling'](_0x53e7df,_0x14edcc,_0x4921d0);break;case _0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:this['GetPointPano2FishWall'](_0x53e7df,_0x14edcc,_0x4921d0);}for(var _0x31ceff=0x0;_0x31ceff<_0x33feef;++_0x31ceff)if(0x0!=this['nOriPTZPointNum'][_0x31ceff]){var _0x2d749b={};_0x2d749b['fX']=this['pOriPTZPoints'][_0x31ceff][0x0]['fX'],_0x2d749b['fY']=this['pOriPTZPoints'][_0x31ceff][0x0]['fY'];var _0x7d7fcd={};_0x7d7fcd['fX']=this['pOriPTZPoints'][_0x31ceff][0x0]['fX'],_0x7d7fcd['fY']=this['pOriPTZPoints'][_0x31ceff][0x0]['fY'];for(var _0x166a64=0x1;_0x166a64<this['nOriPTZPointNum'][_0x31ceff];++_0x166a64)this['GetPTZRectange'](_0x2d749b,_0x7d7fcd,this['pOriPTZPoints'][_0x31ceff][_0x166a64]);if(_0x53e7df['fX']<=_0x2d749b['fX']&&_0x53e7df['fX']>=_0x7d7fcd['fX']&&_0x53e7df['fY']>=_0x7d7fcd['fY']&&_0x53e7df['fY']<=_0x2d749b['fY']){_0x4c5fd6=_0x31ceff;break;}}}else{if(this['nPTZDisplayMode']!=_0x1f7677)return _0x2a6293;for(var _0x2a54ae=0x0;_0x2a54ae<_0x33feef;++_0x2a54ae)if(_0x53e7df['fX']<=this['pRectPoints'][_0x2a54ae][0x2]['fX']&&_0x53e7df['fX']>=this['pRectPoints'][_0x2a54ae][0x0]['fX']&&_0x53e7df['fY']>=this['pRectPoints'][_0x2a54ae][0x0]['fY']&&_0x53e7df['fY']<=this['pRectPoints'][_0x2a54ae][0x2]['fY']){_0x4c5fd6=_0x2a54ae;break;}}return _0x4c5fd6<_0x33feef?(this['bPTZSelected'][_0x4c5fd6]=!0x0,_0x47b98d['nPTZPort']=_0x4c5fd6,_0x1b3061):_0x2a6293;}},{'key':'SetPTZPort','value':function(_0x4633fc){if(_0x4633fc<0x0||_0x4633fc>=_0x33feef)return _0x4a3918;for(var _0x49e8fb=0x0;_0x49e8fb<_0x33feef;++_0x49e8fb)this['bPTZSelected'][_0x49e8fb]=!0x1;if(this['nPTZDisplayMode']==_0x29bcd1){if(0x0==this['nOriPTZPointNum'][_0x4633fc])return _0x4a3918;this['bPTZSelected'][_0x4633fc]=!0x0;}else{if(0x0==this['nPTZRectNum'][_0x4633fc])return _0x4a3918;this['bPTZSelected'][_0x4633fc]=!0x0;}return _0x1b3061;}},{'key':'GetPTZRectange','value':function(_0x268e6a,_0x42a046,_0x50c007){return _0x50c007['fX']<_0x42a046['fX']&&(_0x42a046['fX']=_0x50c007['fX']),_0x50c007['fY']<_0x42a046['fY']&&(_0x42a046['fY']=_0x50c007['fY']),_0x50c007['fX']>_0x268e6a['fX']&&(_0x268e6a['fX']=_0x50c007['fX']),_0x50c007['fY']>_0x268e6a['fY']&&(_0x268e6a['fY']=_0x50c007['fY']),_0x1b3061;}},{'key':'GetPTZPoints','value':function(_0x1dd843,_0x56033e,_0x58aa98){return _0x1dd843<0x0||_0x1dd843>=_0x33feef?_0x4a3918:null==this['pRenderParam'][this['nWndPort']]?_0x1f1f19:(_0x29bcd1==_0x58aa98?null!=this['pOriPTZPoints'][_0x1dd843]&&0x0!=this['nOriPTZPointNum'][_0x1dd843]&&(_0x56033e['pstPoints']=this['pOriPTZPoints'][_0x1dd843],_0x56033e['nPointNum']=this['nOriPTZPointNum'][_0x1dd843]):_0x1f7677==_0x58aa98&&null!=this['pRectPoints'][_0x1dd843]&&(_0x56033e['pstPoints']=this['pRectPoints'][_0x1dd843],_0x56033e['nPointNum']=0x4),_0x1b3061);}},{'key':'SetPTZDisplayMode','value':function(_0x5c6663){return this['nPTZDisplayMode']=_0x5c6663,this['ComputePTZPoints']();}},{'key':'GetDisplayEffect','value':function(_0x482509){return _0x482509<0x0||_0x482509>=_0x33feef||null==this['pRenderParam']?_0x24b5aa['SR_DE_NULL']:this['pRenderParam'][_0x482509]['nDisplayEffect'];}},{'key':'GetPTZFragmentPoints','value':function(_0x2ec401,_0xc3cffc,_0xdde696){if(_0x2ec401<0x0||_0x2ec401>=_0x33feef)return _0x4a3918;if(null==this['pPanoPTZPoints'][_0x2ec401]||0x0==this['nPanoPTZPointNum'][_0x2ec401])return _0x4a3918;var _0x18c623=this['nPTZFragmentNode'][_0x2ec401][_0xdde696];if(_0xc3cffc['nPointNum']=this['nPTZFragmentNode'][_0x2ec401][_0xdde696+0x1]-this['nPTZFragmentNode'][_0x2ec401][_0xdde696],_0xc3cffc['nPointNum']<0x0)return _0x1f1f19;_0xc3cffc['pstPoints']=[];for(var _0x292561=0x0;_0x292561<_0xc3cffc['nPointNum'];++_0x292561){var _0xcebe4d={};_0xcebe4d['fX']=this['pPanoPTZPoints'][_0x2ec401][_0x18c623+_0x292561]['fX'],_0xcebe4d['fY']=this['pPanoPTZPoints'][_0x2ec401][_0x18c623+_0x292561]['fY'],_0xc3cffc['pstPoints']['push'](_0xcebe4d);}return _0x1b3061;}},{'key':'GetPTZFragmentNum','value':function(_0x3d7f76){return _0x3d7f76<0x0||_0x3d7f76>=_0x33feef||0x0==this['nPTZFragmentNum'][_0x3d7f76]?0x0:this['nPTZFragmentNum'][_0x3d7f76];}},{'key':'CalcPTZFragmentPoints','value':function(_0x1548e4){if(_0x1548e4<0x0||_0x1548e4>=_0x33feef)return _0x4a3918;if(null==this['pPanoPTZPoints'][_0x1548e4]||0x0==this['nPanoPTZPointNum'][_0x1548e4])return _0x1f1f19;this['nPTZFragmentNode'][_0x1548e4][0x0]=0x0,this['nPTZFragmentNum'][_0x1548e4]=0x1;for(var _0x58816b=0x0,_0x3b47ee=0x0;_0x3b47ee<this['nPanoPTZPointNum'][_0x1548e4]-0x1;_0x3b47ee++)Math['abs'](this['pPanoPTZPoints'][_0x1548e4][_0x3b47ee+0x1]['fX']-this['pPanoPTZPoints'][_0x1548e4][_0x3b47ee]['fX'])>0.5&&(_0x58816b=this['nPTZFragmentNum'][_0x1548e4],this['nPTZFragmentNode'][_0x1548e4][_0x58816b]=_0x3b47ee+0x1,this['nPTZFragmentNum'][_0x1548e4]=this['nPTZFragmentNum'][_0x1548e4]+0x1);var _0x5977af=this['nPanoPTZPointNum'][_0x1548e4];return Math['abs'](this['pPanoPTZPoints'][_0x1548e4][0x0]['fX']-this['pPanoPTZPoints'][_0x1548e4][_0x5977af-0x1]['fX'])<0.5&&(this['pPanoPTZPoints'][_0x1548e4][_0x5977af]['fX']=this['pPanoPTZPoints'][_0x1548e4][0x0]['fX'],this['pPanoPTZPoints'][_0x1548e4][_0x5977af]['fY']=this['pPanoPTZPoints'][_0x1548e4][0x0]['fY'],this['nPanoPTZPointNum'][_0x1548e4]=this['nPanoPTZPointNum'][_0x1548e4]+0x1),_0x58816b=this['nPTZFragmentNum'][_0x1548e4],this['nPTZFragmentNode'][_0x1548e4][_0x58816b]=this['nPanoPTZPointNum'][_0x1548e4],_0x1b3061;}},{'key':'IsPortAllocated','value':function(_0x1f6de2){return this['bPortAllocated'][_0x1f6de2];}},{'key':'GetPointFish2PanoCeiling','value':function(_0x605342,_0x2d9e07,_0x44f448){if(null==this['pRenderParam'][this['nWndPort']])return _0x1f1f19;if(null==_0x605342)return _0x4a3918;var _0x518d63,_0x488821;_0x518d63=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x488821=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x1b2ada,_0x51fb8c=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&(_0x1b2ada=0x1*-this['fRX1'])>_0x51fb8c&&(_0x51fb8c=_0x1b2ada),this['fRX2']>0x1&&(_0x1b2ada=0x1*(this['fRX2']-0x1))>_0x51fb8c&&(_0x51fb8c=_0x1b2ada),this['fRY1']<0x0&&(_0x1b2ada=-this['fRY1']*_0x518d63)>_0x51fb8c&&(_0x51fb8c=_0x1b2ada),this['fRY2']>0x1&&(_0x1b2ada=(this['fRY2']-0x1)*_0x518d63)>_0x51fb8c&&(_0x51fb8c=_0x1b2ada));var _0x4ee2d8,_0x397092=_0x51fb8c/_0x488821,_0x4ddeb0={};if(_0x4ddeb0['fX']=0x0,_0x4ddeb0['fY']=0x0,Math['abs'](_0x2d9e07-0.5)<_0x254b59&&Math['abs'](_0x44f448-0.5)<_0x254b59)return _0x2a6293;var _0x27a2ec={},_0x245205={};_0x27a2ec['fX']=_0x2d9e07-0.5,_0x27a2ec['fY']=_0x44f448-0.5,_0x245205['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x245205['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x5defe9=Math['sqrt'](_0x27a2ec['fX']*_0x27a2ec['fX']+_0x27a2ec['fY']*_0x27a2ec['fY']),_0x3d4235=Math['sqrt'](_0x245205['fX']*_0x245205['fX']+_0x245205['fY']*_0x245205['fY']);return _0x4ee2d8=Math['acos']((_0x27a2ec['fX']*_0x245205['fX']+_0x27a2ec['fY']*_0x245205['fY'])/(_0x5defe9*_0x3d4235)),_0x27a2ec['fX']*_0x245205['fY']-_0x27a2ec['fY']*_0x245205['fX']>0x0&&(_0x4ee2d8=6.2831852-_0x4ee2d8),_0x4ddeb0['fX']=_0x4ee2d8/6.2831853,_0x4ddeb0['fY']=(0x2*(0.5-_0x5defe9)-_0x397092)/(0.8-_0x397092),_0x4ddeb0['fY']>=0x0&&_0x4ddeb0['fX']>=0x0&&_0x4ddeb0['fY']<=0x1&&_0x4ddeb0['fX']<=0x1?(_0x605342['fX']=_0x4ddeb0['fX'],_0x605342['fY']=_0x4ddeb0['fY'],_0x1b3061):_0x4a3918;}},{'key':'GetPointFish2PanoFloor','value':function(_0x39cd77,_0xbc2f37,_0x205278){if(null==this['pRenderParam'][this['nWndPort']])return _0x1f1f19;if(null==_0x39cd77)return _0x4a3918;var _0x25efce,_0x38ecd5;_0x25efce=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x38ecd5=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x233a2b,_0x2afacc=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&(_0x233a2b=0x1*-this['fRX1'])>_0x2afacc&&(_0x2afacc=_0x233a2b),this['fRX2']>0x1&&(_0x233a2b=0x1*(this['fRX2']-0x1))>_0x2afacc&&(_0x2afacc=_0x233a2b),this['fRY1']<0x0&&(_0x233a2b=-this['fRY1']*_0x25efce)>_0x2afacc&&(_0x2afacc=_0x233a2b),this['fRY2']>0x1&&(_0x233a2b=(this['fRY2']-0x1)*_0x25efce)>_0x2afacc&&(_0x2afacc=_0x233a2b));var _0x132e4b,_0x99499a=_0x2afacc/_0x38ecd5,_0x2e8792={'fX':0x0,'fY':0x0};if(Math['abs'](_0xbc2f37-0.5)<_0x254b59&&Math['abs'](_0x205278-0.5)<_0x254b59)return _0x2a6293;var _0x5fc5c7={},_0x485ff5={};_0x5fc5c7['fX']=_0xbc2f37-0.5,_0x5fc5c7['fY']=_0x205278-0.5,_0x485ff5['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x485ff5['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x15d4cf=Math['sqrt'](_0x5fc5c7['fX']*_0x5fc5c7['fX']+_0x5fc5c7['fY']*_0x5fc5c7['fY']),_0x15bd2a=Math['sqrt'](_0x485ff5['fX']*_0x485ff5['fX']+_0x485ff5['fY']*_0x485ff5['fY']);return _0x132e4b=Math['acos']((_0x5fc5c7['fX']*_0x485ff5['fX']+_0x5fc5c7['fY']*_0x485ff5['fY'])/(_0x15d4cf*_0x15bd2a)),_0x5fc5c7['fX']*_0x485ff5['fY']-_0x5fc5c7['fY']*_0x485ff5['fX']>0x0&&(_0x132e4b=6.2831852-_0x132e4b),_0x2e8792['fX']=0x1-_0x132e4b/6.2831853,_0x2e8792['fY']=0x1-(0x2*(0.5-_0x15d4cf)-_0x99499a)/(0.8-_0x99499a),_0x2e8792['fY']>=0x0&&_0x2e8792['fX']>=0x0&&_0x2e8792['fY']<=0x1&&_0x2e8792['fX']<=0x1?(_0x39cd77['fX']=_0x2e8792['fX'],_0x39cd77['fY']=_0x2e8792['fY'],_0x1b3061):_0x4a3918;}},{'key':'GetPointFish2PanoWall','value':function(_0x54d9c7,_0x5de4cd,_0xcaae4a){if(null==this['pRenderParam'][this['nWndPort']])return _0x1f1f19;if(null==_0x54d9c7)return _0x4a3918;var _0xbc81f5,_0x1fc0cc;_0xbc81f5=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x1fc0cc=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x455c69,_0x10bf6c,_0x4a5cbb,_0x2acee9,_0x4ba45d,_0x3fee13=0x0,_0x59638b=0x1,_0x5ddf70=0.1,_0xab5de3=0.9;this['fRX1']<0x0&&(_0x455c69=0x1*-this['fRX1'],_0x3fee13=_0x455c69/=0x2*_0x1fc0cc),this['fRX2']>0x1&&(_0x10bf6c=0x1*(this['fRX2']-0x1),_0x59638b=0x1-(_0x10bf6c/=0x2*_0x1fc0cc)),this['fRY1']<0x0&&(_0x4a5cbb=-this['fRY1']*_0xbc81f5,_0x5ddf70=(_0x4a5cbb/=0x2*_0x1fc0cc)>0.1?_0x4a5cbb:0.1),this['fRY2']>0x1&&(_0x2acee9=(this['fRY2']-0x1)*_0xbc81f5,_0xab5de3=(_0x2acee9/=0x2*_0x1fc0cc)>0x1-0.9?0x1-_0x2acee9:0.9);var _0x5a3559={'fX':0x0,'fY':0x0},_0x21c733=0x2*_0x5de4cd*_0x1fc0cc,_0x4b7317=0x2*_0xcaae4a*_0x1fc0cc;return _0x4ba45d=Math['sqrt'](_0x1fc0cc*_0x1fc0cc-(_0x4b7317-_0x1fc0cc)*(_0x4b7317-_0x1fc0cc)),Math['abs'](_0x4ba45d)<_0x254b59?SR_ERR_PARAM:(_0x5de4cd=_0x1fc0cc*(_0x21c733-_0x1fc0cc)/_0x4ba45d+_0x1fc0cc,_0xcaae4a=_0x4b7317,_0x5a3559['fX']=(_0x5de4cd-0x2*_0x3fee13*_0x1fc0cc)/(0x2*(_0x59638b-_0x3fee13)*_0x1fc0cc),_0x5a3559['fY']=(_0xcaae4a-0x2*_0x5ddf70*_0x1fc0cc)/(0x2*(_0xab5de3-_0x5ddf70)*_0x1fc0cc),_0x5a3559['fY']>=0x0&&_0x5a3559['fX']>=0x0&&_0x5a3559['fY']<=0x1&&_0x5a3559['fX']<=0x1?(_0x54d9c7['fX']=_0x5a3559['fX'],_0x54d9c7['fY']=_0x5a3559['fY'],_0x1b3061):_0x4a3918);}},{'key':'UpdateRangeParam','value':function(_0x1127c9,_0x579ea0){if(null==this['pRenderParam'][_0x1127c9])return _0x1f1f19;if(_0x579ea0<0.00001||_0x579ea0>0.6)return _0x4a3918;var _0x5ab970=0x0;return _0x24b5aa['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x1127c9]['nDisplayEffect']&&_0x24b5aa['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x1127c9]['nDisplayEffect']&&_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x1127c9]['nDisplayEffect']||(_0x5ab970=0x7*_0x579ea0+0.8,this['IsInImage'](this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2'],this['pRenderParam'][_0x1127c9]['fCosH'],this['pRenderParam'][_0x1127c9]['fSinH'],this['pRenderParam'][_0x1127c9]['fCosV'],this['pRenderParam'][_0x1127c9]['fSinV'],_0x5ab970,this['pRenderParam'][_0x1127c9]['nDisplayEffect']))?(this['pRenderParam'][_0x1127c9]['fZoom']=_0x5ab970,_0x1b3061):_0x4a3918;}}]),_0x507dc0;}()),_0x866017=0x20,_0x2626c8=(function(){function _0xfd894(){_0x4fb29f(this,_0xfd894),this['renderEngine']='webgl',this['oVideoHandle']=null,this['mainCanvasID']=null,this['curTimestamp']=0x0,this['mainSubPort']=0x0,this['mainVaildSubPort']=0x0,this['mainFECCorrect']=_0x24b5aa['SR_DE_NULL'],this['FECErrorCode']=0x0,this['subPortNum']=0x0,this['FECShowMode']=_0x29bcd1,this['pFishParamManager']=null,this['InitFECParam'](),this['privateLinesInfo']=[],this['privateFontsInfo']=[],this['privateImageInfo']=[],this['bSRCallBackFlag']=!0x1,this['curLinesInfo']=null,this['curFontsInfo']={},this['curImagesInfo']={},this['maxPrivateLineTimeStamp']=0x0,this['hasSetFECParamManager']=!0x1,this['pWaterFontParam']=[],this['pWaterImageParam']=[],this['waterMarkImageIndex']=0x0,this['waterMarkImageMax']=0x1,this['aPOSAdaptBuf']=[],this['displayWidth']=0x0,this['displayHeight']=0x0;}return _0x1706bb(_0xfd894,[{'key':'InitDisplay','value':function(_0x1c87d4,_0x3d53f0,_0x565d1b){return this['renderEngine']=_0x3d53f0,this['mainCanvasID']=_0x1c87d4,'2d'===this['renderEngine']||'2D'===this['renderEngine']?(this['oVideoHandle']=new _0x1588a4(),console['log']('2d\\x20render')):(this['oVideoHandle']=new _0x4fb568(),this['mainFECCorrect']!=_0x24b5aa['SR_DE_NULL']&&(null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x454116()),this['oVideoHandle']['SR_SetFishParamManager'](this['pFishParamManager']),this['hasSetFECParamManager']=!0x0),console['log']('webgl\\x20render')),this['oVideoHandle']['SR_Init'](_0x1c87d4,_0x565d1b),this['mainVaildSubPort']=this['oVideoHandle']['SR_AddSubPort'](this['mainFECCorrect']),-0x1==this['mainVaildSubPort']?(console['info']('%c\\x20InitDisplay\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',this['mainVaildSubPort']),0x0):(null==this['stFishEyeManager'][0x0]['pRender']&&this['mainFECCorrect']!==_0x24b5aa['SR_DE_NULL']&&(this['stFishEyeManager'][0x0]['pRender']=this['oVideoHandle'],this['stFishEyeManager'][0x0]['nSubPort']=0x0,this['stFishEyeManager'][0x0]['sCanvasID']=this['mainCanvasID'],this['stFishEyeManager'][0x0]['bUsed']=0x1,this['stFishEyeManager'][0x0]['bInited']=0x1,this['stFishEyeManager'][0x0]['nValidSubPort']=this['mainVaildSubPort']),0x1);}},{'key':'ReleaseDisplay','value':function(){if(null!=this['oVideoHandle']&&(this['oVideoHandle']['SR_DelSubPort'](this['mainVaildSubPort']),this['oVideoHandle']['SR_Destroy'](),this['oVideoHandle']=null),this['subPortNum']>0x0){for(var _0x34b422=0x1;_0x34b422<_0x866017;_0x34b422++)0x0!=this['stFishEyeManager'][_0x34b422]['nSubPort']&&null!=this['stFishEyeManager'][_0x34b422]['sCanvasID']&&0x0!=this['stFishEyeManager'][_0x34b422]['bInited']&&(this['FEC_Disable'](_0x34b422),this['FEC_DelPort'](_0x34b422));}for(var _0x13546e=0x0;_0x13546e<_0x866017;_0x13546e++)this['stFishEyeManager'][_0x13546e]['pRender']=null;return this['stFishEyeManager']['splice'](0x0,this['stFishEyeManager']['length']),this['stFishParam']['splice'](0x0,this['stFishParam']['length']),null!=this['pFishParamManager']&&(this['pFishParamManager']['DeInit'](),this['pFishParamManager']=null),this['FECShowMode']=_0x29bcd1,this['DeInitPrivateParam'](),0x1;}},{'key':'DeInitPrivateParam','value':function(){this['privateLinesInfo']['splice'](0x0,this['privateLinesInfo']['length']),this['privateFontsInfo']['splice'](0x0,this['privateFontsInfo']['length']),this['privateImageInfo']['splice'](0x0,this['privateImageInfo']['length']),this['pWaterFontParam']['splice'](0x0,this['pWaterFontParam']['length']),this['pWaterImageParam']['splice'](0x0,this['pWaterImageParam']['length']),this['bSRCallBackFlag']=!0x1,this['curLinesInfo']=null;}},{'key':'DisplayFrame','value':function(_0x77970e,_0x4be370,_0x43be13,_0x5b83ff,_0x4d3aa0,_0xd32bdf){var _0x4794ed=this;return new Promise(function(_0x4318fd){var _0x5234e0=-0x1;if(null!=_0x77970e&&(_0x5234e0=_0x5b83ff),_0x4794ed['bSRCallBackFlag']||(null!=_0x4794ed['oVideoHandle']&&_0x4794ed['oVideoHandle']['SR_SetCallBack'](_0x4794ed['WebGLDisplayCallBack'],_0x4794ed,_0x1bccf7),_0x4794ed['bSRCallBackFlag']=!0x0),null!=_0x77970e){if(0x0==_0x4794ed['privateLinesInfo']['length']&&0x0==_0x4794ed['privateFontsInfo']['length']&&0x0==_0x4794ed['privateImageInfo']['length']||(_0x4794ed['curTimestamp']=_0x5234e0,_0x4794ed['FindIntelNodefromList'](_0x4794ed['curTimestamp'])),null!=_0x4794ed['oVideoHandle']&&_0x4794ed['oVideoHandle']['SR_Draw'](_0x77970e,_0x4be370,_0x43be13,_0x4d3aa0,_0xd32bdf),_0x4794ed['subPortNum']>0x0){for(var _0x514d47=0x1;_0x514d47<_0x866017;_0x514d47++)0x0!=_0x4794ed['stFishEyeManager'][_0x514d47]['nSubPort']&&null!=_0x4794ed['stFishEyeManager'][_0x514d47]['sCanvasID']&&0x0!=_0x4794ed['stFishEyeManager'][_0x514d47]['bInited']&&null!=_0x4794ed['stFishEyeManager'][_0x514d47]['pRender']&&_0x4794ed['stFishEyeManager'][_0x514d47]['pRender']['SR_Draw'](_0x77970e,_0x4be370,_0x43be13,null,null);}_0x4794ed['displayWidth']=_0x4be370,_0x4794ed['displayHeight']=_0x43be13;}_0x4318fd(_0x5234e0);});}},{'key':'SetDisplayRect','value':function(_0x17ef09,_0x3e1ea7,_0x62bf03,_0x4fa689){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetDisplayRect'](_0x17ef09,_0x3e1ea7,_0x62bf03,_0x4fa689,_0x24d6ec):0x0;}},{'key':'SetCanvasSize','value':function(_0x536398,_0xeea55b){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetCanvasSize'](_0x536398,_0xeea55b):0x0;}},{'key':'GetCanvasSize','value':function(){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_GetCanvasSize']():0x0;}},{'key':'SetAntialias','value':function(_0x9f36bb){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetAntialias'](_0x9f36bb):0x0;}},{'key':'SetD3DPostProcess','value':function(_0x260144,_0x3092dc){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetImagePostProcess'](_0x260144,_0x3092dc):0x0;}},{'key':'InitFECParam','value':function(){this['stFishEyeManager']=[];for(var _0x3891f6=0x0;_0x3891f6<_0x866017;_0x3891f6++)this['stFishEyeManager'][_0x3891f6]={},this['stFishEyeManager'][_0x3891f6]['pRender']=null,this['stFishEyeManager'][_0x3891f6]['nSubPort']=0x0,this['stFishEyeManager'][_0x3891f6]['sCanvasID']=null,this['stFishEyeManager'][_0x3891f6]['bUsed']=0x0,this['stFishEyeManager'][_0x3891f6]['bInit']=0x0,this['stFishEyeManager'][_0x3891f6]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x3891f6]['emPlaceType']=_0xe61a6b,this['stFishEyeManager'][_0x3891f6]['emCorrectType']=_0x1f6d80,this['stFishEyeManager'][_0x3891f6]['emEffect']=_0x24b5aa['SR_DE_FISH_ORIGINAL'];this['stFishParam']=[];for(var _0xf1f498=0x0;_0xf1f498<_0x866017;_0xf1f498++)this['stFishParam'][_0xf1f498]={},this['stFishParam'][_0xf1f498]['nUpDateType']=0x0,this['stFishParam'][_0xf1f498]['stPTZParam']={},this['stFishParam'][_0xf1f498]['stPTZParam']['fPTZPositionX']=0x0,this['stFishParam'][_0xf1f498]['stPTZParam']['fPTZPositionY']=0x0,this['stFishParam'][_0xf1f498]['stCycleParam']={},this['stFishParam'][_0xf1f498]['stCycleParam']['fRadiusLeft']=0x0,this['stFishParam'][_0xf1f498]['stCycleParam']['fRadiusRight']=0x0,this['stFishParam'][_0xf1f498]['stCycleParam']['fRadiusTop']=0x0,this['stFishParam'][_0xf1f498]['stCycleParam']['fRadiusBottom']=0x0,this['stFishParam'][_0xf1f498]['fZoom']=0x0,this['stFishParam'][_0xf1f498]['fWideScanOffset']=0x0,this['stFishParam'][_0xf1f498]['stPTZColor']={},this['stFishParam'][_0xf1f498]['stPTZColor']['nR']=0x0,this['stFishParam'][_0xf1f498]['stPTZColor']['nG']=0x0,this['stFishParam'][_0xf1f498]['stPTZColor']['nB']=0x0,this['stFishParam'][_0xf1f498]['stPTZColor']['nAlpha']=0x0,this['stFishParam'][_0xf1f498]['stPTZSelect']={},this['stFishParam'][_0xf1f498]['stPTZSelect']['fTop']=0x0,this['stFishParam'][_0xf1f498]['stPTZSelect']['fBottom']=0x0,this['stFishParam'][_0xf1f498]['stPTZSelect']['fLeft']=0x0,this['stFishParam'][_0xf1f498]['stPTZSelect']['fRight']=0x0,this['stFishParam'][_0xf1f498]['nCut']=0x0;}},{'key':'FEC_SetCanvasID','value':function(_0x27297d){return this['mainFECCorrect']=_0x24b5aa['SR_DE_FISH_ORIGINAL'],0x1;}},{'key':'FEC_ResetCorrectType','value':function(_0x2b0b06,_0xee7806,_0x3403c7){if(!0x1===this['hasSetFECParamManager']&&(null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x454116()),this['oVideoHandle']['SR_SetFishParamManager'](this['pFishParamManager']),this['hasSetFECParamManager']=!0x0),_0x3403c7!=_0x1f6d80&&_0x3403c7!=_0x6e1995&&_0x3403c7!=_0x58eeae&&_0x3403c7!=_0x1dfea6&&_0x3403c7!=_0x37736a&&_0x3403c7!=_0x939021&&_0x3403c7!=_0x50a2e1&&_0x3403c7!=_0x47baa5&&_0x3403c7!=_0x233b51)return console['log']('%c\\x2020231122\\x20hardDecoder\\x20not\\x20support\\x20correctType:%d','color:red',_0x3403c7),this['FECErrorCode']=0x10,0x0;if(0x1!=this['FECParamJudge'](_0x2b0b06,_0xee7806,_0x3403c7))return 0x0;var _0x1931fe;if(_0x1931fe=this['_ConvertDisplayEffect'](_0xee7806,_0x3403c7),0x0==_0x2b0b06&&null==this['stFishEyeManager'][_0x2b0b06]['pRender']&&(this['stFishEyeManager'][_0x2b0b06]['pRender']=this['oVideoHandle'],this['stFishEyeManager'][_0x2b0b06]['nSubPort']=_0x2b0b06,this['stFishEyeManager'][_0x2b0b06]['sCanvasID']=this['mainCanvasID'],this['stFishEyeManager'][_0x2b0b06]['bUsed']=0x1,this['stFishEyeManager'][_0x2b0b06]['bInited']=0x1,this['stFishEyeManager'][_0x2b0b06]['nValidSubPort']=this['mainVaildSubPort'],this['stFishEyeManager'][_0x2b0b06]['emPlaceType']=_0xee7806,this['stFishEyeManager'][_0x2b0b06]['emCorrectType']=_0x3403c7,this['stFishEyeManager'][_0x2b0b06]['emEffect']=_0x1931fe,this['mainFECCorrect']=_0x1931fe),null!=this['stFishEyeManager'][_0x2b0b06]['pRender']){this['stFishEyeManager'][_0x2b0b06]['pRender']['SR_DelSubPort'](this['stFishEyeManager'][_0x2b0b06]['nValidSubPort']);var _0x41192a=this['stFishEyeManager'][_0x2b0b06]['pRender']['SR_AddSubPort'](_0x1931fe);if(-0x1==_0x41192a)return console['info']('%c\\x20FEC_ResetCorrectType\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',_0x41192a),0x0;if(this['stFishEyeManager'][_0x2b0b06]['nValidSubPort']=_0x41192a,this['stFishEyeManager'][_0x2b0b06]['emPlaceType']=_0xee7806,this['stFishEyeManager'][_0x2b0b06]['emCorrectType']=_0x3403c7,this['stFishEyeManager'][_0x2b0b06]['emEffect']=_0x1931fe,_0x1dfea6<=this['stFishEyeManager'][_0x2b0b06]['emCorrectType']){var _0x1146fd=this['stFishEyeManager'][_0x2b0b06]['pRender']['SR_SetRenderState'](_0x596e5b,0x0);_0x1b3061!=_0x1146fd&&console['log']('>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a',_0x1146fd);}}return this['FECShowMode']>0x0&&null!=this['stFishEyeManager'][_0x2b0b06]['pRender']&&this['stFishEyeManager'][_0x2b0b06]['pRender']['SR_SetPTZDisplayMode'](this['FECShowMode']),0x0==_0x2b0b06&&(this['mainVaildSubPort']=this['stFishEyeManager'][_0x2b0b06]['nValidSubPort']),0x1;}},{'key':'FEC_GetPort','value':function(_0x3b905e,_0x195c0b){if(_0x195c0b!=_0x1f6d80&&_0x195c0b!=_0x6e1995&&_0x195c0b!=_0x58eeae&&_0x195c0b!=_0x1dfea6&&_0x195c0b!=_0x37736a&&_0x195c0b!=_0x939021&&_0x195c0b!=_0x50a2e1&&_0x195c0b!=_0x47baa5&&_0x195c0b!=_0x233b51)return console['log']('%c\\x2020231112\\x20hardDecoder\\x20not\\x20support\\x20emCorrectType:%d','color:red',_0x195c0b),this['FECErrorCode']=0x10,-0x1;var _0x276c41;if(0x1!=this['FECParamJudge'](-0x1,_0x3b905e,_0x195c0b))return-0x1;var _0x1cb6dd=0x0;for(_0x276c41=0x1;_0x276c41<_0x866017;_0x276c41++)if(0x0==this['stFishEyeManager'][_0x276c41]['nSubPort']&&0x0==this['stFishEyeManager'][_0x276c41]['bUsed']){this['stFishEyeManager'][_0x276c41]['nSubPort']=_0x276c41,this['stFishEyeManager'][_0x276c41]['nValidSubPort']=-0x1,this['stFishEyeManager'][_0x276c41]['bUsed']=0x1,this['stFishEyeManager'][_0x276c41]['emPlaceType']=_0x3b905e,this['stFishEyeManager'][_0x276c41]['emCorrectType']=_0x195c0b,_0x1cb6dd=_0x276c41;break;}if(_0x866017==_0x276c41)return console['info']('%c\\x20FEC_GetPort-12\\x20fish\\x20subport\\x20max','color:\\x20red'),this['FECErrorCode']=0x504,-0x1;var _0x167060;return _0x167060=this['_ConvertDisplayEffect'](this['stFishEyeManager'][_0x1cb6dd]['emPlaceType'],this['stFishEyeManager'][_0x1cb6dd]['emCorrectType']),_0x24b5aa['SR_DE_FISH_ORIGINAL']!=_0x167060?(0x0==this['stFishEyeManager'][_0x1cb6dd]['bInited']&&(this['stFishEyeManager'][_0x1cb6dd]['emEffect']=_0x167060,this['stFishEyeManager'][_0x1cb6dd]['bInited']=0x0,this['stFishParam'][_0x1cb6dd]['fZoom']=0.005,this['stFishParam'][_0x1cb6dd]['stPTZParam']['fPTZPositionX']=0.5,this['stFishParam'][_0x1cb6dd]['stPTZParam']['fPTZPositionY']=0.5,this['stFishParam'][_0x1cb6dd]['fWideScanOffset']=0x0),this['FECErrorCode']=0x0,this['subPortNum']++,_0x1cb6dd):_0x1cb6dd<_0x866017&&0x0==this['stFishEyeManager'][_0x1cb6dd]['bInited']?(this['stFishEyeManager'][_0x1cb6dd]['emEffect']=_0x167060,this['stFishEyeManager'][_0x1cb6dd]['bInited']=0x0,this['stFishParam'][_0x1cb6dd]['fZoom']=0x0,this['stFishParam'][_0x1cb6dd]['stPTZParam']['fPTZPositionX']=0x0,this['stFishParam'][_0x1cb6dd]['stPTZParam']['fPTZPositionY']=0x0,this['stFishParam'][_0x1cb6dd]['fWideScanOffset']=0x0,this['FECErrorCode']=0x0,this['subPortNum']++,_0x1cb6dd):(this['stFishEyeManager'][_0x276c41]['pRender']=null,this['stFishEyeManager'][_0x276c41]['nSubPort']=0x0,this['stFishEyeManager'][_0x276c41]['sCanvasID']=null,this['stFishEyeManager'][_0x276c41]['bUsed']=0x0,this['stFishEyeManager'][_0x276c41]['bInited']=0x0,this['stFishEyeManager'][_0x276c41]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x276c41]['emPlaceType']=_0xe61a6b,this['stFishEyeManager'][_0x276c41]['emCorrectType']=_0x1f6d80,this['stFishEyeManager'][_0x276c41]['emEffect']=_0x24b5aa['SR_DE_FISH_ORIGINAL'],this['FECErrorCode']=_0xab93fd,-0x1);}},{'key':'FECParamJudge','value':function(_0x30c92f,_0x450ac8,_0x59541a){if((_0x1afba3==_0x450ac8||_0xe61a6b==_0x450ac8)&&_0x939021==_0x59541a)return console['info']('%c\\x20FEC_GetPort-1\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20lat','color:\\x20red'),this['FECErrorCode']=_0xab93fd,0x0;if(_0x4ef29e==_0x450ac8&&_0x50a2e1==_0x59541a)return console['info']('%c\\x20FEC_GetPort-2\\x20wall\\x20not\\x20support\\x20cylinger','color:\\x20red'),this['FECErrorCode']=_0xab93fd,0x0;if(_0x4ef29e==_0x450ac8&&_0xdb36bc==_0x59541a)return console['info']('%c\\x20FEC_GetPort-3\\x20wall\\x20not\\x20support\\x20split\\x20cylinger','color:\\x20red'),this['FECErrorCode']=_0xab93fd,0x0;if((_0x1afba3==_0x450ac8||_0xe61a6b==_0x450ac8)&&_0x47baa5==_0x59541a)return console['info']('%c\\x20FEC_GetPort-4\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20horizontal','color:\\x20red'),this['FECErrorCode']=_0xab93fd,0x0;if((_0x1afba3==_0x450ac8||_0xe61a6b==_0x450ac8)&&_0x233b51==_0x59541a)return console['info']('%c\\x20FEC_GetPort-5\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20vertical','color:\\x20red'),this['FECErrorCode']=_0xab93fd,0x0;if(_0x4ef29e!=_0x450ac8&&_0x1afba3!=_0x450ac8&&_0xe61a6b!=_0x450ac8)return console['info']('%c\\x20FEC_GetPort-6\\x20emPlaceType\\x20only\\x20support\\x20floor,\\x20ceiling\\x20and\\x20wall','color:\\x20red'),this['FECErrorCode']=MP_E_SUPPORT,0x0;if(0x0!=_0x59541a&&_0x59541a!=_0x37736a&&_0x59541a!=_0x6e1995&&_0x59541a!=_0x58eeae&&_0x59541a!=_0x939021&&_0x59541a!=_0x1dfea6&&_0x59541a!=_0x50a2e1&&_0x59541a!=_0xdb36bc&&_0x59541a!=_0x364205&&_0x59541a!=_0x47baa5&&_0x59541a!=_0x233b51)return console['info']('%c\\x20FEC_GetPort-7\\x20emCorrectType\\x20error','color:\\x20red'),this['FECErrorCode']=MP_E_SUPPORT,0x0;for(var _0x376ef5=0x0;_0x376ef5<_0x866017;_0x376ef5++)if(_0x376ef5!=_0x30c92f){if(this['stFishEyeManager'][_0x376ef5]['bUsed']&&this['stFishEyeManager'][_0x376ef5]['emPlaceType']!=_0x450ac8)return console['info']('%c\\x20FEC_GetPort-8\\x20emPlaceType\\x20changed','color:\\x20red'),this['FECErrorCode']=0x517,0x0;if(this['stFishEyeManager'][_0x376ef5]['bUsed']&&this['stFishEyeManager'][_0x376ef5]['emCorrectType']!=_0x37736a&&this['stFishEyeManager'][_0x376ef5]['emCorrectType']!=_0x1dfea6&&this['stFishEyeManager'][_0x376ef5]['emCorrectType']!=_0x50a2e1&&this['stFishEyeManager'][_0x376ef5]['emCorrectType']!=_0xdb36bc&&this['stFishEyeManager'][_0x376ef5]['emCorrectType']!=_0x364205&&this['stFishEyeManager'][_0x376ef5]['emCorrectType']!=_0x47baa5&&this['stFishEyeManager'][_0x376ef5]['emCorrectType']!=_0x233b51&&_0x59541a!=_0x37736a&&_0x59541a!=_0x1dfea6&&_0x59541a!=_0x50a2e1&&_0x59541a!=_0xdb36bc&&_0x59541a!=_0x364205&&_0x59541a!=_0x47baa5&&_0x59541a!=_0x233b51)return console['info']('%c\\x20FEC_GetPort-9\\x20origin/180/360/lat\\x20only\\x20display\\x20one\\x20port','color:\\x20red'),this['FECErrorCode']=0x518,0x0;if(this['stFishEyeManager'][_0x376ef5]['bUsed']&&(this['stFishEyeManager'][_0x376ef5]['emCorrectType']==_0x37736a&&_0x59541a==_0x6e1995||this['stFishEyeManager'][_0x376ef5]['emCorrectType']==_0x6e1995&&_0x59541a==_0x37736a))return console['info']('%c\\x20FEC_GetPort-10\\x20180\\x20cannot\\x20support\\x20ptz','color:\\x20red'),this['FECErrorCode']=0x518,0x0;}return 0x1;}},{'key':'FEC_Enable','value':function(_0x8ed46){return _0x8ed46<0x1||_0x8ed46>0x1f||null==_0x8ed46?(console['info']('%c\\x20FEC_Enable-1\\x20nSubPort:%d','color:\\x20red',_0x8ed46),this['FECErrorCode']=_0x3fad75,0x0):null!==this['stFishEyeManager'][_0x8ed46]['pRender']?(console['info']('%c\\x20FEC_Enable-2\\x20nSubPort:%d','color:\\x20red',_0x8ed46),this['FECErrorCode']=0x515,0x0):(null==this['stFishEyeManager'][_0x8ed46]['pRender']&&(this['stFishEyeManager'][_0x8ed46]['pRender']=new _0x4fb568(),null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x454116()),this['stFishEyeManager'][_0x8ed46]['pRender']['SR_SetFishParamManager'](this['pFishParamManager'])),0x1);}},{'key':'FEC_SetWnd','value':function(_0x41c27c,_0x22a0cb){if(_0x41c27c<0x1||_0x41c27c>0x1f||null==_0x41c27c)return console['info']('%c\\x20FEC_SetWnd-1\\x20nSubPort:%d','color:\\x20red',_0x41c27c),this['FECErrorCode']=_0x3fad75,0x0;if(null==this['stFishEyeManager'][_0x41c27c]['pRender'])return console['info']('%c\\x20FEC_SetWnd-2\\x20nSubPort:%d\\x20pRender\\x20is\\x20null','color:\\x20red',_0x41c27c),this['FECErrorCode']=_0x5b7647,0x0;if(0x0==this['stFishEyeManager'][_0x41c27c]['bUsed'])return console['info']('%c\\x20FEC_SetWnd-3\\x20nSubPort:%d\\x20bUsed:%d','color:\\x20red',_0x41c27c,this['stFishEyeManager'][_0x41c27c]['bUsed']),this['FECErrorCode']=_0x580ddf,0x0;if(null==_0x22a0cb)return console['info']('%c\\x20FEC_SetWnd-4\\x20nSubPort:%d\\x20sCanvasID:%s','color:\\x20red',_0x41c27c,_0x22a0cb),this['FECErrorCode']=0x519,0x0;if(0x0!=this['stFishEyeManager'][_0x41c27c]['nSubPort']&&0x0!=this['stFishEyeManager'][_0x41c27c]['bUsed']){if(0x0!=this['stFishEyeManager'][_0x41c27c]['bInited']&&null!=this['stFishEyeManager'][_0x41c27c]['sCanvasID'])return _0x22a0cb!=this['stFishEyeManager'][_0x41c27c]['sCanvasID']?(console['info']('%c\\x20FEC_SetWnd-5\\x20nSubPort:%d\\x20sCanvasID:%s\\x20already\\x20init','color:\\x20red',_0x41c27c,_0x22a0cb),this['FECErrorCode']=0x506,0x0):0x1;var _0xd5f4d3;_0xd5f4d3=this['_ConvertDisplayEffect'](this['stFishEyeManager'][_0x41c27c]['emPlaceType'],this['stFishEyeManager'][_0x41c27c]['emCorrectType']);var _0x3d3436=this['stFishEyeManager'][_0x41c27c]['pRender']['SR_Init'](_0x22a0cb,_0x1aec18),_0x7b6d74=this['stFishEyeManager'][_0x41c27c]['pRender']['SR_AddSubPort'](_0xd5f4d3);if(-0x1==_0x7b6d74)return console['info']('%c\\x20FEC_SetWnd\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',_0x41c27c),0x0;if(this['stFishEyeManager'][_0x41c27c]['nValidSubPort']=_0x7b6d74,_0x1b3061!=_0x3d3436)return this['stFishEyeManager'][_0x41c27c]['bInited']=0x0,this['stFishEyeManager'][_0x41c27c]['sCanvasID']=null,this['FECErrorCode']=_0x580ddf,0x0;if(this['stFishEyeManager'][_0x41c27c]['bInited']=0x1,this['stFishEyeManager'][_0x41c27c]['sCanvasID']=_0x22a0cb,_0x1dfea6<=this['stFishEyeManager'][_0x41c27c]['emCorrectType']){var _0x5e4a0b=this['stFishEyeManager'][_0x41c27c]['pRender']['SR_SetRenderState'](_0x596e5b,0x0);_0x1b3061!=_0x5e4a0b&&console['log']('>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a',_0x5e4a0b);}return this['FECShowMode']>0x0&&this['stFishEyeManager'][_0x41c27c]['pRender']['SR_SetPTZDisplayMode'](this['FECShowMode']),0x1;}return this['FECErrorCode']=_0x580ddf,0x0;}},{'key':'FEC_Disable','value':function(_0x5bf297,_0x90dc59,_0x52ca47){if(_0x5bf297<0x1||_0x5bf297>0x1f||null==_0x5bf297)return console['info']('%c\\x20FEC_Disable-1\\x20nSubPort:%d','color:\\x20red',_0x5bf297),this['FECErrorCode']=_0x3fad75,0x0;if(0x1==this['stFishEyeManager'][_0x5bf297]['bInited']&&null!=this['stFishEyeManager'][_0x5bf297]['pRender']){if(_0x1b3061!=this['stFishEyeManager'][_0x5bf297]['pRender']['SR_DelSubPort'](this['stFishEyeManager'][_0x5bf297]['nValidSubPort']))return console['info']('%c\\x20FEC_Disable-2\\x20SR_DelSubPort\\x20error\\x20nSubPort:%d','color:\\x20red',_0x5bf297),0x0;this['stFishEyeManager'][_0x5bf297]['bInited']=0x0,this['stFishEyeManager'][_0x5bf297]['nValidSubPort']=-0x1,this['stFishEyeManager'][_0x5bf297]['pRender']['SR_Destroy'](),this['stFishEyeManager'][_0x5bf297]['pRender']=null;}return 0x1;}},{'key':'FEC_DelPort','value':function(_0xecdbd1){return _0xecdbd1<0x1||_0xecdbd1>0x1f||null==_0xecdbd1?(console['info']('%c\\x20FEC_DelPort-1\\x20nSubPort:%d','color:\\x20red',_0xecdbd1),this['FECErrorCode']=_0x3fad75,0x0):0x0==this['stFishEyeManager'][_0xecdbd1]['bUsed']?(console['info']('%c\\x20FEC_DelPort-2\\x20nSubPort:%d\\x20bUsed：%d','color:\\x20red',_0xecdbd1,this['stFishEyeManager'][_0xecdbd1]['bUsed']),this['FECErrorCode']=_0x580ddf,0x0):(this['stFishEyeManager'][_0xecdbd1]['nSubPort']=0x0,this['stFishEyeManager'][_0xecdbd1]['sCanvasID']=null,this['stFishEyeManager'][_0xecdbd1]['bUsed']=0x0,this['stFishEyeManager'][_0xecdbd1]['bInited']=0x0,this['stFishEyeManager'][_0xecdbd1]['nValidSubPort']=0x0,this['stFishEyeManager'][_0xecdbd1]['emPlaceType']=_0xe61a6b,this['stFishEyeManager'][_0xecdbd1]['emCorrectType']=_0x1f6d80,this['stFishEyeManager'][_0xecdbd1]['emEffect']=_0x24b5aa['SR_DE_FISH_ORIGINAL'],this['stFishParam'][_0xecdbd1]['stCycleParam']['fRadiusLeft']=0x0,this['stFishParam'][_0xecdbd1]['stCycleParam']['fRadiusRight']=0x1,this['stFishParam'][_0xecdbd1]['stCycleParam']['fRadiusTop']=0x0,this['stFishParam'][_0xecdbd1]['stCycleParam']['fRadiusBottom']=0x1,this['subPortNum']>0x0&&this['subPortNum']--,0x1);}},{'key':'FEC_SetParam','value':function(_0x4787ee,_0x1efce8){if(this['FECErrorCode']=0x0,_0x4787ee<0x0||_0x4787ee>0x1f||null==_0x4787ee)return console['info']('%c\\x20FEC_SetParam-1\\x20nSubPort:%d','color:\\x20red',_0x4787ee),this['FECErrorCode']=_0x3fad75,0x0;if(null==this['stFishEyeManager'][_0x4787ee]['pRender'])return console['info']('%c\\x20FEC_SetParam-2\\x20nSubPort:%d\\x20pRender:%d','color:\\x20red',_0x4787ee,this['stFishEyeManager'][_0x4787ee]['pRender']),this['FECErrorCode']=_0x5b7647,0x0;if(0x0==this['stFishEyeManager'][_0x4787ee]['bUsed'])return console['info']('%c\\x20FEC_SetParam-3\\x20nSubPort:%d\\x20bUsed:%d','color:\\x20red',_0x4787ee,this['stFishEyeManager'][_0x4787ee]['bUsed']),this['FECErrorCode']=_0x580ddf,0x0;if(this['stFishEyeManager'][_0x4787ee]['emCorrectType']>=_0x1dfea6&&this['stFishEyeManager'][_0x4787ee]['emCorrectType']<=_0x233b51&&0x1e&_0x1efce8['upDateType'])return console['info']('%c\\x20FEC_SetParam-4\\x20nSubPort:%d\\x20not\\x203D','color:\\x20red',_0x4787ee),this['FECErrorCode']=_0x3c54c3,0x0;if(_0x53f7f9&_0x1efce8['upDateType']){if(null==_0x1efce8['stCycleParam'])return this['FECErrorCode']=_0x575a0d,0x0;for(var _0x25d98b=0x1;_0x25d98b<_0x866017;_0x25d98b++){if(this['stFishEyeManager'][_0x25d98b]['bUsed']&&this['stFishEyeManager'][_0x25d98b]['nSubPort']&&_0x47baa5==this['stFishEyeManager'][_0x25d98b]['emCorrectType']&&(_0x1efce8['stCycleParam']['fRadiusLeft']<=-0.5||_0x1efce8['stCycleParam']['fRadiusLeft']>=0.4||_0x1efce8['stCycleParam']['fRadiusRight']<=0.6||_0x1efce8['stCycleParam']['fRadiusRight']>=1.5||_0x1efce8['stCycleParam']['fRadiusTop']<=-0.5||_0x1efce8['stCycleParam']['fRadiusTop']>0x0||_0x1efce8['stCycleParam']['fRadiusBottom']<0x1||_0x1efce8['stCycleParam']['fRadiusBottom']>=1.5||_0x1efce8['stCycleParam']['fRadiusLeft']+_0x1efce8['stCycleParam']['fRadiusRight']<=0.8||_0x1efce8['stCycleParam']['fRadiusLeft']+_0x1efce8['stCycleParam']['fRadiusRight']>=1.2||_0x1efce8['stCycleParam']['fRadiusTop']+_0x1efce8['stCycleParam']['fRadiusBottom']<=0.8||_0x1efce8['stCycleParam']['fRadiusTop']+_0x1efce8['stCycleParam']['fRadiusBottom']>=1.2))return this['FECErrorCode']=_0x575a0d,0x0;if(this['stFishEyeManager'][_0x25d98b]['bUsed']&&this['stFishEyeManager'][_0x25d98b]['nSubPort']&&_0x233b51==this['stFishEyeManager'][_0x25d98b]['emCorrectType']&&(_0x1efce8['stCycleParam']['fRadiusLeft']<=-0.5||_0x1efce8['stCycleParam']['fRadiusLeft']>0x0||_0x1efce8['stCycleParam']['fRadiusRight']<0x1||_0x1efce8['stCycleParam']['fRadiusRight']>=1.5||_0x1efce8['stCycleParam']['fRadiusTop']<=-0.5||_0x1efce8['stCycleParam']['fRadiusTop']>=0.4||_0x1efce8['stCycleParam']['fRadiusBottom']<=0.6||_0x1efce8['stCycleParam']['fRadiusBottom']>=1.5||_0x1efce8['stCycleParam']['fRadiusLeft']+_0x1efce8['stCycleParam']['fRadiusRight']<=0.8||_0x1efce8['stCycleParam']['fRadiusLeft']+_0x1efce8['stCycleParam']['fRadiusRight']>=1.2||_0x1efce8['stCycleParam']['fRadiusTop']+_0x1efce8['stCycleParam']['fRadiusBottom']<=0.8||_0x1efce8['stCycleParam']['fRadiusTop']+_0x1efce8['stCycleParam']['fRadiusBottom']>=1.2))return this['FECErrorCode']=_0x575a0d,0x0;}}if(0x0==this['stFishEyeManager'][_0x4787ee]['bInited']){if(_0x1c4c09&_0x1efce8['upDateType']){if(_0x6e1995!=this['stFishEyeManager'][_0x4787ee]['emCorrectType']&&_0x58eeae!=this['stFishEyeManager'][_0x4787ee]['emCorrectType']||_0x4ef29e==this['stFishEyeManager'][_0x4787ee]['emPlaceType'])return this['FECErrorCode']=_0x3c54c3,0x0;for(var _0x4bf880=0x1;_0x4bf880<_0x866017;_0x4bf880++)if(this['stFishEyeManager'][_0x4bf880]['nSubPort']&&this['stFishEyeManager'][_0x4bf880]['bUsed']&&this['stFishEyeManager'][_0x4bf880]['emCorrectType']==_0x37736a)return this['FECErrorCode']=_0x586693,0x0;this['stFishParam'][_0x4787ee]['fWideScanOffset']=_0x1efce8['fValue'];}if(_0x2c7294&_0x1efce8['upDateType']){if(null==_0x1efce8['stPTZColor'])return this['FECErrorCode']=_0x575a0d,0x0;if(_0x1efce8['stPTZColor']['nR']>0xff||_0x1efce8['stPTZColor']['nG']>0xff||_0x1efce8['stPTZColor']['nB']>0xff||_0x1efce8['stPTZColor']['nAlpha']>0xff)return this['FECErrorCode']=_0x3c54c3,0x0;this['stFishParam'][_0x4787ee]['stPTZColor']['nR']=_0x1efce8['stPTZColor']['nR'],this['stFishParam'][_0x4787ee]['stPTZColor']['nG']=_0x1efce8['stPTZColor']['nG'],this['stFishParam'][_0x4787ee]['stPTZColor']['nB']=_0x1efce8['stPTZColor']['nB'],this['stFishParam'][_0x4787ee]['stPTZColor']['nAlpha']=_0x1efce8['stPTZColor']['nAlpha'];}if(_0x34899b&_0x1efce8['upDateType']){if(_0x37736a!=this['stFishEyeManager'][_0x4787ee]['emCorrectType'])return this['FECErrorCode']=_0x3c54c3,0x0;this['stFishParam'][_0x4787ee]['stPTZParam']['fPTZPositionX']=_0x1efce8['fPTZParam']['fPTZPositionX'],this['stFishParam'][_0x4787ee]['stPTZParam']['fPTZPositionY']=_0x1efce8['fPTZParam']['fPTZPositionY'];}if(_0x41d529&_0x1efce8['upDateType']){if(_0x37736a!=this['stFishEyeManager'][_0x4787ee]['emCorrectType'])return this['FECErrorCode']=_0x3c54c3,0x0;this['stFishParam'][_0x4787ee]['fZoom']=_0x1efce8['fPTZZoom'];}if(_0x441385&_0x1efce8['upDateType']){if(null==this['stFishParam']['stPTZSelect'])return 0x0;if(_0x37736a!=this['stFishEyeManager'][_0x4787ee]['emCorrectType'])return this['FECErrorCode']=_0x3c54c3,0x0;this['stFishParam']['stPTZSelect']['fTop']=_0x1efce8['stPTZSelect']['fTop'],this['stFishParam']['stPTZSelect']['fBottom']=_0x1efce8['stPTZSelect']['fBottom'],this['stFishParam']['stPTZSelect']['fLeft']=_0x1efce8['stPTZSelect']['fLeft'],this['stFishParam']['stPTZSelect']['fRight']=_0x1efce8['stPTZSelect']['fRight'];}if(_0x53f7f9&_0x1efce8['upDateType']){if(null==_0x1efce8['stCycleParam'])return this['FECErrorCode']=_0x575a0d,0x0;if(0x0==this['_IsValidRadiusParam'](_0x1efce8['stCycleParam']))return this['FECErrorCode']=_0x575a0d,0x0;this['stFishParam'][0x0]['stCycleParam']['fRadiusLeft']=_0x1efce8['stCycleParam']['fRadiusLeft'],this['stFishParam'][0x0]['stCycleParam']['fRadiusRight']=_0x1efce8['stCycleParam']['fRadiusRight'],this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']=_0x1efce8['stCycleParam']['fRadiusTop'],this['stFishParam'][0x0]['stCycleParam']['fRadiusBottom']=_0x1efce8['stCycleParam']['fRadiusBottom'];}return 0x1;}if(_0x1c4c09&_0x1efce8['upDateType']){if(_0x6e1995!=this['stFishEyeManager'][_0x4787ee]['emCorrectType']&&_0x58eeae!=this['stFishEyeManager'][_0x4787ee]['emCorrectType']||_0x4ef29e==this['stFishEyeManager'][_0x4787ee]['emPlaceType'])return this['FECErrorCode']=_0x3c54c3,0x0;for(var _0x57c8c8=0x1;_0x57c8c8<_0x866017;_0x57c8c8++)if(this['stFishEyeManager'][_0x57c8c8]['nSubPort']&&this['stFishEyeManager'][_0x57c8c8]['bUsed']&&this['stFishEyeManager'][_0x57c8c8]['emCorrectType']==_0x37736a)return this['FECErrorCode']=_0x586693,0x0;var _0xe36b22={};if(_0xe36b22['nFishParamType']=_0x132faf,_0xe36b22['bBlack']=0x0,_0xe36b22['fAngle']=_0x1efce8['fValue'],_0x1b3061!=this['stFishEyeManager'][_0x4787ee]['pRender']['SR_SetFishParam'](_0xe36b22))return this['FECErrorCode']=_0x586693,0x0;this['stFishParam'][_0x4787ee]['fWideScanOffset']=_0x1efce8['fValue'];}if(_0x2c7294&_0x1efce8['upDateType']){if(null==_0x1efce8['stPTZColor'])return this['FECErrorCode']=_0x3c54c3,0x0;if(_0x1efce8['stPTZColor']['nR']>0xff||_0x1efce8['stPTZColor']['nG']>0xff||_0x1efce8['stPTZColor']['nB']>0xff||_0x1efce8['stPTZColor']['nAlpha']>0xff)return this['FECErrorCode']=_0x3c54c3,0x0;var _0x16dc10={};_0x16dc10['fR']=float(_0x1efce8['stPTZColor']['nR']/0xff),_0x16dc10['fG']=float(_0x1efce8['stPTZColor']['nG']/0xff),_0x16dc10['fB']=float(_0x1efce8['stPTZColor']['nB']/0xff),_0x16dc10['fA']=float(_0x1efce8['stPTZColor']['nAlpha']/0xff),this['stFishParam'][_0x4787ee]['stPTZColor']['nR']=_0x1efce8['stPTZColor']['nR'],this['stFishParam'][_0x4787ee]['stPTZColor']['nG']=_0x1efce8['stPTZColor']['nG'],this['stFishParam'][_0x4787ee]['stPTZColor']['nB']=_0x1efce8['stPTZColor']['nB'],this['stFishParam'][_0x4787ee]['stPTZColor']['nAlpha']=_0x1efce8['stPTZColor']['nAlpha'];}if(_0x34899b&_0x1efce8['upDateType']){if(_0x37736a!=this['stFishEyeManager'][_0x4787ee]['emCorrectType'])return this['FECErrorCode']=_0x3c54c3,0x0;var _0x5e904a={};_0x5e904a['nFishParamType']=_0xc17459,_0x5e904a['bBlack']=0x0,_0x5e904a['fPTZX']=_0x1efce8['fPTZParam']['fPTZPositionX'],_0x5e904a['fPTZY']=_0x1efce8['fPTZParam']['fPTZPositionY'];var _0x492baf=this['stFishEyeManager'][_0x4787ee]['pRender']['SR_SetFishParam'](_0x5e904a);if(_0x1b3061!=_0x492baf)return this['FECErrorCode']=_0x586693,0x0;this['stFishParam'][_0x4787ee]['stPTZParam']['fPTZPositionX']=_0x1efce8['fPTZParam']['fPTZPositionX'],this['stFishParam'][_0x4787ee]['stPTZParam']['fPTZPositionY']=_0x1efce8['fPTZParam']['fPTZPositionY'];}if(_0x41d529&_0x1efce8['upDateType']){if(_0x37736a!=this['stFishEyeManager'][_0x4787ee]['emCorrectType'])return this['FECErrorCode']=_0x3c54c3,0x0;var _0x4f559c={};if(_0x4f559c['nFishParamType']=_0x14fa4a,_0x4f559c['bBlack']=0x0,_0x4f559c['fZoom']=_0x1efce8['fPTZZoom'],_0x1b3061!=this['stFishEyeManager'][_0x4787ee]['pRender']['SR_SetFishParam'](_0x4f559c))return this['FECErrorCode']=_0x586693,0x0;this['stFishParam'][_0x4787ee]['fZoom']=_0x1efce8['fPTZZoom'];}if(_0x53f7f9&_0x1efce8['upDateType']){if(0x0==this['_IsValidRadiusParam'](_0x1efce8['stCycleParam']))return this['FECErrorCode']=_0x575a0d,0x0;var _0x5c618b={};if(_0x5c618b['nFishParamType']=_0xef11b,_0x5c618b['bBlack']=0x1,_0x5c618b['fRXLeft']=_0x1efce8['stCycleParam']['fRadiusLeft'],_0x5c618b['fRXRight']=_0x1efce8['stCycleParam']['fRadiusRight'],_0x5c618b['fRYTop']=_0x1efce8['stCycleParam']['fRadiusTop'],_0x5c618b['fRYBottom']=_0x1efce8['stCycleParam']['fRadiusBottom'],_0x1b3061!=this['stFishEyeManager'][_0x4787ee]['pRender']['SR_SetFishParam'](this['stFishEyeManager'][_0x4787ee]['nValidSubPort'],_0x5c618b))return this['FECErrorCode']=_0x575a0d,0x0;this['stFishParam'][0x0]['stCycleParam']['fRadiusLeft']=_0x1efce8['stCycleParam']['fRadiusLeft'],this['stFishParam'][0x0]['stCycleParam']['fRadiusRight']=_0x1efce8['stCycleParam']['fRadiusRight'],this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']=_0x1efce8['stCycleParam']['fRadiusTop'],this['stFishParam'][0x0]['stCycleParam']['fRadiusBottom']=_0x1efce8['stCycleParam']['fRadiusBottom'];}return _0x441385&_0x1efce8['upDateType']&&_0x37736a==this['stFishEyeManager'][_0x4787ee]['emCorrectType']&&_0x1b3061!=this['stFishEyeManager'][_0x4787ee]['pRender']['SR_SetFishParam'](this['stFishEyeManager'][_0x4787ee]['stPTZSelect'])?(this['FECErrorCode']=0x513,0x0):0x1;}},{'key':'FEC_GetParam','value':function(_0x1d03a4,_0x373eab){return _0x1d03a4<0x0||_0x1d03a4>0x1f||null==_0x1d03a4?(console['info']('%c\\x20FEC_GetParam-1\\x20nSubPort:%d','color:\\x20red',_0x1d03a4),this['FECErrorCode']=_0x3fad75,0x0):null==this['stFishEyeManager'][_0x1d03a4]['pRender']?(console['info']('%c\\x20FEC_GetParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x1d03a4]['pRender']),this['FECErrorCode']=_0x5b7647,0x0):(this['stFishEyeManager'][_0x1d03a4]['pRender']['SR_GetFishParam'](_0x373eab),_0x373eab['emCorrectType']=this['stFishEyeManager'][_0x1d03a4]['emCorrectType'],0x1);}},{'key':'_IsValidRadiusParam','value':function(_0x119f9b){return _0x119f9b['fRadiusBottom']<=_0x119f9b['fRadiusTop']||_0x119f9b['fRadiusRight']<=_0x119f9b['fRadiusLeft']?0x0:0x1;}},{'key':'FEC_SetViewParam','value':function(_0xad770,_0x21831a,_0x5ac99c){return _0xad770<0x0||_0xad770>0x1f||null==_0xad770?(console['info']('%c\\x20FEC_SetViewParam-1\\x20nSubPort:%d','color:\\x20red',_0xad770),this['FECErrorCode']=_0x3fad75,0x0):null==this['stFishEyeManager'][_0xad770]['pRender']?(console['info']('%c\\x20FEC_SetViewParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0xad770]['pRender']),this['FECErrorCode']=_0x5b7647,0x0):_0x21831a<_0xd185d0||_0x21831a>_0x2d568c?(this['FECErrorCode']=_0xb2e391,0x0):(this['FECErrorCode']=0x0,0x0==this['stFishEyeManager'][_0xad770]['bInited']?(this['FECErrorCode']=_0x580ddf,0x0):_0x1dfea6<=this['stFishEyeManager'][_0xad770]['emCorrectType']?_0x1b3061!=this['stFishEyeManager'][_0xad770]['pRender']['SR_SetViewParam'](_0x21831a,_0x5ac99c)?(this['FECErrorCode']=_0xb2e391,0x0):0x1:(this['FECErrorCode']=_0x3c54c3,0x0));}},{'key':'FEC_GetViewParam','value':function(_0x3e9ade,_0x3004f6,_0x38d58e){if(_0x38d58e['fValue']=-0x1,_0x3e9ade<0x0||_0x3e9ade>0x1f||null==_0x3e9ade)return console['info']('%c\\x20FEC_GetViewParam-1\\x20nSubPort:%d','color:\\x20red',_0x3e9ade),this['FECErrorCode']=_0x3fad75,0x0;if(null==this['stFishEyeManager'][_0x3e9ade]['pRender'])return console['info']('%c\\x20FEC_GetViewParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x3e9ade]['pRender']),this['FECErrorCode']=_0x5b7647,0x0;if(_0x3004f6<0x1||_0x3004f6>0x3||0x0==this['stFishEyeManager'][_0x3e9ade]['bInited'])return 0x0;if(_0x1dfea6<=this['stFishEyeManager'][_0x3e9ade]['emCorrectType'])this['stFishEyeManager'][_0x3e9ade]['pRender']['SR_GetViewParam'](_0x3004f6,_0x38d58e);return 0x1;}},{'key':'FEC_SetDisplayRegion','value':function(_0x398ea3,_0x4888d1,_0x2ec16e,_0x793b2b,_0x50eb58,_0x329f9e,_0x4ed275){return _0x398ea3<0x0||_0x398ea3>0x1f||null==_0x398ea3?(console['info']('%c\\x20FEC_SetDisplayRegion-1\\x20nSubPort:%d','color:\\x20red',_0x398ea3),this['FECErrorCode']=_0x3fad75,0x0):null==this['stFishEyeManager'][_0x398ea3]['pRender']?(console['info']('%c\\x20FEC_SetDisplayRegion-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x398ea3]['pRender']),this['FECErrorCode']=_0x5b7647,0x0):0x0!=_0x4888d1||0x0!=_0x2ec16e?(this['FECErrorCode']=_0xb2e391,0x0):this['stFishEyeManager'][_0x398ea3]['emCorrectType']!=_0x1f6d80&&this['stFishEyeManager'][_0x398ea3]['emCorrectType']!=_0x6e1995&&this['stFishEyeManager'][_0x398ea3]['emCorrectType']!=_0x58eeae&&this['stFishEyeManager'][_0x398ea3]['emCorrectType']!=_0x939021?(this['FECErrorCode']=_0xab93fd,0x0):0x0==this['stFishEyeManager'][_0x398ea3]['bInited']?(this['FECErrorCode']=_0x580ddf,0x0):_0x793b2b<0x0||_0x50eb58<0x0||_0x329f9e<0x0||_0x4ed275<0x0?(this['FECErrorCode']=_0xb2e391,0x0):_0x1b3061!=this['stFishEyeManager'][_0x398ea3]['pRender']['SR_SetDisplayRect'](_0x793b2b,_0x50eb58,_0x329f9e,_0x4ed275,_0x24d6ec)?(this['FECErrorCode']=0x511,0x0):0x1;}},{'key':'FEC_SetBackCilling','value':function(_0x3daf4f,_0x363e1d){return _0x3daf4f<0x0||_0x3daf4f>0x1f||null==_0x3daf4f?(this['FECErrorCode']=_0x3fad75,0x0):null==this['stFishEyeManager'][_0x3daf4f]['pRender']?(this['FECErrorCode']=_0x5b7647,0x0):0x0==this['stFishEyeManager'][_0x3daf4f]['bInited']?(this['FECErrorCode']=_0x580ddf,0x0):_0x1b3061!=this['stFishEyeManager'][_0x3daf4f]['pRender']['SR_SetRenderState'](_0x596e5b,_0x363e1d)?(this['FECErrorCode']=0x511,0x0):0x1;}},{'key':'FEC_GetPTZPort','value':function(_0x561c94,_0x4bb24f,_0x93d96c){if(null!=this['stFishEyeManager'][_0x561c94]['pRender']){var _0x52dbe6={'nPTZPort':-0x1};if(this['stFishEyeManager'][_0x561c94]['pRender']['SR_GetPTZPort'](_0x4bb24f,_0x93d96c,_0x52dbe6)==_0x1b3061)return _0x52dbe6['nPTZPort'];}return-0x1;}},{'key':'FEC_SetPTZDisplayMode','value':function(_0x1c36de){return _0x1c36de>=0x0&&_0x1c36de<=0x2?(null!=this['stFishEyeManager'][0x0]['pRender']&&this['stFishEyeManager'][0x0]['pRender']['SR_SetPTZDisplayMode'](_0x1c36de),this['FECShowMode']=_0x1c36de,0x1):(console['info']('%c\\x20FEC_SetPTZDisplayMode\\x20ptzMode:%d','color:\\x20red',_0x1c36de),0x0);}},{'key':'CheckFrameY','value':function(_0x5e311d,_0x5b9f01,_0x16e372){if(null==_0x5e311d['yuvFrameBuffer'])return 0x0;for(var _0x13ebea=_0x5e311d['displayWidth']/_0x5b9f01,_0x27493e=_0x5e311d['displayHeight']/_0x16e372,_0x4d1069=0x0,_0x82ac86=0x0,_0x3ee006=[],_0xe39a9=0x0;_0xe39a9<_0x5b9f01*_0x16e372;_0xe39a9++)_0x3ee006[_0xe39a9]=0x0,this['aPOSAdaptBuf'][_0xe39a9]=0x0;for(var _0x207095=0x0;_0x207095<_0x5e311d['displayHeight'];_0x207095++)for(var _0x3aff5f=0x0;_0x3aff5f<_0x5e311d['displayWidth'];_0x3aff5f++)_0x4d1069=_0x3aff5f/_0x13ebea<_0x5b9f01?Math['floor'](_0x3aff5f/_0x13ebea):_0x5b9f01-0x1,_0x82ac86=_0x207095/_0x27493e<_0x16e372?Math['floor'](_0x207095/_0x27493e):_0x16e372-0x1,this['aPOSAdaptBuf'][_0x4d1069+_0x82ac86*_0x5b9f01]+=_0x5e311d['yuvFrameBuffer'][_0x207095*_0x5e311d['displayWidth']+_0x3aff5f],_0x3ee006[_0x4d1069+_0x82ac86*_0x5b9f01]++;for(var _0xce4222=0x0,_0x581a9c=0x0;_0x581a9c<_0x5b9f01*_0x16e372;_0x581a9c++)_0xce4222=this['aPOSAdaptBuf'][_0x581a9c]/_0x3ee006[_0x581a9c],this['aPOSAdaptBuf'][_0x581a9c]=_0xce4222>0x80?0x0:0x1;return 0x1;}},{'key':'CheckFrameRGB','value':function(_0xdb7cb0,_0x1836b1,_0x171688){if(null==_0xdb7cb0)return 0x0;for(var _0x44beb4=_0xdb7cb0['width']/(_0x1836b1-0x1),_0x1f5beb=_0xdb7cb0['height']/(_0x171688-0x1),_0x4df0af=0x0,_0x549ef7=0x0,_0x1c5c63=[],_0x453ff9=0x0;_0x453ff9<_0x1836b1*_0x171688;_0x453ff9++)_0x1c5c63[_0x453ff9]=0x0,this['aPOSAdaptBuf'][_0x453ff9]=0x0;for(var _0x39652d=0x0,_0xea5476=0x0;_0xea5476<_0xdb7cb0['height'];_0xea5476++)for(var _0x23d1cb=0x0;_0x23d1cb<_0xdb7cb0['width'];_0x23d1cb++){_0x4df0af=(_0x4df0af=Math['floor'](Math['round'](_0x23d1cb/(_0x44beb4/0x2))/0x2))<_0x1836b1?_0x4df0af:_0x1836b1-0x1,_0x549ef7=(_0x549ef7=Math['floor'](Math['round'](_0xea5476/(_0x1f5beb/0x2))/0x2))<_0x171688?_0x549ef7:_0x171688-0x1;var _0x37ff0f=_0xdb7cb0['pBuffer'][_0x39652d],_0x26ac27=_0xdb7cb0['pBuffer'][_0x39652d+0x1],_0x5de4de=_0xdb7cb0['pBuffer'][_0x39652d+0x2],_0x232895=Math['round'](0.299*_0x37ff0f+0.587*_0x26ac27+0.114*_0x5de4de);this['aPOSAdaptBuf'][_0x4df0af+_0x549ef7*_0x1836b1]+=_0x232895,_0x1c5c63[_0x4df0af+_0x549ef7*_0x1836b1]++,_0x39652d+=0x4;}for(var _0x3ff16b=0x0,_0x5717ac=0x0;_0x5717ac<_0x1836b1*_0x171688;_0x5717ac++)_0x3ff16b=this['aPOSAdaptBuf'][_0x5717ac]/_0x1c5c63[_0x5717ac],this['aPOSAdaptBuf'][_0x5717ac]=_0x3ff16b>0x80?0x0:0x1;return 0x1;}},{'key':'GetWaterFontParam','value':function(_0x5d18a4){var _0x1f121f=_0x5d18a4['pFontString']['length'],_0x8fcea9=_0x5d18a4['pstFontRotate']['fRotateAngle']%0x168/0x168*0x2*Math['PI'],_0xcfe5d9=Math['min'](_0x5d18a4['pstFontSize']['nFontWidth'],_0x5d18a4['pstFontSize']['nFontHeight']),_0x282045=_0xcfe5d9/this['mainCanvasID']['width'],_0x1fe7ef=_0xcfe5d9/this['mainCanvasID']['height'],_0xea78b3=_0x282045*Math['cos'](Math['PI']/0x2-_0x8fcea9)*_0x5d18a4['pSpace'],_0x5cb946=_0x1fe7ef*Math['sin'](Math['PI']/0x2-_0x8fcea9)*_0x5d18a4['pSpace'],_0x5c12eb=[],_0x5a2b1f=[],_0x502bbf=[];if(_0x5d18a4['nFontAlign']){for(var _0x35be47=0x0;_0x35be47<_0x1f121f;_0x35be47++)_0x5c12eb[_0x35be47]=_0x5d18a4['pFontString'][0x0]['length']*_0x282045/0x6,_0x5a2b1f[_0x35be47]=Math['atan2'](_0x5c12eb[0x0],_0x5cb946),_0x502bbf[_0x35be47]=Math['sqrt'](_0x5c12eb[0x0]*_0x5c12eb[0x0],_0x5cb946*_0x5cb946);}else{for(var _0x39c5a0=0x0;_0x39c5a0<_0x1f121f;_0x39c5a0++)_0x5c12eb[_0x39c5a0]=0x0,_0x5a2b1f[_0x39c5a0]=0x0,_0x502bbf[_0x39c5a0]=0x0;}var _0x32dfde=Math['floor'](_0x5d18a4['pstFontNumber']['nRowNumber']),_0x1041db=Math['floor'](_0x5d18a4['pstFontNumber']['nColNumber']),_0x30501a=_0x32dfde*_0x1041db;if(_0x5d18a4['pstFontRotate']['fFillFullScreen']&&_0x30501a>0x0){for(var _0x48cd3e=[],_0x1df244=[],_0x1671b8=0x1/(_0x32dfde-0x1),_0x15dd33=0x0;_0x15dd33<_0x32dfde;_0x15dd33++)_0x48cd3e[_0x15dd33]=_0x1671b8*_0x15dd33-_0x5cb946*((_0x1f121f-0x1)/0x2);for(var _0x5a4951=0x1/(_0x1041db-0x1),_0x2f438e=0x0;_0x2f438e<_0x1041db;_0x2f438e++)_0x1df244[_0x2f438e]=_0x5a4951*_0x2f438e+_0xea78b3*((_0x1f121f-0x1)/0x2);for(var _0x35a314=0x0;_0x35a314<_0x30501a;++_0x35a314)for(var _0x26e518=0x0;_0x26e518<_0x1f121f;_0x26e518++){this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]={},this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pString']=_0x5d18a4['pFontString'][_0x26e518],this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['nFontWidth']=_0xcfe5d9,this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['nFontHeight']=_0xcfe5d9,this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pstStartPos']={};var _0x41ea81=_0x35a314%_0x1041db,_0x1a70e7=Math['floor'](_0x35a314/_0x1041db),_0x5bf6d0=Math['PI']/0x2-_0x8fcea9+_0x5a2b1f[_0x26e518];this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pstStartPos']['fX']=_0x1df244[_0x41ea81]-_0x26e518*_0xea78b3+_0x502bbf[_0x26e518]*Math['cos'](_0x5bf6d0),this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pstStartPos']['fY']=_0x48cd3e[_0x1a70e7]+_0x26e518*_0x5cb946-_0x502bbf[_0x26e518]*Math['sin'](_0x5bf6d0),_0x5d18a4['nColorAdapt']?(this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pstFontColor']={},this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pstFontColor']['fR']=this['aPOSAdaptBuf'][_0x35a314],this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pstFontColor']['fG']=this['aPOSAdaptBuf'][_0x35a314],this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pstFontColor']['fB']=this['aPOSAdaptBuf'][_0x35a314],this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pstFontColor']['fA']=_0x5d18a4['pstFontColor']['fA']):this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pstFontColor']=_0x5d18a4['pstFontColor'],this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['bBackGround']=!0x1,this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pstBGColor']=null,this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['fRotateAngle']=_0x5d18a4['pstFontRotate']['fRotateAngle'],this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['pFontFamily']=_0x5d18a4['pFontFamily'],_0x5d18a4['nFontAlign']?(this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['textAlign']='left',this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['textBaseline']='top'):(this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['textAlign']='center',this['pWaterFontParam'][_0x1f121f*_0x35a314+_0x26e518]['textBaseline']='middle');}}else{for(var _0x3613b3=0x0;_0x3613b3<_0x5d18a4['pFontString']['length'];_0x3613b3++)this['pWaterFontParam'][_0x3613b3]={},this['pWaterFontParam'][_0x3613b3]['pString']=_0x5d18a4['pFontString'][_0x3613b3],this['pWaterFontParam'][_0x3613b3]['nFontWidth']=_0xcfe5d9,this['pWaterFontParam'][_0x3613b3]['nFontHeight']=_0xcfe5d9,this['pWaterFontParam'][_0x3613b3]['pstStartPos']={},this['pWaterFontParam'][_0x3613b3]['pstStartPos']['fX']=_0x5d18a4['pstStartPos']['fX']-_0x3613b3*_0xea78b3,this['pWaterFontParam'][_0x3613b3]['pstStartPos']['fY']=_0x5d18a4['pstStartPos']['fY']+_0x3613b3*_0x5cb946,_0x5d18a4['nColorAdapt']?(this['pWaterFontParam'][_0x3613b3]['pstFontColor']={},this['pWaterFontParam'][_0x3613b3]['pstFontColor']['fR']=this['aPOSAdaptBuf'][i],this['pWaterFontParam'][_0x3613b3]['pstFontColor']['fG']=this['aPOSAdaptBuf'][i],this['pWaterFontParam'][_0x3613b3]['pstFontColor']['fB']=this['aPOSAdaptBuf'][i],this['pWaterFontParam'][_0x3613b3]['pstFontColor']['fA']=_0x5d18a4['pstFontColor']['fA']):this['pWaterFontParam'][_0x3613b3]['pstFontColor']=_0x5d18a4['pstFontColor'],this['pWaterFontParam'][_0x3613b3]['bBackGround']=!0x1,this['pWaterFontParam'][_0x3613b3]['pstBGColor']=null,this['pWaterFontParam'][_0x3613b3]['fRotateAngle']=_0x5d18a4['pstFontRotate']['fRotateAngle'],this['pWaterFontParam'][_0x3613b3]['pFontFamily']=_0x5d18a4['pFontFamily'],_0x5d18a4['nFontAlign']?(this['pWaterFontParam'][_0x3613b3]['textAlign']='left',this['pWaterFontParam'][_0x3613b3]['textBaseline']='top'):(this['pWaterFontParam'][_0x3613b3]['textAlign']='center',this['pWaterFontParam'][_0x3613b3]['textBaseline']='middle');}return 0x1;}},{'key':'SetWaterMarkFont','value':function(_0xd21b34,_0xcba2e3){if(this['pWaterFontParam']['splice'](0x0,this['pWaterFontParam']['length']),null===_0xd21b34)return 0x1;var _0x1bf256=Math['floor'](_0xd21b34['pstFontNumber']['nRowNumber']),_0x689939=Math['floor'](_0xd21b34['pstFontNumber']['nColNumber']),_0xb0bc7c=_0x1bf256*_0x689939;if(_0xd21b34['nColorAdapt']&&_0xb0bc7c>0x0){var _0x20b3a1={};Math['min'](0x780,Math['min'](this['mainCanvasID']['width'],this['displayWidth'])),Math['min'](0x438,Math['min'](this['mainCanvasID']['height'],this['displayHeight'])),(_0x20b3a1['nWidth']=0x10,_0x20b3a1['nHeight']=0x10,_0x20b3a1['nBufferLen']=0x0);var _0x674593=this['oVideoHandle']['SR_GetCaptureSize'](_0x20b3a1);if(_0x1b3061==_0x674593){var _0x1083d8=new Uint8Array(_0x20b3a1['nBufferLen']),_0x588e0a={};_0x588e0a['pBuffer']=_0x1083d8,this['oVideoHandle']['SR_CaptureScreen'](_0x588e0a),_0x588e0a['width']=_0x20b3a1['nWidth'],_0x588e0a['height']=_0x20b3a1['nHeight'],this['CheckFrameRGB'](_0x588e0a,_0x1bf256,_0x689939);}}return this['GetWaterFontParam'](_0xd21b34),0x1;}},{'key':'ImageDecoder','value':function(_0x34b8dd,_0x42dd80,_0x274365){var _0x456332=this;_0x34b8dd['decode']({'frameIndex':_0x274365})['then'](function(_0x428276){_0x456332['pWaterImageParam'][_0x274365]={},_0x456332['pWaterImageParam'][_0x274365]['videoStream']=_0x428276['image'],_0x456332['pWaterImageParam'][_0x274365]['nImageWidth']=_0x428276['image']['displayWidth'],_0x456332['pWaterImageParam'][_0x274365]['nImageHeight']=_0x428276['image']['displayHeight'],null!=_0x42dd80['pstRectPos']?_0x456332['pWaterImageParam'][_0x274365]['pstRectPos']=_0x42dd80['pstRectPos']:_0x456332['pWaterImageParam'][_0x274365]['pstRectPos']={'fLeft':0x0,'fRight':0.1,'fTop':0x0,'fBottom':0.1},null!=_0x42dd80['fAlpha']&&_0x42dd80['fAlpha']<=0x1&&_0x42dd80['fAlpha']>=0x0?_0x456332['pWaterImageParam'][_0x274365]['fAlpha']=_0x42dd80['fAlpha']:_0x456332['pWaterImageParam'][_0x274365]['fAlpha']=0x1,_0x456332['waterMarkImageMax']=_0x34b8dd['tracks']['selectedTrack']['frameCount'],_0x274365<_0x34b8dd['tracks']['selectedTrack']['frameCount']-0x1&&_0x456332['ImageDecoder'](_0x34b8dd,_0x42dd80,_0x274365+0x1);});}},{'key':'SetWaterMarkImage','value':function(_0x41919d){if(this['pWaterImageParam']['splice'](0x0,this['pWaterImageParam']['length']),null===_0x41919d)return 0x1;if(null!=_0x41919d['pImageData']){var _0x2b6036=new ImageDecoder({'data':_0x41919d['pImageData'],'type':'image/'+_0x41919d['pImageType']});_0x2b6036['tracks']['ready']['then'](function(){}),this['ImageDecoder'](_0x2b6036,_0x41919d,0x0);}return this['waterMarkImageIndex']=0x0,0x1;}},{'key':'_ConvertDisplayEffect','value':function(_0x2f6d1f,_0x1be998){switch(_0x2f6d1f){case _0x4ef29e:return _0x37736a==_0x1be998?_0x24b5aa['SR_DE_FISH_PTZ_WALL']:_0x58eeae==_0x1be998||_0x939021==_0x1be998?_0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:_0x1dfea6==_0x1be998?_0x24b5aa['SR_DE_FISH_SEMISPHERE']:_0x364205==_0x1be998?_0x24b5aa['SR_DE_FISH_PLANET']:_0x47baa5==_0x1be998?_0x24b5aa['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:_0x233b51==_0x1be998?_0x24b5aa['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x24b5aa['SR_DE_FISH_ORIGINAL'];case _0x1afba3:return _0x37736a==_0x1be998?_0x24b5aa['SR_DE_FISH_PTZ_FLOOR']:_0x58eeae==_0x1be998?_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_360']:_0x6e1995==_0x1be998?_0x24b5aa['SR_DE_FISH_PANORAMA_FLOOR_180']:_0x939021==_0x1be998?_0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:_0x1dfea6==_0x1be998?_0x24b5aa['SR_DE_FISH_SEMISPHERE']:_0x50a2e1==_0x1be998?_0x24b5aa['SR_DE_FISH_CYLINDER_FLOOR']:_0xdb36bc==_0x1be998?_0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:_0x364205==_0x1be998?_0x24b5aa['SR_DE_FISH_PLANET']:_0x24b5aa['SR_DE_FISH_ORIGINAL'];case _0xe61a6b:return _0x37736a==_0x1be998?_0x24b5aa['SR_DE_FISH_PTZ_CEILING']:_0x58eeae==_0x1be998?_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_360']:_0x6e1995==_0x1be998?_0x24b5aa['SR_DE_FISH_PANORAMA_CEILING_180']:_0x939021==_0x1be998?_0x24b5aa['SR_DE_FISH_PANORAMA_WALL']:_0x1dfea6==_0x1be998?_0x24b5aa['SR_DE_FISH_SEMISPHERE']:_0x50a2e1==_0x1be998?_0x24b5aa['SR_DE_FISH_CYLINDER_CEILING']:_0xdb36bc==_0x1be998?_0x24b5aa['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:_0x364205==_0x1be998?_0x24b5aa['SR_DE_FISH_PLANET']:_0x24b5aa['SR_DE_FISH_ORIGINAL'];default:return _0x24b5aa['SR_DE_FISH_ORIGINAL'];}return _0x24b5aa['SR_DE_FISH_ORIGINAL'];}},{'key':'GetCanvasData','value':function(_0x325e57){var _0x399096={'nWidth':0x0,'nHeight':0x0,'nBufferLen':0x0},_0x3cebd0=this['oVideoHandle']['SR_GetCaptureSize'](_0x399096);(_0x1b3061!=_0x3cebd0||_0x399096['nBufferLen']<=0x0)&&_0x325e57(null);var _0x30d6a7=new Uint8Array(_0x399096['nBufferLen']);null==_0x30d6a7&&_0x325e57(null);var _0x4f25a4={};_0x4f25a4['pBuffer']=_0x30d6a7,this['oVideoHandle']['SR_CaptureScreen'](_0x4f25a4),_0x325e57(_0x30d6a7,_0x399096['nWidth'],_0x399096['nHeight']);}},{'key':'FindIntelNodefromList','value':function(_0x11e11a){if(0x0!=this['privateLinesInfo']['length']){var _0x1cad3e=this['privateLinesInfo'][0x0]['absTimeStamp'];if(_0x1cad3e<=_0x11e11a+0x64&&_0x1cad3e>_0x11e11a-0x64)this['curLinesInfo']=this['privateLinesInfo']['shift']();else{if(_0x1cad3e>_0x11e11a+0x7d0||_0x1cad3e<_0x11e11a-0x7d0)for(this['curLinesInfo']=this['privateLinesInfo']['shift']();this['privateLinesInfo']['length']>0x0;){var _0x3d02ba=this['privateLinesInfo'][0x0]['absTimeStamp'];if(!(_0x3d02ba>_0x11e11a+0x7d0||_0x3d02ba<_0x11e11a-0x7d0))break;this['curLinesInfo']=this['privateLinesInfo']['shift']();}}}if(0x0!=this['privateFontsInfo']['length']){var _0x3583e1=this['privateFontsInfo'][0x0]['absTimeStamp'];if(_0x3583e1<=_0x11e11a+0x3e8&&_0x3583e1>_0x11e11a-0x3e8)this['curFontsInfo']=this['privateFontsInfo']['shift']();else{if(_0x3583e1>_0x11e11a+0x7d0||_0x3583e1<_0x11e11a-0x7d0)for(this['curFontsInfo']=this['privateFontsInfo']['shift']();this['privateFontsInfo']['length']>0x0;){var _0x40b04e=this['privateFontsInfo'][0x0]['absTimeStamp'];if(!(_0x40b04e>_0x11e11a+0x7d0||_0x40b04e<_0x11e11a-0x7d0))break;this['curFontsInfo']=this['privateFontsInfo']['shift']();}}}if(0x0!=this['privateImageInfo']['length']){var _0x2b0dea=this['privateImageInfo'][0x0]['absTimeStamp'];if(_0x2b0dea<=_0x11e11a+0x3e8&&_0x2b0dea>_0x11e11a-0x3e8)this['curImagesInfo']=this['privateImageInfo']['shift']();else{if(_0x2b0dea>_0x11e11a+0x7d0||_0x2b0dea<_0x11e11a-0x7d0)for(this['curImagesInfo']=this['privateImageInfo']['shift']();this['privateImageInfo']['length']>0x0;){var _0x2f87f4=this['privateImageInfo'][0x0]['absTimeStamp'];if(!(_0x2f87f4>_0x11e11a+0x7d0||_0x2f87f4<_0x11e11a-0x7d0))break;this['curImagesInfo']=this['privateImageInfo']['shift']();}}}return 0x1;}},{'key':'RenderPrivateData','value':function(_0x52fe90){return 0x0!=this['privateLinesInfo']['length']||_0x52fe90||(this['curLinesInfo']=null),0x1;}},{'key':'InputPrivateInfo','value':function(_0x3d16ea,_0x109cfa,_0x1faeb9){var _0xe9b269=!0x1,_0x582fac=0x0;if(_0x3d16ea['linesNum']>0x0){if(_0x3d16ea['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x93fd90=0x0;for(_0x93fd90=0x0;_0x93fd90<this['privateLinesInfo']['length'];_0x93fd90++)if(this['privateLinesInfo'][_0x93fd90]['absTimeStamp']==_0x3d16ea['absTimeStamp']){_0xe9b269=!0x0,_0x582fac=_0x93fd90;break;}}if(_0xe9b269){var _0x366017=this['privateLinesInfo'][_0x582fac]['linesNum'];this['privateLinesInfo'][_0x582fac]['linesNum']=_0x366017+_0x3d16ea['linesNum'];for(var _0x140773=0x0;_0x140773<_0x3d16ea['linesNum'];_0x140773++){this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]={},this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['vertex_num']=_0x3d16ea['stDrawLinesArray'][_0x140773]['vertex_num'],this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['lineWidth']=_0x3d16ea['stDrawLinesArray'][_0x140773]['lineWidth'],this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['bFill']=_0x3d16ea['stDrawLinesArray'][_0x140773]['bFill'],this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['bLoop']=_0x3d16ea['stDrawLinesArray'][_0x140773]['bLoop'],this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['color']={},this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['color']['R']=_0x3d16ea['stDrawLinesArray'][_0x140773]['color']['R'],this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['color']['G']=_0x3d16ea['stDrawLinesArray'][_0x140773]['color']['G'],this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['color']['B']=_0x3d16ea['stDrawLinesArray'][_0x140773]['color']['B'],this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['color']['A']=_0x3d16ea['stDrawLinesArray'][_0x140773]['color']['A'],this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['stPoint']=[];for(var _0x1b240c=0x0;_0x1b240c<_0x3d16ea['stDrawLinesArray'][_0x140773]['vertex_num'];_0x1b240c++)this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['stPoint'][_0x1b240c]={},this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['stPoint'][_0x1b240c]['x']=_0x3d16ea['stDrawLinesArray'][_0x140773]['stPoint'][_0x1b240c]['x'],this['privateLinesInfo'][_0x582fac]['stDrawLinesArray'][_0x140773+_0x366017]['stPoint'][_0x1b240c]['y']=_0x3d16ea['stDrawLinesArray'][_0x140773]['stPoint'][_0x1b240c]['y'];}}else{this['maxPrivateLineTimeStamp']<_0x3d16ea['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x3d16ea['absTimeStamp']);var _0x109682={};_0x109682['linesNum']=_0x3d16ea['linesNum'],_0x109682['absTimeStamp']=_0x3d16ea['absTimeStamp'],_0x109682['stDrawLinesArray']=[];for(var _0x48875b=0x0;_0x48875b<_0x3d16ea['linesNum'];_0x48875b++){_0x109682['stDrawLinesArray'][_0x48875b]={},_0x109682['stDrawLinesArray'][_0x48875b]['vertex_num']=_0x3d16ea['stDrawLinesArray'][_0x48875b]['vertex_num'],_0x109682['stDrawLinesArray'][_0x48875b]['lineWidth']=_0x3d16ea['stDrawLinesArray'][_0x48875b]['lineWidth'],_0x109682['stDrawLinesArray'][_0x48875b]['bFill']=_0x3d16ea['stDrawLinesArray'][_0x48875b]['bFill'],_0x109682['stDrawLinesArray'][_0x48875b]['bLoop']=_0x3d16ea['stDrawLinesArray'][_0x48875b]['bLoop'],_0x109682['stDrawLinesArray'][_0x48875b]['color']={},_0x109682['stDrawLinesArray'][_0x48875b]['color']['R']=_0x3d16ea['stDrawLinesArray'][_0x48875b]['color']['R'],_0x109682['stDrawLinesArray'][_0x48875b]['color']['G']=_0x3d16ea['stDrawLinesArray'][_0x48875b]['color']['G'],_0x109682['stDrawLinesArray'][_0x48875b]['color']['B']=_0x3d16ea['stDrawLinesArray'][_0x48875b]['color']['B'],_0x109682['stDrawLinesArray'][_0x48875b]['color']['A']=_0x3d16ea['stDrawLinesArray'][_0x48875b]['color']['A'],_0x109682['stDrawLinesArray'][_0x48875b]['stPoint']=[];for(var _0x544a65=0x0;_0x544a65<_0x3d16ea['stDrawLinesArray'][_0x48875b]['vertex_num'];_0x544a65++)_0x109682['stDrawLinesArray'][_0x48875b]['stPoint'][_0x544a65]={},_0x109682['stDrawLinesArray'][_0x48875b]['stPoint'][_0x544a65]['x']=_0x3d16ea['stDrawLinesArray'][_0x48875b]['stPoint'][_0x544a65]['x'],_0x109682['stDrawLinesArray'][_0x48875b]['stPoint'][_0x544a65]['y']=_0x3d16ea['stDrawLinesArray'][_0x48875b]['stPoint'][_0x544a65]['y'];}this['privateLinesInfo']['push'](_0x109682);}}if(_0x109cfa['nFontsNum']>0x0){if(_0x109cfa['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x20a50d=0x0;for(_0x20a50d=0x0;_0x20a50d<this['privateFontsInfo']['length'];_0x20a50d++)if(this['privateFontsInfo'][_0x20a50d]['absTimeStamp']==_0x109cfa['absTimeStamp']){_0xe9b269=!0x0,_0x582fac=_0x20a50d;break;}}if(_0xe9b269);else{this['maxPrivateLineTimeStamp']<_0x109cfa['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x109cfa['absTimeStamp']);var _0x3ff6ba={};_0x3ff6ba['nFontsNum']=_0x109cfa['nFontsNum'],_0x3ff6ba['absTimeStamp']=_0x109cfa['absTimeStamp'],_0x3ff6ba['stDrawFontsArray']=[];for(var _0x39138c=0x0;_0x39138c<_0x109cfa['nFontsNum'];_0x39138c++)_0x3ff6ba['stDrawFontsArray'][_0x39138c]={},_0x3ff6ba['stDrawFontsArray'][_0x39138c]['nFontSizeW']=_0x109cfa['stDrawFontsArray'][_0x39138c]['nFontSizeW'],_0x3ff6ba['stDrawFontsArray'][_0x39138c]['nFontSizeH']=_0x109cfa['stDrawFontsArray'][_0x39138c]['nFontSizeH'],_0x3ff6ba['stDrawFontsArray'][_0x39138c]['color']={},_0x3ff6ba['stDrawFontsArray'][_0x39138c]['color']['R']=_0x109cfa['stDrawFontsArray'][_0x39138c]['color']['R'],_0x3ff6ba['stDrawFontsArray'][_0x39138c]['color']['G']=_0x109cfa['stDrawFontsArray'][_0x39138c]['color']['G'],_0x3ff6ba['stDrawFontsArray'][_0x39138c]['color']['B']=_0x109cfa['stDrawFontsArray'][_0x39138c]['color']['B'],_0x3ff6ba['stDrawFontsArray'][_0x39138c]['color']['A']=_0x109cfa['stDrawFontsArray'][_0x39138c]['color']['A'],_0x3ff6ba['stDrawFontsArray'][_0x39138c]['stPoint']={},_0x3ff6ba['stDrawFontsArray'][_0x39138c]['stPoint']['x']=_0x109cfa['stDrawFontsArray'][_0x39138c]['stPoint']['x'],_0x3ff6ba['stDrawFontsArray'][_0x39138c]['stPoint']['y']=_0x109cfa['stDrawFontsArray'][_0x39138c]['stPoint']['y'],_0x3ff6ba['stDrawFontsArray'][_0x39138c]['fontstring']=_0x109cfa['stDrawFontsArray'][_0x39138c]['fontString'];this['privateFontsInfo']['push'](_0x3ff6ba);}}if(_0x1faeb9['nPixelFormat']>0x0){if(_0x1faeb9['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x86fe76=0x0;for(_0x86fe76=0x0;_0x86fe76<this['privateImageInfo']['length'];_0x86fe76++)if(this['privateImageInfo'][_0x86fe76]['absTimeStamp']==_0x1faeb9['absTimeStamp']){_0xe9b269=!0x0,_0x582fac=_0x86fe76;break;}}if(_0xe9b269);else{this['maxPrivateLineTimeStamp']<_0x1faeb9['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x1faeb9['absTimeStamp']);var _0x4d4169={};_0x4d4169['absTimeStamp']=_0x1faeb9['absTimeStamp'],_0x4d4169['nWidth']=_0x1faeb9['nWidth'],_0x4d4169['nHeight']=_0x1faeb9['nHeight'],_0x4d4169['pstRect']={},_0x4d4169['pstRect']['fTop']=_0x1faeb9['pstRect']['fTop'],_0x4d4169['pstRect']['fBottom']=_0x1faeb9['pstRect']['fBottom'],_0x4d4169['pstRect']['fLeft']=_0x1faeb9['pstRect']['fLeft'],_0x4d4169['pstRect']['fRight']=_0x1faeb9['pstRect']['fRight'],_0x4d4169['nPixelFormat']=_0x1faeb9['nPixelFormat'],_0x4d4169['fAlpha']=_0x1faeb9['fAlpha'],_0x4d4169['picImageData']=_0x1faeb9['picImageData'],this['privateImageInfo']['push'](_0x4d4169);}}return 0x1;}},{'key':'WebGLDisplayCallBack','value':function(_0x568fe5){if(0x0!=_0x568fe5['privateLinesInfo']['length']||null!=_0x568fe5['curLinesInfo']){if(null!=_0x568fe5['curLinesInfo']){for(var _0x51e3cf=[],_0x3c985f=0x0,_0x2849c5=0x1,_0x345618=0x0;_0x345618<_0x568fe5['curLinesInfo']['linesNum'];_0x345618++){_0x51e3cf[_0x345618]={},_0x51e3cf[_0x345618]['nPointNum']=_0x568fe5['curLinesInfo']['stDrawLinesArray'][_0x345618]['vertex_num'],_0x51e3cf[_0x345618]['nLineWidth']=_0x568fe5['curLinesInfo']['stDrawLinesArray'][_0x345618]['lineWidth'],_0x2849c5=_0x568fe5['curLinesInfo']['stDrawLinesArray'][_0x345618]['bFill'],_0x51e3cf[_0x345618]['bLoop']=_0x568fe5['curLinesInfo']['stDrawLinesArray'][_0x345618]['bLoop'],_0x51e3cf[_0x345618]['pstColor']={},_0x51e3cf[_0x345618]['pstColor']['fR']=_0x568fe5['curLinesInfo']['stDrawLinesArray'][_0x345618]['color']['R'],_0x51e3cf[_0x345618]['pstColor']['fG']=_0x568fe5['curLinesInfo']['stDrawLinesArray'][_0x345618]['color']['G'],_0x51e3cf[_0x345618]['pstColor']['fB']=_0x568fe5['curLinesInfo']['stDrawLinesArray'][_0x345618]['color']['B'],_0x51e3cf[_0x345618]['pstColor']['fA']=_0x568fe5['curLinesInfo']['stDrawLinesArray'][_0x345618]['color']['A'],_0x51e3cf[_0x345618]['pstPoints']=[];for(var _0x1f4ec6=0x0;_0x1f4ec6<_0x51e3cf[_0x345618]['nPointNum'];_0x1f4ec6++)_0x51e3cf[_0x345618]['pstPoints'][_0x1f4ec6]={},_0x51e3cf[_0x345618]['pstPoints'][_0x1f4ec6]['fX']=_0x568fe5['curLinesInfo']['stDrawLinesArray'][_0x345618]['stPoint'][_0x1f4ec6]['x'],_0x51e3cf[_0x345618]['pstPoints'][_0x1f4ec6]['fY']=_0x568fe5['curLinesInfo']['stDrawLinesArray'][_0x345618]['stPoint'][_0x1f4ec6]['y'];_0x3c985f+=_0x51e3cf[_0x345618]['nPointNum'];}_0x568fe5['oVideoHandle']['SR_DrawLinesEx'](_0x51e3cf,_0x568fe5['curLinesInfo']['linesNum'],_0x3c985f,_0x2849c5);}_0x568fe5['curLinesInfo']=null;}if((0x0!=_0x568fe5['privateFontsInfo']['length']||null!=_0x568fe5['curFontsInfo'])&&null!=_0x568fe5['curFontsInfo']){for(var _0x2bb4c4=[],_0x3b920a=0x0;_0x3b920a<_0x568fe5['curFontsInfo']['nFontsNum'];_0x3b920a++){var _0x13e324={},_0x3ccb3e=_0x568fe5['curFontsInfo']['stDrawFontsArray'][_0x3b920a]['fontstring'],_0xaec00b={};_0xaec00b['fX']=_0x568fe5['curFontsInfo']['stDrawFontsArray'][_0x3b920a]['stPoint']['x'],_0xaec00b['fY']=_0x568fe5['curFontsInfo']['stDrawFontsArray'][_0x3b920a]['stPoint']['y'];var _0x4eaef9={'fR':0x1,'fG':0x0,'fB':0x0};_0x4eaef9['fA']=_0x568fe5['curFontsInfo']['stDrawFontsArray'][_0x3b920a]['color']['A'];var _0x6e5c1c=_0x568fe5['curFontsInfo']['stDrawFontsArray'][_0x3b920a]['nFontSizeW'],_0x4f1426=_0x568fe5['curFontsInfo']['stDrawFontsArray'][_0x3b920a]['nFontSizeH'];_0x13e324['pString']=_0x3ccb3e,_0x13e324['pstStartPos']=_0xaec00b,_0x13e324['nFontWidth']=_0x6e5c1c,_0x13e324['nFontHeight']=_0x4f1426,_0x13e324['pstFontColor']=_0x4eaef9,_0x13e324['bBackGround']=!0x1,_0x13e324['pstBGColor']=null,_0x13e324['fRotateAngle']=0x0,_0x13e324['pFontFamily']='sans-serif',_0x2bb4c4['push'](_0x13e324);}_0x568fe5['oVideoHandle']['SR_DrawFontEx'](_0x2bb4c4,_0x568fe5['curFontsInfo']['nFontsNum']);}if(0x0!=_0x568fe5['privateImageInfo']['length']||null!=_0x568fe5['curImagesInfo']){var _0x22b283=null;null!=_0x568fe5['curImagesInfo']&&null!=_0x568fe5['curImagesInfo']&&null!=_0x568fe5['curImagesInfo']['picImageData']&&null!=_0x568fe5['curImagesInfo']['picImageData']&&(_0x22b283=new Uint16Array(_0x568fe5['curImagesInfo']['picImageData']['buffer'])),null!=_0x568fe5['curImagesInfo']&&_0x568fe5['curImagesInfo']['nPixelFormat']>0x0&&_0x568fe5['oVideoHandle']['SR_DrawImage'](_0x22b283,_0x568fe5['curImagesInfo']['nWidth'],_0x568fe5['curImagesInfo']['nHeight'],_0x568fe5['curImagesInfo']['pstRect'],_0x568fe5['curImagesInfo']['nPixelFormat'],_0x568fe5['curImagesInfo']['fAlpha']);}if(0x0!==_0x568fe5['pWaterFontParam']['length']&&_0x568fe5['oVideoHandle']['SR_DrawFontEx'](_0x568fe5['pWaterFontParam'],_0x568fe5['pWaterFontParam']['length']),0x0!==_0x568fe5['pWaterImageParam']['length']){_0x568fe5['waterMarkImageIndex']>=_0x568fe5['waterMarkImageMax']&&(_0x568fe5['waterMarkImageIndex']=0x0);var _0x301647=_0x568fe5['waterMarkImageIndex'];_0x568fe5['oVideoHandle']['SR_DrawImage'](_0x568fe5['pWaterImageParam'][_0x301647]['videoStream'],_0x568fe5['pWaterImageParam'][_0x301647]['nImageWidth'],_0x568fe5['pWaterImageParam'][_0x301647]['nImageHeight'],_0x568fe5['pWaterImageParam'][_0x301647]['pstRectPos'],_0x1aec18,_0x568fe5['pWaterImageParam'][_0x301647]['fAlpha']),_0x568fe5['waterMarkImageIndex']++;}}}]),_0xfd894;}()),_0x53d287=(function(){function _0x3d2204(){_0x4fb29f(this,_0x3d2204),this['startTime']=0x0,this['curTime']=0x0,this['timeWalk']=0x0,this['lastDate']=0x0,this['preTimerStamp']=0x0;}return _0x1706bb(_0x3d2204,[{'key':'Init','value':function(){this['startTime']=this['GetCurTime']();}},{'key':'GetCurTime','value':function(){return this['curTime']=0x3c*new Date()['getHours']()*0x3c*0x3e8+0x3c*new Date()['getMinutes']()*0x3e8+0x3e8*new Date()['getSeconds']()+new Date()['getMilliseconds'](),this['lastDate']=new Date()['getDate'](),this['curTime'];}},{'key':'GetTimerWalk','value':function(){var _0x34fb5f=this['GetCurTime']()-this['startTime'];return this['lastDate']!==new Date()['getDate']()&&(_0x34fb5f+=0x18*(new Date()['getDate']()-this['lastDate'])*0x3c*0x3c*0x3e8),_0x34fb5f;}},{'key':'timerReset','value':function(){this['startTime']=0x0,this['curTime']=0x0,this['timeWalk']=0x0,this['lastDate']=0x0,this['preTimerStamp']=0x0;}}]),_0x3d2204;}()),_0x420034=(function(){function _0x1be876(){var _0x17bb25=arguments['length']>0x0&&void 0x0!==arguments[0x0]?arguments[0x0]:null;_0x4fb29f(this,_0x1be876),this['canvas']=null,this['streamOpenMode']=0x0,this['context']=null,this['oVideoDecoder']=null,this['frameBuffers']=[],this['initTimer']=!0x1,this['preTimeStamp']=0x0,this['baseTimeStamp']=0x0,this['resetTimer']=!0x0,this['RenderFrame']=this['RenderFrame']['bind'](this),this['renderCurStatus']=0x2,this['playSpeed']=0x1,this['nplaySpeed']=0x1,this['displayBuf']=0xe,this['needForward']=!0x1,this['firstFrame']=!0x0,this['LatcyTime']=0x0,this['displayFrameInfoCB']=null,this['displayFrameInfo']=[],this['curFrameInfo']={},this['curFrameInfo']['timeStamp']=0x0,this['sx']=0x0,this['sy']=0x0,this['sw']=0x0,this['sh']=0x0,this['displayRunning']=!0x1,this['oRenderTimer']=null,this['waitIFrameTimestamp']=0x0,this['curFrame']=null,this['player']=null,null!=_0x17bb25&&(this['player']=_0x17bb25),this['renderEngine']='webgl',this['oVideoRender']=null,this['FECCanvasID']='',this['oVideoRender']=new _0x2626c8();}return _0x1706bb(_0x1be876,[{'key':'init','value':function(_0x242510,_0x11701b,_0x3e21bb,_0x4ef901){this['canvas']=_0x242510,this['streamOpenMode']=_0x11701b,this['renderEngine']=_0x4ef901,this['SetCurStatus'](0x2),null==this['oVideoDecoder']&&(this['oVideoDecoder']=new _0x102364(_0x3e21bb,this,this['player']),null!==this['oVideoDecoder']&&this['oVideoDecoder']['initDecoder']()),this['frameBuffers']=this['oVideoDecoder']['ready_frames'],null!=this['oVideoRender']&&this['oVideoRender']['InitDisplay'](this['canvas'],this['renderEngine'],0x100),null==this['oRenderTimer']&&(this['oRenderTimer']=new _0x53d287());}},{'key':'HardDecodeError','value':function(){return this['player']['_switchHardToSoft'](),0x1;}},{'key':'inputData','value':function(_0x4871fa,_0x20f6bb){var _0x2c73e8={};_0x2c73e8['port']=_0x20f6bb['port'],_0x2c73e8['codecType']=_0x20f6bb['codecType'],_0x2c73e8['frameType']=_0x20f6bb['frameType'],_0x2c73e8['frameSize']=_0x20f6bb['frameSize'],_0x2c73e8['width']=_0x20f6bb['width'],_0x2c73e8['height']=_0x20f6bb['height'],_0x2c73e8['timeStamp']=_0x20f6bb['timeStamp'],_0x2c73e8['frameRate']=_0x20f6bb['frameRate'],_0x2c73e8['frameNum']=_0x20f6bb['frameNum'],_0x2c73e8['interlace']=_0x20f6bb['interlace'],_0x2c73e8['streamEnd']=_0x20f6bb['streamEnd'],_0x2c73e8['cropLeft']=_0x20f6bb['cropLeft'],_0x2c73e8['cropRight']=_0x20f6bb['cropRight'],_0x2c73e8['cropTop']=_0x20f6bb['cropTop'],_0x2c73e8['cropBottom']=_0x20f6bb['cropBottom'],_0x2c73e8['year']=_0x20f6bb['year'],_0x2c73e8['month']=_0x20f6bb['month'],_0x2c73e8['week']=_0x20f6bb['week'],_0x2c73e8['day']=_0x20f6bb['day'],_0x2c73e8['hour']=_0x20f6bb['hour'],_0x2c73e8['minute']=_0x20f6bb['minute'],_0x2c73e8['second']=_0x20f6bb['second'],_0x2c73e8['milliseconds']=_0x20f6bb['milliseconds'],this['displayFrameInfo']['push'](_0x2c73e8),this['oVideoDecoder']['inputData'](_0x4871fa,_0x20f6bb);}},{'key':'_resetDecoder','value':function(){var _0x2a6f70=this;return new Promise(function(_0x4a082c,_0x17a264){_0x2a6f70['oVideoDecoder']['resetDecoder']()['then'](function(){_0x2a6f70['displayFrameInfo']['splice'](0x0,_0x2a6f70['displayFrameInfo']['length']),_0x2a6f70['curFrameInfo']={},_0x2a6f70['oVideoRender']['DeInitPrivateParam'](),_0x2a6f70['renderCurStatus']=0x2,_0x2a6f70['player']?_0x2a6f70['player']['JSPlayM4_ResetEnd']():postMessage({'function':'resetEnd'}),_0x4a082c();},function(){_0x17a264();});});}},{'key':'_resetRenderTimer','value':function(){this['initTimer']=!0x1,this['preTimeStamp']=0x0,this['baseTimeStamp']=0x0,this['resetTimer']=!0x0,null!=this['oRenderTimer']&&this['oRenderTimer']['timerReset'](),this['RenderFrame']=this['RenderFrame']['bind'](this),this['renderCurStatus']=0x2,this['curTimeStamp']=0x0,this['getImageJPEG']=!0x1,this['getImageBMP']=!0x1,this['getCropImageJPEG']=!0x1,this['getCropImageBMP']=!0x1,this['displayFrameInfoCB']=null,this['displayFrameInfo']['splice'](0x0,this['displayFrameInfo']['length']),this['curFrameInfo']={};}},{'key':'_destroyPlayCtrl','value':function(){var _0x44fcbb=this;this['oVideoDecoder']['destroyDecoder']()['then'](function(){_0x44fcbb['oVideoDecoder']=null,null!=_0x44fcbb['oVideoRender']&&(_0x44fcbb['oVideoRender']['ReleaseDisplay'](),_0x44fcbb['oVideoRender']=null),_0x44fcbb['_resetRenderTimer'](),_0x44fcbb['oRenderTimer']=null,_0x44fcbb['displayRunning']=!0x1,console['log']('>>>JS\\x2002\\x20destroy\\x20oVideoDecoder/oVideoRender');},function(){console['log']('stop\\x20failed\\x20');});}},{'key':'RenderFrame','value':function(){var _0x8420d9=this;switch(this['renderCurStatus']){case 0x0:this['_resetRenderTimer'](),this['_resetDecoder']()['then'](function(){var _0x3f4df0=setTimeout(function(){_0x8420d9['RenderFrame'](),clearTimeout(_0x3f4df0);},0x1);},function(){});break;case 0x2:if(this['displayRunning'])this['chooseFrame']()['then'](function(_0x2bcbec){if(_0x8420d9['curFrame']=_0x2bcbec,-0x1==_0x8420d9['displayBuf']||0x0==_0x8420d9['streamOpenMode']&&0x0==_0x8420d9['LatcyTime'])null!=_0x8420d9['curFrame']&&(_0x8420d9['curTimeStamp']=_0x8420d9['curFrame']['timestamp'],_0x8420d9['paint'](_0x8420d9['curFrame'])),requestAnimationFrame(_0x8420d9['RenderFrame']);else{if(null!=_0x8420d9['curFrame']){_0x8420d9['initTimer']&&!_0x8420d9['resetTimer']||(_0x8420d9['oRenderTimer']['Init'](),_0x8420d9['initTimer']=!0x0,_0x8420d9['resetTimer']=!0x1,_0x8420d9['preTimeStamp']=_0x8420d9['curFrame']['timestamp'],_0x8420d9['baseTimeStamp']=_0x8420d9['curFrame']['timestamp'],0x1==_0x8420d9['streamOpenMode']&&(_0x8420d9['LatcyTime']=0x0)),_0x8420d9['curTimeStamp']=_0x8420d9['curFrame']['timestamp'];var _0x3afb3b=_0x8420d9['curTimeStamp']-_0x8420d9['preTimeStamp'],_0x3e9204=_0x8420d9['curTimeStamp']-_0x8420d9['baseTimeStamp'];(_0x3afb3b>0x1388||_0x3afb3b<0x0||_0x3e9204<0x0)&&(_0x8420d9['oRenderTimer']['Init'](),_0x8420d9['preTimeStamp']=_0x8420d9['curFrame']['timestamp'],_0x8420d9['baseTimeStamp']=_0x8420d9['curTimeStamp']);var _0x3efa63=(_0x8420d9['curTimeStamp']-_0x8420d9['baseTimeStamp']+_0x8420d9['LatcyTime'])/_0x8420d9['playSpeed']-_0x8420d9['oRenderTimer']['GetTimerWalk']();if(_0x3efa63<0xf&&_0x3efa63>-0xf)_0x8420d9['paint'](_0x8420d9['curFrame']),_0x8420d9['preTimeStamp']=_0x8420d9['curTimeStamp'],_0x8420d9['RenderFrame']();else{if(_0x3efa63<0x0)_0x8420d9['paint'](_0x8420d9['curFrame']),_0x8420d9['preTimeStamp']=_0x8420d9['curTimeStamp'],_0x8420d9['RenderFrame']();else var _0x17334a=setTimeout(function(){0x2==_0x8420d9['renderCurStatus']?(_0x8420d9['paint'](_0x8420d9['curFrame']),_0x8420d9['preTimeStamp']=_0x8420d9['curTimeStamp'],_0x8420d9['RenderFrame']()):_0x8420d9['RenderFrame'](),clearTimeout(_0x17334a);},_0x3efa63-0x5);}}else{_0x8420d9['playSpeed']>0x2&&0x1;var _0x157758=setTimeout(function(){_0x8420d9['RenderFrame'](),clearTimeout(_0x157758);},0x0);}}});else var _0x26c85a=setTimeout(function(){_0x8420d9['RenderFrame'](),clearTimeout(_0x26c85a);},0x5);break;case 0x3:var _0x1334d6=setTimeout(function(){_0x8420d9['_refresh'](),_0x8420d9['RenderFrame'](),clearTimeout(_0x1334d6);},0x5);break;case 0x5:if(this['needForward'])this['chooseFrame']()['then'](function(_0x2520f8){_0x8420d9['curFrame']=_0x2520f8;var _0x3d5903=setTimeout(function(){null!=_0x8420d9['curFrame']&&(_0x8420d9['paint'](_0x8420d9['curFrame']),_0x8420d9['needForward']=!0x1),_0x8420d9['RenderFrame'](),clearTimeout(_0x3d5903);},0x1);});else var _0x4c629e=setTimeout(function(){_0x8420d9['_refresh'](),_0x8420d9['RenderFrame'](),clearTimeout(_0x4c629e);},0x5);break;case 0x4:return void this['_destroyPlayCtrl']();default:return;}}},{'key':'paint','value':function(_0x46680c){var _0xaad404=this;return new Promise(function(_0x8d5e2c,_0x194e4b){if(0x4==_0xaad404['curstatus']||null==_0x46680c||null==_0xaad404['oVideoRender'])_0x8d5e2c();else{_0xaad404['waitIFrameTimestamp']===_0x46680c['timestamp']&&(_0xaad404['resetTimer']=!0x0);var _0x289abf={'nCropLeft':0x0,'nCropRight':0x0,'nCropTop':0x0,'nCropBottom':0x0};_0x289abf['nCodeWidth']=_0x46680c['displayWidth'],_0x289abf['nCodeHeight']=_0x46680c['displayHeight'];var _0x31f9ab={'x':0x0,'y':0x0};_0x31f9ab['width']=_0x46680c['displayWidth'],_0x31f9ab['height']=_0x46680c['displayHeight'],_0xaad404['oVideoRender']['DisplayFrame'](_0x46680c,_0x46680c['displayWidth'],_0x46680c['displayHeight'],_0x46680c['timestamp'],_0x289abf,null)['then'](function(_0x1fda7b){null!==_0xaad404['displayFrameInfoCB']&&_0xaad404['respondFrameInfoCB'](_0x1fda7b),_0xaad404['firstFrame']&&(null!=_0xaad404['player']?null!=_0xaad404['player']['FFCallBackFun']&&_0xaad404['player']['FFCallBackFun']():postMessage({'function':'firstFrameCB','value':!0x0}),_0xaad404['firstFrame']=!0x1),_0x8d5e2c();});}});}},{'key':'respondFrameInfoCB','value':function(_0x33bab8){if(0x0!=this['displayFrameInfo']['length']&&this['curFrameInfo']['timeStamp']!==_0x33bab8){for(var _0x592f8e={},_0x5b97bf=0x0;_0x5b97bf<this['displayFrameInfo']['length']&&(_0x592f8e=this['displayFrameInfo']['shift']())['timeStamp']!=_0x33bab8;_0x5b97bf++);this['curFrameInfo']['port']=_0x592f8e['port'],this['curFrameInfo']['codecType']=_0x592f8e['codecType'],this['curFrameInfo']['frameType']=_0x592f8e['frameType'],this['curFrameInfo']['frameSize']=_0x592f8e['frameSize'],this['curFrameInfo']['width']=_0x592f8e['width'],this['curFrameInfo']['height']=_0x592f8e['height'],this['curFrameInfo']['timeStamp']=_0x592f8e['timeStamp'],this['curFrameInfo']['frameRate']=_0x592f8e['frameRate'],this['curFrameInfo']['frameNum']=_0x592f8e['frameNum'],this['curFrameInfo']['interlace']=_0x592f8e['interlace'],this['curFrameInfo']['streamEnd']=_0x592f8e['streamEnd'],this['curFrameInfo']['cropLeft']=_0x592f8e['cropLeft'],this['curFrameInfo']['cropRight']=_0x592f8e['cropRight'],this['curFrameInfo']['cropTop']=_0x592f8e['cropTop'],this['curFrameInfo']['cropBottom']=_0x592f8e['cropBottom'],this['curFrameInfo']['year']=_0x592f8e['year'],this['curFrameInfo']['month']=_0x592f8e['month'],this['curFrameInfo']['week']=_0x592f8e['week'],this['curFrameInfo']['day']=_0x592f8e['day'],this['curFrameInfo']['hour']=_0x592f8e['hour'],this['curFrameInfo']['minute']=_0x592f8e['minute'],this['curFrameInfo']['second']=_0x592f8e['second'],this['curFrameInfo']['milliseconds']=_0x592f8e['milliseconds'],this['displayFrameInfoCB'](this['curFrameInfo']);}}},{'key':'postImageData','value':function(_0x31705b,_0xc61dfd,_0x58d6c1,_0x3385b4,_0xc82d56){this['player']?(this['getImageJPEG']&&(this['getImageJPEG']=!0x1,this['player']['_GetImage2'](_0x31705b,_0xc61dfd,_0x58d6c1,_0x3385b4,'jpeg',_0xc82d56,0x0,0x0,0x0,0x0)),this['getImageBMP']&&(this['getImageBMP']=!0x1,this['player']['_GetImage2'](_0x31705b,_0xc61dfd,_0x58d6c1,_0x3385b4,'bmp',_0xc82d56,0x0,0x0,0x0,0x0)),this['getCropImageJPEG']&&(this['getCropImageJPEG']=!0x1,this['player']['_GetImage2'](_0x31705b,_0xc61dfd,_0x58d6c1,_0x3385b4,'jpeg',_0xc82d56,this['sx'],this['sy'],this['sw'],this['sh'])),this['getCropImageBMP']&&(this['getCropImageBMP']=!0x1,this['player']['_GetImage2'](_0x31705b,_0xc61dfd,_0x58d6c1,_0x3385b4,'bmp',_0xc82d56,this['sx'],this['sy'],this['sw'],this['sh']))):(this['getImageJPEG']&&(this['getImageJPEG']=!0x1,postMessage({'function':'imageYUV','value':_0x31705b['buffer'],'size':_0xc61dfd,'width':_0x58d6c1,'height':_0x3385b4,'type':'jpeg','yuvType':_0xc82d56,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x31705b['buffer']])),this['getImageBMP']&&(this['getImageBMP']=!0x1,postMessage({'function':'imageYUV','value':_0x31705b['buffer'],'size':_0xc61dfd,'width':_0x58d6c1,'height':_0x3385b4,'type':'bmp','yuvType':_0xc82d56,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x31705b['buffer']])),this['getCropImageJPEG']&&(this['getCropImageJPEG']=!0x1,postMessage({'function':'imageYUV','value':_0x31705b['buffer'],'size':_0xc61dfd,'width':_0x58d6c1,'height':_0x3385b4,'type':'jpeg','yuvType':_0xc82d56,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x31705b['buffer']])),this['getCropImageBMP']&&(this['getCropImageBMP']=!0x1,postMessage({'function':'imageYUV','value':_0x31705b['buffer'],'size':_0xc61dfd,'width':_0x58d6c1,'height':_0x3385b4,'type':'bmp','yuvType':_0xc82d56,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x31705b['buffer']])));}},{'key':'chooseFrame','value':function(){var _0x5b3123=this;return new Promise(function(_0x22a102,_0x11cf49){if(null==_0x5b3123['oVideoRender']||null==_0x5b3123['oVideoDecoder'])_0x22a102(null);else{if(_0x5b3123['oVideoDecoder']['decoderObjNeedReset'])_0x5b3123['oVideoDecoder']['resetDecoder']()['then'](function(){_0x5b3123['oVideoDecoder']['decoderObjNeedReset']=!0x1,_0x22a102(null);},function(){_0x11cf49();});else{var _0x55345e=_0x5b3123['oVideoDecoder']['GetFrameBufferLength']();0x1==_0x5b3123['streamOpenMode']&&_0x55345e<0x3?_0x22a102(null):_0x5b3123['oVideoDecoder']['GetFrame']()['then'](function(_0x2dcdb4){_0x22a102(_0x2dcdb4);},function(){});}}});}},{'key':'SetDisplayRegion','value':function(_0x3c9672,_0x2e5bae,_0x81f69,_0x2fb15a){return null==this['oVideoRender']?0x0:(this['sx']=_0x3c9672,this['sy']=_0x2e5bae,this['sw']=_0x81f69,this['sh']=_0x2fb15a,this['oVideoRender']['SetDisplayRect'](_0x3c9672,_0x2e5bae,_0x81f69,_0x2fb15a));}},{'key':'SetCurStatus','value':function(_0x228b7a){return this['renderCurStatus']=_0x228b7a,0x1;}},{'key':'fast','value':function(){var _0x5d71f4=this['_GetFastSpeed'](this['nplaySpeed']);return this['_SetPlaySpeed'](_0x5d71f4);}},{'key':'slow','value':function(){var _0x2ee255=this['_GetSlowSpeed'](this['nplaySpeed']);return this['_SetPlaySpeed'](_0x2ee255);}},{'key':'Pause','value':function(_0x2f9e3a){if(_0x2f9e3a)this['SetCurStatus'](0x3);else{if(0x3!==this['renderCurStatus'])return-0x1;this['SetCurStatus'](0x2),this['resetTimer']=!0x0;}return 0x1;}},{'key':'_refresh','value':function(){0x0!=this['frameBuffers']['length']&&this['paint'](this['frameBuffers'][0x0]);}},{'key':'OneByOne','value':function(_0x54b7b0){if(_0x54b7b0)this['SetCurStatus'](0x5),this['needForward']=!0x0;else{if(0x5!==this['renderCurStatus'])return-0x1;this['SetCurStatus'](0x2),this['resetTimer']=!0x0,this['needForward']=!0x1,this['_SetPlaySpeed'](0x1);}return 0x1;}},{'key':'SetCanvasSize','value':function(_0x8cdb35,_0x4e0a9b){return null!=this['oVideoRender']&&this['oVideoRender']['SetCanvasSize'](_0x8cdb35,_0x4e0a9b);}},{'key':'GetCanvasSize','value':function(){return null!=this['oVideoRender']&&this['oVideoRender']['GetCanvasSize']();}},{'key':'GetPlayedTime','value':function(){return this['curTimeStamp'];}},{'key':'_SetPlaySpeed','value':function(_0x41dcd6){switch(_0x41dcd6){case-0x10:case-0x8:case-0x4:case-0x2:case 0x1:case 0x2:case 0x4:case 0x8:case 0x10:case 0x20:case 0x40:break;default:return-0x1;}return _0x41dcd6===this['nplaySpeed']||(this['nplaySpeed']=_0x41dcd6,this['playSpeed']=_0x41dcd6>0x0?_0x41dcd6:-0x1/_0x41dcd6,console['log']('playSpeed:'+this['playSpeed']),this['resetTimer']=!0x0,this['needForward']=!0x1,0x2!=this['renderCurStatus']&&this['SetCurStatus'](0x2)),0x1;}},{'key':'_GetFastSpeed','value':function(_0x497fdd){var _0x19ed0f=0x0;switch(_0x497fdd){case-0x10:_0x19ed0f=-0x8;break;case-0x8:_0x19ed0f=-0x4;break;case-0x4:_0x19ed0f=-0x2;break;case-0x2:_0x19ed0f=0x1;break;case 0x1:_0x19ed0f=0x2;break;case 0x2:_0x19ed0f=0x4;break;case 0x4:_0x19ed0f=0x8;break;case 0x8:_0x19ed0f=0x10;break;case 0x10:_0x19ed0f=0x20;break;case 0x20:_0x19ed0f=0x40;break;default:_0x19ed0f=0x0;}return _0x19ed0f;}},{'key':'_GetSlowSpeed','value':function(_0x205042){var _0x3823e2=0x0;switch(_0x205042){case-0x8:_0x3823e2=-0x10;break;case-0x4:_0x3823e2=-0x8;break;case-0x2:_0x3823e2=-0x4;break;case 0x1:_0x3823e2=-0x2;break;case 0x2:_0x3823e2=0x1;break;case 0x4:_0x3823e2=0x2;break;case 0x8:_0x3823e2=0x4;break;case 0x10:_0x3823e2=0x8;break;case 0x20:_0x3823e2=0x10;break;case 0x40:_0x3823e2=0x20;break;default:_0x3823e2=0x0;}return _0x3823e2;}},{'key':'SetDisplayBuf','value':function(_0x545bc9){return this['displayBuf']=_0x545bc9,this['LatcyTime']=0x1==_0x545bc9?0x0:0xf==_0x545bc9?0x2bc:0x2d==_0x545bc9?0x76c:_0x545bc9>0x6&&_0x545bc9<0x2d?0x28*_0x545bc9+0x64:-0x1==_0x545bc9?0x0:0x32,0x1;}},{'key':'GetJPEG','value':function(){var _0x217416=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x47fbb7){var _0x4c4a42=_0x47fbb7['yuvFrameBuffer'],_0x21fe4a=_0x47fbb7['yuvLength'],_0x5de09d=_0x47fbb7['displayWidth'],_0x19cd92=_0x47fbb7['displayHeight'],_0x564f58=_0x47fbb7['yuvType'];-0x1!=_0x4c4a42&&(_0x217416['player']?_0x217416['player']['_GetImage2'](_0x4c4a42,_0x21fe4a,_0x5de09d,_0x19cd92,'jpeg',_0x564f58,0x0,0x0,0x0,0x0):postMessage({'function':'imageYUV','value':_0x4c4a42['buffer'],'size':_0x21fe4a,'width':_0x5de09d,'height':_0x19cd92,'type':'jpeg','yuvType':_0x564f58,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x4c4a42['buffer']]));},function(){});}},{'key':'GetBMP','value':function(){var _0x50aa3d=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x45dba9){var _0xcb75bc=_0x45dba9['yuvFrameBuffer'],_0x41309e=_0x45dba9['yuvLength'],_0x304a75=_0x45dba9['displayWidth'],_0x271445=_0x45dba9['displayHeight'],_0x25bda5=_0x45dba9['yuvType'];-0x1!=_0xcb75bc&&(_0x50aa3d['player']?_0x50aa3d['player']['_GetImage2'](_0xcb75bc,_0x41309e,_0x304a75,_0x271445,'bmp',_0x25bda5,0x0,0x0,0x0,0x0):postMessage({'function':'imageYUV','value':_0xcb75bc['buffer'],'size':_0x41309e,'width':_0x304a75,'height':_0x271445,'type':'bmp','yuvType':_0x25bda5,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0xcb75bc['buffer']]));},function(){});}},{'key':'GetCropJPEG','value':function(){var _0x528214=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x52c101){var _0x2d0834=_0x52c101['yuvFrameBuffer'],_0x3b54e4=_0x52c101['yuvLength'],_0x2dd17d=_0x52c101['displayWidth'],_0x222bde=_0x52c101['displayHeight'],_0x5e79b2=_0x52c101['yuvType'];-0x1!=_0x2d0834&&(_0x528214['player']?_0x528214['player']['_GetImage2'](_0x2d0834,_0x3b54e4,_0x2dd17d,_0x222bde,'jpeg',_0x5e79b2,_0x528214['sx'],_0x528214['sy'],_0x528214['sw'],_0x528214['sh']):postMessage({'function':'imageYUV','value':_0x2d0834['buffer'],'size':_0x3b54e4,'width':_0x2dd17d,'height':_0x222bde,'type':'jpeg','yuvType':_0x5e79b2,'sx':_0x528214['sx'],'sy':_0x528214['sy'],'sw':_0x528214['sw'],'sh':_0x528214['sh']},[_0x2d0834['buffer']]));},function(){});}},{'key':'GetCropBMP','value':function(){var _0x34d3bb=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x17e4a0){var _0x54d352=_0x17e4a0['yuvFrameBuffer'],_0x679bbb=_0x17e4a0['yuvLength'],_0x1a8cac=_0x17e4a0['displayWidth'],_0x5ef877=_0x17e4a0['displayHeight'],_0x4b2544=_0x17e4a0['yuvType'];-0x1!=_0x54d352&&(_0x34d3bb['player']?_0x34d3bb['player']['_GetImage2'](_0x54d352,_0x679bbb,_0x1a8cac,_0x5ef877,'bmp',_0x4b2544,_0x34d3bb['sx'],_0x34d3bb['sy'],_0x34d3bb['sw'],_0x34d3bb['sh']):postMessage({'function':'imageYUV','value':_0x54d352['buffer'],'size':_0x679bbb,'width':_0x1a8cac,'height':_0x5ef877,'type':'bmp','yuvType':_0x4b2544,'sx':_0x34d3bb['sx'],'sy':_0x34d3bb['sy'],'sw':_0x34d3bb['sw'],'sh':_0x34d3bb['sh']},[_0x54d352['buffer']]));},function(){});}},{'key':'GetCanvasCapture','value':function(_0x3cd982){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20GetCanvasCapture','color:red'),0x0):(this['oVideoRender']['GetCanvasData'](_0x3cd982),0x1);}},{'key':'SetDecodeFrameType','value':function(_0x28d922){return this['waitIFrameTimestamp']=_0x28d922,0x1;}},{'key':'SetStreamEnd','value':function(){return this['oVideoDecoder']['SetStreamEnd'](),0x1;}},{'key':'SetAntialias','value':function(_0x943ab1){return null!=this['oVideoRender']?this['oVideoRender']['SetAntialias'](_0x943ab1):0x0;}},{'key':'SetFrameInfoCallBack','value':function(_0x541790,_0x490308){return this['displayFrameInfoCB']=_0x490308?_0x541790:null,0x1;}},{'key':'FEC_SetCanvasID','value':function(_0x28e753){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetCanvasID'](_0x28e753):(this['FECCanvasID']=_0x28e753,0x0);}},{'key':'FEC_ResetCorrectType','value':function(_0x2b9c41,_0x57bc81,_0x4e97ce){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_ResetCorrectType'](_0x2b9c41,_0x57bc81,_0x4e97ce):0x0;}},{'key':'FEC_GetPort','value':function(_0x3db558,_0x46d178){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),-0x1):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetPort'](_0x3db558,_0x46d178):-0x1;}},{'key':'FEC_Enable','value':function(_0x3a8958){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_Enable'](_0x3a8958):0x0;}},{'key':'FEC_SetParam','value':function(_0x31d775,_0x1f7ad7){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetParam'](_0x31d775,_0x1f7ad7):0x0;}},{'key':'FEC_GetParam','value':function(_0x3b200b,_0x216e87){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetParam'](_0x3b200b,_0x216e87):0x0;}},{'key':'FEC_SetViewParam','value':function(_0x16ac15,_0x207907,_0x416b23){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetViewParam'](_0x16ac15,_0x207907,_0x416b23):0x0;}},{'key':'FEC_GetViewParam','value':function(_0x452e94,_0x130bf7,_0x5244b8){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetViewParam'](_0x452e94,_0x130bf7,_0x5244b8):0x0;}},{'key':'FEC_SetWnd','value':function(_0x2c8530,_0xe9e79c){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetWnd'](_0x2c8530,_0xe9e79c):0x0;}},{'key':'FEC_Disable','value':function(_0x2648e5,_0x230019,_0x37f071){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_Disable'](_0x2648e5,_0x230019,_0x37f071):0x0;}},{'key':'FEC_DelPort','value':function(_0x164b50){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_DelPort'](_0x164b50):0x0;}},{'key':'FEC_SetDisplayRegion','value':function(_0x2bf76d,_0x553dde,_0x4dee75,_0x30867f,_0x1946aa,_0x3d6436,_0x4d4ccf){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetDisplayRegion'](_0x2bf76d,_0x553dde,_0x4dee75,_0x30867f,_0x1946aa,_0x3d6436,_0x4d4ccf):0x0;}},{'key':'FEC_SetBackCilling','value':function(_0x154f2d,_0x2a4d00){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetBackCilling'](_0x154f2d,_0x2a4d00):0x0;}},{'key':'FEC_GetPTZPort','value':function(_0x30b3da,_0xba7597,_0x47456e){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),-0x1):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetPTZPort'](_0x30b3da,_0xba7597,_0x47456e):-0x1;}},{'key':'FEC_SetPTZDisplayMode','value':function(_0x4db450){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetPTZDisplayMode'](_0x4db450):0x0;}},{'key':'InputPrivateInfo','value':function(_0x4fa429,_0x333fe7,_0x191e42){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20PrivateInfo','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['InputPrivateInfo'](_0x4fa429,_0x333fe7,_0x191e42):0x1;}},{'key':'RenderPrivateData','value':function(_0x2a7dd8){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20PrivateInfo','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['RenderPrivateData'](_0x2a7dd8):0x1;}},{'key':'SetWaterMarkFont','value':function(_0x19bd57){return'2d'===this['renderEngine']||'2D'===this['renderEngine']||null==this['oVideoRender']?(console['log']('%c\\x20param\\x20error\\x20this.renderEngine:%d,this.oVideoRender:%d','color:red',this['renderEngine'],this['oVideoRender']),0x0):(null!=this['oVideoRender']&&this['oVideoRender']['SetWaterMarkFont'](_0x19bd57,{'yuvFrameBuffer':-0x1,'yuvLength':-0x1,'displayWidth':-0x1,'displayHeight':-0x1,'yuvType':-0x1}),0x1);}},{'key':'SetWaterMarkImage','value':function(_0x30db2d){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetWaterMarkImage','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetWaterMarkImage'](_0x30db2d):0x1;}},{'key':'SetD3DPostProcess','value':function(_0x52ce15,_0x408c96){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetD3DPostProcess','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetD3DPostProcess'](_0x52ce15,_0x408c96):0x1;}}]),_0x1be876;}());_0x1edb9a=new _0x420034(),self['onmessage']=function(_0x211d76){let _0x303c01=_0x211d76['data'];switch(_0x303c01['command']){case'init':_0x1edb9a['init'](_0x303c01['canvas'],_0x303c01['streamOpenMode'],_0x303c01['sab'],_0x303c01['renderEngine']);break;case'inputData':let _0x5a23f3=new Uint8Array(_0x303c01['rawData']),_0x52e103=_0x303c01['rawDataFrameInfo'];_0x1edb9a['inputData'](_0x5a23f3,_0x52e103),_0x5a23f3=null;break;case'SetDisplayRegion':null===_0x1edb9a&&self['postMessage']({'function':'OrderError'}),_0x1edb9a['SetDisplayRegion'](_0x303c01['sx'],_0x303c01['sy'],_0x303c01['sw'],_0x303c01['sh']);break;case'stop':null===_0x1edb9a&&self['postMessage']({'function':'OrderError'}),_0x1edb9a['SetCurStatus'](0x4);let _0x3186ae=setInterval(()=>{_0x1edb9a['displayRunning']||(_0x1edb9a=null,self['postMessage']({'function':'stop'}),clearInterval(_0x3186ae),_0x3186ae=null,self['close'](),console['log']('>>>JS\\x2003\\x20destroy\\x20oVideoPlayCtrl\\x20and\\x20worker'));},0x2);break;case'fast':null===_0x1edb9a&&self['postMessage']({'function':'OrderError'}),0x1!==_0x1edb9a['fast']()&&self['postMessage']({'function':'paraError'});break;case'slow':null===_0x1edb9a&&self['postMessage']({'function':'OrderError'}),0x1!==_0x1edb9a['slow']()&&self['postMessage']({'function':'paraError'});break;case'SetDisplayBuf':null===_0x1edb9a&&self['postMessage']({'function':'OrderError'}),0x1!==_0x1edb9a['SetDisplayBuf'](_0x303c01['value'])&&self['postMessage']({'function':'paraError'});break;case'Pause':null===_0x1edb9a&&self['postMessage']({'function':'OrderError'}),0x1!==_0x1edb9a['Pause'](_0x303c01['value'])&&self['postMessage']({'function':'paraError'});break;case'OneByOne':null===_0x1edb9a&&self['postMessage']({'function':'OrderError'}),0x1!==_0x1edb9a['OneByOne'](_0x303c01['value'])&&self['postMessage']({'function':'paraError'});break;case'SetCanvasSize':null===_0x1edb9a&&self['postMessage']({'function':'OrderError'}),0x1!==_0x1edb9a['SetCanvasSize'](_0x303c01['width'],_0x303c01['height'])&&self['postMessage']({'function':'paraError'});break;case'GetCanvasSize':null===_0x1edb9a&&self['postMessage']({'function':'OrderError'}),0x1!==_0x1edb9a['GetCanvasSize']()&&self['postMessage']({'function':'paraError'});break;case'GetPlayedTime':null===_0x1edb9a&&self['postMessage']({'function':'OrderError'});let _0x5eaf80=_0x1edb9a['GetPlayedTime']();0x0!==_0x5eaf80&&self['postMessage']({'function':'GetPlayedTime','value':_0x5eaf80});break;case'needReset':_0x1edb9a['SetCurStatus'](0x0);break;case'GetJPEG':_0x1edb9a['GetJPEG']();break;case'GetBMP':_0x1edb9a['GetBMP']();break;case'GetCropJPEG':_0x1edb9a['GetCropJPEG']();break;case'GetCropBMP':_0x1edb9a['GetCropBMP']();break;case'SetDecodeFrameType':_0x1edb9a['SetDecodeFrameType'](_0x303c01['timestamp']);break;case'streamEnd':_0x1edb9a['SetStreamEnd']();break;case'SetAntialias':_0x1edb9a['SetAntialias'](_0x303c01['value']);break;case'SetFrameInfoCallBack':_0x1edb9a['SetFrameInfoCallBack'](_0x551160=>{self['postMessage']({'function':'SetFrameInfoCallBack','curFrameInfo':_0x551160});},_0x303c01['value']);break;case'FEC_SetCanvasID':_0x1edb9a['FEC_SetCanvasID'](_0x303c01['canvasID']);break;case'FECResetCorrectType':_0x1edb9a['FEC_ResetCorrectType'](_0x303c01['fishSubPort'],_0x303c01['placeType'],_0x303c01['correctType']);break;case'FECGetPort':let _0x4a3e77=_0x1edb9a['FEC_GetPort'](_0x303c01['placeType'],_0x303c01['correctType']);(_0x4a3e77<0x1||_0x4a3e77>0x1f||null==_0x4a3e77)&&(_0x4a3e77=-0x1),self['postMessage']({'function':'FECGetPort','fishSubPort':_0x4a3e77});break;case'FECEnable':_0x1edb9a['FEC_Enable'](_0x303c01['fishSubPort']);break;case'FECSetParam':_0x1edb9a['FEC_SetParam'](_0x303c01['fishSubPort'],_0x303c01['param2d']);break;case'FECGetParam':let _0x3d7605={};_0x1edb9a['FEC_GetParam'](_0x303c01['fishSubPort'],_0x3d7605),self['postMessage']({'function':'FECGetParam','param2d':_0x3d7605});break;case'FECSetViewParam':_0x1edb9a['FEC_SetViewParam'](_0x303c01['fishSubPort'],_0x303c01['upDateType'],_0x303c01['fValue']);break;case'FECGetViewParam':let _0x5bc336={};_0x1edb9a['FEC_GetViewParam'](_0x303c01['fishSubPort'],_0x303c01['upDateType'],_0x5bc336),self['postMessage']({'function':'FECGetViewParam','Param3D':Param});break;case'FECSetWnd':_0x1edb9a['FEC_SetWnd'](_0x303c01['fishSubPort'],_0x303c01['offscrrenCnv']);break;case'FECDisable':_0x1edb9a['FEC_Disable'](_0x303c01['fishSubPort'],_0x303c01['clearFECCanvas'],_0x303c01['clearContext']);break;case'FECDelPort':_0x1edb9a['FEC_DelPort'](_0x303c01['fishSubPort']);break;case'FECSetDisplayRegion':_0x1edb9a['FEC_SetDisplayRegion'](_0x303c01['fishSubPort'],_0x303c01['type'],_0x303c01['regionNum'],_0x303c01['sx'],_0x303c01['sy'],_0x303c01['sw'],_0x303c01['sh']);break;case'FECSetBackCilling':_0x1edb9a['FEC_SetBackCilling'](_0x303c01['fishSubPort'],_0x303c01['bValue']);break;case'FECGetPTZPort':let _0x4d0434=_0x1edb9a['FEC_GetPTZPort'](_0x303c01['fPositionX'],_0x303c01['fPositionY']);(_0x4d0434<0x1||_0x4d0434>0x1f||null==_0x4d0434)&&(_0x4d0434=-0x1,console['info']('%c\\x20hardDecoderWorker\\x20FECGetPTZPort\\x20error\\x20','color:\\x20red')),self['postMessage']({'function':'FECGetPTZPort','fishSubPort':_0x4d0434});break;case'FECSetPTZDisplayMode':_0x1edb9a['FEC_SetPTZDisplayMode'](_0x303c01['ptzMode']);break;case'RenderPrivateData':_0x1edb9a['RenderPrivateData'](_0x303c01['bTrue']);break;case'InputPrivateInfo':_0x1edb9a['InputPrivateInfo'](_0x303c01['linesInfo'],_0x303c01['fontInfo'],_0x303c01['ImageInfo']);break;case'GetCanvasCapture':_0x1edb9a['GetCanvasCapture'](_0x303c01['cbFun']);break;case'SetWaterMarkFont':_0x1edb9a['SetWaterMarkFont'](_0x303c01['fontParam']);break;case'SetWaterMarkImage':_0x1edb9a['SetWaterMarkImage'](_0x303c01['imageParam']);break;case'SetD3DPostProcess':_0x1edb9a['SetD3DPostProcess'](_0x303c01['ProcessType'],_0x303c01['ProcessValue']);}};})());","Worker",void 0,void 0)}var _0x2e918a=function(){function _0x43f113(_0x4f19cf,_0x7f8c0c,_0x2405f3){_0x540ab2(this,_0x43f113),this["width"]=0,this["height"]=0,this["decoderObj"]=null,this["FirstFrame"]=!0,this["ready_frames"]=[],this["underflow"]=!0,this["sab"]=_0x4f19cf,this["frameRate"]=30,this["needSetPreSoft"]=!1,this["decoderCurStatus"]=2,this["decoderOutSuccess"]=!1,this["decoderObjNeedReset"]=!1,this["oVideoRenderHandle"]=_0x7f8c0c,this["output"]=this["output"]["bind"](this),this["reportError"]=this["reportError"]["bind"](this),this["player"]=null,null!=_0x2405f3&&(this["player"]=_0x2405f3),this["curFrame"]=null}return _0x132bfb(_0x43f113,[{key:"initDecoder",value:function value(){if(null==this["decoderObj"]){var _0x2b5fba={output:this["output"],error:this["reportError"]};this["decoderObj"]=new VideoDecoder(_0x2b5fba)}this["underflow"]&&(this["underflow"]=!1,setTimeout(this["oVideoRenderHandle"]["RenderFrame"](),0),this["oVideoRenderHandle"]["displayRunning"]=!0),this["decoderCurStatus"]=2,this["FirstFrame"]=!0}},{key:"inputData",value:function value(_0xe97fcb,_0xc331ce){null!=this["decoderObj"]&&("configured"==this["decoderObj"]["state"]||this["FirstFrame"])&&this["decodeProcess"](_0xe97fcb,_0xc331ce),_0xc331ce["nStreamEnd"]&&this["SetStreamEnd"]()}},{key:"concatenate",value:function value(_0x268e43){for(var _0x10f1bb=0,_0x3360c2=arguments["length"],_0x368388=new Array(_0x3360c2>1?_0x3360c2-1:0),_0x1ac9a8=1;_0x1ac9a8<_0x3360c2;_0x1ac9a8++)_0x368388[_0x1ac9a8-1]=arguments[_0x1ac9a8];for(var _0x3407bd=0,_0x653050=_0x368388;_0x3407bd<_0x653050["length"];_0x3407bd++){var _0x49ceb4=_0x653050[_0x3407bd];_0x10f1bb+=_0x49ceb4["length"]}for(var _0xebbbe3=new _0x268e43(_0x10f1bb),_0x20390c=0,_0x53a95c=0,_0x5e25db=_0x368388;_0x53a95c<_0x5e25db["length"];_0x53a95c++){var _0x52fcca=_0x5e25db[_0x53a95c];_0xebbbe3["set"](_0x52fcca,_0x20390c),_0x20390c+=_0x52fcca["length"]}return _0xebbbe3}},{key:"processData",value:function value(_0x3fea98){for(var _0x20d1e3=null,_0x8c9352=null,_0x5a2426=null,_0x1d25d0=!1,_0x25ee81=!1,_0x576eb1=0,_0x5e8bc5=0;_0x5e8bc5<_0x3fea98["length"]-4;_0x5e8bc5++){if(0!=_0x3fea98[_0x5e8bc5]||0!=_0x3fea98[_0x5e8bc5+1]||0!=_0x3fea98[_0x5e8bc5+2]||1!=_0x3fea98[_0x5e8bc5+3]||103!=_0x3fea98[_0x5e8bc5+4]&&39!=_0x3fea98[_0x5e8bc5+4]||(0!=_0x5e8bc5?(_0x25ee81=!0,_0x20d1e3=_0x3fea98["slice"](_0x5e8bc5),_0x576eb1=_0x5e8bc5):_0x20d1e3=_0x3fea98),0==_0x3fea98[_0x5e8bc5]&&0==_0x3fea98[_0x5e8bc5+1]&&0==_0x3fea98[_0x5e8bc5+2]&&1==_0x3fea98[_0x5e8bc5+3]&&(9==_0x3fea98[_0x5e8bc5+4]||6==_0x3fea98[_0x5e8bc5+4])){if(null==_0x20d1e3)continue;null==_0x8c9352&&(_0x8c9352=_0x3fea98["slice"](_0x576eb1,_0x5e8bc5),_0x1d25d0=!0)}if(0==_0x3fea98[_0x5e8bc5]&&0==_0x3fea98[_0x5e8bc5+1]&&0==_0x3fea98[_0x5e8bc5+2]&&1==_0x3fea98[_0x5e8bc5+3]&&(101==_0x3fea98[_0x5e8bc5+4]||37==_0x3fea98[_0x5e8bc5+4])){_0x1d25d0&&(_0x5a2426=_0x3fea98["slice"](_0x5e8bc5));break}}return _0x1d25d0?this["concatenate"](Uint8Array,_0x8c9352,_0x5a2426):_0x25ee81?_0x20d1e3:_0x3fea98}},{key:"processData1",value:function value(_0x3256e5){return 0!=_0x3256e5[0]||0!=_0x3256e5[1]||0!=_0x3256e5[2]||1!=_0x3256e5[3]||9!=_0x3256e5[4]&&6!=_0x3256e5[4]?_0x3256e5:_0x3256e5["slice"](5)}},{key:"formatVideoDecoderConfigure",value:function value(_0x5d9549,_0xbb51c1,_0x216bdb,_0x403a7d){var _0x5dfae2="";if(5==_0xbb51c1)_0x5dfae2="hvc1.1.6.L123.00",console["log"]("265 hard decoder");else{if(256==_0xbb51c1){for(var _0x5c334d=0;_0x5c334d<_0x5d9549["length"];_0x5c334d++)if(103===_0x5d9549[_0x5c334d]||39===_0x5d9549[_0x5c334d]){var _0xb36782=_0x5d9549["subarray"](_0x5c334d+1,_0x5c334d+4);_0x5dfae2="avc1.";for(var _0x26e65f=0;_0x26e65f<3;_0x26e65f++){var _0x19931b=_0xb36782[_0x26e65f]["toString"](16);_0x19931b["length"]<2&&(_0x19931b="0"+_0x19931b),_0x5dfae2+=_0x19931b}break}console["log"]("264 hard decoder")}else console["log"]("Support Error: hard decoder only support 264 and 265 !!!")}var _0x46734e={codec:_0x5dfae2,hardwareAcceleration:"prefer-hardware",optimizeForLatency:1};return 5!=_0xbb51c1&&this["needSetPreSoft"]&&(_0x46734e["hardwareAcceleration"]="prefer-software"),_0x46734e}},{key:"decodeProcess",value:function value(_0x6c1693,_0x3b5d37){var _0x51104d=this;this["frameRate"]!=_0x3b5d37["frameRate"]&&(this["frameRate"]=_0x3b5d37["frameRate"]),this["width"]!=_0x3b5d37["width"]&&(this["width"]=_0x3b5d37["width"]),this["height"]!=_0x3b5d37["height"]&&(this["height"]=_0x3b5d37["height"]),_0x3b5d37["needSetPreSoft"]&&(this["needSetPreSoft"]=_0x3b5d37["needSetPreSoft"]);var _0x1ff2e3=_0x6c1693;if(4!=this["decoderCurStatus"]&&null!=this["decoderObj"]){if("configured"==this["decoderObj"]["state"]){var _0x565d4c=new EncodedVideoChunk({data:_0x1ff2e3,timestamp:_0x3b5d37["timeStamp"],type:_0x3b5d37["isKeyFrame"]?"key":"delta"});this["decoderObj"]["decode"](_0x565d4c),_0x1ff2e3=null,_0x6c1693=null,_0x565d4c=null,_0x3b5d37["frameType"]}else{if(_0x3b5d37["isKeyFrame"]&&"unconfigured"==this["decoderObj"]["state"]){var _0x370ac0=this["formatVideoDecoderConfigure"](_0x6c1693,_0x3b5d37["codecType"],_0x3b5d37["width"],_0x3b5d37["height"]);if(""==_0x370ac0["codec"])return-1;VideoDecoder["isConfigSupported"](_0x370ac0)["then"](function(_0x5bab58){if(_0x5bab58["supported"]){_0x51104d["decoderObj"]["configure"](_0x370ac0),_0x1ff2e3=_0x51104d["processData"](_0x6c1693),_0x51104d["FirstFrame"]=!1;var _0x41c220=new EncodedVideoChunk({data:_0x1ff2e3,timestamp:_0x3b5d37["timeStamp"],type:_0x3b5d37["isKeyFrame"]?"key":"delta"});_0x51104d["decoderObj"]["decode"](_0x41c220),_0x370ac0=null,_0x1ff2e3=null,_0x6c1693=null}else console["log"]("%c4>HardDecoder ConfigSupported error,switch hard to soft","color: red"),_0x51104d["oVideoRenderHandle"]["HardDecodeError"]()})["catch"](function(){console["log"]("VideoDecoder.js isConfigSupported error switch hard to soft "),_0x51104d["oVideoRenderHandle"]["HardDecodeError"]()})}}}}},{key:"output",value:function value(_0xbdd8d0){if("configured"==this["decoderObj"]["state"])_0xbdd8d0["format"],_0xbdd8d0["codedWidth"],_0xbdd8d0["codedHeight"],_0xbdd8d0["displayWidth"],_0xbdd8d0["displayHeight"],_0xbdd8d0["duration"],_0xbdd8d0["timestamp"],this["ready_frames"]["push"](_0xbdd8d0),this["decoderOutSuccess"]||(this["decoderOutSuccess"]=!0),this["decoderObj"]["decodeQueueSize"]<=1&&(this["player"]?this["player"]["JSPlayM4_GetRawData"]():postMessage({function:"GetRawData"}));else _0xbdd8d0["close"]()}},{key:"output2",value:function value(_0x16ffbf){var _0x9c7c89=this;_0x16ffbf["timestamp"],createImageBitmap(_0x16ffbf)["then"](function(_0x39e352){_0x16ffbf["close"](),_0x9c7c89["ready_frames"]["push"](_0x39e352)})}},{key:"reportError",value:function value(_0x44c83c){this["decoderOutSuccess"]?this["decoderObjNeedReset"]=!0:(this["oVideoRenderHandle"]["HardDecodeError"](),console["log"]("%cswitch hardVideoDecoder to softVideoDecoder","color: red"))}},{key:"destroyDecoder",value:function value(){var _0x3c8ef6=this;return new Promise(function(_0x37bc82,_0x268568){_0x3c8ef6["clearDecoderObjBuffer"]()["then"](function(){null!=_0x3c8ef6["decoderObj"]&&("closed"!=_0x3c8ef6["decoderObj"]["state"]&&_0x3c8ef6["decoderObj"]["close"](),console["log"](">>>JS 01 destroy decoderObj"),_0x3c8ef6["decoderObj"]=null),_0x3c8ef6["decoderCurStatus"]=4,_0x3c8ef6["decoderOutSuccess"]=!1,_0x3c8ef6["FirstFrame"]=!0,_0x3c8ef6["underflow"]=!0,_0x3c8ef6["needSetPreSoft"]=!1,_0x3c8ef6["decoderObjNeedReset"]=!1,_0x37bc82()},function(){_0x268568()})})}},{key:"resetDecoder",value:function value(){var _0x5c9b64=this;return new Promise(function(_0x3c64cd,_0x38338c){_0x5c9b64["destroyDecoder"]()["then"](function(){_0x5c9b64["initDecoder"](),console["log"]("%c reset hard decoder","color:red"),_0x3c64cd()},function(){_0x38338c()})})}},{key:"clearDecoderObjBuffer",value:function value(){var _0xc2df2d=this;return new Promise(function(_0x1675c2,_0x56cf51){for(var _0xe25161=_0xc2df2d["ready_frames"]["length"],_0x4acc05=0;_0x4acc05<_0xe25161;_0x4acc05++){_0xc2df2d["ready_frames"]["shift"]()["close"]()}_0xc2df2d["ready_frames"]["splice"](0,_0xc2df2d["ready_frames"]["length"]),null!=_0xc2df2d["decoderObj"]&&"configured"==_0xc2df2d["decoderObj"]["state"]&&_0xc2df2d["decoderObj"]["reset"](),_0x1675c2()})}},{key:"SetStreamEnd",value:function value(){return 0==this["decoderObj"]["decodeQueueSize"]&&0==this["ready_frames"]["length"]&&(this["decoderObj"]["flush"](),console["log"]("flush")),1}},{key:"GetFrame",value:function value(){var _0x3aa177=this;return new Promise(function(_0x1dc8f8,_0x3a1dcf){if(null!=_0x3aa177["curFrame"]){var _0x52aec7=_0x3aa177["ready_frames"]["shift"]();_0x52aec7["close"](),_0x52aec7=null,_0x3aa177["curFrame"]=null}0!=_0x3aa177["ready_frames"]["length"]?(_0x3aa177["curFrame"]=_0x3aa177["ready_frames"][0],_0x1dc8f8(_0x3aa177["curFrame"])):(_0x3aa177["curFrame"]=null,_0x1dc8f8(null))})}},{key:"GetFrameBufferLength",value:function value(){return this["ready_frames"]["length"]}},{key:"GetImageYUV",value:function value(){var _0x5577b1=this;return new Promise(function(_0x5d967b,_0x434ece){var _0x1883fb=null;if(null!=_0x5577b1["curFrame"]?_0x1883fb=_0x5577b1["curFrame"]:0!=_0x5577b1["ready_frames"]["length"]&&(_0x1883fb=_0x5577b1["ready_frames"][0]),null!=_0x1883fb){var _0x382697=_0x1883fb["displayWidth"],_0x236e5c=_0x1883fb["displayHeight"],_0x11c65a=_0x382697*_0x236e5c*3/2,_0x2ae5b0=new Uint8Array(_0x11c65a),_0x24cdf1=_0x1883fb["format"];_0x1883fb["copyTo"](_0x2ae5b0)["then"](function(){console["log"]("2 yuvLength:"+_0x11c65a+",displayWidth:"+_0x382697),_0x5d967b({yuvFrameBuffer:_0x2ae5b0,yuvLength:_0x11c65a,displayWidth:_0x382697,displayHeight:_0x236e5c,yuvType:_0x24cdf1})})}else _0x5d967b({yuvFrameBuffer:-1,yuvLength:-1,displayWidth:-1,displayHeight:-1,yuvType:-1})})}}]),_0x43f113}(),_0x31e0fd=1,_0x1b8a99=2147483649,_0x55d077=2147483651,_0x27ff6b=2147483652,_0x592c4b=2147483653,_0x33b5e3=2147483658,_0x3e8d23=2147483661,_0x1482fd=2147483662,_0x1dd1c6=1,_0x2f2c60=2,_0x2bffb5={SR_DE_NULL:0,SR_DE_FISH_ORIGINAL:1,SR_DE_FISH_PTZ_CEILING:2,SR_DE_FISH_PTZ_FLOOR:3,SR_DE_FISH_PTZ_WALL:4,SR_DE_FISH_PANORAMA_CEILING_360:5,SR_DE_FISH_PANORAMA_CEILING_180:6,SR_DE_FISH_PANORAMA_FLOOR_360:7,SR_DE_FISH_PANORAMA_FLOOR_180:8,SR_DE_FISH_PANORAMA_WALL:9,SR_DE_FISH_SEMISPHERE:10,SR_DE_EAGLEEYE_SEMISPHERE:11,SR_DE_EAGLEEYE_PLANE:12,SR_DE_FISH_CYLINDER_CEILING:13,SR_DE_FISH_CYLINDER_FLOOR:14,SR_DE_FISH_CYLINDER_SPLIT_CEILING:15,SR_DE_FISH_CYLINDER_SPLIT_FLOOR:16,SR_DE_FISH_PLANET:17,SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:18,SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:19,SR_DE_FISH_ANIMATION_SWITCH_CEILING:20,SR_DE_FISH_ANIMATION_SWITCH_FLOOR:21,SR_DE_PANORAMA_SPHERE:22,SR_DE_PANORAMA_PLANET:23},_0x2df14a=0,_0x154578=1,_0x1e0cc7=2,_0x5a2deb=3,_0x3ec945=4,_0xbc9894=5,_0x411f45=6,_0x44487e=256,_0x3d41fb=1,_0x4e6902=2,_0x5b2108=3,_0xe75037=4,_0xff172f=0,_0x446724=1,_0x310c66=2,_0x5dbe7b=1,_0x117086=2,_0x291b83=3,_0x1d6f4d=0,_0x67d97f=1,_0x403a70=1,_0x41da8c=2,_0x2d02d4=1,_0x4f0981=2,_0x53ebaf=3,_0x596add=4,_0x5bad3d=5,_0x1bb308="\nattribute vec3 xy;\nattribute vec2 uv;\nuniform int bCapture; \n\nvarying highp vec2 v_uv;\n\nvoid main(void) {\n  if(bCapture == 1)\n  {\n    gl_Position = vec4(xy.x, -xy.y, xy.z, 1.0);\n  }\n  else\n  {\n    gl_Position = vec4(xy, 1.0);\n  }\n  v_uv = uv;\n}\n",_0x5b6f7b="\n    attribute vec3 position;\n    attribute vec4   color;\n    varying   float  pp;\n    varying   vec4  colorOut;\n    uniform int bCapture; \n\n    void main()\n    {\n        if(bCapture == 1)\n        {\n            gl_Position = vec4(position.x, -position.y, 0.0, 1.0);\n        }\n        else\n        {\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n        }\n        pp = position.z;\n        colorOut = color;\n    }\n",_0x5d9577="\n    varying  mediump float pp;\n    varying  lowp vec4  colorOut;\n    void main()\n    {\n        gl_FragColor = colorOut;\n        mediump float fx = abs(pp);\n        if (fx > 0.2)\n        { \n            gl_FragColor.a = colorOut.a*(1.25 - 1.25*fx);\n        } \n    } \n",_0x451732="\n    attribute vec4 position; \n    attribute vec4 texCoord; \n    uniform   mat4   matRotate; \n    varying vec4 pp; \n    uniform int bCapture;\n\n    void main() \n    { \n        gl_Position = position; //* matRotate; \n        if(bCapture == 1)\n        {\n           gl_Position.y =  -position.y;\n        }\n        pp = texCoord; \n    } \n",_0x9c7356="\n    precision mediump float; \n    uniform sampler2D texture;\n    varying lowp vec4 pp; \n    uniform float fAlpha;\n    void main(void) \n    { \n        gl_FragColor = texture2D(texture, pp.st); \n        gl_FragColor.a *= fAlpha; \n    } \n",_0x36131b=32,_0x3c021e=1024,_0x125257=.05,_0x2fc9a7=1e-6,_0x2ab8a6=3.1415926,_0x19a48f=.02,_0x47cc10=1e3,_0x5ce356=.78539815,_0x5eef1d=40,_0x308700=-1,_0x541632=_0x2ab8a6/18,_0x3e6e92=_0x2ab8a6/3,_0x4be0f9=_0x2ab8a6/6,_0x49b105=_0x2ab8a6/9,_0x311309=1e-6,_0x823aad="undefined"!=typeof Float32Array?Float32Array:Array;Math["hypot"]||(Math["hypot"]=function(){for(var _0x34b5c0=0,_0x5d23a0=arguments["length"];_0x5d23a0--;)_0x34b5c0+=arguments[_0x5d23a0]*arguments[_0x5d23a0];return Math["sqrt"](_0x34b5c0)});function _0x2c117f(){var _0x51aa07=new _0x823aad(16);return _0x823aad!=Float32Array&&(_0x51aa07[1]=0,_0x51aa07[2]=0,_0x51aa07[3]=0,_0x51aa07[4]=0,_0x51aa07[6]=0,_0x51aa07[7]=0,_0x51aa07[8]=0,_0x51aa07[9]=0,_0x51aa07[11]=0,_0x51aa07[12]=0,_0x51aa07[13]=0,_0x51aa07[14]=0),_0x51aa07[0]=1,_0x51aa07[5]=1,_0x51aa07[10]=1,_0x51aa07[15]=1,_0x51aa07}function _0x3249eb(_0x484351,_0x219e66,_0x272163){var _0xfbb74=_0x219e66[0],_0x9d948e=_0x219e66[1],_0x18623f=_0x219e66[2],_0x3b20b3=_0x219e66[3],_0x17442a=_0x219e66[4],_0x2ef4e7=_0x219e66[5],_0x512f3f=_0x219e66[6],_0x3ede7a=_0x219e66[7],_0x23a6fc=_0x219e66[8],_0x495658=_0x219e66[9],_0x567075=_0x219e66[10],_0x59b64c=_0x219e66[11],_0x9f58bb=_0x219e66[12],_0x1a5621=_0x219e66[13],_0x2aa095=_0x219e66[14],_0x259659=_0x219e66[15],_0x5702c8=_0x272163[0],_0x2ac7ee=_0x272163[1],_0x37f775=_0x272163[2],_0xa49e22=_0x272163[3];return _0x484351[0]=_0x5702c8*_0xfbb74+_0x2ac7ee*_0x17442a+_0x37f775*_0x23a6fc+_0xa49e22*_0x9f58bb,_0x484351[1]=_0x5702c8*_0x9d948e+_0x2ac7ee*_0x2ef4e7+_0x37f775*_0x495658+_0xa49e22*_0x1a5621,_0x484351[2]=_0x5702c8*_0x18623f+_0x2ac7ee*_0x512f3f+_0x37f775*_0x567075+_0xa49e22*_0x2aa095,_0x484351[3]=_0x5702c8*_0x3b20b3+_0x2ac7ee*_0x3ede7a+_0x37f775*_0x59b64c+_0xa49e22*_0x259659,_0x5702c8=_0x272163[4],_0x2ac7ee=_0x272163[5],_0x37f775=_0x272163[6],_0xa49e22=_0x272163[7],_0x484351[4]=_0x5702c8*_0xfbb74+_0x2ac7ee*_0x17442a+_0x37f775*_0x23a6fc+_0xa49e22*_0x9f58bb,_0x484351[5]=_0x5702c8*_0x9d948e+_0x2ac7ee*_0x2ef4e7+_0x37f775*_0x495658+_0xa49e22*_0x1a5621,_0x484351[6]=_0x5702c8*_0x18623f+_0x2ac7ee*_0x512f3f+_0x37f775*_0x567075+_0xa49e22*_0x2aa095,_0x484351[7]=_0x5702c8*_0x3b20b3+_0x2ac7ee*_0x3ede7a+_0x37f775*_0x59b64c+_0xa49e22*_0x259659,_0x5702c8=_0x272163[8],_0x2ac7ee=_0x272163[9],_0x37f775=_0x272163[10],_0xa49e22=_0x272163[11],_0x484351[8]=_0x5702c8*_0xfbb74+_0x2ac7ee*_0x17442a+_0x37f775*_0x23a6fc+_0xa49e22*_0x9f58bb,_0x484351[9]=_0x5702c8*_0x9d948e+_0x2ac7ee*_0x2ef4e7+_0x37f775*_0x495658+_0xa49e22*_0x1a5621,_0x484351[10]=_0x5702c8*_0x18623f+_0x2ac7ee*_0x512f3f+_0x37f775*_0x567075+_0xa49e22*_0x2aa095,_0x484351[11]=_0x5702c8*_0x3b20b3+_0x2ac7ee*_0x3ede7a+_0x37f775*_0x59b64c+_0xa49e22*_0x259659,_0x5702c8=_0x272163[12],_0x2ac7ee=_0x272163[13],_0x37f775=_0x272163[14],_0xa49e22=_0x272163[15],_0x484351[12]=_0x5702c8*_0xfbb74+_0x2ac7ee*_0x17442a+_0x37f775*_0x23a6fc+_0xa49e22*_0x9f58bb,_0x484351[13]=_0x5702c8*_0x9d948e+_0x2ac7ee*_0x2ef4e7+_0x37f775*_0x495658+_0xa49e22*_0x1a5621,_0x484351[14]=_0x5702c8*_0x18623f+_0x2ac7ee*_0x512f3f+_0x37f775*_0x567075+_0xa49e22*_0x2aa095,_0x484351[15]=_0x5702c8*_0x3b20b3+_0x2ac7ee*_0x3ede7a+_0x37f775*_0x59b64c+_0xa49e22*_0x259659,_0x484351}function _0x1bd942(_0x30fac4,_0x2af7db,_0x4c5faa,_0x4b9ac4){var _0x3e5685,_0x213c20,_0x263aa1,_0x3a2842,_0x21a58c,_0x35382e,_0xd4a899,_0x571536,_0x25f8c1,_0xac44dc,_0x2bcf83,_0x1cfd6a,_0x2eea30,_0x5a89c4,_0x4e33e3,_0x12a327,_0x2eccd4,_0x30f4fe,_0x2f70eb,_0xbc7b0b,_0x1f3ef9,_0x1f4450,_0x54541c,_0x53f22c,_0x33af80=_0x4b9ac4[0],_0x5aac24=_0x4b9ac4[1],_0x3eb40=_0x4b9ac4[2],_0xac3379=Math["hypot"](_0x33af80,_0x5aac24,_0x3eb40);return _0xac3379<_0x311309?null:(_0x33af80*=_0xac3379=1/_0xac3379,_0x5aac24*=_0xac3379,_0x3eb40*=_0xac3379,_0x3e5685=Math["sin"](_0x4c5faa),_0x263aa1=1-(_0x213c20=Math["cos"](_0x4c5faa)),_0x3a2842=_0x2af7db[0],_0x21a58c=_0x2af7db[1],_0x35382e=_0x2af7db[2],_0xd4a899=_0x2af7db[3],_0x571536=_0x2af7db[4],_0x25f8c1=_0x2af7db[5],_0xac44dc=_0x2af7db[6],_0x2bcf83=_0x2af7db[7],_0x1cfd6a=_0x2af7db[8],_0x2eea30=_0x2af7db[9],_0x5a89c4=_0x2af7db[10],_0x4e33e3=_0x2af7db[11],_0x12a327=_0x33af80*_0x33af80*_0x263aa1+_0x213c20,_0x2eccd4=_0x5aac24*_0x33af80*_0x263aa1+_0x3eb40*_0x3e5685,_0x30f4fe=_0x3eb40*_0x33af80*_0x263aa1-_0x5aac24*_0x3e5685,_0x2f70eb=_0x33af80*_0x5aac24*_0x263aa1-_0x3eb40*_0x3e5685,_0xbc7b0b=_0x5aac24*_0x5aac24*_0x263aa1+_0x213c20,_0x1f3ef9=_0x3eb40*_0x5aac24*_0x263aa1+_0x33af80*_0x3e5685,_0x1f4450=_0x33af80*_0x3eb40*_0x263aa1+_0x5aac24*_0x3e5685,_0x54541c=_0x5aac24*_0x3eb40*_0x263aa1-_0x33af80*_0x3e5685,_0x53f22c=_0x3eb40*_0x3eb40*_0x263aa1+_0x213c20,_0x30fac4[0]=_0x3a2842*_0x12a327+_0x571536*_0x2eccd4+_0x1cfd6a*_0x30f4fe,_0x30fac4[1]=_0x21a58c*_0x12a327+_0x25f8c1*_0x2eccd4+_0x2eea30*_0x30f4fe,_0x30fac4[2]=_0x35382e*_0x12a327+_0xac44dc*_0x2eccd4+_0x5a89c4*_0x30f4fe,_0x30fac4[3]=_0xd4a899*_0x12a327+_0x2bcf83*_0x2eccd4+_0x4e33e3*_0x30f4fe,_0x30fac4[4]=_0x3a2842*_0x2f70eb+_0x571536*_0xbc7b0b+_0x1cfd6a*_0x1f3ef9,_0x30fac4[5]=_0x21a58c*_0x2f70eb+_0x25f8c1*_0xbc7b0b+_0x2eea30*_0x1f3ef9,_0x30fac4[6]=_0x35382e*_0x2f70eb+_0xac44dc*_0xbc7b0b+_0x5a89c4*_0x1f3ef9,_0x30fac4[7]=_0xd4a899*_0x2f70eb+_0x2bcf83*_0xbc7b0b+_0x4e33e3*_0x1f3ef9,_0x30fac4[8]=_0x3a2842*_0x1f4450+_0x571536*_0x54541c+_0x1cfd6a*_0x53f22c,_0x30fac4[9]=_0x21a58c*_0x1f4450+_0x25f8c1*_0x54541c+_0x2eea30*_0x53f22c,_0x30fac4[10]=_0x35382e*_0x1f4450+_0xac44dc*_0x54541c+_0x5a89c4*_0x53f22c,_0x30fac4[11]=_0xd4a899*_0x1f4450+_0x2bcf83*_0x54541c+_0x4e33e3*_0x53f22c,_0x2af7db!==_0x30fac4&&(_0x30fac4[12]=_0x2af7db[12],_0x30fac4[13]=_0x2af7db[13],_0x30fac4[14]=_0x2af7db[14],_0x30fac4[15]=_0x2af7db[15]),_0x30fac4)}var _0x2166f6=function _0x2166f6(_0x5e6496,_0x52a409,_0x543125,_0x1dbc29,_0x5e6cd0){var _0x5558f8=1/Math["tan"](_0x52a409/2);if(_0x5e6496[0]=_0x5558f8/_0x543125,_0x5e6496[1]=0,_0x5e6496[2]=0,_0x5e6496[3]=0,_0x5e6496[4]=0,_0x5e6496[5]=_0x5558f8,_0x5e6496[6]=0,_0x5e6496[7]=0,_0x5e6496[8]=0,_0x5e6496[9]=0,_0x5e6496[11]=-1,_0x5e6496[12]=0,_0x5e6496[13]=0,_0x5e6496[15]=0,null!=_0x5e6cd0&&_0x5e6cd0!==1/0){var _0x1edaa6=1/(_0x1dbc29-_0x5e6cd0);_0x5e6496[10]=(_0x5e6cd0+_0x1dbc29)*_0x1edaa6,_0x5e6496[14]=2*_0x5e6cd0*_0x1dbc29*_0x1edaa6}else _0x5e6496[10]=-1,_0x5e6496[14]=-2*_0x1dbc29;return _0x5e6496},_0x502414=function _0x502414(_0x4300a9,_0x36fd1e,_0x897ca9,_0x3f876d,_0x2279ac,_0x3ef4ab,_0x408689){var _0x1e15cd=1/(_0x36fd1e-_0x897ca9),_0x3bfe8d=1/(_0x3f876d-_0x2279ac),_0x1c0268=1/(_0x3ef4ab-_0x408689);return _0x4300a9[0]=-2*_0x1e15cd,_0x4300a9[1]=0,_0x4300a9[2]=0,_0x4300a9[3]=0,_0x4300a9[4]=0,_0x4300a9[5]=-2*_0x3bfe8d,_0x4300a9[6]=0,_0x4300a9[7]=0,_0x4300a9[8]=0,_0x4300a9[9]=0,_0x4300a9[10]=2*_0x1c0268,_0x4300a9[11]=0,_0x4300a9[12]=(_0x36fd1e+_0x897ca9)*_0x1e15cd,_0x4300a9[13]=(_0x2279ac+_0x3f876d)*_0x3bfe8d,_0x4300a9[14]=(_0x408689+_0x3ef4ab)*_0x1c0268,_0x4300a9[15]=1,_0x4300a9};function _0x2d4cfe(){var _0x2fd697=new _0x823aad(3);return _0x823aad!=Float32Array&&(_0x2fd697[0]=0,_0x2fd697[1]=0,_0x2fd697[2]=0),_0x2fd697}function _0x2872c5(_0x1545f4,_0xd458ab,_0x5f3aea){var _0x14ff6f=new _0x823aad(3);return _0x14ff6f[0]=_0x1545f4,_0x14ff6f[1]=_0xd458ab,_0x14ff6f[2]=_0x5f3aea,_0x14ff6f}_0x2d4cfe(),!function(){var _0x3ee550;_0x3ee550=new _0x823aad(4),_0x823aad!=Float32Array&&(_0x3ee550[0]=0,_0x3ee550[1]=0,_0x3ee550[2]=0,_0x3ee550[3]=0)}();function _0x2ddcf2(){var _0x10c1ca=new _0x823aad(4);return _0x823aad!=Float32Array&&(_0x10c1ca[0]=0,_0x10c1ca[1]=0,_0x10c1ca[2]=0),_0x10c1ca[3]=1,_0x10c1ca}var _0x88c522;_0x2d4cfe(),_0x2872c5(1,0,0),_0x2872c5(0,1,0),_0x2ddcf2(),_0x2ddcf2(),_0x88c522=new _0x823aad(9),_0x823aad!=Float32Array&&(_0x88c522[1]=0,_0x88c522[2]=0,_0x88c522[3]=0,_0x88c522[5]=0,_0x88c522[6]=0,_0x88c522[7]=0),_0x88c522[0]=1,_0x88c522[4]=1,_0x88c522[8]=1,!function(){(function(){var _0x11c966=new _0x823aad(2);return _0x823aad!=Float32Array&&(_0x11c966[0]=0,_0x11c966[1]=0),_0x11c966})()}();var _0x37964e=function(){function _0x141fd4(){_0x540ab2(this,_0x141fd4),this["fFov"]=.785,this["fAspect"]=1,this["fNear"]=.02,this["fFar"]=1e3,this["fTheta"]=0,this["fAlpha"]=0,this["fBeta"]=0,this["fScale"]=1,this["bOrtho"]=!1,this["matView"]=_0x2c117f(),this["matProj"]=_0x2c117f(),this["vecEye"]=_0x2872c5(0,0,0),this["vecCenter"]=_0x2872c5(0,0,100),this["vecUp"]=_0x2872c5(0,1,0)}return _0x132bfb(_0x141fd4,[{key:"SetYaw",value:function value(_0x24212c){this["fTheta"]=_0x24212c}},{key:"GetYaw",value:function value(){return this["fTheta"]}},{key:"SetPitch",value:function value(_0x3b9a9e){this["fAlpha"]=_0x3b9a9e}},{key:"GetPitch",value:function value(){return this["fAlpha"]}},{key:"SetRoll",value:function value(_0x1175c4){this["fBeta"]=_0x1175c4}},{key:"GetRoll",value:function value(){return this["fBeta"]}},{key:"SetScale",value:function value(_0x5c9d1b){this["fScale"]=_0x5c9d1b}},{key:"GetScale",value:function value(){return this["fScale"]}},{key:"SetFov",value:function value(_0x5752fb){this["fFov"]=_0x5752fb}},{key:"SetAspect",value:function value(_0x31f8c6){this["fAspect"]=_0x31f8c6}},{key:"SetNear",value:function value(_0x581a7d){this["fNear"]=_0x581a7d}},{key:"SetFar",value:function value(_0x56378b){this["fFar"]=_0x56378b}},{key:"SetOrtho",value:function value(_0x2e5feb){this["bOrtho"]=_0x2e5feb}},{key:"UpdateCamera",value:function value(_0x396d70,_0x1af1a3){if(!(_0x396d70<=0||_0x1af1a3<=0)){if(1==this["bOrtho"])_0x502414(this["matProj"],0,_0x396d70,_0x1af1a3,0,this["fNear"],this["fFar"]);else{var _0x138f79=this["fFov"]/_0x2ab8a6*180;_0x2166f6(this["matProj"],_0x138f79,_0x396d70/_0x1af1a3,this["fNear"],this["fFar"])}this["vecEye"]=_0x2872c5(0,0,this["fScale"]),this["vecCenter"]=_0x2872c5(0,0,0),this["vecUp"]=_0x2872c5(0,1,0);var _0x54e854=_0x2872c5(1,0,0),_0x5d5fe0=_0x2872c5(0,1,0),_0x53c6a4=_0x2872c5(0,0,1),_0x1dc66f=_0x2c117f();!function(_0x56a320,_0x2d48ea,_0x38d4e1,_0x1c81cf){var _0x5027ba,_0x3ab3df,_0x194bc1,_0x472499,_0xeef86e,_0x1595c4,_0x339bb,_0x474195,_0x392f05,_0xff01ae,_0x2092f5=_0x2d48ea[0],_0x52bc09=_0x2d48ea[1],_0x53519b=_0x2d48ea[2],_0xddf84e=_0x1c81cf[0],_0x497728=_0x1c81cf[1],_0x579a18=_0x1c81cf[2],_0x1bc96e=_0x38d4e1[0],_0x3f171b=_0x38d4e1[1],_0x3a59c0=_0x38d4e1[2];Math["abs"](_0x2092f5-_0x1bc96e)<_0x311309&&Math["abs"](_0x52bc09-_0x3f171b)<_0x311309&&Math["abs"](_0x53519b-_0x3a59c0)<_0x311309?function(_0x25759e){_0x25759e[0]=1,_0x25759e[1]=0,_0x25759e[2]=0,_0x25759e[3]=0,_0x25759e[4]=0,_0x25759e[5]=1,_0x25759e[6]=0,_0x25759e[7]=0,_0x25759e[8]=0,_0x25759e[9]=0,_0x25759e[10]=1,_0x25759e[11]=0,_0x25759e[12]=0,_0x25759e[13]=0,_0x25759e[14]=0,_0x25759e[15]=1}(_0x56a320):(_0x339bb=_0x2092f5-_0x1bc96e,_0x474195=_0x52bc09-_0x3f171b,_0x392f05=_0x53519b-_0x3a59c0,_0x5027ba=_0x497728*(_0x392f05*=_0xff01ae=1/Math["hypot"](_0x339bb,_0x474195,_0x392f05))-_0x579a18*(_0x474195*=_0xff01ae),_0x3ab3df=_0x579a18*(_0x339bb*=_0xff01ae)-_0xddf84e*_0x392f05,_0x194bc1=_0xddf84e*_0x474195-_0x497728*_0x339bb,(_0xff01ae=Math["hypot"](_0x5027ba,_0x3ab3df,_0x194bc1))?(_0x5027ba*=_0xff01ae=1/_0xff01ae,_0x3ab3df*=_0xff01ae,_0x194bc1*=_0xff01ae):(_0x5027ba=0,_0x3ab3df=0,_0x194bc1=0),_0x472499=_0x474195*_0x194bc1-_0x392f05*_0x3ab3df,_0xeef86e=_0x392f05*_0x5027ba-_0x339bb*_0x194bc1,_0x1595c4=_0x339bb*_0x3ab3df-_0x474195*_0x5027ba,(_0xff01ae=Math["hypot"](_0x472499,_0xeef86e,_0x1595c4))?(_0x472499*=_0xff01ae=1/_0xff01ae,_0xeef86e*=_0xff01ae,_0x1595c4*=_0xff01ae):(_0x472499=0,_0xeef86e=0,_0x1595c4=0),_0x56a320[0]=_0x5027ba,_0x56a320[1]=_0x472499,_0x56a320[2]=_0x339bb,_0x56a320[3]=0,_0x56a320[4]=_0x3ab3df,_0x56a320[5]=_0xeef86e,_0x56a320[6]=_0x474195,_0x56a320[7]=0,_0x56a320[8]=_0x194bc1,_0x56a320[9]=_0x1595c4,_0x56a320[10]=_0x392f05,_0x56a320[11]=0,_0x56a320[12]=-(_0x5027ba*_0x2092f5+_0x3ab3df*_0x52bc09+_0x194bc1*_0x53519b),_0x56a320[13]=-(_0x472499*_0x2092f5+_0xeef86e*_0x52bc09+_0x1595c4*_0x53519b),_0x56a320[14]=-(_0x339bb*_0x2092f5+_0x474195*_0x52bc09+_0x392f05*_0x53519b),_0x56a320[15]=1)}(_0x1dc66f,this["vecEye"],this["vecCenter"],this["vecUp"]);var _0x1fafb1=_0x2c117f(),_0x2bd684=_0x2c117f(),_0x5ad841=_0x2c117f(),_0x4aa8b1=_0x2c117f();_0x1bd942(_0x2bd684,_0x1fafb1,-this["fAlpha"],_0x54e854),_0x1bd942(_0x5ad841,_0x2bd684,-this["fTheta"],_0x5d5fe0),_0x1bd942(_0x4aa8b1,_0x5ad841,-this["fBeta"],_0x53c6a4),_0x3249eb(this["matView"],_0x1dc66f,_0x4aa8b1)}}},{key:"GetView",value:function value(){return this["matView"]}},{key:"GetProj",value:function value(){return this["matProj"]}}]),_0x141fd4}(),_0x5e4a58=function(){function _0x1af75a(){_0x540ab2(this,_0x1af75a),this["canvas"]=null,this["ctx"]=null,this["videoShaderProgram"]=0,this["vertexPosBuffer"]=0,this["texturePosBuffer"]=0,this["pFrameData"]=null,this["frameDisplayWidth"]=0,this["frameDisplayHeight"]=0,this["onlySupportedWebGL1"]=!1,this["bAntialias"]=!1,this["bRecreateTex"]=!0,this["nSurfaceTexture"]=[],this["nMaxPointNum"]=0,this["pLinePosVertices"]=null,this["pLineClrVertices"]=null,this["glLinePosBuffer"]=0,this["glLineClrBuffer"]=0,this["nLineTriangleNum"]=0,this["nLineShaderProgram"]=0,this["pFillBlockPosVertices"]=null,this["pFillBlockClrVertices"]=null,this["nMaxFillBlockTriNum"]=0,this["glBlockPosBuffer"]=0,this["glBlockClrBuffer"]=0,this["nBlockShaderProgram"]=0,this["nDrawFontWidth"]=0,this["nDrawFontHeight"]=0,this["nFontColorTexture"]=0,this["pFontColorBuffer"]=0,this["nFontShaderProgram"]=0,this["nFontBGNum"]=0,this["pstFontBGLines"]=[],this["nImageShaderProgram"]=0,this["pImagePosVertices"]=null,this["pImageClrVertices"]=null,this["glImagePosBuffer"]=0,this["glImageClrBuffer"]=0,this["nImageColorTexture"]=null,this["nDrawImageWidth"]=0,this["nDrawImageHeight"]=0,this["nImageColorTextures"]=[],this["pFishParamManager"]=null,this["enDisplayEffect"]=_0x2bffb5["SR_DE_NULL"],this["nFECPort"]=_0x308700,this["bIsCapturing"]=!1,this["pSemiSpherePos"]=null,this["pSemiSphereTex"]=null,this["nSemiSpherePosNum"]=0,this["nSemiSpherePosSize"]=0,this["nSemiSphereTexSize"]=0,this["pCylinderPos"]=null,this["pCylinderTex"]=null,this["nCylinderPosNum"]=0,this["nCylinderPosSize"]=0,this["nCylinderTexSize"]=0,this["fCylinderHeight"]=0,this["fCylinderRadius"]=0,this["pArcSpherePos"]=null,this["pArcSphereTex"]=null,this["nArcSpherePosNum"]=0,this["nArcSpherePosSize"]=0,this["nArcSphereTexSize"]=0,this["fImageWidth"]=1,this["fImageHeight"]=1,this["fTexCenterX"]=.5,this["fTexCenterY"]=.5,this["fTexRadius"]=.5,this["b3DPort"]=!1,this["pCamera"]=null,this["fRotateX"]=0,this["fRotateY"]=0,this["fScale"]=0,this["fRotateLimitX"]=0,this["fRotateLimitY"]=0,this["pfuncCBIn"]=null,this["pfuncCBOut"]=null,this["pUserIn"]=null,this["pUserOut"]=null,this["bCullBack"]=!1,this["fSrcUseLeft"]=0,this["fSrcUseRight"]=1,this["fSrcUseTop"]=0,this["fSrcUseBottom"]=1,this["fDstUseLeft"]=0,this["fDstUseRight"]=1,this["fDstUseTop"]=0,this["fDstUseBottom"]=1,this["enPixelFormat"]=_0x2df14a,this["nTextureNum"]=0,this["textCanvas"]=null,this["textCanvasCtx"]=null,this["nCaptureWidth"]=0,this["nCaptureHeight"]=0,this["nCaptureRTTex"]=0,this["nCaptureFBO"]=0,this["nCaptureFBOWidth"]=0,this["nCaptureFBOHeight"]=0,this["nCaptureDepthbuffer"]=0,this["bCaptureResInit"]=!1,this["fBrightness"]=0,this["fHue"]=0,this["fSaturation"]=0,this["fContrast"]=0,this["fSharpness"]=0,this["nPostProc"]=0}return _0x132bfb(_0x1af75a,[{key:"CompileProgram",value:function value(_0x37f213,_0x581ffb){var _0x2af171=this["ctx"];if(null==_0x2af171||null==_0x37f213||null==_0x581ffb)return-1;var _0x35c65a=_0x2af171["createShader"](_0x2af171["VERTEX_SHADER"]);if(_0x2af171["shaderSource"](_0x35c65a,_0x37f213),_0x2af171["compileShader"](_0x35c65a),!_0x2af171["getShaderParameter"](_0x35c65a,_0x2af171["COMPILE_STATUS"]))return console["log"]("Vertex shader failed to compile: "+_0x2af171["getShaderInfoLog"](_0x35c65a)),-1;var _0x29b5f7=_0x2af171["createShader"](_0x2af171["FRAGMENT_SHADER"]);if(_0x2af171["shaderSource"](_0x29b5f7,_0x581ffb),_0x2af171["compileShader"](_0x29b5f7),!_0x2af171["getShaderParameter"](_0x29b5f7,_0x2af171["COMPILE_STATUS"]))return console["log"]("Fragment shader failed to compile: "+_0x2af171["getShaderInfoLog"](_0x29b5f7)),-1;var _0x59d9c9=_0x2af171["createProgram"]();return _0x2af171["attachShader"](_0x59d9c9,_0x35c65a),_0x2af171["attachShader"](_0x59d9c9,_0x29b5f7),_0x2af171["linkProgram"](_0x59d9c9),_0x2af171["getProgramParameter"](_0x59d9c9,_0x2af171["LINK_STATUS"])?(_0x2af171["deleteShader"](_0x35c65a),_0x2af171["deleteShader"](_0x29b5f7),_0x59d9c9):(console["log"]("Program failed to compile: "+_0x2af171["getProgramInfoLog"](_0x59d9c9)),-1)}},{key:"SR_Init",value:function value(_0xcf8aff,_0x19c64b){if(null==_0xcf8aff)return _0x592c4b;if(this["canvas"]=_0xcf8aff,this["ctx"]=this["canvas"]["getContext"]("webgl2"),this["ctx"]||(this["ctx"]=this["canvas"]["getContext"]("webgl")||this["canvas"]["getContext"]("experimental-webgl"),this["onlySupportedWebGL1"]=!0,console["log"]("only support webgl1")),!this["ctx"])return console["log"]("your browser does not support WebGL"),_0x1482fd;if(_0x19c64b==_0x1e0cc7||_0x19c64b==_0x411f45)return _0x1b8a99;switch(_0x19c64b){case _0x154578:case _0x5a2deb:this["nTextureNum"]=3;break;case _0x1e0cc7:case _0x411f45:this["nTextureNum"]=2;break;case _0x44487e:this["nTextureNum"]=1;break;default:return _0x1b8a99}return this["enPixelFormat"]=_0x19c64b,_0x31e0fd}},{key:"SR_Draw",value:function value(_0x2f3519,_0x27c0be,_0x11c57d,_0x2b8209,_0x564d1f){if(null==this["ctx"])return _0x27ff6b;var _0x207e11=this["nTextureNum"];if(null==_0x2f3519||_0x27c0be<=0||_0x11c57d<=0)return _0x592c4b;if(0==this["videoShaderProgram"]||0==this["vertexPosBuffer"]||0==this["texturePosBuffer"])return _0x27ff6b;var _0xfc8b38=_0x31e0fd;if(_0x44487e==this["enPixelFormat"])this["frameDisplayWidth"]=_0x27c0be,this["frameDisplayHeight"]=_0x11c57d;else{if(_0xfc8b38=this["_ResizeFrameData"](_0x2f3519,_0x27c0be,_0x11c57d,_0x2b8209),_0x31e0fd!=_0xfc8b38)return _0xfc8b38}if(this["ctx"]["useProgram"](this["videoShaderProgram"]),1==this["bRecreateTex"]){if(this["enPixelFormat"]==_0x44487e){if(0!=this["nSurfaceTexture"][0]){var _0x23b19a=this["nSurfaceTexture"][0];this["ctx"]["deleteTexture"](_0x23b19a),this["nSurfaceTexture"][0]=0}var _0x5db74f=this["ctx"]["createTexture"]();if(_0x5db74f<=0)return _0x3e8d23;this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],_0x5db74f),1==this["bAntialias"]?this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MIN_FILTER"],this["ctx"]["LINEAR_MIPMAP_NEAREST"]):this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MIN_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MAG_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_S"],this["ctx"]["CLAMP_TO_EDGE"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_T"],this["ctx"]["CLAMP_TO_EDGE"]),this["nSurfaceTexture"][0]=_0x5db74f}else{if(this["enPixelFormat"]==_0x154578||this["enPixelFormat"]==_0x5a2deb)for(var _0x565765=0;_0x565765<_0x207e11;_0x565765++){if(0!=this["nSurfaceTexture"][_0x565765]){var _0x1c5c51=this["nSurfaceTexture"][_0x565765];this["ctx"]["deleteTexture"](_0x1c5c51),this["nSurfaceTexture"][_0x565765]=0}var _0x56dce7=this["ctx"]["createTexture"]();if(_0x56dce7<=0)return _0x3e8d23;if(this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],_0x56dce7),1==this["bAntialias"]?this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MIN_FILTER"],this["ctx"]["LINEAR_MIPMAP_NEAREST"]):this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MIN_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MAG_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_S"],this["ctx"]["CLAMP_TO_EDGE"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_T"],this["ctx"]["CLAMP_TO_EDGE"]),0==_0x565765){var _0xe2c77a=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"Ytexture");this["ctx"]["uniform1i"](_0xe2c77a,0)}else{if(1==_0x565765){var _0x67fc31=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"Utexture");this["ctx"]["uniform1i"](_0x67fc31,1)}else{if(2==_0x565765){var _0x22f30a=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"Vtexture");this["ctx"]["uniform1i"](_0x22f30a,2)}}}this["nSurfaceTexture"][_0x565765]=_0x56dce7,this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],null)}}this["bRecreateTex"]=!1}this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["vertexPosBuffer"]);var _0x257a02=this["ctx"]["getAttribLocation"](this["videoShaderProgram"],"xy");if(_0x257a02<0)return _0x3e8d23;this["ctx"]["vertexAttribPointer"](_0x257a02,3,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["enableVertexAttribArray"](_0x257a02),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["texturePosBuffer"]);var _0x539ba7=this["ctx"]["getAttribLocation"](this["videoShaderProgram"],"uv");if(_0x539ba7<0)return _0x3e8d23;this["ctx"]["vertexAttribPointer"](_0x539ba7,2,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["enableVertexAttribArray"](_0x539ba7),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null);var _0x417815=this["enDisplayEffect"],_0x59c67a=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"bCapture");if(_0x59c67a<=0)return _0x3e8d23;this["ctx"]["uniform1i"](_0x59c67a,0);var _0x7d296d=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"nPostProc");switch(this["ctx"]["uniform1i"](_0x7d296d,this["nPostProc"]),1==this["nPostProc"]&&(_0xfc8b38=this["_SetImagePostProcess"]()),_0x417815){case _0x2bffb5["SR_DE_NULL"]:break;case _0x2bffb5["SR_DE_FISH_ORIGINAL"]:case _0x2bffb5["SR_DE_FISH_PTZ_CEILING"]:case _0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]:case _0x2bffb5["SR_DE_FISH_PTZ_WALL"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:if(null==this["pFishParamManager"])return _0x27ff6b;var _0x1e50ed={};if(_0xfc8b38=this["pFishParamManager"]["GetRenderParam"](this["nFECPort"],_0x1e50ed),_0x31e0fd!=_0xfc8b38)return _0xfc8b38;if(_0x2bffb5["SR_DE_FISH_ORIGINAL"]==_0x417815){var _0x538917=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"bBlack");if(_0x538917<=0)return _0x3e8d23;this["ctx"]["uniform1i"](_0x538917,_0x1e50ed["bBlack"]);var _0x548aaa=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"bCut");if(_0x548aaa<=0)return _0x3e8d23;this["ctx"]["uniform1i"](_0x548aaa,_0x1e50ed["bCut"])}if(_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]==_0x417815||_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]==_0x417815||_0x2bffb5["SR_DE_FISH_PTZ_WALL"]==_0x417815){var _0x4528f5=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fHAngleCos");if(_0x4528f5<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x4528f5,_0x1e50ed["fCosH"]);var _0x32b26a=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fHAngleSin");if(_0x32b26a<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x32b26a,_0x1e50ed["fSinH"]);var _0xf41883=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fVAngleCos");if(_0xf41883<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0xf41883,_0x1e50ed["fCosV"]);var _0x490540=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fVAngleSin");if(_0x490540<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x490540,_0x1e50ed["fSinV"]);var _0x53e00a=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fZoom");if(_0x53e00a<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x53e00a,_0x1e50ed["fZoom"])}if(_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]==_0x417815||_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]==_0x417815||_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]==_0x417815||_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]==_0x417815){var _0xa23f3a=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fAngle");if(_0xa23f3a<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0xa23f3a,_0x1e50ed["fAngle"])}var _0x4e0016=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fRX1");if(_0x4e0016<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x4e0016,_0x1e50ed["fRXLeft"]);var _0x42f411=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fRX2");if(_0x42f411<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x42f411,_0x1e50ed["fRXRight"]);var _0x206cce=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fRY1");if(_0x206cce<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x206cce,_0x1e50ed["fRYTop"]);var _0x40f315=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fRY2");if(_0x40f315<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x40f315,_0x1e50ed["fRYBottom"]);break;case _0x2bffb5["SR_DE_FISH_SEMISPHERE"]:this["pCamera"]["SetScale"](this["fScale"]),this["pCamera"]["SetPitch"](3.14-this["fRotateX"]),this["pCamera"]["SetYaw"](-this["fRotateY"]),this["pCamera"]["UpdateCamera"](this["canvas"]["width"],this["canvas"]["height"]);var _0x5f4247=this["pCamera"]["GetView"](),_0x5f612d=this["pCamera"]["GetProj"](),_0x173476=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"matView");if(_0x173476<=0)return _0x3e8d23;this["ctx"]["uniformMatrix4fv"](_0x173476,!1,_0x5f4247);var _0x17935e=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"matProj");if(_0x17935e<=0)return _0x3e8d23;this["ctx"]["uniformMatrix4fv"](_0x17935e,!1,_0x5f612d);break;case _0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]:case _0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]:case _0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]:this["pCamera"]["SetScale"](this["fScale"]),this["pCamera"]["SetPitch"](-this["fRotateX"]),this["pCamera"]["SetYaw"](-this["fRotateY"]),this["pCamera"]["UpdateCamera"](this["canvas"]["width"],this["canvas"]["height"]);var _0x455d14=this["pCamera"]["GetView"](),_0x2300fe=this["pCamera"]["GetProj"](),_0x2e9db0=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"matView");if(_0x2e9db0<=0)return _0x3e8d23;this["ctx"]["uniformMatrix4fv"](_0x2e9db0,!1,_0x455d14);var _0x214633=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"matProj");if(_0x214633<=0)return _0x3e8d23;this["ctx"]["uniformMatrix4fv"](_0x214633,!1,_0x2300fe);break;default:return _0x1b8a99}if(this["canvas"]["width"]<=0||this["canvas"]["height"]<=0)return _0x1482fd;if(null!=_0x564d1f&&(_0xfc8b38=this["SR_SetDisplayRect"](_0x564d1f["fx"],_0x564d1f["fy"],_0x564d1f["width"],_0x564d1f["height"],_0x2f2c60))!=_0x31e0fd)return _0xfc8b38;if(null!=_0x564d1f?this["ctx"]["viewport"](this["canvas"]["width"]*this["fDstUseLeft"],this["canvas"]["height"]*this["fDstUseTop"],this["canvas"]["width"]*this["fDstUseRight"],this["canvas"]["height"]*this["fDstUseBottom"]):(this["ctx"]["viewport"](0,0,this["canvas"]["width"],this["canvas"]["height"]),this["ctx"]["clearColor"](0,0,0,1),this["ctx"]["clear"](this["ctx"]["COLOR_BUFFER_BIT"]|this["ctx"]["DEPTH_BUFFER_BIT"])),this["b3DPort"]&&(this["ctx"]["enable"](this["ctx"]["DEPTH_TEST"]),this["ctx"]["depthFunc"](this["ctx"]["LESS"]),this["ctx"]["depthMask"](!0),1==this["bCullBack"]?this["ctx"]["enable"](this["ctx"]["CULL_FACE"]):this["ctx"]["disable"](this["ctx"]["CULL_FACE"])),this["enPixelFormat"]==_0x44487e)this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nSurfaceTexture"][0]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["RGBA"],_0x27c0be,_0x11c57d,0,this["ctx"]["RGBA"],this["ctx"]["UNSIGNED_BYTE"],_0x2f3519),1==this["bAntialias"]&&this["ctx"]["generateMipmap"](this["ctx"]["TEXTURE_2D"]);else{if(this["enPixelFormat"]==_0x154578){var _0x1837f3=this["pFrameData"]["subarray"](0,_0x27c0be*_0x11c57d);this["ctx"]["activeTexture"](this["ctx"]["TEXTURE0"]),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nSurfaceTexture"][0]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["LUMINANCE"],_0x27c0be,_0x11c57d,0,this["ctx"]["LUMINANCE"],this["ctx"]["UNSIGNED_BYTE"],_0x1837f3);var _0x2f92f5=this["pFrameData"]["subarray"](_0x27c0be*_0x11c57d+_0x27c0be/2*_0x11c57d/2,_0x27c0be*_0x11c57d+_0x27c0be/2*_0x11c57d/2+_0x27c0be/2*_0x11c57d/2);this["ctx"]["activeTexture"](this["ctx"]["TEXTURE1"]),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nSurfaceTexture"][1]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["LUMINANCE"],_0x27c0be/2,_0x11c57d/2,0,this["ctx"]["LUMINANCE"],this["ctx"]["UNSIGNED_BYTE"],_0x2f92f5);var _0x48e0e6=this["pFrameData"]["subarray"](_0x27c0be*_0x11c57d,_0x27c0be*_0x11c57d+_0x27c0be/2*_0x11c57d/2);this["ctx"]["activeTexture"](this["ctx"]["TEXTURE2"]),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nSurfaceTexture"][2]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["LUMINANCE"],_0x27c0be/2,_0x11c57d/2,0,this["ctx"]["LUMINANCE"],this["ctx"]["UNSIGNED_BYTE"],_0x48e0e6),1==this["bAntialias"]&&this["ctx"]["generateMipmap"](this["ctx"]["TEXTURE_2D"]),_0x1837f3=null,_0x2f92f5=null,_0x48e0e6=null}else this["enPixelFormat"]==_0x5a2deb&&(_0x1837f3=this["pFrameData"]["subarray"](0,_0x27c0be*_0x11c57d),this["ctx"]["activeTexture"](this["ctx"]["TEXTURE0"]),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nSurfaceTexture"][0]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["LUMINANCE"],_0x27c0be,_0x11c57d,0,this["ctx"]["LUMINANCE"],this["ctx"]["UNSIGNED_BYTE"],_0x1837f3),_0x2f92f5=this["pFrameData"]["subarray"](_0x27c0be*_0x11c57d,_0x27c0be*_0x11c57d+_0x27c0be/2*_0x11c57d/2),this["ctx"]["activeTexture"](this["ctx"]["TEXTURE1"]),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nSurfaceTexture"][1]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["LUMINANCE"],_0x27c0be/2,_0x11c57d/2,0,this["ctx"]["LUMINANCE"],this["ctx"]["UNSIGNED_BYTE"],_0x2f92f5),_0x48e0e6=this["pFrameData"]["subarray"](_0x27c0be*_0x11c57d+_0x27c0be/2*_0x11c57d/2,_0x27c0be*_0x11c57d+_0x27c0be/2*_0x11c57d/2+_0x27c0be/2*_0x11c57d/2),this["ctx"]["activeTexture"](this["ctx"]["TEXTURE2"]),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nSurfaceTexture"][2]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["LUMINANCE"],_0x27c0be/2,_0x11c57d/2,0,this["ctx"]["LUMINANCE"],this["ctx"]["UNSIGNED_BYTE"],_0x48e0e6),1==this["bAntialias"]&&this["ctx"]["generateMipmap"](this["ctx"]["TEXTURE_2D"]),_0x1837f3=null,_0x2f92f5=null,_0x48e0e6=null)}if(this["onlySupportedWebGL1"]||this["ctx"]["clearBufferfi"](this["ctx"]["DEPTH_STENCIL"],0,1,0),0==this["b3DPort"])this["ctx"]["drawArrays"](this["ctx"]["TRIANGLE_FAN"],0,4);else{if(this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_SEMISPHERE"]){if(this["nSemiSpherePosNum"]<=0)return _0x27ff6b;this["ctx"]["drawArrays"](this["ctx"]["TRIANGLES"],0,this["nSemiSpherePosNum"])}else{if(this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]||this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]){if(this["nCylinderPosNum"]<=0)return _0x27ff6b;this["ctx"]["drawArrays"](this["ctx"]["TRIANGLES"],0,this["nCylinderPosNum"])}else{if(this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]||this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]){if(this["nArcSpherePosNum"]<=0)return _0x27ff6b;this["ctx"]["drawArrays"](this["ctx"]["TRIANGLES"],0,this["nArcSpherePosNum"])}}}}if(this["ctx"]["useProgram"](null),null!=this["pFishParamManager"]){var _0x563806=this["pFishParamManager"]["GetWndPort"]();_0x563806!=_0x308700&&_0x563806==this["nFECPort"]&&this["DrawPTZLines"]()}return null!=this["pfuncCBIn"]&&this["pfuncCBIn"](this["pUserIn"]),null!=this["pfuncCBOut"]&&this["pfuncCBOut"](this["pUserOut"]),_0x31e0fd}},{key:"DrawPTZLines",value:function value(){if(null==this["pFishParamManager"])return _0x27ff6b;var _0xecb6e9=this["pFishParamManager"]["GetPTZDisplayMode"]();if(_0xecb6e9==_0x310c66||_0xecb6e9==_0x446724){for(var _0x38aab5=0,_0x1c81b5={fR:0,fG:0,fB:0,fA:0},_0x5b003c=_0x31e0fd,_0x33269f=0;_0x33269f<_0x36131b;++_0x33269f)if(0!=this["pFishParamManager"]["IsPortAllocated"](_0x33269f)&&(_0x38aab5=2,_0x5b003c=this["pFishParamManager"]["GetPTZColor"](_0x33269f,_0x1c81b5),_0x31e0fd==_0x5b003c)){1==this["pFishParamManager"]["IsPTZSelected"](_0x33269f)&&(_0x38aab5+=1);var _0x2bd5e8=this["pFishParamManager"]["GetWndPort"]();if(_0x33269f!=_0x2bd5e8&&_0x310c66==_0xecb6e9){if(_0x2bffb5["SR_DE_FISH_ORIGINAL"]==this["pFishParamManager"]["GetDisplayEffect"](_0x2bd5e8)){var _0x7cff5={};if(_0x5b003c=this["pFishParamManager"]["GetPTZPoints"](_0x33269f,_0x7cff5,_0x310c66),_0x31e0fd!=_0x5b003c)continue;if(null!=_0x7cff5["pstPoints"]&&0!=_0x7cff5["nPointNum"]&&(_0x5b003c=this["SR_DrawLines"](_0x7cff5["pstPoints"],_0x7cff5["nPointNum"],!0,_0x1c81b5,_0x38aab5,!1),_0x31e0fd!=_0x5b003c))continue}else{var _0x125bec;if((_0x125bec=this["pFishParamManager"]["GetPTZFragmentNum"](_0x33269f))<=0)continue;for(var _0x2f02ca=0;_0x2f02ca<_0x125bec;_0x2f02ca++){var _0x4b69c1={};this["pFishParamManager"]["GetPTZFragmentPoints"](_0x33269f,_0x4b69c1,_0x2f02ca),null!=_0x4b69c1["pstPoints"]&&0!=_0x4b69c1["nPointNum"]&&this["SR_DrawLines"](_0x4b69c1["pstPoints"],_0x4b69c1["nPointNum"],!1,_0x1c81b5,_0x38aab5,!1)}}}else{if(_0x33269f!=_0x2bd5e8&&_0x446724==_0xecb6e9){var _0x478e40={};if(_0x5b003c=this["pFishParamManager"]["GetPTZPoints"](_0x33269f,_0x478e40,_0x446724),_0x31e0fd!=_0x5b003c)continue;if(null!=_0x478e40["pstPoints"]&&0!=_0x478e40["nPointNum"]&&(_0x5b003c=this["SR_DrawLines"](_0x478e40["pstPoints"],_0x478e40["nPointNum"],!0,_0x1c81b5,_0x38aab5,!1),_0x31e0fd!=_0x5b003c))continue}}}}return _0x31e0fd}},{key:"DrawFillBlock",value:function value(_0x152d27,_0x35bf36,_0x53dce3){if(null==this["ctx"])return _0x27ff6b;if(null==_0x152d27||_0x35bf36<1||_0x53dce3<2)return _0x592c4b;for(var _0x35ba60=0,_0xada450=0;_0xada450<_0x35bf36;++_0xada450){if(null==_0x152d27[_0xada450]["pstPoints"]||_0x152d27[_0xada450]["nPointNum"]<3||!0!==_0x152d27[_0xada450]["bLoop"]||null==_0x152d27[_0xada450]["pstColor"])return _0x592c4b;_0x35ba60+=_0x152d27[_0xada450]["nPointNum"]}if(_0x35ba60!==_0x53dce3)return _0x592c4b;var _0xefd260=_0x53dce3-2*_0x35bf36;if(_0xefd260>this["nMaxFillBlockTriNum"]&&(this["pFillBlockPosVertices"]=null,this["pFillBlockClrVertices"]=null,this["nMaxFillBlockTriNum"]=_0xefd260),0==this["glBlockPosBuffer"]&&(this["glBlockPosBuffer"]=this["ctx"]["createBuffer"](),0==this["glBlockPosBuffer"]))return _0x3e8d23;if(0==this["glBlockClrBuffer"]&&(this["glBlockClrBuffer"]=this["ctx"]["createBuffer"](),0==this["glBlockClrBuffer"]))return _0x3e8d23;if(null==this["pFillBlockPosVertices"]){var _0x175f1b=this["nMaxFillBlockTriNum"];if(this["pFillBlockPosVertices"]=new Float32Array(3*_0x175f1b*3),null==this["pFillBlockPosVertices"])return _0x55d077}if(this["pFillBlockPosVertices"]["fill"](0),null==this["pFillBlockClrVertices"]){var _0x5e67e9=this["nMaxFillBlockTriNum"];if(this["pFillBlockClrVertices"]=new Float32Array(4*_0x5e67e9*3),null==this["pFillBlockClrVertices"])return _0x55d077}this["pFillBlockClrVertices"]["fill"](0);for(var _0x4cfbfe=0,_0x5a8828=0,_0x456722=0,_0x4db9cb=null,_0x4bc75d=null,_0x465bb1={},_0x5a1c24={},_0x42359a={},_0x170876=0;_0x170876<_0x35bf36;++_0x170876){_0x456722=_0x152d27[_0x170876]["nPointNum"],_0x4db9cb=_0x152d27[_0x170876]["pstPoints"],_0x4bc75d=_0x152d27[_0x170876]["pstColor"],_0x465bb1["fX"]=(_0x4db9cb[0]["fX"]-this["fSrcUseLeft"])/(this["fSrcUseRight"]-this["fSrcUseLeft"]),_0x465bb1["fX"]=this["fDstUseLeft"]+_0x465bb1["fX"]*(this["fDstUseRight"]-this["fDstUseLeft"]),_0x465bb1["fX"]=2*_0x465bb1["fX"]-1,_0x465bb1["fY"]=(_0x4db9cb[0]["fY"]-this["fSrcUseTop"])/(this["fSrcUseBottom"]-this["fSrcUseTop"]),_0x465bb1["fY"]=this["fDstUseTop"]+_0x465bb1["fY"]*(this["fDstUseBottom"]-this["fDstUseTop"]),_0x465bb1["fY"]=1-2*_0x465bb1["fY"];for(var _0x3e53c8=1;_0x3e53c8<_0x456722-1;_0x3e53c8++)_0x5a1c24["fX"]=(_0x4db9cb[_0x3e53c8]["fX"]-this["fSrcUseLeft"])/(this["fSrcUseRight"]-this["fSrcUseLeft"]),_0x5a1c24["fX"]=this["fDstUseLeft"]+_0x5a1c24["fX"]*(this["fDstUseRight"]-this["fDstUseLeft"]),_0x5a1c24["fX"]=2*_0x5a1c24["fX"]-1,_0x5a1c24["fY"]=(_0x4db9cb[_0x3e53c8]["fY"]-this["fSrcUseTop"])/(this["fSrcUseBottom"]-this["fSrcUseTop"]),_0x5a1c24["fY"]=this["fDstUseTop"]+_0x5a1c24["fY"]*(this["fDstUseBottom"]-this["fDstUseTop"]),_0x5a1c24["fY"]=1-2*_0x5a1c24["fY"],_0x42359a["fX"]=(_0x4db9cb[_0x3e53c8+1]["fX"]-this["fSrcUseLeft"])/(this["fSrcUseRight"]-this["fSrcUseLeft"]),_0x42359a["fX"]=this["fDstUseLeft"]+_0x42359a["fX"]*(this["fDstUseRight"]-this["fDstUseLeft"]),_0x42359a["fX"]=2*_0x42359a["fX"]-1,_0x42359a["fY"]=(_0x4db9cb[_0x3e53c8+1]["fY"]-this["fSrcUseTop"])/(this["fSrcUseBottom"]-this["fSrcUseTop"]),_0x42359a["fY"]=this["fDstUseTop"]+_0x42359a["fY"]*(this["fDstUseBottom"]-this["fDstUseTop"]),_0x42359a["fY"]=1-2*_0x42359a["fY"],this["pFillBlockPosVertices"][_0x4cfbfe++]=_0x465bb1["fX"],this["pFillBlockPosVertices"][_0x4cfbfe++]=_0x465bb1["fY"],this["pFillBlockPosVertices"][_0x4cfbfe++]=0,this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fR"],this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fG"],this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fB"],this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fA"],this["pFillBlockPosVertices"][_0x4cfbfe++]=_0x5a1c24["fX"],this["pFillBlockPosVertices"][_0x4cfbfe++]=_0x5a1c24["fY"],this["pFillBlockPosVertices"][_0x4cfbfe++]=0,this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fR"],this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fG"],this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fB"],this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fA"],this["pFillBlockPosVertices"][_0x4cfbfe++]=_0x42359a["fX"],this["pFillBlockPosVertices"][_0x4cfbfe++]=_0x42359a["fY"],this["pFillBlockPosVertices"][_0x4cfbfe++]=0,this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fR"],this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fG"],this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fB"],this["pFillBlockClrVertices"][_0x5a8828++]=_0x4bc75d["fA"]}if(0==this["nBlockShaderProgram"]&&(this["nBlockShaderProgram"]=this["CompileProgram"](_0x5b6f7b,_0x5d9577),this["nBlockShaderProgram"]<=0))return _0x3e8d23;this["ctx"]["enable"](this["ctx"]["BLEND"]),this["ctx"]["blendFunc"](this["ctx"]["SRC_ALPHA"],this["ctx"]["ONE_MINUS_SRC_ALPHA"]),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["glBlockPosBuffer"]),this["ctx"]["bufferData"](this["ctx"]["ARRAY_BUFFER"],this["pFillBlockPosVertices"],this["ctx"]["STATIC_DRAW"]),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["glBlockClrBuffer"]),this["ctx"]["bufferData"](this["ctx"]["ARRAY_BUFFER"],this["pFillBlockClrVertices"],this["ctx"]["STATIC_DRAW"]),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null),this["ctx"]["useProgram"](this["nBlockShaderProgram"]);var _0x56208c=this["ctx"]["getUniformLocation"](this["nLineShaderProgram"],"bCapture");if(_0x56208c<=0)return _0x3e8d23;1==this["bIsCapturing"]?this["ctx"]["uniform1i"](_0x56208c,1):this["ctx"]["uniform1i"](_0x56208c,0),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["glBlockPosBuffer"]);var _0x3e71c1=this["ctx"]["getAttribLocation"](this["nBlockShaderProgram"],"position");this["ctx"]["enableVertexAttribArray"](_0x3e71c1),this["ctx"]["vertexAttribPointer"](_0x3e71c1,3,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["glBlockClrBuffer"]);var _0x13b092=this["ctx"]["getAttribLocation"](this["nBlockShaderProgram"],"color");return this["ctx"]["enableVertexAttribArray"](_0x13b092),this["ctx"]["vertexAttribPointer"](_0x13b092,4,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null),this["ctx"]["drawArrays"](this["ctx"]["TRIANGLES"],0,3*_0xefd260),this["ctx"]["useProgram"](null),this["ctx"]["disable"](this["ctx"]["BLEND"]),_0x31e0fd}},{key:"ComputeLinePoint",value:function value(_0x375558,_0x2f491b){if(null==_0x375558||_0x2f491b<1)return _0x592c4b;if(null==this["pLinePosVertices"]||null==this["pLineClrVertices"])return _0x27ff6b;var _0x4ac31c=0,_0x5dca28=0;1==this["bIsCapturing"]?(_0x4ac31c=(this["fDstUseRight"]-this["fDstUseLeft"])*this["nCaptureWidth"],_0x5dca28=(this["fDstUseBottom"]-this["fDstUseTop"])*this["nCaptureHeight"]):(_0x4ac31c=(this["fDstUseRight"]-this["fDstUseLeft"])*this["canvas"]["width"],_0x5dca28=(this["fDstUseBottom"]-this["fDstUseTop"])*this["canvas"]["height"]);for(var _0x36c148=0,_0x4e9cc0=0,_0xc6e060=0,_0x49134d=0,_0x383ad6=0,_0x4a9e4b=0,_0x426a05=0,_0x1a3f27=0,_0x36480f=0,_0x3180fb=0,_0x395275=0,_0x52592f=0;_0x52592f<_0x2f491b;++_0x52592f){var _0x187814=[];if(!((_0x395275=_0x375558[_0x52592f]["nPointNum"])<=0)){for(var _0x179d72=0;_0x179d72<_0x395275;++_0x179d72){var _0x26c395={};_0x26c395["fX"]=(_0x375558[_0x52592f]["pstPoints"][_0x179d72]["fX"]-this["fSrcUseLeft"])/(this["fSrcUseRight"]-this["fSrcUseLeft"]),_0x26c395["fX"]=this["fDstUseLeft"]+_0x26c395["fX"]*(this["fDstUseRight"]-this["fDstUseLeft"]),_0x26c395["fX"]=2*_0x26c395["fX"]-1,_0x26c395["fY"]=(_0x375558[_0x52592f]["pstPoints"][_0x179d72]["fY"]-this["fSrcUseTop"])/(this["fSrcUseBottom"]-this["fSrcUseTop"]),_0x26c395["fY"]=this["fDstUseTop"]+_0x26c395["fY"]*(this["fDstUseBottom"]-this["fDstUseTop"]),_0x26c395["fY"]=1-2*_0x26c395["fY"],_0x187814["push"](_0x26c395)}if(this["canvas"]["width"]<=0||this["canvas"]["height"]<=0)return _0x1482fd;if(_0x4a9e4b=3.5*_0x375558[_0x52592f]["nLineWidth"]/_0x4ac31c,_0x426a05=3.5*_0x375558[_0x52592f]["nLineWidth"]/_0x5dca28,_0x4a9e4b<=0||_0x426a05<=0)return _0x592c4b;var _0x2264a9=_0x375558[_0x52592f]["pstColor"];if(null==_0x2264a9||null==_0x2264a9)return _0x592c4b;for(var _0x4c1600=0;_0x4c1600<_0x395275-1;++_0x4c1600)_0x4e9cc0=_0x187814[_0x4c1600+1]["fX"]-_0x187814[_0x4c1600]["fX"],_0xc6e060=_0x187814[_0x4c1600+1]["fY"]-_0x187814[_0x4c1600]["fY"],_0x36c148=Math["sqrt"](_0x4e9cc0*_0x4e9cc0+_0xc6e060*_0xc6e060),Math["abs"](_0x36c148-0)<1e-6||(_0x49134d=-_0x4a9e4b*_0xc6e060/_0x36c148/2,_0x383ad6=_0x426a05*_0x4e9cc0/_0x36c148/2,this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600]["fX"]+_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600]["fY"]+_0x383ad6,this["pLinePosVertices"][_0x36480f++]=-1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600+1]["fX"]-_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600+1]["fY"]-_0x383ad6,this["pLinePosVertices"][_0x36480f++]=1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600]["fX"]-_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600]["fY"]-_0x383ad6,this["pLinePosVertices"][_0x36480f++]=1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600]["fX"]+_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600]["fY"]+_0x383ad6,this["pLinePosVertices"][_0x36480f++]=-1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600+1]["fX"]+_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600+1]["fY"]+_0x383ad6,this["pLinePosVertices"][_0x36480f++]=-1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600+1]["fX"]-_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x4c1600+1]["fY"]-_0x383ad6,this["pLinePosVertices"][_0x36480f++]=1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],_0x1a3f27+=2);1==_0x375558[_0x52592f]["bLoop"]&&2<_0x395275&&(_0x4e9cc0=_0x187814[_0x395275-1]["fX"]-_0x187814[0]["fX"],_0xc6e060=_0x187814[_0x395275-1]["fY"]-_0x187814[0]["fY"],_0x36c148=Math["sqrt"](_0x4e9cc0*_0x4e9cc0+_0xc6e060*_0xc6e060),Math["abs"](_0x36c148-0)>1e-6&&(_0x49134d=-_0x4a9e4b*_0xc6e060/_0x36c148/2,_0x383ad6=_0x426a05*_0x4e9cc0/_0x36c148/2,this["pLinePosVertices"][_0x36480f++]=_0x187814[0]["fX"]+_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[0]["fY"]+_0x383ad6,this["pLinePosVertices"][_0x36480f++]=-1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x395275-1]["fX"]-_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x395275-1]["fY"]-_0x383ad6,this["pLinePosVertices"][_0x36480f++]=1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],this["pLinePosVertices"][_0x36480f++]=_0x187814[0]["fX"]-_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[0]["fY"]-_0x383ad6,this["pLinePosVertices"][_0x36480f++]=1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],this["pLinePosVertices"][_0x36480f++]=_0x187814[0]["fX"]+_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[0]["fY"]+_0x383ad6,this["pLinePosVertices"][_0x36480f++]=-1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x395275-1]["fX"]+_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x395275-1]["fY"]+_0x383ad6,this["pLinePosVertices"][_0x36480f++]=-1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x395275-1]["fX"]-_0x49134d,this["pLinePosVertices"][_0x36480f++]=_0x187814[_0x395275-1]["fY"]-_0x383ad6,this["pLinePosVertices"][_0x36480f++]=1,this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fR"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fG"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fB"],this["pLineClrVertices"][_0x3180fb++]=_0x2264a9["fA"],_0x1a3f27+=2))}}return 0==_0x1a3f27?_0x592c4b:(this["nLineTriangleNum"]=_0x1a3f27,_0x31e0fd)}},{key:"SR_DrawLines",value:function value(_0x38a85c,_0x2ffc01,_0x19e714,_0x197088,_0x179c31,_0x43de46){var _0x160a03=[],_0x130f2c={};return _0x130f2c["pstPoints"]=_0x38a85c,_0x130f2c["nPointNum"]=_0x2ffc01,_0x130f2c["bLoop"]=_0x19e714,_0x130f2c["pstColor"]=_0x197088,_0x130f2c["nLineWidth"]=_0x179c31,_0x160a03["push"](_0x130f2c),this["SR_DrawLinesEx"](_0x160a03,1,_0x2ffc01,_0x43de46)}},{key:"SR_DrawLinesEx",value:function value(_0x4e75d4,_0x5d495f,_0x32139f,_0x5550c3){if(null==this["ctx"])return _0x27ff6b;if(null==_0x4e75d4||_0x5d495f<1||_0x32139f<2)return _0x592c4b;if(0==this["nLineShaderProgram"]){var _0x2a4c99=this["CompileProgram"](_0x5b6f7b,_0x5d9577);if(_0x2a4c99<=0)return _0x3e8d23;this["nLineShaderProgram"]=_0x2a4c99}if(1==_0x5550c3)return this["DrawFillBlock"](_0x4e75d4,_0x5d495f,_0x32139f);for(var _0x51acf5=0,_0x4a9278=0;_0x4a9278<_0x5d495f;++_0x4a9278){if(null==_0x4e75d4[_0x4a9278]["pstPoints"]||_0x4e75d4[_0x4a9278]["nPointNum"]<=1||_0x4e75d4[_0x4a9278]["nPointNum"]>=1024||_0x4e75d4[_0x4a9278]["nLineWidth"]<=0||null==_0x4e75d4[_0x4a9278]["pstColor"])return _0x592c4b;_0x51acf5+=_0x4e75d4[_0x4a9278]["nPointNum"]}if(_0x51acf5!=_0x32139f)return _0x592c4b;if((_0x51acf5+=_0x5d495f)>this["nMaxPointNum"]&&(this["nMaxPointNum"]=_0x51acf5,this["pLinePosVertices"]=null,this["pLineClrVertices"]=null),null==this["pLinePosVertices"]&&(this["pLinePosVertices"]=new Float32Array(6*this["nMaxPointNum"]*3),null==this["pLinePosVertices"]))return _0x55d077;if(this["pLinePosVertices"]["fill"](0),null==this["pLineClrVertices"]&&(this["pLineClrVertices"]=new Float32Array(6*this["nMaxPointNum"]*4),null==this["pLineClrVertices"]))return _0x55d077;if(this["pLineClrVertices"]["fill"](0),0==this["glLinePosBuffer"]&&(this["glLinePosBuffer"]=this["ctx"]["createBuffer"](),0==this["glLinePosBuffer"]))return _0x3e8d23;if(0==this["glLineClrBuffer"]&&(this["glLineClrBuffer"]=this["ctx"]["createBuffer"](),0==this["glLineClrBuffer"]))return _0x3e8d23;var _0x2fd70a=this["ComputeLinePoint"](_0x4e75d4,_0x5d495f);if(_0x31e0fd!=_0x2fd70a)return _0x2fd70a;this["ctx"]["enable"](this["ctx"]["BLEND"]),this["ctx"]["blendFunc"](this["ctx"]["SRC_ALPHA"],this["ctx"]["ONE_MINUS_SRC_ALPHA"]);var _0x34f5aa=this["nLineShaderProgram"];this["ctx"]["useProgram"](_0x34f5aa);var _0x180a8b=this["ctx"]["getUniformLocation"](this["nLineShaderProgram"],"bCapture");if(_0x180a8b<=0)return _0x3e8d23;1==this["bIsCapturing"]?this["ctx"]["uniform1i"](_0x180a8b,1):this["ctx"]["uniform1i"](_0x180a8b,0);var _0x487391=this["glLinePosBuffer"],_0x234a3c=this["glLineClrBuffer"],_0x219598=this["nLineTriangleNum"],_0x1463b2=this["pLinePosVertices"],_0x1f3ead=this["pLineClrVertices"];this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],_0x487391),this["ctx"]["bufferData"](this["ctx"]["ARRAY_BUFFER"],_0x1463b2,this["ctx"]["STATIC_DRAW"]);var _0x1b841d=this["ctx"]["getAttribLocation"](_0x34f5aa,"position");this["ctx"]["enableVertexAttribArray"](_0x1b841d),this["ctx"]["vertexAttribPointer"](_0x1b841d,3,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],_0x234a3c),this["ctx"]["bufferData"](this["ctx"]["ARRAY_BUFFER"],_0x1f3ead,this["ctx"]["STATIC_DRAW"]);var _0x59772c=this["ctx"]["getAttribLocation"](_0x34f5aa,"color");return this["ctx"]["enableVertexAttribArray"](_0x59772c),this["ctx"]["vertexAttribPointer"](_0x59772c,4,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null),1==this["bIsCapturing"]?this["ctx"]["viewport"](0,0,this["nCaptureWidth"],this["nCaptureHeight"]):this["ctx"]["viewport"](0,0,this["canvas"]["width"],this["canvas"]["height"]),this["ctx"]["drawArrays"](this["ctx"]["TRIANGLES"],0,3*_0x219598),this["ctx"]["useProgram"](null),this["ctx"]["disable"](this["ctx"]["BLEND"]),_0x31e0fd}},{key:"SR_DrawFont",value:function value(_0x1eb22d,_0x28a8c4,_0x271601,_0x43db52,_0x569267,_0x113a8e,_0x3e668f,_0x4f9d8b,_0x3fe9de,_0x1dde88,_0x3716bd){if(null==_0x1eb22d||null==_0x28a8c4||null==_0x271601||_0x43db52<=1||_0x569267<=1)return _0x592c4b;if(1==_0x113a8e&&null==_0x3e668f)return _0x592c4b;var _0x156375=[],_0x4e91b2={};return _0x4e91b2["bBackground"]=_0x113a8e,_0x4e91b2["nFontWidth"]=_0x43db52,_0x4e91b2["nFontHeight"]=_0x569267,_0x4e91b2["pstBGColor"]=_0x3e668f,_0x4e91b2["pstFontColor"]=_0x271601,_0x4e91b2["pString"]=_0x1eb22d,_0x4e91b2["pstStartPos"]=_0x28a8c4,_0x4e91b2["fRotateAngle"]=_0x4f9d8b,_0x4e91b2["pFontFamily"]=_0x3fe9de,_0x4e91b2["textAlign"]=_0x1dde88,_0x4e91b2["textBaseline"]=_0x3716bd,_0x156375["push"](_0x4e91b2),this["SR_DrawFontEx"](_0x156375,1)}},{key:"SR_DrawFontEx",value:function value(_0x139c14,_0x166240){if(null==this["ctx"])return _0x27ff6b;if(0>_0x166240||null==_0x139c14)return _0x592c4b;var _0x4266ed,_0x7df662,_0x324183=0,_0x5291c5=0;if(1==this["bIsCapturing"]){if(0==this["nCaptureWidth"]||0==this["nCaptureHeight"])return _0x27ff6b;_0x324183=Math["round"]((this["fDstUseRight"]-this["fDstUseLeft"])*this["nCaptureWidth"]),_0x5291c5=Math["round"]((this["fDstUseBottom"]-this["fDstUseTop"])*this["nCaptureHeight"])}else _0x324183=Math["round"]((this["fDstUseRight"]-this["fDstUseLeft"])*this["canvas"]["width"]),_0x5291c5=Math["round"]((this["fDstUseBottom"]-this["fDstUseTop"])*this["canvas"]["height"]);if(_0x324183=_0x324183+4-_0x324183%4,_0x5291c5=_0x5291c5+4-_0x5291c5%4,this["nDrawFontWidth"]==_0x324183&&this["nDrawFontHeight"]==_0x5291c5||(this["pFontColorBuffer"]=null,this["nFontColorTexture"]=0,this["nDrawFontWidth"]=_0x324183,this["nDrawFontHeight"]=_0x5291c5,null!=this["textCanvas"]&&(this["textCanvas"]["remove"](),this["textCanvas"]=null,this["textCanvasCtx"]=null)),0==this["nFontColorTexture"]){if(this["nFontColorTexture"]=this["ctx"]["createTexture"](),0==this["nFontColorTexture"])return _0x3e8d23;this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nFontColorTexture"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MAG_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MIN_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_S"],this["ctx"]["CLAMP_TO_EDGE"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_T"],this["ctx"]["CLAMP_TO_EDGE"])}if(null==this["textCanvas"]){if(this["textCanvas"]=document["createElement"]("canvas"),null==this["textCanvas"])return _0x33b5e3;if(this["textCanvasCtx"]=this["textCanvas"]["getContext"]("2d"),null==this["textCanvasCtx"])return _0x33b5e3;this["textCanvasCtx"]["canvas"]["width"]=this["nDrawFontWidth"],this["textCanvasCtx"]["canvas"]["height"]=this["nDrawFontHeight"]}this["textCanvasCtx"]["clearRect"](0,0,this["nDrawFontWidth"],this["nDrawFontHeight"]);for(var _0x172c1=0;_0x172c1<_0x166240;++_0x172c1){var _0x1b773a=_0x139c14[_0x172c1]["nFontWidth"],_0x2b994e=_0x139c14[_0x172c1]["nFontHeight"];1==this["bIsCapturing"]&&(_0x1b773a=Math["round"](.7*this["nCaptureWidth"]/this["canvas"]["width"]*_0x1b773a),_0x2b994e=Math["round"](.7*this["nCaptureHeight"]/this["canvas"]["height"]*_0x2b994e));var _0xc2bf9c=_0x1b773a<_0x2b994e?_0x1b773a:_0x2b994e;this["textCanvasCtx"]["font"]=_0xc2bf9c["toString"]()+"px "+_0x139c14[_0x172c1]["pFontFamily"],null==_0x139c14[_0x172c1]["textAlign"]||null==_0x139c14[_0x172c1]["textAlign"]?this["textCanvasCtx"]["textAlign"]="left":this["textCanvasCtx"]["textAlign"]=_0x139c14[_0x172c1]["textAlign"],null==_0x139c14[_0x172c1]["textBaseline"]||null==_0x139c14[_0x172c1]["textBaseline"]?this["textCanvasCtx"]["textBaseline"]="top":this["textCanvasCtx"]["textBaseline"]=_0x139c14[_0x172c1]["textBaseline"];var _0x5594f4=parseInt(255*_0x139c14[_0x172c1]["pstFontColor"]["fR"]),_0x38839d=parseInt(255*_0x139c14[_0x172c1]["pstFontColor"]["fG"]),_0x409b70=parseInt(255*_0x139c14[_0x172c1]["pstFontColor"]["fB"]),_0x4496e7=_0x5594f4<16?"0"+_0x5594f4["toString"](16):_0x5594f4["toString"](16),_0x3ac4db=_0x38839d<16?"0"+_0x38839d["toString"](16):_0x38839d["toString"](16),_0x458df7=_0x409b70<16?"0"+_0x409b70["toString"](16):_0x409b70["toString"](16);this["textCanvasCtx"]["fillStyle"]="#"+_0x4496e7+_0x3ac4db+_0x458df7,this["textCanvasCtx"]["globalAlpha"]=_0x139c14[_0x172c1]["pstFontColor"]["fA"];var _0x28b628=_0x139c14[_0x172c1]["pstStartPos"]["fX"]*this["nDrawFontWidth"],_0xb62d61=_0x139c14[_0x172c1]["pstStartPos"]["fY"]*this["nDrawFontHeight"];this["textCanvasCtx"]["save"](),this["textCanvasCtx"]["translate"](_0x28b628,_0xb62d61),this["textCanvasCtx"]["rotate"](_0x139c14[_0x172c1]["fRotateAngle"]*Math["PI"]/180),this["textCanvasCtx"]["fillText"](_0x139c14[_0x172c1]["pString"],0,0),this["textCanvasCtx"]["restore"]()}if(this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nFontColorTexture"]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["RGBA"],this["ctx"]["RGBA"],this["ctx"]["UNSIGNED_BYTE"],this["textCanvasCtx"]["canvas"]),0==this["nFontShaderProgram"]&&(this["nFontShaderProgram"]=this["CompileProgram"]("\n    attribute vec4  position;\n    attribute vec4  texCoord;\n    varying vec4  pp; \n    uniform int bCapture;\n\n    void main()\n    { \n        gl_Position.x  = position.x;\n        gl_Position.y  = position.y;\n        if(bCapture == 1)\n        {\n            gl_Position.y = -position.y;\n        }\n        gl_Position.z  = 0.1;\n        gl_Position.w  = 1.0;\n        pp = texCoord; \n    }\n","\n    varying lowp vec4 pp;\n    uniform sampler2D texture;\n\n    void main(void)\n    {\n        gl_FragColor = texture2D(texture, pp.st);\n    }\n"),this["nFontShaderProgram"]<=0))return _0x3e8d23;1==this["bIsCapturing"]?(_0x4266ed=this["nCaptureWidth"]+4-this["nCaptureWidth"]%4,_0x7df662=this["nCaptureHeight"]+4-this["nCaptureHeight"]%4):(_0x4266ed=this["canvas"]["width"]+4-this["canvas"]["width"]%4,_0x7df662=this["canvas"]["height"]+4-this["canvas"]["height"]%4),this["ctx"]["viewport"](0,0,_0x4266ed,_0x7df662),this["ctx"]["enable"](this["ctx"]["BLEND"]),this["ctx"]["blendFunc"](this["ctx"]["SRC_ALPHA"],this["ctx"]["ONE_MINUS_SRC_ALPHA"]),this["ctx"]["useProgram"](this["nFontShaderProgram"]);var _0x4db6d9=this["ctx"]["getUniformLocation"](this["nFontShaderProgram"],"bCapture");if(_0x4db6d9<=0)return _0x3e8d23;1==this["bIsCapturing"]?this["ctx"]["uniform1i"](_0x4db6d9,1):this["ctx"]["uniform1i"](_0x4db6d9,0),this["ctx"]["activeTexture"](this["ctx"]["TEXTURE0"]),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nFontColorTexture"]);var _0x318b5a=this["ctx"]["getUniformLocation"](this["nFontShaderProgram"],"texture");this["ctx"]["uniform1i"](_0x318b5a,0),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["vertexPosBuffer"]);var _0x29d167=this["ctx"]["getAttribLocation"](this["nFontShaderProgram"],"position");this["ctx"]["enableVertexAttribArray"](_0x29d167),this["ctx"]["vertexAttribPointer"](_0x29d167,3,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["texturePosBuffer"]);var _0x410389=this["ctx"]["getAttribLocation"](this["nFontShaderProgram"],"texCoord");return this["ctx"]["enableVertexAttribArray"](_0x410389),this["ctx"]["vertexAttribPointer"](_0x410389,2,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null),this["ctx"]["drawArrays"](this["ctx"]["TRIANGLE_FAN"],0,4),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],null),this["ctx"]["useProgram"](null),this["ctx"]["disable"](this["ctx"]["BLEND"]),_0x31e0fd}},{key:"SR_DrawImage",value:function value(_0x69875b,_0x3df97f,_0x2ade41,_0x19e050,_0x171328,_0x4f18b8){if(null==this["ctx"])return _0x27ff6b;if(null==_0x69875b||_0x3df97f<=0||_0x2ade41<=0||null==_0x19e050||_0x4f18b8<0||_0x4f18b8>1)return _0x592c4b;if(this["nDrawImageWidth"]=_0x3df97f,this["nDrawImageHeight"]=_0x2ade41,0==this["glImagePosBuffer"]&&(this["glImagePosBuffer"]=this["ctx"]["createBuffer"](),0==this["glImagePosBuffer"]))return _0x3e8d23;if(0==this["glImageClrBuffer"]&&(this["glImageClrBuffer"]=this["ctx"]["createBuffer"](),0==this["glImageClrBuffer"]))return _0x3e8d23;if(null==this["pImageClrVertices"]){if(this["pImageClrVertices"]=new Float32Array(12),null==this["pImageClrVertices"])return _0x55d077;this["pImageClrVertices"][0]=0,this["pImageClrVertices"][1]=0,this["pImageClrVertices"][2]=0,this["pImageClrVertices"][3]=1,this["pImageClrVertices"][4]=1,this["pImageClrVertices"][5]=0,this["pImageClrVertices"][6]=1,this["pImageClrVertices"][7]=0,this["pImageClrVertices"][8]=0,this["pImageClrVertices"][9]=1,this["pImageClrVertices"][10]=1,this["pImageClrVertices"][11]=1}var _0x3c1977={},_0x4c7433={};if(_0x3c1977["fLeft"]=(_0x19e050["fLeft"]-this["fSrcUseLeft"])/(this["fSrcUseRight"]-this["fSrcUseLeft"]),_0x3c1977["fRight"]=(_0x19e050["fRight"]-this["fSrcUseLeft"])/(this["fSrcUseRight"]-this["fSrcUseLeft"]),_0x3c1977["fTop"]=(_0x19e050["fTop"]-this["fSrcUseTop"])/(this["fSrcUseBottom"]-this["fSrcUseTop"]),_0x3c1977["fBottom"]=(_0x19e050["fBottom"]-this["fSrcUseTop"])/(this["fSrcUseBottom"]-this["fSrcUseTop"]),_0x4c7433["fLeft"]=this["fDstUseLeft"]+_0x3c1977["fLeft"]*(this["fDstUseRight"]-this["fDstUseLeft"]),_0x4c7433["fRight"]=this["fDstUseLeft"]+_0x3c1977["fRight"]*(this["fDstUseRight"]-this["fDstUseLeft"]),_0x4c7433["fTop"]=this["fDstUseTop"]+_0x3c1977["fTop"]*(this["fDstUseBottom"]-this["fDstUseTop"]),_0x4c7433["fBottom"]=this["fDstUseTop"]+_0x3c1977["fBottom"]*(this["fDstUseBottom"]-this["fDstUseTop"]),null==this["pImagePosVertices"]&&(this["pImagePosVertices"]=new Float32Array(12),null==this["pImagePosVertices"]))return _0x55d077;switch(this["pImagePosVertices"]["fill"](0),this["pImagePosVertices"][0]=2*_0x4c7433["fLeft"]-1,this["pImagePosVertices"][1]=1-2*_0x4c7433["fTop"],this["pImagePosVertices"][2]=2*_0x4c7433["fLeft"]-1,this["pImagePosVertices"][3]=1-2*_0x4c7433["fBottom"],this["pImagePosVertices"][4]=2*_0x4c7433["fRight"]-1,this["pImagePosVertices"][5]=1-2*_0x4c7433["fTop"],this["pImagePosVertices"][6]=2*_0x4c7433["fRight"]-1,this["pImagePosVertices"][7]=1-2*_0x4c7433["fTop"],this["pImagePosVertices"][8]=2*_0x4c7433["fLeft"]-1,this["pImagePosVertices"][9]=1-2*_0x4c7433["fBottom"],this["pImagePosVertices"][10]=2*_0x4c7433["fRight"]-1,this["pImagePosVertices"][11]=1-2*_0x4c7433["fBottom"],1==this["bIsCapturing"]?this["ctx"]["viewport"](0,0,this["nCaptureWidth"],this["nCaptureHeight"]):this["ctx"]["viewport"](0,0,this["canvas"]["width"],this["canvas"]["height"]),this["ctx"]["enable"](this["ctx"]["BLEND"]),this["ctx"]["blendFunc"](this["ctx"]["SRC_ALPHA"],this["ctx"]["ONE_MINUS_SRC_ALPHA"]),_0x171328){case _0xbc9894:if(null==this["nImageColorTexture"]){if(this["nImageColorTexture"]=this["ctx"]["createTexture"](),0==this["nImageColorTexture"])return _0x3e8d23;this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nImageColorTexture"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MAG_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MIN_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_S"],this["ctx"]["CLAMP_TO_EDGE"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_T"],this["ctx"]["CLAMP_TO_EDGE"])}if(this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nImageColorTexture"]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["RGBA"],this["nDrawImageWidth"],this["nDrawImageHeight"],0,this["ctx"]["RGBA"],this["ctx"]["UNSIGNED_BYTE"],_0x69875b),0==this["nImageShaderProgram"]){var _0x34032d=this["CompileProgram"](_0x451732,_0x9c7356);if(_0x34032d<=0)return _0x3e8d23;this["nImageShaderProgram"]=_0x34032d}break;case _0x3ec945:if(null==this["nImageColorTexture"]){if(this["nImageColorTexture"]=this["ctx"]["createTexture"](),0==this["nImageColorTexture"])return _0x3e8d23;this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nImageColorTexture"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MAG_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MIN_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_S"],this["ctx"]["CLAMP_TO_EDGE"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_T"],this["ctx"]["CLAMP_TO_EDGE"])}if(this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nImageColorTexture"]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["RGB"],this["nDrawImageWidth"],this["nDrawImageHeight"],0,this["ctx"]["RGB"],this["ctx"]["UNSIGNED_SHORT_5_6_5"],_0x69875b),0==this["nImageShaderProgram"]){var _0x5b92f0=this["CompileProgram"](_0x451732,"\n    precision mediump float; \n    uniform sampler2D texture; \n    varying lowp vec4 pp;\n    uniform float fAlpha;\n    void main(void) \n    { \n        gl_FragColor = texture2D(texture, pp.st); \n        gl_FragColor.a *= fAlpha; \n    } \n");if(_0x5b92f0<=0)return _0x3e8d23;this["nImageShaderProgram"]=_0x5b92f0}break;case _0x154578:for(var _0x22c932=0;_0x22c932<3;_0x22c932++){if(this["nImageColorTextures"][_0x22c932]=this["ctx"]["createTexture"](),0==this["nImageColorTextures"][_0x22c932])return _0x3e8d23;this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nImageColorTextures"][_0x22c932]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MAG_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MIN_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_S"],this["ctx"]["CLAMP_TO_EDGE"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_T"],this["ctx"]["CLAMP_TO_EDGE"])}if(this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nImageColorTextures"][0]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["LUMINANCE"],this["nDrawImageWidth"],this["nDrawImageHeight"],0,this["ctx"]["LUMINANCE"],this["ctx"]["UNSIGNED_BYTE"],_0x69875b),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nImageColorTextures"][1]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["LUMINANCE"],this["nDrawImageWidth"]/2,this["nDrawImageHeight"]/2,0,this["ctx"]["LUMINANCE"],this["ctx"]["UNSIGNED_BYTE"],_0x69875b+this["nDrawImageWidth"]*this["nDrawImageHeight"]*5/4),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nImageColorTextures"][2]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["LUMINANCE"],this["nDrawImageWidth"]/2,this["nDrawImageHeight"]/2,0,this["ctx"]["LUMINANCE"],this["ctx"]["UNSIGNED_BYTE"],_0x69875b+this["nDrawImageWidth"]*this["nDrawImageHeight"]),0==this["nImageShaderProgram"]){var _0x2d674b=this["CompileProgram"](_0x451732,"\n    precision mediump float;\n    uniform sampler2D Ytexture;\n    uniform sampler2D Utexture;\n    uniform sampler2D Vtexture;\n    uniform float fAlpha;\n    varying lowp vec4 pp;\n\n    void main(void)\n    {\n        float r, g, b, y, u, v; \n\n        y = texture2D(Ytexture, pp.st).r; \n        u = texture2D(Utexture, pp.st).r; \n        v = texture2D(Vtexture, pp.st).r; \n\n        y = 1.1643 * (y - 0.0625); \n        u = u - 0.5; \n        v = v - 0.5; \n\n        r = y + 1.5958 * v; \n        g = y - 0.39173 * u - 0.81290 * v; \n        b = y + 2.017 * u; \n\n        gl_FragColor = vec4(r, g, b, fAlpha); \n    }\n");if(_0x2d674b<=0)return _0x3e8d23;this["nImageShaderProgram"]=_0x2d674b}break;case _0x44487e:if(null==this["nImageColorTexture"]){if(this["nImageColorTexture"]=this["ctx"]["createTexture"](),0==this["nImageColorTexture"])return _0x3e8d23;this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nImageColorTexture"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MAG_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MIN_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_S"],this["ctx"]["CLAMP_TO_EDGE"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_T"],this["ctx"]["CLAMP_TO_EDGE"])}this["ctx"]["useProgram"](this["videoShaderProgram"]),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["vertexPosBuffer"]);var _0x4022a4=this["ctx"]["getAttribLocation"](this["videoShaderProgram"],"xy");if(_0x4022a4<0)return _0x3e8d23;this["ctx"]["vertexAttribPointer"](_0x4022a4,3,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["enableVertexAttribArray"](_0x4022a4),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["texturePosBuffer"]);var _0x57801b=this["ctx"]["getAttribLocation"](this["videoShaderProgram"],"uv");if(_0x57801b<0)return _0x3e8d23;if(this["ctx"]["vertexAttribPointer"](_0x57801b,2,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["enableVertexAttribArray"](_0x57801b),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null),this["ctx"]["useProgram"](null),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nImageColorTexture"]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["RGBA"],this["nDrawImageWidth"],this["nDrawImageHeight"],0,this["ctx"]["RGBA"],this["ctx"]["UNSIGNED_BYTE"],_0x69875b),0==this["nImageShaderProgram"]){var _0x2b1052=this["CompileProgram"](_0x451732,_0x9c7356);if(_0x2b1052<=0)return _0x3e8d23;this["nImageShaderProgram"]=_0x2b1052}break;default:return _0x1b8a99}var _0x1af789=this["nImageShaderProgram"];this["ctx"]["useProgram"](_0x1af789);var _0x110618=this["ctx"]["getUniformLocation"](this["nImageShaderProgram"],"bCapture");if(_0x110618<=0)return _0x3e8d23;1==this["bIsCapturing"]?this["ctx"]["uniform1i"](_0x110618,1):this["ctx"]["uniform1i"](_0x110618,0),this["ctx"]["activeTexture"](this["ctx"]["TEXTURE0"]),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nImageColorTexture"]);var _0x44e082=this["ctx"]["getUniformLocation"](this["nImageShaderProgram"],"texture");this["ctx"]["uniform1i"](_0x44e082,0),_0x44e082=this["ctx"]["getUniformLocation"](this["nImageShaderProgram"],"fAlpha"),this["ctx"]["uniform1f"](_0x44e082,_0x4f18b8),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["glImagePosBuffer"]),this["ctx"]["bufferData"](this["ctx"]["ARRAY_BUFFER"],this["pImagePosVertices"],this["ctx"]["STATIC_DRAW"]);var _0x42434b=this["ctx"]["getAttribLocation"](this["nImageShaderProgram"],"position");this["ctx"]["enableVertexAttribArray"](_0x42434b),this["ctx"]["vertexAttribPointer"](_0x42434b,2,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["glImageClrBuffer"]),this["ctx"]["bufferData"](this["ctx"]["ARRAY_BUFFER"],this["pImageClrVertices"],this["ctx"]["STATIC_DRAW"]);var _0x2dc661=this["ctx"]["getAttribLocation"](this["nImageShaderProgram"],"texCoord");return this["ctx"]["enableVertexAttribArray"](_0x2dc661),this["ctx"]["vertexAttribPointer"](_0x2dc661,2,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null),this["ctx"]["drawArrays"](this["ctx"]["TRIANGLES"],0,6),this["ctx"]["useProgram"](null),this["ctx"]["disable"](this["ctx"]["BLEND"]),_0x31e0fd}},{key:"SR_AddSubPort",value:function value(_0x140263){var _0x488d16,_0x2e9efe,_0x4a3813=_0x308700;if(null==this["ctx"])return _0x4a3813;if(null!=this["pFishParamManager"]?_0x4a3813=this["pFishParamManager"]["GetFECPort"](_0x140263):_0x140263==_0x2bffb5["SR_DE_NULL"]&&(_0x4a3813=0),_0x4a3813==_0x308700)return _0x308700;switch(this["nFECPort"]=_0x4a3813,_0x140263){case _0x2bffb5["SR_DE_NULL"]:_0x488d16=_0x1bb308,this["enPixelFormat"]==_0x44487e?_0x2e9efe="\nprecision mediump float;\nvarying highp vec2 v_uv;\nuniform sampler2D texture;\nuniform float fWndWidth;\nuniform float fWndHeight;\nuniform float fBrightness;\nuniform float fHue;\nuniform float fSaturation;\nuniform float fContrast;\nuniform float fSharpness;\nuniform int nPostProc;\nvec3 rgb2hsv(vec3 c) \n{ \n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0); \n    vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy); \n    vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx); \n    float d = q.x - min(q.w, q.y); \n    float e = 1.0e-10; \n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x); \n} \nvec3 hsv2rgb(vec3 c) \n{ \n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0); \n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www); \n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y); \n} \nvec3 sharpen() \n{ \n    vec3 sharpenColor; \n    float offWidth = 1.0 / fWndWidth; \n    float offHeight = 1.0 / fWndHeight; \n    float tempSharpness = fSharpness * 100.0; \n    vec2 uv     = v_uv; \n    sharpenColor  = (1.0 + 4.0 * tempSharpness) * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(offWidth, 0); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(-offWidth, 0); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(0, offHeight); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(0, -offHeight); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    return sharpenColor; \n} \nvoid main(void) \n{\n    if(1 == nPostProc)\n    {\n        vec3 fragRGB = sharpen();                    //sharpen 锐度\n        vec3 fragHSV = rgb2hsv(fragRGB); \n        fragHSV.x = fragHSV.x + fHue;                   //hue 色度\n        fragHSV.y = fragHSV.y * (fSaturation + 1.0);    //saturation 饱和度\n        fragRGB = hsv2rgb(fragHSV); \n        if (fBrightness > 0.0)                          //brightness 亮度\n        { \n            fragRGB = fragRGB + (1.0 - fragRGB) * fBrightness; \n        } \n        else \n        { \n            fragRGB = fragRGB + fragRGB * fBrightness; \n        } \n        float tempContrast = fContrast > 0.0 ? fContrast * 10.0 : fContrast; \n        fragRGB = ((fragRGB - 0.5) * max(tempContrast + 1.0, 0.0)) + 0.5;      //contrast 对比度\n        gl_FragColor = vec4(fragRGB, 1.0); \n    }\n    else\n    {\n        gl_FragColor = texture2D(texture, v_uv);\n    }\n}\n":this["enPixelFormat"]!=_0x154578&&this["enPixelFormat"]!=_0x5a2deb||(_0x2e9efe="\nprecision mediump float;\nvarying highp vec2 v_uv;\nuniform sampler2D Ytexture;\nuniform sampler2D Utexture;\nuniform sampler2D Vtexture;\nuniform float fWndWidth;\nuniform float fWndHeight;\nuniform float fBrightness;\nuniform float fHue;\nuniform float fSaturation;\nuniform float fContrast;\nuniform float fSharpness;\nuniform int nPostProc;\nvec3 rgb;\nvec3 yuv2rgb(float y, float u, float v)\n{\n    float r,g,b; \n    y = 1.1643 * (y - 0.0625); \n    u = u - 0.5; \n    v = v - 0.5; \n    r = y + 1.5958 * v; \n    g = y - 0.39173 * u - 0.81290 * v; \n    b = y + 2.017 * u; \n    return vec3(r, g, b);\n}\nvec3 rgb2hsv(vec3 c) \n{ \n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0); \n    vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy); \n    vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx); \n\n    float d = q.x - min(q.w, q.y); \n    float e = 1.0e-10; \n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x); \n} \n\nvec3 hsv2rgb(vec3 c) \n{ \n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0); \n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www); \n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y); \n} \n\nvec3 sharpen(vec3 c) \n{ \n    vec3 sharpenColor; \n    float sharpenColorY;\n    float sharpenColorU;\n    float sharpenColorV;\n    float offWidth  = 1.0 / fWndWidth; \n    float offHeight = 1.0 / fWndHeight; \n    float tempSharpness = fSharpness * 100.0; \n\n    sharpenColor = (1.0 + 4.0 * tempSharpness) * c;\n\n    vec2 uv       = v_uv + vec2(offWidth, 0); \n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(-offWidth, 0); \n    sharpenColorY = texture2D(Ytexture, uv).r;\n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(0, offHeight);\n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness * yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(0, -offHeight); \n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    return sharpenColor; \n} \nvoid main(void)\n{\n    float y, u, v;\n    y = texture2D(Ytexture, v_uv).r;\n    u = texture2D(Utexture, v_uv).r;\n    v = texture2D(Vtexture, v_uv).r;\n    rgb = yuv2rgb(y, u, v);\n    if(1 == nPostProc)\n    {\n        vec3 fragRGB = sharpen(rgb);                    //sharpen 锐度\n        vec3 fragHSV = rgb2hsv(fragRGB); \n        fragHSV.x = fragHSV.x + fHue;                   //hue 色度\n        fragHSV.y = fragHSV.y * (fSaturation + 1.0);    //saturation 饱和度\n        fragRGB = hsv2rgb(fragHSV); \n        if (fBrightness > 0.0)                        //brightness 亮度\n        { \n            fragRGB = fragRGB + (1.0 - fragRGB) * fBrightness; \n        } \n        else \n        { \n            fragRGB = fragRGB + fragRGB * fBrightness; \n        } \n\n        float tempContrast = fContrast > 0.0 ? fContrast * 10.0 : fContrast; \n        fragRGB = ((fragRGB - 0.5) * max(tempContrast + 1.0, 0.0)) + 0.5;      //contrast 对比度\n        gl_FragColor = vec4(fragRGB, 1.0); \n    }\n    else\n    {\n        gl_FragColor = vec4(rgb, 1.0);\n    }\n}\n"),this["b3DPort"]=!1;break;case _0x2bffb5["SR_DE_FISH_ORIGINAL"]:_0x488d16=_0x1bb308,_0x2e9efe="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fRX1;\nuniform float fRX2;\nuniform float fRY1;\nuniform float fRY2;\nuniform int bBlack; \nuniform int bCut;\n\nvoid main()\n{ \n\tfloat r,g,b;\n\tvec4 origin;\n\n\tfloat  w;\n\tfloat  h;\n\tfloat  fCenterX;\n\tfloat  fCenterY;\n\tfloat  fRadius;\n\tw = 1.0;\n\th = (fRX2 - fRX1) / (fRY2 - fRY1);\n\tfCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n\tfCenterY = (fRY1 + fRY2) / 2.0 * h;\n\tfRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n\tfloat  leftCut = 0.0;\n\tfloat  rightCut = 1.0;\n\tfloat  topCut = 0.0;\n\tfloat  bottomCut = 1.0;\n\tif(bCut == 1)\n\t{\n\t\tif(fRX1 > 0.0)\n\t\t{\n\t\t\tleftCut = fRX1;\n\t\t}\n\t\tif(fRX2 < 1.0)\n\t\t{\n\t\t\trightCut = fRX2;\n\t\t}\n\t\tif(fRY1 > 0.0)\n\t\t{\n\t\t\ttopCut = fRY1;\n\t\t}\n\t\tif(fRY2 < 1.0)\n\t\t{\n\t\t\tbottomCut = fRY2;\n\t\t}\n\t}\n\torigin.s = v_uv.s * (rightCut-leftCut) + leftCut;\n\torigin.t = v_uv.t * (bottomCut-topCut) + topCut;\n\n\tr = texture2D(texture, origin.st).r; \n\tg = texture2D(texture, origin.st).g; \n\tb = texture2D(texture, origin.st).b; \n\n\tif(bBlack == 1)\n\t{\n\t\tfloat tmpX, tmpY;\n\t\ttmpX = origin.s * w; \n\t\ttmpY = origin.t * h; \n\t\tfloat d2 = (tmpX-fCenterX)*(tmpX-fCenterX) + (tmpY-fCenterY)*(tmpY-fCenterY);\n\t\tif(d2 > fRadius*fRadius)\n\t\t{\n\t\t\tr = 0.0; \n\t\t\tg = 0.0; \n\t\t\tb = 0.0; \n\t\t}\n\t}\n\n\tgl_FragColor = vec4(r ,g ,b , 1.0);\n}\n",this["b3DPort"]=!1;break;case _0x2bffb5["SR_DE_FISH_PTZ_CEILING"]:_0x488d16=_0x1bb308,_0x2e9efe="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;\nuniform float fVAngleCos;\nuniform float fVAngleSin;\nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;  \n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;    \n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w; \n\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = 0.5 - v_uv.t;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = (-(origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this["b3DPort"]=!1;break;case _0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]:_0x488d16=_0x1bb308,_0x2e9efe="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;  \nuniform float fHAngleCos;  \nuniform float fHAngleSin; \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;\n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<Բ��ʵ������\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<�뾶ʵ�ʳ���\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = v_uv.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = ((origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0;\n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this["b3DPort"]=!1;break;case _0x2bffb5["SR_DE_FISH_PTZ_WALL"]:_0x488d16=_0x1bb308,_0x2e9efe="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;  \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;  \n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 origin3;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  z3;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<Բ��ʵ������\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<�뾶ʵ�ʳ���\n\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = v_uv.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    origin3.s = origin2.s*fHAngleCos + z2*fHAngleSin ;\n    origin3.t = origin2.y;\n    z3 = z2*fHAngleCos - origin2.x*fHAngleSin;\n\n    dnew = sqrt(origin3.s*origin3.s + origin3.t*origin3.t) ;\n    float d = sqrt(origin3.s*origin3.s + origin3.t*origin3.t + z3*z3);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    result.s = (tmp*origin3.s / dnew * fRadius * 2.0 + fCenterX)/w;\n    result.t = (tmp*origin3.t / dnew * fRadius * 2.0 + fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this["b3DPort"]=!1;break;case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]:_0x488d16=_0x1bb308,_0x2e9efe="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    \n    void main()\n    {\n    \n        float r,g,b; \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;  ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = v_uv.s;\n        origin.t = (bottomCut - topCut) * v_uv.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0;\n        }\n        gl_FragColor = vec4(r, g, b, 1.0);\n    }\n",this["b3DPort"]=!1;break;case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]:_0x488d16=_0x1bb308,_0x2e9efe="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1; \n    uniform float fRX2; \n    uniform float fRY1; \n    uniform float fRY2; \n    \n    void main()\n    {\n        float r,g,b;  \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (v_uv.t  <= 0.5)\n        {\n            newpp.s =  v_uv.s / 2.0 + 0.5;\n            newpp.t =  v_uv.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  v_uv.s / 2.0;\n            newpp.t =  (v_uv.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = newpp.s;\n        origin.t = (bottomCut - topCut) * newpp.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0;\n            g = 0.0;\n            b = 0.0;\n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this["b3DPort"]=!1;break;case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]:_0x488d16=_0x1bb308,_0x2e9efe="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    \n    void main()\n    {\n        float r,g,b;  \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                   fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - v_uv.s;\n        origin.t = (bottomCut - topCut) * (1.0 - v_uv.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this["b3DPort"]=!1;break;case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]:_0x488d16=_0x1bb308,_0x2e9efe="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n\n    void main()\n    {\n        float r,g,b;  \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (v_uv.t  <= 0.5) \n        {\n            newpp.s =  v_uv.s / 2.0;\n            newpp.t =  v_uv.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  v_uv.s / 2.0 + 0.5;\n            newpp.t =  (v_uv.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n             float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - newpp.s;\n        origin.t = (bottomCut - topCut) * (1.0 - newpp.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r; \n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    } \n",this["b3DPort"]=!1;break;case _0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:_0x488d16=_0x1bb308,_0x2e9efe="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1; \n    uniform float fRY2; \n    \n    void main()\n    {\n        float r,g,b;\n    \n        vec4 origin;\n        vec4 result;\n        float  d;\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float  defaultTopCut = 0.1;\n        float  defaultBottomCut = 0.9;\n        float  leftCut = 0.0;    ///<当图像中圆不完整时需要切掉无图像部分,即使图像完整,为了效果,也要切掉上下固定的一部分\n        float  rightCut = 1.0;\n        float  topCut = defaultTopCut;\n        float  bottomCut = defaultBottomCut;\n        if(fRX1 < 0.0)\n        {\n            float tmp;\n            tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            leftCut = tmp;\n        }\n        if(fRX2 > 1.0)\n        {\n            float tmp;\n            tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            rightCut = 1.0 - tmp;\n        }\n        if(fRY1 < 0.0)\n        {\n            float tmp;\n            tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            if(tmp > defaultTopCut)\n                topCut = tmp;\n            else\n                topCut = defaultTopCut;\n        }\n        if(fRY2 > 1.0)\n        {\n            float tmp;\n            tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            if(tmp > 1.0 - defaultBottomCut)\n                bottomCut = 1.0 - tmp;\n            else\n                bottomCut = defaultBottomCut;\n        }\n        origin.s = v_uv.s * (rightCut-leftCut) + leftCut;\n        origin.t = v_uv.t * (bottomCut-topCut) + topCut;\n        float tmpx = origin.s * 2.0 * fRadius + fCenterX - fRadius; ///<纹理坐标转化为原图上的实际坐标\n        float tmpy = origin.t * 2.0 * fRadius + fCenterY - fRadius;\n        d = sqrt(fRadius*fRadius - (tmpy-fCenterY)*(tmpy-fCenterY));\n        result.s = ((tmpx-fCenterX) * d / fRadius + fCenterX) / w;\n        result.t = tmpy / h;\n    \n        r = texture2D(texture, result.st).r; \n        g = texture2D(texture, result.st).g; \n        b = texture2D(texture, result.st).b; \n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this["b3DPort"]=!1;break;case _0x2bffb5["SR_DE_FISH_SEMISPHERE"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]:case _0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]:case _0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]:_0x140263==_0x2bffb5["SR_DE_FISH_SEMISPHERE"]&&(this["bCullBack"]=!0),_0x488d16="\n    attribute vec4 xy;\n    attribute vec2 uv;\n    varying highp vec2 v_uv;\n    uniform int bCapture;\n\n    uniform mat4 matProj;\n    uniform mat4 matView;\n    void main(void) {\n        gl_Position = matProj * matView * xy;\n        v_uv = uv;\n        if(bCapture == 1)\n        {\n          v_uv.y = 1.0 - uv.y;\n        }\n    }\n",_0x2e9efe="\n    varying highp vec2 v_uv;\n    uniform sampler2D texture;\n    void main(void) {\n        gl_FragColor = texture2D(texture, v_uv);\n    }\n",this["b3DPort"]=!0;break;default:return _0x1b8a99}var _0x2c03c9=this["CompileProgram"](_0x488d16,_0x2e9efe);if(_0x2c03c9<=0)return _0x3e8d23;this["videoShaderProgram"]=_0x2c03c9;var _0x16db83=null,_0x2659e8=null,_0x3ff8a1=_0x31e0fd;if(0==this["b3DPort"])_0x16db83=new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0]),_0x2659e8=new Float32Array([0,1,0,0,1,0,1,1]);else{var _0x480e92={},_0x5d82b8=!1;if(null==this["pFishParamManager"])return _0x27ff6b;for(var _0x29998a=0;_0x29998a<_0x36131b;++_0x29998a)if(_0x29998a!=_0x4a3813&&_0x31e0fd==this["pFishParamManager"]["GetRenderParam"](_0x29998a,_0x480e92)){_0x5d82b8=!0;break}var _0x530d46=0,_0x409904=1,_0x34dd44=0,_0x21b600=1;if(1==_0x5d82b8&&(_0x530d46=_0x480e92["fRXLeft"],_0x409904=_0x480e92["fRXRight"],_0x34dd44=_0x480e92["fRYTop"],_0x21b600=_0x480e92["fRYBottom"]),_0x140263==_0x2bffb5["SR_DE_FISH_SEMISPHERE"])_0x3ff8a1=this["_CreateSemiSphere"](_0x530d46,_0x409904,_0x34dd44,_0x21b600),_0x16db83=this["pSemiSpherePos"],_0x2659e8=this["pSemiSphereTex"];else{if(_0x140263==_0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]||_0x140263==_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"])_0x3ff8a1=this["_CreateCylinder"](_0x140263,_0x530d46,_0x409904,_0x34dd44,_0x21b600,2,2),_0x16db83=this["pCylinderPos"],_0x2659e8=this["pCylinderTex"];else{if(_0x140263!=_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]&&_0x140263!=_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"])return _0x1b8a99;0==_0x5d82b8?_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]==_0x140263?(_0x530d46=.05,_0x409904=.95,_0x34dd44=-.3,_0x21b600=1.3):_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]==_0x140263&&(_0x530d46=-.16,_0x409904=1.16,_0x34dd44=.005,_0x21b600=.995):_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]==_0x140263?(_0x480e92["fRYTop"]>0||_0x480e92["fRYBottom"]<1)&&(_0x530d46=.05,_0x409904=.95,_0x34dd44=-.3,_0x21b600=1.3):_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]==_0x140263&&(_0x480e92["fRXLeft"]>0||_0x480e92["fRXRight"]<1)&&(_0x530d46=-.16,_0x409904=1.16,_0x34dd44=.005,_0x21b600=.995),_0x3ff8a1=this["_CreateArcSphere"](_0x140263,_0x530d46,_0x409904,_0x34dd44,_0x21b600),_0x16db83=this["pArcSpherePos"],_0x2659e8=this["pArcSphereTex"]}}if(_0x3ff8a1!=_0x31e0fd)return _0x3ff8a1;var _0x147515={};if((_0x3ff8a1=this["pFishParamManager"]["GetFishParam"](this["nFECPort"],_0x147515))!=_0x31e0fd)return _0x3ff8a1;if(_0x147515["nFishParamType"]=_0x3d41fb,_0x147515["fRXLeft"]=_0x530d46,_0x147515["fRXRight"]=_0x409904,_0x147515["fRYTop"]=_0x34dd44,_0x147515["fRYBottom"]=_0x21b600,this["pFishParamManager"]["SetFishParam"](this["nFECPort"],_0x147515),_0x3ff8a1!=_0x31e0fd)return _0x3ff8a1}if(null==_0x16db83||null==_0x2659e8)return _0x1b8a99;var _0x4f897f=this["ctx"]["createBuffer"]();this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],_0x4f897f),this["ctx"]["bufferData"](this["ctx"]["ARRAY_BUFFER"],_0x16db83,this["ctx"]["STATIC_DRAW"]),this["vertexPosBuffer"]=_0x4f897f;var _0x37791f=this["ctx"]["createBuffer"]();return this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],_0x37791f),this["ctx"]["bufferData"](this["ctx"]["ARRAY_BUFFER"],_0x2659e8,this["ctx"]["STATIC_DRAW"]),this["texturePosBuffer"]=_0x37791f,this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null),0==this["b3DPort"]&&(_0x16db83=null,_0x2659e8=null),_0x3ff8a1=this["InitCamera"](_0x140263),_0x31e0fd!=_0x3ff8a1?_0x3ff8a1:(this["enDisplayEffect"]=_0x140263,this["nFECPort"])}},{key:"SR_DelSubPort",value:function value(_0x2a73f7){return null==this["ctx"]?_0x27ff6b:(null!=this["pFishParamManager"]&&this["nFECPort"]==_0x2a73f7&&this["pFishParamManager"]["FreeFECPort"](this["nFECPort"]),this["enDisplayEffect"]=_0x2bffb5["SR_DE_NULL"],0!=this["videoShaderProgram"]&&null!=this["ctx"]&&(this["ctx"]["deleteProgram"](this["videoShaderProgram"]),this["videoShaderProgram"]=0),0!=this["vertexPosBuffer"]&&null!=this["ctx"]&&(this["ctx"]["deleteBuffer"](this["vertexPosBuffer"]),this["vertexPosBuffer"]=0),0!=this["texturePosBuffer"]&&null!=this["ctx"]&&(this["ctx"]["deleteBuffer"](this["texturePosBuffer"]),this["texturePosBuffer"]=0),this["nMaxPointNum"]=0,this["pLinePosVertices"]=null,this["pLineClrVertices"]=null,0!=this["glLinePosBuffer"]&&null!=this["ctx"]&&(this["ctx"]["deleteBuffer"](this["glLinePosBuffer"]),this["glLinePosBuffer"]=0),0!=this["glLineTexBuffer"]&&null!=this["ctx"]&&(this["ctx"]["deleteBuffer"](this["glLineTexBuffer"]),this["glLineTexBuffer"]=0),this["nLineTriangleNum"]=0,0!=this["nLineShaderProgram"]&&null!=this["ctx"]&&(this["ctx"]["deleteProgram"](this["nLineShaderProgram"]),this["nLineShaderProgram"]=0),this["pFillBlockPosVertices"]=null,this["pFillBlockClrVertices"]=null,this["nMaxFillBlockTriNum"]=0,0!=this["glBlockPosBuffer"]&&null!=this["ctx"]&&(this["ctx"]["deleteBuffer"](this["glBlockPosBuffer"]),this["glBlockPosBuffer"]=0),0!=this["glBlockClrBuffer"]&&null!=this["ctx"]&&(this["ctx"]["deleteBuffer"](this["glBlockClrBuffer"]),this["glBlockClrBuffer"]=0),0!=this["nBlockShaderProgram"]&&null!=this["ctx"]&&(this["ctx"]["deleteProgram"](this["nBlockShaderProgram"]),this["nBlockShaderProgram"]=0),this["nDrawFontWidth"]=0,this["nDrawFontHeight"]=0,0!=this["nFontColorTexture"]&&null!=this["ctx"]&&(this["ctx"]["deleteTexture"](this["nFontColorTexture"]),this["nFontColorTexture"]=0),this["pFontColorBuffer"]=0,0!=this["nFontShaderProgram"]&&null!=this["ctx"]&&(this["ctx"]["deleteProgram"](this["nFontShaderProgram"]),this["nFontShaderProgram"]=0),0!=this["nCaptureRTTex"]&&(this["ctx"]["deleteTexture"](this["nCaptureRTTex"]),this["nCaptureRTTex"]=0),0!=this["nCaptureFBO"]&&(this["ctx"]["deleteFramebuffer"](this["nCaptureFBO"]),this["nCaptureFBO"]=0),0!=this["nCaptureDepthbuffer"]&&(this["ctx"]["deleteRenderbuffer"](this["nCaptureDepthbuffer"]),this["nCaptureDepthbuffer"]=0),this["bCaptureResInit"]=!1,this["pSemiSpherePos"]=null,this["pSemiSphereTex"]=null,this["nSemiSpherePosNum"]=0,this["nSemiSpherePosSize"]=0,this["nSemiSphereTexSize"]=0,this["pCylinderPos"]=null,this["pCylinderTex"]=null,this["nCylinderPosNum"]=0,this["nCylinderPosSize"]=0,this["nCylinderTexSize"]=0,this["fCylinderHeight"]=0,this["fCylinderRadius"]=0,this["pArcSpherePos"]=null,this["pArcSphereTex"]=null,this["nArcSpherePosNum"]=0,this["nArcSpherePosSize"]=0,this["nArcSphereTexSize"]=0,this["b3DPort"]=!1,this["pCamera"]=null,this["fRotateX"]=0,this["fRotateY"]=0,this["fScale"]=0,this["pfuncCBIn"]=null,this["pfuncCBOut"]=null,this["pUserIn"]=null,this["pUserOut"]=null,this["ctx"]["disable"](this["ctx"]["CULL_FACE"]),this["ctx"]["disable"](this["ctx"]["DEPTH_TEST"]),_0x31e0fd)}},{key:"SR_GetFishParam",value:function value(_0x4f177f){return null==_0x4f177f?_0x592c4b:null==this["pFishParamManager"]?_0x27ff6b:this["pFishParamManager"]["GetFishParam"](this["nFECPort"],_0x4f177f)}},{key:"SR_SetFishParam",value:function value(_0x27333e){return null==_0x27333e?_0x592c4b:null==this["pFishParamManager"]?_0x27ff6b:this["pFishParamManager"]["SetFishParam"](this["nFECPort"],_0x27333e)}},{key:"SR_SetDisplayRect",value:function value(_0x28638b,_0x6d530f,_0x4eda01,_0x39f2ff,_0x12b369){if(null==this["ctx"])return _0x27ff6b;var _0x7fd0ed=_0x28638b,_0x15a54a=_0x6d530f,_0x38788b=_0x28638b+_0x4eda01,_0x595117=_0x6d530f+_0x39f2ff,_0x2437e5=null,_0x4d3efe=null;switch(_0x12b369){case _0x1dd1c6:if(this["frameDisplayWidth"]>0&&this["frameDisplayHeight"]>0){if(this["fSrcUseLeft"]=_0x7fd0ed/this["frameDisplayWidth"],this["fSrcUseLeft"]<0?this["fSrcUseLeft"]=0:this["fSrcUseLeft"]>1&&(this["fSrcUseLeft"]=1),this["fSrcUseTop"]=_0x15a54a/this["frameDisplayHeight"],this["fSrcUseTop"]<0?this["fSrcUseTop"]=0:this["fSrcUseTop"]>1&&(this["fSrcUseTop"]=1),this["fSrcUseRight"]=_0x38788b/this["frameDisplayWidth"],this["fSrcUseRight"]<0?this["fSrcUseRight"]=0:this["fSrcUseRight"]>1&&(this["fSrcUseRight"]=1),this["fSrcUseBottom"]=_0x595117/this["frameDisplayHeight"],this["fSrcUseBottom"]<0?this["fSrcUseBottom"]=0:this["fSrcUseBottom"]>1&&(this["fSrcUseBottom"]=1),this["fSrcUseLeft"]>=this["fSrcUseRight"]||this["fSrcUseTop"]>=this["fSrcUseBottom"])return _0x592c4b;_0x2437e5=new Float32Array([this["fSrcUseLeft"],this["fSrcUseBottom"],this["fSrcUseLeft"],this["fSrcUseTop"],this["fSrcUseRight"],this["fSrcUseTop"],this["fSrcUseRight"],this["fSrcUseBottom"]])}else _0x2437e5=new Float32Array([0,1,0,0,1,0,1,1]);this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["texturePosBuffer"]),this["ctx"]["bufferSubData"](this["ctx"]["ARRAY_BUFFER"],0,_0x2437e5),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null),_0x2437e5=null;break;case _0x2f2c60:if(this["frameDisplayWidth"]>0&&this["frameDisplayHeight"]>0){if(this["fDstUseLeft"]=_0x7fd0ed/this["frameDisplayWidth"],this["fDstUseLeft"]<0?this["fDstUseLeft"]=0:this["fDstUseLeft"]>1&&(this["fDstUseLeft"]=1),this["fDstUseTop"]=_0x15a54a/this["frameDisplayHeight"],this["fDstUseTop"]<0?this["fDstUseTop"]=0:this["fDstUseTop"]>1&&(this["fDstUseTop"]=1),this["fDstUseRight"]=_0x38788b/this["frameDisplayWidth"],this["fDstUseRight"]<0?this["fDstUseRight"]=0:this["fDstUseRight"]>1&&(this["fDstUseRight"]=1),this["fDstUseBottom"]=_0x595117/this["frameDisplayHeight"],this["fDstUseBottom"]<0?this["fDstUseBottom"]=0:this["fDstUseBottom"]>1&&(this["fDstUseBottom"]=1),this["fDstUseLeft"]>=this["fDstUseRight"]||this["fDstUseTop"]>=this["fDstUseBottom"])return _0x592c4b;(_0x4d3efe=new Float32Array(12))[0]=2*this["fDstUseLeft"]-1,_0x4d3efe[1]=1-2*this["fDstUseBottom"],_0x4d3efe[2]=0,_0x4d3efe[3]=2*this["fDstUseLeft"]-1,_0x4d3efe[4]=1-2*this["fDstUseTop"],_0x4d3efe[5]=0,_0x4d3efe[6]=2*this["fDstUseRight"]-1,_0x4d3efe[7]=1-2*this["fDstUseTop"],_0x4d3efe[8]=0,_0x4d3efe[9]=2*this["fDstUseRight"]-1,_0x4d3efe[10]=1-2*this["fDstUseBottom"],_0x4d3efe[11]=0,this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["vertexPosBuffer"]),this["ctx"]["bufferSubData"](this["ctx"]["ARRAY_BUFFER"],0,_0x4d3efe),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null),_0x4d3efe=null}break;default:return _0x1b8a99}return _0x31e0fd}},{key:"SR_Destroy",value:function value(){if(null==this["ctx"])return _0x27ff6b;this["frameDisplayWidth"]=0,this["frameDisplayHeight"]=0,this["pFrameData"]=null;for(var _0x25cb47=0;_0x25cb47<this["nTextureNum"];_0x25cb47++)0!=this["nSurfaceTexture"][_0x25cb47]&&null!=this["ctx"]&&(this["ctx"]["deleteTexture"](this["nSurfaceTexture"][_0x25cb47]),this["nSurfaceTexture"][_0x25cb47]=0);return this["SR_DelSubPort"](this["nFECPort"]),this["ctx"]["getExtension"]("WEBGL_lose_context")["loseContext"](),this["ctx"]=null,this["onlySupportedWebGL1"]=!1,this["bAntialias"]=!1,this["bRecreateTex"]=!0,this["pFishParamManager"]=null,_0x31e0fd}},{key:"SR_SetCanvasSize",value:function value(_0xe060c5,_0x24b6dd){return this["canvas"]["width"]=_0xe060c5,this["canvas"]["height"]=_0x24b6dd,_0x31e0fd}},{key:"SR_GetCanvasSize",value:function value(){return console["log"]("canvas width:"+this["canvas"]["width"]+",height:"+this["canvas"]["height"]),_0x31e0fd}},{key:"SR_SetAntialias",value:function value(_0x543221){return 1==this["onlySupportedWebGL1"]?_0x1b8a99:(this["bAntialias"]!=_0x543221&&(this["bRecreateTex"]=!0,this["bAntialias"]=_0x543221),_0x31e0fd)}},{key:"SR_SetPTZDisplayMode",value:function value(_0x21aebd){return null==this["pFishParamManager"]?_0x27ff6b:this["pFishParamManager"]["SetPTZDisplayMode"](_0x21aebd)}},{key:"SR_SetFishParamManager",value:function value(_0x2bb812){return null!=this["pFishParamManager"]?_0x1b8a99:(this["pFishParamManager"]=_0x2bb812,_0x31e0fd)}},{key:"_CreateSemiSphere",value:function value(_0x3368b1,_0x1b54d4,_0x58dae1,_0xd0f509){if(null!=this["pSemiSpherePos"]||null!=this["pSemiSphereTex"])return _0x27ff6b;this["pSemiSpherePos"]=new Float32Array(43200),this["pSemiSphereTex"]=new Float32Array(28800);for(var _0x4b64dd=(_0x1b54d4-_0x3368b1)/(_0xd0f509-_0x58dae1),_0x16a714=(_0x1b54d4-_0x3368b1)/2*1,_0x110bf2=6.2831852/60,_0x3921b6=.0392699075,_0x3a926f=0,_0x285c9b=0,_0x3ae4b=0,_0x56fa22=0;_0x56fa22<60;++_0x56fa22)for(var _0x4694df=0;_0x4694df<40;++_0x4694df){var _0x527972=_0x56fa22*_0x110bf2;0==_0x56fa22&&(_0x3a926f=_0x527972);var _0x2263ad=59==_0x56fa22?_0x3a926f:(_0x56fa22+1)*_0x110bf2,_0x3853db=-_0x4694df*_0x3921b6,_0x3ba517=-(_0x4694df+1)*_0x3921b6,_0x3dafca=void 0,_0x57c5fd=void 0;this["pSemiSpherePos"][_0x285c9b]=-1*Math["cos"](_0x3853db)*Math["cos"](_0x527972),this["pSemiSpherePos"][_0x285c9b+1]=1*Math["sin"](_0x3853db),this["pSemiSpherePos"][_0x285c9b+2]=-1*Math["cos"](_0x3853db)*Math["sin"](_0x527972),_0x57c5fd=.5-.5*(1+_0x3853db/1.5707963)*Math["sin"](_0x527972),_0x3dafca=.5-.5*(1+_0x3853db/1.5707963)*Math["cos"](_0x527972),this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x3dafca*_0x16a714+1*_0x3368b1)/1,this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x57c5fd*_0x16a714+_0x58dae1*_0x4b64dd)/_0x4b64dd,_0x285c9b+=3,this["pSemiSpherePos"][_0x285c9b]=-1*Math["cos"](_0x3ba517)*Math["cos"](_0x527972),this["pSemiSpherePos"][_0x285c9b+1]=1*Math["sin"](_0x3ba517),this["pSemiSpherePos"][_0x285c9b+2]=-1*Math["cos"](_0x3ba517)*Math["sin"](_0x527972),_0x57c5fd=.5-.5*(1+_0x3ba517/1.5707963)*Math["sin"](_0x527972),_0x3dafca=.5-.5*(1+_0x3ba517/1.5707963)*Math["cos"](_0x527972),this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x3dafca*_0x16a714+1*_0x3368b1)/1,this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x57c5fd*_0x16a714+_0x58dae1*_0x4b64dd)/_0x4b64dd,_0x285c9b+=3,this["pSemiSpherePos"][_0x285c9b]=-1*Math["cos"](_0x3853db)*Math["cos"](_0x2263ad),this["pSemiSpherePos"][_0x285c9b+1]=1*Math["sin"](_0x3853db),this["pSemiSpherePos"][_0x285c9b+2]=-1*Math["cos"](_0x3853db)*Math["sin"](_0x2263ad),_0x57c5fd=.5-.5*(1+_0x3853db/1.5707963)*Math["sin"](_0x2263ad),_0x3dafca=.5-.5*(1+_0x3853db/1.5707963)*Math["cos"](_0x2263ad),this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x3dafca*_0x16a714+1*_0x3368b1)/1,this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x57c5fd*_0x16a714+_0x58dae1*_0x4b64dd)/_0x4b64dd,_0x285c9b+=3,this["pSemiSpherePos"][_0x285c9b]=-1*Math["cos"](_0x3853db)*Math["cos"](_0x2263ad),this["pSemiSpherePos"][_0x285c9b+1]=1*Math["sin"](_0x3853db),this["pSemiSpherePos"][_0x285c9b+2]=-1*Math["cos"](_0x3853db)*Math["sin"](_0x2263ad),_0x57c5fd=.5-.5*(1+_0x3853db/1.5707963)*Math["sin"](_0x2263ad),_0x3dafca=.5-.5*(1+_0x3853db/1.5707963)*Math["cos"](_0x2263ad),this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x3dafca*_0x16a714+1*_0x3368b1)/1,this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x57c5fd*_0x16a714+_0x58dae1*_0x4b64dd)/_0x4b64dd,_0x285c9b+=3,this["pSemiSpherePos"][_0x285c9b]=-1*Math["cos"](_0x3ba517)*Math["cos"](_0x527972),this["pSemiSpherePos"][_0x285c9b+1]=1*Math["sin"](_0x3ba517),this["pSemiSpherePos"][_0x285c9b+2]=-1*Math["cos"](_0x3ba517)*Math["sin"](_0x527972),_0x57c5fd=.5-.5*(1+_0x3ba517/1.5707963)*Math["sin"](_0x527972),_0x3dafca=.5-.5*(1+_0x3ba517/1.5707963)*Math["cos"](_0x527972),this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x3dafca*_0x16a714+1*_0x3368b1)/1,this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x57c5fd*_0x16a714+_0x58dae1*_0x4b64dd)/_0x4b64dd,_0x285c9b+=3,this["pSemiSpherePos"][_0x285c9b]=-1*Math["cos"](_0x3ba517)*Math["cos"](_0x2263ad),this["pSemiSpherePos"][_0x285c9b+1]=1*Math["sin"](_0x3ba517),this["pSemiSpherePos"][_0x285c9b+2]=-1*Math["cos"](_0x3ba517)*Math["sin"](_0x2263ad),_0x57c5fd=.5-.5*(1+_0x3ba517/1.5707963)*Math["sin"](_0x2263ad),_0x3dafca=.5-.5*(1+_0x3ba517/1.5707963)*Math["cos"](_0x2263ad),this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x3dafca*_0x16a714+1*_0x3368b1)/1,this["pSemiSphereTex"][_0x3ae4b++]=(2*_0x57c5fd*_0x16a714+_0x58dae1*_0x4b64dd)/_0x4b64dd,_0x285c9b+=3}return this["nSemiSpherePosNum"]=_0x285c9b/3,this["nSemiSpherePosSize"]=3,this["nSemiSphereTexSize"]=2,_0x31e0fd}},{key:"_CreateCylinder",value:function value(_0x227d8f,_0x48cc79,_0x28eec2,_0x33b371,_0x7d0f95,_0x1168a3,_0xdcf4cd){if(null!=this["pCylinderPos"]||null!=this["pCylinderTex"])return _0x27ff6b;if(Math["abs"](_0x1168a3-0)<_0x2fc9a7)this["fCylinderHeight"]=2;else{if(_0x1168a3<.5||_0x1168a3>6)return _0x592c4b;this["fCylinderHeight"]=_0x1168a3}if(Math["abs"](_0xdcf4cd-0)<_0x2fc9a7)this["fCylinderRadius"]=_0x227d8f==_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]||_0x227d8f==_0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]?2:1;else{if(_0xdcf4cd<.5||_0xdcf4cd>4)return _0x592c4b;this["fCylinderRadius"]=_0xdcf4cd}if(this["pCylinderPos"]=new Float32Array(43200),this["pCylinderTex"]=new Float32Array(28800),null==this["pCylinderPos"]||null==this["pCylinderTex"])return this["pCylinderPos"]=null,this["pCylinderTex"]=null,_0x55d077;for(var _0x2cf5ad=(_0x28eec2-_0x48cc79)/(_0x7d0f95-_0x33b371),_0xd39898=(_0x28eec2-_0x48cc79)/2*1,_0x57a0b9=6.2831852/60,_0x550382=this["fCylinderHeight"]/_0x5eef1d,_0x171926=0,_0xcad197=0,_0x51c328=0;_0x51c328<60;++_0x51c328)for(var _0x5b72ba=0;_0x5b72ba<_0x5eef1d;++_0x5b72ba){var _0x5bec97=_0x51c328*_0x57a0b9,_0x4b7133=(_0x51c328+1)*_0x57a0b9,_0x3eaecf=void 0,_0x341d06=void 0;this["pCylinderPos"][_0x171926]=-this["fCylinderRadius"]*Math["sin"](_0x5bec97),this["pCylinderPos"][_0x171926+1]=this["fCylinderHeight"]/2-_0x5b72ba*_0x550382,this["pCylinderPos"][_0x171926+2]=-this["fCylinderRadius"]*Math["cos"](_0x5bec97),_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]==_0x227d8f||_0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_FLOOR"]==_0x227d8f?(_0x3eaecf=.5+(.1+.01*_0x5b72ba)*Math["sin"](_0x5bec97),_0x341d06=.5+(.1+.01*_0x5b72ba)*Math["cos"](_0x5bec97)):(_0x3eaecf=.5-(.5-.01*_0x5b72ba)*Math["sin"](_0x5bec97),_0x341d06=.5+(.5-.01*_0x5b72ba)*Math["cos"](_0x5bec97)),this["pCylinderTex"][_0xcad197++]=(2*_0x3eaecf*_0xd39898+1*_0x48cc79)/1,this["pCylinderTex"][_0xcad197++]=(2*_0x341d06*_0xd39898+_0x33b371*_0x2cf5ad)/_0x2cf5ad,_0x171926+=3,this["pCylinderPos"][_0x171926]=-this["fCylinderRadius"]*Math["sin"](_0x5bec97),this["pCylinderPos"][_0x171926+1]=this["fCylinderHeight"]/2-(_0x5b72ba+1)*_0x550382,this["pCylinderPos"][_0x171926+2]=-this["fCylinderRadius"]*Math["cos"](_0x5bec97),_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]==_0x227d8f||_0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_FLOOR"]==_0x227d8f?(_0x3eaecf=.5+(.1+.01*(_0x5b72ba+1))*Math["sin"](_0x5bec97),_0x341d06=.5+(.1+.01*(_0x5b72ba+1))*Math["cos"](_0x5bec97)):(_0x3eaecf=.5-(.5-.01*(_0x5b72ba+1))*Math["sin"](_0x5bec97),_0x341d06=.5+(.5-.01*(_0x5b72ba+1))*Math["cos"](_0x5bec97)),this["pCylinderTex"][_0xcad197++]=(2*_0x3eaecf*_0xd39898+1*_0x48cc79)/1,this["pCylinderTex"][_0xcad197++]=(2*_0x341d06*_0xd39898+_0x33b371*_0x2cf5ad)/_0x2cf5ad,_0x171926+=3,this["pCylinderPos"][_0x171926]=-this["fCylinderRadius"]*Math["sin"](_0x4b7133),this["pCylinderPos"][_0x171926+1]=this["fCylinderHeight"]/2-_0x5b72ba*_0x550382,this["pCylinderPos"][_0x171926+2]=-this["fCylinderRadius"]*Math["cos"](_0x4b7133),_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]==_0x227d8f||_0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_FLOOR"]==_0x227d8f?(_0x3eaecf=.5+(.1+.01*_0x5b72ba)*Math["sin"](_0x4b7133),_0x341d06=.5+(.1+.01*_0x5b72ba)*Math["cos"](_0x4b7133)):(_0x3eaecf=.5-(.5-.01*_0x5b72ba)*Math["sin"](_0x4b7133),_0x341d06=.5+(.5-.01*_0x5b72ba)*Math["cos"](_0x4b7133)),this["pCylinderTex"][_0xcad197++]=(2*_0x3eaecf*_0xd39898+1*_0x48cc79)/1,this["pCylinderTex"][_0xcad197++]=(2*_0x341d06*_0xd39898+_0x33b371*_0x2cf5ad)/_0x2cf5ad,_0x171926+=3,this["pCylinderPos"][_0x171926]=-this["fCylinderRadius"]*Math["sin"](_0x4b7133),this["pCylinderPos"][_0x171926+1]=this["fCylinderHeight"]/2-_0x5b72ba*_0x550382,this["pCylinderPos"][_0x171926+2]=-this["fCylinderRadius"]*Math["cos"](_0x4b7133),_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]==_0x227d8f||_0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_FLOOR"]==_0x227d8f?(_0x3eaecf=.5+(.1+.01*_0x5b72ba)*Math["sin"](_0x4b7133),_0x341d06=.5+(.1+.01*_0x5b72ba)*Math["cos"](_0x4b7133)):(_0x3eaecf=.5-(.5-.01*_0x5b72ba)*Math["sin"](_0x4b7133),_0x341d06=.5+(.5-.01*_0x5b72ba)*Math["cos"](_0x4b7133)),this["pCylinderTex"][_0xcad197++]=(2*_0x3eaecf*_0xd39898+1*_0x48cc79)/1,this["pCylinderTex"][_0xcad197++]=(2*_0x341d06*_0xd39898+_0x33b371*_0x2cf5ad)/_0x2cf5ad,_0x171926+=3,this["pCylinderPos"][_0x171926]=-this["fCylinderRadius"]*Math["sin"](_0x5bec97),this["pCylinderPos"][_0x171926+1]=this["fCylinderHeight"]/2-(_0x5b72ba+1)*_0x550382,this["pCylinderPos"][_0x171926+2]=-this["fCylinderRadius"]*Math["cos"](_0x5bec97),_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]==_0x227d8f||_0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_FLOOR"]==_0x227d8f?(_0x3eaecf=.5+(.1+.01*(_0x5b72ba+1))*Math["sin"](_0x5bec97),_0x341d06=.5+(.1+.01*(_0x5b72ba+1))*Math["cos"](_0x5bec97)):(_0x3eaecf=.5-(.5-.01*(_0x5b72ba+1))*Math["sin"](_0x5bec97),_0x341d06=.5+(.5-.01*(_0x5b72ba+1))*Math["cos"](_0x5bec97)),this["pCylinderTex"][_0xcad197++]=(2*_0x3eaecf*_0xd39898+1*_0x48cc79)/1,this["pCylinderTex"][_0xcad197++]=(2*_0x341d06*_0xd39898+_0x33b371*_0x2cf5ad)/_0x2cf5ad,_0x171926+=3,this["pCylinderPos"][_0x171926]=-this["fCylinderRadius"]*Math["sin"](_0x4b7133),this["pCylinderPos"][_0x171926+1]=this["fCylinderHeight"]/2-(_0x5b72ba+1)*_0x550382,this["pCylinderPos"][_0x171926+2]=-this["fCylinderRadius"]*Math["cos"](_0x4b7133),_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]==_0x227d8f||_0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_FLOOR"]==_0x227d8f?(_0x3eaecf=.5+(.1+.01*(_0x5b72ba+1))*Math["sin"](_0x4b7133),_0x341d06=.5+(.1+.01*(_0x5b72ba+1))*Math["cos"](_0x4b7133)):(_0x3eaecf=.5-(.5-.01*(_0x5b72ba+1))*Math["sin"](_0x4b7133),_0x341d06=.5+(.5-.01*(_0x5b72ba+1))*Math["cos"](_0x4b7133)),this["pCylinderTex"][_0xcad197++]=(2*_0x3eaecf*_0xd39898+1*_0x48cc79)/1,this["pCylinderTex"][_0xcad197++]=(2*_0x341d06*_0xd39898+_0x33b371*_0x2cf5ad)/_0x2cf5ad,_0x171926+=3}return this["nCylinderPosNum"]=_0x171926/3,this["nCylinderPosSize"]=3,this["nCylinderTexSize"]=2,_0x31e0fd}},{key:"_CreateArcSphere",value:function value(_0x5dc1ee,_0x444249,_0x1d057e,_0x520ea1,_0x5417fa){if(null!=this["pArcSpherePos"]||null!=this["pArcSphereTex"])return _0x27ff6b;if(_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]){if(_0x520ea1>0||_0x5417fa<1)return SR_ERR_PARAM}else{if(_0x5dc1ee!=_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"])return _0x1b8a99;if(_0x444249>0||_0x1d057e<1)return SR_ERR_PARAM}this["fImageWidth"]=1,this["fImageHeight"]=(_0x1d057e-_0x444249)/(_0x5417fa-_0x520ea1),this["fTexCenterX"]=(_0x444249+_0x1d057e)/2*this["fImageWidth"],this["fTexCenterY"]=(_0x520ea1+_0x5417fa)/2*this["fImageHeight"],this["fTexRadius"]=(_0x1d057e-_0x444249)/2*this["fImageWidth"];var _0x53562e=25;if(null==this["pArcSphereTex"]&&(this["pArcSphereTex"]=new Float32Array(14688),null==this["pArcSphereTex"]))return _0x55d077;if(null==this["pArcSpherePos"]&&(this["pArcSpherePos"]=new Float32Array(22032),null==this["pArcSpherePos"]))return _0x55d077;var _0x14c8e4=new Float32Array(64);if(null==_0x14c8e4)return _0x55d077;var _0x15da99=_0x31e0fd;if(_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]?_0x15da99=this["_ComputeLatitudeHorizontal"](_0x14c8e4,_0x53562e,40,1):_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]&&(_0x15da99=this["_ComputeLatitudeVertical"](_0x14c8e4,_0x53562e,40,1)),_0x31e0fd!=_0x15da99)return this["pArcSpherePos"]=null,this["pArcSphereTex"]=null,_0x15da99;this["fFirstLatitude"]=_0x14c8e4[12],this["fLastLatitude"]=_0x14c8e4[51];var _0x2185c4=0,_0x1de65e=0,_0x134029=new Float32Array(5);if(null==_0x134029)return this["pArcSpherePos"]=null,this["pArcSphereTex"]=null,_0x55d077;for(var _0x523b50=_0x2ab8a6/24,_0x44819a=-12;_0x44819a<12;++_0x44819a)for(var _0x145390=_0x44819a<0?-_0x44819a:_0x44819a,_0x32ff95=_0x44819a<0?_0x145390:_0x145390+1,_0x5e605a=_0x44819a<0?64-2*(_0x145390-1)-2:64-2*_0x145390-2,_0x43262d=0;_0x43262d<_0x5e605a;++_0x43262d,++_0x32ff95)_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]?this["_ComputeVertexAndTexturePosHorizontal"](1,1.5707963-_0x523b50*_0x44819a,_0x14c8e4[_0x32ff95],_0x134029):_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]&&this["_ComputeVertexAndTexturePosVertical"](1,1.5707963-_0x523b50*_0x44819a,_0x14c8e4[_0x32ff95],_0x134029),this["pArcSpherePos"][_0x2185c4]=_0x134029[0],this["pArcSpherePos"][_0x2185c4+1]=_0x134029[1],this["pArcSpherePos"][_0x2185c4+2]=_0x134029[2],this["pArcSphereTex"][_0x1de65e++]=_0x134029[3],this["pArcSphereTex"][_0x1de65e++]=_0x134029[4],_0x2185c4+=3,_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]?this["_ComputeVertexAndTexturePosHorizontal"](1,1.5707963-_0x523b50*(_0x44819a+1),_0x14c8e4[_0x32ff95],_0x134029):_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]&&this["_ComputeVertexAndTexturePosVertical"](1,1.5707963-_0x523b50*(_0x44819a+1),_0x14c8e4[_0x32ff95],_0x134029),this["pArcSpherePos"][_0x2185c4]=_0x134029[0],this["pArcSpherePos"][_0x2185c4+1]=_0x134029[1],this["pArcSpherePos"][_0x2185c4+2]=_0x134029[2],this["pArcSphereTex"][_0x1de65e++]=_0x134029[3],this["pArcSphereTex"][_0x1de65e++]=_0x134029[4],_0x2185c4+=3,_0x44819a>=0&&0==_0x43262d?_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]?this["_ComputeVertexAndTexturePosHorizontal"](1,1.5707963-_0x523b50*_0x44819a,_0x14c8e4[_0x32ff95-1],_0x134029):_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]&&this["_ComputeVertexAndTexturePosVertical"](1,1.5707963-_0x523b50*_0x44819a,_0x14c8e4[_0x32ff95-1],_0x134029):_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]?this["_ComputeVertexAndTexturePosHorizontal"](1,1.5707963-_0x523b50*(_0x44819a+1),_0x14c8e4[_0x32ff95-1],_0x134029):_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]&&this["_ComputeVertexAndTexturePosVertical"](1,1.5707963-_0x523b50*(_0x44819a+1),_0x14c8e4[_0x32ff95-1],_0x134029),this["pArcSpherePos"][_0x2185c4]=_0x134029[0],this["pArcSpherePos"][_0x2185c4+1]=_0x134029[1],this["pArcSpherePos"][_0x2185c4+2]=_0x134029[2],this["pArcSphereTex"][_0x1de65e++]=_0x134029[3],this["pArcSphereTex"][_0x1de65e++]=_0x134029[4],_0x2185c4+=3,_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]?this["_ComputeVertexAndTexturePosHorizontal"](1,1.5707963-_0x523b50*(_0x44819a+1),_0x14c8e4[_0x32ff95],_0x134029):_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]&&this["_ComputeVertexAndTexturePosVertical"](1,1.5707963-_0x523b50*(_0x44819a+1),_0x14c8e4[_0x32ff95],_0x134029),this["pArcSpherePos"][_0x2185c4]=_0x134029[0],this["pArcSpherePos"][_0x2185c4+1]=_0x134029[1],this["pArcSpherePos"][_0x2185c4+2]=_0x134029[2],this["pArcSphereTex"][_0x1de65e++]=_0x134029[3],this["pArcSphereTex"][_0x1de65e++]=_0x134029[4],_0x2185c4+=3,_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]?this["_ComputeVertexAndTexturePosHorizontal"](1,1.5707963-_0x523b50*_0x44819a,_0x14c8e4[_0x32ff95],_0x134029):_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]&&this["_ComputeVertexAndTexturePosVertical"](1,1.5707963-_0x523b50*_0x44819a,_0x14c8e4[_0x32ff95],_0x134029),this["pArcSpherePos"][_0x2185c4]=_0x134029[0],this["pArcSpherePos"][_0x2185c4+1]=_0x134029[1],this["pArcSpherePos"][_0x2185c4+2]=_0x134029[2],this["pArcSphereTex"][_0x1de65e++]=_0x134029[3],this["pArcSphereTex"][_0x1de65e++]=_0x134029[4],_0x2185c4+=3,_0x44819a<0&&_0x43262d==_0x5e605a-1?_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]?this["_ComputeVertexAndTexturePosHorizontal"](1,1.5707963-_0x523b50*(_0x44819a+1),_0x14c8e4[_0x32ff95+1],_0x134029):_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]&&this["_ComputeVertexAndTexturePosVertical"](1,1.5707963-_0x523b50*(_0x44819a+1),_0x14c8e4[_0x32ff95+1],_0x134029):_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]?this["_ComputeVertexAndTexturePosHorizontal"](1,1.5707963-_0x523b50*_0x44819a,_0x14c8e4[_0x32ff95+1],_0x134029):_0x5dc1ee==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]&&this["_ComputeVertexAndTexturePosVertical"](1,1.5707963-_0x523b50*_0x44819a,_0x14c8e4[_0x32ff95+1],_0x134029),this["pArcSpherePos"][_0x2185c4]=_0x134029[0],this["pArcSpherePos"][_0x2185c4+1]=_0x134029[1],this["pArcSpherePos"][_0x2185c4+2]=_0x134029[2],this["pArcSphereTex"][_0x1de65e++]=_0x134029[3],this["pArcSphereTex"][_0x1de65e++]=_0x134029[4],_0x2185c4+=3;return this["nArcSpherePosNum"]=_0x2185c4/3,this["nArcSpherePosSize"]=3,this["nArcSphereTexSize"]=2,_0x14c8e4=null,_0x134029=null,_0x31e0fd}},{key:"_ComputeIntersectionOfPlaneAndLongtitude",value:function value(_0x391a08,_0xd9151a,_0x215d7d){if(null==_0x391a08)return _0x592c4b;var _0x335084,_0x13cf0c=_0x391a08[1]*_0x215d7d,_0x354c0d=_0x391a08[2]*_0x215d7d*Math["sin"](_0xd9151a),_0x2953ad=-_0x391a08[3],_0x2d3b77=0;if(_0x391a08[1]>0){var _0x3c6552=_0x13cf0c*_0x13cf0c*_0x2953ad*_0x2953ad-(_0x13cf0c*_0x13cf0c+_0x354c0d*_0x354c0d)*(_0x2953ad*_0x2953ad-_0x354c0d*_0x354c0d);_0x2d3b77=(-_0x13cf0c*_0x2953ad-Math["sqrt"](_0x3c6552))/(_0x13cf0c*_0x13cf0c+_0x354c0d*_0x354c0d),_0x3c6552=_0x354c0d*_0x354c0d*_0x2953ad*_0x2953ad-(_0x13cf0c*_0x13cf0c+_0x354c0d*_0x354c0d)*(_0x2953ad*_0x2953ad-_0x13cf0c*_0x13cf0c)}if(_0x391a08[1]<0){var _0x30c1e3=_0x13cf0c*_0x13cf0c*_0x2953ad*_0x2953ad-(_0x13cf0c*_0x13cf0c+_0x354c0d*_0x354c0d)*(_0x2953ad*_0x2953ad-_0x354c0d*_0x354c0d);_0x2d3b77=(-_0x13cf0c*_0x2953ad+Math["sqrt"](_0x30c1e3))/(_0x13cf0c*_0x13cf0c+_0x354c0d*_0x354c0d),_0x30c1e3=_0x354c0d*_0x354c0d*_0x2953ad*_0x2953ad-(_0x13cf0c*_0x13cf0c+_0x354c0d*_0x354c0d)*(_0x2953ad*_0x2953ad-_0x13cf0c*_0x13cf0c)}return _0x335084=-_0x215d7d*_0x2d3b77,Math["asin"](_0x335084/_0x215d7d)}},{key:"_ComputeLatitudeHorizontal",value:function value(_0x4b8207,_0x401da0,_0x21248a,_0x20de00){if(null==_0x4b8207)return _0x592c4b;var _0x3951f8=0,_0x52a202=(this["fTexCenterY"],_0x2ab8a6/(_0x401da0-1)),_0xa34f19=_0x2ab8a6*this["fTexCenterY"]/(2*this["fTexRadius"]),_0xf51a79=Math["asin"](this["fTexCenterY"]/this["fTexRadius"]),_0x29ec00=Math["atan"](Math["cos"](_0xa34f19)/(Math["sin"](_0xa34f19)-Math["sin"](_0xf51a79))),_0x578aa6=new Float32Array(4);_0x578aa6[0]=0,_0x578aa6[1]=Math["sin"](_0x29ec00),_0x578aa6[2]=Math["cos"](_0x29ec00),_0x578aa6[3]=-_0x20de00*Math["sin"](_0x29ec00)*Math["sin"](_0xf51a79),_0x4b8207[_0x3951f8++]=_0xa34f19;for(var _0x109800=1;_0x109800<=(_0x401da0-3)/2;++_0x109800){var _0x1d1669=this["_ComputeIntersectionOfPlaneAndLongtitude"](_0x578aa6,1.5707963-_0x52a202*_0x109800,_0x20de00);_0x4b8207[_0x3951f8++]=_0x1d1669}for(var _0xfc4ee6=-Math["asin"]((this["fImageHeight"]-this["fTexCenterY"])/this["fTexRadius"]),_0x2b69c4=_0xf51a79,_0x183f00=(_0x2b69c4-_0xfc4ee6)/(_0x21248a-1),_0x29780e=0;_0x29780e<_0x21248a;++_0x29780e)_0x4b8207[_0x3951f8++]=_0x2b69c4-_0x29780e*_0x183f00;var _0x42e363=_0xfc4ee6,_0x331e37=_0x2ab8a6*(this["fTexCenterY"]-this["fImageHeight"])/(2*this["fTexRadius"]);_0x29ec00=Math["atan"](Math["cos"](_0x331e37)/(Math["sin"](_0x42e363)-Math["sin"](_0x331e37)));var _0x361ef0=new Float32Array(4);_0x361ef0[0]=0,_0x361ef0[1]=-Math["sin"](_0x29ec00),_0x361ef0[2]=Math["cos"](_0x29ec00),_0x361ef0[3]=_0x20de00*Math["sin"](_0x29ec00)*Math["sin"](_0x42e363);for(var _0x598c19=1;_0x598c19<=(_0x401da0-3)/2;++_0x598c19){var _0x5f1473=this["_ComputeIntersectionOfPlaneAndLongtitude"](_0x361ef0,_0x52a202*_0x598c19,_0x20de00);_0x4b8207[_0x3951f8++]=_0x5f1473}return _0x4b8207[_0x3951f8++]=_0x331e37,_0x578aa6=null,_0x361ef0=null,_0x31e0fd}},{key:"_ComputeVertexAndTexturePosHorizontal",value:function value(_0x163b33,_0x5b3d31,_0x3b2683,_0x1f838b){if(null==_0x1f838b)return _0x592c4b;_0x1f838b[2]=-_0x163b33*Math["cos"](_0x3b2683)*Math["sin"](_0x5b3d31),_0x1f838b[0]=_0x163b33*Math["cos"](_0x3b2683)*Math["cos"](_0x5b3d31),_0x1f838b[1]=_0x163b33*Math["sin"](_0x3b2683);var _0x135980,_0x6f47ae=-Math["asin"](-_0x1f838b[2]/_0x163b33)/_0x2ab8a6;_0x135980=_0x3b2683>=0?Math["acos"](_0x1f838b[0]/Math["sqrt"](_0x1f838b[0]*_0x1f838b[0]+_0x1f838b[1]*_0x1f838b[1])):6.2831852-Math["acos"](_0x1f838b[0]/Math["sqrt"](_0x1f838b[0]*_0x1f838b[0]+_0x1f838b[1]*_0x1f838b[1]));var _0x439fbe=this["fTexCenterX"]-this["fTexRadius"],_0x108c6d=this["fTexRadius"]-this["fTexCenterY"];return _0x1f838b[3]=(Math["cos"](_0x135980)*this["fTexRadius"]*(1+2*_0x6f47ae)+this["fTexRadius"]+_0x439fbe)/this["fImageWidth"],_0x1f838b[4]=(Math["sin"](_0x135980)*this["fTexRadius"]*(-1-2*_0x6f47ae)+this["fTexRadius"]-_0x108c6d)/this["fImageHeight"],_0x31e0fd}},{key:"_ComputeLatitudeVertical",value:function value(_0x147062,_0x470447,_0x57da2d,_0x10ce6b){if(null==_0x147062)return SR_ERR_PARAM;var _0x6a768e=0,_0x53473f=_0x2ab8a6/(_0x470447-1),_0x5bb3a2=_0x2ab8a6*this["fTexCenterX"]/(2*this["fTexRadius"]),_0x3bd7d1=Math["asin"](this["fTexCenterX"]/this["fTexRadius"]),_0x487114=Math["atan"](Math["cos"](_0x5bb3a2)/(Math["sin"](_0x5bb3a2)-Math["sin"](_0x3bd7d1))),_0x397938=new Float32Array(4);_0x397938[0]=0,_0x397938[1]=Math["sin"](_0x487114),_0x397938[2]=Math["cos"](_0x487114),_0x397938[3]=-_0x10ce6b*Math["sin"](_0x487114)*Math["sin"](_0x3bd7d1),_0x147062[_0x6a768e++]=_0x5bb3a2;for(var _0x196e5f=1;_0x196e5f<=(_0x470447-3)/2;++_0x196e5f){var _0x289f69=this["_ComputeIntersectionOfPlaneAndLongtitude"](_0x397938,1.5707963-_0x53473f*_0x196e5f,_0x10ce6b);_0x147062[_0x6a768e++]=_0x289f69}for(var _0x52dae8=-Math["asin"]((this["fImageWidth"]-this["fTexCenterX"])/this["fTexRadius"]),_0x3d5618=_0x3bd7d1,_0x73ff37=(_0x3d5618-_0x52dae8)/(_0x57da2d-1),_0x5e8921=0;_0x5e8921<_0x57da2d;++_0x5e8921)_0x147062[_0x6a768e++]=_0x3d5618-_0x5e8921*_0x73ff37;var _0xfce645=_0x52dae8,_0x1c8d75=_0x2ab8a6*(this["fTexCenterX"]-this["fImageWidth"])/(2*this["fTexRadius"]);_0x487114=Math["atan"](Math["cos"](_0x1c8d75)/(Math["sin"](_0xfce645)-Math["sin"](_0x1c8d75)));var _0x4ae7e2=new Float32Array(4);_0x4ae7e2[0]=0,_0x4ae7e2[1]=-Math["sin"](_0x487114),_0x4ae7e2[2]=Math["cos"](_0x487114),_0x4ae7e2[3]=_0x10ce6b*Math["sin"](_0x487114)*Math["sin"](_0xfce645);for(var _0x451196=1;_0x451196<=(_0x470447-3)/2;++_0x451196){var _0xdf143e=this["_ComputeIntersectionOfPlaneAndLongtitude"](_0x4ae7e2,_0x53473f*_0x451196,_0x10ce6b);_0x147062[_0x6a768e++]=_0xdf143e}return _0x147062[_0x6a768e++]=_0x1c8d75,_0x397938=null,_0x4ae7e2=null,_0x31e0fd}},{key:"_ComputeVertexAndTexturePosVertical",value:function value(_0x5ac8f0,_0x45d16e,_0x470962,_0x3732bb){if(null==_0x3732bb)return SR_ERR_PARAM;_0x3732bb[2]=-_0x5ac8f0*Math["cos"](_0x470962)*Math["sin"](_0x45d16e),_0x3732bb[1]=_0x5ac8f0*Math["cos"](_0x470962)*Math["cos"](_0x45d16e),_0x3732bb[0]=-_0x5ac8f0*Math["sin"](_0x470962);var _0x5a877e,_0x227335=-Math["asin"](-_0x3732bb[2]/_0x5ac8f0)/_0x2ab8a6;_0x5a877e=_0x45d16e<=1.5707963?Math["acos"](_0x3732bb[0]/Math["sqrt"](_0x3732bb[0]*_0x3732bb[0]+_0x3732bb[1]*_0x3732bb[1])):6.2831852-Math["acos"](_0x3732bb[0]/Math["sqrt"](_0x3732bb[0]*_0x3732bb[0]+_0x3732bb[1]*_0x3732bb[1]));var _0x2f56d8=this["fTexCenterX"]-this["fTexRadius"],_0x3991a1=this["fTexRadius"]-this["fTexCenterY"];return _0x3732bb[3]=(Math["cos"](_0x5a877e)*this["fTexRadius"]*(1+2*_0x227335)+this["fTexRadius"]+_0x2f56d8)/this["fImageWidth"],_0x3732bb[4]=(Math["sin"](_0x5a877e)*this["fTexRadius"]*(-1-2*_0x227335)+this["fTexRadius"]-_0x3991a1)/this["fImageHeight"],_0x31e0fd}},{key:"InitCamera",value:function value(_0x35e8ab){if(null!=this["pCamera"])return SR_ERR_CALL_ORDER;switch(_0x35e8ab){case _0x2bffb5["SR_DE_NULL"]:case _0x2bffb5["SR_DE_FISH_ORIGINAL"]:case _0x2bffb5["SR_DE_FISH_PTZ_CEILING"]:case _0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]:case _0x2bffb5["SR_DE_FISH_PTZ_WALL"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:return _0x31e0fd;case _0x2bffb5["SR_DE_FISH_SEMISPHERE"]:if(this["pCamera"]=new _0x37964e,null==this["pCamera"])return _0x55d077;this["pCamera"]["SetFov"](_0x5ce356),this["pCamera"]["SetNear"](_0x19a48f),this["pCamera"]["SetFar"](_0x47cc10),this["fRotateX"]=1.57,this["pCamera"]["SetPitch"](3.14-this["fRotateX"]),this["fScale"]=3,this["pCamera"]["SetScale"](this["fScale"]);break;case _0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]:if(this["pCamera"]=new _0x37964e,null==this["pCamera"])return _0x55d077;this["pCamera"]["SetFov"](_0x5ce356),this["pCamera"]["SetNear"](_0x19a48f),this["pCamera"]["SetFar"](_0x47cc10),this["fRotateX"]=.785,this["pCamera"]["SetPitch"](-this["fRotateX"]),this["fScale"]=6,this["pCamera"]["SetScale"](this["fScale"]);break;case _0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_CEILING"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_FLOOR"]:if(this["pCamera"]=new _0x37964e,null==this["pCamera"])return _0x55d077;this["pCamera"]["SetOrtho"](!0),this["pCamera"]["SetNear"](_0x19a48f),this["pCamera"]["SetFar"](_0x47cc10),this["fScale"]=3,this["pCamera"]["SetScale"](this["fScale"]);break;case _0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]:case _0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]:if(this["pCamera"]=new _0x37964e,null==this["pCamera"])return _0x55d077;this["pCamera"]["SetFov"](_0x5ce356),this["pCamera"]["SetNear"](_0x19a48f),this["pCamera"]["SetFar"](_0x47cc10),this["fScale"]=2,this["pCamera"]["SetScale"](this["fScale"]),_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]==_0x35e8ab?(this["fRotateLimitX"]=_0x541632,this["fRotateLimitY"]=_0x3e6e92):(this["fRotateLimitX"]=_0x4be0f9,this["fRotateLimitY"]=_0x49b105);break;default:return _0x1b8a99}return _0x31e0fd}},{key:"SR_SetViewParam",value:function value(_0x332352,_0xc82cec){if(!this["b3DPort"])return _0x1b8a99;switch(_0x332352){case _0x5dbe7b:if((this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]||this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"])&&(_0xc82cec>this["fRotateLimitX"]||_0xc82cec<-this["fRotateLimitX"]))return _0x592c4b;this["fRotateX"]=_0xc82cec;break;case _0x117086:if((this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]||this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"])&&(_0xc82cec>this["fRotateLimitY"]||_0xc82cec<-this["fRotateLimitY"]))return _0x592c4b;this["fRotateY"]=_0xc82cec;break;case _0x291b83:if(this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_SEMISPHERE"]){if(_0xc82cec<-.8||_0xc82cec>900)return _0x592c4b}else{if(this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]||this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]){if(_0xc82cec<0||_0xc82cec>900)return _0x592c4b}else{if(this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]||this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]){if(_0xc82cec<-.3||_0xc82cec>5)return _0x592c4b;this["_ComputeRotateLimits"]()}}}this["fScale"]=_0xc82cec;break;default:return _0x1b8a99}return _0x31e0fd}},{key:"SR_GetViewParam",value:function value(_0x585a31,_0x33d4dc){if(!this["b3DPort"])return _0x27ff6b;var _0x31c7d9=0;switch(_0x585a31){case _0x5dbe7b:_0x31c7d9=this["fRotateX"];break;case _0x117086:_0x31c7d9=this["fRotateY"];break;case _0x291b83:_0x31c7d9=this["fScale"];break;default:return _0x1b8a99}return _0x33d4dc["fValue"]=_0x31c7d9,_0x31e0fd}},{key:"SR_SetCallBack",value:function value(_0x374f81,_0x49565d,_0x336aae){switch(_0x336aae){case _0x1d6f4d:this["pfuncCBIn"]=_0x374f81,this["pUserIn"]=_0x49565d;break;case _0x67d97f:this["pfuncCBOut"]=_0x374f81,this["pUserOut"]=_0x49565d;break;default:return _0x1b8a99}return _0x31e0fd}},{key:"SR_SetRenderState",value:function value(_0x1d3609,_0x165d54){switch(_0x1d3609){case _0x403a70:if(this["b3DPort"])return _0x1b8a99;break;case _0x41da8c:if(!this["b3DPort"])return _0x1b8a99;Math["abs"](_0x165d54-0)<_0x2fc9a7?this["bCullBack"]=!1:this["bCullBack"]=!0;break;default:return _0x1b8a99}return _0x31e0fd}},{key:"SR_SetPTZColor",value:function value(_0x39b5b6,_0x49c5aa){return null==this["pFishParamManager"]?_0x27ff6b:this["pFishParamManager"]["SetPTZColor"](_0x39b5b6,_0x49c5aa)}},{key:"SR_GetPTZColor",value:function value(_0x5965d8,_0x8c5fdf){return null==this["pFishParamManager"]?_0x27ff6b:this["pFishParamManager"]["GetPTZColor"](_0x5965d8,_0x8c5fdf)}},{key:"SR_SetPTZPort",value:function value(_0x2c4bd3){return null==this["pFishParamManager"]?_0x27ff6b:this["pFishParamManager"]["SetPTZPort"](_0x2c4bd3)}},{key:"SR_GetPTZPort",value:function value(_0x5578ec,_0x1ece7c,_0x2ac684){return null==this["pFishParamManager"]?_0x27ff6b:null==_0x2ac684?_0x592c4b:this["pFishParamManager"]["GetPTZPort"](_0x5578ec,_0x1ece7c,_0x2ac684)}},{key:"SR_GetCaptureSize",value:function value(_0xb40998){if(null==_0xb40998)return _0x592c4b;if(null==this["ctx"])return _0x27ff6b;if(null==_0xb40998["nWidth"]||null==_0xb40998["nWidth"]||null==_0xb40998["nHeight"]||null==_0xb40998["nHeight"])return _0x592c4b;var _0xf1bc80=0,_0x246b02=0;if(0==_0xb40998["nWidth"]&&0==_0xb40998["nHeight"])switch(this["enDisplayEffect"]){case _0x2bffb5["SR_DE_FISH_PTZ_WALL"]:case _0x2bffb5["SR_DE_FISH_PTZ_CEILING"]:case _0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]:_0xf1bc80=Math["round"](5*this["frameDisplayHeight"]/8),_0x246b02=Math["round"](3*_0xf1bc80/4);break;case _0x2bffb5["SR_DE_NULL"]:_0xf1bc80=Math["round"]((this["fSrcUseRight"]-this["fSrcUseLeft"])*this["frameDisplayWidth"]),_0x246b02=Math["round"]((this["fSrcUseBottom"]-this["fSrcUseTop"])*this["frameDisplayHeight"]);break;case _0x2bffb5["SR_DE_FISH_ORIGINAL"]:case _0x2bffb5["SR_DE_FISH_SEMISPHERE"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]:case _0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]:case _0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]:_0xf1bc80=Math["round"](this["frameDisplayWidth"]),_0x246b02=Math["round"](this["frameDisplayHeight"]);break;case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]:this["frameDisplayHeight"]>=2048?(_0xf1bc80=6144,_0x246b02=864):this["frameDisplayHeight"]>=1536&&2048>this["frameDisplayHeight"]?(_0xf1bc80=4096,_0x246b02=576):(_0xf1bc80=Math["round"](3.14*this["frameDisplayHeight"]/1.6),_0x246b02=Math["round"](9*this["frameDisplayWidth"]/16),_0xf1bc80=Math["round"](2*_0xf1bc80),_0x246b02=Math["round"](_0x246b02/2));break;case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]:this["frameDisplayHeight"]>=3072?(_0xf1bc80=4096,_0x246b02=2304):this["frameDisplayHeight"]>=2048&&3072>this["frameDisplayHeight"]?(_0xf1bc80=3072,_0x246b02=1728):this["frameDisplayHeight"]>=1536&&2048>this["frameDisplayHeight"]?(_0xf1bc80=2048,_0x246b02=1152):(_0xf1bc80=Math["round"](3.14*this["frameDisplayHeight"]/1.6),_0x246b02=Math["round"](9*_0xf1bc80/16));break;case _0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:_0xf1bc80=Math["round"](this["frameDisplayHeight"]),_0x246b02=Math["round"](9*_0xf1bc80/16);break;default:return _0x592c4b}else _0xf1bc80=Math["round"](_0xb40998["nWidth"]),_0x246b02=Math["round"](_0xb40998["nHeight"]);return _0xf1bc80<16||_0x246b02<16?_0x592c4b:(this["nCaptureWidth"]=4*Math["round"](_0xf1bc80/4),this["nCaptureHeight"]=Math["round"](_0x246b02),_0xb40998["nWidth"]=this["nCaptureWidth"],_0xb40998["nHeight"]=this["nCaptureHeight"],_0xb40998["nBufferLen"]=this["nCaptureWidth"]*this["nCaptureHeight"]*4,_0x31e0fd)}},{key:"SR_CaptureScreen",value:function value(_0x4a5590){var _0x38cf4b=_0x31e0fd;if(_0x38cf4b=this["_BeginCapture"](),_0x31e0fd!=_0x38cf4b)return _0x38cf4b;if(0==this["videoShaderProgram"]||0==this["vertexPosBuffer"]||0==this["texturePosBuffer"])return _0x27ff6b;this["ctx"]["useProgram"](this["videoShaderProgram"]),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["vertexPosBuffer"]);var _0x17c047=this["ctx"]["getAttribLocation"](this["videoShaderProgram"],"xy");if(_0x17c047<0)return _0x3e8d23;this["ctx"]["vertexAttribPointer"](_0x17c047,3,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["enableVertexAttribArray"](_0x17c047),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],this["texturePosBuffer"]);var _0x4a4fe1=this["ctx"]["getAttribLocation"](this["videoShaderProgram"],"uv");if(_0x4a4fe1<0)return _0x3e8d23;this["ctx"]["vertexAttribPointer"](_0x4a4fe1,2,this["ctx"]["FLOAT"],!1,0,0),this["ctx"]["enableVertexAttribArray"](_0x4a4fe1),this["ctx"]["bindBuffer"](this["ctx"]["ARRAY_BUFFER"],null);var _0x39c2b3=this["enDisplayEffect"],_0x26d334=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"bCapture");if(_0x26d334<=0)return _0x3e8d23;switch(this["ctx"]["uniform1i"](_0x26d334,1),_0x39c2b3){case _0x2bffb5["SR_DE_NULL"]:break;case _0x2bffb5["SR_DE_FISH_ORIGINAL"]:case _0x2bffb5["SR_DE_FISH_PTZ_CEILING"]:case _0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]:case _0x2bffb5["SR_DE_FISH_PTZ_WALL"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:if(null==this["pFishParamManager"])return _0x27ff6b;var _0x44b6fb={};if(_0x38cf4b=this["pFishParamManager"]["GetRenderParam"](this["nFECPort"],_0x44b6fb),_0x31e0fd!=_0x38cf4b)return _0x38cf4b;if(_0x2bffb5["SR_DE_FISH_ORIGINAL"]==_0x39c2b3){var _0xbb470=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"bBlack");if(_0xbb470<=0)return _0x3e8d23;this["ctx"]["uniform1i"](_0xbb470,_0x44b6fb["bBlack"]);var _0x28ca67=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"bCut");if(_0x28ca67<=0)return _0x3e8d23;this["ctx"]["uniform1i"](_0x28ca67,_0x44b6fb["bCut"])}if(_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]==_0x39c2b3||_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]==_0x39c2b3||_0x2bffb5["SR_DE_FISH_PTZ_WALL"]==_0x39c2b3){var _0x3aa7ee=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fHAngleCos");if(_0x3aa7ee<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x3aa7ee,_0x44b6fb["fCosH"]);var _0x2ec426=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fHAngleSin");if(_0x2ec426<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x2ec426,_0x44b6fb["fSinH"]);var _0x4b26d6=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fVAngleCos");if(_0x4b26d6<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x4b26d6,_0x44b6fb["fCosV"]);var _0x30506d=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fVAngleSin");if(_0x30506d<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x30506d,_0x44b6fb["fSinV"]);var _0x54d3b5=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fZoom");if(_0x54d3b5<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x54d3b5,_0x44b6fb["fZoom"])}if(_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]==_0x39c2b3||_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]==_0x39c2b3||_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]==_0x39c2b3||_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]==_0x39c2b3){var _0x5ee2d5=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fAngle");if(_0x5ee2d5<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x5ee2d5,_0x44b6fb["fAngle"])}var _0x1dee4c=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fRX1");if(_0x1dee4c<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x1dee4c,_0x44b6fb["fRXLeft"]);var _0x1cf48d=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fRX2");if(_0x1cf48d<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x1cf48d,_0x44b6fb["fRXRight"]);var _0x42b5d2=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fRY1");if(_0x42b5d2<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x42b5d2,_0x44b6fb["fRYTop"]);var _0x1b09ef=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fRY2");if(_0x1b09ef<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x1b09ef,_0x44b6fb["fRYBottom"]);break;case _0x2bffb5["SR_DE_FISH_SEMISPHERE"]:this["pCamera"]["SetScale"](this["fScale"]),this["pCamera"]["SetPitch"](3.14-this["fRotateX"]),this["pCamera"]["SetYaw"](-this["fRotateY"]),this["pCamera"]["UpdateCamera"](this["canvas"]["width"],this["canvas"]["height"]);var _0x3bf6c9=this["pCamera"]["GetView"](),_0x24f156=this["pCamera"]["GetProj"](),_0x41b29d=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"matView");if(_0x41b29d<=0)return _0x3e8d23;this["ctx"]["uniformMatrix4fv"](_0x41b29d,!1,_0x3bf6c9);var _0x259f92=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"matProj");if(_0x259f92<=0)return _0x3e8d23;this["ctx"]["uniformMatrix4fv"](_0x259f92,!1,_0x24f156);break;case _0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]:case _0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]:case _0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]:this["pCamera"]["SetScale"](this["fScale"]),this["pCamera"]["SetPitch"](-this["fRotateX"]),this["pCamera"]["SetYaw"](-this["fRotateY"]),this["pCamera"]["UpdateCamera"](this["canvas"]["width"],this["canvas"]["height"]);var _0x1de426=this["pCamera"]["GetView"](),_0x5d0fd5=this["pCamera"]["GetProj"](),_0x5e13b2=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"matView");if(_0x5e13b2<=0)return _0x3e8d23;this["ctx"]["uniformMatrix4fv"](_0x5e13b2,!1,_0x1de426);var _0x2cf55c=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"matProj");if(_0x2cf55c<=0)return _0x3e8d23;this["ctx"]["uniformMatrix4fv"](_0x2cf55c,!1,_0x5d0fd5);break;default:return _0x1b8a99}if(this["nCaptureWidth"]<=0||this["nCaptureHeight"]<=0)return _0x1482fd;if(this["ctx"]["viewport"](0,0,this["nCaptureWidth"],this["nCaptureHeight"]),this["ctx"]["clearColor"](0,0,0,1),this["ctx"]["clear"](this["ctx"]["COLOR_BUFFER_BIT"]|this["ctx"]["DEPTH_BUFFER_BIT"]),this["b3DPort"]&&(this["ctx"]["enable"](this["ctx"]["DEPTH_TEST"]),this["ctx"]["depthFunc"](this["ctx"]["LESS"]),this["ctx"]["depthMask"](!0),1==this["bCullBack"]?this["ctx"]["enable"](this["ctx"]["CULL_FACE"]):this["ctx"]["disable"](this["ctx"]["CULL_FACE"])),this["enPixelFormat"]==_0x44487e?this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nSurfaceTexture"][0]):(this["enPixelFormat"]==_0x154578||this["enPixelFormat"]==_0x5a2deb)&&(this["ctx"]["activeTexture"](this["ctx"]["TEXTURE0"]),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nSurfaceTexture"][0]),this["ctx"]["activeTexture"](this["ctx"]["TEXTURE1"]),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nSurfaceTexture"][1]),this["ctx"]["activeTexture"](this["ctx"]["TEXTURE2"]),this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nSurfaceTexture"][2])),this["onlySupportedWebGL1"]||this["ctx"]["clearBufferfi"](this["ctx"]["DEPTH_STENCIL"],0,1,0),0==this["b3DPort"])this["ctx"]["drawArrays"](this["ctx"]["TRIANGLE_FAN"],0,4);else{if(this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_SEMISPHERE"]){if(this["nSemiSpherePosNum"]<=0)return _0x27ff6b;this["ctx"]["drawArrays"](this["ctx"]["TRIANGLES"],0,this["nSemiSpherePosNum"])}else{if(this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]||this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]){if(this["nCylinderPosNum"]<=0)return _0x27ff6b;this["ctx"]["drawArrays"](this["ctx"]["TRIANGLES"],0,this["nCylinderPosNum"])}else{if(this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]||this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]){if(this["nArcSpherePosNum"]<=0)return _0x27ff6b;this["ctx"]["drawArrays"](this["ctx"]["TRIANGLES"],0,this["nArcSpherePosNum"])}}}}return this["ctx"]["useProgram"](null),null!=this["pfuncCBIn"]&&this["pfuncCBIn"](this["pUserIn"]),null!=this["pfuncCBOut"]&&this["pfuncCBOut"](this["pUserOut"]),_0x38cf4b=this["_EndCapture"](_0x4a5590),_0x31e0fd!=_0x38cf4b?_0x38cf4b:_0x31e0fd}},{key:"SR_SetImagePostProcess",value:function value(_0x3c60f4,_0x5a1580){if(null==this["ctx"])return _0x27ff6b;if(_0x5bad3d==_0x3c60f4||_0x4f0981==_0x3c60f4){if(0-_0x5a1580>_0x2fc9a7||_0x5a1580-1>_0x2fc9a7)return _0x592c4b}else{if((_0x2d02d4==_0x3c60f4||_0x53ebaf==_0x3c60f4||_0x596add==_0x3c60f4)&&(-1-_0x5a1580>_0x2fc9a7||_0x5a1580-1>_0x2fc9a7))return _0x592c4b}switch(_0x3c60f4){case _0x2d02d4:this["fBrightness"]=_0x5a1580;break;case _0x4f0981:this["fHue"]=_0x5a1580;break;case _0x53ebaf:this["fSaturation"]=_0x5a1580;break;case _0x596add:this["fContrast"]=_0x5a1580;break;case _0x5bad3d:this["fSharpness"]=_0x5a1580;break;default:return _0x1b8a99}return Math["abs"](this["fBrightness"]-0)<_0x2fc9a7&&Math["abs"](this["fHue"]-0)<_0x2fc9a7&&Math["abs"](this["fSaturation"]-0)<_0x2fc9a7&&Math["abs"](this["fContrast"]-0)<_0x2fc9a7&&Math["abs"](this["fSharpness"]-0)<_0x2fc9a7?this["nPostProc"]=0:this["nPostProc"]=1,_0x31e0fd}},{key:"_BeginCapture",value:function value(){var _0x36651d=_0x31e0fd;return 0==this["bCaptureResInit"]&&(_0x36651d=this["_InitRenderTarget"](this["nCaptureWidth"],this["nCaptureHeight"],!1,!0),_0x31e0fd!=_0x36651d)?_0x36651d:(_0x36651d=this["_Resize"](this["nCaptureWidth"],this["nCaptureHeight"],!1,!0),_0x31e0fd!=_0x36651d?_0x36651d:(this["ctx"]["bindFramebuffer"](this["ctx"]["FRAMEBUFFER"],this["nCaptureFBO"]),this["bIsCapturing"]=!0,_0x31e0fd))}},{key:"_InitRenderTarget",value:function value(_0xa2c294,_0x33afe0,_0x1ad0c4,_0x8dd3dc){if(0!=this["nCaptureRTTex"]||0!=this["nCaptureFBO"])return _0x27ff6b;if(_0xa2c294<=0||_0x33afe0<=0)return _0x592c4b;if(this["nCaptureRTTex"]=this["ctx"]["createTexture"](),this["nCaptureRTTex"]<=0)return _0x3e8d23;if(this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nCaptureRTTex"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MAG_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MIN_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_S"],this["ctx"]["CLAMP_TO_EDGE"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_T"],this["ctx"]["CLAMP_TO_EDGE"]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["RGBA"],_0xa2c294,_0x33afe0,0,this["ctx"]["RGBA"],this["ctx"]["UNSIGNED_BYTE"],null),0==this["nCaptureFBO"]&&(this["nCaptureFBO"]=this["ctx"]["createFramebuffer"](),this["nCaptureFBO"]<=0))return _0x3e8d23;if(this["ctx"]["bindFramebuffer"](this["ctx"]["FRAMEBUFFER"],this["nCaptureFBO"]),this["ctx"]["framebufferTexture2D"](this["ctx"]["FRAMEBUFFER"],this["ctx"]["COLOR_ATTACHMENT0"],this["ctx"]["TEXTURE_2D"],this["nCaptureRTTex"],0),1==_0x8dd3dc&&0==this["nCaptureDepthbuffer"]){if(this["nCaptureDepthbuffer"]=this["ctx"]["createRenderbuffer"](),this["nCaptureDepthbuffer"]<=0)return _0x3e8d23;this["ctx"]["bindRenderbuffer"](this["ctx"]["RENDERBUFFER"],this["nCaptureDepthbuffer"]),this["ctx"]["renderbufferStorage"](this["ctx"]["RENDERBUFFER"],this["ctx"]["DEPTH_COMPONENT16"],_0xa2c294,_0x33afe0),this["ctx"]["framebufferRenderbuffer"](this["ctx"]["FRAMEBUFFER"],this["ctx"]["DEPTH_ATTACHMENT"],this["ctx"]["RENDERBUFFER"],this["nCaptureDepthbuffer"])}return this["ctx"]["bindFramebuffer"](this["ctx"]["FRAMEBUFFER"],null),this["nCaptureFBOWidth"]=_0xa2c294,this["nCaptureFBOHeight"]=_0x33afe0,this["bCaptureResInit"]=!0,_0x31e0fd}},{key:"_Resize",value:function value(_0x39197a,_0x58f04a,_0x5e9ce9,_0x8eb9fb){if(this["nCaptureFBOWidth"]!=_0x39197a||this["nCaptureFBOHeight"]!=_0x58f04a){if(this["nCaptureFBOWidth"]=_0x39197a,this["nCaptureFBOHeight"]=_0x58f04a,0!=this["nCaptureRTTex"]&&(this["ctx"]["deleteTexture"](this["nCaptureRTTex"]),this["nCaptureRTTex"]=0),0!=this["nCaptureDepthbuffer"]&&(this["ctx"]["deleteRenderbuffer"](this["nCaptureDepthbuffer"]),this["nCaptureDepthbuffer"]=0),0==this["nCaptureRTTex"]&&(this["nCaptureRTTex"]=this["ctx"]["createTexture"](),this["nCaptureRTTex"]<=0))return _0x3e8d23;if(this["ctx"]["bindTexture"](this["ctx"]["TEXTURE_2D"],this["nCaptureRTTex"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MAG_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_MIN_FILTER"],this["ctx"]["LINEAR"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_S"],this["ctx"]["CLAMP_TO_EDGE"]),this["ctx"]["texParameteri"](this["ctx"]["TEXTURE_2D"],this["ctx"]["TEXTURE_WRAP_T"],this["ctx"]["CLAMP_TO_EDGE"]),this["ctx"]["texImage2D"](this["ctx"]["TEXTURE_2D"],0,this["ctx"]["RGBA"],this["nCaptureFBOWidth"],this["nCaptureFBOHeight"],0,this["ctx"]["RGBA"],this["ctx"]["UNSIGNED_BYTE"],null),this["ctx"]["bindFramebuffer"](this["ctx"]["FRAMEBUFFER"],this["nCaptureFBO"]),this["ctx"]["framebufferTexture2D"](this["ctx"]["FRAMEBUFFER"],this["ctx"]["COLOR_ATTACHMENT0"],this["ctx"]["TEXTURE_2D"],this["nCaptureRTTex"],0),1==_0x8eb9fb&&0==this["nCaptureDepthbuffer"]){if(this["nCaptureDepthbuffer"]=this["ctx"]["createRenderbuffer"](),this["nCaptureDepthbuffer"]<=0)return _0x3e8d23;this["ctx"]["bindRenderbuffer"](this["ctx"]["RENDERBUFFER"],this["nCaptureDepthbuffer"]),this["ctx"]["renderbufferStorage"](this["ctx"]["RENDERBUFFER"],this["ctx"]["DEPTH_COMPONENT16"],_0x39197a,_0x58f04a),this["ctx"]["framebufferRenderbuffer"](this["ctx"]["FRAMEBUFFER"],this["ctx"]["DEPTH_ATTACHMENT"],this["ctx"]["RENDERBUFFER"],this["nCaptureDepthbuffer"])}this["ctx"]["bindFramebuffer"](this["ctx"]["FRAMEBUFFER"],null)}return _0x31e0fd}},{key:"_EndCapture",value:function value(_0x5776b3){return null==this["ctx"]?_0x27ff6b:null==_0x5776b3["pBuffer"]||null==_0x5776b3["pBuffer"]?_0x592c4b:(this["ctx"]["readPixels"](0,0,this["nCaptureWidth"],this["nCaptureHeight"],this["ctx"]["RGBA"],this["ctx"]["UNSIGNED_BYTE"],_0x5776b3["pBuffer"]),this["ctx"]["bindFramebuffer"](this["ctx"]["FRAMEBUFFER"],null),this["bIsCapturing"]=!1,_0x31e0fd)}},{key:"_ResizeFrameData",value:function value(_0x39dbc8,_0x12b169,_0xfdcb4,_0x52833b){if(0==_0x12b169%8&&null==_0x52833b)return this["frameDisplayWidth"]=Math["round"](_0x12b169),this["frameDisplayHeight"]=Math["round"](_0xfdcb4),this["pFrameData"]=_0x39dbc8,_0x31e0fd;if(null!=_0x52833b&&0==_0x52833b["nCropBottom"]&&0==_0x52833b["nCropLeft"]&&0==_0x52833b["nCropRight"]&&0==_0x52833b["nCropTop"]&&0==_0x12b169%8)return this["frameDisplayWidth"]=Math["round"](_0x12b169),this["frameDisplayHeight"]=Math["round"](_0xfdcb4),this["pFrameData"]=_0x39dbc8,_0x31e0fd;if((null==this["pFrameData"]||this["frameDisplayWidth"]!=_0x12b169/8*8||this["frameDisplayHeight"]!=_0xfdcb4)&&(this["frameDisplayWidth"]=8*Math["round"](_0x12b169/8),this["frameDisplayHeight"]=Math["round"](_0xfdcb4),this["pFrameData"]=null,this["pFrameData"]=new Uint8Array(this["frameDisplayWidth"]*this["frameDisplayHeight"]*3/2),null==this["pFrameData"]))return _0x55d077;var _0x381fbf=0,_0x30d5d9=0,_0x49dcd4=Math["round"](_0x52833b["nCodeWidth"]),_0x8096c6=Math["round"](_0x52833b["nCodeHeight"]),_0x1ca8c6=0;if(_0x154578==this["enPixelFormat"]||_0x5a2deb==this["enPixelFormat"]){var _0x129af4,_0x54c344,_0x38fac1;null!=_0x52833b?(_0x381fbf=Math["round"](_0x52833b["nCropLeft"]),_0x30d5d9=Math["round"](_0x52833b["nCropTop"]),_0x129af4=_0x39dbc8["subarray"](_0x381fbf*_0x49dcd4+_0x30d5d9,_0x49dcd4*_0x8096c6),_0x54c344=_0x39dbc8["subarray"](_0x49dcd4*_0x8096c6+_0x30d5d9*_0x49dcd4/4+_0x381fbf/2,_0x49dcd4*_0x8096c6*5/4),_0x38fac1=_0x39dbc8["subarray"](_0x49dcd4*_0x8096c6*5/4+_0x30d5d9*_0x49dcd4/4+_0x381fbf/2,_0x49dcd4*_0x8096c6*3/2),_0x1ca8c6=_0x49dcd4):(_0x129af4=_0x39dbc8["subarray"](0,_0x12b169*_0xfdcb4),_0x54c344=_0x39dbc8["subarray"](_0x12b169*_0xfdcb4,_0x12b169*_0xfdcb4*5/4),_0x38fac1=_0x39dbc8["subarray"](_0x12b169*_0xfdcb4*5/4,_0x12b169*_0xfdcb4*3/2),_0x1ca8c6=this["frameDisplayWidth"]);for(var _0x4577fc=null,_0x485074=0;_0x485074<this["frameDisplayHeight"];++_0x485074){var _0x22702f=Math["round"](_0x485074*_0x1ca8c6),_0x451e57=Math["round"](_0x485074*_0x1ca8c6+this["frameDisplayWidth"]);_0x4577fc=_0x129af4["slice"](_0x22702f,_0x451e57);var _0xc53f2b=Math["round"](_0x485074*this["frameDisplayWidth"]);this["pFrameData"]["set"](_0x4577fc,_0xc53f2b)}for(var _0x2d30a6=0;_0x2d30a6<this["frameDisplayHeight"]/2;++_0x2d30a6){var _0x131249=Math["round"](_0x2d30a6*_0x1ca8c6/2),_0x2a0708=Math["round"](_0x2d30a6*_0x1ca8c6/2+this["frameDisplayWidth"]/2);_0x4577fc=_0x54c344["slice"](_0x131249,_0x2a0708);var _0x5b616f=Math["round"](this["frameDisplayWidth"]*this["frameDisplayHeight"]+_0x2d30a6*this["frameDisplayWidth"]/2);this["pFrameData"]["set"](_0x4577fc,_0x5b616f)}for(var _0xd3331f=0;_0xd3331f<this["frameDisplayHeight"]/2;++_0xd3331f){var _0x332236=Math["round"](_0xd3331f*_0x1ca8c6/2),_0xf75ce6=Math["round"](_0xd3331f*_0x1ca8c6/2+this["frameDisplayWidth"]/2);_0x4577fc=_0x38fac1["slice"](_0x332236,_0xf75ce6);var _0x3edf6c=Math["round"](this["frameDisplayWidth"]*this["frameDisplayHeight"]*5/4+_0xd3331f*this["frameDisplayWidth"]/2);this["pFrameData"]["set"](_0x4577fc,_0x3edf6c)}_0x129af4=null,_0x54c344=null,_0x38fac1=null,_0x4577fc=null}else{if(_0x1e0cc7==this["enPixelFormat"]){var _0x494da2,_0x1ee22d,_0x5efbf7;null!=_0x52833b?(_0x381fbf=Math["round"](_0x52833b["nCropLeft"]),_0x30d5d9=Math["round"](_0x52833b["nCropTop"]),_0x494da2=_0x39dbc8["subarray"](_0x30d5d9*_0x49dcd4+_0x381fbf,_0x49dcd4*_0x8096c6),_0x1ee22d=_0x39dbc8["subarray"](_0x49dcd4*_0x8096c6+_0x30d5d9*_0x49dcd4/4+_0x381fbf/2,_0x49dcd4*_0x8096c6*3/2),_0x1ca8c6=Math["round"](_0x52833b["nCodeWidth"])):(_0x494da2=_0x39dbc8["subarray"](0,_0x49dcd4*_0x8096c6),_0x1ee22d=_0x39dbc8["subarray"](_0x49dcd4*_0x8096c6,_0x49dcd4*_0x8096c6*3/2),_0x1ca8c6=this["frameDisplayWidth"]);for(var _0x4846ca=0;_0x4846ca<this["frameDisplayHeight"];++_0x4846ca){var _0x475d71=Math["round"](_0x4846ca*_0x1ca8c6),_0x33a7e0=Math["round"](_0x4846ca*_0x1ca8c6+this["frameDisplayWidth"]);_0x5efbf7=_0x494da2["slice"](_0x475d71,_0x33a7e0);var _0x2c4634=Math["round"](_0x4846ca*this["frameDisplayWidth"]);this["pFrameData"]["set"](_0x5efbf7,_0x2c4634)}for(var _0x1a232f=0;_0x1a232f<this["frameDisplayHeight"]/2;++_0x1a232f){var _0x3a7d7a=Math["round"](_0x1a232f*_0x1ca8c6),_0xf9dccb=Math["round"](_0x1a232f*_0x1ca8c6+this["frameDisplayWidth"]);_0x5efbf7=_0x1ee22d["slice"](_0x3a7d7a,_0xf9dccb);var _0x2f436e=Math["round"](this["frameDisplayWidth"]*this["frameDisplayHeight"]+_0x1a232f*this["frameDisplayWidth"]);this["pFrameData"]["set"](_0x5efbf7,_0x2f436e)}_0x494da2=null,_0x1ee22d=null,_0x5efbf7=null}}return _0x31e0fd}},{key:"_SetImagePostProcess",value:function value(){var _0x5f0c80=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fBrightness");if(_0x5f0c80<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x5f0c80,this["fBrightness"]);var _0x102121=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fHue");if(_0x102121<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x102121,this["fHue"]);var _0x36e31e=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fSaturation");if(_0x36e31e<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x36e31e,this["fSaturation"]);var _0x83bd18=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fContrast");if(_0x83bd18<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x83bd18,this["fContrast"]);var _0x2a43d7=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fSharpness");if(_0x2a43d7<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x2a43d7,this["fSharpness"]);var _0x1edf66=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fWndWidth");if(_0x1edf66<=0)return _0x3e8d23;this["ctx"]["uniform1f"](_0x1edf66,this["frameDisplayWidth"]);var _0x57dccd=this["ctx"]["getUniformLocation"](this["videoShaderProgram"],"fWndHeight");return _0x57dccd<=0?_0x3e8d23:(this["ctx"]["uniform1f"](_0x57dccd,this["frameDisplayHeight"]),_0x31e0fd)}},{key:"_ComputeRotateLimits",value:function value(){if(this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]||this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]){var _0x4cdbc0,_0x3940ed;if(this["enDisplayEffect"]==_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]?(_0x4cdbc0=_0x541632,_0x3940ed=_0x3e6e92):(_0x4cdbc0=_0x4be0f9,_0x3940ed=_0x49b105),0==this["canvas"]["width"]||0==this["canvas"]["height"])this["fRotateLimitX"]=_0x4cdbc0,this["fRotateLimitY"]=_0x3940ed;else{var _0x3c9b01=Math["tan"](2.748893525);if(Math["abs"](_0x3c9b01*this["fScale"])<1){var _0x4eac4f=_0x3c9b01*_0x3c9b01+1,_0x258ab2=-2*_0x3c9b01*_0x3c9b01*this["fScale"],_0x57f5f9=_0x3c9b01*_0x3c9b01*this["fScale"]*this["fScale"]-1,_0x1111aa=(-_0x258ab2-Math["sqrt"](_0x258ab2*_0x258ab2-4*_0x4eac4f*_0x57f5f9))/(2*_0x4eac4f),_0x3efdc5=_0x3c9b01*(_0x1111aa-this["fScale"]);this["fRotateLimitX"]=Math["acos"](_0x3efdc5/Math["sqrt"](_0x1111aa*_0x1111aa+_0x3efdc5*_0x3efdc5)),this["fRotateLimitX"]<_0x4cdbc0&&(this["fRotateLimitX"]=_0x4cdbc0)}else this["fRotateLimitX"]=_0x4cdbc0;var _0x2b438a=Math["atan"](this["canvas"]["width"]/this["canvas"]["height"]*Math["tan"](_0x5ce356/2));if(_0x3c9b01=Math["tan"](_0x2ab8a6-_0x2b438a),Math["abs"](_0x3c9b01*this["fScale"])<1){var _0x3ed8a2=_0x3c9b01*_0x3c9b01+1,_0x27950d=-2*_0x3c9b01*_0x3c9b01*this["fScale"],_0x5cd080=_0x3c9b01*_0x3c9b01*this["fScale"]*this["fScale"]-1,_0x4be824=(-_0x27950d-Math["sqrt"](_0x27950d*_0x27950d-4*_0x3ed8a2*_0x5cd080))/(2*_0x3ed8a2),_0x2c6c5a=_0x3c9b01*(_0x4be824-this["fScale"]);this["fRotateLimitY"]=Math["acos"](_0x2c6c5a/Math["sqrt"](_0x4be824*_0x4be824+_0x2c6c5a*_0x2c6c5a)),this["fRotateLimitY"]<_0x3940ed&&(this["fRotateLimitY"]=_0x3940ed)}else this["fRotateLimitY"]=_0x3940ed}this["fRotateX"]>this["fRotateLimitX"]&&(this["fRotateX"]=this["fRotateLimitX"]),this["fRotateX"]<-this["fRotateLimitX"]&&(this["fRotateX"]=-this["fRotateLimitX"]),this["fRotateY"]>this["fRotateLimitY"]&&(this["fRotateY"]=this["fRotateLimitX"]),this["fRotateY"]<-this["fRotateLimitX"]&&(this["fRotateY"]=-this["fRotateLimitX"])}return _0x31e0fd}}]),_0x1af75a}(),_0x5ce878=function(){function _0x1a816d(){_0x540ab2(this,_0x1a816d),this["canvas"]=null,this["ctx"]=null,this["regionSx"]=0,this["regionSy"]=0,this["regionSw"]=0,this["regionSh"]=0,this["needRect"]=!1,this["bAntialias"]=!1,this["bRecreateAntia"]=!1,this["pfuncCBIn"]=null,this["pUserIn"]=null,this["pfuncCBOut"]=null,this["pUserOut"]=null}return _0x132bfb(_0x1a816d,[{key:"SR_Init",value:function value(_0x5d1313){this["canvas"]=_0x5d1313,this["ctx"]=this["canvas"]["getContext"]("2d"),this["ctx"]||console["log"]("your browser does not support 2d render")}},{key:"SR_Draw",value:function value(_0x4f7468){return this["needRect"]?this["ctx"]["drawImage"](_0x4f7468,this["regionSx"],this["regionSy"],this["regionSw"],this["regionSh"],0,0,this["canvas"]["width"],this["canvas"]["height"]):this["ctx"]["drawImage"](_0x4f7468,0,0,_0x4f7468["displayWidth"],_0x4f7468["displayHeight"],0,0,this["canvas"]["width"],this["canvas"]["height"]),null!=this["pfuncCBIn"]&&this["pfuncCBIn"](this["pUserIn"]),1}},{key:"GetCanvasData",value:function value(_0x451cab){console["log"]("%c start time:"+(new Date)["getMinutes"]()+":"+(new Date)["getSeconds"]()+"."+(new Date)["getMilliseconds"](),"color: blue");var _0x2e24a3=this["ctx"]["getImageData"](0,0,this["canvas"]["width"],this["canvas"]["height"]);console["log"]("%c 2 time:"+(new Date)["getMinutes"]()+":"+(new Date)["getSeconds"]()+"."+(new Date)["getMilliseconds"](),"color: blue");var _0x259f6a="jpeg",_0x5df09f="image/jpeg",_0x136701=document["createElement"]("canvas"),_0x3eda97=_0x136701["getContext"]("2d");_0x136701["width"]=this["canvas"]["width"],_0x136701["height"]=this["canvas"]["height"],_0x3eda97["putImageData"](_0x2e24a3,0,0);var _0x13370e=_0x136701["toDataURL"](),_0x495385=document["createElement"]("a");_0x495385["download"]=(new Date)["getTime"]()+"."+_0x259f6a,_0x495385["href"]=_0x13370e,_0x495385["dataset"]["downloadurl"]=[_0x5df09f,_0x495385["download"],_0x495385["href"]]["join"](":"),document["body"]["appendChild"](_0x495385),_0x495385["click"](),document["body"]["removeChild"](_0x495385),console["log"]("%c end time:"+(new Date)["getMinutes"]()+":"+(new Date)["getSeconds"]()+"."+(new Date)["getMilliseconds"](),"color: blue")}},{key:"SR_DelSubPort",value:function value(_0x372dfa){return 0}},{key:"SR_AddSubPort",value:function value(_0x4fc46d){return 0}},{key:"SR_SetDisplayRect",value:function value(_0xfaf63f,_0x104b21,_0x40f5a5,_0x3044f7){this["regionSx"]=_0xfaf63f,this["regionSy"]=_0x104b21,this["regionSw"]=_0x40f5a5,this["regionSh"]=_0x3044f7,this["needRect"]=!0}},{key:"SR_Destroy",value:function value(){this["canvas"]=null,this["ctx"]=null,this["regionSx"]=0,this["regionSy"]=0,this["regionSw"]=0,this["regionSh"]=0,this["needRect"]=!1}},{key:"SR_SetCanvasSize",value:function value(_0x2c2a69,_0x3535c2){this["canvas"]["width"]=_0x2c2a69,this["canvas"]["height"]=_0x3535c2}},{key:"SR_GetCanvasSize",value:function value(){console["log"]("canvas width:"+this["canvas"]["width"]+",height:"+this["canvas"]["height"])}},{key:"SR_SetAntialias",value:function value(_0x3a6cff){return _0x3a6cff!=this["bAntialias"]?(this["bAntialias"]=_0x3a6cff,this["bRecreateAntia"]=!0):this["bRecreateAntia"]=!1,this["bRecreateAntia"]&&(this["bAntialias"]?(this["canvas"]["width"]=5*this["canvas"]["width"],this["canvas"]["height"]=5*this["canvas"]["height"],this["canvas"]["style"]["transform"]="scale(0.2)",this["canvas"]["style"]["transformOrigin"]="0 0"):(this["canvas"]["width"]=this["canvas"]["width"]/5,this["canvas"]["height"]=this["canvas"]["height"]/5,this["canvas"]["style"]["transform"]="scale(1)",this["canvas"]["style"]["transformOrigin"]="0 0")),1}},{key:"SR_SetCallBack",value:function value(_0x12524d,_0x3dafab,_0x22dc3d){switch(_0x22dc3d){case _0x1d6f4d:this["pfuncCBIn"]=_0x12524d,this["pUserIn"]=_0x3dafab;break;case _0x67d97f:this["pfuncCBOut"]=_0x12524d,this["pUserOut"]=_0x3dafab;break;default:return 0}return 1}},{key:"SR_DrawFont",value:function value(_0x805cb5,_0x34a101,_0x505d89,_0x151fbe,_0x391daf,_0x24249a,_0x24b7f3,_0x327ed0,_0xb692a1){var _0x3f0d96=[],_0x36745c={};return _0x36745c["bBackground"]=_0x24249a,_0x36745c["nFontWidth"]=_0x151fbe,_0x36745c["nFontHeight"]=_0x391daf,_0x36745c["pstBGColor"]=_0x24b7f3,_0x36745c["pstFontColor"]=_0x505d89,_0x36745c["pString"]=_0x805cb5,_0x36745c["pstStartPos"]=_0x34a101,_0x36745c["fRotateAngle"]=_0x327ed0,_0x36745c["pFontFamily"]=_0xb692a1,_0x3f0d96["push"](_0x36745c),this["SR_DrawFontEx"](_0x3f0d96,1),1}},{key:"SR_DrawFontEx",value:function value(_0xb452c,_0x571720){for(var _0x1e4f68=0;_0x1e4f68<_0x571720;_0x1e4f68++){this["ctx"]["textBaseline"]="top";var _0x161855=_0xb452c[_0x1e4f68]["nFontWidth"],_0x455663=_0xb452c[_0x1e4f68]["nFontHeight"],_0xf840f1=(_0x161855=Math["round"](_0x161855))<(_0x455663=Math["round"](_0x455663))?_0x161855:_0x455663;this["ctx"]["font"]=_0xf840f1["toString"]()+"px "+_0xb452c[_0x1e4f68]["pFontFamily"];var _0x432fcb=parseInt(255*_0xb452c[_0x1e4f68]["pstFontColor"]["fR"]),_0x58e7fe=parseInt(255*_0xb452c[_0x1e4f68]["pstFontColor"]["fG"]),_0x4cf57a=parseInt(255*_0xb452c[_0x1e4f68]["pstFontColor"]["fB"]),_0x54ec31=_0x432fcb<16?"0"+_0x432fcb["toString"](16):_0x432fcb["toString"](16),_0x4b7499=_0x58e7fe<16?"0"+_0x58e7fe["toString"](16):_0x58e7fe["toString"](16),_0x4ccefd=_0x4cf57a<16?"0"+_0x4cf57a["toString"](16):_0x4cf57a["toString"](16);this["ctx"]["fillStyle"]="#"+_0x54ec31+_0x4b7499+_0x4ccefd,this["ctx"]["globalAlpha"]=_0xb452c[_0x1e4f68]["pstFontColor"]["fA"],this["ctx"]["fillText"](_0xb452c[_0x1e4f68]["pString"],_0xb452c[_0x1e4f68]["pstStartPos"]["fX"]*this["canvas"]["width"],_0xb452c[_0x1e4f68]["pstStartPos"]["fY"]*this["canvas"]["height"])}return 1}},{key:"SR_DrawImage",value:function value(_0x532792,_0x5de466,_0x36b82c,_0x47abfd,_0x5840e4,_0x439939){return 1}},{key:"SR_DrawLinesEx",value:function value(_0x6a984b,_0x3ddedb,_0x550a86,_0x58ac2b){return 1}}]),_0x1a816d}(),_0x3beccf=function(){function _0x387361(){_0x540ab2(this,_0x387361),this["bPortAllocated"]=[],this["pRenderParam"]=[],this["pFishParam"]=[],this["stPTZColor"]=[],this["pPTZSetColor"]=null,this["nBasePTZPointNum"]=[],this["nOriPTZPointNum"]=[],this["nPanoPTZPointNum"]=[],this["nPTZFragmentNum"]=[],this["pBasePTZPoints"]=[],this["pPanoPTZPoints"]=[],this["pRectPoints"]=[],this["nPTZRectNum"]=[],this["nPTZDisplayMode"]=_0xff172f,this["fRX1"]=0,this["fRX2"]=1,this["fRY1"]=0,this["fRY2"]=1,this["bBlack"]=!1,this["pOriPTZPoints"]=[],this["nWndPort"]=_0x308700,this["nPlaceType"]=0,this["nPTZFragmentNode"]=[],this["bPTZSelected"]=[],this["nPTZDisplayMode"]=_0x310c66;for(var _0x1c103a=0;_0x1c103a<_0x36131b;++_0x1c103a){this["bPortAllocated"][_0x1c103a]=!1,this["bPTZSelected"][_0x1c103a]=!1,this["pRenderParam"][_0x1c103a]=null,this["pFishParam"][_0x1c103a]=null,this["stPTZColor"][_0x1c103a]={},this["stPTZColor"][_0x1c103a]["fR"]=0,this["stPTZColor"][_0x1c103a]["fG"]=0,this["stPTZColor"][_0x1c103a]["fB"]=0,this["stPTZColor"][_0x1c103a]["fA"]=0,this["nBasePTZPointNum"][_0x1c103a]=0,this["nOriPTZPointNum"][_0x1c103a]=0,this["nPanoPTZPointNum"][_0x1c103a]=0,this["nPTZRectNum"][_0x1c103a]=0,this["pPanoPTZPoints"][_0x1c103a]=[],this["pRectPoints"][_0x1c103a]=[],this["pBasePTZPoints"][_0x1c103a]=[],this["pOriPTZPoints"][_0x1c103a]=[];for(var _0x347fb0=0;_0x347fb0<4;++_0x347fb0)this["pRectPoints"][_0x1c103a][_0x347fb0]={},this["pRectPoints"][_0x1c103a][_0x347fb0]["fX"]=0,this["pRectPoints"][_0x1c103a][_0x347fb0]["fY"]=0;for(var _0x30c4aa=0;_0x30c4aa<_0x3c021e;++_0x30c4aa)this["pBasePTZPoints"][_0x1c103a][_0x30c4aa]={},this["pBasePTZPoints"][_0x1c103a][_0x30c4aa]["fX"]=0,this["pBasePTZPoints"][_0x1c103a][_0x30c4aa]["fY"]=0,this["pOriPTZPoints"][_0x1c103a][_0x30c4aa]={},this["pOriPTZPoints"][_0x1c103a][_0x30c4aa]["fX"]=0,this["pOriPTZPoints"][_0x1c103a][_0x30c4aa]["fY"]=0,this["pPanoPTZPoints"][_0x1c103a][_0x30c4aa]={},this["pPanoPTZPoints"][_0x1c103a][_0x30c4aa]["fX"]=0,this["pPanoPTZPoints"][_0x1c103a][_0x30c4aa]["fY"]=0;this["nPTZFragmentNum"][_0x1c103a]=0,this["nPTZFragmentNode"][_0x1c103a]=[];for(var _0x18cc2d=0;_0x18cc2d<100;++_0x18cc2d)this["nPTZFragmentNode"][_0x1c103a][_0x18cc2d]=0}this["InitColorList"]()}return _0x132bfb(_0x387361,[{key:"GetFECPort",value:function value(_0x121ea2){for(var _0x5dc5eb=_0x308700,_0x93ed8e=0;_0x93ed8e<_0x36131b;++_0x93ed8e)if(0==this["bPortAllocated"][_0x93ed8e]){_0x5dc5eb=_0x93ed8e;break}if(_0x5dc5eb==_0x308700)return _0x5dc5eb;if(_0x121ea2==_0x2bffb5["SR_DE_NULL"])return _0x5dc5eb;var _0x3856b9=this["JudgeDisplayEffect"](_0x121ea2);if(_0x31e0fd!=_0x3856b9)return this["FreeFECPort"](_0x5dc5eb),_0x5dc5eb=_0x308700;if(_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]==_0x121ea2||_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]==_0x121ea2||_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]==_0x121ea2||_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]==_0x121ea2||_0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]==_0x121ea2||_0x2bffb5["SR_DE_FISH_ORIGINAL"]==_0x121ea2){if(_0x308700!=this["nWndPort"])return this["FreeFECPort"](_0x5dc5eb),_0x5dc5eb=_0x308700;this["nWndPort"]=_0x5dc5eb}if(!(_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]!=_0x121ea2&&_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]!=_0x121ea2&&_0x2bffb5["SR_DE_FISH_PTZ_WALL"]!=_0x121ea2||_0x308700==this["nWndPort"]||null==this["pRenderParam"][this["nWndPort"]]||_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]!=this["pRenderParam"][this["nWndPort"]]["nDisplayEffect"]&&_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]!=this["pRenderParam"][this["nWndPort"]]["nDisplayEffect"]))return this["FreeFECPort"](_0x5dc5eb),_0x5dc5eb=_0x308700;if(_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]==_0x121ea2||_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]==_0x121ea2){for(var _0x1ef553=0;_0x1ef553<_0x36131b;++_0x1ef553)if(null!=this["pRenderParam"][_0x1ef553]&&(_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]==this["pRenderParam"][_0x1ef553]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]==this["pRenderParam"][_0x1ef553]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PTZ_WALL"]==this["pRenderParam"][_0x1ef553]["nDisplayEffect"]))return this["FreeFECPort"](_0x5dc5eb),_0x5dc5eb=_0x308700}if(_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]==_0x121ea2){for(var _0x2da22f=0;_0x2da22f<_0x36131b;++_0x2da22f)if(null!=this["pRenderParam"][_0x2da22f]&&_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]==this["pRenderParam"][_0x2da22f]["nDisplayEffect"])return this["FreeFECPort"](_0x5dc5eb),_0x5dc5eb=_0x308700}if(_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]==_0x121ea2){for(var _0x2e048d=0;_0x2e048d<_0x36131b;++_0x2e048d)if(null!=this["pRenderParam"][_0x2e048d]&&_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]==this["pRenderParam"][_0x2e048d]["nDisplayEffect"])return this["FreeFECPort"](_0x5dc5eb),_0x5dc5eb=_0x308700}return this["pRenderParam"][_0x5dc5eb]={},this["pRenderParam"][_0x5dc5eb]["fCosH"]=1,this["pRenderParam"][_0x5dc5eb]["fSinH"]=0,this["pRenderParam"][_0x5dc5eb]["fCosV"]=1,this["pRenderParam"][_0x5dc5eb]["fSinV"]=0,this["pRenderParam"][_0x5dc5eb]["fAngle"]=0,this["pRenderParam"][_0x5dc5eb]["fRX1"]=this["fRX1"],this["pRenderParam"][_0x5dc5eb]["fRX2"]=this["fRX2"],this["pRenderParam"][_0x5dc5eb]["fRY1"]=this["fRY1"],this["pRenderParam"][_0x5dc5eb]["fRY2"]=this["fRY2"],this["pRenderParam"][_0x5dc5eb]["bBlack"]=this["bBlack"],this["pRenderParam"][_0x5dc5eb]["fZoom"]=.035+.8,this["pRenderParam"][_0x5dc5eb]["nDisplayEffect"]=_0x121ea2,this["pRenderParam"][_0x5dc5eb]["bBlack"]=!1,this["pRenderParam"][_0x5dc5eb]["bCut"]=!1,this["pFishParam"][_0x5dc5eb]={},this["pFishParam"][_0x5dc5eb]["nFishParamType"]=0,this["pFishParam"][_0x5dc5eb]["bCut"]=!1,this["pFishParam"][_0x5dc5eb]["fAngle"]=this["pRenderParam"][_0x5dc5eb]["fAngle"],this["pFishParam"][_0x5dc5eb]["fPTZX"]=.5,this["pFishParam"][_0x5dc5eb]["fPTZY"]=.5,this["pFishParam"][_0x5dc5eb]["fRXLeft"]=this["pRenderParam"][_0x5dc5eb]["fRX1"],this["pFishParam"][_0x5dc5eb]["fRXRight"]=this["pRenderParam"][_0x5dc5eb]["fRX2"],this["pFishParam"][_0x5dc5eb]["fRYTop"]=this["pRenderParam"][_0x5dc5eb]["fRY1"],this["pFishParam"][_0x5dc5eb]["fRYBottom"]=this["pRenderParam"][_0x5dc5eb]["fRY2"],this["pFishParam"][_0x5dc5eb]["bBlack"]=this["pRenderParam"][_0x5dc5eb]["bBlack"],this["pFishParam"][_0x5dc5eb]["fZoom"]=(this["pRenderParam"][_0x5dc5eb]["fZoom"]-.8)/7,this["bPortAllocated"][_0x5dc5eb]=!0,_0x5dc5eb}},{key:"FreeFECPort",value:function value(_0x5771b1){if(_0x5771b1<0||_0x5771b1>=_0x36131b)return _0x592c4b;this["nWndPort"]==_0x5771b1&&(this["nWndPort"]=_0x308700),null!=this["pRenderParam"][_0x5771b1]&&(this["pRenderParam"][_0x5771b1]["fCosH"]=1,this["pRenderParam"][_0x5771b1]["fSinH"]=0,this["pRenderParam"][_0x5771b1]["fCosV"]=1,this["pRenderParam"][_0x5771b1]["fSinV"]=0,this["pRenderParam"][_0x5771b1]["fAngle"]=0,this["pRenderParam"][_0x5771b1]["fZoom"]=0,this["pRenderParam"][_0x5771b1]["fRX1"]=0,this["pRenderParam"][_0x5771b1]["fRX2"]=1,this["pRenderParam"][_0x5771b1]["fRY1"]=0,this["pRenderParam"][_0x5771b1]["fRY2"]=1,this["pRenderParam"][_0x5771b1]["nDisplayEffect"]=0,this["pRenderParam"][_0x5771b1]["bBlack"]=!1,this["pRenderParam"][_0x5771b1]["bCut"]=!1),null!=this["pFishParam"][_0x5771b1]&&(this["pFishParam"][_0x5771b1]["nFishParamType"]=0,this["pFishParam"][_0x5771b1]["fRXLeft"]=0,this["pFishParam"][_0x5771b1]["fRXRight"]=1,this["pFishParam"][_0x5771b1]["fRYTop"]=0,this["pFishParam"][_0x5771b1]["fRYBottom"]=1,this["pFishParam"][_0x5771b1]["bBlack"]=!1,this["pFishParam"][_0x5771b1]["bCut"]=!1,this["pFishParam"][_0x5771b1]["fAngle"]=0,this["pFishParam"][_0x5771b1]["fZoom"]=0,this["pFishParam"][_0x5771b1]["fPTZX"]=.5,this["pFishParam"][_0x5771b1]["fPTZY"]=.5),this["nBasePTZPointNum"][_0x5771b1]=0,this["nOriPTZPointNum"][_0x5771b1]=0,this["nPanoPTZPointNum"][_0x5771b1]=0,this["nPTZRectNum"][_0x5771b1]=0;for(var _0x2d5939=0;_0x2d5939<4;++_0x2d5939)this["pRectPoints"][_0x5771b1][_0x2d5939]["fX"]=0,this["pRectPoints"][_0x5771b1][_0x2d5939]["fY"]=0;for(var _0x2e7ae2=0;_0x2e7ae2<_0x3c021e;++_0x2e7ae2)this["pBasePTZPoints"][_0x5771b1][_0x2e7ae2]["fX"]=0,this["pBasePTZPoints"][_0x5771b1][_0x2e7ae2]["fY"]=0,this["pOriPTZPoints"][_0x5771b1][_0x2e7ae2]["fX"]=0,this["pOriPTZPoints"][_0x5771b1][_0x2e7ae2]["fY"]=0,this["pPanoPTZPoints"][_0x5771b1][_0x2e7ae2]["fX"]=0,this["pPanoPTZPoints"][_0x5771b1][_0x2e7ae2]["fY"]=0;if(null!=this["pPTZSetColor"]&&(this["pPTZSetColor"][_0x5771b1]["fA"]=0,this["pPTZSetColor"][_0x5771b1]["fR"]=0,this["pPTZSetColor"][_0x5771b1]["fG"]=0,this["pPTZSetColor"][_0x5771b1]["fB"]=0),this["bPTZSelected"][_0x5771b1]=!1,0!=this["nPlaceType"]){var _0x30b645=!1;if(null!=this["pRenderParam"][i]){for(var _0x2a00e3=0;_0x2a00e3<_0x36131b;++_0x2a00e3)if(null!=this["pRenderParam"][_0x2a00e3]&&(_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PTZ_WALL"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_CEILING"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_FLOOR"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]==this["pRenderParam"][_0x2a00e3]["nDisplayEffect"])){_0x30b645=!0;break}}_0x30b645||(this["nPlaceType"]=0)}for(var _0x5b8c9d=!1,_0x5a2a9f=0;_0x5a2a9f<_0x36131b;++_0x5a2a9f)if(null!=this["pRenderParam"][_0x5a2a9f]){_0x5b8c9d=!0;break}_0x5b8c9d||(this["fRX1"]=0,this["fRX2"]=1,this["fRY1"]=0,this["fRY2"]=1,this["bBlack"]=!1),this["nPTZFragmentNum"][_0x5771b1]=0;for(var _0x35e33a=0;_0x35e33a<100;++_0x35e33a)this["nPTZFragmentNode"][_0x5771b1][_0x35e33a]=0;return this["bPortAllocated"][_0x5771b1]=!1,_0x31e0fd}},{key:"DeInit",value:function value(){for(var _0x327016=0;_0x327016<_0x36131b;++_0x327016){for(var _0x14f1e2=0;_0x14f1e2<4;++_0x14f1e2)this["pRectPoints"][_0x327016][_0x14f1e2]=null;for(var _0x508953=0;_0x508953<_0x3c021e;++_0x508953)this["pBasePTZPoints"][_0x327016][_0x508953]=null,this["pOriPTZPoints"][_0x327016][_0x508953]=null,this["pPanoPTZPoints"][_0x327016][_0x508953]=null;this["nPTZFragmentNum"][_0x327016]=0,this["nPTZFragmentNode"][_0x327016]=null,this["bPortAllocated"][_0x327016]=!1,this["bPTZSelected"][_0x327016]=!1,this["pRenderParam"][_0x327016]=null,this["pFishParam"][_0x327016]=null,this["stPTZColor"][_0x327016]=null,this["nBasePTZPointNum"][_0x327016]=0,this["nOriPTZPointNum"][_0x327016]=0,this["nPanoPTZPointNum"][_0x327016]=0,this["nPTZRectNum"][_0x327016]=0,this["pPanoPTZPoints"][_0x327016]=null,this["pRectPoints"][_0x327016]=null,this["pBasePTZPoints"][_0x327016]=null,this["pOriPTZPoints"][_0x327016]=null}return this["bPortAllocated"]=null,this["pRenderParam"]=null,this["pFishParam"]=null,this["stPTZColor"]=null,this["pPTZSetColor"]=null,this["nBasePTZPointNum"]=null,this["nOriPTZPointNum"]=null,this["nPanoPTZPointNum"]=null,this["nPTZFragmentNum"]=null,this["pBasePTZPoints"]=null,this["pPanoPTZPoints"]=null,this["pRectPoints"]=null,this["nPTZRectNum"]=null,this["nPTZDisplayMode"]=_0xff172f,this["fRX1"]=0,this["fRX2"]=1,this["fRY1"]=0,this["fRY2"]=1,this["bBlack"]=!1,this["pOriPTZPoints"]=null,this["pBasePTZPoints"]=null,this["nWndPort"]=_0x308700,this["nPlaceType"]=0,this["nPTZFragmentNode"]=null,this["bPTZSelected"]=null,this["nPTZDisplayMode"]=_0x310c66,_0x31e0fd}},{key:"InitColorList",value:function value(){this["stPTZColor"][0]["fR"]=.5,this["stPTZColor"][0]["fG"]=.5,this["stPTZColor"][0]["fB"]=0,this["stPTZColor"][0]["fA"]=1,this["stPTZColor"][1]["fR"]=1,this["stPTZColor"][1]["fG"]=0,this["stPTZColor"][1]["fB"]=0,this["stPTZColor"][1]["fA"]=1,this["stPTZColor"][2]["fR"]=0,this["stPTZColor"][2]["fG"]=1,this["stPTZColor"][2]["fB"]=0,this["stPTZColor"][2]["fA"]=1,this["stPTZColor"][3]["fR"]=0,this["stPTZColor"][3]["fG"]=0,this["stPTZColor"][3]["fB"]=1,this["stPTZColor"][3]["fA"]=1,this["stPTZColor"][4]["fR"]=1,this["stPTZColor"][4]["fG"]=1,this["stPTZColor"][4]["fB"]=0,this["stPTZColor"][4]["fA"]=1,this["stPTZColor"][5]["fR"]=.5,this["stPTZColor"][5]["fG"]=0,this["stPTZColor"][5]["fB"]=1,this["stPTZColor"][5]["fA"]=1,this["stPTZColor"][6]["fR"]=0,this["stPTZColor"][6]["fG"]=1,this["stPTZColor"][6]["fB"]=1,this["stPTZColor"][6]["fA"]=1,this["stPTZColor"][7]["fR"]=1,this["stPTZColor"][7]["fG"]=.5,this["stPTZColor"][7]["fB"]=0,this["stPTZColor"][7]["fA"]=1,this["stPTZColor"][8]["fR"]=0,this["stPTZColor"][8]["fG"]=.5,this["stPTZColor"][8]["fB"]=.5,this["stPTZColor"][8]["fA"]=1;for(var _0x42a4c5=9;_0x42a4c5<_0x36131b;_0x42a4c5++)this["stPTZColor"][_0x42a4c5]["fR"]=1*_0x42a4c5/_0x36131b,this["stPTZColor"][_0x42a4c5]["fG"]=1*_0x42a4c5/_0x36131b,this["stPTZColor"][_0x42a4c5]["fB"]=1*_0x42a4c5/_0x36131b,this["stPTZColor"][_0x42a4c5]["fA"]=1;return _0x31e0fd}},{key:"GetRangePoints",value:function value(_0x243c9a){if(_0x243c9a<0||_0x243c9a>=_0x36131b)return _0x592c4b;if(null==this["pRenderParam"][_0x243c9a])return _0x27ff6b;var _0x31937a=0,_0x46007c=0;switch(this["nOriPTZPointNum"][_0x243c9a]=0,this["nBasePTZPointNum"][_0x243c9a]=0,this["pRenderParam"][_0x243c9a]["nDisplayEffect"]){case _0x2bffb5["SR_DE_FISH_PTZ_CEILING"]:for(_0x46007c=0;_0x46007c<1;_0x46007c+=.01)this["GetFishPTZCeiling"](_0x31937a,_0x46007c,_0x243c9a);for(_0x46007c=.9995,_0x31937a=0;_0x31937a<1;_0x31937a+=.02)this["GetFishPTZCeiling"](_0x31937a,_0x46007c,_0x243c9a);for(_0x31937a=.999,_0x46007c=.9995;_0x46007c>=0;_0x46007c-=.01)this["GetFishPTZCeiling"](_0x31937a,_0x46007c,_0x243c9a);for(_0x46007c=0,_0x31937a=.999;_0x31937a>=0;_0x31937a-=.02)this["GetFishPTZCeiling"](_0x31937a,_0x46007c,_0x243c9a);break;case _0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]:for(_0x46007c=0;_0x46007c<1;_0x46007c+=.01)this["GetFishPTZFloor"](_0x31937a,_0x46007c,_0x243c9a);for(_0x46007c=.9995,_0x31937a=0;_0x31937a<1;_0x31937a+=.02)this["GetFishPTZFloor"](_0x31937a,_0x46007c,_0x243c9a);for(_0x31937a=.999,_0x46007c=.9995;_0x46007c>=0;_0x46007c-=.01)this["GetFishPTZFloor"](_0x31937a,_0x46007c,_0x243c9a);for(_0x46007c=0,_0x31937a=.999;_0x31937a>=0;_0x31937a-=.02)this["GetFishPTZFloor"](_0x31937a,_0x46007c,_0x243c9a);break;case _0x2bffb5["SR_DE_FISH_PTZ_WALL"]:for(_0x46007c=0;_0x46007c<1;_0x46007c+=.01)this["GetFishPTZWALL"](_0x31937a,_0x46007c,_0x243c9a);for(_0x46007c=.9995,_0x31937a=0;_0x31937a<1;_0x31937a+=.02)this["GetFishPTZWALL"](_0x31937a,_0x46007c,_0x243c9a);for(_0x31937a=.999,_0x46007c=.9995;_0x46007c>=0;_0x46007c-=.01)this["GetFishPTZWALL"](_0x31937a,_0x46007c,_0x243c9a);for(_0x46007c=0,_0x31937a=.999;_0x31937a>=0;_0x31937a-=.02)this["GetFishPTZWALL"](_0x31937a,_0x46007c,_0x243c9a);break;default:return _0x1b8a99}return _0x31e0fd}},{key:"TransformPTZRangePoints",value:function value(_0x1cbb77){if(_0x308700==this["nWndPort"])return _0x27ff6b;if(null==this["pBasePTZPoints"][_0x1cbb77]||null==this["pRenderParam"][this["nWndPort"]])return _0x27ff6b;this["nPanoPTZPointNum"][_0x1cbb77]=0;var _0x11e47e=_0x31e0fd,_0x1e32be=this["nWndPort"];switch(this["pRenderParam"][_0x1e32be]["nDisplayEffect"]){case _0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:if(_0x11e47e=this["GetPanoPTZWall"](_0x1cbb77),_0x31e0fd!=_0x11e47e)return _0x11e47e;break;case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]:if(_0x11e47e=this["GetPanoPTZFloor"](_0x1cbb77),_0x31e0fd!=_0x11e47e)return _0x11e47e;break;case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]:if(_0x11e47e=this["GetPanoPTZCeiling"](_0x1cbb77),_0x31e0fd!=_0x11e47e)return _0x11e47e}return this["CalcPTZFragmentPoints"](_0x1cbb77),_0x31e0fd}},{key:"GetRectPoints",value:function value(_0x18ce0f){if(_0x18ce0f<0||_0x18ce0f>=_0x36131b)return _0x592c4b;if(this["nWndPort"]==_0x308700)return _0x27ff6b;if(null==this["pRenderParam"][this["nWndPort"]]||null==this["pFishParam"][_0x18ce0f])return _0x27ff6b;var _0x5a39c3=this["pRenderParam"][this["nWndPort"]]["nDisplayEffect"],_0x1acdc3=_0x31e0fd,_0x18f0a8={fX:0,fY:0};switch(_0x5a39c3){case _0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:if(_0x1acdc3=this["GetPointFish2PanoWall"](_0x18f0a8,this["pFishParam"][_0x18ce0f]["fPTZX"],this["pFishParam"][_0x18ce0f]["fPTZY"]),_0x31e0fd!=_0x1acdc3)return _0x1acdc3;break;case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]:if(_0x1acdc3=this["GetPointFish2PanoFloor"](_0x18f0a8,this["pFishParam"][_0x18ce0f]["fPTZX"],this["pFishParam"][_0x18ce0f]["fPTZY"]),_0x31e0fd!=_0x1acdc3)return _0x1b8a99==_0x1acdc3&&(this["pRectPoints"][_0x18ce0f]=null),_0x1acdc3;break;case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]:if(_0x1acdc3=this["GetPointFish2PanoCeiling"](_0x18f0a8,this["pFishParam"][_0x18ce0f]["fPTZX"],this["pFishParam"][_0x18ce0f]["fPTZY"]),_0x31e0fd!=_0x1acdc3)return _0x1b8a99==_0x1acdc3&&(this["pRectPoints"][_0x18ce0f]=null),_0x1acdc3;break;case _0x2bffb5["SR_DE_FISH_ORIGINAL"]:_0x18f0a8["fX"]=this["pFishParam"][_0x18ce0f]["fPTZX"],_0x18f0a8["fY"]=this["pFishParam"][_0x18ce0f]["fPTZY"]}if(null==this["pRectPoints"][_0x18ce0f]){this["pRectPoints"][_0x18ce0f]=[];for(var _0x34a319=0;_0x34a319<4;++_0x34a319)this["pRectPoints"][_0x18ce0f][_0x34a319]={},this["pRectPoints"][_0x18ce0f][_0x34a319]["fX"]=0,this["pRectPoints"][_0x18ce0f][_0x34a319]["fY"]=0}return this["pRectPoints"][_0x18ce0f][0]["fX"]=_0x18f0a8["fX"]-_0x125257,this["pRectPoints"][_0x18ce0f][0]["fY"]=_0x18f0a8["fY"]-_0x125257,this["pRectPoints"][_0x18ce0f][1]["fX"]=_0x18f0a8["fX"]+_0x125257,this["pRectPoints"][_0x18ce0f][1]["fY"]=_0x18f0a8["fY"]-_0x125257,this["pRectPoints"][_0x18ce0f][2]["fX"]=_0x18f0a8["fX"]+_0x125257,this["pRectPoints"][_0x18ce0f][2]["fY"]=_0x18f0a8["fY"]+_0x125257,this["pRectPoints"][_0x18ce0f][3]["fX"]=_0x18f0a8["fX"]-_0x125257,this["pRectPoints"][_0x18ce0f][3]["fY"]=_0x18f0a8["fY"]+_0x125257,this["nPTZRectNum"][_0x18ce0f]=4,_0x31e0fd}},{key:"GetFishPTZCeiling",value:function value(_0x5307d8,_0x26b127,_0x47f60f){var _0x4e1bc8,_0x4cba57,_0x4c66d1,_0x33c28f,_0x2be1c3,_0x31a381,_0x5599b6,_0x1a7f84={fX:0,fY:0},_0xbdc574={fX:0,fY:0},_0x3aa1b2={fX:0,fY:0},_0x3101af={};_0x33c28f=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x2be1c3=(this["fRX1"]+this["fRX2"])/2*1,_0x31a381=(this["fRY1"]+this["fRY2"])/2*_0x33c28f,_0x5599b6=(this["fRX2"]-this["fRX1"])/2*1,_0x1a7f84["fX"]=_0x26b127-.5,_0x1a7f84["fY"]=.5-_0x5307d8,_0x4e1bc8=this["pRenderParam"][_0x47f60f]["fZoom"],_0xbdc574["fX"]=_0x1a7f84["fX"],_0xbdc574["fY"]=_0x1a7f84["fY"]*this["pRenderParam"][_0x47f60f]["fCosV"]+_0x4e1bc8*this["pRenderParam"][_0x47f60f]["fSinV"],_0x4cba57=_0x4e1bc8*this["pRenderParam"][_0x47f60f]["fCosV"]-_0x1a7f84["fY"]*this["pRenderParam"][_0x47f60f]["fSinV"],_0x4c66d1=Math["sqrt"](_0xbdc574["fX"]*_0xbdc574["fX"]+_0xbdc574["fY"]*_0xbdc574["fY"]);var _0x1031ed=Math["sqrt"](_0xbdc574["fX"]*_0xbdc574["fX"]+_0xbdc574["fY"]*_0xbdc574["fY"]+_0x4cba57*_0x4cba57),_0x51b7b7=Math["asin"](_0x4c66d1/_0x1031ed)/1.5707963*.5;_0xbdc574["fX"]=_0x51b7b7*_0xbdc574["fX"]/_0x4c66d1,_0xbdc574["fY"]=_0x51b7b7*_0xbdc574["fY"]/_0x4c66d1,_0x3aa1b2["fX"]=_0xbdc574["fX"]*this["pRenderParam"][_0x47f60f]["fCosH"]-_0xbdc574["fY"]*this["pRenderParam"][_0x47f60f]["fSinH"],_0x3aa1b2["fY"]=_0xbdc574["fX"]*this["pRenderParam"][_0x47f60f]["fSinH"]+_0xbdc574["fY"]*this["pRenderParam"][_0x47f60f]["fCosH"],_0x3101af["fX"]=2*_0x3aa1b2["fX"]*_0x5599b6+_0x2be1c3,_0x3101af["fY"]=2*-_0x3aa1b2["fY"]*_0x5599b6+_0x31a381;var _0x4365a5=this["nBasePTZPointNum"][_0x47f60f];this["pBasePTZPoints"][_0x47f60f][_0x4365a5]["fX"]=_0x3aa1b2["fX"]+.5,this["pBasePTZPoints"][_0x47f60f][_0x4365a5]["fY"]=.5-_0x3aa1b2["fY"],this["nBasePTZPointNum"][_0x47f60f]=this["nBasePTZPointNum"][_0x47f60f]+1;var _0x124a6f=this["fRX1"]<=0?0:1*this["fRX1"],_0x28d284=this["fRY1"]<=0?0:this["fRY1"]*_0x33c28f,_0x59e794=this["fRX2"]>=1?1-_0x124a6f:1*this["fRX2"]-_0x124a6f,_0x2e56bf=this["fRY2"]>=1?_0x33c28f-_0x28d284:this["fRY2"]*_0x33c28f-_0x28d284;if(_0x3101af["fX"]=(_0x3101af["fX"]-_0x124a6f)/_0x59e794,_0x3101af["fY"]=(_0x3101af["fY"]-_0x28d284)/_0x2e56bf,_0x3101af["fX"]<=1&&_0x3101af["fY"]<=1&&_0x3101af["fX"]>=0&&_0x3101af["fY"]>=0){var _0xcfbb7f=this["nOriPTZPointNum"][_0x47f60f];this["pOriPTZPoints"][_0x47f60f][_0xcfbb7f]["fX"]=_0x3101af["fX"],this["pOriPTZPoints"][_0x47f60f][_0xcfbb7f]["fY"]=_0x3101af["fY"],this["nOriPTZPointNum"][_0x47f60f]=this["nOriPTZPointNum"][_0x47f60f]+1}return _0x31e0fd}},{key:"GetFishPTZFloor",value:function value(_0x363535,_0x43fc59,_0x562254){var _0xae10d0,_0x428277,_0x23dfca,_0x15d249,_0x23e3d9,_0x505538,_0x4cce8d,_0x1dc827={fX:0,fY:0},_0x17810c={fX:0,fY:0},_0x2bb069={fX:0,fY:0},_0x21b732={};_0x15d249=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x23e3d9=(this["fRX1"]+this["fRX2"])/2*1,_0x505538=(this["fRY1"]+this["fRY2"])/2*_0x15d249,_0x4cce8d=(this["fRX2"]-this["fRX1"])/2*1,_0x1dc827["fX"]=_0x363535-.5,_0x1dc827["fY"]=_0x43fc59-.5,_0xae10d0=this["pRenderParam"][_0x562254]["fZoom"],_0x17810c["fX"]=_0x1dc827["fX"],_0x17810c["fY"]=_0x1dc827["fY"]*this["pRenderParam"][_0x562254]["fCosV"]+_0xae10d0*this["pRenderParam"][_0x562254]["fSinV"],_0x428277=_0xae10d0*this["pRenderParam"][_0x562254]["fCosV"]-_0x1dc827["fY"]*this["pRenderParam"][_0x562254]["fSinV"],_0x23dfca=Math["sqrt"](_0x17810c["fX"]*_0x17810c["fX"]+_0x17810c["fY"]*_0x17810c["fY"]);var _0x595481=Math["sqrt"](_0x17810c["fX"]*_0x17810c["fX"]+_0x17810c["fY"]*_0x17810c["fY"]+_0x428277*_0x428277),_0x1eef3c=Math["asin"](_0x23dfca/_0x595481)/1.5707963*.5;_0x17810c["fX"]=_0x1eef3c*_0x17810c["fX"]/_0x23dfca,_0x17810c["fY"]=_0x1eef3c*_0x17810c["fY"]/_0x23dfca,_0x2bb069["fX"]=_0x17810c["fX"]*this["pRenderParam"][_0x562254]["fCosH"]-_0x17810c["fY"]*this["pRenderParam"][_0x562254]["fSinH"],_0x2bb069["fY"]=_0x17810c["fX"]*this["pRenderParam"][_0x562254]["fSinH"]+_0x17810c["fY"]*this["pRenderParam"][_0x562254]["fCosH"],_0x21b732["fX"]=2*_0x2bb069["fX"]*_0x4cce8d+_0x23e3d9,_0x21b732["fY"]=2*_0x2bb069["fY"]*_0x4cce8d+_0x505538;var _0x3c840e=this["nBasePTZPointNum"][_0x562254];this["pBasePTZPoints"][_0x562254][_0x3c840e]["fX"]=_0x2bb069["fX"]+.5,this["pBasePTZPoints"][_0x562254][_0x3c840e]["fY"]=_0x2bb069["fY"]+.5,this["nBasePTZPointNum"][_0x562254]=this["nBasePTZPointNum"][_0x562254]+1;var _0x2e41ce=this["fRX1"]<=0?0:1*this["fRX1"],_0x1bf964=this["fRY1"]<=0?0:this["fRY1"]*_0x15d249,_0x4a943e=this["fRX2"]>=1?1-_0x2e41ce:1*this["fRX2"]-_0x2e41ce,_0x9ba302=this["fRY2"]>=1?_0x15d249-_0x1bf964:this["fRY2"]*_0x15d249-_0x1bf964;if(_0x21b732["fX"]=(_0x21b732["fX"]-_0x2e41ce)/_0x4a943e,_0x21b732["fY"]=(_0x21b732["fY"]-_0x1bf964)/_0x9ba302,_0x21b732["fX"]<=1&&_0x21b732["fY"]<=1&&_0x21b732["fX"]>=0&&_0x21b732["fY"]>=0){var _0x25ef5f=this["nOriPTZPointNum"][_0x562254];this["pOriPTZPoints"][_0x562254][_0x25ef5f]["fX"]=_0x21b732["fX"],this["pOriPTZPoints"][_0x562254][_0x25ef5f]["fY"]=_0x21b732["fY"],this["nOriPTZPointNum"][_0x562254]=this["nOriPTZPointNum"][_0x562254]+1}return _0x31e0fd}},{key:"GetFishPTZWALL",value:function value(_0x136054,_0x221f0d,_0x3c51a5){var _0x30b877,_0x408d90,_0x1edd60,_0x1f373f,_0x16ff3a,_0x2d6385,_0x3bbe00,_0xe01697,_0x11011d={fX:0,fY:0},_0x2482a1={fX:0,fY:0},_0x18ffcc={fX:0,fY:0},_0x9436b3={};_0x16ff3a=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x2d6385=(this["fRX1"]+this["fRX2"])/2*1,_0x3bbe00=(this["fRY1"]+this["fRY2"])/2*_0x16ff3a,_0xe01697=(this["fRX2"]-this["fRX1"])/2*1,_0x11011d["fX"]=_0x221f0d-.5,_0x11011d["fY"]=_0x136054-.5,_0x30b877=this["pRenderParam"][_0x3c51a5]["fZoom"],_0x2482a1["fX"]=_0x11011d["fX"],_0x2482a1["fY"]=_0x11011d["fY"]*this["pRenderParam"][_0x3c51a5]["fCosV"]+_0x30b877*this["pRenderParam"][_0x3c51a5]["fSinV"],_0x408d90=_0x30b877*this["pRenderParam"][_0x3c51a5]["fCosV"]-_0x11011d["fY"]*this["pRenderParam"][_0x3c51a5]["fSinV"],_0x18ffcc["fX"]=_0x2482a1["fX"]*this["pRenderParam"][_0x3c51a5]["fCosH"]+_0x408d90*this["pRenderParam"][_0x3c51a5]["fSinH"],_0x18ffcc["fY"]=_0x2482a1["fY"],_0x1edd60=_0x408d90*this["pRenderParam"][_0x3c51a5]["fCosH"]-_0x2482a1["fX"]*this["pRenderParam"][_0x3c51a5]["fSinH"],_0x1f373f=Math["sqrt"](_0x18ffcc["fX"]*_0x18ffcc["fX"]+_0x18ffcc["fY"]*_0x18ffcc["fY"]);var _0x41f4c0=Math["sqrt"](_0x18ffcc["fX"]*_0x18ffcc["fX"]+_0x18ffcc["fY"]*_0x18ffcc["fY"]+_0x1edd60*_0x1edd60),_0x300b10=Math["asin"](_0x1f373f/_0x41f4c0)/1.5707963*.5;_0x9436b3["fX"]=_0x300b10*_0x18ffcc["fX"]/_0x1f373f*_0xe01697*2+_0x2d6385,_0x9436b3["fY"]=_0x300b10*_0x18ffcc["fY"]/_0x1f373f*_0xe01697*2+_0x3bbe00;var _0x55d3ed=this["nBasePTZPointNum"][_0x3c51a5];this["pBasePTZPoints"][_0x3c51a5][_0x55d3ed]["fX"]=_0x300b10*_0x18ffcc["fX"]/_0x1f373f+.5,this["pBasePTZPoints"][_0x3c51a5][_0x55d3ed]["fY"]=_0x300b10*_0x18ffcc["fY"]/_0x1f373f+.5,this["nBasePTZPointNum"][_0x3c51a5]=this["nBasePTZPointNum"][_0x3c51a5]+1;var _0x4d619c=this["fRX1"]<=0?0:1*this["fRX1"],_0xa22891=this["fRY1"]<=0?0:this["fRY1"]*_0x16ff3a,_0x50f136=this["fRX2"]>=1?1-_0x4d619c:1*this["fRX2"]-_0x4d619c,_0x47782e=this["fRY2"]>=1?_0x16ff3a-_0xa22891:this["fRY2"]*_0x16ff3a-_0xa22891;if(_0x9436b3["fX"]=(_0x9436b3["fX"]-_0x4d619c)/_0x50f136,_0x9436b3["fY"]=(_0x9436b3["fY"]-_0xa22891)/_0x47782e,_0x9436b3["fX"]<=1&&_0x9436b3["fY"]<=1&&_0x9436b3["fX"]>=0&&_0x9436b3["fY"]>=0){var _0x408d49=this["nOriPTZPointNum"][_0x3c51a5];this["pOriPTZPoints"][_0x3c51a5][_0x408d49]["fX"]=_0x9436b3["fX"],this["pOriPTZPoints"][_0x3c51a5][_0x408d49]["fY"]=_0x9436b3["fY"],this["nOriPTZPointNum"][_0x3c51a5]=this["nOriPTZPointNum"][_0x3c51a5]+1}return _0x31e0fd}},{key:"GetPanoPTZCeiling",value:function value(_0x1ecaba){if(null==this["pRenderParam"][_0x1ecaba]||null==this["pRenderParam"][this["nWndPort"]])return _0x27ff6b;if(null==this["pBasePTZPoints"][_0x1ecaba])return _0x27ff6b;var _0x447e7c,_0x277d59,_0x271671=this["nBasePTZPointNum"][_0x1ecaba];_0x447e7c=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x277d59=(this["fRX2"]-this["fRX1"])/2*1;var _0x5191ec,_0x1d98d0=0;(this["fRX2"]>1||this["fRY2"]>1||this["fRY1"]<0||this["fRX1"]<0)&&(this["fRX1"]<0&&(_0x5191ec=1*-this["fRX1"])>_0x1d98d0&&(_0x1d98d0=_0x5191ec),this["fRX2"]>1&&(_0x5191ec=1*(this["fRX2"]-1))>_0x1d98d0&&(_0x1d98d0=_0x5191ec),this["fRY1"]<0&&(_0x5191ec=-this["fRY1"]*_0x447e7c)>_0x1d98d0&&(_0x1d98d0=_0x5191ec),this["fRY2"]>1&&(_0x5191ec=(this["fRY2"]-1)*_0x447e7c)>_0x1d98d0&&(_0x1d98d0=_0x5191ec));for(var _0x35f985,_0x2eb55d=_0x1d98d0/_0x277d59,_0xa964a4={fX:0,fY:0},_0x17c584={fX:0,fY:0},_0x403d83=0;_0x403d83<_0x271671;++_0x403d83)if(_0x17c584["fX"]=this["pBasePTZPoints"][_0x1ecaba][_0x403d83]["fX"],_0x17c584["fY"]=this["pBasePTZPoints"][_0x1ecaba][_0x403d83]["fY"],!(Math["abs"](_0x17c584["fX"]-.5)<_0x2fc9a7&&Math["abs"](_0x17c584["fY"]-.5)<_0x2fc9a7)){var _0x292efb={fX:0,fY:0},_0x480f3d={fX:0,fY:0};_0x292efb["fX"]=_0x17c584["fX"]-.5,_0x292efb["fY"]=_0x17c584["fY"]-.5,_0x480f3d["fX"]=-.5*Math["sin"](this["pRenderParam"][this["nWndPort"]]["fAngle"]),_0x480f3d["fY"]=.5*Math["cos"](this["pRenderParam"][this["nWndPort"]]["fAngle"]);var _0x186b5d=Math["sqrt"](_0x292efb["fX"]*_0x292efb["fX"]+_0x292efb["fY"]*_0x292efb["fY"]),_0x1fb9d6=Math["sqrt"](_0x480f3d["fX"]*_0x480f3d["fX"]+_0x480f3d["fY"]*_0x480f3d["fY"]);if(_0x35f985=Math["acos"]((_0x292efb["fX"]*_0x480f3d["fX"]+_0x292efb["fY"]*_0x480f3d["fY"])/(_0x186b5d*_0x1fb9d6)),_0x292efb["fX"]*_0x480f3d["fY"]-_0x292efb["fY"]*_0x480f3d["fX"]>0&&(_0x35f985=6.2831852-_0x35f985),_0xa964a4["fX"]=_0x35f985/6.2831853,_0xa964a4["fY"]=(2*(.5-_0x186b5d)-_0x2eb55d)/(.8-_0x2eb55d),_0xa964a4["fY"]>=0&&_0xa964a4["fX"]>=0&&_0xa964a4["fY"]<=1&&_0xa964a4["fX"]<=1){var _0x1706d4=this["nPanoPTZPointNum"][_0x1ecaba];this["pPanoPTZPoints"][_0x1ecaba][_0x1706d4]["fX"]=_0xa964a4["fX"],this["pPanoPTZPoints"][_0x1ecaba][_0x1706d4]["fY"]=_0xa964a4["fY"],this["nPanoPTZPointNum"][_0x1ecaba]=this["nPanoPTZPointNum"][_0x1ecaba]+1}}return _0x31e0fd}},{key:"GetPanoPTZFloor",value:function value(_0xbf97e4){if(null==this["pRenderParam"][_0xbf97e4]||null==this["pRenderParam"][this["nWndPort"]])return _0x27ff6b;if(null==this["pBasePTZPoints"][_0xbf97e4])return _0x27ff6b;var _0x41674d,_0x56fd1b,_0x275765=this["nBasePTZPointNum"][_0xbf97e4];_0x41674d=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x56fd1b=(this["fRX2"]-this["fRX1"])/2*1;var _0x4c618f,_0x408d71=0;(this["fRX2"]>1||this["fRY2"]>1||this["fRY1"]<0||this["fRX1"]<0)&&(this["fRX1"]<0&&(_0x4c618f=1*-this["fRX1"])>_0x408d71&&(_0x408d71=_0x4c618f),this["fRX2"]>1&&(_0x4c618f=1*(this["fRX2"]-1))>_0x408d71&&(_0x408d71=_0x4c618f),this["fRY1"]<0&&(_0x4c618f=-this["fRY1"]*_0x41674d)>_0x408d71&&(_0x408d71=_0x4c618f),this["fRY2"]>1&&(_0x4c618f=(this["fRY2"]-1)*_0x41674d)>_0x408d71&&(_0x408d71=_0x4c618f));for(var _0x353049,_0x4f9694=_0x408d71/_0x56fd1b,_0x5078eb={fX:0,fY:0},_0x48500c={fX:0,fY:0},_0x1c8cb3=0;_0x1c8cb3<_0x275765;++_0x1c8cb3)if(_0x48500c["fX"]=this["pBasePTZPoints"][_0xbf97e4][_0x1c8cb3]["fX"],_0x48500c["fY"]=this["pBasePTZPoints"][_0xbf97e4][_0x1c8cb3]["fY"],!(Math["abs"](_0x48500c["fX"]-.5)<_0x2fc9a7&&Math["abs"](_0x48500c["fY"]-.5)<_0x2fc9a7)){var _0x1d09f7={fX:0,fY:0},_0x59930c={fX:0,fY:0};_0x1d09f7["fX"]=_0x48500c["fX"]-.5,_0x1d09f7["fY"]=_0x48500c["fY"]-.5,_0x59930c["fX"]=-.5*Math["sin"](this["pRenderParam"][this["nWndPort"]]["fAngle"]),_0x59930c["fY"]=.5*Math["cos"](this["pRenderParam"][this["nWndPort"]]["fAngle"]);var _0x2ac06b=Math["sqrt"](_0x1d09f7["fX"]*_0x1d09f7["fX"]+_0x1d09f7["fY"]*_0x1d09f7["fY"]),_0x23b928=Math["sqrt"](_0x59930c["fX"]*_0x59930c["fX"]+_0x59930c["fY"]*_0x59930c["fY"]);if(_0x353049=Math["acos"]((_0x1d09f7["fX"]*_0x59930c["fX"]+_0x1d09f7["fY"]*_0x59930c["fY"])/(_0x2ac06b*_0x23b928)),_0x1d09f7["fX"]*_0x59930c["fY"]-_0x1d09f7["fY"]*_0x59930c["fX"]>0&&(_0x353049=6.2831852-_0x353049),_0x5078eb["fX"]=1-_0x353049/6.2831853,_0x5078eb["fY"]=1-(2*(.5-_0x2ac06b)-_0x4f9694)/(.8-_0x4f9694),_0x5078eb["fY"]>=0&&_0x5078eb["fX"]>=0&&_0x5078eb["fY"]<=1&&_0x5078eb["fX"]<=1){var _0x2158eb=this["nPanoPTZPointNum"][_0xbf97e4];this["pPanoPTZPoints"][_0xbf97e4][_0x2158eb]["fX"]=_0x5078eb["fX"],this["pPanoPTZPoints"][_0xbf97e4][_0x2158eb]["fY"]=_0x5078eb["fY"],this["nPanoPTZPointNum"][_0xbf97e4]=this["nPanoPTZPointNum"][_0xbf97e4]+1}}return _0x31e0fd}},{key:"GetPanoPTZWall",value:function value(_0xabcee7){if(null==this["pRenderParam"][_0xabcee7]||null==this["pRenderParam"][this["nWndPort"]])return _0x27ff6b;if(null==this["pBasePTZPoints"][_0xabcee7])return _0x27ff6b;var _0x101d8b,_0x4caa1c,_0x20f855=this["nBasePTZPointNum"][_0xabcee7];_0x101d8b=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x4caa1c=(this["fRX2"]-this["fRX1"])/2*1;var _0x30162a,_0x20ce0e,_0x1cce0e,_0x2dcd3a,_0x3ad142,_0xf6e4f5=0,_0x34dfd1=1,_0xc4b742=.1,_0xc37011=.9;this["fRX1"]<0&&(_0x30162a=1*-this["fRX1"],_0xf6e4f5=_0x30162a/=2*_0x4caa1c),this["fRX2"]>1&&(_0x20ce0e=1*(this["fRX2"]-1),_0x34dfd1=1-(_0x20ce0e/=2*_0x4caa1c)),this["fRY1"]<0&&(_0x1cce0e=-this["fRY1"]*_0x101d8b,_0xc4b742=(_0x1cce0e/=2*_0x4caa1c)>.1?_0x1cce0e:.1),this["fRY2"]>1&&(_0x2dcd3a=(this["fRY2"]-1)*_0x101d8b,_0xc37011=(_0x2dcd3a/=2*_0x4caa1c)>1-.9?1-_0x2dcd3a:.9);for(var _0x1f1102={fX:0,fY:0},_0x8753c6={fX:0,fY:0},_0xbcecc=0;_0xbcecc<_0x20f855;++_0xbcecc){_0x8753c6["fX"]=this["pBasePTZPoints"][_0xabcee7][_0xbcecc]["fX"],_0x8753c6["fY"]=this["pBasePTZPoints"][_0xabcee7][_0xbcecc]["fY"];var _0x5ed49f=2*_0x8753c6["fX"]*_0x4caa1c,_0x46aa03=2*_0x8753c6["fY"]*_0x4caa1c;if(_0x3ad142=Math["sqrt"](_0x4caa1c*_0x4caa1c-(_0x46aa03-_0x4caa1c)*(_0x46aa03-_0x4caa1c)),!(Math["abs"](_0x3ad142)<_0x2fc9a7)&&(_0x8753c6["fX"]=_0x4caa1c*(_0x5ed49f-_0x4caa1c)/_0x3ad142+_0x4caa1c,_0x8753c6["fY"]=_0x46aa03,_0x1f1102["fX"]=(_0x8753c6["fX"]-2*_0xf6e4f5*_0x4caa1c)/(2*(_0x34dfd1-_0xf6e4f5)*_0x4caa1c),_0x1f1102["fY"]=(_0x8753c6["fY"]-2*_0xc4b742*_0x4caa1c)/(2*(_0xc37011-_0xc4b742)*_0x4caa1c),_0x1f1102["fY"]>=0&&_0x1f1102["fX"]>=0&&_0x1f1102["fY"]<=1&&_0x1f1102["fX"]<=1)){var _0x40dd24=this["nPanoPTZPointNum"][_0xabcee7];this["pPanoPTZPoints"][_0xabcee7][_0x40dd24]["fX"]=_0x1f1102["fX"],this["pPanoPTZPoints"][_0xabcee7][_0x40dd24]["fY"]=_0x1f1102["fY"],this["nPanoPTZPointNum"][_0xabcee7]=this["nPanoPTZPointNum"][_0xabcee7]+1}}return _0x31e0fd}},{key:"GetPointPano2FishCeiling",value:function value(_0x4fdd0d,_0x4aa97c,_0x5bb981){if(null==_0x4fdd0d||null==this["pRenderParam"][this["nWndPort"]])return _0x27ff6b;var _0x5953c4,_0x1ffe0f;_0x5953c4=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x1ffe0f=(this["fRX2"]-this["fRX1"])/2*1;var _0x367ae3,_0x25010c=0,_0x5e0215=1,_0x41a90c=0,_0x52f199=1,_0x3446e5=0;(this["fRX2"]>1||this["fRY2"]>1||this["fRX1"]<0||this["fRY1"]<0)&&(this["fRX1"]<0&&((_0x367ae3=1*-this["fRX1"])>_0x3446e5&&(_0x3446e5=_0x367ae3),_0x25010c=_0x367ae3/=2*_0x1ffe0f),this["fRX2"]>1&&((_0x367ae3=1*(this["fRX2"]-1))>_0x3446e5&&(_0x3446e5=_0x367ae3),_0x5e0215=1-(_0x367ae3/=2*_0x1ffe0f)),this["fRY1"]<0&&((_0x367ae3=-this["fRY1"]*_0x5953c4)>_0x3446e5&&(_0x3446e5=_0x367ae3),_0x41a90c=_0x367ae3/=2*_0x1ffe0f),this["fRY2"]>1&&((_0x367ae3=(this["fRY2"]-1)*_0x5953c4)>_0x3446e5&&(_0x3446e5=_0x367ae3),_0x52f199=1-(_0x367ae3/=2*_0x1ffe0f)));var _0x34f512,_0x45a4a8,_0x2e8351=_0x3446e5/_0x1ffe0f,_0x30cdeb={},_0x5946a9={};return _0x30cdeb["fX"]=_0x4aa97c,_0x30cdeb["fY"]=(.8-_0x2e8351)*_0x5bb981+_0x2e8351,_0x34f512=6.2831853*_0x30cdeb["fX"]+this["pRenderParam"][this["nWndPort"]]["fAngle"],_0x45a4a8=.5*(1-_0x30cdeb["fY"]),_0x5946a9["fX"]=.5-_0x45a4a8*Math["sin"](_0x34f512),_0x5946a9["fY"]=.5+_0x45a4a8*Math["cos"](_0x34f512),_0x5946a9["fX"]=(_0x5946a9["fX"]-_0x25010c)/(_0x5e0215-_0x25010c),_0x5946a9["fY"]=(_0x5946a9["fY"]-_0x41a90c)/(_0x52f199-_0x41a90c),_0x4fdd0d["fX"]=_0x5946a9["fX"],_0x4fdd0d["fY"]=_0x5946a9["fY"],_0x31e0fd}},{key:"GetPointPano2FishFloor",value:function value(_0x843d6,_0x3bbce3,_0x2b7b22){if(null==this["pRenderParam"][this["nWndPort"]])return _0x27ff6b;if(null==_0x843d6)return _0x592c4b;var _0x3fec0e,_0x568499;_0x3fec0e=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x568499=(this["fRX2"]-this["fRX1"])/2*1;var _0x328114,_0x84009c=0,_0x255c92=1,_0x1ff56c=0,_0x2e0d59=1,_0x29789e=0;(this["fRX2"]>1||this["fRY2"]>1||this["fRX1"]<0||this["fRY1"]<0)&&(this["fRX1"]<0&&((_0x328114=1*-this["fRX1"])>_0x29789e&&(_0x29789e=_0x328114),_0x84009c=_0x328114/=2*_0x568499),this["fRX2"]>1&&((_0x328114=1*(this["fRX2"]-1))>_0x29789e&&(_0x29789e=_0x328114),_0x255c92=1-(_0x328114/=2*_0x568499)),this["fRY1"]<0&&((_0x328114=-this["fRY1"]*_0x3fec0e)>_0x29789e&&(_0x29789e=_0x328114),_0x1ff56c=_0x328114/=2*_0x568499),this["fRY2"]>1&&((_0x328114=(this["fRY2"]-1)*_0x3fec0e)>_0x29789e&&(_0x29789e=_0x328114),_0x2e0d59=1-(_0x328114/=2*_0x568499)));var _0x563b9f,_0x285938,_0x4f102a=_0x29789e/_0x568499,_0x14b586={},_0x2dac4b={};return _0x14b586["fX"]=1-_0x3bbce3,_0x14b586["fY"]=(.8-_0x4f102a)*(1-_0x2b7b22)+_0x4f102a,_0x563b9f=6.2831853*_0x14b586["fX"]+this["pRenderParam"][this["nWndPort"]]["fAngle"],_0x285938=.5*(1-_0x14b586["fY"]),_0x2dac4b["fX"]=.5-_0x285938*Math["sin"](_0x563b9f),_0x2dac4b["fY"]=.5+_0x285938*Math["cos"](_0x563b9f),_0x2dac4b["fX"]=(_0x2dac4b["fX"]-_0x84009c)/(_0x255c92-_0x84009c),_0x2dac4b["fY"]=(_0x2dac4b["fY"]-_0x1ff56c)/(_0x2e0d59-_0x1ff56c),_0x843d6["fX"]=_0x2dac4b["fX"],_0x843d6["fY"]=_0x2dac4b["fY"],_0x31e0fd}},{key:"GetPointPano2FishWall",value:function value(_0x9889ad,_0x1abc99,_0x155b2b){if(null==this["pRenderParam"][this["nWndPort"]])return _0x27ff6b;if(null==_0x9889ad)return _0x592c4b;var _0x50498e,_0x2285aa;_0x50498e=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x2285aa=(this["fRX2"]-this["fRX1"])/2*1;var _0x519c5f,_0x56f9bf,_0xf4694d,_0x167196,_0x2db65d=0,_0x245b86=1,_0x365d3f=.1,_0x573d9c=.9,_0x1597cb=0,_0x96ee8=1,_0x48e2d3=0,_0x40db02=1;this["fRX1"]<0&&(_0x519c5f=1*-this["fRX1"],_0x2db65d=_0x519c5f/=2*_0x2285aa,_0x1597cb=_0x519c5f),this["fRX2"]>1&&(_0x56f9bf=1*(this["fRX2"]-1),_0x245b86=1-(_0x56f9bf/=2*_0x2285aa),_0x96ee8=1-_0x56f9bf),this["fRY1"]<0&&(_0xf4694d=-this["fRY1"]*_0x50498e,_0x365d3f=(_0xf4694d/=2*_0x2285aa)>.1?_0xf4694d:.1,_0x48e2d3=_0xf4694d),this["fRY2"]>1&&(_0x167196=(this["fRY2"]-1)*_0x50498e,_0x573d9c=(_0x167196/=2*_0x2285aa)>1-.9?1-_0x167196:.9,_0x40db02=1-_0x167196);var _0x517f0d={},_0x473dd1={};_0x517f0d["fX"]=_0x1abc99*(_0x245b86-_0x2db65d)+_0x2db65d,_0x517f0d["fY"]=_0x155b2b*(_0x573d9c-_0x365d3f)+_0x365d3f;var _0x4f177c=Math["sqrt"](.25-(_0x517f0d["fY"]-.5)*(_0x517f0d["fY"]-.5));return _0x473dd1["fX"]=(_0x517f0d["fX"]-.5)*_0x4f177c/.5+.5,_0x473dd1["fY"]=_0x517f0d["fY"],_0x473dd1["fX"]=(_0x473dd1["fX"]-_0x1597cb)/(_0x96ee8-_0x1597cb),_0x473dd1["fY"]=(_0x473dd1["fY"]-_0x48e2d3)/(_0x40db02-_0x48e2d3),_0x9889ad["fX"]=_0x473dd1["fX"],_0x9889ad["fY"]=_0x473dd1["fY"],_0x31e0fd}},{key:"UpdatePTZPosition",value:function value(_0x3410c0,_0x429be6,_0x1c7fa9){if(null==this["pRenderParam"][_0x3410c0])return _0x27ff6b;var _0x35217d={fHAngleSin:0,fHAngleCos:0,fVAngleSin:0,fVAngleCos:0},_0x114db4=_0x31e0fd;if(_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]==this["pRenderParam"][_0x3410c0]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]==this["pRenderParam"][_0x3410c0]["nDisplayEffect"]){if((_0x114db4=this["ComputeAngleVertical"](_0x429be6,_0x1c7fa9,_0x35217d,this["pRenderParam"][_0x3410c0]["nDisplayEffect"]))!=_0x31e0fd)return _0x114db4}else{if(_0x2bffb5["SR_DE_FISH_PTZ_WALL"]!=this["pRenderParam"][_0x3410c0]["nDisplayEffect"])return _0x1b8a99;if((_0x114db4=this["ComputeAngleHorizontal"](_0x429be6,_0x1c7fa9,_0x35217d))!=_0x31e0fd)return _0x114db4}return 0==this["IsInImage"](this["fRX1"],this["fRX2"],this["fRY1"],this["fRY2"],_0x35217d,this["pRenderParam"][_0x3410c0]["fZoom"],this["pRenderParam"][_0x3410c0]["nDisplayEffect"])?_0x592c4b:(this["pRenderParam"][_0x3410c0]["fCosH"]=_0x35217d["fHAngleCos"],this["pRenderParam"][_0x3410c0]["fSinH"]=_0x35217d["fHAngleSin"],this["pRenderParam"][_0x3410c0]["fCosV"]=_0x35217d["fVAngleCos"],this["pRenderParam"][_0x3410c0]["fSinV"]=_0x35217d["fVAngleSin"],_0x31e0fd)}},{key:"JudgeDisplayEffect",value:function value(_0x2c8fc7){var _0xb78ac6=0;switch(_0xb78ac6){case 0:return _0xb78ac6=this["GetPlaceType"](_0x2c8fc7),4==this["nPlaceType"]&&(this["nPlaceType"]=0),_0x31e0fd;case 3:return(_0xb78ac6=this["GetPlaceType"](_0x2c8fc7))==this["nPlaceType"]||4==this["nPlaceType"]?_0x31e0fd:_0x1b8a99;case 2:case 1:return(_0xb78ac6=this["GetPlaceType"](_0x2c8fc7))==this["nPlaceType"]||4==_0xb78ac6?_0x31e0fd:_0x1b8a99;default:return _0x1b8a99}return _0x1b8a99}},{key:"GetPlaceType",value:function value(_0x49feb3){switch(_0x49feb3){case _0x2bffb5["SR_DE_FISH_PTZ_CEILING"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_CEILING"]:return 3;case _0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]:case _0x2bffb5["SR_DE_FISH_PANARAMA_FLOOR_180"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]:case _0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_FLOOR"]:return 2;case _0x2bffb5["SR_DE_FISH_PTZ_WALL"]:case _0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:case _0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]:case _0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]:return 1;case _0x2bffb5["SR_DE_FISH_SEMISPHERE"]:case _0x2bffb5["SR_DE_FISH_ORIGINAL"]:case _0x2bffb5["SR_DE_FISH_PLANET"]:case _0x2bffb5["SR_DE_FISH_SPHERE"]:case _0x2bffb5["SR_DE_FISH_PLANET"]:return 4;default:return 0}return 0}},{key:"SetFishParam",value:function value(_0xff0beb,_0x162ed0){if(_0xff0beb<0||_0xff0beb>=_0x36131b)return _0x592c4b;if(null==_0x162ed0)return _0x592c4b;if(null==this["pRenderParam"][_0xff0beb])return _0x27ff6b;var _0x342432=_0x31e0fd;switch(_0x162ed0["nFishParamType"]){case _0x3d41fb:if((_0x342432=this["UpdateCircyeParam"](_0x162ed0["fRXLeft"],_0x162ed0["fRXRight"],_0x162ed0["fRYTop"],_0x162ed0["fRYBottom"]))!=_0x31e0fd)return _0x342432;this["pRenderParam"][_0xff0beb]["bCut"]=_0x162ed0["bCut"],this["bBlack"]=_0x162ed0["bBlack"];break;case _0x4e6902:if(_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]!=this["pRenderParam"][_0xff0beb]["nDisplayEffect"]&&_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]!=this["pRenderParam"][_0xff0beb]["nDisplayEffect"]&&_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]!=this["pRenderParam"][_0xff0beb]["nDisplayEffect"]&&_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]!=this["pRenderParam"][_0xff0beb]["nDisplayEffect"])return _0x1b8a99;if((_0x342432=this["UpdateWideScanAngle"](_0xff0beb,_0x162ed0["fAngle"]))!=_0x31e0fd)return _0x342432;this["pFishParam"][_0xff0beb]["fAngle"]=_0x162ed0["fAngle"];break;case _0x5b2108:if(_0x2bffb5["SR_DE_FISH_PTZ_WALL"]!=this["pRenderParam"][_0xff0beb]["nDisplayEffect"]&&_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]!=this["pRenderParam"][_0xff0beb]["nDisplayEffect"]&&_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]!=this["pRenderParam"][_0xff0beb]["nDisplayEffect"])return _0x1b8a99;if((_0x342432=this["UpdateRangeParam"](_0xff0beb,_0x162ed0["fZoom"]))!=_0x31e0fd)return _0x342432;this["pFishParam"][_0xff0beb]["fZoom"]=_0x162ed0["fZoom"];break;case _0xe75037:if(_0x2bffb5["SR_DE_FISH_PTZ_WALL"]!=this["pRenderParam"][_0xff0beb]["nDisplayEffect"]&&_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]!=this["pRenderParam"][_0xff0beb]["nDisplayEffect"]&&_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]!=this["pRenderParam"][_0xff0beb]["nDisplayEffect"])return _0x1b8a99;if((_0x342432=this["UpdatePTZPosition"](_0xff0beb,_0x162ed0["fPTZX"],_0x162ed0["fPTZY"],this["pRenderParam"][_0xff0beb]["fZoom"],!0))!=_0x31e0fd)return _0x342432;this["pFishParam"][_0xff0beb]["fPTZX"]=_0x162ed0["fPTZX"],this["pFishParam"][_0xff0beb]["fPTZY"]=_0x162ed0["fPTZY"];break;default:return _0x1b8a99}return _0x342432=this["ComputePTZPoints"]()}},{key:"GetFishParam",value:function value(_0xc70378,_0x25db52){return _0xc70378<0||_0xc70378>=_0x36131b||null==_0x25db52||null==this["pFishParam"][_0xc70378]?_0x592c4b:(_0x25db52["fRXLeft"]=this["fRX1"],_0x25db52["fRXRight"]=this["fRX2"],_0x25db52["fRYTop"]=this["fRY1"],_0x25db52["fRYBottom"]=this["fRY2"],_0x25db52["bBlack"]=this["bBlack"],_0x25db52["bCut"]=this["pRenderParam"][_0xc70378]["bCut"],_0x25db52["nFishParamType"]=this["pFishParam"][_0xc70378]["nFishParamType"],_0x25db52["fAngle"]=this["pFishParam"][_0xc70378]["fAngle"],_0x25db52["fZoom"]=this["pFishParam"][_0xc70378]["fZoom"],_0x25db52["fPTZX"]=this["pFishParam"][_0xc70378]["fPTZX"],_0x25db52["fPTZY"]=this["pFishParam"][_0xc70378]["fPTZY"],_0x31e0fd)}},{key:"GetRenderParam",value:function value(_0x2ee605,_0x4a4ec8){return _0x2ee605<0||_0x2ee605>=_0x36131b||null==_0x4a4ec8||null==this["pRenderParam"][_0x2ee605]?_0x592c4b:(_0x4a4ec8["fRXLeft"]=this["fRX1"],_0x4a4ec8["fRXRight"]=this["fRX2"],_0x4a4ec8["fRYTop"]=this["fRY1"],_0x4a4ec8["fRYBottom"]=this["fRY2"],_0x4a4ec8["bBlack"]=this["bBlack"],_0x4a4ec8["fCosH"]=this["pRenderParam"][_0x2ee605]["fCosH"],_0x4a4ec8["fSinH"]=this["pRenderParam"][_0x2ee605]["fSinH"],_0x4a4ec8["fCosV"]=this["pRenderParam"][_0x2ee605]["fCosV"],_0x4a4ec8["fSinV"]=this["pRenderParam"][_0x2ee605]["fSinV"],_0x4a4ec8["fAngle"]=this["pRenderParam"][_0x2ee605]["fAngle"],_0x4a4ec8["fZoom"]=this["pRenderParam"][_0x2ee605]["fZoom"],_0x4a4ec8["nDisplayEffect"]=this["pRenderParam"][_0x2ee605]["nDisplayEffect"],_0x4a4ec8["bCut"]=this["pRenderParam"][_0x2ee605]["bCut"],_0x31e0fd)}},{key:"UpdateCircyeParam",value:function value(_0x43ad54,_0x335efc,_0x2038b8,_0x51d109){if(_0x43ad54<=-.5||_0x43ad54>=.4||_0x335efc<=.6||_0x335efc>=1.5||_0x2038b8<=-.5||_0x2038b8>=.4||_0x51d109<=.6||_0x51d109>=1.5||_0x43ad54+_0x335efc<=.8||_0x43ad54+_0x335efc>=1.2||_0x2038b8+_0x51d109<=.8||_0x2038b8+_0x51d109>=1.2)return _0x592c4b;if(_0x43ad54<0||_0x335efc>1||_0x2038b8<0||_0x51d109>1){for(var _0x3f764b=0;_0x3f764b<_0x36131b;++_0x3f764b)if(null!=this["pRenderParam"][_0x3f764b]&&(_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]==this["pRenderParam"][_0x3f764b]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]==this["pRenderParam"][_0x3f764b]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PTZ_WALL"]==this["pRenderParam"][_0x3f764b]["nDisplayEffect"])){var _0x1f6447={};if(_0x1f6447["fHAngleCos"]=this["pRenderParam"][_0x3f764b]["fCosH"],_0x1f6447["fHAngleSin"]=this["pRenderParam"][_0x3f764b]["fSinH"],_0x1f6447["fVAngleCos"]=this["pRenderParam"][_0x3f764b]["fCosV"],_0x1f6447["fVAngleSin"]=this["pRenderParam"][_0x3f764b]["fSinV"],0==this["IsInImage"](_0x43ad54,_0x335efc,_0x2038b8,_0x51d109,_0x1f6447,this["pRenderParam"][_0x3f764b]["fZoom"],this["pRenderParam"][_0x3f764b]["nDisplayEffect"]))return _0x592c4b}}return this["fRX1"]=_0x43ad54,this["fRX2"]=_0x335efc,this["fRY1"]=_0x2038b8,this["fRY2"]=_0x51d109,_0x31e0fd}},{key:"UpdateWideScanAngle",value:function value(_0x3774f6,_0x31b04d){return null==this["pRenderParam"][_0x3774f6]?_0x27ff6b:(_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]==this["pRenderParam"][_0x3774f6]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]==this["pRenderParam"][_0x3774f6]["nDisplayEffect"]?this["pRenderParam"][_0x3774f6]["fAngle"]=_0x31b04d:_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]!=this["pRenderParam"][_0x3774f6]["nDisplayEffect"]&&_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]!=this["pRenderParam"][_0x3774f6]["nDisplayEffect"]||(this["pRenderParam"][_0x3774f6]["fAngle"]=-_0x31b04d),_0x31e0fd)}},{key:"ComputeAngleVertical",value:function value(_0x2a21f0,_0x4ec2eb,_0x235a95,_0x1f325f){var _0x7b820a=_0x2a21f0,_0x5ec29c=_0x4ec2eb,_0x4c9568=Math["sqrt"]((_0x5ec29c-.5)*(_0x5ec29c-.5)+(_0x7b820a-.5)*(_0x7b820a-.5));if(_0x4c9568>.5)return _0x592c4b;if(_0x4c9568<.001)return _0x235a95["fVAngleCos"]=1,_0x235a95["fVAngleSin"]=0,_0x235a95["fHAngleCos"]=1,_0x235a95["fHAngleSin"]=0,_0x31e0fd;if(_0x1f325f==_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]){_0x235a95["fHAngleCos"]=(.5-_0x5ec29c)/_0x4c9568,_0x235a95["fHAngleSin"]=(.5-_0x7b820a)/_0x4c9568;var _0x45ad5a=_0x4c9568*_0x2ab8a6;_0x235a95["fVAngleCos"]=Math["cos"](_0x45ad5a),_0x235a95["fVAngleSin"]=Math["sin"](_0x45ad5a)}else{if(_0x1f325f!=_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"])return _0x592c4b;_0x235a95["fHAngleCos"]=(_0x5ec29c-.5)/_0x4c9568,_0x235a95["fHAngleSin"]=(.5-_0x7b820a)/_0x4c9568;var _0x13b860=_0x4c9568*_0x2ab8a6;_0x235a95["fVAngleCos"]=Math["cos"](_0x13b860),_0x235a95["fVAngleSin"]=Math["sin"](_0x13b860)}return _0x31e0fd}},{key:"ComputeAngleHorizontal",value:function value(_0x4b5fc5,_0x501ddc,_0x748093){var _0x514cef,_0x2511f1,_0x20ab08,_0x539ab2,_0x164fd8,_0x5c89a6,_0x2019fa,_0x267a1e=_0x4b5fc5;return(_0x501ddc-(_0x164fd8=.5))*(_0x501ddc-_0x164fd8)+(_0x267a1e-_0x164fd8)*(_0x267a1e-_0x164fd8)>.25?_0x592c4b:(_0x5c89a6=(_0x501ddc-_0x164fd8)/_0x164fd8*_0x2ab8a6/2,_0x514cef=Math["cos"](_0x5c89a6),_0x2511f1=Math["sin"](_0x5c89a6),(_0x267a1e-_0x164fd8)/_0x164fd8/_0x514cef>1||(_0x267a1e-_0x164fd8)/_0x164fd8/_0x514cef<-1?_0x592c4b:(_0x2019fa=(_0x267a1e-_0x164fd8)/_0x164fd8/_0x514cef*_0x2ab8a6/2,_0x20ab08=Math["cos"](_0x2019fa),_0x539ab2=Math["sin"](_0x2019fa),_0x748093["fVAngleCos"]=_0x514cef,_0x748093["fVAngleSin"]=_0x2511f1,_0x748093["fHAngleCos"]=_0x20ab08,_0x748093["fHAngleSin"]=_0x539ab2,_0x31e0fd))}},{key:"IsInImage",value:function value(_0x1195f5,_0x4311e3,_0x21e183,_0x534e84,_0x73bf8b,_0x2b9d95,_0xb0dc49){return 1!=this["IsOutofImage"](_0x1195f5,_0x4311e3,_0x21e183,_0x534e84,_0x73bf8b["fHAngleCos"],_0x73bf8b["fHAngleSin"],_0x73bf8b["fVAngleCos"],_0x73bf8b["fVAngleSin"],_0x2b9d95,1,.5,_0xb0dc49)&&1!=this["IsOutofImage"](_0x1195f5,_0x4311e3,_0x21e183,_0x534e84,_0x73bf8b["fHAngleCos"],_0x73bf8b["fHAngleSin"],_0x73bf8b["fVAngleCos"],_0x73bf8b["fVAngleSin"],_0x2b9d95,0,.5,_0xb0dc49)&&1!=this["IsOutofImage"](_0x1195f5,_0x4311e3,_0x21e183,_0x534e84,_0x73bf8b["fHAngleCos"],_0x73bf8b["fHAngleSin"],_0x73bf8b["fVAngleCos"],_0x73bf8b["fVAngleSin"],_0x2b9d95,.5,1,_0xb0dc49)&&1!=this["IsOutofImage"](_0x1195f5,_0x4311e3,_0x21e183,_0x534e84,_0x73bf8b["fHAngleCos"],_0x73bf8b["fHAngleSin"],_0x73bf8b["fVAngleCos"],_0x73bf8b["fVAngleSin"],_0x2b9d95,.5,0,_0xb0dc49)&&1!=this["IsOutofImage"](_0x1195f5,_0x4311e3,_0x21e183,_0x534e84,_0x73bf8b["fHAngleCos"],_0x73bf8b["fHAngleSin"],_0x73bf8b["fVAngleCos"],_0x73bf8b["fVAngleSin"],_0x2b9d95,0,0,_0xb0dc49)&&1!=this["IsOutofImage"](_0x1195f5,_0x4311e3,_0x21e183,_0x534e84,_0x73bf8b["fHAngleCos"],_0x73bf8b["fHAngleSin"],_0x73bf8b["fVAngleCos"],_0x73bf8b["fVAngleSin"],_0x2b9d95,0,1,_0xb0dc49)&&1!=this["IsOutofImage"](_0x1195f5,_0x4311e3,_0x21e183,_0x534e84,_0x73bf8b["fHAngleCos"],_0x73bf8b["fHAngleSin"],_0x73bf8b["fVAngleCos"],_0x73bf8b["fVAngleSin"],_0x2b9d95,1,1,_0xb0dc49)&&1!=this["IsOutofImage"](_0x1195f5,_0x4311e3,_0x21e183,_0x534e84,_0x73bf8b["fHAngleCos"],_0x73bf8b["fHAngleSin"],_0x73bf8b["fVAngleCos"],_0x73bf8b["fVAngleSin"],_0x2b9d95,1,0,_0xb0dc49)}},{key:"IsOutofImage",value:function value(_0x184fce,_0x79356a,_0xa78ec2,_0x393270,_0x1e1c9e,_0x53d8d0,_0x2dd493,_0x1a6801,_0x1e04e7,_0x1e47fc,_0x324356,_0x2fcd56){var _0x491bd0,_0x350951,_0x23a9cb,_0x27ccfe,_0x2ec54d,_0x386dcc,_0x465c0f,_0x4ed639,_0x4f9373,_0x1e8289,_0x4555c9,_0x36f626,_0x288181;if(_0x4555c9=(_0x184fce+_0x79356a)/2*1,_0x36f626=(_0xa78ec2+_0x393270)/2*(_0x1e8289=(_0x79356a-_0x184fce)/(_0x393270-_0xa78ec2)),_0x288181=(_0x79356a-_0x184fce)/2*1,_0x2fcd56==_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]){if(_0x350951=_0x1e47fc-.5,_0x23a9cb=(_0x491bd0=.5-_0x324356)*_0x2dd493+(_0x386dcc=_0x1e04e7)*_0x1a6801,(_0x465c0f=_0x386dcc*_0x2dd493-_0x491bd0*_0x1a6801)<=0)return!0;_0x4f9373=Math["sqrt"](_0x350951*_0x350951+_0x23a9cb*_0x23a9cb);var _0x4a52ef=Math["sqrt"](_0x350951*_0x350951+_0x23a9cb*_0x23a9cb+_0x465c0f*_0x465c0f),_0x556dce=Math["asin"](_0x4f9373/_0x4a52ef)/1.5707963*.5;if(_0x2ec54d=(-((_0x350951=_0x556dce*_0x350951/_0x4f9373)*_0x53d8d0+(_0x23a9cb=_0x556dce*_0x23a9cb/_0x4f9373)*_0x1e1c9e)*_0x288181*2+_0x36f626)/_0x1e8289,(_0x27ccfe=((_0x350951*_0x1e1c9e-_0x23a9cb*_0x53d8d0)*_0x288181*2+_0x4555c9)/1)<0||_0x27ccfe>1||_0x2ec54d<0||_0x2ec54d>1)return!0}if(_0x2fcd56==_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]){if(_0x350951=_0x1e47fc-.5,_0x23a9cb=(_0x491bd0=_0x324356-.5)*_0x2dd493+(_0x386dcc=_0x1e04e7)*_0x1a6801,(_0x465c0f=_0x386dcc*_0x2dd493-_0x491bd0*_0x1a6801)<=0)return!0;_0x4f9373=Math["sqrt"](_0x350951*_0x350951+_0x23a9cb*_0x23a9cb);var _0x2201f1=Math["sqrt"](_0x350951*_0x350951+_0x23a9cb*_0x23a9cb+_0x465c0f*_0x465c0f),_0x4344fc=Math["asin"](_0x4f9373/_0x2201f1)/1.5707963*.5;if(_0x2ec54d=(((_0x350951=_0x4344fc*_0x350951/_0x4f9373)*_0x53d8d0+(_0x23a9cb=_0x4344fc*_0x23a9cb/_0x4f9373)*_0x1e1c9e)*_0x288181*2+_0x36f626)/_0x1e8289,(_0x27ccfe=((_0x350951*_0x1e1c9e-_0x23a9cb*_0x53d8d0)*_0x288181*2+_0x4555c9)/1)<0||_0x27ccfe>1||_0x2ec54d<0||_0x2ec54d>1)return!0}if(_0x2fcd56==_0x2bffb5["SR_DE_FISH_PTZ_WALL"]){if(_0x27ccfe=(_0x350951=_0x1e47fc-.5)*_0x1e1c9e+(_0x465c0f=(_0x386dcc=_0x1e04e7)*_0x2dd493-(_0x491bd0=_0x324356-.5)*_0x1a6801)*_0x53d8d0,_0x2ec54d=_0x23a9cb=_0x491bd0*_0x2dd493+_0x386dcc*_0x1a6801,(_0x4ed639=_0x465c0f*_0x1e1c9e-_0x350951*_0x53d8d0)<=0)return!0;_0x4f9373=Math["sqrt"](_0x27ccfe*_0x27ccfe+_0x2ec54d*_0x2ec54d);var _0x5788bc=Math["sqrt"](_0x27ccfe*_0x27ccfe+_0x2ec54d*_0x2ec54d+_0x4ed639*_0x4ed639),_0x349ef8=Math["asin"](_0x4f9373/_0x5788bc)/1.5707963*.5;if(_0x2ec54d=(_0x349ef8*_0x2ec54d/_0x4f9373*_0x288181*2+_0x36f626)/_0x1e8289,(_0x27ccfe=(_0x349ef8*_0x27ccfe/_0x4f9373*_0x288181*2+_0x4555c9)/1)<0||_0x27ccfe>1||_0x2ec54d<0||_0x2ec54d>1)return!0}return!1}},{key:"ComputePTZPoints",value:function value(){if(_0x308700==this["nWndPort"])return _0x27ff6b;for(var _0x2f814a=0;_0x2f814a<_0x36131b;++_0x2f814a)if(null!=this["pRenderParam"][_0x2f814a]&&(_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]==this["pRenderParam"][_0x2f814a]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]==this["pRenderParam"][_0x2f814a]["nDisplayEffect"]||_0x2bffb5["SR_DE_FISH_PTZ_WALL"]==this["pRenderParam"][_0x2f814a]["nDisplayEffect"])){var _0x35d5ef=_0x31e0fd;if(this["nPTZDisplayMode"]==_0x310c66){if(_0x35d5ef=this["GetRangePoints"](_0x2f814a),_0x31e0fd!=_0x35d5ef)continue;if(_0x35d5ef=this["TransformPTZRangePoints"](_0x2f814a),_0x31e0fd!=_0x35d5ef)continue}else{if(this["nPTZDisplayMode"]==_0x446724&&(_0x35d5ef=this["GetRectPoints"](_0x2f814a),_0x31e0fd!=_0x35d5ef))continue}}return _0x31e0fd}},{key:"GetWndPort",value:function value(){return this["nWndPort"]}},{key:"GetPTZDisplayMode",value:function value(){return this["nPTZDisplayMode"]}},{key:"GetPTZColor",value:function value(_0x2ffb29,_0x2229ad){return _0x2ffb29<0||_0x2ffb29>=_0x36131b||null==_0x2229ad?_0x592c4b:(_0x2229ad["fA"]=this["stPTZColor"][_0x2ffb29]["fA"],_0x2229ad["fR"]=this["stPTZColor"][_0x2ffb29]["fR"],_0x2229ad["fG"]=this["stPTZColor"][_0x2ffb29]["fG"],_0x2229ad["fB"]=this["stPTZColor"][_0x2ffb29]["fB"],null!=this["pPTZSetColor"]&&(Math["abs"](this["pPTZSetColor"][_0x2ffb29]["fA"])<_0x2fc9a7||Math["abs"](this["pPTZSetColor"][_0x2ffb29]["fR"])<_0x2fc9a7||Math["abs"](this["pPTZSetColor"][_0x2ffb29]["fG"])<_0x2fc9a7||Math["abs"](this["pPTZSetColor"][_0x2ffb29]["fB"])<_0x2fc9a7)&&(_0x2229ad["fA"]=this["pPTZSetColor"][_0x2ffb29]["fA"],_0x2229ad["fR"]=this["pPTZSetColor"][_0x2ffb29]["fR"],_0x2229ad["fG"]=this["pPTZSetColor"][_0x2ffb29]["fG"],_0x2229ad["fB"]=this["pPTZSetColor"][_0x2ffb29]["fB"]),_0x31e0fd)}},{key:"SetPTZColor",value:function value(_0x5a98cd,_0x50a5bf){if(_0x5a98cd<0||_0x5a98cd>=_0x36131b)return _0x592c4b;if(null==_0x50a5bf)return _0x592c4b;if(null==this["pPTZSetColor"]){this["pPTZSetColor"]=[];for(var _0xc1d2cc=0;_0xc1d2cc<_0x36131b;++_0xc1d2cc)this["pPTZSetColor"][_0xc1d2cc]={},this["pPTZSetColor"][_0xc1d2cc]["fR"]=0,this["pPTZSetColor"][_0xc1d2cc]["fG"]=0,this["pPTZSetColor"][_0xc1d2cc]["fB"]=0,this["pPTZSetColor"][_0xc1d2cc]["fA"]=1}return this["pPTZSetColor"][_0x5a98cd]["fR"]=_0x50a5bf["fR"],this["pPTZSetColor"][_0x5a98cd]["fG"]=_0x50a5bf["fG"],this["pPTZSetColor"][_0x5a98cd]["fB"]=_0x50a5bf["fB"],this["pPTZSetColor"][_0x5a98cd]["fA"]=_0x50a5bf["fA"],_0x31e0fd}},{key:"IsPTZSelected",value:function value(_0x37fba3){return!(_0x37fba3<0||_0x37fba3>=_0x36131b)&&this["bPTZSelected"][_0x37fba3]}},{key:"GetPTZPort",value:function value(_0x43b5e1,_0x3f96d5,_0xa99525){if(this["nWndPort"]==_0x308700)return _0x27ff6b;if(null==this["pRenderParam"][this["nWndPort"]])return _0x27ff6b;var _0x208ec1=_0x36131b,_0xfeb8da={};_0xfeb8da["fX"]=_0x43b5e1,_0xfeb8da["fY"]=_0x3f96d5;for(var _0x46c060=0;_0x46c060<_0x36131b;++_0x46c060)this["bPTZSelected"][_0x46c060]=!1;if(this["nPTZDisplayMode"]==_0x310c66){switch(this["pRenderParam"][this["nWndPort"]]["nDisplayEffect"]){case _0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]:this["GetPointPano2FishFloor"](_0xfeb8da,_0x43b5e1,_0x3f96d5);break;case _0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]:this["GetPointPano2FishCeiling"](_0xfeb8da,_0x43b5e1,_0x3f96d5);break;case _0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:this["GetPointPano2FishWall"](_0xfeb8da,_0x43b5e1,_0x3f96d5)}for(var _0x3bbead=0;_0x3bbead<_0x36131b;++_0x3bbead)if(0!=this["nOriPTZPointNum"][_0x3bbead]){var _0x4687da={};_0x4687da["fX"]=this["pOriPTZPoints"][_0x3bbead][0]["fX"],_0x4687da["fY"]=this["pOriPTZPoints"][_0x3bbead][0]["fY"];var _0x29c550={};_0x29c550["fX"]=this["pOriPTZPoints"][_0x3bbead][0]["fX"],_0x29c550["fY"]=this["pOriPTZPoints"][_0x3bbead][0]["fY"];for(var _0x30dfe7=1;_0x30dfe7<this["nOriPTZPointNum"][_0x3bbead];++_0x30dfe7)this["GetPTZRectange"](_0x4687da,_0x29c550,this["pOriPTZPoints"][_0x3bbead][_0x30dfe7]);if(_0xfeb8da["fX"]<=_0x4687da["fX"]&&_0xfeb8da["fX"]>=_0x29c550["fX"]&&_0xfeb8da["fY"]>=_0x29c550["fY"]&&_0xfeb8da["fY"]<=_0x4687da["fY"]){_0x208ec1=_0x3bbead;break}}}else{if(this["nPTZDisplayMode"]!=_0x446724)return _0x1b8a99;for(var _0x5ab723=0;_0x5ab723<_0x36131b;++_0x5ab723)if(_0xfeb8da["fX"]<=this["pRectPoints"][_0x5ab723][2]["fX"]&&_0xfeb8da["fX"]>=this["pRectPoints"][_0x5ab723][0]["fX"]&&_0xfeb8da["fY"]>=this["pRectPoints"][_0x5ab723][0]["fY"]&&_0xfeb8da["fY"]<=this["pRectPoints"][_0x5ab723][2]["fY"]){_0x208ec1=_0x5ab723;break}}return _0x208ec1<_0x36131b?(this["bPTZSelected"][_0x208ec1]=!0,_0xa99525["nPTZPort"]=_0x208ec1,_0x31e0fd):_0x1b8a99}},{key:"SetPTZPort",value:function value(_0x5a234c){if(_0x5a234c<0||_0x5a234c>=_0x36131b)return _0x592c4b;for(var _0x17ce1c=0;_0x17ce1c<_0x36131b;++_0x17ce1c)this["bPTZSelected"][_0x17ce1c]=!1;if(this["nPTZDisplayMode"]==_0x310c66){if(0==this["nOriPTZPointNum"][_0x5a234c])return _0x592c4b;this["bPTZSelected"][_0x5a234c]=!0}else{if(0==this["nPTZRectNum"][_0x5a234c])return _0x592c4b;this["bPTZSelected"][_0x5a234c]=!0}return _0x31e0fd}},{key:"GetPTZRectange",value:function value(_0x4775f9,_0x516289,_0x7a4508){return _0x7a4508["fX"]<_0x516289["fX"]&&(_0x516289["fX"]=_0x7a4508["fX"]),_0x7a4508["fY"]<_0x516289["fY"]&&(_0x516289["fY"]=_0x7a4508["fY"]),_0x7a4508["fX"]>_0x4775f9["fX"]&&(_0x4775f9["fX"]=_0x7a4508["fX"]),_0x7a4508["fY"]>_0x4775f9["fY"]&&(_0x4775f9["fY"]=_0x7a4508["fY"]),_0x31e0fd}},{key:"GetPTZPoints",value:function value(_0xe2d7ab,_0x3c5188,_0x37dced){return _0xe2d7ab<0||_0xe2d7ab>=_0x36131b?_0x592c4b:null==this["pRenderParam"][this["nWndPort"]]?_0x27ff6b:(_0x310c66==_0x37dced?null!=this["pOriPTZPoints"][_0xe2d7ab]&&0!=this["nOriPTZPointNum"][_0xe2d7ab]&&(_0x3c5188["pstPoints"]=this["pOriPTZPoints"][_0xe2d7ab],_0x3c5188["nPointNum"]=this["nOriPTZPointNum"][_0xe2d7ab]):_0x446724==_0x37dced&&null!=this["pRectPoints"][_0xe2d7ab]&&(_0x3c5188["pstPoints"]=this["pRectPoints"][_0xe2d7ab],_0x3c5188["nPointNum"]=4),_0x31e0fd)}},{key:"SetPTZDisplayMode",value:function value(_0x5e3276){return this["nPTZDisplayMode"]=_0x5e3276,this["ComputePTZPoints"]()}},{key:"GetDisplayEffect",value:function value(_0x164442){return _0x164442<0||_0x164442>=_0x36131b||null==this["pRenderParam"]?_0x2bffb5["SR_DE_NULL"]:this["pRenderParam"][_0x164442]["nDisplayEffect"]}},{key:"GetPTZFragmentPoints",value:function value(_0x3dccc6,_0x2fb10f,_0x4551ae){if(_0x3dccc6<0||_0x3dccc6>=_0x36131b)return _0x592c4b;if(null==this["pPanoPTZPoints"][_0x3dccc6]||0==this["nPanoPTZPointNum"][_0x3dccc6])return _0x592c4b;var _0x11564d=this["nPTZFragmentNode"][_0x3dccc6][_0x4551ae];if(_0x2fb10f["nPointNum"]=this["nPTZFragmentNode"][_0x3dccc6][_0x4551ae+1]-this["nPTZFragmentNode"][_0x3dccc6][_0x4551ae],_0x2fb10f["nPointNum"]<0)return _0x27ff6b;_0x2fb10f["pstPoints"]=[];for(var _0x423958=0;_0x423958<_0x2fb10f["nPointNum"];++_0x423958){var _0x3ab0c6={};_0x3ab0c6["fX"]=this["pPanoPTZPoints"][_0x3dccc6][_0x11564d+_0x423958]["fX"],_0x3ab0c6["fY"]=this["pPanoPTZPoints"][_0x3dccc6][_0x11564d+_0x423958]["fY"],_0x2fb10f["pstPoints"]["push"](_0x3ab0c6)}return _0x31e0fd}},{key:"GetPTZFragmentNum",value:function value(_0x2cf013){return _0x2cf013<0||_0x2cf013>=_0x36131b||0==this["nPTZFragmentNum"][_0x2cf013]?0:this["nPTZFragmentNum"][_0x2cf013]}},{key:"CalcPTZFragmentPoints",value:function value(_0x25c0dc){if(_0x25c0dc<0||_0x25c0dc>=_0x36131b)return _0x592c4b;if(null==this["pPanoPTZPoints"][_0x25c0dc]||0==this["nPanoPTZPointNum"][_0x25c0dc])return _0x27ff6b;this["nPTZFragmentNode"][_0x25c0dc][0]=0,this["nPTZFragmentNum"][_0x25c0dc]=1;for(var _0x3db034=0,_0x20031f=0;_0x20031f<this["nPanoPTZPointNum"][_0x25c0dc]-1;_0x20031f++)Math["abs"](this["pPanoPTZPoints"][_0x25c0dc][_0x20031f+1]["fX"]-this["pPanoPTZPoints"][_0x25c0dc][_0x20031f]["fX"])>.5&&(_0x3db034=this["nPTZFragmentNum"][_0x25c0dc],this["nPTZFragmentNode"][_0x25c0dc][_0x3db034]=_0x20031f+1,this["nPTZFragmentNum"][_0x25c0dc]=this["nPTZFragmentNum"][_0x25c0dc]+1);var _0x454a3d=this["nPanoPTZPointNum"][_0x25c0dc];return Math["abs"](this["pPanoPTZPoints"][_0x25c0dc][0]["fX"]-this["pPanoPTZPoints"][_0x25c0dc][_0x454a3d-1]["fX"])<.5&&(this["pPanoPTZPoints"][_0x25c0dc][_0x454a3d]["fX"]=this["pPanoPTZPoints"][_0x25c0dc][0]["fX"],this["pPanoPTZPoints"][_0x25c0dc][_0x454a3d]["fY"]=this["pPanoPTZPoints"][_0x25c0dc][0]["fY"],this["nPanoPTZPointNum"][_0x25c0dc]=this["nPanoPTZPointNum"][_0x25c0dc]+1),_0x3db034=this["nPTZFragmentNum"][_0x25c0dc],this["nPTZFragmentNode"][_0x25c0dc][_0x3db034]=this["nPanoPTZPointNum"][_0x25c0dc],_0x31e0fd}},{key:"IsPortAllocated",value:function value(_0x3ded7f){return this["bPortAllocated"][_0x3ded7f]}},{key:"GetPointFish2PanoCeiling",value:function value(_0x589855,_0x2c2ca2,_0x3ebcbb){if(null==this["pRenderParam"][this["nWndPort"]])return _0x27ff6b;if(null==_0x589855)return _0x592c4b;var _0x4e2209,_0x2b07a5;_0x4e2209=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x2b07a5=(this["fRX2"]-this["fRX1"])/2*1;var _0x5f4370,_0x24cb75=0;(this["fRX2"]>1||this["fRY2"]>1||this["fRX1"]<0||this["fRY1"]<0)&&(this["fRX1"]<0&&(_0x5f4370=1*-this["fRX1"])>_0x24cb75&&(_0x24cb75=_0x5f4370),this["fRX2"]>1&&(_0x5f4370=1*(this["fRX2"]-1))>_0x24cb75&&(_0x24cb75=_0x5f4370),this["fRY1"]<0&&(_0x5f4370=-this["fRY1"]*_0x4e2209)>_0x24cb75&&(_0x24cb75=_0x5f4370),this["fRY2"]>1&&(_0x5f4370=(this["fRY2"]-1)*_0x4e2209)>_0x24cb75&&(_0x24cb75=_0x5f4370));var _0x270e19,_0x472ff9=_0x24cb75/_0x2b07a5,_0x1531d4={};if(_0x1531d4["fX"]=0,_0x1531d4["fY"]=0,Math["abs"](_0x2c2ca2-.5)<_0x2fc9a7&&Math["abs"](_0x3ebcbb-.5)<_0x2fc9a7)return _0x1b8a99;var _0x3dfed8={},_0x1b3df6={};_0x3dfed8["fX"]=_0x2c2ca2-.5,_0x3dfed8["fY"]=_0x3ebcbb-.5,_0x1b3df6["fX"]=-.5*Math["sin"](this["pRenderParam"][this["nWndPort"]]["fAngle"]),_0x1b3df6["fY"]=.5*Math["cos"](this["pRenderParam"][this["nWndPort"]]["fAngle"]);var _0x3f2422=Math["sqrt"](_0x3dfed8["fX"]*_0x3dfed8["fX"]+_0x3dfed8["fY"]*_0x3dfed8["fY"]),_0x2827a9=Math["sqrt"](_0x1b3df6["fX"]*_0x1b3df6["fX"]+_0x1b3df6["fY"]*_0x1b3df6["fY"]);return _0x270e19=Math["acos"]((_0x3dfed8["fX"]*_0x1b3df6["fX"]+_0x3dfed8["fY"]*_0x1b3df6["fY"])/(_0x3f2422*_0x2827a9)),_0x3dfed8["fX"]*_0x1b3df6["fY"]-_0x3dfed8["fY"]*_0x1b3df6["fX"]>0&&(_0x270e19=6.2831852-_0x270e19),_0x1531d4["fX"]=_0x270e19/6.2831853,_0x1531d4["fY"]=(2*(.5-_0x3f2422)-_0x472ff9)/(.8-_0x472ff9),_0x1531d4["fY"]>=0&&_0x1531d4["fX"]>=0&&_0x1531d4["fY"]<=1&&_0x1531d4["fX"]<=1?(_0x589855["fX"]=_0x1531d4["fX"],_0x589855["fY"]=_0x1531d4["fY"],_0x31e0fd):_0x592c4b}},{key:"GetPointFish2PanoFloor",value:function value(_0x26e2e2,_0x1efc0c,_0xb62659){if(null==this["pRenderParam"][this["nWndPort"]])return _0x27ff6b;if(null==_0x26e2e2)return _0x592c4b;var _0x1e9358,_0x219cd2;_0x1e9358=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x219cd2=(this["fRX2"]-this["fRX1"])/2*1;var _0x5b9a9e,_0xaa0307=0;(this["fRX2"]>1||this["fRY2"]>1||this["fRX1"]<0||this["fRY1"]<0)&&(this["fRX1"]<0&&(_0x5b9a9e=1*-this["fRX1"])>_0xaa0307&&(_0xaa0307=_0x5b9a9e),this["fRX2"]>1&&(_0x5b9a9e=1*(this["fRX2"]-1))>_0xaa0307&&(_0xaa0307=_0x5b9a9e),this["fRY1"]<0&&(_0x5b9a9e=-this["fRY1"]*_0x1e9358)>_0xaa0307&&(_0xaa0307=_0x5b9a9e),this["fRY2"]>1&&(_0x5b9a9e=(this["fRY2"]-1)*_0x1e9358)>_0xaa0307&&(_0xaa0307=_0x5b9a9e));var _0x1f242e,_0x28d23e=_0xaa0307/_0x219cd2,_0x3f6649={fX:0,fY:0};if(Math["abs"](_0x1efc0c-.5)<_0x2fc9a7&&Math["abs"](_0xb62659-.5)<_0x2fc9a7)return _0x1b8a99;var _0x16c13b={},_0x1f40c8={};_0x16c13b["fX"]=_0x1efc0c-.5,_0x16c13b["fY"]=_0xb62659-.5,_0x1f40c8["fX"]=-.5*Math["sin"](this["pRenderParam"][this["nWndPort"]]["fAngle"]),_0x1f40c8["fY"]=.5*Math["cos"](this["pRenderParam"][this["nWndPort"]]["fAngle"]);var _0x4104c2=Math["sqrt"](_0x16c13b["fX"]*_0x16c13b["fX"]+_0x16c13b["fY"]*_0x16c13b["fY"]),_0x263eb9=Math["sqrt"](_0x1f40c8["fX"]*_0x1f40c8["fX"]+_0x1f40c8["fY"]*_0x1f40c8["fY"]);return _0x1f242e=Math["acos"]((_0x16c13b["fX"]*_0x1f40c8["fX"]+_0x16c13b["fY"]*_0x1f40c8["fY"])/(_0x4104c2*_0x263eb9)),_0x16c13b["fX"]*_0x1f40c8["fY"]-_0x16c13b["fY"]*_0x1f40c8["fX"]>0&&(_0x1f242e=6.2831852-_0x1f242e),_0x3f6649["fX"]=1-_0x1f242e/6.2831853,_0x3f6649["fY"]=1-(2*(.5-_0x4104c2)-_0x28d23e)/(.8-_0x28d23e),_0x3f6649["fY"]>=0&&_0x3f6649["fX"]>=0&&_0x3f6649["fY"]<=1&&_0x3f6649["fX"]<=1?(_0x26e2e2["fX"]=_0x3f6649["fX"],_0x26e2e2["fY"]=_0x3f6649["fY"],_0x31e0fd):_0x592c4b}},{key:"GetPointFish2PanoWall",value:function value(_0x103359,_0x431bbd,_0x544fc2){if(null==this["pRenderParam"][this["nWndPort"]])return _0x27ff6b;if(null==_0x103359)return _0x592c4b;var _0x208606,_0x532cd5;_0x208606=(this["fRX2"]-this["fRX1"])/(this["fRY2"]-this["fRY1"]),_0x532cd5=(this["fRX2"]-this["fRX1"])/2*1;var _0x123c42,_0x1d411a,_0x3193f0,_0x35da68,_0x30a2d2,_0x12c852=0,_0x341dae=1,_0x2b3762=.1,_0x16e2de=.9;this["fRX1"]<0&&(_0x123c42=1*-this["fRX1"],_0x12c852=_0x123c42/=2*_0x532cd5),this["fRX2"]>1&&(_0x1d411a=1*(this["fRX2"]-1),_0x341dae=1-(_0x1d411a/=2*_0x532cd5)),this["fRY1"]<0&&(_0x3193f0=-this["fRY1"]*_0x208606,_0x2b3762=(_0x3193f0/=2*_0x532cd5)>.1?_0x3193f0:.1),this["fRY2"]>1&&(_0x35da68=(this["fRY2"]-1)*_0x208606,_0x16e2de=(_0x35da68/=2*_0x532cd5)>1-.9?1-_0x35da68:.9);var _0x520b89={fX:0,fY:0},_0xdc838a=2*_0x431bbd*_0x532cd5,_0x542e40=2*_0x544fc2*_0x532cd5;return _0x30a2d2=Math["sqrt"](_0x532cd5*_0x532cd5-(_0x542e40-_0x532cd5)*(_0x542e40-_0x532cd5)),Math["abs"](_0x30a2d2)<_0x2fc9a7?SR_ERR_PARAM:(_0x431bbd=_0x532cd5*(_0xdc838a-_0x532cd5)/_0x30a2d2+_0x532cd5,_0x544fc2=_0x542e40,_0x520b89["fX"]=(_0x431bbd-2*_0x12c852*_0x532cd5)/(2*(_0x341dae-_0x12c852)*_0x532cd5),_0x520b89["fY"]=(_0x544fc2-2*_0x2b3762*_0x532cd5)/(2*(_0x16e2de-_0x2b3762)*_0x532cd5),_0x520b89["fY"]>=0&&_0x520b89["fX"]>=0&&_0x520b89["fY"]<=1&&_0x520b89["fX"]<=1?(_0x103359["fX"]=_0x520b89["fX"],_0x103359["fY"]=_0x520b89["fY"],_0x31e0fd):_0x592c4b)}},{key:"UpdateRangeParam",value:function value(_0x97e747,_0x4fb240){if(null==this["pRenderParam"][_0x97e747])return _0x27ff6b;if(_0x4fb240<1e-5||_0x4fb240>.6)return _0x592c4b;var _0x3ac028=0;return _0x2bffb5["SR_DE_FISH_PTZ_WALL"]!=this["pRenderParam"][_0x97e747]["nDisplayEffect"]&&_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]!=this["pRenderParam"][_0x97e747]["nDisplayEffect"]&&_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]!=this["pRenderParam"][_0x97e747]["nDisplayEffect"]||(_0x3ac028=7*_0x4fb240+.8,this["IsInImage"](this["fRX1"],this["fRX2"],this["fRY1"],this["fRY2"],this["pRenderParam"][_0x97e747]["fCosH"],this["pRenderParam"][_0x97e747]["fSinH"],this["pRenderParam"][_0x97e747]["fCosV"],this["pRenderParam"][_0x97e747]["fSinV"],_0x3ac028,this["pRenderParam"][_0x97e747]["nDisplayEffect"]))?(this["pRenderParam"][_0x97e747]["fZoom"]=_0x3ac028,_0x31e0fd):_0x592c4b}}]),_0x387361}(),_0x20e5b6=32,_0x57d214=function(){function _0x4bd9d2(){_0x540ab2(this,_0x4bd9d2),this["renderEngine"]="webgl",this["oVideoHandle"]=null,this["mainCanvasID"]=null,this["curTimestamp"]=0,this["mainSubPort"]=0,this["mainVaildSubPort"]=0,this["mainFECCorrect"]=_0x2bffb5["SR_DE_NULL"],this["FECErrorCode"]=0,this["subPortNum"]=0,this["FECShowMode"]=_0x310c66,this["pFishParamManager"]=null,this["InitFECParam"](),this["privateLinesInfo"]=[],this["privateFontsInfo"]=[],this["privateImageInfo"]=[],this["bSRCallBackFlag"]=!1,this["curLinesInfo"]=null,this["curFontsInfo"]={},this["curImagesInfo"]={},this["maxPrivateLineTimeStamp"]=0,this["hasSetFECParamManager"]=!1,this["pWaterFontParam"]=[],this["pWaterImageParam"]=[],this["waterMarkImageIndex"]=0,this["waterMarkImageMax"]=1,this["aPOSAdaptBuf"]=[],this["displayWidth"]=0,this["displayHeight"]=0}return _0x132bfb(_0x4bd9d2,[{key:"InitDisplay",value:function value(_0x5a9b56,_0x34d5a4,_0x4d8efa){return this["renderEngine"]=_0x34d5a4,this["mainCanvasID"]=_0x5a9b56,"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(this["oVideoHandle"]=new _0x5ce878,console["log"]("2d render")):(this["oVideoHandle"]=new _0x5e4a58,this["mainFECCorrect"]!=_0x2bffb5["SR_DE_NULL"]&&(null==this["pFishParamManager"]&&(this["pFishParamManager"]=new _0x3beccf),this["oVideoHandle"]["SR_SetFishParamManager"](this["pFishParamManager"]),this["hasSetFECParamManager"]=!0),console["log"]("webgl render")),this["oVideoHandle"]["SR_Init"](_0x5a9b56,_0x4d8efa),this["mainVaildSubPort"]=this["oVideoHandle"]["SR_AddSubPort"](this["mainFECCorrect"]),-1==this["mainVaildSubPort"]?(console["info"]("%c InitDisplay SR_AddSubPort error subport:%d","color: red",this["mainVaildSubPort"]),0):(null==this["stFishEyeManager"][0]["pRender"]&&this["mainFECCorrect"]!==_0x2bffb5["SR_DE_NULL"]&&(this["stFishEyeManager"][0]["pRender"]=this["oVideoHandle"],this["stFishEyeManager"][0]["nSubPort"]=0,this["stFishEyeManager"][0]["sCanvasID"]=this["mainCanvasID"],this["stFishEyeManager"][0]["bUsed"]=1,this["stFishEyeManager"][0]["bInited"]=1,this["stFishEyeManager"][0]["nValidSubPort"]=this["mainVaildSubPort"]),1)}},{key:"ReleaseDisplay",value:function value(){if(null!=this["oVideoHandle"]&&(this["oVideoHandle"]["SR_DelSubPort"](this["mainVaildSubPort"]),this["oVideoHandle"]["SR_Destroy"](),this["oVideoHandle"]=null),this["subPortNum"]>0){for(var _0x1ba7ec=1;_0x1ba7ec<_0x20e5b6;_0x1ba7ec++)0!=this["stFishEyeManager"][_0x1ba7ec]["nSubPort"]&&null!=this["stFishEyeManager"][_0x1ba7ec]["sCanvasID"]&&0!=this["stFishEyeManager"][_0x1ba7ec]["bInited"]&&(this["FEC_Disable"](_0x1ba7ec),this["FEC_DelPort"](_0x1ba7ec))}for(var _0x592843=0;_0x592843<_0x20e5b6;_0x592843++)this["stFishEyeManager"][_0x592843]["pRender"]=null;return this["stFishEyeManager"]["splice"](0,this["stFishEyeManager"]["length"]),this["stFishParam"]["splice"](0,this["stFishParam"]["length"]),null!=this["pFishParamManager"]&&(this["pFishParamManager"]["DeInit"](),this["pFishParamManager"]=null),this["FECShowMode"]=_0x310c66,this["DeInitPrivateParam"](),1}},{key:"DeInitPrivateParam",value:function value(){this["privateLinesInfo"]["splice"](0,this["privateLinesInfo"]["length"]),this["privateFontsInfo"]["splice"](0,this["privateFontsInfo"]["length"]),this["privateImageInfo"]["splice"](0,this["privateImageInfo"]["length"]),this["pWaterFontParam"]["splice"](0,this["pWaterFontParam"]["length"]),this["pWaterImageParam"]["splice"](0,this["pWaterImageParam"]["length"]),this["bSRCallBackFlag"]=!1,this["curLinesInfo"]=null}},{key:"DisplayFrame",value:function value(_0x2158a2,_0x5c62e7,_0x2230b2,_0x580a27,_0x555cde,_0x23b5e3){var _0x414422=this;return new Promise(function(_0xc85ad3){var _0x46a4dc=-1;if(null!=_0x2158a2&&(_0x46a4dc=_0x580a27),_0x414422["bSRCallBackFlag"]||(null!=_0x414422["oVideoHandle"]&&_0x414422["oVideoHandle"]["SR_SetCallBack"](_0x414422["WebGLDisplayCallBack"],_0x414422,_0x1d6f4d),_0x414422["bSRCallBackFlag"]=!0),null!=_0x2158a2){if(0==_0x414422["privateLinesInfo"]["length"]&&0==_0x414422["privateFontsInfo"]["length"]&&0==_0x414422["privateImageInfo"]["length"]||(_0x414422["curTimestamp"]=_0x46a4dc,_0x414422["FindIntelNodefromList"](_0x414422["curTimestamp"])),null!=_0x414422["oVideoHandle"]&&_0x414422["oVideoHandle"]["SR_Draw"](_0x2158a2,_0x5c62e7,_0x2230b2,_0x555cde,_0x23b5e3),_0x414422["subPortNum"]>0){for(var _0x4e2a2d=1;_0x4e2a2d<_0x20e5b6;_0x4e2a2d++)0!=_0x414422["stFishEyeManager"][_0x4e2a2d]["nSubPort"]&&null!=_0x414422["stFishEyeManager"][_0x4e2a2d]["sCanvasID"]&&0!=_0x414422["stFishEyeManager"][_0x4e2a2d]["bInited"]&&null!=_0x414422["stFishEyeManager"][_0x4e2a2d]["pRender"]&&_0x414422["stFishEyeManager"][_0x4e2a2d]["pRender"]["SR_Draw"](_0x2158a2,_0x5c62e7,_0x2230b2,null,null)}_0x414422["displayWidth"]=_0x5c62e7,_0x414422["displayHeight"]=_0x2230b2}_0xc85ad3(_0x46a4dc)})}},{key:"SetDisplayRect",value:function value(_0xd43b92,_0x992cb6,_0x4975b9,_0x24fcd0){return null!=this["oVideoHandle"]?this["oVideoHandle"]["SR_SetDisplayRect"](_0xd43b92,_0x992cb6,_0x4975b9,_0x24fcd0,_0x1dd1c6):0}},{key:"SetCanvasSize",value:function value(_0xbaed43,_0x2d46b5){return null!=this["oVideoHandle"]?this["oVideoHandle"]["SR_SetCanvasSize"](_0xbaed43,_0x2d46b5):0}},{key:"GetCanvasSize",value:function value(){return null!=this["oVideoHandle"]?this["oVideoHandle"]["SR_GetCanvasSize"]():0}},{key:"SetAntialias",value:function value(_0x14662d){return null!=this["oVideoHandle"]?this["oVideoHandle"]["SR_SetAntialias"](_0x14662d):0}},{key:"SetD3DPostProcess",value:function value(_0x388fd1,_0x1ccf90){return null!=this["oVideoHandle"]?this["oVideoHandle"]["SR_SetImagePostProcess"](_0x388fd1,_0x1ccf90):0}},{key:"InitFECParam",value:function value(){this["stFishEyeManager"]=[];for(var _0x33200a=0;_0x33200a<_0x20e5b6;_0x33200a++)this["stFishEyeManager"][_0x33200a]={},this["stFishEyeManager"][_0x33200a]["pRender"]=null,this["stFishEyeManager"][_0x33200a]["nSubPort"]=0,this["stFishEyeManager"][_0x33200a]["sCanvasID"]=null,this["stFishEyeManager"][_0x33200a]["bUsed"]=0,this["stFishEyeManager"][_0x33200a]["bInit"]=0,this["stFishEyeManager"][_0x33200a]["nValidSubPort"]=0,this["stFishEyeManager"][_0x33200a]["emPlaceType"]=_0x2dad09,this["stFishEyeManager"][_0x33200a]["emCorrectType"]=_0x44955c,this["stFishEyeManager"][_0x33200a]["emEffect"]=_0x2bffb5["SR_DE_FISH_ORIGINAL"];this["stFishParam"]=[];for(var _0x13a82f=0;_0x13a82f<_0x20e5b6;_0x13a82f++)this["stFishParam"][_0x13a82f]={},this["stFishParam"][_0x13a82f]["nUpDateType"]=0,this["stFishParam"][_0x13a82f]["stPTZParam"]={},this["stFishParam"][_0x13a82f]["stPTZParam"]["fPTZPositionX"]=0,this["stFishParam"][_0x13a82f]["stPTZParam"]["fPTZPositionY"]=0,this["stFishParam"][_0x13a82f]["stCycleParam"]={},this["stFishParam"][_0x13a82f]["stCycleParam"]["fRadiusLeft"]=0,this["stFishParam"][_0x13a82f]["stCycleParam"]["fRadiusRight"]=0,this["stFishParam"][_0x13a82f]["stCycleParam"]["fRadiusTop"]=0,this["stFishParam"][_0x13a82f]["stCycleParam"]["fRadiusBottom"]=0,this["stFishParam"][_0x13a82f]["fZoom"]=0,this["stFishParam"][_0x13a82f]["fWideScanOffset"]=0,this["stFishParam"][_0x13a82f]["stPTZColor"]={},this["stFishParam"][_0x13a82f]["stPTZColor"]["nR"]=0,this["stFishParam"][_0x13a82f]["stPTZColor"]["nG"]=0,this["stFishParam"][_0x13a82f]["stPTZColor"]["nB"]=0,this["stFishParam"][_0x13a82f]["stPTZColor"]["nAlpha"]=0,this["stFishParam"][_0x13a82f]["stPTZSelect"]={},this["stFishParam"][_0x13a82f]["stPTZSelect"]["fTop"]=0,this["stFishParam"][_0x13a82f]["stPTZSelect"]["fBottom"]=0,this["stFishParam"][_0x13a82f]["stPTZSelect"]["fLeft"]=0,this["stFishParam"][_0x13a82f]["stPTZSelect"]["fRight"]=0,this["stFishParam"][_0x13a82f]["nCut"]=0}},{key:"FEC_SetCanvasID",value:function value(_0x18f036){return this["mainFECCorrect"]=_0x2bffb5["SR_DE_FISH_ORIGINAL"],1}},{key:"FEC_ResetCorrectType",value:function value(_0x18918a,_0x56d041,_0x464de0){if(!1===this["hasSetFECParamManager"]&&(null==this["pFishParamManager"]&&(this["pFishParamManager"]=new _0x3beccf),this["oVideoHandle"]["SR_SetFishParamManager"](this["pFishParamManager"]),this["hasSetFECParamManager"]=!0),_0x464de0!=_0x44955c&&_0x464de0!=_0x2e6b56&&_0x464de0!=_0x3ab30c&&_0x464de0!=_0x2e57c2&&_0x464de0!=_0x5583d8&&_0x464de0!=_0x553581&&_0x464de0!=_0x30e5af&&_0x464de0!=_0x3572ec&&_0x464de0!=_0x1ed5ce)return console["log"]("%c 20231122 hardDecoder not support correctType:%d","color:red",_0x464de0),this["FECErrorCode"]=16,0;if(1!=this["FECParamJudge"](_0x18918a,_0x56d041,_0x464de0))return 0;var _0x1c8c7e;if(_0x1c8c7e=this["_ConvertDisplayEffect"](_0x56d041,_0x464de0),0==_0x18918a&&null==this["stFishEyeManager"][_0x18918a]["pRender"]&&(this["stFishEyeManager"][_0x18918a]["pRender"]=this["oVideoHandle"],this["stFishEyeManager"][_0x18918a]["nSubPort"]=_0x18918a,this["stFishEyeManager"][_0x18918a]["sCanvasID"]=this["mainCanvasID"],this["stFishEyeManager"][_0x18918a]["bUsed"]=1,this["stFishEyeManager"][_0x18918a]["bInited"]=1,this["stFishEyeManager"][_0x18918a]["nValidSubPort"]=this["mainVaildSubPort"],this["stFishEyeManager"][_0x18918a]["emPlaceType"]=_0x56d041,this["stFishEyeManager"][_0x18918a]["emCorrectType"]=_0x464de0,this["stFishEyeManager"][_0x18918a]["emEffect"]=_0x1c8c7e,this["mainFECCorrect"]=_0x1c8c7e),null!=this["stFishEyeManager"][_0x18918a]["pRender"]){this["stFishEyeManager"][_0x18918a]["pRender"]["SR_DelSubPort"](this["stFishEyeManager"][_0x18918a]["nValidSubPort"]);var _0x15526a=this["stFishEyeManager"][_0x18918a]["pRender"]["SR_AddSubPort"](_0x1c8c7e);if(-1==_0x15526a)return console["info"]("%c FEC_ResetCorrectType SR_AddSubPort error subport:%d","color: red",_0x15526a),0;if(this["stFishEyeManager"][_0x18918a]["nValidSubPort"]=_0x15526a,this["stFishEyeManager"][_0x18918a]["emPlaceType"]=_0x56d041,this["stFishEyeManager"][_0x18918a]["emCorrectType"]=_0x464de0,this["stFishEyeManager"][_0x18918a]["emEffect"]=_0x1c8c7e,_0x2e57c2<=this["stFishEyeManager"][_0x18918a]["emCorrectType"]){var _0x115c70=this["stFishEyeManager"][_0x18918a]["pRender"]["SR_SetRenderState"](_0x41da8c,0);_0x31e0fd!=_0x115c70&&console["log"](">>>VideoRender.js SR_SetRenderState failed ret：%08x\n",_0x115c70)}}return this["FECShowMode"]>0&&null!=this["stFishEyeManager"][_0x18918a]["pRender"]&&this["stFishEyeManager"][_0x18918a]["pRender"]["SR_SetPTZDisplayMode"](this["FECShowMode"]),0==_0x18918a&&(this["mainVaildSubPort"]=this["stFishEyeManager"][_0x18918a]["nValidSubPort"]),1}},{key:"FEC_GetPort",value:function value(_0x213b55,_0x224d36){if(_0x224d36!=_0x44955c&&_0x224d36!=_0x2e6b56&&_0x224d36!=_0x3ab30c&&_0x224d36!=_0x2e57c2&&_0x224d36!=_0x5583d8&&_0x224d36!=_0x553581&&_0x224d36!=_0x30e5af&&_0x224d36!=_0x3572ec&&_0x224d36!=_0x1ed5ce)return console["log"]("%c 20231112 hardDecoder not support emCorrectType:%d","color:red",_0x224d36),this["FECErrorCode"]=16,-1;var _0x368e25;if(1!=this["FECParamJudge"](-1,_0x213b55,_0x224d36))return-1;var _0x483c96=0;for(_0x368e25=1;_0x368e25<_0x20e5b6;_0x368e25++)if(0==this["stFishEyeManager"][_0x368e25]["nSubPort"]&&0==this["stFishEyeManager"][_0x368e25]["bUsed"]){this["stFishEyeManager"][_0x368e25]["nSubPort"]=_0x368e25,this["stFishEyeManager"][_0x368e25]["nValidSubPort"]=-1,this["stFishEyeManager"][_0x368e25]["bUsed"]=1,this["stFishEyeManager"][_0x368e25]["emPlaceType"]=_0x213b55,this["stFishEyeManager"][_0x368e25]["emCorrectType"]=_0x224d36,_0x483c96=_0x368e25;break}if(_0x20e5b6==_0x368e25)return console["info"]("%c FEC_GetPort-12 fish subport max","color: red"),this["FECErrorCode"]=1284,-1;var _0x554b68;return _0x554b68=this["_ConvertDisplayEffect"](this["stFishEyeManager"][_0x483c96]["emPlaceType"],this["stFishEyeManager"][_0x483c96]["emCorrectType"]),_0x2bffb5["SR_DE_FISH_ORIGINAL"]!=_0x554b68?(0==this["stFishEyeManager"][_0x483c96]["bInited"]&&(this["stFishEyeManager"][_0x483c96]["emEffect"]=_0x554b68,this["stFishEyeManager"][_0x483c96]["bInited"]=0,this["stFishParam"][_0x483c96]["fZoom"]=.005,this["stFishParam"][_0x483c96]["stPTZParam"]["fPTZPositionX"]=.5,this["stFishParam"][_0x483c96]["stPTZParam"]["fPTZPositionY"]=.5,this["stFishParam"][_0x483c96]["fWideScanOffset"]=0),this["FECErrorCode"]=0,this["subPortNum"]++,_0x483c96):_0x483c96<_0x20e5b6&&0==this["stFishEyeManager"][_0x483c96]["bInited"]?(this["stFishEyeManager"][_0x483c96]["emEffect"]=_0x554b68,this["stFishEyeManager"][_0x483c96]["bInited"]=0,this["stFishParam"][_0x483c96]["fZoom"]=0,this["stFishParam"][_0x483c96]["stPTZParam"]["fPTZPositionX"]=0,this["stFishParam"][_0x483c96]["stPTZParam"]["fPTZPositionY"]=0,this["stFishParam"][_0x483c96]["fWideScanOffset"]=0,this["FECErrorCode"]=0,this["subPortNum"]++,_0x483c96):(this["stFishEyeManager"][_0x368e25]["pRender"]=null,this["stFishEyeManager"][_0x368e25]["nSubPort"]=0,this["stFishEyeManager"][_0x368e25]["sCanvasID"]=null,this["stFishEyeManager"][_0x368e25]["bUsed"]=0,this["stFishEyeManager"][_0x368e25]["bInited"]=0,this["stFishEyeManager"][_0x368e25]["nValidSubPort"]=0,this["stFishEyeManager"][_0x368e25]["emPlaceType"]=_0x2dad09,this["stFishEyeManager"][_0x368e25]["emCorrectType"]=_0x44955c,this["stFishEyeManager"][_0x368e25]["emEffect"]=_0x2bffb5["SR_DE_FISH_ORIGINAL"],this["FECErrorCode"]=_0x50343f,-1)}},{key:"FECParamJudge",value:function value(_0x1b42c3,_0x5e9f14,_0x296a7c){if((_0xe76158==_0x5e9f14||_0x2dad09==_0x5e9f14)&&_0x553581==_0x296a7c)return console["info"]("%c FEC_GetPort-1 floor and ceiling not support lat","color: red"),this["FECErrorCode"]=_0x50343f,0;if(_0x2d5181==_0x5e9f14&&_0x30e5af==_0x296a7c)return console["info"]("%c FEC_GetPort-2 wall not support cylinger","color: red"),this["FECErrorCode"]=_0x50343f,0;if(_0x2d5181==_0x5e9f14&&_0x3c1d0c==_0x296a7c)return console["info"]("%c FEC_GetPort-3 wall not support split cylinger","color: red"),this["FECErrorCode"]=_0x50343f,0;if((_0xe76158==_0x5e9f14||_0x2dad09==_0x5e9f14)&&_0x3572ec==_0x296a7c)return console["info"]("%c FEC_GetPort-4 floor and ceiling not support horizontal","color: red"),this["FECErrorCode"]=_0x50343f,0;if((_0xe76158==_0x5e9f14||_0x2dad09==_0x5e9f14)&&_0x1ed5ce==_0x296a7c)return console["info"]("%c FEC_GetPort-5 floor and ceiling not support vertical","color: red"),this["FECErrorCode"]=_0x50343f,0;if(_0x2d5181!=_0x5e9f14&&_0xe76158!=_0x5e9f14&&_0x2dad09!=_0x5e9f14)return console["info"]("%c FEC_GetPort-6 emPlaceType only support floor, ceiling and wall","color: red"),this["FECErrorCode"]=MP_E_SUPPORT,0;if(0!=_0x296a7c&&_0x296a7c!=_0x5583d8&&_0x296a7c!=_0x2e6b56&&_0x296a7c!=_0x3ab30c&&_0x296a7c!=_0x553581&&_0x296a7c!=_0x2e57c2&&_0x296a7c!=_0x30e5af&&_0x296a7c!=_0x3c1d0c&&_0x296a7c!=_0x53b3cd&&_0x296a7c!=_0x3572ec&&_0x296a7c!=_0x1ed5ce)return console["info"]("%c FEC_GetPort-7 emCorrectType error","color: red"),this["FECErrorCode"]=MP_E_SUPPORT,0;for(var _0x1c4709=0;_0x1c4709<_0x20e5b6;_0x1c4709++)if(_0x1c4709!=_0x1b42c3){if(this["stFishEyeManager"][_0x1c4709]["bUsed"]&&this["stFishEyeManager"][_0x1c4709]["emPlaceType"]!=_0x5e9f14)return console["info"]("%c FEC_GetPort-8 emPlaceType changed","color: red"),this["FECErrorCode"]=1303,0;if(this["stFishEyeManager"][_0x1c4709]["bUsed"]&&this["stFishEyeManager"][_0x1c4709]["emCorrectType"]!=_0x5583d8&&this["stFishEyeManager"][_0x1c4709]["emCorrectType"]!=_0x2e57c2&&this["stFishEyeManager"][_0x1c4709]["emCorrectType"]!=_0x30e5af&&this["stFishEyeManager"][_0x1c4709]["emCorrectType"]!=_0x3c1d0c&&this["stFishEyeManager"][_0x1c4709]["emCorrectType"]!=_0x53b3cd&&this["stFishEyeManager"][_0x1c4709]["emCorrectType"]!=_0x3572ec&&this["stFishEyeManager"][_0x1c4709]["emCorrectType"]!=_0x1ed5ce&&_0x296a7c!=_0x5583d8&&_0x296a7c!=_0x2e57c2&&_0x296a7c!=_0x30e5af&&_0x296a7c!=_0x3c1d0c&&_0x296a7c!=_0x53b3cd&&_0x296a7c!=_0x3572ec&&_0x296a7c!=_0x1ed5ce)return console["info"]("%c FEC_GetPort-9 origin/180/360/lat only display one port","color: red"),this["FECErrorCode"]=1304,0;if(this["stFishEyeManager"][_0x1c4709]["bUsed"]&&(this["stFishEyeManager"][_0x1c4709]["emCorrectType"]==_0x5583d8&&_0x296a7c==_0x2e6b56||this["stFishEyeManager"][_0x1c4709]["emCorrectType"]==_0x2e6b56&&_0x296a7c==_0x5583d8))return console["info"]("%c FEC_GetPort-10 180 cannot support ptz","color: red"),this["FECErrorCode"]=1304,0}return 1}},{key:"FEC_Enable",value:function value(_0x23a919){return _0x23a919<1||_0x23a919>31||null==_0x23a919?(console["info"]("%c FEC_Enable-1 nSubPort:%d","color: red",_0x23a919),this["FECErrorCode"]=_0x16368b,0):null!==this["stFishEyeManager"][_0x23a919]["pRender"]?(console["info"]("%c FEC_Enable-2 nSubPort:%d","color: red",_0x23a919),this["FECErrorCode"]=1301,0):(null==this["stFishEyeManager"][_0x23a919]["pRender"]&&(this["stFishEyeManager"][_0x23a919]["pRender"]=new _0x5e4a58,null==this["pFishParamManager"]&&(this["pFishParamManager"]=new _0x3beccf),this["stFishEyeManager"][_0x23a919]["pRender"]["SR_SetFishParamManager"](this["pFishParamManager"])),1)}},{key:"FEC_SetWnd",value:function value(_0xb1000a,_0x240b65){if(_0xb1000a<1||_0xb1000a>31||null==_0xb1000a)return console["info"]("%c FEC_SetWnd-1 nSubPort:%d","color: red",_0xb1000a),this["FECErrorCode"]=_0x16368b,0;if(null==this["stFishEyeManager"][_0xb1000a]["pRender"])return console["info"]("%c FEC_SetWnd-2 nSubPort:%d pRender is null","color: red",_0xb1000a),this["FECErrorCode"]=_0x34c64b,0;if(0==this["stFishEyeManager"][_0xb1000a]["bUsed"])return console["info"]("%c FEC_SetWnd-3 nSubPort:%d bUsed:%d","color: red",_0xb1000a,this["stFishEyeManager"][_0xb1000a]["bUsed"]),this["FECErrorCode"]=_0x34c711,0;if(null==_0x240b65)return console["info"]("%c FEC_SetWnd-4 nSubPort:%d sCanvasID:%s","color: red",_0xb1000a,_0x240b65),this["FECErrorCode"]=1305,0;if(0!=this["stFishEyeManager"][_0xb1000a]["nSubPort"]&&0!=this["stFishEyeManager"][_0xb1000a]["bUsed"]){if(0!=this["stFishEyeManager"][_0xb1000a]["bInited"]&&null!=this["stFishEyeManager"][_0xb1000a]["sCanvasID"])return _0x240b65!=this["stFishEyeManager"][_0xb1000a]["sCanvasID"]?(console["info"]("%c FEC_SetWnd-5 nSubPort:%d sCanvasID:%s already init","color: red",_0xb1000a,_0x240b65),this["FECErrorCode"]=1286,0):1;var _0x1991ea;_0x1991ea=this["_ConvertDisplayEffect"](this["stFishEyeManager"][_0xb1000a]["emPlaceType"],this["stFishEyeManager"][_0xb1000a]["emCorrectType"]);var _0x30ecc6=this["stFishEyeManager"][_0xb1000a]["pRender"]["SR_Init"](_0x240b65,_0x44487e),_0x327856=this["stFishEyeManager"][_0xb1000a]["pRender"]["SR_AddSubPort"](_0x1991ea);if(-1==_0x327856)return console["info"]("%c FEC_SetWnd SR_AddSubPort error subport:%d","color: red",_0xb1000a),0;if(this["stFishEyeManager"][_0xb1000a]["nValidSubPort"]=_0x327856,_0x31e0fd!=_0x30ecc6)return this["stFishEyeManager"][_0xb1000a]["bInited"]=0,this["stFishEyeManager"][_0xb1000a]["sCanvasID"]=null,this["FECErrorCode"]=_0x34c711,0;if(this["stFishEyeManager"][_0xb1000a]["bInited"]=1,this["stFishEyeManager"][_0xb1000a]["sCanvasID"]=_0x240b65,_0x2e57c2<=this["stFishEyeManager"][_0xb1000a]["emCorrectType"]){var _0x1af127=this["stFishEyeManager"][_0xb1000a]["pRender"]["SR_SetRenderState"](_0x41da8c,0);_0x31e0fd!=_0x1af127&&console["log"](">>>VideoRender.js SR_SetRenderState failed ret：%08x\n",_0x1af127)}return this["FECShowMode"]>0&&this["stFishEyeManager"][_0xb1000a]["pRender"]["SR_SetPTZDisplayMode"](this["FECShowMode"]),1}return this["FECErrorCode"]=_0x34c711,0}},{key:"FEC_Disable",value:function value(_0x2f89e0,_0x491b60,_0xd087c5){if(_0x2f89e0<1||_0x2f89e0>31||null==_0x2f89e0)return console["info"]("%c FEC_Disable-1 nSubPort:%d","color: red",_0x2f89e0),this["FECErrorCode"]=_0x16368b,0;if(1==this["stFishEyeManager"][_0x2f89e0]["bInited"]&&null!=this["stFishEyeManager"][_0x2f89e0]["pRender"]){if(_0x31e0fd!=this["stFishEyeManager"][_0x2f89e0]["pRender"]["SR_DelSubPort"](this["stFishEyeManager"][_0x2f89e0]["nValidSubPort"]))return console["info"]("%c FEC_Disable-2 SR_DelSubPort error nSubPort:%d","color: red",_0x2f89e0),0;this["stFishEyeManager"][_0x2f89e0]["bInited"]=0,this["stFishEyeManager"][_0x2f89e0]["nValidSubPort"]=-1,this["stFishEyeManager"][_0x2f89e0]["pRender"]["SR_Destroy"](),this["stFishEyeManager"][_0x2f89e0]["pRender"]=null}return 1}},{key:"FEC_DelPort",value:function value(_0x4cc5db){return _0x4cc5db<1||_0x4cc5db>31||null==_0x4cc5db?(console["info"]("%c FEC_DelPort-1 nSubPort:%d","color: red",_0x4cc5db),this["FECErrorCode"]=_0x16368b,0):0==this["stFishEyeManager"][_0x4cc5db]["bUsed"]?(console["info"]("%c FEC_DelPort-2 nSubPort:%d bUsed：%d","color: red",_0x4cc5db,this["stFishEyeManager"][_0x4cc5db]["bUsed"]),this["FECErrorCode"]=_0x34c711,0):(this["stFishEyeManager"][_0x4cc5db]["nSubPort"]=0,this["stFishEyeManager"][_0x4cc5db]["sCanvasID"]=null,this["stFishEyeManager"][_0x4cc5db]["bUsed"]=0,this["stFishEyeManager"][_0x4cc5db]["bInited"]=0,this["stFishEyeManager"][_0x4cc5db]["nValidSubPort"]=0,this["stFishEyeManager"][_0x4cc5db]["emPlaceType"]=_0x2dad09,this["stFishEyeManager"][_0x4cc5db]["emCorrectType"]=_0x44955c,this["stFishEyeManager"][_0x4cc5db]["emEffect"]=_0x2bffb5["SR_DE_FISH_ORIGINAL"],this["stFishParam"][_0x4cc5db]["stCycleParam"]["fRadiusLeft"]=0,this["stFishParam"][_0x4cc5db]["stCycleParam"]["fRadiusRight"]=1,this["stFishParam"][_0x4cc5db]["stCycleParam"]["fRadiusTop"]=0,this["stFishParam"][_0x4cc5db]["stCycleParam"]["fRadiusBottom"]=1,this["subPortNum"]>0&&this["subPortNum"]--,1)}},{key:"FEC_SetParam",value:function value(_0x590233,_0x4cdae6){if(this["FECErrorCode"]=0,_0x590233<0||_0x590233>31||null==_0x590233)return console["info"]("%c FEC_SetParam-1 nSubPort:%d","color: red",_0x590233),this["FECErrorCode"]=_0x16368b,0;if(null==this["stFishEyeManager"][_0x590233]["pRender"])return console["info"]("%c FEC_SetParam-2 nSubPort:%d pRender:%d","color: red",_0x590233,this["stFishEyeManager"][_0x590233]["pRender"]),this["FECErrorCode"]=_0x34c64b,0;if(0==this["stFishEyeManager"][_0x590233]["bUsed"])return console["info"]("%c FEC_SetParam-3 nSubPort:%d bUsed:%d","color: red",_0x590233,this["stFishEyeManager"][_0x590233]["bUsed"]),this["FECErrorCode"]=_0x34c711,0;if(this["stFishEyeManager"][_0x590233]["emCorrectType"]>=_0x2e57c2&&this["stFishEyeManager"][_0x590233]["emCorrectType"]<=_0x1ed5ce&&30&_0x4cdae6["upDateType"])return console["info"]("%c FEC_SetParam-4 nSubPort:%d not 3D","color: red",_0x590233),this["FECErrorCode"]=_0xfdd9cf,0;if(_0x29624e&_0x4cdae6["upDateType"]){if(null==_0x4cdae6["stCycleParam"])return this["FECErrorCode"]=_0x52a940,0;for(var _0x54995e=1;_0x54995e<_0x20e5b6;_0x54995e++){if(this["stFishEyeManager"][_0x54995e]["bUsed"]&&this["stFishEyeManager"][_0x54995e]["nSubPort"]&&_0x3572ec==this["stFishEyeManager"][_0x54995e]["emCorrectType"]&&(_0x4cdae6["stCycleParam"]["fRadiusLeft"]<=-.5||_0x4cdae6["stCycleParam"]["fRadiusLeft"]>=.4||_0x4cdae6["stCycleParam"]["fRadiusRight"]<=.6||_0x4cdae6["stCycleParam"]["fRadiusRight"]>=1.5||_0x4cdae6["stCycleParam"]["fRadiusTop"]<=-.5||_0x4cdae6["stCycleParam"]["fRadiusTop"]>0||_0x4cdae6["stCycleParam"]["fRadiusBottom"]<1||_0x4cdae6["stCycleParam"]["fRadiusBottom"]>=1.5||_0x4cdae6["stCycleParam"]["fRadiusLeft"]+_0x4cdae6["stCycleParam"]["fRadiusRight"]<=.8||_0x4cdae6["stCycleParam"]["fRadiusLeft"]+_0x4cdae6["stCycleParam"]["fRadiusRight"]>=1.2||_0x4cdae6["stCycleParam"]["fRadiusTop"]+_0x4cdae6["stCycleParam"]["fRadiusBottom"]<=.8||_0x4cdae6["stCycleParam"]["fRadiusTop"]+_0x4cdae6["stCycleParam"]["fRadiusBottom"]>=1.2))return this["FECErrorCode"]=_0x52a940,0;if(this["stFishEyeManager"][_0x54995e]["bUsed"]&&this["stFishEyeManager"][_0x54995e]["nSubPort"]&&_0x1ed5ce==this["stFishEyeManager"][_0x54995e]["emCorrectType"]&&(_0x4cdae6["stCycleParam"]["fRadiusLeft"]<=-.5||_0x4cdae6["stCycleParam"]["fRadiusLeft"]>0||_0x4cdae6["stCycleParam"]["fRadiusRight"]<1||_0x4cdae6["stCycleParam"]["fRadiusRight"]>=1.5||_0x4cdae6["stCycleParam"]["fRadiusTop"]<=-.5||_0x4cdae6["stCycleParam"]["fRadiusTop"]>=.4||_0x4cdae6["stCycleParam"]["fRadiusBottom"]<=.6||_0x4cdae6["stCycleParam"]["fRadiusBottom"]>=1.5||_0x4cdae6["stCycleParam"]["fRadiusLeft"]+_0x4cdae6["stCycleParam"]["fRadiusRight"]<=.8||_0x4cdae6["stCycleParam"]["fRadiusLeft"]+_0x4cdae6["stCycleParam"]["fRadiusRight"]>=1.2||_0x4cdae6["stCycleParam"]["fRadiusTop"]+_0x4cdae6["stCycleParam"]["fRadiusBottom"]<=.8||_0x4cdae6["stCycleParam"]["fRadiusTop"]+_0x4cdae6["stCycleParam"]["fRadiusBottom"]>=1.2))return this["FECErrorCode"]=_0x52a940,0}}if(0==this["stFishEyeManager"][_0x590233]["bInited"]){if(_0x314b8c&_0x4cdae6["upDateType"]){if(_0x2e6b56!=this["stFishEyeManager"][_0x590233]["emCorrectType"]&&_0x3ab30c!=this["stFishEyeManager"][_0x590233]["emCorrectType"]||_0x2d5181==this["stFishEyeManager"][_0x590233]["emPlaceType"])return this["FECErrorCode"]=_0xfdd9cf,0;for(var _0x335033=1;_0x335033<_0x20e5b6;_0x335033++)if(this["stFishEyeManager"][_0x335033]["nSubPort"]&&this["stFishEyeManager"][_0x335033]["bUsed"]&&this["stFishEyeManager"][_0x335033]["emCorrectType"]==_0x5583d8)return this["FECErrorCode"]=_0x485962,0;this["stFishParam"][_0x590233]["fWideScanOffset"]=_0x4cdae6["fValue"]}if(_0x51b898&_0x4cdae6["upDateType"]){if(null==_0x4cdae6["stPTZColor"])return this["FECErrorCode"]=_0x52a940,0;if(_0x4cdae6["stPTZColor"]["nR"]>255||_0x4cdae6["stPTZColor"]["nG"]>255||_0x4cdae6["stPTZColor"]["nB"]>255||_0x4cdae6["stPTZColor"]["nAlpha"]>255)return this["FECErrorCode"]=_0xfdd9cf,0;this["stFishParam"][_0x590233]["stPTZColor"]["nR"]=_0x4cdae6["stPTZColor"]["nR"],this["stFishParam"][_0x590233]["stPTZColor"]["nG"]=_0x4cdae6["stPTZColor"]["nG"],this["stFishParam"][_0x590233]["stPTZColor"]["nB"]=_0x4cdae6["stPTZColor"]["nB"],this["stFishParam"][_0x590233]["stPTZColor"]["nAlpha"]=_0x4cdae6["stPTZColor"]["nAlpha"]}if(_0x1080c7&_0x4cdae6["upDateType"]){if(_0x5583d8!=this["stFishEyeManager"][_0x590233]["emCorrectType"])return this["FECErrorCode"]=_0xfdd9cf,0;this["stFishParam"][_0x590233]["stPTZParam"]["fPTZPositionX"]=_0x4cdae6["fPTZParam"]["fPTZPositionX"],this["stFishParam"][_0x590233]["stPTZParam"]["fPTZPositionY"]=_0x4cdae6["fPTZParam"]["fPTZPositionY"]}if(_0x59207d&_0x4cdae6["upDateType"]){if(_0x5583d8!=this["stFishEyeManager"][_0x590233]["emCorrectType"])return this["FECErrorCode"]=_0xfdd9cf,0;this["stFishParam"][_0x590233]["fZoom"]=_0x4cdae6["fPTZZoom"]}if(_0x168a5f&_0x4cdae6["upDateType"]){if(null==this["stFishParam"]["stPTZSelect"])return 0;if(_0x5583d8!=this["stFishEyeManager"][_0x590233]["emCorrectType"])return this["FECErrorCode"]=_0xfdd9cf,0;this["stFishParam"]["stPTZSelect"]["fTop"]=_0x4cdae6["stPTZSelect"]["fTop"],this["stFishParam"]["stPTZSelect"]["fBottom"]=_0x4cdae6["stPTZSelect"]["fBottom"],this["stFishParam"]["stPTZSelect"]["fLeft"]=_0x4cdae6["stPTZSelect"]["fLeft"],this["stFishParam"]["stPTZSelect"]["fRight"]=_0x4cdae6["stPTZSelect"]["fRight"]}if(_0x29624e&_0x4cdae6["upDateType"]){if(null==_0x4cdae6["stCycleParam"])return this["FECErrorCode"]=_0x52a940,0;if(0==this["_IsValidRadiusParam"](_0x4cdae6["stCycleParam"]))return this["FECErrorCode"]=_0x52a940,0;this["stFishParam"][0]["stCycleParam"]["fRadiusLeft"]=_0x4cdae6["stCycleParam"]["fRadiusLeft"],this["stFishParam"][0]["stCycleParam"]["fRadiusRight"]=_0x4cdae6["stCycleParam"]["fRadiusRight"],this["stFishParam"][0]["stCycleParam"]["fRadiusTop"]=_0x4cdae6["stCycleParam"]["fRadiusTop"],this["stFishParam"][0]["stCycleParam"]["fRadiusBottom"]=_0x4cdae6["stCycleParam"]["fRadiusBottom"]}return 1}if(_0x314b8c&_0x4cdae6["upDateType"]){if(_0x2e6b56!=this["stFishEyeManager"][_0x590233]["emCorrectType"]&&_0x3ab30c!=this["stFishEyeManager"][_0x590233]["emCorrectType"]||_0x2d5181==this["stFishEyeManager"][_0x590233]["emPlaceType"])return this["FECErrorCode"]=_0xfdd9cf,0;for(var _0x3f7949=1;_0x3f7949<_0x20e5b6;_0x3f7949++)if(this["stFishEyeManager"][_0x3f7949]["nSubPort"]&&this["stFishEyeManager"][_0x3f7949]["bUsed"]&&this["stFishEyeManager"][_0x3f7949]["emCorrectType"]==_0x5583d8)return this["FECErrorCode"]=_0x485962,0;var _0x234b4d={};if(_0x234b4d["nFishParamType"]=_0x4e6902,_0x234b4d["bBlack"]=0,_0x234b4d["fAngle"]=_0x4cdae6["fValue"],_0x31e0fd!=this["stFishEyeManager"][_0x590233]["pRender"]["SR_SetFishParam"](_0x234b4d))return this["FECErrorCode"]=_0x485962,0;this["stFishParam"][_0x590233]["fWideScanOffset"]=_0x4cdae6["fValue"]}if(_0x51b898&_0x4cdae6["upDateType"]){if(null==_0x4cdae6["stPTZColor"])return this["FECErrorCode"]=_0xfdd9cf,0;if(_0x4cdae6["stPTZColor"]["nR"]>255||_0x4cdae6["stPTZColor"]["nG"]>255||_0x4cdae6["stPTZColor"]["nB"]>255||_0x4cdae6["stPTZColor"]["nAlpha"]>255)return this["FECErrorCode"]=_0xfdd9cf,0;var _0x59f3c2={};_0x59f3c2["fR"]=float(_0x4cdae6["stPTZColor"]["nR"]/255),_0x59f3c2["fG"]=float(_0x4cdae6["stPTZColor"]["nG"]/255),_0x59f3c2["fB"]=float(_0x4cdae6["stPTZColor"]["nB"]/255),_0x59f3c2["fA"]=float(_0x4cdae6["stPTZColor"]["nAlpha"]/255),this["stFishParam"][_0x590233]["stPTZColor"]["nR"]=_0x4cdae6["stPTZColor"]["nR"],this["stFishParam"][_0x590233]["stPTZColor"]["nG"]=_0x4cdae6["stPTZColor"]["nG"],this["stFishParam"][_0x590233]["stPTZColor"]["nB"]=_0x4cdae6["stPTZColor"]["nB"],this["stFishParam"][_0x590233]["stPTZColor"]["nAlpha"]=_0x4cdae6["stPTZColor"]["nAlpha"]}if(_0x1080c7&_0x4cdae6["upDateType"]){if(_0x5583d8!=this["stFishEyeManager"][_0x590233]["emCorrectType"])return this["FECErrorCode"]=_0xfdd9cf,0;var _0x2fa392={};_0x2fa392["nFishParamType"]=_0xe75037,_0x2fa392["bBlack"]=0,_0x2fa392["fPTZX"]=_0x4cdae6["fPTZParam"]["fPTZPositionX"],_0x2fa392["fPTZY"]=_0x4cdae6["fPTZParam"]["fPTZPositionY"];var _0x1af853=this["stFishEyeManager"][_0x590233]["pRender"]["SR_SetFishParam"](_0x2fa392);if(_0x31e0fd!=_0x1af853)return this["FECErrorCode"]=_0x485962,0;this["stFishParam"][_0x590233]["stPTZParam"]["fPTZPositionX"]=_0x4cdae6["fPTZParam"]["fPTZPositionX"],this["stFishParam"][_0x590233]["stPTZParam"]["fPTZPositionY"]=_0x4cdae6["fPTZParam"]["fPTZPositionY"]}if(_0x59207d&_0x4cdae6["upDateType"]){if(_0x5583d8!=this["stFishEyeManager"][_0x590233]["emCorrectType"])return this["FECErrorCode"]=_0xfdd9cf,0;var _0x459cbd={};if(_0x459cbd["nFishParamType"]=_0x5b2108,_0x459cbd["bBlack"]=0,_0x459cbd["fZoom"]=_0x4cdae6["fPTZZoom"],_0x31e0fd!=this["stFishEyeManager"][_0x590233]["pRender"]["SR_SetFishParam"](_0x459cbd))return this["FECErrorCode"]=_0x485962,0;this["stFishParam"][_0x590233]["fZoom"]=_0x4cdae6["fPTZZoom"]}if(_0x29624e&_0x4cdae6["upDateType"]){if(0==this["_IsValidRadiusParam"](_0x4cdae6["stCycleParam"]))return this["FECErrorCode"]=_0x52a940,0;var _0x48dcc7={};if(_0x48dcc7["nFishParamType"]=_0x3d41fb,_0x48dcc7["bBlack"]=1,_0x48dcc7["fRXLeft"]=_0x4cdae6["stCycleParam"]["fRadiusLeft"],_0x48dcc7["fRXRight"]=_0x4cdae6["stCycleParam"]["fRadiusRight"],_0x48dcc7["fRYTop"]=_0x4cdae6["stCycleParam"]["fRadiusTop"],_0x48dcc7["fRYBottom"]=_0x4cdae6["stCycleParam"]["fRadiusBottom"],_0x31e0fd!=this["stFishEyeManager"][_0x590233]["pRender"]["SR_SetFishParam"](this["stFishEyeManager"][_0x590233]["nValidSubPort"],_0x48dcc7))return this["FECErrorCode"]=_0x52a940,0;this["stFishParam"][0]["stCycleParam"]["fRadiusLeft"]=_0x4cdae6["stCycleParam"]["fRadiusLeft"],this["stFishParam"][0]["stCycleParam"]["fRadiusRight"]=_0x4cdae6["stCycleParam"]["fRadiusRight"],this["stFishParam"][0]["stCycleParam"]["fRadiusTop"]=_0x4cdae6["stCycleParam"]["fRadiusTop"],this["stFishParam"][0]["stCycleParam"]["fRadiusBottom"]=_0x4cdae6["stCycleParam"]["fRadiusBottom"]}return _0x168a5f&_0x4cdae6["upDateType"]&&_0x5583d8==this["stFishEyeManager"][_0x590233]["emCorrectType"]&&_0x31e0fd!=this["stFishEyeManager"][_0x590233]["pRender"]["SR_SetFishParam"](this["stFishEyeManager"][_0x590233]["stPTZSelect"])?(this["FECErrorCode"]=1299,0):1}},{key:"FEC_GetParam",value:function value(_0x3086ab,_0x5183bb){return _0x3086ab<0||_0x3086ab>31||null==_0x3086ab?(console["info"]("%c FEC_GetParam-1 nSubPort:%d","color: red",_0x3086ab),this["FECErrorCode"]=_0x16368b,0):null==this["stFishEyeManager"][_0x3086ab]["pRender"]?(console["info"]("%c FEC_GetParam-2 pRender:%d","color: red",this["stFishEyeManager"][_0x3086ab]["pRender"]),this["FECErrorCode"]=_0x34c64b,0):(this["stFishEyeManager"][_0x3086ab]["pRender"]["SR_GetFishParam"](_0x5183bb),_0x5183bb["emCorrectType"]=this["stFishEyeManager"][_0x3086ab]["emCorrectType"],1)}},{key:"_IsValidRadiusParam",value:function value(_0x2e650a){return _0x2e650a["fRadiusBottom"]<=_0x2e650a["fRadiusTop"]||_0x2e650a["fRadiusRight"]<=_0x2e650a["fRadiusLeft"]?0:1}},{key:"FEC_SetViewParam",value:function value(_0x2b95d0,_0x526e20,_0x549c1f){return _0x2b95d0<0||_0x2b95d0>31||null==_0x2b95d0?(console["info"]("%c FEC_SetViewParam-1 nSubPort:%d","color: red",_0x2b95d0),this["FECErrorCode"]=_0x16368b,0):null==this["stFishEyeManager"][_0x2b95d0]["pRender"]?(console["info"]("%c FEC_SetViewParam-2 pRender:%d","color: red",this["stFishEyeManager"][_0x2b95d0]["pRender"]),this["FECErrorCode"]=_0x34c64b,0):_0x526e20<_0x5dbe7b||_0x526e20>_0x291b83?(this["FECErrorCode"]=_0x4e31b9,0):(this["FECErrorCode"]=0,0==this["stFishEyeManager"][_0x2b95d0]["bInited"]?(this["FECErrorCode"]=_0x34c711,0):_0x2e57c2<=this["stFishEyeManager"][_0x2b95d0]["emCorrectType"]?_0x31e0fd!=this["stFishEyeManager"][_0x2b95d0]["pRender"]["SR_SetViewParam"](_0x526e20,_0x549c1f)?(this["FECErrorCode"]=_0x4e31b9,0):1:(this["FECErrorCode"]=_0xfdd9cf,0))}},{key:"FEC_GetViewParam",value:function value(_0x15694e,_0x3cc346,_0x232c5d){if(_0x232c5d["fValue"]=-1,_0x15694e<0||_0x15694e>31||null==_0x15694e)return console["info"]("%c FEC_GetViewParam-1 nSubPort:%d","color: red",_0x15694e),this["FECErrorCode"]=_0x16368b,0;if(null==this["stFishEyeManager"][_0x15694e]["pRender"])return console["info"]("%c FEC_GetViewParam-2 pRender:%d","color: red",this["stFishEyeManager"][_0x15694e]["pRender"]),this["FECErrorCode"]=_0x34c64b,0;if(_0x3cc346<1||_0x3cc346>3||0==this["stFishEyeManager"][_0x15694e]["bInited"])return 0;if(_0x2e57c2<=this["stFishEyeManager"][_0x15694e]["emCorrectType"])this["stFishEyeManager"][_0x15694e]["pRender"]["SR_GetViewParam"](_0x3cc346,_0x232c5d);return 1}},{key:"FEC_SetDisplayRegion",value:function value(_0x97163f,_0x39617b,_0x462986,_0x44e0e2,_0x21df96,_0x5ef5c8,_0x8297cc){return _0x97163f<0||_0x97163f>31||null==_0x97163f?(console["info"]("%c FEC_SetDisplayRegion-1 nSubPort:%d","color: red",_0x97163f),this["FECErrorCode"]=_0x16368b,0):null==this["stFishEyeManager"][_0x97163f]["pRender"]?(console["info"]("%c FEC_SetDisplayRegion-2 pRender:%d","color: red",this["stFishEyeManager"][_0x97163f]["pRender"]),this["FECErrorCode"]=_0x34c64b,0):0!=_0x39617b||0!=_0x462986?(this["FECErrorCode"]=_0x4e31b9,0):this["stFishEyeManager"][_0x97163f]["emCorrectType"]!=_0x44955c&&this["stFishEyeManager"][_0x97163f]["emCorrectType"]!=_0x2e6b56&&this["stFishEyeManager"][_0x97163f]["emCorrectType"]!=_0x3ab30c&&this["stFishEyeManager"][_0x97163f]["emCorrectType"]!=_0x553581?(this["FECErrorCode"]=_0x50343f,0):0==this["stFishEyeManager"][_0x97163f]["bInited"]?(this["FECErrorCode"]=_0x34c711,0):_0x44e0e2<0||_0x21df96<0||_0x5ef5c8<0||_0x8297cc<0?(this["FECErrorCode"]=_0x4e31b9,0):_0x31e0fd!=this["stFishEyeManager"][_0x97163f]["pRender"]["SR_SetDisplayRect"](_0x44e0e2,_0x21df96,_0x5ef5c8,_0x8297cc,_0x1dd1c6)?(this["FECErrorCode"]=1297,0):1}},{key:"FEC_SetBackCilling",value:function value(_0x1eb6e0,_0x2a324d){return _0x1eb6e0<0||_0x1eb6e0>31||null==_0x1eb6e0?(this["FECErrorCode"]=_0x16368b,0):null==this["stFishEyeManager"][_0x1eb6e0]["pRender"]?(this["FECErrorCode"]=_0x34c64b,0):0==this["stFishEyeManager"][_0x1eb6e0]["bInited"]?(this["FECErrorCode"]=_0x34c711,0):_0x31e0fd!=this["stFishEyeManager"][_0x1eb6e0]["pRender"]["SR_SetRenderState"](_0x41da8c,_0x2a324d)?(this["FECErrorCode"]=1297,0):1}},{key:"FEC_GetPTZPort",value:function value(_0x47c20a,_0x3daa45,_0x46ad42){if(null!=this["stFishEyeManager"][_0x47c20a]["pRender"]){var _0xff325c={nPTZPort:-1};if(this["stFishEyeManager"][_0x47c20a]["pRender"]["SR_GetPTZPort"](_0x3daa45,_0x46ad42,_0xff325c)==_0x31e0fd)return _0xff325c["nPTZPort"]}return-1}},{key:"FEC_SetPTZDisplayMode",value:function value(_0x276027){return _0x276027>=0&&_0x276027<=2?(null!=this["stFishEyeManager"][0]["pRender"]&&this["stFishEyeManager"][0]["pRender"]["SR_SetPTZDisplayMode"](_0x276027),this["FECShowMode"]=_0x276027,1):(console["info"]("%c FEC_SetPTZDisplayMode ptzMode:%d","color: red",_0x276027),0)}},{key:"CheckFrameY",value:function value(_0x40254b,_0xf2e4fe,_0x1cf8ac){if(null==_0x40254b["yuvFrameBuffer"])return 0;for(var _0x2a909d=_0x40254b["displayWidth"]/_0xf2e4fe,_0x2630f0=_0x40254b["displayHeight"]/_0x1cf8ac,_0x10a82d=0,_0x5d130b=0,_0x67e19d=[],_0x3fd7ee=0;_0x3fd7ee<_0xf2e4fe*_0x1cf8ac;_0x3fd7ee++)_0x67e19d[_0x3fd7ee]=0,this["aPOSAdaptBuf"][_0x3fd7ee]=0;for(var _0x1e8f5e=0;_0x1e8f5e<_0x40254b["displayHeight"];_0x1e8f5e++)for(var _0x2e1886=0;_0x2e1886<_0x40254b["displayWidth"];_0x2e1886++)_0x10a82d=_0x2e1886/_0x2a909d<_0xf2e4fe?Math["floor"](_0x2e1886/_0x2a909d):_0xf2e4fe-1,_0x5d130b=_0x1e8f5e/_0x2630f0<_0x1cf8ac?Math["floor"](_0x1e8f5e/_0x2630f0):_0x1cf8ac-1,this["aPOSAdaptBuf"][_0x10a82d+_0x5d130b*_0xf2e4fe]+=_0x40254b["yuvFrameBuffer"][_0x1e8f5e*_0x40254b["displayWidth"]+_0x2e1886],_0x67e19d[_0x10a82d+_0x5d130b*_0xf2e4fe]++;for(var _0x5db8aa=0,_0x3e678f=0;_0x3e678f<_0xf2e4fe*_0x1cf8ac;_0x3e678f++)_0x5db8aa=this["aPOSAdaptBuf"][_0x3e678f]/_0x67e19d[_0x3e678f],this["aPOSAdaptBuf"][_0x3e678f]=_0x5db8aa>128?0:1;return 1}},{key:"CheckFrameRGB",value:function value(_0xacc4d9,_0x243eda,_0x4f3d8d){if(null==_0xacc4d9)return 0;for(var _0x53da23=_0xacc4d9["width"]/(_0x243eda-1),_0x54ddd9=_0xacc4d9["height"]/(_0x4f3d8d-1),_0x27844a=0,_0x174cc7=0,_0xea0573=[],_0x1e63e8=0;_0x1e63e8<_0x243eda*_0x4f3d8d;_0x1e63e8++)_0xea0573[_0x1e63e8]=0,this["aPOSAdaptBuf"][_0x1e63e8]=0;for(var _0x470c0a=0,_0x2bdd17=0;_0x2bdd17<_0xacc4d9["height"];_0x2bdd17++)for(var _0x18faef=0;_0x18faef<_0xacc4d9["width"];_0x18faef++){_0x27844a=(_0x27844a=Math["floor"](Math["round"](_0x18faef/(_0x53da23/2))/2))<_0x243eda?_0x27844a:_0x243eda-1,_0x174cc7=(_0x174cc7=Math["floor"](Math["round"](_0x2bdd17/(_0x54ddd9/2))/2))<_0x4f3d8d?_0x174cc7:_0x4f3d8d-1;var _0x16bf65=_0xacc4d9["pBuffer"][_0x470c0a],_0x56ff56=_0xacc4d9["pBuffer"][_0x470c0a+1],_0x2d990d=_0xacc4d9["pBuffer"][_0x470c0a+2],_0x2358d5=Math["round"](.299*_0x16bf65+.587*_0x56ff56+.114*_0x2d990d);this["aPOSAdaptBuf"][_0x27844a+_0x174cc7*_0x243eda]+=_0x2358d5,_0xea0573[_0x27844a+_0x174cc7*_0x243eda]++,_0x470c0a+=4}for(var _0x1e102c=0,_0x55db6e=0;_0x55db6e<_0x243eda*_0x4f3d8d;_0x55db6e++)_0x1e102c=this["aPOSAdaptBuf"][_0x55db6e]/_0xea0573[_0x55db6e],this["aPOSAdaptBuf"][_0x55db6e]=_0x1e102c>128?0:1;return 1}},{key:"GetWaterFontParam",value:function value(_0x434345){var _0x3880ed=_0x434345["pFontString"]["length"],_0x49624c=_0x434345["pstFontRotate"]["fRotateAngle"]%360/360*2*Math["PI"],_0x2b7c7b=Math["min"](_0x434345["pstFontSize"]["nFontWidth"],_0x434345["pstFontSize"]["nFontHeight"]),_0x542a85=_0x2b7c7b/this["mainCanvasID"]["width"],_0x4b8178=_0x2b7c7b/this["mainCanvasID"]["height"],_0x54a16c=_0x542a85*Math["cos"](Math["PI"]/2-_0x49624c)*_0x434345["pSpace"],_0x1d6a84=_0x4b8178*Math["sin"](Math["PI"]/2-_0x49624c)*_0x434345["pSpace"],_0x4aa47c=[],_0x29c08c=[],_0x47298d=[];if(_0x434345["nFontAlign"]){for(var _0x55593f=0;_0x55593f<_0x3880ed;_0x55593f++)_0x4aa47c[_0x55593f]=_0x434345["pFontString"][0]["length"]*_0x542a85/6,_0x29c08c[_0x55593f]=Math["atan2"](_0x4aa47c[0],_0x1d6a84),_0x47298d[_0x55593f]=Math["sqrt"](_0x4aa47c[0]*_0x4aa47c[0],_0x1d6a84*_0x1d6a84)}else{for(var _0x595fc4=0;_0x595fc4<_0x3880ed;_0x595fc4++)_0x4aa47c[_0x595fc4]=0,_0x29c08c[_0x595fc4]=0,_0x47298d[_0x595fc4]=0}var _0x273aa0=Math["floor"](_0x434345["pstFontNumber"]["nRowNumber"]),_0x10ae4e=Math["floor"](_0x434345["pstFontNumber"]["nColNumber"]),_0x5b7eea=_0x273aa0*_0x10ae4e;if(_0x434345["pstFontRotate"]["fFillFullScreen"]&&_0x5b7eea>0){for(var _0x1e7617=[],_0x172868=[],_0x1850f9=1/(_0x273aa0-1),_0x521afa=0;_0x521afa<_0x273aa0;_0x521afa++)_0x1e7617[_0x521afa]=_0x1850f9*_0x521afa-_0x1d6a84*((_0x3880ed-1)/2);for(var _0x3f1cdb=1/(_0x10ae4e-1),_0x3d0f6e=0;_0x3d0f6e<_0x10ae4e;_0x3d0f6e++)_0x172868[_0x3d0f6e]=_0x3f1cdb*_0x3d0f6e+_0x54a16c*((_0x3880ed-1)/2);for(var _0x1da1ff=0;_0x1da1ff<_0x5b7eea;++_0x1da1ff)for(var _0x4956b4=0;_0x4956b4<_0x3880ed;_0x4956b4++){this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]={},this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pString"]=_0x434345["pFontString"][_0x4956b4],this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["nFontWidth"]=_0x2b7c7b,this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["nFontHeight"]=_0x2b7c7b,this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pstStartPos"]={};var _0x2d0cc8=_0x1da1ff%_0x10ae4e,_0x34c75f=Math["floor"](_0x1da1ff/_0x10ae4e),_0x4e4ee1=Math["PI"]/2-_0x49624c+_0x29c08c[_0x4956b4];this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pstStartPos"]["fX"]=_0x172868[_0x2d0cc8]-_0x4956b4*_0x54a16c+_0x47298d[_0x4956b4]*Math["cos"](_0x4e4ee1),this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pstStartPos"]["fY"]=_0x1e7617[_0x34c75f]+_0x4956b4*_0x1d6a84-_0x47298d[_0x4956b4]*Math["sin"](_0x4e4ee1),_0x434345["nColorAdapt"]?(this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pstFontColor"]={},this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pstFontColor"]["fR"]=this["aPOSAdaptBuf"][_0x1da1ff],this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pstFontColor"]["fG"]=this["aPOSAdaptBuf"][_0x1da1ff],this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pstFontColor"]["fB"]=this["aPOSAdaptBuf"][_0x1da1ff],this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pstFontColor"]["fA"]=_0x434345["pstFontColor"]["fA"]):this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pstFontColor"]=_0x434345["pstFontColor"],this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["bBackGround"]=!1,this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pstBGColor"]=null,this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["fRotateAngle"]=_0x434345["pstFontRotate"]["fRotateAngle"],this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["pFontFamily"]=_0x434345["pFontFamily"],_0x434345["nFontAlign"]?(this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["textAlign"]="left",this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["textBaseline"]="top"):(this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["textAlign"]="center",this["pWaterFontParam"][_0x3880ed*_0x1da1ff+_0x4956b4]["textBaseline"]="middle")}}else{for(var _0x3ad535=0;_0x3ad535<_0x434345["pFontString"]["length"];_0x3ad535++)this["pWaterFontParam"][_0x3ad535]={},this["pWaterFontParam"][_0x3ad535]["pString"]=_0x434345["pFontString"][_0x3ad535],this["pWaterFontParam"][_0x3ad535]["nFontWidth"]=_0x2b7c7b,this["pWaterFontParam"][_0x3ad535]["nFontHeight"]=_0x2b7c7b,this["pWaterFontParam"][_0x3ad535]["pstStartPos"]={},this["pWaterFontParam"][_0x3ad535]["pstStartPos"]["fX"]=_0x434345["pstStartPos"]["fX"]-_0x3ad535*_0x54a16c,this["pWaterFontParam"][_0x3ad535]["pstStartPos"]["fY"]=_0x434345["pstStartPos"]["fY"]+_0x3ad535*_0x1d6a84,_0x434345["nColorAdapt"]?(this["pWaterFontParam"][_0x3ad535]["pstFontColor"]={},this["pWaterFontParam"][_0x3ad535]["pstFontColor"]["fR"]=this["aPOSAdaptBuf"][i],this["pWaterFontParam"][_0x3ad535]["pstFontColor"]["fG"]=this["aPOSAdaptBuf"][i],this["pWaterFontParam"][_0x3ad535]["pstFontColor"]["fB"]=this["aPOSAdaptBuf"][i],this["pWaterFontParam"][_0x3ad535]["pstFontColor"]["fA"]=_0x434345["pstFontColor"]["fA"]):this["pWaterFontParam"][_0x3ad535]["pstFontColor"]=_0x434345["pstFontColor"],this["pWaterFontParam"][_0x3ad535]["bBackGround"]=!1,this["pWaterFontParam"][_0x3ad535]["pstBGColor"]=null,this["pWaterFontParam"][_0x3ad535]["fRotateAngle"]=_0x434345["pstFontRotate"]["fRotateAngle"],this["pWaterFontParam"][_0x3ad535]["pFontFamily"]=_0x434345["pFontFamily"],_0x434345["nFontAlign"]?(this["pWaterFontParam"][_0x3ad535]["textAlign"]="left",this["pWaterFontParam"][_0x3ad535]["textBaseline"]="top"):(this["pWaterFontParam"][_0x3ad535]["textAlign"]="center",this["pWaterFontParam"][_0x3ad535]["textBaseline"]="middle")}return 1}},{key:"SetWaterMarkFont",value:function value(_0x11f16d,_0x2f541f){if(this["pWaterFontParam"]["splice"](0,this["pWaterFontParam"]["length"]),null===_0x11f16d)return 1;var _0x487596=Math["floor"](_0x11f16d["pstFontNumber"]["nRowNumber"]),_0x376410=Math["floor"](_0x11f16d["pstFontNumber"]["nColNumber"]),_0x49b30b=_0x487596*_0x376410;if(_0x11f16d["nColorAdapt"]&&_0x49b30b>0){var _0x5d65d7={};Math["min"](1920,Math["min"](this["mainCanvasID"]["width"],this["displayWidth"])),Math["min"](1080,Math["min"](this["mainCanvasID"]["height"],this["displayHeight"])),_0x5d65d7["nWidth"]=16,_0x5d65d7["nHeight"]=16,_0x5d65d7["nBufferLen"]=0;var _0x22b4eb=this["oVideoHandle"]["SR_GetCaptureSize"](_0x5d65d7);if(_0x31e0fd==_0x22b4eb){var _0x2f8f00=new Uint8Array(_0x5d65d7["nBufferLen"]),_0x3ee6f8={};_0x3ee6f8["pBuffer"]=_0x2f8f00,this["oVideoHandle"]["SR_CaptureScreen"](_0x3ee6f8),_0x3ee6f8["width"]=_0x5d65d7["nWidth"],_0x3ee6f8["height"]=_0x5d65d7["nHeight"],this["CheckFrameRGB"](_0x3ee6f8,_0x487596,_0x376410)}}return this["GetWaterFontParam"](_0x11f16d),1}},{key:"ImageDecoder",value:function value(_0x349f0a,_0x299d30,_0x4c29e){var _0x1866b4=this;_0x349f0a["decode"]({frameIndex:_0x4c29e})["then"](function(_0x2ae8f5){_0x1866b4["pWaterImageParam"][_0x4c29e]={},_0x1866b4["pWaterImageParam"][_0x4c29e]["videoStream"]=_0x2ae8f5["image"],_0x1866b4["pWaterImageParam"][_0x4c29e]["nImageWidth"]=_0x2ae8f5["image"]["displayWidth"],_0x1866b4["pWaterImageParam"][_0x4c29e]["nImageHeight"]=_0x2ae8f5["image"]["displayHeight"],null!=_0x299d30["pstRectPos"]?_0x1866b4["pWaterImageParam"][_0x4c29e]["pstRectPos"]=_0x299d30["pstRectPos"]:_0x1866b4["pWaterImageParam"][_0x4c29e]["pstRectPos"]={fLeft:0,fRight:.1,fTop:0,fBottom:.1},null!=_0x299d30["fAlpha"]&&_0x299d30["fAlpha"]<=1&&_0x299d30["fAlpha"]>=0?_0x1866b4["pWaterImageParam"][_0x4c29e]["fAlpha"]=_0x299d30["fAlpha"]:_0x1866b4["pWaterImageParam"][_0x4c29e]["fAlpha"]=1,_0x1866b4["waterMarkImageMax"]=_0x349f0a["tracks"]["selectedTrack"]["frameCount"],_0x4c29e<_0x349f0a["tracks"]["selectedTrack"]["frameCount"]-1&&_0x1866b4["ImageDecoder"](_0x349f0a,_0x299d30,_0x4c29e+1)})}},{key:"SetWaterMarkImage",value:function value(_0x4d213f){if(this["pWaterImageParam"]["splice"](0,this["pWaterImageParam"]["length"]),null===_0x4d213f)return 1;if(null!=_0x4d213f["pImageData"]){var _0xef1073=new ImageDecoder({data:_0x4d213f["pImageData"],type:"image/"+_0x4d213f["pImageType"]});_0xef1073["tracks"]["ready"]["then"](function(){}),this["ImageDecoder"](_0xef1073,_0x4d213f,0)}return this["waterMarkImageIndex"]=0,1}},{key:"_ConvertDisplayEffect",value:function value(_0x59041b,_0x274464){switch(_0x59041b){case _0x2d5181:return _0x5583d8==_0x274464?_0x2bffb5["SR_DE_FISH_PTZ_WALL"]:_0x3ab30c==_0x274464||_0x553581==_0x274464?_0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:_0x2e57c2==_0x274464?_0x2bffb5["SR_DE_FISH_SEMISPHERE"]:_0x53b3cd==_0x274464?_0x2bffb5["SR_DE_FISH_PLANET"]:_0x3572ec==_0x274464?_0x2bffb5["SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL"]:_0x1ed5ce==_0x274464?_0x2bffb5["SR_DE_FISH_ARCSPHERE_VERTICAL_WALL"]:_0x2bffb5["SR_DE_FISH_ORIGINAL"];case _0xe76158:return _0x5583d8==_0x274464?_0x2bffb5["SR_DE_FISH_PTZ_FLOOR"]:_0x3ab30c==_0x274464?_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_360"]:_0x2e6b56==_0x274464?_0x2bffb5["SR_DE_FISH_PANORAMA_FLOOR_180"]:_0x553581==_0x274464?_0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:_0x2e57c2==_0x274464?_0x2bffb5["SR_DE_FISH_SEMISPHERE"]:_0x30e5af==_0x274464?_0x2bffb5["SR_DE_FISH_CYLINDER_FLOOR"]:_0x3c1d0c==_0x274464?_0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_FLOOR"]:_0x53b3cd==_0x274464?_0x2bffb5["SR_DE_FISH_PLANET"]:_0x2bffb5["SR_DE_FISH_ORIGINAL"];case _0x2dad09:return _0x5583d8==_0x274464?_0x2bffb5["SR_DE_FISH_PTZ_CEILING"]:_0x3ab30c==_0x274464?_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_360"]:_0x2e6b56==_0x274464?_0x2bffb5["SR_DE_FISH_PANORAMA_CEILING_180"]:_0x553581==_0x274464?_0x2bffb5["SR_DE_FISH_PANORAMA_WALL"]:_0x2e57c2==_0x274464?_0x2bffb5["SR_DE_FISH_SEMISPHERE"]:_0x30e5af==_0x274464?_0x2bffb5["SR_DE_FISH_CYLINDER_CEILING"]:_0x3c1d0c==_0x274464?_0x2bffb5["SR_DE_FISH_CYLINDER_SPLIT_CEILING"]:_0x53b3cd==_0x274464?_0x2bffb5["SR_DE_FISH_PLANET"]:_0x2bffb5["SR_DE_FISH_ORIGINAL"];default:return _0x2bffb5["SR_DE_FISH_ORIGINAL"]}}},{key:"GetCanvasData",value:function value(_0x6dfabe){var _0x2f2a9e={nWidth:0,nHeight:0,nBufferLen:0},_0x52d907=this["oVideoHandle"]["SR_GetCaptureSize"](_0x2f2a9e);(_0x31e0fd!=_0x52d907||_0x2f2a9e["nBufferLen"]<=0)&&_0x6dfabe(null);var _0x5b1e06=new Uint8Array(_0x2f2a9e["nBufferLen"]);null==_0x5b1e06&&_0x6dfabe(null);var _0x2ac209={};_0x2ac209["pBuffer"]=_0x5b1e06,this["oVideoHandle"]["SR_CaptureScreen"](_0x2ac209),_0x6dfabe(_0x5b1e06,_0x2f2a9e["nWidth"],_0x2f2a9e["nHeight"])}},{key:"FindIntelNodefromList",value:function value(_0x48b4a6){if(0!=this["privateLinesInfo"]["length"]){var _0x17b3ec=this["privateLinesInfo"][0]["absTimeStamp"];if(_0x17b3ec<=_0x48b4a6+100&&_0x17b3ec>_0x48b4a6-100)this["curLinesInfo"]=this["privateLinesInfo"]["shift"]();else{if(_0x17b3ec>_0x48b4a6+2e3||_0x17b3ec<_0x48b4a6-2e3)for(this["curLinesInfo"]=this["privateLinesInfo"]["shift"]();this["privateLinesInfo"]["length"]>0;){var _0x49caf6=this["privateLinesInfo"][0]["absTimeStamp"];if(!(_0x49caf6>_0x48b4a6+2e3||_0x49caf6<_0x48b4a6-2e3))break;this["curLinesInfo"]=this["privateLinesInfo"]["shift"]()}}}if(0!=this["privateFontsInfo"]["length"]){var _0x5efc2e=this["privateFontsInfo"][0]["absTimeStamp"];if(_0x5efc2e<=_0x48b4a6+1e3&&_0x5efc2e>_0x48b4a6-1e3)this["curFontsInfo"]=this["privateFontsInfo"]["shift"]();else{if(_0x5efc2e>_0x48b4a6+2e3||_0x5efc2e<_0x48b4a6-2e3)for(this["curFontsInfo"]=this["privateFontsInfo"]["shift"]();this["privateFontsInfo"]["length"]>0;){var _0x123374=this["privateFontsInfo"][0]["absTimeStamp"];if(!(_0x123374>_0x48b4a6+2e3||_0x123374<_0x48b4a6-2e3))break;this["curFontsInfo"]=this["privateFontsInfo"]["shift"]()}}}if(0!=this["privateImageInfo"]["length"]){var _0x1f7f45=this["privateImageInfo"][0]["absTimeStamp"];if(_0x1f7f45<=_0x48b4a6+1e3&&_0x1f7f45>_0x48b4a6-1e3)this["curImagesInfo"]=this["privateImageInfo"]["shift"]();else{if(_0x1f7f45>_0x48b4a6+2e3||_0x1f7f45<_0x48b4a6-2e3)for(this["curImagesInfo"]=this["privateImageInfo"]["shift"]();this["privateImageInfo"]["length"]>0;){var _0x48c875=this["privateImageInfo"][0]["absTimeStamp"];if(!(_0x48c875>_0x48b4a6+2e3||_0x48c875<_0x48b4a6-2e3))break;this["curImagesInfo"]=this["privateImageInfo"]["shift"]()}}}return 1}},{key:"RenderPrivateData",value:function value(_0x12f0c9){return 0!=this["privateLinesInfo"]["length"]||_0x12f0c9||(this["curLinesInfo"]=null),1}},{key:"InputPrivateInfo",value:function value(_0x1ee526,_0x512529,_0x55ea89){var _0x273cf4=!1,_0x4113e4=0;if(_0x1ee526["linesNum"]>0){if(_0x1ee526["absTimeStamp"]<=this["maxPrivateLineTimeStamp"]){var _0x15d832=0;for(_0x15d832=0;_0x15d832<this["privateLinesInfo"]["length"];_0x15d832++)if(this["privateLinesInfo"][_0x15d832]["absTimeStamp"]==_0x1ee526["absTimeStamp"]){_0x273cf4=!0,_0x4113e4=_0x15d832;break}}if(_0x273cf4){var _0x528246=this["privateLinesInfo"][_0x4113e4]["linesNum"];this["privateLinesInfo"][_0x4113e4]["linesNum"]=_0x528246+_0x1ee526["linesNum"];for(var _0x29ae53=0;_0x29ae53<_0x1ee526["linesNum"];_0x29ae53++){this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]={},this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["vertex_num"]=_0x1ee526["stDrawLinesArray"][_0x29ae53]["vertex_num"],this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["lineWidth"]=_0x1ee526["stDrawLinesArray"][_0x29ae53]["lineWidth"],this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["bFill"]=_0x1ee526["stDrawLinesArray"][_0x29ae53]["bFill"],this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["bLoop"]=_0x1ee526["stDrawLinesArray"][_0x29ae53]["bLoop"],this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["color"]={},this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["color"]["R"]=_0x1ee526["stDrawLinesArray"][_0x29ae53]["color"]["R"],this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["color"]["G"]=_0x1ee526["stDrawLinesArray"][_0x29ae53]["color"]["G"],this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["color"]["B"]=_0x1ee526["stDrawLinesArray"][_0x29ae53]["color"]["B"],this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["color"]["A"]=_0x1ee526["stDrawLinesArray"][_0x29ae53]["color"]["A"],this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["stPoint"]=[];for(var _0x18abd5=0;_0x18abd5<_0x1ee526["stDrawLinesArray"][_0x29ae53]["vertex_num"];_0x18abd5++)this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["stPoint"][_0x18abd5]={},this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["stPoint"][_0x18abd5]["x"]=_0x1ee526["stDrawLinesArray"][_0x29ae53]["stPoint"][_0x18abd5]["x"],this["privateLinesInfo"][_0x4113e4]["stDrawLinesArray"][_0x29ae53+_0x528246]["stPoint"][_0x18abd5]["y"]=_0x1ee526["stDrawLinesArray"][_0x29ae53]["stPoint"][_0x18abd5]["y"]}}else{this["maxPrivateLineTimeStamp"]<_0x1ee526["absTimeStamp"]&&(this["maxPrivateLineTimeStamp"]=_0x1ee526["absTimeStamp"]);var _0xfe0088={};_0xfe0088["linesNum"]=_0x1ee526["linesNum"],_0xfe0088["absTimeStamp"]=_0x1ee526["absTimeStamp"],_0xfe0088["stDrawLinesArray"]=[];for(var _0xd316fb=0;_0xd316fb<_0x1ee526["linesNum"];_0xd316fb++){_0xfe0088["stDrawLinesArray"][_0xd316fb]={},_0xfe0088["stDrawLinesArray"][_0xd316fb]["vertex_num"]=_0x1ee526["stDrawLinesArray"][_0xd316fb]["vertex_num"],_0xfe0088["stDrawLinesArray"][_0xd316fb]["lineWidth"]=_0x1ee526["stDrawLinesArray"][_0xd316fb]["lineWidth"],_0xfe0088["stDrawLinesArray"][_0xd316fb]["bFill"]=_0x1ee526["stDrawLinesArray"][_0xd316fb]["bFill"],_0xfe0088["stDrawLinesArray"][_0xd316fb]["bLoop"]=_0x1ee526["stDrawLinesArray"][_0xd316fb]["bLoop"],_0xfe0088["stDrawLinesArray"][_0xd316fb]["color"]={},_0xfe0088["stDrawLinesArray"][_0xd316fb]["color"]["R"]=_0x1ee526["stDrawLinesArray"][_0xd316fb]["color"]["R"],_0xfe0088["stDrawLinesArray"][_0xd316fb]["color"]["G"]=_0x1ee526["stDrawLinesArray"][_0xd316fb]["color"]["G"],_0xfe0088["stDrawLinesArray"][_0xd316fb]["color"]["B"]=_0x1ee526["stDrawLinesArray"][_0xd316fb]["color"]["B"],_0xfe0088["stDrawLinesArray"][_0xd316fb]["color"]["A"]=_0x1ee526["stDrawLinesArray"][_0xd316fb]["color"]["A"],_0xfe0088["stDrawLinesArray"][_0xd316fb]["stPoint"]=[];for(var _0x840659=0;_0x840659<_0x1ee526["stDrawLinesArray"][_0xd316fb]["vertex_num"];_0x840659++)_0xfe0088["stDrawLinesArray"][_0xd316fb]["stPoint"][_0x840659]={},_0xfe0088["stDrawLinesArray"][_0xd316fb]["stPoint"][_0x840659]["x"]=_0x1ee526["stDrawLinesArray"][_0xd316fb]["stPoint"][_0x840659]["x"],_0xfe0088["stDrawLinesArray"][_0xd316fb]["stPoint"][_0x840659]["y"]=_0x1ee526["stDrawLinesArray"][_0xd316fb]["stPoint"][_0x840659]["y"]}this["privateLinesInfo"]["push"](_0xfe0088)}}if(_0x512529["nFontsNum"]>0){if(_0x512529["absTimeStamp"]<=this["maxPrivateLineTimeStamp"]){var _0x506355=0;for(_0x506355=0;_0x506355<this["privateFontsInfo"]["length"];_0x506355++)if(this["privateFontsInfo"][_0x506355]["absTimeStamp"]==_0x512529["absTimeStamp"]){_0x273cf4=!0,_0x4113e4=_0x506355;break}}if(_0x273cf4);else{this["maxPrivateLineTimeStamp"]<_0x512529["absTimeStamp"]&&(this["maxPrivateLineTimeStamp"]=_0x512529["absTimeStamp"]);var _0x47805f={};_0x47805f["nFontsNum"]=_0x512529["nFontsNum"],_0x47805f["absTimeStamp"]=_0x512529["absTimeStamp"],_0x47805f["stDrawFontsArray"]=[];for(var _0x139149=0;_0x139149<_0x512529["nFontsNum"];_0x139149++)_0x47805f["stDrawFontsArray"][_0x139149]={},_0x47805f["stDrawFontsArray"][_0x139149]["nFontSizeW"]=_0x512529["stDrawFontsArray"][_0x139149]["nFontSizeW"],_0x47805f["stDrawFontsArray"][_0x139149]["nFontSizeH"]=_0x512529["stDrawFontsArray"][_0x139149]["nFontSizeH"],_0x47805f["stDrawFontsArray"][_0x139149]["color"]={},_0x47805f["stDrawFontsArray"][_0x139149]["color"]["R"]=_0x512529["stDrawFontsArray"][_0x139149]["color"]["R"],_0x47805f["stDrawFontsArray"][_0x139149]["color"]["G"]=_0x512529["stDrawFontsArray"][_0x139149]["color"]["G"],_0x47805f["stDrawFontsArray"][_0x139149]["color"]["B"]=_0x512529["stDrawFontsArray"][_0x139149]["color"]["B"],_0x47805f["stDrawFontsArray"][_0x139149]["color"]["A"]=_0x512529["stDrawFontsArray"][_0x139149]["color"]["A"],_0x47805f["stDrawFontsArray"][_0x139149]["stPoint"]={},_0x47805f["stDrawFontsArray"][_0x139149]["stPoint"]["x"]=_0x512529["stDrawFontsArray"][_0x139149]["stPoint"]["x"],_0x47805f["stDrawFontsArray"][_0x139149]["stPoint"]["y"]=_0x512529["stDrawFontsArray"][_0x139149]["stPoint"]["y"],_0x47805f["stDrawFontsArray"][_0x139149]["fontstring"]=_0x512529["stDrawFontsArray"][_0x139149]["fontString"];this["privateFontsInfo"]["push"](_0x47805f)}}if(_0x55ea89["nPixelFormat"]>0){if(_0x55ea89["absTimeStamp"]<=this["maxPrivateLineTimeStamp"]){var _0x19cfd7=0;for(_0x19cfd7=0;_0x19cfd7<this["privateImageInfo"]["length"];_0x19cfd7++)if(this["privateImageInfo"][_0x19cfd7]["absTimeStamp"]==_0x55ea89["absTimeStamp"]){_0x273cf4=!0,_0x4113e4=_0x19cfd7;break}}if(_0x273cf4);else{this["maxPrivateLineTimeStamp"]<_0x55ea89["absTimeStamp"]&&(this["maxPrivateLineTimeStamp"]=_0x55ea89["absTimeStamp"]);var _0x267ab2={};_0x267ab2["absTimeStamp"]=_0x55ea89["absTimeStamp"],_0x267ab2["nWidth"]=_0x55ea89["nWidth"],_0x267ab2["nHeight"]=_0x55ea89["nHeight"],_0x267ab2["pstRect"]={},_0x267ab2["pstRect"]["fTop"]=_0x55ea89["pstRect"]["fTop"],_0x267ab2["pstRect"]["fBottom"]=_0x55ea89["pstRect"]["fBottom"],_0x267ab2["pstRect"]["fLeft"]=_0x55ea89["pstRect"]["fLeft"],_0x267ab2["pstRect"]["fRight"]=_0x55ea89["pstRect"]["fRight"],_0x267ab2["nPixelFormat"]=_0x55ea89["nPixelFormat"],_0x267ab2["fAlpha"]=_0x55ea89["fAlpha"],_0x267ab2["picImageData"]=_0x55ea89["picImageData"],this["privateImageInfo"]["push"](_0x267ab2)}}return 1}},{key:"WebGLDisplayCallBack",value:function value(_0x49821c){if(0!=_0x49821c["privateLinesInfo"]["length"]||null!=_0x49821c["curLinesInfo"]){if(null!=_0x49821c["curLinesInfo"]){for(var _0x149c01=[],_0x550e6d=0,_0x1d58c4=1,_0x38b435=0;_0x38b435<_0x49821c["curLinesInfo"]["linesNum"];_0x38b435++){_0x149c01[_0x38b435]={},_0x149c01[_0x38b435]["nPointNum"]=_0x49821c["curLinesInfo"]["stDrawLinesArray"][_0x38b435]["vertex_num"],_0x149c01[_0x38b435]["nLineWidth"]=_0x49821c["curLinesInfo"]["stDrawLinesArray"][_0x38b435]["lineWidth"],_0x1d58c4=_0x49821c["curLinesInfo"]["stDrawLinesArray"][_0x38b435]["bFill"],_0x149c01[_0x38b435]["bLoop"]=_0x49821c["curLinesInfo"]["stDrawLinesArray"][_0x38b435]["bLoop"],_0x149c01[_0x38b435]["pstColor"]={},_0x149c01[_0x38b435]["pstColor"]["fR"]=_0x49821c["curLinesInfo"]["stDrawLinesArray"][_0x38b435]["color"]["R"],_0x149c01[_0x38b435]["pstColor"]["fG"]=_0x49821c["curLinesInfo"]["stDrawLinesArray"][_0x38b435]["color"]["G"],_0x149c01[_0x38b435]["pstColor"]["fB"]=_0x49821c["curLinesInfo"]["stDrawLinesArray"][_0x38b435]["color"]["B"],_0x149c01[_0x38b435]["pstColor"]["fA"]=_0x49821c["curLinesInfo"]["stDrawLinesArray"][_0x38b435]["color"]["A"],_0x149c01[_0x38b435]["pstPoints"]=[];for(var _0x5df90c=0;_0x5df90c<_0x149c01[_0x38b435]["nPointNum"];_0x5df90c++)_0x149c01[_0x38b435]["pstPoints"][_0x5df90c]={},_0x149c01[_0x38b435]["pstPoints"][_0x5df90c]["fX"]=_0x49821c["curLinesInfo"]["stDrawLinesArray"][_0x38b435]["stPoint"][_0x5df90c]["x"],_0x149c01[_0x38b435]["pstPoints"][_0x5df90c]["fY"]=_0x49821c["curLinesInfo"]["stDrawLinesArray"][_0x38b435]["stPoint"][_0x5df90c]["y"];_0x550e6d+=_0x149c01[_0x38b435]["nPointNum"]}_0x49821c["oVideoHandle"]["SR_DrawLinesEx"](_0x149c01,_0x49821c["curLinesInfo"]["linesNum"],_0x550e6d,_0x1d58c4)}_0x49821c["curLinesInfo"]=null}if((0!=_0x49821c["privateFontsInfo"]["length"]||null!=_0x49821c["curFontsInfo"])&&null!=_0x49821c["curFontsInfo"]){for(var _0x5e8054=[],_0x31f070=0;_0x31f070<_0x49821c["curFontsInfo"]["nFontsNum"];_0x31f070++){var _0x1cb262={},_0x76a1ad=_0x49821c["curFontsInfo"]["stDrawFontsArray"][_0x31f070]["fontstring"],_0x10d314={};_0x10d314["fX"]=_0x49821c["curFontsInfo"]["stDrawFontsArray"][_0x31f070]["stPoint"]["x"],_0x10d314["fY"]=_0x49821c["curFontsInfo"]["stDrawFontsArray"][_0x31f070]["stPoint"]["y"];var _0x2fb379={fR:1,fG:0,fB:0};_0x2fb379["fA"]=_0x49821c["curFontsInfo"]["stDrawFontsArray"][_0x31f070]["color"]["A"];var _0x5428b9=_0x49821c["curFontsInfo"]["stDrawFontsArray"][_0x31f070]["nFontSizeW"],_0x3bf8ac=_0x49821c["curFontsInfo"]["stDrawFontsArray"][_0x31f070]["nFontSizeH"];_0x1cb262["pString"]=_0x76a1ad,_0x1cb262["pstStartPos"]=_0x10d314,_0x1cb262["nFontWidth"]=_0x5428b9,_0x1cb262["nFontHeight"]=_0x3bf8ac,_0x1cb262["pstFontColor"]=_0x2fb379,_0x1cb262["bBackGround"]=!1,_0x1cb262["pstBGColor"]=null,_0x1cb262["fRotateAngle"]=0,_0x1cb262["pFontFamily"]="sans-serif",_0x5e8054["push"](_0x1cb262)}_0x49821c["oVideoHandle"]["SR_DrawFontEx"](_0x5e8054,_0x49821c["curFontsInfo"]["nFontsNum"])}if(0!=_0x49821c["privateImageInfo"]["length"]||null!=_0x49821c["curImagesInfo"]){var _0xb21b1a=null;null!=_0x49821c["curImagesInfo"]&&null!=_0x49821c["curImagesInfo"]&&null!=_0x49821c["curImagesInfo"]["picImageData"]&&null!=_0x49821c["curImagesInfo"]["picImageData"]&&(_0xb21b1a=new Uint16Array(_0x49821c["curImagesInfo"]["picImageData"]["buffer"])),null!=_0x49821c["curImagesInfo"]&&_0x49821c["curImagesInfo"]["nPixelFormat"]>0&&_0x49821c["oVideoHandle"]["SR_DrawImage"](_0xb21b1a,_0x49821c["curImagesInfo"]["nWidth"],_0x49821c["curImagesInfo"]["nHeight"],_0x49821c["curImagesInfo"]["pstRect"],_0x49821c["curImagesInfo"]["nPixelFormat"],_0x49821c["curImagesInfo"]["fAlpha"])}if(0!==_0x49821c["pWaterFontParam"]["length"]&&_0x49821c["oVideoHandle"]["SR_DrawFontEx"](_0x49821c["pWaterFontParam"],_0x49821c["pWaterFontParam"]["length"]),0!==_0x49821c["pWaterImageParam"]["length"]){_0x49821c["waterMarkImageIndex"]>=_0x49821c["waterMarkImageMax"]&&(_0x49821c["waterMarkImageIndex"]=0);var _0x38f6cd=_0x49821c["waterMarkImageIndex"];_0x49821c["oVideoHandle"]["SR_DrawImage"](_0x49821c["pWaterImageParam"][_0x38f6cd]["videoStream"],_0x49821c["pWaterImageParam"][_0x38f6cd]["nImageWidth"],_0x49821c["pWaterImageParam"][_0x38f6cd]["nImageHeight"],_0x49821c["pWaterImageParam"][_0x38f6cd]["pstRectPos"],_0x44487e,_0x49821c["pWaterImageParam"][_0x38f6cd]["fAlpha"]),_0x49821c["waterMarkImageIndex"]++}}}]),_0x4bd9d2}(),_0x2961c9=function(){function _0x9735c9(){_0x540ab2(this,_0x9735c9),this["startTime"]=0,this["curTime"]=0,this["timeWalk"]=0,this["lastDate"]=0,this["preTimerStamp"]=0}return _0x132bfb(_0x9735c9,[{key:"Init",value:function value(){this["startTime"]=this["GetCurTime"]()}},{key:"GetCurTime",value:function value(){return this["curTime"]=60*(new Date)["getHours"]()*60*1e3+60*(new Date)["getMinutes"]()*1e3+1e3*(new Date)["getSeconds"]()+(new Date)["getMilliseconds"](),this["lastDate"]=(new Date)["getDate"](),this["curTime"]}},{key:"GetTimerWalk",value:function value(){var _0x31000e=this["GetCurTime"]()-this["startTime"];return this["lastDate"]!==(new Date)["getDate"]()&&(_0x31000e+=24*((new Date)["getDate"]()-this["lastDate"])*60*60*1e3),_0x31000e}},{key:"timerReset",value:function value(){this["startTime"]=0,this["curTime"]=0,this["timeWalk"]=0,this["lastDate"]=0,this["preTimerStamp"]=0}}]),_0x9735c9}(),_0x5e8adc=function(){function _0x109b84(){var _0x4ff531=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:null;_0x540ab2(this,_0x109b84),this["canvas"]=null,this["streamOpenMode"]=0,this["context"]=null,this["oVideoDecoder"]=null,this["frameBuffers"]=[],this["initTimer"]=!1,this["preTimeStamp"]=0,this["baseTimeStamp"]=0,this["resetTimer"]=!0,this["RenderFrame"]=this["RenderFrame"]["bind"](this),this["renderCurStatus"]=2,this["playSpeed"]=1,this["nplaySpeed"]=1,this["displayBuf"]=14,this["needForward"]=!1,this["firstFrame"]=!0,this["LatcyTime"]=0,this["displayFrameInfoCB"]=null,this["displayFrameInfo"]=[],this["curFrameInfo"]={},this["curFrameInfo"]["timeStamp"]=0,this["sx"]=0,this["sy"]=0,this["sw"]=0,this["sh"]=0,this["displayRunning"]=!1,this["oRenderTimer"]=null,this["waitIFrameTimestamp"]=0,this["curFrame"]=null,this["player"]=null,null!=_0x4ff531&&(this["player"]=_0x4ff531),this["renderEngine"]="webgl",this["oVideoRender"]=null,this["FECCanvasID"]="",this["oVideoRender"]=new _0x57d214}return _0x132bfb(_0x109b84,[{key:"init",value:function value(_0x4116d1,_0x2f26c0,_0x2d4de1,_0x214e4d){this["canvas"]=_0x4116d1,this["streamOpenMode"]=_0x2f26c0,this["renderEngine"]=_0x214e4d,this["SetCurStatus"](2),null==this["oVideoDecoder"]&&(this["oVideoDecoder"]=new _0x2e918a(_0x2d4de1,this,this["player"]),null!==this["oVideoDecoder"]&&this["oVideoDecoder"]["initDecoder"]()),this["frameBuffers"]=this["oVideoDecoder"]["ready_frames"],null!=this["oVideoRender"]&&this["oVideoRender"]["InitDisplay"](this["canvas"],this["renderEngine"],256),null==this["oRenderTimer"]&&(this["oRenderTimer"]=new _0x2961c9)}},{key:"HardDecodeError",value:function value(){return this["player"]["_switchHardToSoft"](),1}},{key:"inputData",value:function value(_0x5119a1,_0x11f6a7){var _0x28b1d5={};_0x28b1d5["port"]=_0x11f6a7["port"],_0x28b1d5["codecType"]=_0x11f6a7["codecType"],_0x28b1d5["frameType"]=_0x11f6a7["frameType"],_0x28b1d5["frameSize"]=_0x11f6a7["frameSize"],_0x28b1d5["width"]=_0x11f6a7["width"],_0x28b1d5["height"]=_0x11f6a7["height"],_0x28b1d5["timeStamp"]=_0x11f6a7["timeStamp"],_0x28b1d5["frameRate"]=_0x11f6a7["frameRate"],_0x28b1d5["frameNum"]=_0x11f6a7["frameNum"],_0x28b1d5["interlace"]=_0x11f6a7["interlace"],_0x28b1d5["streamEnd"]=_0x11f6a7["streamEnd"],_0x28b1d5["cropLeft"]=_0x11f6a7["cropLeft"],_0x28b1d5["cropRight"]=_0x11f6a7["cropRight"],_0x28b1d5["cropTop"]=_0x11f6a7["cropTop"],_0x28b1d5["cropBottom"]=_0x11f6a7["cropBottom"],_0x28b1d5["year"]=_0x11f6a7["year"],_0x28b1d5["month"]=_0x11f6a7["month"],_0x28b1d5["week"]=_0x11f6a7["week"],_0x28b1d5["day"]=_0x11f6a7["day"],_0x28b1d5["hour"]=_0x11f6a7["hour"],_0x28b1d5["minute"]=_0x11f6a7["minute"],_0x28b1d5["second"]=_0x11f6a7["second"],_0x28b1d5["milliseconds"]=_0x11f6a7["milliseconds"],this["displayFrameInfo"]["push"](_0x28b1d5),this["oVideoDecoder"]["inputData"](_0x5119a1,_0x11f6a7)}},{key:"_resetDecoder",value:function value(){var _0x101220=this;return new Promise(function(_0xfbf74d,_0xcaa235){_0x101220["oVideoDecoder"]["resetDecoder"]()["then"](function(){_0x101220["displayFrameInfo"]["splice"](0,_0x101220["displayFrameInfo"]["length"]),_0x101220["curFrameInfo"]={},_0x101220["oVideoRender"]["DeInitPrivateParam"](),_0x101220["renderCurStatus"]=2,_0x101220["player"]?_0x101220["player"]["JSPlayM4_ResetEnd"]():postMessage({function:"resetEnd"}),_0xfbf74d()},function(){_0xcaa235()})})}},{key:"_resetRenderTimer",value:function value(){this["initTimer"]=!1,this["preTimeStamp"]=0,this["baseTimeStamp"]=0,this["resetTimer"]=!0,null!=this["oRenderTimer"]&&this["oRenderTimer"]["timerReset"](),this["RenderFrame"]=this["RenderFrame"]["bind"](this),this["renderCurStatus"]=2,this["curTimeStamp"]=0,this["getImageJPEG"]=!1,this["getImageBMP"]=!1,this["getCropImageJPEG"]=!1,this["getCropImageBMP"]=!1,this["displayFrameInfoCB"]=null,this["displayFrameInfo"]["splice"](0,this["displayFrameInfo"]["length"]),this["curFrameInfo"]={}}},{key:"_destroyPlayCtrl",value:function value(){var _0x10e1b6=this;this["oVideoDecoder"]["destroyDecoder"]()["then"](function(){_0x10e1b6["oVideoDecoder"]=null,null!=_0x10e1b6["oVideoRender"]&&(_0x10e1b6["oVideoRender"]["ReleaseDisplay"](),_0x10e1b6["oVideoRender"]=null),_0x10e1b6["_resetRenderTimer"](),_0x10e1b6["oRenderTimer"]=null,_0x10e1b6["displayRunning"]=!1,console["log"](">>>JS 02 destroy oVideoDecoder/oVideoRender")},function(){console["log"]("stop failed ")})}},{key:"RenderFrame",value:function value(){var _0x2d3832=this;switch(this["renderCurStatus"]){case 0:this["_resetRenderTimer"](),this["_resetDecoder"]()["then"](function(){var _0x130199=setTimeout(function(){_0x2d3832["RenderFrame"](),clearTimeout(_0x130199)},1)},function(){});break;case 2:if(this["displayRunning"])this["chooseFrame"]()["then"](function(_0x372edc){if(_0x2d3832["curFrame"]=_0x372edc,-1==_0x2d3832["displayBuf"]||0==_0x2d3832["streamOpenMode"]&&0==_0x2d3832["LatcyTime"])null!=_0x2d3832["curFrame"]&&(_0x2d3832["curTimeStamp"]=_0x2d3832["curFrame"]["timestamp"],_0x2d3832["paint"](_0x2d3832["curFrame"])),requestAnimationFrame(_0x2d3832["RenderFrame"]);else{if(null!=_0x2d3832["curFrame"]){_0x2d3832["initTimer"]&&!_0x2d3832["resetTimer"]||(_0x2d3832["oRenderTimer"]["Init"](),_0x2d3832["initTimer"]=!0,_0x2d3832["resetTimer"]=!1,_0x2d3832["preTimeStamp"]=_0x2d3832["curFrame"]["timestamp"],_0x2d3832["baseTimeStamp"]=_0x2d3832["curFrame"]["timestamp"],1==_0x2d3832["streamOpenMode"]&&(_0x2d3832["LatcyTime"]=0)),_0x2d3832["curTimeStamp"]=_0x2d3832["curFrame"]["timestamp"];var _0x3870a6=_0x2d3832["curTimeStamp"]-_0x2d3832["preTimeStamp"],_0x52aa92=_0x2d3832["curTimeStamp"]-_0x2d3832["baseTimeStamp"];(_0x3870a6>5e3||_0x3870a6<0||_0x52aa92<0)&&(_0x2d3832["oRenderTimer"]["Init"](),_0x2d3832["preTimeStamp"]=_0x2d3832["curFrame"]["timestamp"],_0x2d3832["baseTimeStamp"]=_0x2d3832["curTimeStamp"]);var _0x5905c8=(_0x2d3832["curTimeStamp"]-_0x2d3832["baseTimeStamp"]+_0x2d3832["LatcyTime"])/_0x2d3832["playSpeed"]-_0x2d3832["oRenderTimer"]["GetTimerWalk"]();if(_0x5905c8<15&&_0x5905c8>-15)_0x2d3832["paint"](_0x2d3832["curFrame"]),_0x2d3832["preTimeStamp"]=_0x2d3832["curTimeStamp"],_0x2d3832["RenderFrame"]();else{if(_0x5905c8<0)_0x2d3832["paint"](_0x2d3832["curFrame"]),_0x2d3832["preTimeStamp"]=_0x2d3832["curTimeStamp"],_0x2d3832["RenderFrame"]();else var _0x40847c=setTimeout(function(){2==_0x2d3832["renderCurStatus"]?(_0x2d3832["paint"](_0x2d3832["curFrame"]),_0x2d3832["preTimeStamp"]=_0x2d3832["curTimeStamp"],_0x2d3832["RenderFrame"]()):_0x2d3832["RenderFrame"](),clearTimeout(_0x40847c)},_0x5905c8-5)}}else{_0x2d3832["playSpeed"]>2&&1;var _0x521225=setTimeout(function(){_0x2d3832["RenderFrame"](),clearTimeout(_0x521225)},0)}}});else var _0x1771ef=setTimeout(function(){_0x2d3832["RenderFrame"](),clearTimeout(_0x1771ef)},5);break;case 3:var _0x1cc1bf=setTimeout(function(){_0x2d3832["_refresh"](),_0x2d3832["RenderFrame"](),clearTimeout(_0x1cc1bf)},5);break;case 5:if(this["needForward"])this["chooseFrame"]()["then"](function(_0x36654a){_0x2d3832["curFrame"]=_0x36654a;var _0x4ef8d1=setTimeout(function(){null!=_0x2d3832["curFrame"]&&(_0x2d3832["paint"](_0x2d3832["curFrame"]),_0x2d3832["needForward"]=!1),_0x2d3832["RenderFrame"](),clearTimeout(_0x4ef8d1)},1)});else var _0x26b099=setTimeout(function(){_0x2d3832["_refresh"](),_0x2d3832["RenderFrame"](),clearTimeout(_0x26b099)},5);break;case 4:return void this["_destroyPlayCtrl"]();default:return}}},{key:"paint",value:function value(_0x481f47){var _0x4099b9=this;return new Promise(function(_0x473e55,_0x205a0b){if(4==_0x4099b9["curstatus"]||null==_0x481f47||null==_0x4099b9["oVideoRender"])_0x473e55();else{_0x4099b9["waitIFrameTimestamp"]===_0x481f47["timestamp"]&&(_0x4099b9["resetTimer"]=!0);var _0x11ee53={nCropLeft:0,nCropRight:0,nCropTop:0,nCropBottom:0};_0x11ee53["nCodeWidth"]=_0x481f47["displayWidth"],_0x11ee53["nCodeHeight"]=_0x481f47["displayHeight"];var _0xb534aa={x:0,y:0};_0xb534aa["width"]=_0x481f47["displayWidth"],_0xb534aa["height"]=_0x481f47["displayHeight"],_0x4099b9["oVideoRender"]["DisplayFrame"](_0x481f47,_0x481f47["displayWidth"],_0x481f47["displayHeight"],_0x481f47["timestamp"],_0x11ee53,null)["then"](function(_0xf735d0){null!==_0x4099b9["displayFrameInfoCB"]&&_0x4099b9["respondFrameInfoCB"](_0xf735d0),_0x4099b9["firstFrame"]&&(null!=_0x4099b9["player"]?null!=_0x4099b9["player"]["FFCallBackFun"]&&_0x4099b9["player"]["FFCallBackFun"]():postMessage({function:"firstFrameCB",value:!0}),_0x4099b9["firstFrame"]=!1),_0x473e55()})}})}},{key:"respondFrameInfoCB",value:function value(_0x53b987){if(0!=this["displayFrameInfo"]["length"]&&this["curFrameInfo"]["timeStamp"]!==_0x53b987){for(var _0x26a883={},_0x55915f=0;_0x55915f<this["displayFrameInfo"]["length"]&&(_0x26a883=this["displayFrameInfo"]["shift"]())["timeStamp"]!=_0x53b987;_0x55915f++);this["curFrameInfo"]["port"]=_0x26a883["port"],this["curFrameInfo"]["codecType"]=_0x26a883["codecType"],this["curFrameInfo"]["frameType"]=_0x26a883["frameType"],this["curFrameInfo"]["frameSize"]=_0x26a883["frameSize"],this["curFrameInfo"]["width"]=_0x26a883["width"],this["curFrameInfo"]["height"]=_0x26a883["height"],this["curFrameInfo"]["timeStamp"]=_0x26a883["timeStamp"],this["curFrameInfo"]["frameRate"]=_0x26a883["frameRate"],this["curFrameInfo"]["frameNum"]=_0x26a883["frameNum"],this["curFrameInfo"]["interlace"]=_0x26a883["interlace"],this["curFrameInfo"]["streamEnd"]=_0x26a883["streamEnd"],this["curFrameInfo"]["cropLeft"]=_0x26a883["cropLeft"],this["curFrameInfo"]["cropRight"]=_0x26a883["cropRight"],this["curFrameInfo"]["cropTop"]=_0x26a883["cropTop"],this["curFrameInfo"]["cropBottom"]=_0x26a883["cropBottom"],this["curFrameInfo"]["year"]=_0x26a883["year"],this["curFrameInfo"]["month"]=_0x26a883["month"],this["curFrameInfo"]["week"]=_0x26a883["week"],this["curFrameInfo"]["day"]=_0x26a883["day"],this["curFrameInfo"]["hour"]=_0x26a883["hour"],this["curFrameInfo"]["minute"]=_0x26a883["minute"],this["curFrameInfo"]["second"]=_0x26a883["second"],this["curFrameInfo"]["milliseconds"]=_0x26a883["milliseconds"],this["displayFrameInfoCB"](this["curFrameInfo"])}}},{key:"postImageData",value:function value(_0x3f2030,_0x295ba7,_0x5de92c,_0x427d0e,_0x1e53e7){this["player"]?(this["getImageJPEG"]&&(this["getImageJPEG"]=!1,this["player"]["_GetImage2"](_0x3f2030,_0x295ba7,_0x5de92c,_0x427d0e,"jpeg",_0x1e53e7,0,0,0,0)),this["getImageBMP"]&&(this["getImageBMP"]=!1,this["player"]["_GetImage2"](_0x3f2030,_0x295ba7,_0x5de92c,_0x427d0e,"bmp",_0x1e53e7,0,0,0,0)),this["getCropImageJPEG"]&&(this["getCropImageJPEG"]=!1,this["player"]["_GetImage2"](_0x3f2030,_0x295ba7,_0x5de92c,_0x427d0e,"jpeg",_0x1e53e7,this["sx"],this["sy"],this["sw"],this["sh"])),this["getCropImageBMP"]&&(this["getCropImageBMP"]=!1,this["player"]["_GetImage2"](_0x3f2030,_0x295ba7,_0x5de92c,_0x427d0e,"bmp",_0x1e53e7,this["sx"],this["sy"],this["sw"],this["sh"]))):(this["getImageJPEG"]&&(this["getImageJPEG"]=!1,postMessage({function:"imageYUV",value:_0x3f2030["buffer"],size:_0x295ba7,width:_0x5de92c,height:_0x427d0e,type:"jpeg",yuvType:_0x1e53e7,sx:0,sy:0,sw:0,sh:0},[_0x3f2030["buffer"]])),this["getImageBMP"]&&(this["getImageBMP"]=!1,postMessage({function:"imageYUV",value:_0x3f2030["buffer"],size:_0x295ba7,width:_0x5de92c,height:_0x427d0e,type:"bmp",yuvType:_0x1e53e7,sx:0,sy:0,sw:0,sh:0},[_0x3f2030["buffer"]])),this["getCropImageJPEG"]&&(this["getCropImageJPEG"]=!1,postMessage({function:"imageYUV",value:_0x3f2030["buffer"],size:_0x295ba7,width:_0x5de92c,height:_0x427d0e,type:"jpeg",yuvType:_0x1e53e7,sx:this["sx"],sy:this["sy"],sw:this["sw"],sh:this["sh"]},[_0x3f2030["buffer"]])),this["getCropImageBMP"]&&(this["getCropImageBMP"]=!1,postMessage({function:"imageYUV",value:_0x3f2030["buffer"],size:_0x295ba7,width:_0x5de92c,height:_0x427d0e,type:"bmp",yuvType:_0x1e53e7,sx:this["sx"],sy:this["sy"],sw:this["sw"],sh:this["sh"]},[_0x3f2030["buffer"]])))}},{key:"chooseFrame",value:function value(){var _0x4a9024=this;return new Promise(function(_0xbbf5a2,_0xc83779){if(null==_0x4a9024["oVideoRender"]||null==_0x4a9024["oVideoDecoder"])_0xbbf5a2(null);else{if(_0x4a9024["oVideoDecoder"]["decoderObjNeedReset"])_0x4a9024["oVideoDecoder"]["resetDecoder"]()["then"](function(){_0x4a9024["oVideoDecoder"]["decoderObjNeedReset"]=!1,_0xbbf5a2(null)},function(){_0xc83779()});else{var _0x570ce5=_0x4a9024["oVideoDecoder"]["GetFrameBufferLength"]();1==_0x4a9024["streamOpenMode"]&&_0x570ce5<3?_0xbbf5a2(null):_0x4a9024["oVideoDecoder"]["GetFrame"]()["then"](function(_0x4fa1eb){_0xbbf5a2(_0x4fa1eb)},function(){})}}})}},{key:"SetDisplayRegion",value:function value(_0x244313,_0x50b0b6,_0x51f8d8,_0x122268){return null==this["oVideoRender"]?0:(this["sx"]=_0x244313,this["sy"]=_0x50b0b6,this["sw"]=_0x51f8d8,this["sh"]=_0x122268,this["oVideoRender"]["SetDisplayRect"](_0x244313,_0x50b0b6,_0x51f8d8,_0x122268))}},{key:"SetCurStatus",value:function value(_0x488a5d){return this["renderCurStatus"]=_0x488a5d,1}},{key:"fast",value:function value(){var _0x1ac79b=this["_GetFastSpeed"](this["nplaySpeed"]);return this["_SetPlaySpeed"](_0x1ac79b)}},{key:"slow",value:function value(){var _0x482082=this["_GetSlowSpeed"](this["nplaySpeed"]);return this["_SetPlaySpeed"](_0x482082)}},{key:"Pause",value:function value(_0x1aff3a){if(_0x1aff3a)this["SetCurStatus"](3);else{if(3!==this["renderCurStatus"])return-1;this["SetCurStatus"](2),this["resetTimer"]=!0}return 1}},{key:"_refresh",value:function value(){0!=this["frameBuffers"]["length"]&&this["paint"](this["frameBuffers"][0])}},{key:"OneByOne",value:function value(_0x9e6b48){if(_0x9e6b48)this["SetCurStatus"](5),this["needForward"]=!0;else{if(5!==this["renderCurStatus"])return-1;this["SetCurStatus"](2),this["resetTimer"]=!0,this["needForward"]=!1,this["_SetPlaySpeed"](1)}return 1}},{key:"SetCanvasSize",value:function value(_0x103228,_0x59e12d){return null!=this["oVideoRender"]&&this["oVideoRender"]["SetCanvasSize"](_0x103228,_0x59e12d)}},{key:"GetCanvasSize",value:function value(){return null!=this["oVideoRender"]&&this["oVideoRender"]["GetCanvasSize"]()}},{key:"GetPlayedTime",value:function value(){return this["curTimeStamp"]}},{key:"_SetPlaySpeed",value:function value(_0x5c35a3){switch(_0x5c35a3){case-16:case-8:case-4:case-2:case 1:case 2:case 4:case 8:case 16:case 32:case 64:break;default:return-1}return _0x5c35a3===this["nplaySpeed"]||(this["nplaySpeed"]=_0x5c35a3,this["playSpeed"]=_0x5c35a3>0?_0x5c35a3:-1/_0x5c35a3,console["log"]("playSpeed:"+this["playSpeed"]),this["resetTimer"]=!0,this["needForward"]=!1,2!=this["renderCurStatus"]&&this["SetCurStatus"](2)),1}},{key:"_GetFastSpeed",value:function value(_0x4978cd){var _0x4d34c9=0;switch(_0x4978cd){case-16:_0x4d34c9=-8;break;case-8:_0x4d34c9=-4;break;case-4:_0x4d34c9=-2;break;case-2:_0x4d34c9=1;break;case 1:_0x4d34c9=2;break;case 2:_0x4d34c9=4;break;case 4:_0x4d34c9=8;break;case 8:_0x4d34c9=16;break;case 16:_0x4d34c9=32;break;case 32:_0x4d34c9=64;break;default:_0x4d34c9=0}return _0x4d34c9}},{key:"_GetSlowSpeed",value:function value(_0x43d878){var _0x5b6c58=0;switch(_0x43d878){case-8:_0x5b6c58=-16;break;case-4:_0x5b6c58=-8;break;case-2:_0x5b6c58=-4;break;case 1:_0x5b6c58=-2;break;case 2:_0x5b6c58=1;break;case 4:_0x5b6c58=2;break;case 8:_0x5b6c58=4;break;case 16:_0x5b6c58=8;break;case 32:_0x5b6c58=16;break;case 64:_0x5b6c58=32;break;default:_0x5b6c58=0}return _0x5b6c58}},{key:"SetDisplayBuf",value:function value(_0x702793){return this["displayBuf"]=_0x702793,this["LatcyTime"]=1==_0x702793?0:15==_0x702793?700:45==_0x702793?1900:_0x702793>6&&_0x702793<45?40*_0x702793+100:-1==_0x702793?0:50,1}},{key:"GetJPEG",value:function value(){var _0x29333a=this;this["oVideoDecoder"]["GetImageYUV"]()["then"](function(_0x2124e0){var _0x699b6e=_0x2124e0["yuvFrameBuffer"],_0x36f5ac=_0x2124e0["yuvLength"],_0x184e96=_0x2124e0["displayWidth"],_0x4c0063=_0x2124e0["displayHeight"],_0x52086a=_0x2124e0["yuvType"];-1!=_0x699b6e&&(_0x29333a["player"]?_0x29333a["player"]["_GetImage2"](_0x699b6e,_0x36f5ac,_0x184e96,_0x4c0063,"jpeg",_0x52086a,0,0,0,0):postMessage({function:"imageYUV",value:_0x699b6e["buffer"],size:_0x36f5ac,width:_0x184e96,height:_0x4c0063,type:"jpeg",yuvType:_0x52086a,sx:0,sy:0,sw:0,sh:0},[_0x699b6e["buffer"]]))},function(){})}},{key:"GetBMP",value:function value(){var _0x4425f3=this;this["oVideoDecoder"]["GetImageYUV"]()["then"](function(_0x568640){var _0x3437c8=_0x568640["yuvFrameBuffer"],_0x3829f9=_0x568640["yuvLength"],_0x3670b4=_0x568640["displayWidth"],_0x37c1d5=_0x568640["displayHeight"],_0x5b196d=_0x568640["yuvType"];-1!=_0x3437c8&&(_0x4425f3["player"]?_0x4425f3["player"]["_GetImage2"](_0x3437c8,_0x3829f9,_0x3670b4,_0x37c1d5,"bmp",_0x5b196d,0,0,0,0):postMessage({function:"imageYUV",value:_0x3437c8["buffer"],size:_0x3829f9,width:_0x3670b4,height:_0x37c1d5,type:"bmp",yuvType:_0x5b196d,sx:0,sy:0,sw:0,sh:0},[_0x3437c8["buffer"]]))},function(){})}},{key:"GetCropJPEG",value:function value(){var _0x4b5539=this;this["oVideoDecoder"]["GetImageYUV"]()["then"](function(_0x1e4314){var _0x3b20a1=_0x1e4314["yuvFrameBuffer"],_0x3e783c=_0x1e4314["yuvLength"],_0x1ae12a=_0x1e4314["displayWidth"],_0x3b85e2=_0x1e4314["displayHeight"],_0x5dac61=_0x1e4314["yuvType"];-1!=_0x3b20a1&&(_0x4b5539["player"]?_0x4b5539["player"]["_GetImage2"](_0x3b20a1,_0x3e783c,_0x1ae12a,_0x3b85e2,"jpeg",_0x5dac61,_0x4b5539["sx"],_0x4b5539["sy"],_0x4b5539["sw"],_0x4b5539["sh"]):postMessage({function:"imageYUV",value:_0x3b20a1["buffer"],size:_0x3e783c,width:_0x1ae12a,height:_0x3b85e2,type:"jpeg",yuvType:_0x5dac61,sx:_0x4b5539["sx"],sy:_0x4b5539["sy"],sw:_0x4b5539["sw"],sh:_0x4b5539["sh"]},[_0x3b20a1["buffer"]]))},function(){})}},{key:"GetCropBMP",value:function value(){var _0x5c4ccb=this;this["oVideoDecoder"]["GetImageYUV"]()["then"](function(_0x324db0){var _0x35fbf1=_0x324db0["yuvFrameBuffer"],_0x473b9a=_0x324db0["yuvLength"],_0x440b49=_0x324db0["displayWidth"],_0xc35634=_0x324db0["displayHeight"],_0x180f50=_0x324db0["yuvType"];-1!=_0x35fbf1&&(_0x5c4ccb["player"]?_0x5c4ccb["player"]["_GetImage2"](_0x35fbf1,_0x473b9a,_0x440b49,_0xc35634,"bmp",_0x180f50,_0x5c4ccb["sx"],_0x5c4ccb["sy"],_0x5c4ccb["sw"],_0x5c4ccb["sh"]):postMessage({function:"imageYUV",value:_0x35fbf1["buffer"],size:_0x473b9a,width:_0x440b49,height:_0xc35634,type:"bmp",yuvType:_0x180f50,sx:_0x5c4ccb["sx"],sy:_0x5c4ccb["sy"],sw:_0x5c4ccb["sw"],sh:_0x5c4ccb["sh"]},[_0x35fbf1["buffer"]]))},function(){})}},{key:"GetCanvasCapture",value:function value(_0x3b459b){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support GetCanvasCapture","color:red"),0):(this["oVideoRender"]["GetCanvasData"](_0x3b459b),1)}},{key:"SetDecodeFrameType",value:function value(_0x50911b){return this["waitIFrameTimestamp"]=_0x50911b,1}},{key:"SetStreamEnd",value:function value(){return this["oVideoDecoder"]["SetStreamEnd"](),1}},{key:"SetAntialias",value:function value(_0x43c61e){return null!=this["oVideoRender"]?this["oVideoRender"]["SetAntialias"](_0x43c61e):0}},{key:"SetFrameInfoCallBack",value:function value(_0x32e512,_0xa161c2){return this["displayFrameInfoCB"]=_0xa161c2?_0x32e512:null,1}},{key:"FEC_SetCanvasID",value:function value(_0x314104){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_SetCanvasID"](_0x314104):(this["FECCanvasID"]=_0x314104,0)}},{key:"FEC_ResetCorrectType",value:function value(_0x41af10,_0x334cd4,_0x542ffb){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_ResetCorrectType"](_0x41af10,_0x334cd4,_0x542ffb):0}},{key:"FEC_GetPort",value:function value(_0x10bff4,_0x12e4fe){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),-1):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_GetPort"](_0x10bff4,_0x12e4fe):-1}},{key:"FEC_Enable",value:function value(_0x3f7a99){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_Enable"](_0x3f7a99):0}},{key:"FEC_SetParam",value:function value(_0x41d828,_0x38a05d){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_SetParam"](_0x41d828,_0x38a05d):0}},{key:"FEC_GetParam",value:function value(_0x322c45,_0xa277fc){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_GetParam"](_0x322c45,_0xa277fc):0}},{key:"FEC_SetViewParam",value:function value(_0x4bb8a3,_0x450258,_0x2c0209){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_SetViewParam"](_0x4bb8a3,_0x450258,_0x2c0209):0}},{key:"FEC_GetViewParam",value:function value(_0x534d8d,_0x3a1a12,_0xd20a5){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_GetViewParam"](_0x534d8d,_0x3a1a12,_0xd20a5):0}},{key:"FEC_SetWnd",value:function value(_0x605902,_0x33cdf3){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_SetWnd"](_0x605902,_0x33cdf3):0}},{key:"FEC_Disable",value:function value(_0x1f2e68,_0x349921,_0x227f50){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_Disable"](_0x1f2e68,_0x349921,_0x227f50):0}},{key:"FEC_DelPort",value:function value(_0x502e9f){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_DelPort"](_0x502e9f):0}},{key:"FEC_SetDisplayRegion",value:function value(_0x375785,_0x227682,_0x3e97b9,_0x43ed61,_0x5a63c3,_0x1a6977,_0x2219e3){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_SetDisplayRegion"](_0x375785,_0x227682,_0x3e97b9,_0x43ed61,_0x5a63c3,_0x1a6977,_0x2219e3):0}},{key:"FEC_SetBackCilling",value:function value(_0x5679cd,_0x22f352){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_SetBackCilling"](_0x5679cd,_0x22f352):0}},{key:"FEC_GetPTZPort",value:function value(_0x29558b,_0x500bf1,_0xd96ba6){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),-1):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_GetPTZPort"](_0x29558b,_0x500bf1,_0xd96ba6):-1}},{key:"FEC_SetPTZDisplayMode",value:function value(_0x27a93f){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support FEC correct","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["FEC_SetPTZDisplayMode"](_0x27a93f):0}},{key:"InputPrivateInfo",value:function value(_0x569ec5,_0x193b0e,_0x2bfe1d){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support PrivateInfo","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["InputPrivateInfo"](_0x569ec5,_0x193b0e,_0x2bfe1d):1}},{key:"RenderPrivateData",value:function value(_0x103fe2){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support PrivateInfo","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["RenderPrivateData"](_0x103fe2):1}},{key:"SetWaterMarkFont",value:function value(_0x4a0175){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]||null==this["oVideoRender"]?(console["log"]("%c param error this.renderEngine:%d,this.oVideoRender:%d","color:red",this["renderEngine"],this["oVideoRender"]),0):(null!=this["oVideoRender"]&&this["oVideoRender"]["SetWaterMarkFont"](_0x4a0175,{yuvFrameBuffer:-1,yuvLength:-1,displayWidth:-1,displayHeight:-1,yuvType:-1}),1)}},{key:"SetWaterMarkImage",value:function value(_0xa0b1a){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support SetWaterMarkImage","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["SetWaterMarkImage"](_0xa0b1a):1}},{key:"SetD3DPostProcess",value:function value(_0x2cfc13,_0x49ed00){return"2d"===this["renderEngine"]||"2D"===this["renderEngine"]?(console["log"]("%c 2D render not support SetD3DPostProcess","color:red"),0):null!=this["oVideoRender"]?this["oVideoRender"]["SetD3DPostProcess"](_0x2cfc13,_0x49ed00):1}}]),_0x109b84}(),_0x17b669=function(){function _0x2d92af(_0x5ac78f){_0x540ab2(this,_0x2d92af),this["player"]=_0x5ac78f,this["oVideoPlayCtrl"]=new _0x5e8adc(_0x5ac78f)}return _0x132bfb(_0x2d92af,[{key:"init",value:function value(_0x38ebf7,_0x36f8bf,_0x2e200c,_0x23fdc1){if(null===this["oVideoPlayCtrl"])return 0;this["oVideoPlayCtrl"]["init"](_0x38ebf7,_0x36f8bf,_0x2e200c,_0x23fdc1)}},{key:"inputData",value:function value(_0x7df70b,_0x35b202){null!=this["oVideoPlayCtrl"]&&this["oVideoPlayCtrl"]["inputData"](_0x7df70b,_0x35b202)}},{key:"SetDisplayRegion",value:function value(_0x58a701,_0x363183,_0x3fd997,_0x9c405f){if(null===this["oVideoPlayCtrl"])return 0;this["oVideoPlayCtrl"]["SetDisplayRegion"](_0x58a701,_0x363183,_0x3fd997,_0x9c405f)}},{key:"stop",value:function value(){if(null===this["oVideoPlayCtrl"])return 0;this["oVideoPlayCtrl"]["SetCurStatus"](4),this["oVideoPlayCtrl"]=null,console["log"](">>>JS 03 destroy oVideoPlayCtrl")}},{key:"fast",value:function value(){return null===this["oVideoPlayCtrl"]||1!==this["oVideoPlayCtrl"]["fast"]()?0:void 0}},{key:"slow",value:function value(){return null===this["oVideoPlayCtrl"]||1!==this["oVideoPlayCtrl"]["slow"]()?0:void 0}},{key:"SetDisplayBuf",value:function value(_0x180a6b){return null===this["oVideoPlayCtrl"]||1!==this["oVideoPlayCtrl"]["SetDisplayBuf"](_0x180a6b)?0:void 0}},{key:"Pause",value:function value(_0x3f1bcd){return null===this["oVideoPlayCtrl"]||1!==this["oVideoPlayCtrl"]["Pause"](_0x3f1bcd)?0:void 0}},{key:"OneByOne",value:function value(_0x489117){return null===this["oVideoPlayCtrl"]||1!==this["oVideoPlayCtrl"]["OneByOne"](_0x489117)?0:void 0}},{key:"SetCanvasSize",value:function value(_0x4f8b8b,_0x264cef){return null===this["oVideoPlayCtrl"]||1!==this["oVideoPlayCtrl"]["SetCanvasSize"](_0x4f8b8b,_0x264cef)?0:void 0}},{key:"GetCanvasSize",value:function value(){return null===this["oVideoPlayCtrl"]||1!==this["oVideoPlayCtrl"]["GetCanvasSize"]()?0:void 0}},{key:"GetPlayedTime",value:function value(){return null===this["oVideoPlayCtrl"]?0:this["oVideoPlayCtrl"]["GetPlayedTime"]()}},{key:"needReset",value:function value(){this["oVideoPlayCtrl"]["SetCurStatus"](0)}},{key:"GetJPEG",value:function value(){this["oVideoPlayCtrl"]["GetJPEG"]()}},{key:"GetBMP",value:function value(){this["oVideoPlayCtrl"]["GetBMP"]()}},{key:"GetCropJPEG",value:function value(){this["oVideoPlayCtrl"]["GetCropJPEG"]()}},{key:"GetCropBMP",value:function value(){this["oVideoPlayCtrl"]["GetCropBMP"]()}},{key:"JSPlayM4_GetCanvasCapture",value:function value(_0x20f79c){this["oVideoPlayCtrl"]["GetCanvasCapture"](_0x20f79c)}},{key:"SetDecodeFrameType",value:function value(_0x30b3c6){this["oVideoPlayCtrl"]["SetDecodeFrameType"](_0x30b3c6)}},{key:"streamEnd",value:function value(){this["oVideoPlayCtrl"]["SetStreamEnd"]()}},{key:"SetAntialias",value:function value(_0x18401c){return this["oVideoPlayCtrl"]["SetAntialias"](_0x18401c)}},{key:"SetFrameInfoCallBack",value:function value(_0x406a9a,_0x37e757){return this["oVideoPlayCtrl"]["SetFrameInfoCallBack"](_0x406a9a,_0x37e757)}},{key:"FEC_SetCanvasID",value:function value(_0x21ca95){return this["oVideoPlayCtrl"]["FEC_SetCanvasID"](_0x21ca95)}},{key:"FEC_ResetCorrectType",value:function value(_0x5548c8,_0x2ce38b,_0x3b1704){return this["oVideoPlayCtrl"]["FEC_ResetCorrectType"](_0x5548c8,_0x2ce38b,_0x3b1704)}},{key:"FEC_GetPort",value:function value(_0x251a17,_0x7ab9f5){return this["oVideoPlayCtrl"]["FEC_GetPort"](_0x251a17,_0x7ab9f5)}},{key:"FEC_Enable",value:function value(_0x339ee4){return this["oVideoPlayCtrl"]["FEC_Enable"](_0x339ee4)}},{key:"FEC_SetParam",value:function value(_0x380de0,_0x11d344){return this["oVideoPlayCtrl"]["FEC_SetParam"](_0x380de0,_0x11d344)}},{key:"FEC_GetParam",value:function value(_0x2aa10e,_0x6f03d1){return this["oVideoPlayCtrl"]["FEC_GetParam"](_0x2aa10e,_0x6f03d1)}},{key:"FEC_SetViewParam",value:function value(_0x1fb186,_0x2c5ab6,_0x3d5fb7){return this["oVideoPlayCtrl"]["FEC_SetViewParam"](_0x1fb186,_0x2c5ab6,_0x3d5fb7)}},{key:"FEC_GetViewParam",value:function value(_0x1a6745,_0x1e094a,_0x8f865f){return this["oVideoPlayCtrl"]["FEC_GetViewParam"](_0x1a6745,_0x1e094a,_0x8f865f)}},{key:"FEC_SetWnd",value:function value(_0x56f23c,_0x1dca06){return this["oVideoPlayCtrl"]["FEC_SetWnd"](_0x56f23c,_0x1dca06)}},{key:"FEC_Disable",value:function value(_0xea8994,_0x2fb13d,_0xc116e9){return this["oVideoPlayCtrl"]["FEC_Disable"](_0xea8994,_0x2fb13d,_0xc116e9)}},{key:"FEC_DelPort",value:function value(_0x2cf1e6){return this["oVideoPlayCtrl"]["FEC_DelPort"](_0x2cf1e6)}},{key:"FEC_SetDisplayRegion",value:function value(_0x168624,_0x5848de,_0x44224d,_0x119850,_0x3973c7,_0x284585,_0xfcb10b){return this["oVideoPlayCtrl"]["FEC_SetDisplayRegion"](_0x168624,_0x5848de,_0x44224d,_0x119850,_0x3973c7,_0x284585,_0xfcb10b)}},{key:"FEC_SetBackCilling",value:function value(_0x129989,_0x252143){return this["oVideoPlayCtrl"]["FEC_SetBackCilling"](_0x129989,_0x252143)}},{key:"FEC_GetPTZPort",value:function value(_0x3e506b,_0x1804c6,_0x228b7f){return this["oVideoPlayCtrl"]["FEC_GetPTZPort"](_0x3e506b,_0x1804c6,_0x228b7f)}},{key:"FEC_SetPTZDisplayMode",value:function value(_0xc7536d){return this["oVideoPlayCtrl"]["FEC_SetPTZDisplayMode"](_0xc7536d)}},{key:"InputPrivateInfo",value:function value(_0x40e6f5,_0x50113b,_0x15c0bc){return this["oVideoPlayCtrl"]["InputPrivateInfo"](_0x40e6f5,_0x50113b,_0x15c0bc)}},{key:"RenderPrivateData",value:function value(_0xe1f83e){return this["oVideoPlayCtrl"]["RenderPrivateData"](_0xe1f83e)}},{key:"SetWaterMarkFont",value:function value(_0x3fcedd){return this["oVideoPlayCtrl"]["SetWaterMarkFont"](_0x3fcedd)}},{key:"SetWaterMarkImage",value:function value(_0x58e32e){return this["oVideoPlayCtrl"]["SetWaterMarkImage"](_0x58e32e)}},{key:"SetD3DPostProcess",value:function value(_0x38137e,_0x279867){return this["oVideoPlayCtrl"]["SetD3DPostProcess"](_0x38137e,_0x279867)}}]),_0x2d92af}();function _0x4a5b5d(_0x5d95a1,_0x984070){var _0x3004b9="undefined"!=typeof Symbol&&_0x5d95a1[Symbol["iterator"]]||_0x5d95a1["@@iterator"];if(!_0x3004b9){if(Array["isArray"](_0x5d95a1)||(_0x3004b9=function(_0x43a079,_0x1ab6b3){if(!_0x43a079)return;if("string"==typeof _0x43a079)return _0x5a5a15(_0x43a079,_0x1ab6b3);var _0x41ad42=Object["prototype"]["toString"]["call"](_0x43a079)["slice"](8,-1);"Object"===_0x41ad42&&_0x43a079["constructor"]&&(_0x41ad42=_0x43a079["constructor"]["name"]);if("Map"===_0x41ad42||"Set"===_0x41ad42)return Array["from"](_0x43a079);if("Arguments"===_0x41ad42||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/["test"](_0x41ad42))return _0x5a5a15(_0x43a079,_0x1ab6b3)}(_0x5d95a1))||_0x984070&&_0x5d95a1&&"number"==typeof _0x5d95a1["length"]){_0x3004b9&&(_0x5d95a1=_0x3004b9);var _0x10a168=0,_0x56e11c=function _0x56e11c(){};return{s:_0x56e11c,n:function n(){return _0x10a168>=_0x5d95a1["length"]?{done:!0}:{done:!1,value:_0x5d95a1[_0x10a168++]}},e:function e(_0x59b094){throw _0x59b094},f:_0x56e11c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _0x519fa8,_0x5e9b4d=!0,_0x1c3537=!1;return{s:function s(){_0x3004b9=_0x3004b9["call"](_0x5d95a1)},n:function n(){var _0x348a63=_0x3004b9["next"]();return _0x5e9b4d=_0x348a63["done"],_0x348a63},e:function e(_0xfdf826){_0x1c3537=!0,_0x519fa8=_0xfdf826},f:function f(){try{_0x5e9b4d||null==_0x3004b9["return"]||_0x3004b9["return"]()}finally{if(_0x1c3537)throw _0x519fa8}}}}function _0x5a5a15(_0x254a3f,_0x7e3b44){(null==_0x7e3b44||_0x7e3b44>_0x254a3f["length"])&&(_0x7e3b44=_0x254a3f["length"]);for(var _0x515f13=0,_0x442c4c=new Array(_0x7e3b44);_0x515f13<_0x7e3b44;_0x515f13++)_0x442c4c[_0x515f13]=_0x254a3f[_0x515f13];return _0x442c4c}var _0x306e37=[];!function(){for(var _0x5e06c5=0;_0x5e06c5<8;_0x5e06c5++){_0x306e37[_0x5e06c5]=[];for(var _0x2571e5=0;_0x2571e5<64;_0x2571e5++)_0x306e37[_0x5e06c5][_0x2571e5]=null}}();var _0x4f3dd2=null,_0x2845ce=!1,_0x2ab0c9=1,_0x37d27e=1,_0x157f87={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0,cmd:"unloaded",errorCode:0,status:0},_0x6474af=-1;window["JSPlayM4_RawDataCallBack"]=function(_0xabfd83,_0x2bd8a8,_0x22fd90,_0x57bfd1){null!=_0x306e37[_0x57bfd1][_0xabfd83]&&_0x306e37[_0x57bfd1][_0xabfd83]["__proto__"]["hasOwnProperty"]("JSPlayM4_InputRawData")&&_0x306e37[_0x57bfd1][_0xabfd83]["JSPlayM4_InputRawData"](_0xabfd83,_0x2bd8a8,_0x22fd90)},window["JSPlayM4_PrivateInfoCallBack"]=function(_0x4a5cef,_0x3c32e3,_0x18df50,_0x302f66,_0x429441){null!=_0x306e37[_0x429441][_0x4a5cef]&&_0x306e37[_0x429441][_0x4a5cef]["__proto__"]["hasOwnProperty"]("JSPlayM4_InputPrivateInfo")&&_0x306e37[_0x429441][_0x4a5cef]["JSPlayM4_InputPrivateInfo"](_0x3c32e3,_0x18df50,_0x302f66)};var _0x1c57af=function(){function _0x48b569(_0x29d93c,_0x13c023,_0x292bc8){var _0x3a8ad3=this,_0x429d4f=arguments["length"]>3&&void 0!==arguments[3]?arguments[3]:0,_0x6c8a0b=arguments["length"]>4&&void 0!==arguments[4]?arguments[4]:"webgl",_0x48d245=arguments["length"]>5&&void 0!==arguments[5]?arguments[5]:0,_0x2090b0=arguments["length"]>6&&void 0!==arguments[6]?arguments[6]:-1;if(_0x540ab2(this,_0x48b569),this["jsplayer"]=_0x29d93c,this["szBasePath"]=_0x13c023,this["fn"]=_0x292bc8,this["nUser"]=_0x429d4f,this["renderEngine"]=_0x6c8a0b,this["hasWebWorker"]=_0x48d245,this["setHasThread"]=_0x2090b0,this["oJSPlayerObj"]=this,this["port"]=-1,this["pcVideoManager"]=null,this["decodeWorker"]=null,this["offscreen"]=null,this["canvasID"]="",this["canvasCnv"]=null,this["rtpType"]=0,this["decodeEngine"]=1,this["FirstFrameCallBackflag"]=!1,this["inputDataBuffer"]=null,this["inputDataBufferSize"]=204800,this["canvasIDData"]=null,this["_decoderLoaded"]=!1,this["streamOpenMode"]=0,this["width"]=0,this["height"]=0,this["rawDataFrameInfoBuffer"]=null,this["rawDataFrameInfo"]={},this["displayFrameInfo"]={},this["startTimeStamp"]=0,this["decodeFrameType"]=0,this["switchDecodeFrame"]=!1,this["displayBuf"]=0,this["needSetDisplayBuf"]=!1,this["FirstFrame"]=!0,this["codecType"]=0,this["curStatus"]=0,this["playSpeed"]=1,this["needWaitIFrame"]=!1,this["printfFlag"]=!1,this["SetDisRegionBottom"]=0,this["SetDisRegionLeft"]=0,this["SetDisRegionRight"]=0,this["SetDisRegionTop"]=0,this["cropBottom"]=0,this["cropLeft"]=0,this["cropRight"]=0,this["cropTop"]=0,this["canvasWidth"]=960,this["canvasHeight"]=480,this["enableCanvas"]=!0,this["needResetCanvasSize"]=!1,this["hasThread"]=0,this["aTotalBuffer"]=[],this["iFrameNum"]=0,this["bWriteData"]=!0,this["downloadFlag"]=!1,this["bWriteAudioPCMData"]=!0,this["audioPCMBuffer"]=[],this["iAudioPCMFrameNum"]=0,this["pBmpData"]=null,this["nBmpDataSize"]=0,this["pBmpSizeData"]=null,this["bmpDataCallback"]=null,this["bmpDownloadFlag"]=!1,this["pJpegData"]=null,this["nJpegDataSize"]=0,this["pJPEGSizeData"]=null,this["jpegDataCallback"]=null,this["jpegDownloadFlag"]=!1,this["stDisplayRect"]={top:0,left:0,right:0,bottom:0},this["iZoomNum"]=0,this["iRatio_x"]=1,this["iRatio_y"]=1,this["pFECTotalCanvasIDData"]=null,this["iFECCanvasIDLen"]=0,this["iFECZoomNum"]=0,this["iFECRatio_x"]=1,this["iFECRatio_y"]=1,this["stFECDisplayRect"]={top:0,left:0,right:0,bottom:0},this["FECcanvasIDArray"]=[],this["FECGetPortCB"]=null,this["FECGetPTZPortCB"]=null,this["FECParamCB"]=null,this["FECViewParamCB"]=null,this["FFCallBackFun"]=null,this["addtionCallBackFun"]=null,this["displayCallBackFun"]=null,this["decCallBackFun"]=null,this["getPlayTimeCallBackFun"]=null,this["runtimeCBFun"]=null,this["callbackFlag"]=!1,this["runTimeModule"]=0,this["needSetSecretKey"]=!1,this["SecretKeyData"]=null,this["needPlaySound"]=!1,this["decInterval"]=-1,this["volumeValue"]=-1,this["renderPrivateInfo"]=new Map,this["renderIntelSubEx"]=new Map,this["renderIntelFlagEx"]=new Map,this["reversePlay"]=!1,this["decodeThreadNum"]=0,this["antialiasFlag"]=-1,this["decodeERCLevel"]=0,this["d3dPostProcessType"]=0,this["d3dPostProcessValue"]=0,this["needSetD3DPostProcess"]=!1,this["resetBufferType"]=-1,this["playOrBackSwitchMode"]=0,this["setStretchPlayTime"]=0,this["setStretchPlaySpeed"]=0,this["autoSmoothPlayModel"]=-1,this["keepPlaySpeed"]=-1,this["FECCanvasID"]="",this["FECPlaceType"]=0,this["FECCorrectType"]=0,this["anrParamFlag"]=!1,this["anrParamLevel"]=-1,this["resampleFlag"]=!1,this["resampleRate"]=48e3,this["globalBaseTime"]=null,this["needSetSkipErrorData"]=!1,this["skipErrorData"]=-1,this["needSetDemuxModel"]=!1,this["setDemuxModelType"]=-1,this["setDemuxModelFlag"]=!1,this["setAudioThreadModel"]=-1,this["syncToAudio"]=-1,this["HIK40Head"]=[],this["HIKHeadSize"]=40,this["HIKPoolSize"]=2097152,this["supportWebCodecs"]=_getFSupportWebCodecs(),this["supportSab"]=!!window["SharedArrayBuffer"],this["offscreen"]=!!window["OffscreenCanvas"],this["supportOffscreen"]=!1,this["offscreen"]){var _0x12cdba=new OffscreenCanvas(1,1),_0x16e7a3=_0x12cdba["getContext"]("webgl");_0x16e7a3&&(this["supportOffscreen"]=!0,_0x16e7a3["getExtension"]("WEBGL_lose_context")["loseContext"]()),_0x12cdba=null,_0x16e7a3=null}if(console["log"]("%cstart load Decoder.js time:"+(new Date)["getMinutes"]()+":"+(new Date)["getSeconds"]()+"."+(new Date)["getMilliseconds"](),"color: blue"),null!=_0x4f3dd2||_0x2845ce)new Promise(function(_0x510e00,_0x3ef195){_0x510e00()})["then"](function(){if(null===_0x4f3dd2)var _0x58d367=setInterval(function(){null!==_0x4f3dd2&&(clearInterval(_0x58d367),_0x58d367=null,_0x3a8ad3["fn"](_0x157f87))},10);else _0x3a8ad3["fn"](_0x157f87)});else{if(_0x2845ce=!0,_0x6474af=_getFExplore(),this["supportWebCodecs"]?-1<_0x6474af&&_0x6474af<94?(console["info"]("%c1>your chrome version %d does not support 264/265 hard Decoder,please update the latest version above chromeV107","color: red",_0x6474af),_0x37d27e=0,_0x2ab0c9=0,_0x157f87["bSupHardDecAVC"]=!1,_0x157f87["bSupHardDecHEVC"]=!1,this["supportSab"]?_0x157f87["bSupHardOrSoft"]=!0:_0x157f87["bSupHardOrSoft"]=!1):94<=_0x6474af&&_0x6474af<107?(console["info"]("%c1>your chrome version %d does not support 265 hard Decoder,please update the latest version above chromeV107","color: red",_0x6474af),_0x2ab0c9=0,_0x157f87["bSupHardDecAVC"]=!0,_0x157f87["bSupHardDecHEVC"]=!1,_0x157f87["bSupHardOrSoft"]=!0):(_0x157f87["bSupHardDecAVC"]=!0,_0x157f87["bSupHardDecHEVC"]=!1,_0x157f87["bSupHardOrSoft"]=!0):(console["info"]("%c1>your browser does not support hard Decoder ","color: red"),_0x37d27e=0,_0x2ab0c9=0,_0x157f87["bSupHardDecAVC"]=!1,_0x157f87["bSupHardDecHEVC"]=!1,this["supportSab"]?_0x157f87["bSupHardOrSoft"]=!0:_0x157f87["bSupHardOrSoft"]=!1),_0x157f87["bSupHardOrSoft"]){var _0x45658f=this["szBasePath"],_0x438f1d=document["createElement"]("script");_0x438f1d["type"]="text/javascript",_0x438f1d["src"]=_0x45658f,console["info"]("%c>>>>The Decoder.js path:%s","color: green",_0x45658f),_0x438f1d["onload"]=function(){window["JSPlayerModule"]()["then"](function(_0x4b75c1){_0x4f3dd2=_0x4b75c1,_0x3a8ad3["_decoderLoaded"]=!0,_0x157f87["cmd"]="loaded",console["log"]("%cEnd load Decoder.js time:"+(new Date)["getMinutes"]()+":"+(new Date)["getSeconds"]()+"."+(new Date)["getMilliseconds"](),"color: blue"),_0x3a8ad3["supportWebCodecs"]?VideoDecoder["isConfigSupported"]({codec:"hvc1.1.6.L123.00",hardwareAcceleration:"prefer-hardware"})["then"](function(_0x2ac69a){_0x2ac69a["supported"]?(_0x157f87["bSupHardDecHEVC"]=!0,console["info"]("%c1>your browser support 264/265 hard Decoder","color: green")):(console["warn"]("%c1>your PC does not support 265 hard Decoder, if you want to hard decode 265 ,try to update the GPU driver","color: red"),_0x2ab0c9=0),_0x3a8ad3["callbackFlag"]||(_0x3a8ad3["fn"](_0x157f87),_0x3a8ad3["callbackFlag"]=!0)})["catch"](function(){_0x2ab0c9=0,_0x157f87["bSupHardDecHEVC"]=!1,console["log"]("%c2>hevc supported error","color: red"),_0x3a8ad3["callbackFlag"]||(_0x3a8ad3["fn"](_0x157f87),_0x3a8ad3["callbackFlag"]=!0)}):_0x3a8ad3["fn"](_0x157f87)})},document["body"]["appendChild"](_0x438f1d)}else console["log"]("%c not support hard or soft","color:red"),new Promise(function(_0x228661,_0x2ee4ec){_0x228661()})["then"](function(){_0x3a8ad3["fn"](_0x157f87)})}}return _0x132bfb(_0x48b569,[{key:"startWorker",value:function(_0x3084a4){function _0x2173b6(_0x5a561d,_0x5827b2){return _0x3084a4["apply"](this,arguments)}return _0x2173b6["toString"]=function(){return _0x3084a4["toString"]()},_0x2173b6}(function(_0x422dd7,_0x35388b){if(window["Worker"]){if(null==_0x35388b["decodeWorker"]){if(_0x35388b["decodeWorker"]=new _0x669bd9,null==_0x35388b["decodeWorker"])return 0;console["log"]("decodeWorker create success!")}_0x35388b["canvasCnv"]=document["getElementById"](_0x422dd7),_0x35388b["offscreen"]=_0x35388b["canvasCnv"]["transferControlToOffscreen"](),_0x35388b["decodeWorker"]["postMessage"]({command:"init",streamOpenMode:_0x35388b["streamOpenMode"],canvas:_0x35388b["offscreen"],sab:_0x35388b["supportSab"],renderEngine:_0x35388b["renderEngine"]},[_0x35388b["offscreen"]]),0!=_0x35388b["displayBuf"]&&_0x35388b["decodeWorker"]["postMessage"]({command:"SetDisplayBuf",value:_0x35388b["displayBuf"]}),_0x35388b["decodeWorker"]["onmessage"]=function(_0xabe69e){var _0x383ee0=_0xabe69e["data"];switch(_0x383ee0["function"]){case"error":startWorker(_0x35388b["canvasID"],_0x35388b);break;case"GetFrameData":var _0x4e6323=new Uint8Array(_0x383ee0["data"]);_0x35388b["downloadRTPData"](_0x4e6323);break;case"GetRawData":_0x35388b["JSPlayM4_GetRawData"]();break;case"OrderError":console["log"](">>>JS OrderError");break;case"GetPlayedTime":var _0x1b0760=_0x383ee0["value"];_0x35388b["getPlayTimeCallBackFun"]&&_0x35388b["getPlayTimeCallBackFun"](_0x1b0760-_0x35388b["startTimeStamp"]);break;case"resetEnd":_0x35388b["JSPlayM4_ResetEnd"]();break;case"bitmap":var _0x10d131=_0x383ee0["value"],_0x39ffd9=_0x383ee0["type"];_0x35388b["_GetImage"](_0x10d131,_0x39ffd9);break;case"imageYUV":var _0x3549c0=new Uint8Array(_0x383ee0["value"]),_0x53b6fb=_0x383ee0["size"],_0x41f414=new Uint8Array(_0x3549c0),_0x3153fe=_0x383ee0["type"],_0x1264ca=_0x383ee0["width"],_0x1b12ab=_0x383ee0["height"],_0x5bad7f=_0x383ee0["yuvType"],_0x1bc72a=_0x383ee0["sx"],_0x9beffe=_0x383ee0["sy"],_0x112908=_0x383ee0["sw"],_0x2731c7=_0x383ee0["sh"];_0x35388b["_GetImage2"](_0x41f414,_0x53b6fb,_0x1264ca,_0x1b12ab,_0x3153fe,_0x5bad7f,_0x1bc72a,_0x9beffe,_0x112908,_0x2731c7),_0x3549c0=null,_0x41f414=null,_0x383ee0["value"]=null;break;case"stop":_0x35388b["decodeWorker"]=null,console["log"]("HardWorker is null");break;case"firstFrameCB":null!=_0x35388b["FFCallBackFun"]&&_0x35388b["FFCallBackFun"]();break;case"SetFrameInfoCallBack":_0x35388b["displayFrameInfo"]["port"]=_0x383ee0["curFrameInfo"]["port"],_0x35388b["displayFrameInfo"]["codecType"]=_0x383ee0["curFrameInfo"]["codecType"],_0x35388b["displayFrameInfo"]["frameType"]=_0x383ee0["curFrameInfo"]["frameType"],_0x35388b["displayFrameInfo"]["frameSize"]=_0x383ee0["curFrameInfo"]["frameSize"],_0x35388b["displayFrameInfo"]["width"]=_0x383ee0["curFrameInfo"]["width"],_0x35388b["displayFrameInfo"]["height"]=_0x383ee0["curFrameInfo"]["height"],_0x35388b["displayFrameInfo"]["timeStamp"]=_0x383ee0["curFrameInfo"]["timeStamp"],_0x35388b["displayFrameInfo"]["frameRate"]=_0x383ee0["curFrameInfo"]["frameRate"],_0x35388b["displayFrameInfo"]["frameNum"]=_0x383ee0["curFrameInfo"]["frameNum"],_0x35388b["displayFrameInfo"]["interlace"]=_0x383ee0["curFrameInfo"]["interlace"],_0x35388b["displayFrameInfo"]["streamEnd"]=_0x383ee0["curFrameInfo"]["streamEnd"],_0x35388b["displayFrameInfo"]["cropLeft"]=_0x383ee0["curFrameInfo"]["cropLeft"],_0x35388b["displayFrameInfo"]["cropRight"]=_0x383ee0["curFrameInfo"]["cropRight"],_0x35388b["displayFrameInfo"]["cropTop"]=_0x383ee0["curFrameInfo"]["cropTop"],_0x35388b["displayFrameInfo"]["cropBottom"]=_0x383ee0["curFrameInfo"]["cropBottom"],_0x35388b["displayFrameInfo"]["year"]=_0x383ee0["curFrameInfo"]["year"],_0x35388b["displayFrameInfo"]["month"]=_0x383ee0["curFrameInfo"]["month"],_0x35388b["displayFrameInfo"]["week"]=_0x383ee0["curFrameInfo"]["week"],_0x35388b["displayFrameInfo"]["day"]=_0x383ee0["curFrameInfo"]["day"],_0x35388b["displayFrameInfo"]["hour"]=_0x383ee0["curFrameInfo"]["hour"],_0x35388b["displayFrameInfo"]["minute"]=_0x383ee0["curFrameInfo"]["minute"],_0x35388b["displayFrameInfo"]["second"]=_0x383ee0["curFrameInfo"]["second"],_0x35388b["displayFrameInfo"]["milliseconds"]=_0x383ee0["curFrameInfo"]["milliseconds"];break;case"FECGetViewParam":null!=_0x35388b["FECViewParamCB"]&&_0x35388b["FECViewParamCB"](_0x383ee0["Param3D"]);break;case"FECGetParam":null!=_0x35388b["FECParamCB"]&&_0x35388b["FECParamCB"](_0x383ee0["param2d"]);break;case"FECGetPort":null!=_0x35388b["FECGetPortCB"]&&_0x35388b["FECGetPortCB"](_0x383ee0["fishSubPort"]);break;case"FECGetPTZPort":null!=_0x35388b["FECGetPTZPortCB"]&&_0x35388b["FECGetPTZPortCB"](_0x383ee0["fishSubPort"])}},_0x35388b["decodeWorker"]["addEventListener"]("error",function(_0x2037bf){console["error"](_0x2037bf)})}})},{key:"JSPlayM4_SetStreamEnd",value:function value(){return 0}},{key:"JSPlayM4_GetPort",value:function value(){return this["printfFlag"]&&console["log"](">>>>>yff>>> JSPlayM4_GetPort 1"),null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetPort","color: red"),0):(this["port"]=_0x4f3dd2["_JSPlayM4_GetPort"](),_0x306e37[this["nUser"]][this["port"]]=this["oJSPlayerObj"],this["printfFlag"]&&console["log"](">>>>>yff>>> JSPlayM4_GetPort 2"),1)}},{key:"JSPlayM4_SetStreamOpenMode",value:function value(_0x380339){return this["printfFlag"]&&console["log"](">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 1 mode:"+_0x380339),null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetStreamOpenMode","color: red"),0):(this["streamOpenMode"]=_0x380339,this["printfFlag"]&&console["log"](">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 2  mode:"+_0x380339),null==this["pcVideoManager"]&&(this["pcVideoManager"]=new _0x17b669(this)),_0x4f3dd2["_JSPlayM4_SetStreamOpenMode"](this["port"],_0x380339))}},{key:"JSPlayM4_OpenStream",value:function value(_0x351f09,_0x10800a,_0x16d1b3){if(this["printfFlag"]&&console["log"](">>>>>yff>>>>> JSPlayM4_OpenStream 1 :"+_0x351f09+",this.port:"+this["port"]),null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_OpenStream","color: red"),0;var _0x46bf2d=_0x4f3dd2["_malloc"](_0x10800a);if(null===_0x46bf2d)return console["log"]("hikHeadBuffer malloc failed"),0;var _0x4244d7=new Uint8Array(_0x351f09["buffer"]);if(5==_0x351f09[10]&&0==_0x351f09[11]){if(this["codecType"]=5,!_0x157f87["bSupHardDecHEVC"]&&!this["supportSab"])return console["info"]("%c3>The codecType is VIDEO_AVC265,not support SharedArrayBuffer","color: red"),16}else 1==_0x351f09[10]&&0==_0x351f09[11]?this["codecType"]=1:0==_0x351f09[10]&&1==_0x351f09[11]?this["codecType"]=256:this["codecType"]=0;_0x4f3dd2["writeArrayToMemory"](_0x4244d7,_0x46bf2d);var _0x281040=_0x4f3dd2["_JSPlayM4_OpenStream"](this["port"],_0x46bf2d,_0x10800a,_0x16d1b3);return null!==_0x46bf2d&&(_0x4f3dd2["_free"](_0x46bf2d),_0x46bf2d=null),_0x4244d7=null,this["HIK40Head"]=new Uint8Array(_0x351f09),this["HIKHeadSize"]=_0x10800a,this["HIKPoolSize"]=_0x16d1b3,_0x281040}},{key:"JSPlayM4_SetDecodeEngine",value:function value(_0x101737){return this["printfFlag"]&&console["log"](">>>>>yff>>>>> JSPlayM4_SetDecodeEngine 1:"+_0x101737),0!=_0x101737&&1!=_0x101737?(console["log"]("0 is softDecode, 1 is hardDecoder,decodeEngine:"+_0x101737),0):0!==_0x101737||this["supportSab"]&&this["supportOffscreen"]?(this["decodeEngine"]=_0x101737,1):(this["jsplayer"]["_switchV3ToV1"](this["streamOpenMode"],this["HIK40Head"],this["HIKHeadSize"],this["HIKPoolSize"],!0),0)}},{key:"_switchHardToSoft",value:function value(){return this["JSPlayM4_Stop"](!1),this["JSPlayM4_CloseStream"](),this["JSPlayM4_FreePort"](),this["supportSab"]&&this["supportOffscreen"]?(this["JSPlayM4_SetDecodeEngine"](0)&&(console["log"]("V3 switchHardToSoft this.szBasePath:"+this["szBasePath"]),this["JSPlayM4_GetPort"](),this["JSPlayM4_SetStreamOpenMode"](this["streamOpenMode"]),this["JSPlayM4_OpenStream"](this["HIK40Head"],this["HIKHeadSize"],this["HIKPoolSize"]),this["JSPlayM4_Play"](null,!0)),1):(this["jsplayer"]["_switchV3ToV1"](this["streamOpenMode"],this["HIK40Head"],this["HIKHeadSize"],this["HIKPoolSize"],!0),0)}},{key:"_HardToSoftNeedResetParam",value:function value(){null!=this["FFCallBackFun"]&&_0x4f3dd2["_JSPlayM4_SetFirstFrameCallBack"](this["port"],this["FirstFrameCallBackflag"],this["nUser"]),this["needSetSecretKey"]&&this["JSPlayM4_SetSecretKey"](this["SecretKeyData"]),null!=this["globalBaseTime"]&&this["globalBaseTime"]["month"]>0&&this["globalBaseTime"]["month"]<13&&this["JSPlayM4_SetGlobalBaseTime"](this["globalBaseTime"]["year"],this["globalBaseTime"]["month"],this["globalBaseTime"]["day"],this["globalBaseTime"]["hour"],this["globalBaseTime"]["min"],this["globalBaseTime"]["sec"],this["globalBaseTime"]["ms"]),this["needSetSkipErrorData"]&&this["JSPlayM4_SkipErrorData"](this["skipErrorData"]),this["needSetDemuxModel"]&&this["JSPlayM4_SetDemuxModel"](this["setDemuxModelType"],this["setDemuxModelFlag"]),this["JSPlayM4_SetDecodeFrameType"](this["decodeFrameType"]),-1!=this["decInterval"]&&_0x4f3dd2["_JSPlayM4_SetIFrameDecInterval"](this["port"],nInterval),0!=this["decodeThreadNum"]&&_0x4f3dd2["_JSPlayM4_SetDecodeThreadNum"](this["port"],this["decodeThreadNum"]),0!=this["decodeERCLevel"]&&_0x4f3dd2["_JSPlayM4_SetDecodeERC"](this["port"],this["decodeERCLevel"]),-1!=this["resetBufferType"]&&_0x4f3dd2["_JSPlayM4_ResetBuffer"](this["port"],this["resetBufferType"]),this["needPlaySound"]&&this["JSPlayM4_PlaySound"](),-1!=this["setAudioThreadModel"]&&this["JSPlayM4_SetAudioThreadModel"](this["setAudioThreadModel"]),-1!=this["syncToAudio"]&&this["JSPlayM4_SyncToAudio"](this["syncToAudio"]),this["anrParamFlag"]&&-1!=this["anrParamLevel"]&&this["JSPlayM4_SetANRParam"](this["anrParamFlag"],this["anrParamLevel"]),this["resampleFlag"]&&this["JSPlayM4_SetResampleValue"](this["resampleFlag"],this["resampleRate"]),-1!=this["volumeValue"]&&this["JSPlayM4_SetVolume"](this["volumeValue"]),null!=this["runtimeCBFun"]&&_0x4f3dd2["_JSPlayM4_SetRunTimeInfoCallBackEx"](this["port"],this["runTimeModule"],this["nUser"]),0!=this["playOrBackSwitchMode"]&&_0x4f3dd2["_JSPlayM4_SetPlayOrBackSwitchMode"](this["port"],this["playOrBackSwitchMode"]);var _0x5a21b2,_0x4e4ca1=_0x4a5b5d(this["renderPrivateInfo"]["keys"]());try{for(_0x4e4ca1["s"]();!(_0x5a21b2=_0x4e4ca1["n"]())["done"];){var _0x40066b=_0x5a21b2["value"],_0x5ac306=this["renderPrivateInfo"]["get"](_0x40066b);_0x4f3dd2["_JSPlayM4_RenderPrivateData"](this["port"],_0x40066b,_0x5ac306)}}catch(_0x4f38f3){_0x4e4ca1["e"](_0x4f38f3)}finally{_0x4e4ca1["f"]()}var _0xa602d2,_0x2d36e1=_0x4a5b5d(this["renderIntelSubEx"]["keys"]());try{for(_0x2d36e1["s"]();!(_0xa602d2=_0x2d36e1["n"]())["done"];){var _0xac3b18=_0xa602d2["value"],_0x1b8367=this["renderIntelSubEx"]["get"](_0xac3b18),_0x8c4930=this["renderIntelFlagEx"]["get"](_0xac3b18);_0x4f3dd2["_JSPlayM4_RenderPrivateDataEx"](this["port"],_0xac3b18,_0x1b8367,_0x8c4930)}}catch(_0x1de170){_0x2d36e1["e"](_0x1de170)}finally{_0x2d36e1["f"]()}return this["needSetDisplayBuf"]&&_0x4f3dd2["_JSPlayM4_SetDisplayBuf"](this["port"],this["displayBuf"]),-1!=this["antialiasFlag"]&&_0x4f3dd2["_JSPlayM4_SetAntialias"](this["port"],this["antialiasFlag"]),this["needSetD3DPostProcess"]&&_0x4f3dd2["_JSPlayM4_SetD3DPostProcess"](this["port"],this["d3dPostProcessType"],this["d3dPostProcessValue"]),0!=this["setStretchPlaySpeed"]&&_0x4f3dd2["_JSPlayM4_SetStretchPlay"](this["port"],this["setStretchPlayTime"],this["setStretchPlaySpeed"]),-1!=this["autoSmoothPlayModel"]&&_0x4f3dd2["_JSPlayM4_SetAutoSmoothPlay"](this["port"],this["autoSmoothPlayModel"]),-1!=this["keepPlaySpeed"]&&_0x4f3dd2["_JSPlayM4_KeepPlaySpeed"](this["port"],this["keepPlaySpeed"]),0!=this["printfFlag"]&&this["JSPlayM4_SetPrintLogFlag"](this["printfFlag"]),this["JSPlayM4_GetSDKVersion"](),this["JSPlayM4_GetBuildDate"](),""!=this["FECCanvasID"]&&this["JSPlayM4_FEC_SetCanvasID"](this["FECCanvasID"],!0),0!=this["FECPlaceType"]&&_0x4f3dd2["_JSPlayM4_FEC_ResetCorrectType"](this["port"],0,this["FECPlaceType"],this["FECCorrectType"]),1}},{key:"JSPlayM4_DownloadRawData",value:function value(){return this["downloadFlag"]=!0,1}},{key:"JSPlayM4_InputRawData",value:function value(_0x3de4bf,_0xbcee8a,_0x3f82f2){if(this["rawDataFrameInfoBuffer"]=_0x3f82f2,this["rawDataFrameInfo"]["port"]=_0x3de4bf,this["rawDataFrameInfo"]["codecType"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+4>>2],this["rawDataFrameInfo"]["frameType"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+12>>2],this["rawDataFrameInfo"]["frameSize"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+16>>2],this["rawDataFrameInfo"]["width"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+20>>2],this["rawDataFrameInfo"]["height"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+24>>2],this["rawDataFrameInfo"]["timeStamp"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+28>>2],this["rawDataFrameInfo"]["frameRate"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+32>>2],this["rawDataFrameInfo"]["frameNum"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+36>>2],this["rawDataFrameInfo"]["isKeyFrame"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+40>>2],this["rawDataFrameInfo"]["interlace"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+44>>2],this["rawDataFrameInfo"]["streamEnd"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+48>>2],this["rawDataFrameInfo"]["cropLeft"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+52>>2],this["rawDataFrameInfo"]["cropRight"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+56>>2],this["rawDataFrameInfo"]["cropTop"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+60>>2],this["rawDataFrameInfo"]["cropBottom"]=_0x4f3dd2["HEAP32"][this["rawDataFrameInfoBuffer"]+64>>2],this["rawDataFrameInfo"]["year"]=_0x4f3dd2["HEAP16"][this["rawDataFrameInfoBuffer"]+68>>1],this["rawDataFrameInfo"]["month"]=_0x4f3dd2["HEAP16"][this["rawDataFrameInfoBuffer"]+70>>1],this["rawDataFrameInfo"]["week"]=_0x4f3dd2["HEAP16"][this["rawDataFrameInfoBuffer"]+72>>1],this["rawDataFrameInfo"]["day"]=_0x4f3dd2["HEAP16"][this["rawDataFrameInfoBuffer"]+74>>1],this["rawDataFrameInfo"]["hour"]=_0x4f3dd2["HEAP16"][this["rawDataFrameInfoBuffer"]+76>>1],this["rawDataFrameInfo"]["minute"]=_0x4f3dd2["HEAP16"][this["rawDataFrameInfoBuffer"]+78>>1],this["rawDataFrameInfo"]["second"]=_0x4f3dd2["HEAP16"][this["rawDataFrameInfoBuffer"]+80>>1],this["rawDataFrameInfo"]["milliseconds"]=_0x4f3dd2["HEAP16"][this["rawDataFrameInfoBuffer"]+82>>1],this["rawDataFrameInfo"]["needSetPreSoft"]=!1,(this["rawDataFrameInfo"]["frameRate"]<1||1==this["rawDataFrameInfo"]["interlace"])&&(this["rawDataFrameInfo"]["needSetPreSoft"]=!0),5==this["rawDataFrameInfo"]["codecType"]&&_0x6474af<107&&console["info"]("%c1>your browser does not support hard 265 Decoder,please update chrome,sab:%d","color: red",this["sab"]),0!=this["width"]&&0!=this["height"]||(this["width"]=this["rawDataFrameInfo"]["width"],this["height"]=this["rawDataFrameInfo"]["height"],this["startTimeStamp"]=this["rawDataFrameInfo"]["timeStamp"],this["FirstFrame"]=!1),0==this["rawDataFrameInfo"]["cropLeft"]&&0==this["rawDataFrameInfo"]["cropRight"]&&0==this["rawDataFrameInfo"]["cropTop"]&&0==this["rawDataFrameInfo"]["cropBottom"]||(this["cropBottom"]=this["rawDataFrameInfo"]["cropBottom"],this["cropLeft"]=this["rawDataFrameInfo"]["cropLeft"],this["cropRight"]=this["rawDataFrameInfo"]["cropRight"],this["cropTop"]=this["rawDataFrameInfo"]["cropTop"]),1==this["decodeFrameType"]){if(1!==this["rawDataFrameInfo"]["isKeyFrame"])return 1;this["needWaitIFrame"]&&(this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"SetDecodeFrameType",timestamp:this["rawDataFrameInfo"]["timeStamp"]}):this["pcVideoManager"]["SetDecodeFrameType"](this["rawDataFrameInfo"]["timeStamp"]),this["needWaitIFrame"]=!1)}if(0==this["decodeFrameType"]&&1==this["switchDecodeFrame"]){if(1!==this["rawDataFrameInfo"]["isKeyFrame"])return 1;this["switchDecodeFrame"]=!1}if(this["downloadFlag"]&&this["downloadRTPData"](_0xbcee8a),this["hasWebWorker"]){if(null===this["decodeWorker"])return _0xbcee8a=null,0;this["decodeWorker"]["postMessage"]({command:"inputData",rawData:_0xbcee8a["buffer"],rawDataFrameInfo:this["rawDataFrameInfo"]},[_0xbcee8a["buffer"]])}else null!==this["pcVideoManager"]&&this["pcVideoManager"]["inputData"](_0xbcee8a,this["rawDataFrameInfo"])}},{key:"JSPlayM4_GetRawData",value:function value(){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetRawData","color: red"),0;_0x4f3dd2["_JSPlayM4_GetRawData"](this["port"])}},{key:"JSPlayM4_ResetEnd",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_ResetEnd","color: red"),0):_0x4f3dd2["_JSPlayM4_ResetEnd"](this["port"])}},{key:"JSPlayM4_NeedReset",value:function value(_0x50bbf4,_0x1162cd,_0x3af05d){return this["hasWebWorker"]?null!=_0x306e37[_0x3af05d][_0x50bbf4]["decodeWorker"]&&_0x306e37[_0x3af05d][_0x50bbf4]["decodeWorker"]["postMessage"]({command:"needReset"}):this["pcVideoManager"]["needReset"](),1}},{key:"JSPlayM4_SetAudioDisplayBuf",value:function value(_0x4d5acb){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetAudioDisplayBuf","color: red"),0):_0x4f3dd2["_JSPlayM4_SetAudioDisplayBuf"](this["port"],_0x4d5acb)}},{key:"JSPlayM4_Play",value:function value(){var _0x400c23=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:null,_0x5f2933=!(arguments["length"]>1&&void 0!==arguments[1])||arguments[1];if(this["printfFlag"]&&console["log"](">>>>>yff>>>>> JSPlayM4_Play 1 this.canvasID:"+this["canvasID"]+",this.supportSab:"+this["supportSab"]),null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_Play","color: red"),0;if(this["printfFlag"]&&console["log"](">>>>>yff>>>>> JSPlayM4_Play 2:"+this["decodeEngine"]),null!=_0x400c23&&(this["canvasID"]=_0x400c23,this["canvasWidth"]=document["getElementById"](this["canvasID"])["width"],this["canvasHeight"]=document["getElementById"](this["canvasID"])["height"]),0===_0x2ab0c9&&5===this["codecType"]?(this["decodeEngine"]=0,console["info"]("%c2>there will decode 265 by softDecoder","color: green")):0!==_0x37d27e||256!==this["codecType"]&&1!==this["codecType"]||(this["decodeEngine"]=0,console["info"]("%c2>there will decode 264 by softDecoder","color: green")),0==_0x37d27e&&0==_0x2ab0c9&&(this["decodeEngine"]=0),!(this["supportSab"]&&this["supportOffscreen"]||0!==this["decodeEngine"]))return console["info"]("%c3>SharedArrayBuffer or Offscreen Error , does not support Soft Decdoe!!!!!","color: red"),this["jsplayer"]["_switchV3ToV1"](this["streamOpenMode"],this["HIK40Head"],this["HIKHeadSize"],this["HIKPoolSize"],!0),0;-1!=this["setHasThread"]&&(this["hasThread"]=this["setHasThread"]),_0x4f3dd2["_JSPlayM4_SetDecodeEngine"](this["port"],this["decodeEngine"],this["hasThread"]);if(console["log"]("%cThe final decodeEngine is %d (0 is soft,1 is hard),codecType:%d","color: green",this["decodeEngine"],this["codecType"]),0===this["decodeEngine"]&&_0x5f2933&&null!=this["canvasID"]){var _0x28fc53=document["getElementById"](this["canvasID"]);_0x28fc53&&(this["clonedCanvas"]=_0x28fc53["cloneNode"](!0),this["clonedCanvasParentNode"]=_0x28fc53["parentNode"],this["clonedCanvasParentNode"]["replaceChild"](this["clonedCanvas"],_0x28fc53))}this["printfFlag"]&&console["log"](">>>>>yff>>>>> JSPlayM4_Play 2 this.canvasID:"+this["canvasID"]+",this.supportSab:"+this["supportSab"]+",this.decodeEngine:"+this["decodeEngine"]);var _0x499fc7=1;if(1===this["decodeEngine"]){this["hasWebWorker"]?this["startWorker"](this["canvasID"],this):(this["canvasCnv"]=document["getElementById"](this["canvasID"]),this["pcVideoManager"]["init"](this["canvasCnv"],this["streamOpenMode"],this["supportSab"],this["renderEngine"]),this["needSetDisplayBuf"]&&this["pcVideoManager"]["SetDisplayBuf"](this["displayBuf"])),_0x4f3dd2["_JSPlayM4_SetVideoRawDataCallBack"](this["port"],this["nUser"]);var _0x32a854=_0x4f3dd2["addFunction"](this["JSPlayM4_NeedReset"],"viii");_0x4f3dd2["_JSPlayM4_SetResetCallBack"](this["port"],_0x32a854,this["nUser"]),_0x4f3dd2["_JSPlayM4_SetPrivateInfoCallBack"](this["port"],this["nUser"]),this["JSPlayM4_SetCanvasSize"](this["canvasWidth"],this["canvasHeight"]),1==(_0x499fc7=_0x4f3dd2["_JSPlayM4_Play"](this["port"],null))&&(this["curStatus"]=2)}else{if(0===this["decodeEngine"]){if(""!=this["canvasID"]&&null!=this["canvasID"]){var _0xfa923f=this["_stringToBytes"]("#"+this["canvasID"]),_0x4f51ae=2*(this["canvasID"]["length"]+1);if(this["canvasIDData"]=_0x4f3dd2["_malloc"](_0x4f51ae),null===this["canvasIDData"])return 0;var _0xa0d4df=_0x4f3dd2["HEAPU8"]["subarray"](this["canvasIDData"],this["canvasIDData"]+_0x4f51ae),_0x11d8b0=new Uint8Array(_0x4f51ae);_0xa0d4df["set"](_0x11d8b0,0),_0xa0d4df["set"](new Uint8Array(_0xfa923f)),_0xa0d4df=null,_0x11d8b0=null}this["_HardToSoftNeedResetParam"](),1==(_0x499fc7=_0x4f3dd2["_JSPlayM4_Play"](this["port"],this["canvasIDData"]))&&(this["curStatus"]=2)}}return this["JSPlayM4_SetFrameInfoCallBack"](1),_0x499fc7}},{key:"JSPlayM4_InputData",value:function value(_0x1aaa0a,_0x571a24){if(this["inputDataBufferSize"]<_0x571a24&&(null!==this["inputDataBuffer"]&&(_0x4f3dd2["_free"](this["inputDataBuffer"]),this["inputDataBuffer"]=null),this["inputDataBufferSize"]=_0x571a24),null===this["inputDataBuffer"]&&(this["inputDataBuffer"]=_0x4f3dd2["_malloc"](this["inputDataBufferSize"])),null===this["inputDataBuffer"])return console["log"]("inputdata malloc failed!!!"),0;if(1==this["needResetCanvasSize"]&&(this["JSPlayM4_SetCanvasSize"](this["canvasWidth"],this["canvasHeight"]+1),this["needResetCanvasSize"]=!1),this["enableCanvas"]){var _0x504432=this["JSPlayM4_GetFrameInfo"](),_0xf2431c=_0x504432["width"],_0x389779=_0x504432["height"];_0xf2431c&&_0x389779&&(this["JSPlayM4_SetCanvasSize"](this["canvasWidth"],this["canvasHeight"]-1),this["enableCanvas"]=!1,this["needResetCanvasSize"]=!0)}var _0x5a7dac=new Uint8Array(_0x1aaa0a["buffer"]);_0x4f3dd2["writeArrayToMemory"](_0x5a7dac,this["inputDataBuffer"]);var _0x2e0b3a=_0x4f3dd2["_JSPlayM4_InputData"](this["port"],this["inputDataBuffer"],_0x571a24);return this["printfFlag"]&&console["log"](">>>>>yff>>>>> JSPlayM4_InputData 2 res:"+_0x2e0b3a+",inputSize:"+_0x571a24),_0x2e0b3a}},{key:"JSPlayM4_Stop",value:function value(){var _0x331a2f=!(arguments["length"]>0&&void 0!==arguments[0])||arguments[0];if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_Stop","color: red"),0;if(this["hasWebWorker"]?null!=this["decodeWorker"]&&this["decodeWorker"]["postMessage"]({command:"stop"}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["stop"](),this["bWriteData"]&&this["iFrameNum"]>0){console["log"]("download"+this["iFrameNum"]+"Psdata");var _0x3142fc=new Uint8Array(this["aTotalBuffer"]);this["_downloadFile"](_0x3142fc,"RTPRaw.data"),this["aTotalBuffer"]["splice"](0,this["aTotalBuffer"]["length"]),this["bWriteData"]=!1,this["iFrameNum"]=0,_0x3142fc=null}if(2==this["curStatus"]||5==this["curStatus"]){var _0x3aa016=_0x4f3dd2["_JSPlayM4_Stop"](this["port"]);if(1==_0x3aa016&&(this["curStatus"]=4),1==_0x3aa016&&_0x331a2f){var _0x2d074f=document["getElementById"](this["canvasID"]);if(_0x2d074f&&(this["clonedCanvas"]=_0x2d074f["cloneNode"](!0),this["clonedCanvasParentNode"]=_0x2d074f["parentNode"],this["clonedCanvasParentNode"]["replaceChild"](this["clonedCanvas"],_0x2d074f)),0!=this["FECcanvasIDArray"]["length"])for(var _0x4efc2a=0;_0x4efc2a<this["FECcanvasIDArray"]["length"];_0x4efc2a++){var _0x543b3a=document["getElementById"](this["FECcanvasIDArray"][_0x4efc2a]);_0x543b3a&&(this["clonedCanvas"]=_0x543b3a["cloneNode"](!0),this["clonedCanvasParentNode"]=_0x543b3a["parentNode"],this["clonedCanvasParentNode"]["replaceChild"](this["clonedCanvas"],_0x543b3a))}}return _0x3aa016}return 1}},{key:"JSPlayM4_CloseStream",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_CloseStream","color: red"),0):null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FreePort","color: red"),0):(null!==this["inputDataBuffer"]&&(_0x4f3dd2["_free"](this["inputDataBuffer"]),this["inputDataBuffer"]=null),null!==this["canvasIDData"]&&(_0x4f3dd2["_free"](this["canvasIDData"]),this["canvasIDData"]=null,this["FirstFrame"]=!0),null!=this["pFECTotalCanvasIDData"]&&(_0x4f3dd2["_free"](this["pFECTotalCanvasIDData"]),this["pFECTotalCanvasIDData"]=null),null!=this["pBmpData"]&&(_0x4f3dd2["_free"](this["pBmpData"]),this["pBmpData"]=null),null!=this["pBmpSizeData"]&&(_0x4f3dd2["_free"](this["pBmpSizeData"]),this["pBmpSizeData"]=null),null!=this["pJpegData"]&&(_0x4f3dd2["_free"](this["pJpegData"]),this["pJpegData"]=null),null!=this["pJPEGSizeData"]&&(_0x4f3dd2["_free"](this["pJPEGSizeData"]),this["pJPEGSizeData"]=null),this["bmpDataCallback"]=null,this["jpegDataCallback"]=null,this["aTotalBuffer"]["splice"](0,this["aTotalBuffer"]["length"]),this["audioPCMBuffer"]["splice"](0,this["audioPCMBuffer"]["length"]),this["width"]=0,this["height"]=0,this["curStatus"]=1,this["iZoomNum"]=0,this["rawDataFrameInfoBuffer"]=null,this["displayFrameInfo"]={},this["rawDataFrameInfo"]={},this["pcVideoManager"]=null,_0x4f3dd2["_JSPlayM4_CloseStream"](this["port"]))}},{key:"JSPlayM4_FreePort",value:function value(){return _0x4f3dd2["_JSPlayM4_FreePort"](this["port"])}},{key:"JSPlayM4_SetDecodeFrameType",value:function value(_0x4959b2){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeFrameType","color: red"),0):(this["decodeFrameType"]=_0x4959b2,1===this["decodeEngine"]?(0==_0x4959b2&&1==this["decodeFrameType"]&&(this["switchDecodeFrame"]=!0),1==_0x4959b2&&(this["needWaitIFrame"]=!0),1):_0x4f3dd2["_JSPlayM4_SetDecodeFrameType"](this["port"],_0x4959b2))}},{key:"JSPlayM4_PlaySound",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_PlaySound","color: red"),0):(this["needPlaySound"]=!0,_0x4f3dd2["_JSPlayM4_PlaySound"](this["port"]))}},{key:"resizedataURL",value:function value(_0x5b0ca2,_0x1c3935,_0x4c13bc){return new Promise(function(){var _0x5c796b,_0x4e3e6e=(_0x5c796b=_0x1b0558()["mark"](function _0x4dee0e(_0x47c990,_0x2a79ad){var _0x256779;return _0x1b0558()["wrap"](function(_0x4a36d4){for(;;)switch(_0x4a36d4["prev"]=_0x4a36d4["next"]){case 0:(_0x256779=document["createElement"]("img"))["onload"]=function(){var _0x14201b=document["createElement"]("canvas"),_0x246360=_0x14201b["getContext"]("2d");_0x14201b["width"]=_0x1c3935,_0x14201b["height"]=_0x4c13bc,_0x246360["drawImage"](this,0,0,_0x1c3935,_0x4c13bc);var _0xdb04cf=_0x14201b["toDataURL"]();_0x47c990(_0xdb04cf)},_0x256779["src"]=_0x5b0ca2;case 3:case"end":return _0x4a36d4["stop"]()}},_0x4dee0e)}),function(){var _0x53d5a3=this,_0x3b1a9c=arguments;return new Promise(function(_0x34f7bf,_0x29c57e){var _0x5563ae=_0x5c796b["apply"](_0x53d5a3,_0x3b1a9c);function _0x400ecf(_0x69e9be){_0x919d33(_0x5563ae,_0x34f7bf,_0x29c57e,_0x400ecf,_0x5bb0c0,"next",_0x69e9be)}function _0x5bb0c0(_0x411839){_0x919d33(_0x5563ae,_0x34f7bf,_0x29c57e,_0x400ecf,_0x5bb0c0,"throw",_0x411839)}_0x400ecf(void 0)})});return function(_0x1943ab,_0x135fce){return _0x4e3e6e["apply"](this,arguments)}}())}},{key:"_GetImage",value:function value(_0xa8f9cc,_0xebddcb){if(1===this["decodeEngine"]&&_0xa8f9cc["width"]&&_0xa8f9cc["height"]){var _0x16f89c="image/"+_0xebddcb,_0x4aa3f6=document["createElement"]("canvas"),_0x3f5dd2=_0x4aa3f6["getContext"]("2d");_0x4aa3f6["width"]=_0xa8f9cc["width"],_0x4aa3f6["height"]=_0xa8f9cc["height"],_0x3f5dd2["drawImage"](_0xa8f9cc,0,0,_0xa8f9cc["width"],_0xa8f9cc["height"]),_0x4aa3f6["toBlob"](function(_0x3d4c6f){console["log"]("blob:"+_0x3d4c6f);var _0x2f86d9=window["URL"]["createObjectURL"](_0x3d4c6f),_0x3f96dd=document["createElement"]("a");_0x3f96dd["download"]=(new Date)["getTime"]()+"."+_0xebddcb,_0x3f96dd["href"]=_0x2f86d9,_0x3f96dd["dataset"]["downloadurl"]=[_0x16f89c,_0x3f96dd["download"],_0x3f96dd["href"]]["join"](":"),document["body"]["appendChild"](_0x3f96dd),_0x3f96dd["click"](),document["body"]["removeChild"](_0x3f96dd),_0xa8f9cc["close"](),_0x3f5dd2=null},_0x16f89c)}}},{key:"_GetImage2",value:function value(_0x133201,_0x188616,_0x15c968,_0x234a2f,_0x54fc28,_0x4dc672,_0x32816d,_0x3effe2,_0x1ec26a,_0x37e501){var _0x3eefb6=this;setTimeout(function(){if(0!=_0x15c968&&0!=_0x234a2f){var _0x1d17dc=_0x4f3dd2["_malloc"](_0x188616);if(null===_0x1d17dc)return;_0x4f3dd2["writeArrayToMemory"](new Uint8Array(_0x133201,0,_0x188616),_0x1d17dc);var _0xbe83c7=0;_0xbe83c7=704!=_0x15c968||288!=_0x234a2f&&240!=_0x234a2f?_0x15c968*_0x234a2f*4+60:_0x15c968*_0x234a2f*8+60;var _0x6560b1=_0x4f3dd2["_malloc"](_0xbe83c7),_0x116445=_0x4f3dd2["_malloc"](4);if(null===_0x6560b1||null===_0x116445)return _0x4f3dd2["_free"](_0x1d17dc),_0x1d17dc=null,null!=_0x6560b1&&(_0x4f3dd2["_free"](_0x6560b1),_0x6560b1=null),void(null!=_0x116445&&(_0x4f3dd2["_free"](_0x116445),_0x116445=null));_0x4f3dd2["setValue"](_0x116445,_0xbe83c7,"i32");var _0x2d234d=2;if("nv12"===_0x4dc672?_0x2d234d=2:"I420"===_0x4dc672&&(_0x2d234d=3),"jpeg"==_0x54fc28)_0x4f3dd2["_JSPlayM4_VideoDataToJpeg"](_0x3eefb6["port"],_0x1d17dc,_0x188616,_0x6560b1,_0x116445,_0x15c968,_0x234a2f,_0x2d234d,_0x32816d,_0x3effe2,_0x1ec26a,_0x37e501);else{if("bmp"==_0x54fc28)_0x4f3dd2["_JSPlayM4_VideoDataToBMP"](_0x3eefb6["port"],_0x1d17dc,_0x188616,_0x6560b1,_0x116445,_0x15c968,_0x234a2f,_0x2d234d,_0x32816d,_0x3effe2,_0x1ec26a,_0x37e501)}var _0x14e25c=_0x4f3dd2["getValue"](_0x116445,"i32"),_0x4f8231=new Uint8Array(_0x14e25c);_0x4f8231["set"](_0x4f3dd2["HEAPU8"]["subarray"](_0x6560b1,_0x6560b1+_0x14e25c)),0==_0x32816d&&0==_0x3effe2&&0==_0x1ec26a&&0==_0x37e501?"jpeg"==_0x54fc28?(null!=_0x3eefb6["jpegDataCallback"]&&_0x3eefb6["jpegDataCallback"](_0x4f8231,_0x14e25c),_0x3eefb6["jpegDownloadFlag"]&&_0x3eefb6["_downloadFile"](_0x4f8231,"GetImage."+_0x54fc28),_0x3eefb6["jpegDataCallback"]=null,_0x3eefb6["jpegDownloadFlag"]=!1):"bmp"==_0x54fc28&&(null!=_0x3eefb6["bmpDataCallback"]&&_0x3eefb6["bmpDataCallback"](_0x4f8231,_0x14e25c),_0x3eefb6["bmpDownloadFlag"]&&_0x3eefb6["_downloadFile"](_0x4f8231,"GetImage."+_0x54fc28),_0x3eefb6["bmpDataCallback"]=null,_0x3eefb6["bmpDownloadFlag"]=!1):_0x3eefb6["_downloadFile"](_0x4f8231,"GetCropImage."+_0x54fc28),_0x4f8231=null,null!=_0x6560b1&&(_0x4f3dd2["_free"](_0x6560b1),_0x6560b1=null),null!=_0x116445&&(_0x4f3dd2["_free"](_0x116445),_0x116445=null)}},0)}},{key:"JSPlayM4_GetJPEG",value:function value(){var _0x4434a7=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:null,_0x1ca57f=!(arguments["length"]>1&&void 0!==arguments[1])||arguments[1];if(this["jpegDataCallback"]=_0x4434a7,this["jpegDownloadFlag"]=_0x1ca57f,1===this["decodeEngine"])return this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"GetJPEG"}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["GetJPEG"](),1;if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetJPEG","color: red"),0;var _0x2ea613=_0x4f3dd2["_JSPlayM4_GetFrameInfo"](this["port"]);if(this["width"]=_0x4f3dd2["HEAP32"][_0x2ea613+12>>2],this["height"]=_0x4f3dd2["HEAP32"][_0x2ea613+16>>2],0!=this["width"]&&0!=this["height"]){var _0x1d577a=this["width"]*this["height"]*4+60;if((null==this["pJpegData"]||this["nJPEGDataSize"]<_0x1d577a)&&(null!=this["pJpegData"]&&(_0x4f3dd2["_free"](this["pJpegData"]),this["pJpegData"]=null),this["nJPEGDataSize"]=_0x1d577a,this["pJpegData"]=_0x4f3dd2["_malloc"](this["nJPEGDataSize"]),null===this["pJpegData"]))return;null==this["pJPEGSizeData"]&&(this["pJPEGSizeData"]=_0x4f3dd2["_malloc"](4));var _0x105f57=_0x4f3dd2["_JSPlayM4_GetJPEG"](this["port"],this["pJpegData"],this["nJPEGDataSize"],this["pJPEGSizeData"]);if(1!=_0x105f57){var _0x24dd05=_0x4f3dd2["_JSPlayM4_GetLastError"](this["port"]);console["log"]("errorcode:"+_0x24dd05)}if(1==_0x105f57){var _0x55dfbd=_0x4f3dd2["getValue"](this["pJPEGSizeData"],"i32"),_0x1a392b=new Uint8Array(_0x55dfbd);_0x1a392b["set"](_0x4f3dd2["HEAPU8"]["subarray"](this["pJpegData"],this["pJpegData"]+_0x55dfbd)),null!=_0x4434a7&&_0x4434a7(_0x1a392b,_0x55dfbd),_0x1ca57f&&this["_downloadFile"](_0x1a392b,"GetJPEG.jpeg"),_0x1a392b=null,this["jpegDataCallback"]=null,this["jpegDownloadFlag"]=!1}return _0x105f57}return 0}},{key:"JSPlayM4_GetBMP",value:function value(){var _0x2a3237=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:null,_0xe4c0ef=!(arguments["length"]>1&&void 0!==arguments[1])||arguments[1];if(this["bmpDataCallback"]=_0x2a3237,this["bmpDownloadFlag"]=_0xe4c0ef,1===this["decodeEngine"])return this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"GetBMP"}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["GetBMP"](),1;if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetBMP","color: red"),0;var _0x2b4f69=_0x4f3dd2["_JSPlayM4_GetFrameInfo"](this["port"]);if(this["width"]=_0x4f3dd2["HEAP32"][_0x2b4f69+12>>2],this["height"]=_0x4f3dd2["HEAP32"][_0x2b4f69+16>>2],0==this["width"]||0==this["height"])return 0;var _0x5cf99a=0;if(_0x5cf99a=704!=this["width"]||288!=this["height"]&&240!=this["height"]?this["width"]*this["height"]*4+60:this["width"]*this["height"]*8+60,!(null==this["pBmpData"]||this["nBmpDataSize"]<_0x5cf99a)||(null!=this["pBmpData"]&&(_0x4f3dd2["_free"](this["pBmpData"]),this["pBmpData"]=null),this["nBmpDataSize"]=_0x5cf99a,this["pBmpData"]=_0x4f3dd2["_malloc"](this["nBmpDataSize"]),null!==this["pBmpData"])){null==this["pBmpSizeData"]&&(this["pBmpSizeData"]=_0x4f3dd2["_malloc"](4));var _0x1403d1=_0x4f3dd2["_JSPlayM4_GetBMP"](this["port"],this["pBmpData"],this["nBmpDataSize"],this["pBmpSizeData"]);if(1!=_0x1403d1){var _0x23264b=_0x4f3dd2["_JSPlayM4_GetLastError"](this["port"]);console["log"]("errorcode:"+_0x23264b)}if(1==_0x1403d1){var _0x550ed5=_0x4f3dd2["getValue"](this["pBmpSizeData"],"i32"),_0x1aa185=new Uint8Array(_0x550ed5);_0x1aa185["set"](_0x4f3dd2["HEAPU8"]["subarray"](this["pBmpData"],this["pBmpData"]+_0x550ed5)),null!=_0x2a3237&&_0x2a3237(_0x1aa185,_0x550ed5),_0xe4c0ef&&this["_downloadFile"](_0x1aa185,"GetBmp.bmp"),_0x1aa185=null,this["bmpDataCallback"]=null,this["bmpDownloadFlag"]=!1}return 1}}},{key:"JSPlayM4_GetCropJPEG",value:function value(){if(1===this["decodeEngine"])return this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"GetCropJPEG"}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["GetCropJPEG"](),1;if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetCropJPEG","color: red"),0;var _0x5f38c0=_0x4f3dd2["_JSPlayM4_GetFrameInfo"](this["port"]);if(this["width"]=_0x4f3dd2["HEAP32"][_0x5f38c0+12>>2],this["height"]=_0x4f3dd2["HEAP32"][_0x5f38c0+16>>2],0!=this["width"]&&0!=this["height"]){var _0x3ab2bb=this["width"]*this["height"]*4+60,_0xa6b591=_0x4f3dd2["_malloc"](_0x3ab2bb),_0x285c59=_0x4f3dd2["_malloc"](4),_0x3edfa1=this["SetDisRegionBottom"],_0x48d385=this["SetDisRegionLeft"],_0x4ed2fb=this["SetDisRegionRight"],_0x32fe36=this["SetDisRegionTop"];if(null===_0xa6b591)return;var _0x2f426f=_0x4f3dd2["_JSPlayM4_GetCropJPEG"](this["port"],_0xa6b591,_0x3ab2bb,_0x285c59,0,0,_0x48d385,_0x32fe36,_0x4ed2fb,_0x3edfa1);if(1!=_0x2f426f){var _0x122220=_0x4f3dd2["_JSPlayM4_GetLastError"](this["port"]);console["log"]("errorcode:"+_0x122220)}if(1==_0x2f426f){var _0x2ce8e5=_0x4f3dd2["getValue"](_0x285c59,"i32"),_0xd9d548=new Uint8Array(_0x2ce8e5);_0xd9d548["set"](_0x4f3dd2["HEAPU8"]["subarray"](_0xa6b591,_0xa6b591+_0x2ce8e5)),this["_downloadFile"](_0xd9d548,"GetCropJPEG.jpeg"),_0xd9d548=null}return null!=_0xa6b591&&(_0x4f3dd2["_free"](_0xa6b591),_0xa6b591=null),null!=_0x285c59&&(_0x4f3dd2["_free"](_0x285c59),_0x285c59=null),_0x2f426f}return 0}},{key:"JSPlayM4_GetCropBMP",value:function value(){if(1===this["decodeEngine"])return this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"GetCropBMP"}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["GetCropBMP"](),1;if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetCropBMP","color: red"),0;var _0xd580de=_0x4f3dd2["_JSPlayM4_GetFrameInfo"](this["port"]);if(this["width"]=_0x4f3dd2["HEAP32"][_0xd580de+12>>2],this["height"]=_0x4f3dd2["HEAP32"][_0xd580de+16>>2],0==this["width"]||0==this["height"])return 0;var _0x3fa6f1=this["width"]*this["height"]*4+60,_0x105a0b=_0x4f3dd2["_malloc"](_0x3fa6f1),_0x11d101=_0x4f3dd2["_malloc"](4),_0x3dde48=this["SetDisRegionBottom"],_0x3fc7ec=this["SetDisRegionLeft"],_0x13ad78=this["SetDisRegionRight"],_0x43eb01=this["SetDisRegionTop"];if(null!==_0x105a0b){var _0x23cebb=_0x4f3dd2["_JSPlayM4_GetCropBMP"](this["port"],_0x105a0b,_0x3fa6f1,_0x11d101,0,0,_0x3fc7ec,_0x43eb01,_0x13ad78,_0x3dde48);if(1!=_0x23cebb){var _0x23e790=_0x4f3dd2["_JSPlayM4_GetLastError"](this["port"]);console["log"]("errorcode:"+_0x23e790)}if(1==_0x23cebb){var _0xdb29ff=_0x4f3dd2["getValue"](_0x11d101,"i32"),_0x5953c2=new Uint8Array(_0xdb29ff);_0x5953c2["set"](_0x4f3dd2["HEAPU8"]["subarray"](_0x105a0b,_0x105a0b+_0xdb29ff)),this["_downloadFile"](_0x5953c2,"GetCropBmp.bmp"),_0x5953c2=null}return null!=_0x105a0b&&(_0x4f3dd2["_free"](_0x105a0b),_0x105a0b=null),null!=_0x11d101&&(_0x4f3dd2["_free"](_0x11d101),_0x11d101=null),1}}},{key:"JSPlayM4_GetCanvasCapture",value:function value(_0x1588a9){return 1===this["decodeEngine"]?(this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"GetCanvasCapture",cbFun:_0x1588a9}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["JSPlayM4_GetCanvasCapture"](_0x1588a9),1):(console["info"]("%c SoftDecode not support canvas capture","color: red"),1)}},{key:"JSPlayM4_StopSound",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_StopSound","color: red"),0):(this["needPlaySound"]=!1,_0x4f3dd2["_JSPlayM4_StopSound"]())}},{key:"JSPlayM4_GetSDKVersion",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetSDKVersion","color: red"),0):_0x4f3dd2["_JSPlayM4_GetSDKVersion"]()}},{key:"JSPlayM4_GetBuildDate",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetBuildDate","color: red"),0):_0x4f3dd2["_JSPlayM4_GetBuildDate"]()}},{key:"JSPlayM4_GetLastError",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetLastError","color: red"),0):_0x4f3dd2["_JSPlayM4_GetLastError"](this["port"])}},{key:"JSPlayM4_Fast",value:function value(){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_Fast","color: red"),0;if(0===this["streamOpenMode"])return 1;if(1===this["decodeEngine"]){if(this["hasWebWorker"]){if(null===this["decodeWorker"])return 0;this["decodeWorker"]["postMessage"]({command:"fast"})}else null!=this["pcVideoManager"]&&this["pcVideoManager"]["fast"]()}var _0x409005=_0x4f3dd2["_JSPlayM4_Fast"](this["port"]);return 1==_0x409005&&(this["playSpeed"]=2*this["playSpeed"]),_0x409005}},{key:"JSPlayM4_Slow",value:function value(){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_Slow","color: red"),0;if(0===this["streamOpenMode"])return 1;if(1===this["decodeEngine"]){if(this["hasWebWorker"]){if(null===this["decodeWorker"])return 0;this["decodeWorker"]["postMessage"]({command:"slow"})}else null!=this["pcVideoManager"]&&this["pcVideoManager"]["slow"]()}var _0x585392=_0x4f3dd2["_JSPlayM4_Slow"](this["port"]);return 1==_0x585392&&(this["playSpeed"]=this["playSpeed"]/2),console["log"]("this.playSpeed:"+this["playSpeed"]),_0x585392}},{key:"JSPlayM4_SetIFrameDecInterval",value:function value(_0x4382bb){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetIFrameDecInterval","color: red"),0):1===this["decodeEngine"]?1:(this["decInterval"]=_0x4382bb,_0x4f3dd2["_JSPlayM4_SetIFrameDecInterval"](this["port"],_0x4382bb))}},{key:"JSPlayM4_Pause",value:function value(_0x2e5edf){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_Pause","color: red"),0):0===this["streamOpenMode"]?1:(1===this["decodeEngine"]&&(this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"Pause",value:_0x2e5edf}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["Pause"](_0x2e5edf)),_0x4f3dd2["_JSPlayM4_Pause"](this["port"],_0x2e5edf))}},{key:"JSPlayM4_OneByOne",value:function value(){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_OneByOne","color: red"),0;if(0===this["streamOpenMode"])return 0;_0x157f87["cmd"]="onebyone";var _0x2b3a77=_0x4f3dd2["_JSPlayM4_GetSourceBufferRemain"](this["port"]),_0x4596bc=_0x4f3dd2["_JSPlayM4_GetLastError"](this["port"]);return _0x2b3a77<1e3||31==_0x4596bc?(_0x157f87["errorCode"]=31,_0x157f87["status"]=!0,this["fn"](_0x157f87)):(_0x2b3a77>this["HIKPoolSize"]-1e3||11==_0x4596bc)&&(_0x157f87["errorCode"]=0,_0x157f87["status"]=!1,this["fn"](_0x157f87)),this["curStatus"]=5,1===this["decodeEngine"]&&(this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"OneByOne",value:1}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["OneByOne"](1)),_0x4f3dd2["_JSPlayM4_OneByOne"](this["port"])}},{key:"JSPlayM4_OneByOneResume",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_OneByOneResume","color: red"),0):(_0x157f87["cmd"]="play",0===this["streamOpenMode"]?1:(this["curStatus"]=2,1===this["decodeEngine"]&&(this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"OneByOne",value:0}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["OneByOne"](0)),_0x4f3dd2["_JSPlayM4_Play"](this["port"],this["canvasIDData"])))}},{key:"JSPlayM4_SetVolume",value:function value(_0x3fc03c){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetVolume","color: red"),0):(this["volumeValue"]=_0x3fc03c,_0x4f3dd2["_JSPlayM4_SetVolume"](this["port"],_0x3fc03c))}},{key:"JSPlayM4_GetVolume",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetVolume","color: red"),0):_0x4f3dd2["_JSPlayM4_GetVolume"](this["port"])}},{key:"JSPlayM4_SetDisplayRegion",value:function value(_0x19be47,_0x4ff3f4,_0x329430,_0x5c06ed,_0x133508){var _0xad6adb=arguments["length"]>5&&void 0!==arguments[5]&&arguments[5],_0x34f811=!(arguments["length"]>6&&void 0!==arguments[6])||arguments[6];if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayRegion","color: red"),0;var _0x405e2e=1,_0x5d4954=_0x4ff3f4,_0x3f27c7=_0x5c06ed,_0x48ca67=_0x329430,_0x5af1f1=_0x133508;if("number"!=typeof _0x4ff3f4||"number"!=typeof _0x5c06ed||"number"!=typeof _0x329430||"number"!=typeof _0x133508)return console["log"]("param is not number"),0;if(_0xad6adb)_0x5d4954=0,_0x48ca67=this["canvasWidth"],_0x3f27c7=0,_0x5af1f1=this["canvasHeight"],this["iZoomNum"]=0,this["iRatio_x"]=1,this["iRatio_y"]=1;else{if(_0x34f811){if(_0x5d4954<0||_0x48ca67<0||_0x3f27c7<0||_0x5af1f1<0)return 0;0!==this["iZoomNum"]&&(_0x5d4954=Math["round"](_0x5d4954/this["iRatio_x"])+this["stDisplayRect"]["left"],_0x3f27c7=Math["round"](_0x3f27c7/this["iRatio_y"])+this["stDisplayRect"]["top"],_0x48ca67=Math["round"](_0x48ca67/this["iRatio_x"])+this["stDisplayRect"]["left"],_0x5af1f1=Math["round"](_0x5af1f1/this["iRatio_y"])+this["stDisplayRect"]["top"])}}if(this["stDisplayRect"]={top:_0x3f27c7,left:_0x5d4954,right:_0x48ca67,bottom:_0x5af1f1},_0x48ca67-_0x5d4954<16||_0x5af1f1-_0x3f27c7<16||_0x48ca67-_0x5d4954>this["canvasWidth"]||_0x5af1f1-_0x3f27c7>this["canvasHeight"])return console["log"](">>>JS left:"+_0x4ff3f4+",right:"+_0x329430+",top:"+_0x5c06ed+",bottom:"+_0x133508+",bClose:"+_0xad6adb+",bZoomEnable:"+_0x34f811+",iZoomNum:"+this["iZoomNum"]+",canvasWidth:"+this["canvasWidth"]+",canvasHeight:"+this["canvasHeight"]),0;if(1===this["decodeEngine"]){if(this["SetDisRegionBottom"]=_0x5af1f1/this["canvasHeight"]*this["height"],this["SetDisRegionLeft"]=_0x5d4954/this["canvasWidth"]*this["width"],this["SetDisRegionRight"]=_0x48ca67/this["canvasWidth"]*this["width"],this["SetDisRegionTop"]=_0x3f27c7/this["canvasHeight"]*this["height"],this["hasWebWorker"]){if(null===this["decodeWorker"])return 0;this["decodeWorker"]["postMessage"]({command:"SetDisplayRegion",sx:this["SetDisRegionLeft"],sy:this["SetDisRegionTop"],sw:this["SetDisRegionRight"]-this["SetDisRegionLeft"],sh:this["SetDisRegionBottom"]-this["SetDisRegionTop"]})}else null!=this["pcVideoManager"]&&this["pcVideoManager"]["SetDisplayRegion"](this["SetDisRegionLeft"],this["SetDisRegionTop"],this["SetDisRegionRight"]-this["SetDisRegionLeft"],this["SetDisRegionBottom"]-this["SetDisRegionTop"])}else{var _0x1cd412=_0x4f3dd2["_JSPlayM4_GetFrameInfo"](this["port"]);this["width"]=_0x4f3dd2["HEAP32"][_0x1cd412+12>>2],this["height"]=_0x4f3dd2["HEAP32"][_0x1cd412+16>>2],this["SetDisRegionBottom"]=_0x5af1f1/this["canvasHeight"]*this["height"],this["SetDisRegionLeft"]=_0x5d4954/this["canvasWidth"]*this["width"],this["SetDisRegionRight"]=_0x48ca67/this["canvasWidth"]*this["width"],this["SetDisRegionTop"]=_0x3f27c7/this["canvasHeight"]*this["height"],_0x405e2e=_0x4f3dd2["_JSPlayM4_SetDisplayRegion"](this["port"],this["canvasID"],this["SetDisRegionLeft"],this["SetDisRegionRight"],this["SetDisRegionTop"],this["SetDisRegionBottom"])}return _0x34f811&&(this["iRatio_x"]=this["canvasWidth"]/(_0x48ca67-_0x5d4954),this["iRatio_y"]=this["canvasHeight"]/(_0x5af1f1-_0x3f27c7),this["iZoomNum"]++),_0x405e2e}},{key:"JSPlayM4_SetPrintLogFlag",value:function value(_0x41aa49){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetPrintLogFlag","color: red"),0):(this["printfFlag"]=Number(_0x41aa49),_0x4f3dd2["_JSPlayM4_SetPrintLogFlag"](this["port"],_0x41aa49))}},{key:"JSPlayM4_RenderPrivateData",value:function value(_0x5554d4,_0x2581af){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_RenderPrivateData","color: red"),0;if(this["renderPrivateInfo"]["set"](_0x5554d4,_0x2581af),1===this["decodeEngine"]){if(this["hasWebWorker"]){if(null===this["decodeWorker"])return 0;this["decodeWorker"]["postMessage"]({command:"RenderPrivateData",bTrue:_0x2581af})}else null!=this["pcVideoManager"]&&this["pcVideoManager"]["RenderPrivateData"](_0x2581af)}return _0x4f3dd2["_JSPlayM4_RenderPrivateData"](this["port"],_0x5554d4,_0x2581af)}},{key:"JSPlayM4_RenderPrivateDataEx",value:function value(_0x3c574a,_0x980585,_0x53f11e){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_RenderPrivateDataEx","color: red"),0):(this["renderIntelSubEx"]["set"](_0x3c574a,_0x980585),this["renderIntelFlagEx"]["set"](_0x3c574a,_0x53f11e),_0x4f3dd2["_JSPlayM4_RenderPrivateDataEx"](this["port"],_0x3c574a,_0x980585,_0x53f11e))}},{key:"JSPlayM4_SetCanvasSize",value:function value(_0x46d5cb,_0x4ecee3){var _0x4a216a=arguments["length"]>2&&void 0!==arguments[2]?arguments[2]:0;if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetCanvasSize","color: red"),0;if(_0x46d5cb<16||_0x4ecee3<16||null===this["canvasID"])return 0;if(this["canvasWidth"]=_0x46d5cb,this["canvasHeight"]=_0x4ecee3,1===this["decodeEngine"]){if(this["hasWebWorker"]){if(null==this["decodeWorker"])return 0;this["decodeWorker"]["postMessage"]({command:"SetCanvasSize",width:_0x46d5cb,height:_0x4ecee3})}else null!=this["pcVideoManager"]&&this["pcVideoManager"]["SetCanvasSize"](_0x46d5cb,_0x4ecee3)}return _0x4f3dd2["_JSPlayM4_SetCanvasSize"](this["port"],_0x46d5cb,_0x4ecee3,_0x4a216a)}},{key:"JSPlayM4_SetDisplayBuf",value:function value(_0x86e6ab){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayBuf","color: red"),0):(this["displayBuf"]=_0x86e6ab,this["needSetDisplayBuf"]=!0,1===this["decodeEngine"]&&(this["hasWebWorker"]?null===this["decodeWorker"]||this["decodeWorker"]["postMessage"]({command:"SetDisplayBuf",value:_0x86e6ab}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["SetDisplayBuf"](_0x86e6ab)),_0x4f3dd2["_JSPlayM4_SetDisplayBuf"](this["port"],_0x86e6ab))}},{key:"JSPlayM4_GetSourceBufferRemain",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetSourceBufferRemain","color: red"),0):_0x4f3dd2["_JSPlayM4_GetSourceBufferRemain"](this["port"])}},{key:"JSPlayM4_GetBufferValue",value:function value(_0x43b519){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetBufferValue","color: red"),0):_0x4f3dd2["_JSPlayM4_GetBufferValue"](this["port"],_0x43b519)}},{key:"JSPlayM4_ReversePlay",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_ReversePlay","color: red"),0):0===this["streamOpenMode"]?1:(this["reversePlay"]=!0,_0x4f3dd2["_JSPlayM4_ReversePlay"](this["port"]))}},{key:"JSPlayM4_SetDecodeThreadNum",value:function value(_0x316282){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeThreadNum","color: red"),0):(this["decodeThreadNum"]=_0x316282,_0x4f3dd2["_JSPlayM4_SetDecodeThreadNum"](this["port"],_0x316282))}},{key:"JSPlayM4_GetCanvasSize",value:function value(){var _0xcad5e6=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:0;return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetCanvasSize","color: red"),0):1===this["decodeEngine"]?(this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"GetCanvasSize"}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["GetCanvasSize"](),1):_0x4f3dd2["_JSPlayM4_GetCanvasSize"](this["port"],_0xcad5e6)}},{key:"JSPlayM4_DisplayLostFrames",value:function value(_0x11a647,_0x4c6449,_0x2dcfaa){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_DisplayLostFrames","color: red"),0):_0x4f3dd2["_JSPlayM4_DisplayLostFrames"](this["port"],_0x11a647,_0x4c6449,_0x2dcfaa)}},{key:"JSPlayM4_SetANRParam",value:function value(_0x50f30a,_0x433b5b){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetANRParam","color: red"),0):(this["anrParamFlag"]=_0x50f30a,this["anrParamLevel"]=_0x433b5b,_0x4f3dd2["_JSPlayM4_SetANRParam"](this["port"],_0x50f30a,_0x433b5b))}},{key:"JSPlayM4_SetResampleValue",value:function value(_0x2e9c75,_0x36acb6){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetResampleValue","color: red"),0):(this["resampleFlag"]=_0x2e9c75,this["resampleRate"]=_0x36acb6,_0x4f3dd2["_JSPlayM4_SetResampleValue"](this["port"],_0x2e9c75,_0x36acb6))}},{key:"JSPlayM4_SetAntialias",value:function value(_0x28c27c){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetAntialias","color: red"),0;var _0x1634e9=1;return this["antialiasFlag"]=_0x28c27c,1===this["decodeEngine"]?this["hasWebWorker"]?null!=this["decodeWorker"]&&this["decodeWorker"]["postMessage"]({command:"SetAntialias",value:_0x28c27c}):null!=this["pcVideoManager"]&&(_0x1634e9=this["pcVideoManager"]["SetAntialias"](_0x28c27c)):_0x1634e9=_0x4f3dd2["_JSPlayM4_SetAntialias"](this["port"],_0x28c27c),_0x1634e9}},{key:"JSPlayM4_SyncToAudio",value:function value(_0x226883){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SyncToAudio","color: red"),0):(this["syncToAudio"]=SyncToAudio,_0x4f3dd2["_JSPlayM4_SyncToAudio"](this["port"],_0x226883))}},{key:"JSPlayM4_SetAudioThreadModel",value:function value(_0x1859c2){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetAudioThreadModel","color: red"),0):(this["setAudioThreadModel"]=_0x1859c2,_0x4f3dd2["_JSPlayM4_SetAudioThreadModel"](this["port"],_0x1859c2))}},{key:"JSPlayM4_SetDecodeERC",value:function value(_0x557579){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeERC","color: red"),0):(this["decodeERCLevel"]=_0x557579,_0x4f3dd2["_JSPlayM4_SetDecodeERC"](this["port"],_0x557579))}},{key:"JSPlayM4_SkipErrorData",value:function value(_0x28d8b4){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SkipErrorData","color: red"),0):(this["needSetSkipErrorData"]=!0,this["skipErrorData"]=_0x28d8b4,_0x4f3dd2["_JSPlayM4_SkipErrorData"](this["port"],_0x28d8b4))}},{key:"JSPlayM4_SetDemuxModel",value:function value(_0x1f6c1e,_0xe5076d){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetDemuxModel","color: red"),0):(this["needSetDemuxModel"]=!0,this["setDemuxModelType"]=_0x1f6c1e,this["setDemuxModelFlag"]=_0xe5076d,_0x4f3dd2["_JSPlayM4_SetDemuxModel"](this["port"],_0x1f6c1e,_0xe5076d))}},{key:"JSPlayM4_SetD3DPostProcess",value:function value(_0x11c6c9,_0xf8c4eb){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetD3DPostProcess","color: red"),0;var _0x554005=1;return this["d3dPostProcessType"]=_0x11c6c9,this["d3dPostProcessValue"]=_0xf8c4eb,this["needSetD3DPostProcess"]=!0,1===this["decodeEngine"]?this["hasWebWorker"]?null!=this["decodeWorker"]&&this["decodeWorker"]["postMessage"]({command:"SetD3DPostProcess",ProcessType:_0x11c6c9,ProcessValue:_0xf8c4eb}):null!=this["pcVideoManager"]&&(_0x554005=this["pcVideoManager"]["SetD3DPostProcess"](_0x11c6c9,_0xf8c4eb)):_0x554005=_0x4f3dd2["_JSPlayM4_SetD3DPostProcess"](this["port"],_0x11c6c9,_0xf8c4eb),_0x554005}},{key:"JSPlayM4_SetFirstFrameCallBack",value:function value(_0x52caae,_0x254385){if(!(_0x254385&&"function"==typeof _0x254385||null===_0x254385))return 0;if(this["FFCallBackFun"]=_0x254385,this["FirstFrameCallBackflag"]=_0x52caae,null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetFirstFrameCallBack","color: red"),0;var _0x336015=1;return 0===this["decodeEngine"]&&(_0x336015=_0x4f3dd2["_JSPlayM4_SetFirstFrameCallBack"](this["port"],_0x52caae,this["nUser"])),_0x336015}},{key:"JSPlayM4_SetDecCallBack",value:function value(_0x10664e,_0xa4953c){return _0xa4953c&&"function"==typeof _0xa4953c||null===_0xa4953c?(this["decCallBackFun"]=_0xa4953c,null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetDecCallBack","color: red"),0):_0x4f3dd2["_JSPlayM4_SetDecCallBack"](this["port"],_0x10664e,this["nUser"])):0}},{key:"JSPlayM4_SetDisplayCallBack",value:function value(_0x111bc4,_0x520b1b){return _0x520b1b&&"function"==typeof _0x520b1b||null===_0x520b1b?(this["displayCallBackFun"]=_0x520b1b,null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayCallBack","color: red"),0):_0x4f3dd2["_JSPlayM4_SetDisplayCallBack"](this["port"],_0x111bc4,this["nUser"])):0}},{key:"JSPlayM4_SetFrameInfoCallBack",value:function value(_0x394247){var _0x55641b=this,_0x2036b6=1;if(1===this["decodeEngine"])this["hasWebWorker"]?null!=this["decodeWorker"]&&this["decodeWorker"]["postMessage"]({command:"SetFrameInfoCallBack",value:_0x394247}):null!=this["pcVideoManager"]&&(_0x2036b6=this["pcVideoManager"]["SetFrameInfoCallBack"](function(_0x4a94da){_0x55641b["displayFrameInfo"]["port"]=_0x4a94da["port"],_0x55641b["displayFrameInfo"]["codecType"]=_0x4a94da["codecType"],_0x55641b["displayFrameInfo"]["frameType"]=_0x4a94da["frameType"],_0x55641b["displayFrameInfo"]["frameSize"]=_0x4a94da["frameSize"],_0x55641b["displayFrameInfo"]["width"]=_0x4a94da["width"],_0x55641b["displayFrameInfo"]["height"]=_0x4a94da["height"],_0x55641b["displayFrameInfo"]["timeStamp"]=_0x4a94da["timeStamp"],_0x55641b["displayFrameInfo"]["frameRate"]=_0x4a94da["frameRate"],_0x55641b["displayFrameInfo"]["frameNum"]=_0x4a94da["frameNum"],_0x55641b["displayFrameInfo"]["interlace"]=_0x4a94da["interlace"],_0x55641b["displayFrameInfo"]["streamEnd"]=_0x4a94da["streamEnd"],_0x55641b["displayFrameInfo"]["cropLeft"]=_0x4a94da["cropLeft"],_0x55641b["displayFrameInfo"]["cropRight"]=_0x4a94da["cropRight"],_0x55641b["displayFrameInfo"]["cropTop"]=_0x4a94da["cropTop"],_0x55641b["displayFrameInfo"]["cropBottom"]=_0x4a94da["cropBottom"],_0x55641b["displayFrameInfo"]["year"]=_0x4a94da["year"],_0x55641b["displayFrameInfo"]["month"]=_0x4a94da["month"],_0x55641b["displayFrameInfo"]["week"]=_0x4a94da["week"],_0x55641b["displayFrameInfo"]["day"]=_0x4a94da["day"],_0x55641b["displayFrameInfo"]["hour"]=_0x4a94da["hour"],_0x55641b["displayFrameInfo"]["minute"]=_0x4a94da["minute"],_0x55641b["displayFrameInfo"]["second"]=_0x4a94da["second"],_0x55641b["displayFrameInfo"]["milliseconds"]=_0x4a94da["milliseconds"]},_0x394247));else{if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetFrameInfoCallBack","color: red"),0;_0x2036b6=_0x4f3dd2["_JSPlayM4_SetFrameInfoCallBack"](this["port"],_0x394247)}return _0x2036b6}},{key:"JSPlayM4_SetDecCBStream",value:function value(_0x2414d8){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetDecCBStream","color: red"),0):_0x4f3dd2["_JSPlayM4_SetDecCBStream"](this["port"],_0x2414d8)}},{key:"JSPlayM4_GetFrameInfo",value:function value(){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetFrameInfo","color: red"),0;var _0x2835a3={};if(0==this["decodeEngine"]){var _0x31ba79=_0x4f3dd2["_JSPlayM4_GetFrameInfo"](this["port"]);_0x2835a3["port"]=_0x4f3dd2["HEAP32"][_0x31ba79>>2],_0x2835a3["frameType"]=_0x4f3dd2["HEAP32"][_0x31ba79+4>>2],_0x2835a3["frameSize"]=_0x4f3dd2["HEAP32"][_0x31ba79+8>>2],_0x2835a3["width"]=_0x4f3dd2["HEAP32"][_0x31ba79+12>>2],_0x2835a3["height"]=_0x4f3dd2["HEAP32"][_0x31ba79+16>>2],_0x2835a3["timeStamp"]=_0x4f3dd2["HEAP32"][_0x31ba79+20>>2],_0x2835a3["frameRate"]=_0x4f3dd2["HEAP32"][_0x31ba79+24>>2],_0x2835a3["bitPerSample"]=_0x4f3dd2["HEAP32"][_0x31ba79+28>>2],_0x2835a3["samplesPerSec"]=_0x4f3dd2["HEAP32"][_0x31ba79+32>>2],_0x2835a3["channel"]=_0x4f3dd2["HEAP32"][_0x31ba79+36>>2],_0x2835a3["frameNum"]=_0x4f3dd2["HEAP32"][_0x31ba79+40>>2],_0x2835a3["cropLeft"]=_0x4f3dd2["HEAP32"][_0x31ba79+44>>2],_0x2835a3["cropRight"]=_0x4f3dd2["HEAP32"][_0x31ba79+48>>2],_0x2835a3["cropTop"]=_0x4f3dd2["HEAP32"][_0x31ba79+52>>2],_0x2835a3["cropBottom"]=_0x4f3dd2["HEAP32"][_0x31ba79+56>>2],_0x2835a3["year"]=_0x4f3dd2["HEAP16"][_0x31ba79+60>>1],_0x2835a3["month"]=_0x4f3dd2["HEAP16"][_0x31ba79+62>>1],_0x2835a3["week"]=_0x4f3dd2["HEAP16"][_0x31ba79+64>>1],_0x2835a3["day"]=_0x4f3dd2["HEAP16"][_0x31ba79+66>>1],_0x2835a3["hour"]=_0x4f3dd2["HEAP16"][_0x31ba79+68>>1],_0x2835a3["minute"]=_0x4f3dd2["HEAP16"][_0x31ba79+70>>1],_0x2835a3["second"]=_0x4f3dd2["HEAP16"][_0x31ba79+72>>1],_0x2835a3["milliseconds"]=_0x4f3dd2["HEAP16"][_0x31ba79+74>>1],this["width"]=_0x2835a3["width"],this["height"]=_0x2835a3["height"]}else _0x2835a3=this["displayFrameInfo"];return _0x2835a3}},{key:"JSPlayM4_GetAdditionData",value:function value(){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetAdditionData","color: red"),0;var _0x3d37a1=null,_0x624fa8=_0x4f3dd2["_JSPlayM4_GetAdditionData"](this["port"]);return _0x3d37a1["dataType"]=_0x4f3dd2["HEAP32"][_0x624fa8>>2],_0x3d37a1["dataStrVersion"]=_0x4f3dd2["HEAP32"][_0x624fa8+4>>2],_0x3d37a1["dataTimeStamp"]=_0x4f3dd2["HEAP32"][_0x624fa8+8>>2],_0x3d37a1["dataLength"]=_0x4f3dd2["HEAP32"][_0x624fa8+12>>2],_0x3d37a1["pData"]=_0x4f3dd2["HEAP32"][_0x624fa8+16>>2],_0x3d37a1["additionDataBuffer"]=new Uint8Array(dataLength),additionDataBuffer["set"](_0x4f3dd2["HEAPU8"]["subarray"](pData,pData+dataLength)),_0x3d37a1}},{key:"JSPlayM4_SetAdditionDataCallBack",value:function value(_0x501cfb,_0xf72e99,_0x123c30){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetAdditionDataCallBack","color: red"),0):_0x123c30&&"function"==typeof _0x123c30||null===_0x123c30?(this["addtionCallBackFun"]=_0x123c30,_0x4f3dd2["_JSPlayM4_SetAdditionDataCallBack"](this["port"],_0x501cfb,_0xf72e99,this["nUser"])):0}},{key:"JSPlayM4_GetPlayedTimeEx",value:function value(_0x500824){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetPlayedTimeEx","color: red"),0;if(!(_0x500824&&"function"==typeof _0x500824||null===_0x500824))return 0;if(this["getPlayTimeCallBackFun"]=_0x500824,1===this["decodeEngine"]){if(this["hasWebWorker"])this["decodeWorker"]["postMessage"]({command:"GetPlayedTime"});else{if(null!=this["pcVideoManager"]){var _0x209eab=this["pcVideoManager"]["GetPlayedTime"]();this["getPlayTimeCallBackFun"]&&this["getPlayTimeCallBackFun"](_0x209eab-this["startTimeStamp"])}}}else{var _0x1d342b=_0x4f3dd2["_JSPlayM4_GetPlayedTimeEx"](this["port"]);this["getPlayTimeCallBackFun"](_0x1d342b)}}},{key:"JSPlayM4_GetFileTime",value:function value(){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetFileTime","color: red"),0):_0x4f3dd2["_JSPlayM4_GetFileTime"](this["port"])}},{key:"JSPlayM4_GetMpOffset",value:function value(_0x49ea20){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_GetMpOffset","color: red"),0):_0x49ea20>this["JSPlayM4_GetFileTime"]()?-1:(1===this["decodeEngine"]&&(this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"needReset"}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["needReset"]()),_0x4f3dd2["_JSPlayM4_GetMpOffset"](this["port"],_0x49ea20))}},{key:"JSPlayM4_ResetBuffer",value:function value(_0x52011b){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_ResetBuffer","color: red"),0):(this["resetBufferType"]=_0x52011b,_0x4f3dd2["_JSPlayM4_ResetBuffer"](this["port"],_0x52011b))}},{key:"JSPlayM4_SetGlobalBaseTime",value:function value(_0x1e7099,_0x501535,_0x3d6728,_0x598dd2,_0x36f18f,_0x3081e4,_0x1112d5){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetGlobalBaseTime","color: red"),0):(this["globalBaseTime"]={year:_0x1e7099,month:_0x501535,day:_0x3d6728,hour:_0x598dd2,min:_0x36f18f,sec:_0x3081e4,ms:_0x1112d5},_0x4f3dd2["_JSPlayM4_SetGlobalBaseTime"](this["port"],_0x1e7099,_0x501535,_0x3d6728,_0x598dd2,_0x36f18f,_0x3081e4,_0x1112d5))}},{key:"JSPlayM4_SetSecretKey",value:function value(_0x2d5c0b){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetSecretKey","color: red"),0;var _0xf678f=this["_stringToBytes"](_0x2d5c0b),_0x59627b=_0x4f3dd2["_malloc"](128);if(null!==_0x59627b){var _0x16b5ba=_0x4f3dd2["HEAPU8"]["subarray"](_0x59627b,_0x59627b+128),_0x387d5c=new Uint8Array(128);_0x16b5ba["set"](_0x387d5c,0),_0x16b5ba["set"](new Uint8Array(_0xf678f)),_0x16b5ba=null,_0x387d5c=null;var _0x333d23=_0x4f3dd2["_JSPlayM4_SetSecretKey"](this["port"],1,_0x59627b,128);return null!==_0x59627b&&(_0x4f3dd2["_free"](_0x59627b),_0x59627b=null),1===_0x333d23&&(this["needSetSecretKey"]=!0,this["SecretKeyData"]=_0x2d5c0b),_0x333d23}}},{key:"JSPlayM4_SetRunTimeInfoCallBackEx",value:function value(_0x5a8bac,_0xad5e83){return _0xad5e83&&"function"==typeof _0xad5e83||null===_0xad5e83?(this["runtimeCBFun"]=_0xad5e83,this["runTimeModule"]=_0x5a8bac,null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetRunTimeInfoCallBackEx","color: red"),0):_0x4f3dd2["_JSPlayM4_SetRunTimeInfoCallBackEx"](this["port"],_0x5a8bac,this["nUser"])):0}},{key:"JSPlayM4_SetPlayOrBackSwitchMode",value:function value(_0x44836e){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetPlayOrBackSwitchMode","color: red"),0):(this["playOrBackSwitchMode"]=_0x44836e,0==this["decodeEngine"]?_0x4f3dd2["_JSPlayM4_SetPlayOrBackSwitchMode"](this["port"],_0x44836e):0)}},{key:"JSPlayM4_SetStretchPlay",value:function value(_0x39431d,_0x1e986a){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetStretchPlay","color: red"),0):(this["setStretchPlayTime"]=_0x39431d,this["setStretchPlaySpeed"]=_0x1e986a,0==this["decodeEngine"]?_0x4f3dd2["_JSPlayM4_SetStretchPlay"](this["port"],_0x39431d,_0x1e986a):0)}},{key:"JSPlayM4_SetAutoSmoothPlay",value:function value(_0x571a58){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetAutoSmoothPlay","color: red"),0):(this["autoSmoothPlayModel"]=_0x571a58,0==this["decodeEngine"]?_0x4f3dd2["_JSPlayM4_SetAutoSmoothPlay"](this["port"],_0x571a58):0)}},{key:"JSPlayM4_KeepPlaySpeed",value:function value(_0x5f3721){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_KeepPlaySpeed","color: red"),0):(this["keepPlaySpeed"]=_0x5f3721,0==this["decodeEngine"]?_0x4f3dd2["_JSPlayM4_KeepPlaySpeed"](this["port"],_0x5f3721):0)}},{key:"JSPlayM4_IgnoreHeaderAudioDefine",value:function value(_0x16b942){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_IgnoreHeaderAudioDefine","color: red"),0):_0x4f3dd2["_JSPlayM4_IgnoreHeaderAudioDefine"](this["port"],_0x16b942)}},{key:"JSPlayM4_SetSycGroup",value:function value(_0x52844c){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetSycGroup","color: red"),0):_0x4f3dd2["_JSPlayM4_SetSycGroup"](this["port"],_0x52844c)}},{key:"JSPlayM4_FEC_SetCanvasID",value:function value(){var _0x481413=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:null,_0x28f65a=!(arguments["length"]>1&&void 0!==arguments[1])||arguments[1];if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetCanvasID","color: red"),0;this["FECCanvasID"]=_0x481413;var _0x296ee3=1;if(null!=_0x481413&&""!=_0x481413){if(this["FECcanvasIDArray"]=_0x481413["split"](","),1===this["decodeEngine"])this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"SetCanvasID"}):null!=this["pcVideoManager"]?_0x296ee3=this["pcVideoManager"]["FEC_SetCanvasID"](_0x481413):console["info"]("%c JSPlayM4_FEC_SetCanvasID this.pcVideoManager is null","color: red");else{for(var _0x3ab7b6="",_0x7050e8=0;_0x7050e8<this["FECcanvasIDArray"]["length"];_0x7050e8++)_0x7050e8==this["FECcanvasIDArray"]["length"]-1?_0x3ab7b6+="#"+this["FECcanvasIDArray"][_0x7050e8]:_0x3ab7b6+="#"+this["FECcanvasIDArray"][_0x7050e8]+",";if(0!=this["FECcanvasIDArray"]["length"]&&_0x28f65a)for(var _0x4b2c7c=0;_0x4b2c7c<this["FECcanvasIDArray"]["length"];_0x4b2c7c++){var _0x2d472d=document["getElementById"](this["FECcanvasIDArray"][_0x4b2c7c]);if(_0x2d472d){var _0xc33818=_0x2d472d["cloneNode"](!0),_0x205515=_0x2d472d["parentNode"];_0x205515["replaceChild"](_0xc33818,_0x2d472d)}}var _0x5c6d38=this["_stringToBytes"](_0x3ab7b6),_0x26e1ea=2*_0x3ab7b6["length"];if(this["pFECTotalCanvasIDData"]=_0x4f3dd2["_malloc"](_0x26e1ea),null===this["pFECTotalCanvasIDData"])return 0;var _0x1a5ab3=_0x4f3dd2["HEAPU8"]["subarray"](this["pFECTotalCanvasIDData"],this["pFECTotalCanvasIDData"]+_0x26e1ea),_0x5c8034=new Uint8Array(_0x26e1ea);_0x1a5ab3["set"](_0x5c8034,0),_0x1a5ab3["set"](new Uint8Array(_0x5c6d38)),_0x1a5ab3=null,_0x5c8034=null,_0x296ee3=_0x4f3dd2["_JSPlayM4_FEC_SetCanvasID"](this["port"],this["pFECTotalCanvasIDData"])}}else console["log"](" JSPlayM4_FEC_SetCanvasID canvasID is null :"+_0x481413),_0x296ee3=0;return _0x296ee3}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function value(_0x2dc375,_0x1a27c5,_0x59986f){if(this["printfFlag"]&&console["log"]("JSPlayM4_FEC_ResetCorrectType 1 decodeEngine:"+this["decodeEngine"]+",hasWebWorker:"+this["hasWebWorker"]+",fishSubPort:"+_0x2dc375+",placeType:"+_0x1a27c5+",correctType:"+_0x59986f),null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_ResetCorrectType","color: red"),0;this["FECPlaceType"]=_0x1a27c5,this["FECCorrectType"]=_0x59986f;var _0x2444b3=1;return 1===this["decodeEngine"]?this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECResetCorrectType",fishSubPort:_0x2dc375,placeType:_0x1a27c5,correctType:_0x59986f}):_0x2444b3=0:_0x2444b3=null!=this["pcVideoManager"]?this["pcVideoManager"]["FEC_ResetCorrectType"](_0x2dc375,_0x1a27c5,_0x59986f):0:_0x2444b3=_0x4f3dd2["_JSPlayM4_FEC_ResetCorrectType"](this["port"],_0x2dc375,_0x1a27c5,_0x59986f),_0x2444b3}},{key:"JSPlayM4_FEC_GetPort",value:function value(_0x558845,_0x541949){var _0x1db826=arguments["length"]>2&&void 0!==arguments[2]?arguments[2]:null;if(this["printfFlag"]&&console["log"](">>>JS JSPlayM4_FEC_GetPort this.decodeEngine："+this["decodeEngine"]+",placeType:"+_0x558845+",correctType:"+_0x541949),null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetPort","color: red"),0;var _0x268189=-1;return this["FECGetPortCB"]=_0x1db826,1===this["decodeEngine"]?this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECGetPort",placeType:_0x558845,correctType:_0x541949}):_0x268189=-1:(null!=this["pcVideoManager"]?((_0x268189=this["pcVideoManager"]["FEC_GetPort"](_0x558845,_0x541949))<1||_0x268189>31||null==_0x268189)&&(_0x268189=-1):_0x268189=-1,null!=this["FECGetPortCB"]&&this["FECGetPortCB"](_0x268189)):(((_0x268189=_0x4f3dd2["_JSPlayM4_FEC_GetPort"](this["port"],_0x558845,_0x541949))<1||_0x268189>31||null==_0x268189)&&(_0x268189=-1),null!=this["FECGetPortCB"]&&this["FECGetPortCB"](_0x268189)),_0x268189}},{key:"JSPlayM4_FEC_Enable",value:function value(_0x519e0f){if(this["printfFlag"]&&console["log"](">>>JS JSPlayM4_FEC_Enable this.decodeEngine："+this["decodeEngine"]+",fishSubPort:"+_0x519e0f),null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_Enable","color: red"),0;var _0x1df2f8=1;return 0==_0x519e0f?console["log"]("fishPort is 0 ,main canvas doesn't need call FEC_Enable"):1===this["decodeEngine"]?this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECEnable",fishSubPort:_0x519e0f}):_0x1df2f8=0:_0x1df2f8=null!=this["pcVideoManager"]?this["pcVideoManager"]["FEC_Enable"](_0x519e0f):0:_0x1df2f8=_0x4f3dd2["_JSPlayM4_FEC_Enable"](this["port"],_0x519e0f),_0x1df2f8}},{key:"JSPlayM4_FEC_SetParam",value:function value(_0x3bb731,_0x667351){if(this["printfFlag"]&&console["log"](">>>JS JSPlayM4_FEC_SetParam 1 this.decodeEngine："+this["decodeEngine"]+",fishSubPort:"+_0x3bb731+",upDateType:"+_0x667351["upDateType"]+",param2d.fPTZParam.fPTZPositionX:"+_0x667351["fPTZParam"]["fPTZPositionX"]+",param2d.fPTZParam.fPTZPositionY:"+_0x667351["fPTZParam"]["fPTZPositionY"]),null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetParam","color: red"),0;var _0x3d4fd6=1;if(1===this["decodeEngine"])this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECSetParam",fishSubPort:_0x3bb731,param2d:_0x667351}):_0x3d4fd6=0:_0x3d4fd6=null!=this["pcVideoManager"]?this["pcVideoManager"]["FEC_SetParam"](_0x3bb731,_0x667351):0;else{var _0x3174b1=_0x4f3dd2["_JSPlayM4_GetFishEye2DParam"]();null!=_0x667351["upDateType"]&&(_0x4f3dd2["HEAP32"][_0x3174b1>>2]=_0x667351["upDateType"]),null!=_0x667351["fPTZParam"]&&null!=_0x667351["fPTZParam"]["fPTZPositionX"]&&null!=_0x667351["fPTZParam"]["fPTZPositionY"]&&(_0x4f3dd2["HEAPF32"][_0x3174b1+8>>2]=_0x667351["fPTZParam"]["fPTZPositionX"],_0x4f3dd2["HEAPF32"][_0x3174b1+12>>2]=_0x667351["fPTZParam"]["fPTZPositionY"]),null!=_0x667351["fPTZParam"]&&(_0x4f3dd2["HEAPF32"][_0x3174b1+32>>2]=_0x667351["fPTZZoom"]),null!=_0x667351["fValue"]&&(_0x4f3dd2["HEAPF32"][_0x3174b1+36>>2]=_0x667351["fValue"]),_0x3d4fd6=_0x4f3dd2["_JSPlayM4_FEC_SetParam"](this["port"],_0x3bb731)}return _0x3d4fd6}},{key:"JSPlayM4_FEC_GetParam",value:function value(_0x577478){var _0x3ff9f=arguments["length"]>1&&void 0!==arguments[1]?arguments[1]:null;if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetParam","color: red"),0;var _0x3bcbe5={fRXLeft:0,fRXRight:0,fRYTop:0,fRYBottom:0,bBlack:0,bCut:0,nFishParamType:0,fAngle:0,fZoom:0,fPTZX:0,fPTZY:0,emCorrectType:0};if(this["FECParamCB"]=_0x3ff9f,1===this["decodeEngine"])this["hasWebWorker"]?null!=this["decodeWorker"]&&this["decodeWorker"]["postMessage"]({command:"FECGetParam",fishSubPort:_0x577478}):null!=this["pcVideoManager"]&&(this["pcVideoManager"]["FEC_GetParam"](_0x577478,_0x3bcbe5),null!=this["FECParamCB"]&&this["FECParamCB"](_0x3bcbe5));else{var _0x197c53=_0x4f3dd2["_JSPlayM4_FEC_GetParam"](this["port"],_0x577478);_0x3bcbe5["bBlack"]=0,_0x3bcbe5["fPTZX"]=_0x4f3dd2["HEAPF32"][_0x197c53+8>>2],_0x3bcbe5["fPTZY"]=_0x4f3dd2["HEAPF32"][_0x197c53+12>>2],_0x3bcbe5["fRXLeft"]=_0x4f3dd2["HEAPF32"][_0x197c53+16>>2],_0x3bcbe5["fRXRight"]=_0x4f3dd2["HEAPF32"][_0x197c53+20>>2],_0x3bcbe5["fRYTop"]=_0x4f3dd2["HEAPF32"][_0x197c53+24>>2],_0x3bcbe5["fRYBottom"]=_0x4f3dd2["HEAPF32"][_0x197c53+28>>2],_0x3bcbe5["fZoom"]=_0x4f3dd2["HEAPF32"][_0x197c53+32>>2],_0x3bcbe5["fAngle"]=_0x4f3dd2["HEAPF32"][_0x197c53+36>>2],_0x3bcbe5["bCut"]=_0x4f3dd2["HEAPF32"][_0x197c53+63>>2],_0x3bcbe5["nFishParamType"]=_0x4f3dd2["HEAPF32"][_0x197c53+67>>2],null!=this["FECParamCB"]&&this["FECParamCB"](_0x3bcbe5)}return 1}},{key:"JSPlayM4_FEC_SetViewParam",value:function value(_0x53be84,_0x1fd533,_0x40d451){if(this["printfFlag"]&&console["log"](">>>JS JSPlayM4_FEC_SetViewParam this.decodeEngine："+this["decodeEngine"]+",fishSubPort:"+_0x53be84+",upDateType:"+_0x1fd533+",fValue:"+_0x40d451),null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetViewParam","color: red"),0;var _0x59e843=1;return 1===this["decodeEngine"]?this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECSetViewParam",fishSubPort:_0x53be84,upDateType:_0x1fd533,fValue:_0x40d451}):_0x59e843=0:_0x59e843=null!=this["pcVideoManager"]?this["pcVideoManager"]["FEC_SetViewParam"](_0x53be84,_0x1fd533,_0x40d451):0:_0x59e843=_0x4f3dd2["_JSPlayM4_FEC_SetViewParam"](this["port"],_0x53be84,_0x1fd533,_0x40d451),_0x59e843}},{key:"JSPlayM4_FEC_GetViewParam",value:function value(_0xbba296,_0x3c9621,_0x81c6c2){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetViewParam","color: red"),0;var _0x14c1f2=1;this["FECViewParamCB"]=_0x81c6c2;var _0x30410a={fValue:-1};if(1===this["decodeEngine"])this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECGetViewParam",fishSubPort:_0xbba296,upDateType:_0x3c9621}):_0x14c1f2=0:null!=this["pcVideoManager"]?(_0x14c1f2=this["pcVideoManager"]["FEC_GetViewParam"](_0xbba296,_0x3c9621,_0x30410a),null!=this["FECViewParamCB"]&&this["FECViewParamCB"](_0x30410a)):_0x14c1f2=0;else{var _0x2a0de9=_0x4f3dd2["_JSPlayM4_GetViewParam"](this["port"],_0xbba296,_0x3c9621);_0x30410a["fValue"]=_0x2a0de9,null!=this["FECViewParamCB"]&&this["FECViewParamCB"](_0x30410a)}return _0x14c1f2}},{key:"JSPlayM4_FEC_SetWnd",value:function value(_0x2820c9,_0x2c9a66){if(this["printfFlag"]&&console["log"](">>>JS JSPlayM4_FEC_SetWnd this.decodeEngine："+this["decodeEngine"]+",fishSubPort:"+_0x2820c9+",hWnd:"+_0x2c9a66),null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetWnd","color: red"),0;var _0x47229e=1;if(0==_0x2820c9)console["log"]("fishPort is 0 ,main canvas doesn't need call FEC_SetWnd");else{if(null!=_0x2c9a66){if(1===this["decodeEngine"]){var _0x30c899=document["getElementById"](_0x2c9a66);if(this["hasWebWorker"]){var _0x4f2bac=_0x30c899["transferControlToOffscreen"]();null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECSetWnd",fishSubPort:_0x2820c9,offscrrenCnv:_0x4f2bac},[_0x4f2bac]):_0x47229e=0}else _0x47229e=null!=this["pcVideoManager"]?this["pcVideoManager"]["FEC_SetWnd"](_0x2820c9,_0x30c899):0}else{var _0x4a83b3=null;if(null!=_0x2c9a66){var _0x59c0a2=this["_stringToBytes"]("#"+_0x2c9a66),_0x9ee5b0=2*(_0x2c9a66["length"]+1);_0x4a83b3=_0x4f3dd2["_malloc"](_0x9ee5b0);var _0x2369bb=_0x4f3dd2["HEAPU8"]["subarray"](_0x4a83b3,_0x4a83b3+_0x9ee5b0),_0x584075=new Uint8Array(_0x9ee5b0);_0x2369bb["set"](_0x584075,0),_0x2369bb["set"](new Uint8Array(_0x59c0a2)),_0x2369bb=null,_0x584075=null}_0x47229e=_0x4f3dd2["_JSPlayM4_FEC_SetWnd"](this["port"],_0x2820c9,_0x4a83b3),null!=_0x4a83b3&&(_0x4f3dd2["_free"](_0x4a83b3),_0x4a83b3=null)}}else console["log"](">>>JS JSPlayM4_FEC_SetWnd hwnd error this.decodeEngine："+this["decodeEngine"]+",fishSubPort:"+_0x2820c9+",hWnd:"+_0x2c9a66),_0x47229e=0}return _0x47229e}},{key:"JSPlayM4_FEC_Disable",value:function value(){var _0x5befe8=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:0,_0x2d3e7a=!(arguments["length"]>1&&void 0!==arguments[1])||arguments[1],_0x1cb465=arguments["length"]>2&&void 0!==arguments[2]&&arguments[2],_0x15125a=1;return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_Disable","color: red"),0):(0==_0x5befe8?console["log"]("fishPort is 0 ,main canvas doesn't need call FEC_Disable"):1===this["decodeEngine"]?this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECDisable",fishSubPort:_0x5befe8,clearFECCanvas:_0x2d3e7a,clearContext:_0x1cb465}):_0x15125a=0:_0x15125a=null!=this["pcVideoManager"]?this["pcVideoManager"]["FEC_Disable"](_0x5befe8,_0x2d3e7a,_0x1cb465):0:_0x15125a=_0x4f3dd2["_JSPlayM4_FEC_Disable"](this["port"],_0x5befe8,_0x2d3e7a,_0x1cb465),_0x15125a)}},{key:"JSPlayM4_FEC_DelPort",value:function value(_0x10cbff){if(this["printfFlag"]&&console["log"](">>>JS JSPlayM4_FEC_DelPort this.decodeEngine："+this["decodeEngine"]+",fishSubPort:"+_0x10cbff),null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_DelPort","color: red"),0;var _0x2c4f82=1;return 1===this["decodeEngine"]?this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECDelPort",fishSubPort:_0x10cbff}):_0x2c4f82=0:_0x2c4f82=null!=this["pcVideoManager"]?this["pcVideoManager"]["FEC_DelPort"](_0x10cbff):0:_0x2c4f82=_0x4f3dd2["_JSPlayM4_FEC_DelPort"](this["port"],_0x10cbff),_0x2c4f82}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function value(_0x3d57f3){var _0x290879=arguments["length"]>1&&void 0!==arguments[1]?arguments[1]:0,_0x53dc60=arguments["length"]>2&&void 0!==arguments[2]?arguments[2]:0,_0x3ee6c0=arguments["length"]>3?arguments[3]:void 0,_0x31cddb=arguments["length"]>4&&void 0!==arguments[4]?arguments[4]:null,_0x53b204=arguments["length"]>5?arguments[5]:void 0,_0x57e611=arguments["length"]>6?arguments[6]:void 0;if(this["printfFlag"]&&console["log"](">>>JS JSPlayM4_FEC_SetDisplayRegion this.decodeEngine："+this["decodeEngine"]+",fishSubPort:"+_0x3d57f3+",left:"+_0x3ee6c0["left"]+",right:"+_0x3ee6c0["right"]+",top:"+_0x3ee6c0["top"]+",bottom:"+_0x3ee6c0["bottom"]),null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetDisplayRegion","color: red"),0;var _0x4e3599=1,_0x3235c8=_0x3ee6c0["left"],_0x4b094e=_0x3ee6c0["right"],_0x54a359=_0x3ee6c0["top"],_0x2c3ad7=_0x3ee6c0["bottom"];if("number"!=typeof _0x3235c8||"number"!=typeof _0x4b094e||"number"!=typeof _0x2c3ad7||"number"!=typeof _0x54a359)return console["log"]("param is not number"),0;if(_0x53b204){if(_0x57e611){if(_0x3235c8<0||_0x4b094e<0||_0x54a359<0||_0x2c3ad7<0)return 0;0!==this["iFECZoomNum"]&&(_0x3235c8=Math["round"](_0x3235c8/this["iFECRatio_x"])+this["stFECDisplayRect"]["left"],_0x54a359=Math["round"](_0x54a359/this["iFECRatio_y"])+this["stFECDisplayRect"]["top"],_0x4b094e=Math["round"](_0x4b094e/this["iFECRatio_x"])+this["stFECDisplayRect"]["left"],_0x2c3ad7=Math["round"](_0x2c3ad7/this["iFECRatio_y"])+this["stFECDisplayRect"]["top"])}}else _0x3235c8=0,_0x4b094e=this["canvasWidth"],_0x54a359=0,_0x2c3ad7=this["canvasHeight"],this["iFECZoomNum"]=0,this["iFECRatio_x"]=1,this["iFECRatio_y"]=1;if(this["stFECDisplayRect"]={top:_0x54a359,left:_0x3235c8,right:_0x4b094e,bottom:_0x2c3ad7},_0x4b094e-_0x3235c8<16||_0x2c3ad7-_0x54a359<16||_0x4b094e-_0x3235c8>this["canvasWidth"]||_0x2c3ad7-_0x54a359>this["canvasHeight"])return 0;if(1===this["decodeEngine"]){var _0x30f828=_0x3235c8/this["canvasWidth"]*this["width"],_0x1c60df=_0x4b094e/this["canvasWidth"]*this["width"],_0x4c70ee=_0x54a359/this["canvasHeight"]*this["height"],_0x550237=_0x2c3ad7/this["canvasHeight"]*this["height"];this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECSetDisplayRegion",fishSubPort:_0x3d57f3,type:_0x290879,regionNum:_0x53dc60,sx:_0x30f828,sy:_0x4c70ee,sw:_0x1c60df-_0x30f828,sh:_0x550237-_0x4c70ee}):_0x4e3599=0:_0x4e3599=null!=this["pcVideoManager"]?this["pcVideoManager"]["FEC_SetDisplayRegion"](_0x3d57f3,_0x290879,_0x53dc60,_0x30f828,_0x4c70ee,_0x1c60df-_0x30f828,_0x550237-_0x4c70ee):0}else{if(null!==_0x4f3dd2){var _0x5ecbeb=_0x3235c8/this["canvasWidth"]*1e3,_0x134638=_0x4b094e/this["canvasWidth"]*1e3,_0x6a0cbc=_0x54a359/this["canvasHeight"]*1e3,_0x3f105b=_0x2c3ad7/this["canvasHeight"]*1e3;_0x4e3599=_0x53b204?_0x4f3dd2["_JSPlayM4_FEC_SetDisplayRegion"](this["port"],_0x3d57f3,_0x290879,_0x53dc60,_0x5ecbeb,_0x134638,_0x6a0cbc,_0x3f105b,_0x31cddb,_0x53b204):_0x4f3dd2["_JSPlayM4_FEC_SetDisplayRegion"](this["port"],_0x3d57f3,0,0,0,0,0,0,null,_0x53b204)}else _0x4e3599=0}return _0x57e611&&(this["iFECRatio_x"]=this["canvasWidth"]/(_0x4b094e-_0x3235c8),this["iFECRatio_y"]=this["canvasHeight"]/(_0x2c3ad7-_0x54a359),this["iFECZoomNum"]++),_0x4e3599}},{key:"JSPlayM4_FEC_SetBackCilling",value:function value(_0x1747e1,_0x7b093b){var _0x120663=1;return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetBackCilling","color: red"),0):(1===this["decodeEngine"]?this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECSetBackCilling",fishSubPort:_0x1747e1,bValue:_0x7b093b}):_0x120663=0:_0x120663=null!=this["pcVideoManager"]?this["pcVideoManager"]["FEC_SetBackCilling"](_0x1747e1,_0x7b093b):0:_0x120663=_0x4f3dd2["_JSPlayM4_FEC_SetBackCilling"](this["port"],_0x1747e1,_0x7b093b),_0x120663)}},{key:"JSPlayM4_FEC_GetPTZPort",value:function value(_0x42f3ab,_0x4757ee){var _0x1b6365=arguments["length"]>2&&void 0!==arguments[2]?arguments[2]:0,_0x28555c=arguments["length"]>3&&void 0!==arguments[3]?arguments[3]:null;if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetPTZPort","color: red"),0;var _0x16df48=-1;return this["FECGetPTZPortCB"]=_0x28555c,1===this["decodeEngine"]?this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECGetPTZPort",fPositionX:_0x42f3ab,fPositionY:_0x4757ee}):_0x16df48=0:null!=this["pcVideoManager"]?(((_0x16df48=this["pcVideoManager"]["FEC_GetPTZPort"](_0x1b6365,_0x42f3ab,_0x4757ee))<0||_0x16df48>31||null==_0x16df48)&&(_0x16df48=-1),null!=this["FECGetPTZPortCB"]&&this["FECGetPTZPortCB"](_0x16df48)):_0x16df48=-1:console["info"]("%c softDecoder not support JSPlayM4_FEC_GetPTZPort","color: red"),_0x16df48}},{key:"JSPlayM4_FEC_SetPTZDisplayMode",value:function value(_0x5678a2){if(null===_0x4f3dd2)return console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetPTZDisplayMode","color: red"),0;return 1===this["decodeEngine"]&&(this["hasWebWorker"]?null!=this["decodeWorker"]?this["decodeWorker"]["postMessage"]({command:"FECSetPTZDisplayMode",ptzMode:_0x5678a2}):0:null!=this["pcVideoManager"]?this["pcVideoManager"]["FEC_SetPTZDisplayMode"](_0x5678a2):0),1}},{key:"JSPlayM4_FEC_PTZ2Window",value:function value(_0x5dad6b,_0x320760,_0x41fc49,_0x26fe23){return 1}},{key:"JSPlayM4_FEC_PTZ2Window2",value:function value(_0x39c2a1,_0x3996c3,_0x3e42ae){return 1}},{key:"JSPlayM4_InputPrivateInfo",value:function value(_0x44899f,_0x344315,_0x4f03e1){var _0x53a208={};_0x53a208["linesNum"]=_0x4f3dd2["HEAP32"][_0x44899f>>2],_0x53a208["absTimeStamp"]=_0x4f3dd2["HEAP32"][_0x44899f+4>>2],_0x53a208["stDrawLinesArray"]=[];for(var _0x27009e=0;_0x27009e<_0x53a208["linesNum"];_0x27009e++){_0x53a208["stDrawLinesArray"][_0x27009e]={},_0x53a208["stDrawLinesArray"][_0x27009e]["vertex_num"]=_0x4f3dd2["HEAP32"][_0x44899f+8+112*_0x27009e>>2],_0x53a208["stDrawLinesArray"][_0x27009e]["lineWidth"]=_0x4f3dd2["HEAP32"][_0x44899f+12+112*_0x27009e>>2],_0x53a208["stDrawLinesArray"][_0x27009e]["bFill"]=_0x4f3dd2["HEAP32"][_0x44899f+16+112*_0x27009e>>2],_0x53a208["stDrawLinesArray"][_0x27009e]["bLoop"]=_0x4f3dd2["HEAP32"][_0x44899f+20+112*_0x27009e>>2],_0x53a208["stDrawLinesArray"][_0x27009e]["color"]={},_0x53a208["stDrawLinesArray"][_0x27009e]["color"]["R"]=_0x4f3dd2["HEAPF32"][_0x44899f+24+112*_0x27009e>>2],_0x53a208["stDrawLinesArray"][_0x27009e]["color"]["G"]=_0x4f3dd2["HEAPF32"][_0x44899f+28+112*_0x27009e>>2],_0x53a208["stDrawLinesArray"][_0x27009e]["color"]["B"]=_0x4f3dd2["HEAPF32"][_0x44899f+32+112*_0x27009e>>2],_0x53a208["stDrawLinesArray"][_0x27009e]["color"]["A"]=_0x4f3dd2["HEAPF32"][_0x44899f+36+112*_0x27009e>>2],_0x53a208["stDrawLinesArray"][_0x27009e]["stPoint"]=[];for(var _0x263c2c=0;_0x263c2c<_0x53a208["stDrawLinesArray"][_0x27009e]["vertex_num"];_0x263c2c++)_0x53a208["stDrawLinesArray"][_0x27009e]["stPoint"][_0x263c2c]={},_0x53a208["stDrawLinesArray"][_0x27009e]["stPoint"][_0x263c2c]["x"]=_0x4f3dd2["HEAPF32"][_0x44899f+40+112*_0x27009e+8*_0x263c2c>>2],_0x53a208["stDrawLinesArray"][_0x27009e]["stPoint"][_0x263c2c]["y"]=_0x4f3dd2["HEAPF32"][_0x44899f+44+112*_0x27009e+8*_0x263c2c>>2]}var _0x3a5c56={};_0x3a5c56["nFontsNum"]=_0x4f3dd2["HEAP32"][_0x344315>>2],_0x3a5c56["absTimeStamp"]=_0x4f3dd2["HEAP32"][_0x344315+4>>2],_0x3a5c56["stDrawFontsArray"]=[];for(var _0x41f849=0;_0x41f849<_0x3a5c56["nFontsNum"];_0x41f849++){_0x3a5c56["stDrawFontsArray"][_0x41f849]={},_0x3a5c56["stDrawFontsArray"][_0x41f849]["nFontSizeW"]=_0x4f3dd2["HEAP32"][_0x344315+8+40*_0x41f849>>2],_0x3a5c56["stDrawFontsArray"][_0x41f849]["nFontSizeH"]=_0x4f3dd2["HEAP32"][_0x344315+12+40*_0x41f849>>2],_0x3a5c56["stDrawFontsArray"][_0x41f849]["color"]={},_0x3a5c56["stDrawFontsArray"][_0x41f849]["color"]["R"]=_0x4f3dd2["HEAPF32"][_0x344315+16+40*_0x41f849>>2],_0x3a5c56["stDrawFontsArray"][_0x41f849]["color"]["G"]=_0x4f3dd2["HEAPF32"][_0x344315+20+40*_0x41f849>>2],_0x3a5c56["stDrawFontsArray"][_0x41f849]["color"]["B"]=_0x4f3dd2["HEAPF32"][_0x344315+24+40*_0x41f849>>2],_0x3a5c56["stDrawFontsArray"][_0x41f849]["color"]["A"]=_0x4f3dd2["HEAPF32"][_0x344315+28+40*_0x41f849>>2],_0x3a5c56["stDrawFontsArray"][_0x41f849]["stPoint"]={},_0x3a5c56["stDrawFontsArray"][_0x41f849]["stPoint"]["x"]=_0x4f3dd2["HEAPF32"][_0x344315+32+40*_0x41f849>>2],_0x3a5c56["stDrawFontsArray"][_0x41f849]["stPoint"]["y"]=_0x4f3dd2["HEAPF32"][_0x344315+36+40*_0x41f849>>2];var _0xa413b8=_0x4f3dd2["HEAP32"][_0x344315+40+40*_0x41f849>>2],_0x146694=_0x4f3dd2["HEAP32"][_0x344315+44+40*_0x41f849>>2],_0x27bb63=new Uint8Array(_0x146694);_0x27bb63["set"](_0x4f3dd2["HEAP8"]["subarray"](_0xa413b8,_0xa413b8+_0x146694));for(var _0x22cd18="",_0x4b4233=0;_0x4b4233<_0x27bb63["length"];_0x4b4233++)0!==_0x27bb63[_0x4b4233]&&(_0x22cd18+=String["fromCharCode"](_0x27bb63[_0x4b4233]));_0x3a5c56["stDrawFontsArray"][_0x41f849]["fontString"]=_0x22cd18}var _0x36514d={};_0x36514d["absTimeStamp"]=_0x4f3dd2["HEAP32"][_0x4f03e1>>2],_0x36514d["nWidth"]=_0x4f3dd2["HEAP32"][_0x4f03e1+4>>2],_0x36514d["nHeight"]=_0x4f3dd2["HEAP32"][_0x4f03e1+8>>2],_0x36514d["pstRect"]={},_0x36514d["pstRect"]["fTop"]=_0x4f3dd2["HEAPF32"][_0x4f03e1+12>>2],_0x36514d["pstRect"]["fBottom"]=_0x4f3dd2["HEAPF32"][_0x4f03e1+16>>2],_0x36514d["pstRect"]["fLeft"]=_0x4f3dd2["HEAPF32"][_0x4f03e1+20>>2],_0x36514d["pstRect"]["fRight"]=_0x4f3dd2["HEAPF32"][_0x4f03e1+24>>2],_0x36514d["nPixelFormat"]=_0x4f3dd2["HEAP32"][_0x4f03e1+28>>2],_0x36514d["fAlpha"]=_0x4f3dd2["HEAPF32"][_0x4f03e1+32>>2],_0x36514d["nPixelFormat"];var _0x109318=_0x4f3dd2["HEAP32"][_0x4f03e1+36>>2],_0x2689ce=_0x4f3dd2["HEAP32"][_0x4f03e1+40>>2],_0x3f8bf7=new Uint8Array(_0x2689ce);return _0x3f8bf7["set"](_0x4f3dd2["HEAPU8"]["subarray"](_0x109318,_0x109318+_0x2689ce)),_0x36514d["picImageData"]=_0x3f8bf7,1===this["decodeEngine"]&&(this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"InputPrivateInfo",linesInfo:_0x53a208,fontInfo:_0x3a5c56,ImageInfo:_0x36514d}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["InputPrivateInfo"](_0x53a208,_0x3a5c56,_0x36514d)),1}},{key:"JSPlayM4_SetWaterMarkFont",value:function value(_0x218a7d){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetWaterMarkFont","color: red"),0):(1===this["decodeEngine"]?this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"SetWaterMarkFont",fontParam:_0x218a7d}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["SetWaterMarkFont"](_0x218a7d):console["log"]("%c1>soft decode not support SetWaterMarkFont,","color: red"),1)}},{key:"JSPlayM4_SetWaterMarkImage",value:function value(_0x1091b8){return null===_0x4f3dd2?(console["info"]("%coJSPlayerWasm is null,can't JSPlayM4_SetWaterMarkImage","color: red"),0):(1===this["decodeEngine"]?this["hasWebWorker"]?this["decodeWorker"]["postMessage"]({command:"SetWaterMarkImage",imageParam:_0x1091b8}):null!=this["pcVideoManager"]&&this["pcVideoManager"]["SetWaterMarkImage"](_0x1091b8):console["log"]("%c1>soft decode not support SetWaterMarkImage,","color: red"),1)}},{key:"_stringToBytes",value:function value(_0x1edbeb){for(var _0x42adba,_0x456e8b,_0x15f7ca=[],_0x34118b=0;_0x34118b<_0x1edbeb["length"];_0x34118b++){_0x42adba=_0x1edbeb["charCodeAt"](_0x34118b),_0x456e8b=[];do{_0x456e8b["push"](255&_0x42adba),_0x42adba>>=8}while(_0x42adba);_0x15f7ca=_0x15f7ca["concat"](_0x456e8b["reverse"]())}return _0x15f7ca}},{key:"_downloadFile",value:function value(_0x2c3b01,_0xa39449){var _0x223dff=_0x2c3b01;_0x2c3b01 instanceof Blob||_0x2c3b01 instanceof File||(_0x223dff=new Blob([_0x2c3b01]));var _0x346c2e=window["URL"]["createObjectURL"](_0x223dff),_0x5dea41=window["document"]["createElement"]("a");_0x5dea41["href"]=_0x346c2e,_0x5dea41["download"]=_0xa39449;var _0x14b575=document["createEvent"]("MouseEvents");_0x14b575["initEvent"]("click",!0,!0),_0x5dea41["dispatchEvent"](_0x14b575)}},{key:"downloadRTPData",value:function value(_0x17faaa){if(this["bWriteData"]){var _0x342cfe=_0x17faaa,_0xf4b42b=this["aTotalBuffer"]["length"];console["log"]("totalLength:"+_0xf4b42b);for(var _0x548382=0,_0x53f4e5=_0x342cfe["length"];_0x548382<_0x53f4e5;_0x548382++)this["aTotalBuffer"][_0xf4b42b+_0x548382]=_0x342cfe[_0x548382];this["iFrameNum"]++,_0x342cfe=null,console["log"]("downloadRTPdata iFrameNum:"+this["iFrameNum"])}if(this["bWriteData"]&&this["iFrameNum"]>=600){console["log"]("download600RawData");var _0x528bfd=new Uint8Array(this["aTotalBuffer"]);this["_downloadFile"](_0x528bfd,"Raw600.data"),this["aTotalBuffer"]["splice"](0,this["aTotalBuffer"]["length"]),this["bWriteData"]=!1,this["iFrameNum"]=0,_0x528bfd=null}}},{key:"downloadAudioPCMData",value:function value(_0x1d70fb){if(this["bWriteAudioPCMData"]){for(var _0x4f4504=_0x1d70fb,_0x55f983=this["audioPCMBuffer"]["length"],_0x4b28a3=0,_0x1eb1dd=_0x4f4504["length"];_0x4b28a3<_0x1eb1dd;_0x4b28a3++)this["audioPCMBuffer"][_0x55f983+_0x4b28a3]=_0x4f4504[_0x4b28a3];this["iAudioPCMFrameNum"]++,_0x4f4504=null,console["log"]("download ANR Decode AudioData FrameNum:"+this["iAudioPCMFrameNum"])}if(this["bWriteAudioPCMData"]&&this["iAudioPCMFrameNum"]>=WRITE_PCM_NUM){console["log"]("download"+WRITE_PCM_NUM+"this.audioPCMBuffer");var _0x27a15b=new Uint8Array(this["audioPCMBuffer"]);this["_downloadFile"](_0x27a15b,"AudioANR.data"),this["audioPCMBuffer"]["splice"](0,this["audioPCMBuffer"]["length"]),this["bWriteAudioPCMData"]=!1,this["iAudioPCMFrameNum"]=0,_0x27a15b=null}}}]),_0x48b569}();window["_getFExplore"]=function(){var _0x3ca773,_0x26a56d={},_0x586696=navigator["userAgent"]["toLowerCase"]();if((_0x3ca773=_0x586696["match"](/rv:([\d.]+)\) like gecko/))||(_0x3ca773=_0x586696["match"](/msie ([\d\.]+)/))?_0x26a56d["ie"]=_0x3ca773[1]:(_0x3ca773=_0x586696["match"](/edge\/([\d\.]+)/))?_0x26a56d["edge"]=_0x3ca773[1]:(_0x3ca773=_0x586696["match"](/firefox\/([\d\.]+)/))?_0x26a56d["firefox"]=_0x3ca773[1]:(_0x3ca773=_0x586696["match"](/(?:opera|opr).([\d\.]+)/))?_0x26a56d["opera"]=_0x3ca773[1]:(_0x3ca773=_0x586696["match"](/chrome\/([\d\.]+)/))?_0x26a56d["chrome"]=_0x3ca773[1]:(_0x3ca773=_0x586696["match"](/version\/([\d\.]+).*safari/))&&(_0x26a56d["safari"]=_0x3ca773[1]),_0x26a56d["chrome"]){var _0x5ed75a=_0x26a56d["chrome"],_0x404629=_0x5ed75a["indexOf"](".");return Number(_0x5ed75a["substring"](0,_0x404629))}return _0x26a56d["ie"]?console["info"]("%c1>your browser is IE ,it does not support play without plugin","color: red"):_0x26a56d["safari"]?console["info"]("%c1>your browser is safari ,it does not support softV2.0 or hard decode","color: red"):_0x26a56d["firefox"]?console["info"]("%c1>your browser is Firefox ,it only support soft decode","color: red"):console["info"]("%c1>your browser does not support play without plugin","color: red"),-1},window["JSPlayM4_AdditionDataCBFun"]=function(_0x3f5f97,_0x1e7b65,_0xdfed3f){if(null!=_0x306e37[_0xdfed3f][_0x3f5f97]){var _0x2999a7={};_0x2999a7["dataType"]=_0x4f3dd2["HEAP32"][_0x1e7b65>>2],_0x2999a7["dataStrVersion"]=_0x4f3dd2["HEAP32"][_0x1e7b65+4>>2],_0x2999a7["dataTimeStamp"]=_0x4f3dd2["HEAP32"][_0x1e7b65+8>>2],_0x2999a7["dataLength"]=_0x4f3dd2["HEAP32"][_0x1e7b65+12>>2],_0x2999a7["pData"]=_0x4f3dd2["HEAP32"][_0x1e7b65+16>>2],_0x2999a7["additionDataBuffer"]=new Uint8Array(_0x2999a7["dataLength"]),_0x2999a7["additionDataBuffer"]["set"](_0x4f3dd2["HEAPU8"]["subarray"](_0x2999a7["pData"],_0x2999a7["pData"]+_0x2999a7["dataLength"])),_0x306e37[_0xdfed3f][_0x3f5f97]["hasOwnProperty"]("addtionCallBackFun")&&null!=_0x306e37[_0xdfed3f][_0x3f5f97]["addtionCallBackFun"]&&null!=_0x306e37[_0xdfed3f][_0x3f5f97]["addtionCallBackFun"]&&_0x306e37[_0xdfed3f][_0x3f5f97]["addtionCallBackFun"](_0x2999a7)}},window["JSPlayM4_DisplayCallBack"]=function(_0x297d0d,_0x38191e,_0x331fd8,_0x2519e3,_0x364974){if(null!=_0x306e37[_0x364974][_0x297d0d]){var _0x5ad1c4={};_0x5ad1c4["yuvData"]=_0x38191e,_0x5ad1c4["isize"]=_0x331fd8,_0x5ad1c4["timeStamp"]=_0x2519e3,_0x306e37[_0x364974][_0x297d0d]["hasOwnProperty"]("displayCallBackFun")&&null!=_0x306e37[_0x364974][_0x297d0d]["displayCallBackFun"]&&_0x306e37[_0x364974][_0x297d0d]["displayCallBackFun"](_0x5ad1c4)}},window["JSPlayM4_DecCallBack"]=function(_0x385276,_0xf33b,_0x5c889b,_0x5194be,_0x35bc71,_0x299711){if(null!=_0x306e37[_0x299711][_0x385276]){var _0x5f4e1e={};_0x5f4e1e["port"]=_0x385276,_0x5f4e1e["Data"]=_0xf33b,_0x5f4e1e["isize"]=_0x5c889b,_0x5f4e1e["iDataType"]=_0x5194be,_0x5f4e1e["SampleRate"]=_0x35bc71,_0x306e37[_0x299711][_0x385276]["hasOwnProperty"]("decCallBackFun")&&null!=_0x306e37[_0x299711][_0x385276]["decCallBackFun"]&&_0x306e37[_0x299711][_0x385276]["decCallBackFun"](_0x5f4e1e)}},window["JSPlayM4_RunTimeInfoCallBack"]=function(_0x1223d3,_0x35689c,_0x1faa26,_0x3fca26){if(null!=_0x306e37[_0x3fca26][_0x1223d3]){var _0x3d5cf2=_0x4f3dd2["HEAP32"][_0x35689c>>2],_0x1d5d9e=_0x4f3dd2["HEAP32"][_0x35689c+4>>2],_0x45b61d=_0x4f3dd2["HEAP32"][_0x35689c+8>>2],_0x20bf89=_0x4f3dd2["HEAP32"][_0x35689c+12>>2],_0x1cda36=_0x1faa26;_0x306e37[_0x3fca26][_0x1223d3]["hasOwnProperty"]("runtimeCBFun")&&null!=_0x306e37[_0x3fca26][_0x1223d3]["runtimeCBFun"]&&_0x306e37[_0x3fca26][_0x1223d3]["runtimeCBFun"](_0x3d5cf2,_0x1d5d9e,_0x45b61d,_0x20bf89,_0x1cda36)}},window["JSPlayM4_FirstFrameCallBack"]=function(_0x267d05,_0x18d1e1){null!=_0x306e37[_0x18d1e1][_0x267d05]&&_0x306e37[_0x18d1e1][_0x267d05]["hasOwnProperty"]("FFCallBackFun")&&null!=_0x306e37[_0x18d1e1][_0x267d05]["FFCallBackFun"]&&null!=_0x306e37[_0x18d1e1][_0x267d05]["FFCallBackFun"]&&_0x306e37[_0x18d1e1][_0x267d05]["FFCallBackFun"]()},window["JSPlayM4_AudioPCMCallBack"]=function(_0x437dc7,_0x2ac002,_0x23e1db,_0x4e6b42){null!=_0x306e37[_0x4e6b42][_0x437dc7]&&_0x306e37[_0x4e6b42][_0x437dc7]["__proto__"]["hasOwnProperty"]("downloadAudioPCMData")&&_0x306e37[_0x4e6b42][_0x437dc7]["downloadAudioPCMData"](_0x2ac002)},window["JSPlayM4_RTPRawDataCallBack"]=function(_0x4e8d75,_0x3b94b0,_0x41f7a6){null!=_0x306e37[_0x41f7a6][port]&&_0x306e37[_0x41f7a6][port]["__proto__"]["hasOwnProperty"]("downloadRTPData")&&_0x306e37[_0x41f7a6][port]["downloadRTPData"](_0x4e8d75)};var _0x196b99=function(){function _0x3f9340(_0x2db2b8,_0x168456){for(var _0x794100=0;_0x794100<_0x168456["length"];_0x794100++){var _0x10266e=_0x168456[_0x794100];_0x10266e["enumerable"]=_0x10266e["enumerable"]||!1,_0x10266e["configurable"]=!0,"value"in _0x10266e&&(_0x10266e["writable"]=!0),Object["defineProperty"](_0x2db2b8,_0x10266e["key"],_0x10266e)}}return function(_0x262f49,_0x5f1471,_0xeaa845){return _0x5f1471&&_0x3f9340(_0x262f49["prototype"],_0x5f1471),_0xeaa845&&_0x3f9340(_0x262f49,_0xeaa845),_0x262f49}}(),_0x3fcd1e,_0x2f8090=(_0x3fcd1e=void 0,function(_0x88d17e){return _0x88d17e&&(_0x3fcd1e=_0x88d17e),_0x3fcd1e}),_0x1c463c=function(){function _0x26f81c(){if(function(_0x3ebecf,_0x398f19){if(!(_0x3ebecf instanceof _0x398f19))throw new TypeError("Cannot call a class as a function")}(this,_0x26f81c),_0x2f8090())return _0x2f8090();if(void 0!==_0x26f81c["unique"])return _0x26f81c["unique"];_0x26f81c["unique"]=this,this["oAudioContext"]=null,this["currentVolume"]=80,this["bSetVolume"]=!1,this["gainNode"]=null,this["iWndNum"]=-1,this["mVolumes"]=new Map;var _0x4a0347=window["AudioContext"]||window["webkitAudioContext"];this["oAudioContext"]=new _0x4a0347,this["writeString"]=function(_0x258288,_0x50cc1a,_0x357c17){for(var _0x2eccf8=0;_0x2eccf8<_0x357c17["length"];_0x2eccf8++)_0x258288["setUint8"](_0x50cc1a+_0x2eccf8,_0x357c17["charCodeAt"](_0x2eccf8))},this["setBufferToDataview"]=function(_0x47dca5,_0x42449b,_0x4ef426){for(var _0x367354=0;_0x367354<_0x4ef426["length"];_0x367354++,_0x42449b++)_0x47dca5["setUint8"](_0x42449b,_0x4ef426[_0x367354])},_0x2f8090(this)}return _0x196b99(_0x26f81c,[{key:"Play",value:function value(_0x44dc54,_0x3da828,_0x484e3b){var _0x9b1b8e=new ArrayBuffer(44+_0x3da828),_0x552073=new DataView(_0x9b1b8e),_0x57a4a4=_0x484e3b["samplesPerSec"],_0x276b0b=_0x484e3b["channels"],_0xadf9a4=_0x484e3b["bitsPerSample"];this["writeString"](_0x552073,0,"RIFF"),_0x552073["setUint32"](4,32+2*_0x3da828,!0),this["writeString"](_0x552073,8,"WAVE"),this["writeString"](_0x552073,12,"fmt "),_0x552073["setUint32"](16,16,!0),_0x552073["setUint16"](20,1,!0),_0x552073["setUint16"](22,_0x276b0b,!0),_0x552073["setUint32"](24,_0x57a4a4,!0),_0x552073["setUint32"](28,2*_0x57a4a4,!0),_0x552073["setUint16"](32,_0x276b0b*_0xadf9a4/8,!0),_0x552073["setUint16"](34,_0xadf9a4,!0),this["writeString"](_0x552073,36,"data"),_0x552073["setUint32"](40,_0x3da828,!0),this["setBufferToDataview"](_0x552073,44,_0x44dc54);var _0x4c294b=this;return this["oAudioContext"]["decodeAudioData"](_0x552073["buffer"],function(_0xe140cd){var _0x233397=_0x4c294b["oAudioContext"]["createBufferSource"]();if(null==_0x233397)return-1;_0x233397["buffer"]=_0xe140cd,_0x233397["start"](0),(null==_0x4c294b["gainNode"]||_0x4c294b["bSetVolume"])&&(_0x4c294b["gainNode"]=_0x4c294b["oAudioContext"]["createGain"](),_0x4c294b["bSetVolume"]=!1),_0x4c294b["gainNode"]["gain"]["value"]=_0x4c294b["currentVolume"]/100,_0x4c294b["gainNode"]["connect"](_0x4c294b["oAudioContext"]["destination"]),_0x233397["connect"](_0x4c294b["gainNode"])},function(_0x5a3864){return console["log"]("decode error"),-1}),0}},{key:"Stop",value:function value(){return null!=this["gainNode"]&&(this["gainNode"]["disconnect"](),this["gainNode"]=null),!0}},{key:"SetVolume",value:function value(_0x11e390){return this["bSetVolume"]=!0,this["currentVolume"]=_0x11e390,this["mVolumes"]["set"](this["iWndNum"],this["currentVolume"]),!0}},{key:"SetWndNum",value:function value(_0x4ee082){this["iWndNum"]=_0x4ee082;var _0x520a1e=this["mVolumes"]["get"](_0x4ee082);return null==_0x520a1e&&(_0x520a1e=80),this["currentVolume"]=_0x520a1e,!0}},{key:"GetVolume",value:function value(){var _0x2c42ae=this["mVolumes"]["get"](this["iWndNum"]);return null==_0x2c42ae&&(_0x2c42ae=80),_0x2c42ae}}]),_0x26f81c}(),_0x412818=16,_0x372d6b=31,_0x5618e2=25,_0x38866e=20480,_0x4129ea={width:0,height:0,frameNum:0,yuvData:null},_0x4650e9={width:0,height:0,frameNum:0,yuvData:null},_0x2d3990={sampleRate:0,channel:0,bitsPerSample:0,length:0,pcmData:null},_0x54acbb={id:null,cmd:null,data:null,errorCode:0,status:null},_0x233f81=function(){function _0x3c81d1(_0x2a64b8,_0x24973e,_0x1fb77a,_0x2d8b0e){if(_0x540ab2(this,_0x3c81d1),this["jsplayer"]=_0x2a64b8,null==_0x24973e||void 0===_0x24973e||"string"!=typeof _0x24973e)return 0;if(this["szBasePath"]=_0x24973e,!_0x1fb77a||"function"!=typeof _0x1fb77a)return 0;this["fnCallBack"]=_0x1fb77a,this["decodeWorker"]=null,this["streamOpenMode"]=null,this["bOpenStream"]=!1,this["audioRenderer"]=null,this["aAudioBuffer"]=[],this["iAudioBufferSize"]=0,this["Volume"]=0,this["oSuperRender"]=null,this["aVideoFrameBuffer"]=[],this["YUVBufferSize"]=1,this["szOSDTime"]=null,this["bJSPrintLog"]=!1,this["bWriteYUVData"]=!1,this["iYUV10size"]=0,this["aVideoYUVBuffer"]=[],this["bWritePCMData"]=!1,this["iAudioBuffer500Size"]=0,this["aAudioPCMBuffer"]=[],this["bWriteRawData"]=!1,this["iRawDataSize"]=0,this["aRawDataBuffer"]=[],this["bWriteRTPData"]=!0,this["iRTPDataSize"]=0,this["aRTPDataBuffer"]=[],this["downloadRTP"]=!1,this["rtpNum"]=0,this["bPlaySound"]=!1,this["bPlay"]=!1,this["bPause"]=!1,this["bOnebyOne"]=!1,this["bPlayRateChange"]=!1,this["audioNum"]=0,this["videoNum"]=0,this["FrameForwardLen"]=1,this["bOnlyPlaySound"]=!1,this["bVideoCropInfo"]=!1,this["dataCallBackFun"]=null,this["YUVBufSizeCBFun"]=null,this["DecCallBackFun"]=null,this["DisplayCallBackFun"]=null,this["PCMCallBackFun"]=null,this["DecInfoYUV"]=_0x4129ea,this["DisplayInfoYUV"]=_0x4650e9,this["DecInfoPCM"]=_0x2d3990,this["displayFrameInfo"]={},this["frameInfoFlag"]=!0,this["startTimeStamp"]=0,this["nWidth"]=0,this["nHeight"]=0,this["nSPSCropLeft"]=0,this["nSPSCropRight"]=0,this["nSPSCropTop"]=0,this["nSPSCropBottom"]=0,this["decCBStream"]=0,this["sCanvasId"]=null,this["aDisplayBuf"]=null,this["bVisibility"]=!0,this["nDecFrameType"]=0,this["runtimeInfoCBFun"]=null,this["firstFrameCB"]=null,this["needFirstFrameCB"]=!1,this["iCanvasWidth"]=0,this["iCanvasHeight"]=0,this["iZoomNum"]=0,this["iRatio_x"]=1,this["iRatio_y"]=1,this["stDisplayRect"]={top:0,left:0,right:0,bottom:0},this["bDisRect"]=!1,this["stYUVRect"]={top:0,left:0,right:0,bottom:0},this["aInputDataLens"]=[],this["aInputDataBuffer"]=[],this["bIsGetYUV"]=!1,this["bIsFirstFrame"]=!0,this["iInputMaxBufSize"]=5242880,this["bIsInput"]=!1,this["bIsInputBufOver"]=!1,this["bIsInputBufWillOver"]=!1,this["iInputDataLen"]=_0x38866e;var _0x1ae5c6=this;this["errorCode"]=1,this["loopNum"]=0,console["info"]("%c1>there will play by V1","color: green"),this["setCallBack"]=function(_0x1ba56a,_0x189593,_0x39352d,_0x27ffd7,_0x311624){var _0x399a92=_0x54acbb;_0x399a92["id"]=_0x2d8b0e,_0x399a92["cmd"]=_0x189593,_0x399a92["data"]=_0x39352d,_0x399a92["errorCode"]=_0x27ffd7,_0x399a92["status"]=_0x311624,_0x1ba56a["errorCode"]=_0x27ffd7,_0x1ba56a["fnCallBack"](_0x399a92)},this["convertErrorCode"]=function(_0x5aca6b){switch(_0x5aca6b){case 1:return 1;case 98:return 0;default:return _0x5aca6b}},this["arrayBufferCopy"]=function(_0x4a24d2){var _0x443d74=_0x4a24d2["byteLength"],_0x224481=new Uint8Array(_0x443d74),_0x496d1f=new Uint8Array(_0x4a24d2),_0x591864=0;for(_0x591864=0;_0x591864<_0x443d74;_0x591864++)_0x224481[_0x591864]=_0x496d1f[_0x591864];return _0x224481},this["inputDataFun"]=function(){var _0x1e4640,_0x339e6b=0;if(_0x1ae5c6["bIsGetYUV"]=!1,_0x1ae5c6["bIsInputBufOver"]||_0x1ae5c6["bIsInputBufWillOver"]){_0x1e4640=new Uint8Array(1);var _0x5af9fb={command:"InputData",data:new Uint8Array(_0x1e4640)["buffer"],dataSize:0};_0x1ae5c6["decodeWorker"]["postMessage"](_0x5af9fb,[_0x5af9fb["data"]])}else{if(_0x1ae5c6["bPlay"]&&(!_0x1ae5c6["bPause"]||_0x1ae5c6["bOnebyOne"])||this["bOnlyPlaySound"]){for(;_0x1ae5c6["aInputDataLens"]["length"]>0&&!((_0x339e6b+=_0x1ae5c6["aInputDataLens"]["shift"]())>_0x1ae5c6["iInputDataLen"]););_0x1e4640=_0x1ae5c6["aInputDataBuffer"]["splice"](0,_0x339e6b),_0x5af9fb={command:"InputData",data:new Uint8Array(_0x1e4640)["buffer"],dataSize:_0x339e6b},_0x1ae5c6["decodeWorker"]["postMessage"](_0x5af9fb,[_0x5af9fb["data"]])}}_0x1e4640=null},this["getPic"]=function(_0x4898df,_0x3866d0){if(null==this["decodeWorker"]||null==this["oSuperRender"])return 2;if(!this["bPlay"])return 2;if(!_0x4898df||"function"!=typeof _0x4898df)return 0;if(this["dataCallBackFun"]=_0x4898df,0===this["iZoomNum"])this["stYUVRect"]["left"]=0,this["stYUVRect"]["top"]=0,this["stYUVRect"]["right"]=0,this["stYUVRect"]["bottom"]=0;else{if(0===this["iCanvasWidth"]||0===this["iCanvasHeight"])this["stYUVRect"]["left"]=0,this["stYUVRect"]["top"]=0,this["stYUVRect"]["right"]=0,this["stYUVRect"]["bottom"]=0;else{var _0x17d1f4=this["nWidth"]/this["iCanvasWidth"],_0x46ccae=this["nHeight"]/this["iCanvasHeight"];this["stYUVRect"]["left"]=Math["round"](this["stDisplayRect"]["left"]*_0x17d1f4),this["stYUVRect"]["top"]=Math["round"](this["stDisplayRect"]["top"]*_0x46ccae),this["stYUVRect"]["right"]=Math["round"](this["stDisplayRect"]["right"]*_0x17d1f4),this["stYUVRect"]["bottom"]=Math["round"](this["stDisplayRect"]["bottom"]*_0x46ccae)}if(this["stYUVRect"]["right"]-this["stYUVRect"]["left"]<32||this["stYUVRect"]["bottom"]-this["stYUVRect"]["top"]<32)return 0}if(null==this["aDisplayBuf"])return 2;var _0x28a1ee={command:_0x3866d0,data:this["arrayBufferCopy"](this["aDisplayBuf"])["buffer"],width:this["nWidth"],height:this["nHeight"],rect:this["stYUVRect"]};return this["decodeWorker"]["postMessage"](_0x28a1ee,[_0x28a1ee["data"]]),1},this["createWorker"]=function(_0x28fe8d){if(window["Worker"]){if(null==_0x28fe8d["decodeWorker"]){var _0x408993=_0x28fe8d["szBasePath"]["substr"](0,_0x28fe8d["szBasePath"]["lastIndexOf"]("/")+1);if(_0x28fe8d["decodeWorker"]=new Worker(_0x408993+"DecodeWorker.js"),_0x28fe8d["bJSPrintLog"]&&console["log"](">>>JSPlayV1.1 createWorker success!"),null==_0x28fe8d["decodeWorker"])return 60}_0x28fe8d["decodeWorker"]["onmessage"]=function(_0x3c1560){var _0x5b21aa=null,_0x12ee68=_0x3c1560["data"];switch(_0x28fe8d["errorCode"]=_0x12ee68["errorCode"],_0x12ee68["function"]){case"printLog":console["log"]("print JSPlayerSDK log failed");break;case"loaded":_0x5b21aa="loaded",console["log"]("V1 Decoder.js loaded path:"+_0x28fe8d["szBasePath"]),_0x28fe8d["setCallBack"](_0x28fe8d,"loaded",0,0,!0);break;case"SetStreamOpenMode":_0x5b21aa="SetStreamOpenMode";break;case"OpenStream":if(_0x5b21aa="OpenStream",1===_0x12ee68["errorCode"])return void(_0x1ae5c6["bOpenStream"]=!0);break;case"InputData":_0x5b21aa="InputData",11===_0x12ee68["errorCode"]&&(_0x1ae5c6["bIsInputBufOver"]=!0,console["log"]("yff inputBuffer over set key frame \n"),1!=_0x1ae5c6["nDecFrameType"]&&_0x1ae5c6["PlayM4_SetDecodeFrameType"](1)),36===_0x12ee68["errorCode"]&&(_0x1ae5c6["bIsInputBufWillOver"]=!0),_0x12ee68["errorCode"]===_0x372d6b&&(_0x1ae5c6["bIsInputBufOver"]=!1,_0x1ae5c6["bIsInputBufWillOver"]=!1,_0x1ae5c6["aInputDataLens"]["length"]>0&&_0x1ae5c6["bIsInput"]?(_0x1ae5c6["inputDataFun"](),_0x1ae5c6["bIsInput"]=!1):_0x1ae5c6["bIsGetYUV"]=!0);break;case"GetFrameData":if(_0x5b21aa="GetFrameData",!_0x1ae5c6["bOnlyPlaySound"]){if(null!=_0x12ee68["data"]&&null!=_0x12ee68["frameInfo"])_0x12ee68["frameInfo"]["width"],_0x12ee68["frameInfo"]["height"];if(!_0x1ae5c6["bPlay"])return;if(_0x1ae5c6["errorCode"]=_0x12ee68["errorCode"],!(_0x1ae5c6["bIsFirstFrame"]||_0x12ee68["errorCode"]!==_0x372d6b&&35!==_0x12ee68["errorCode"])){_0x12ee68["errorCode"]===_0x372d6b&&(_0x1ae5c6["bIsInputBufOver"]=!1,_0x1ae5c6["bIsInputBufWillOver"]=!1),_0x1ae5c6["loopNum"]>5?(_0x1ae5c6["bIsGetYUV"]=!0,_0x1ae5c6["loopNum"]=0):(_0x1ae5c6["inputDataFun"](),_0x1ae5c6["loopNum"]++);break}_0x1ae5c6["bIsInputBufOver"]||_0x1ae5c6["bIsInputBufWillOver"]?_0x1ae5c6["inputDataFun"]():"videoType"===_0x12ee68["type"]&&(_0x1ae5c6["aInputDataLens"]["length"]>0&&_0x1ae5c6["bIsInput"]?(_0x1ae5c6["inputDataFun"](),_0x1ae5c6["bIsInput"]=!1):_0x1ae5c6["bIsGetYUV"]=!0,_0x1ae5c6["bIsFirstFrame"]=!1)}if(_0x1ae5c6["bVisibility"]&&1===_0x12ee68["errorCode"])switch(_0x12ee68["type"]){case"videoType":if(null==_0x12ee68["data"]||null==_0x12ee68["frameInfo"])return 0;null!=_0x1ae5c6["DecCallBackFun"]&&(_0x1ae5c6["DecInfoYUV"]["port"]=0,_0x1ae5c6["DecInfoYUV"]["iDataType"]=3,_0x1ae5c6["DecInfoYUV"]["height"]=_0x12ee68["frameInfo"]["height"],_0x1ae5c6["DecInfoYUV"]["width"]=_0x12ee68["frameInfo"]["width"],_0x1ae5c6["DecInfoYUV"]["isize"]=_0x12ee68["frameInfo"]["width"]*_0x12ee68["frameInfo"]["height"]*3/2,_0x1ae5c6["DecInfoYUV"]["Data"]=new Uint8Array(_0x12ee68["data"]),_0x1ae5c6["DecCallBackFun"](_0x1ae5c6["DecInfoYUV"])),_0x1ae5c6["bIsFirstFrame"]=!1,_0x28fe8d["nWidth"]=_0x12ee68["frameInfo"]["width"],_0x28fe8d["nHeight"]=_0x12ee68["frameInfo"]["height"],_0x28fe8d["nSPSCropLeft"]=_0x12ee68["frameInfo"]["cropLeft"],_0x28fe8d["nSPSCropRight"]=_0x12ee68["frameInfo"]["cropRight"],_0x28fe8d["nSPSCropTop"]=_0x12ee68["frameInfo"]["cropTop"],_0x28fe8d["nSPSCropBottom"]=_0x12ee68["frameInfo"]["cropBottom"],_0x28fe8d["timeStamp"]=_0x12ee68["frameInfo"]["timeStamp"];var _0xcd3ae7=new Object;if(_0xcd3ae7["data"]=_0x12ee68["data"],_0xcd3ae7["osdTime"]=_0x12ee68["frameInfo"],_0xcd3ae7["nWidth"]=_0x12ee68["frameInfo"]["width"],_0xcd3ae7["nHeight"]=_0x12ee68["frameInfo"]["height"],_0xcd3ae7["frameNum"]=_0x12ee68["frameInfo"]["frameNum"],_0xcd3ae7["timeStamp"]=_0x12ee68["frameInfo"]["timeStamp"],_0x28fe8d["bWriteYUVData"]){for(var _0x4fc76d=new Uint8Array(_0x12ee68["data"]),_0x2da27b=_0x28fe8d["aVideoYUVBuffer"]["length"],_0x3e93f7=0,_0x429c50=_0x4fc76d["length"];_0x3e93f7<_0x429c50;_0x3e93f7++)_0x28fe8d["aVideoYUVBuffer"][_0x2da27b+_0x3e93f7]=_0x4fc76d[_0x3e93f7];_0x28fe8d["iYUV10size"]++,_0x4fc76d=null}if(_0x28fe8d["bWriteYUVData"]&&_0x28fe8d["iYUV10size"]>=20){var _0x4cc0d9=new Uint8Array(_0x28fe8d["aVideoYUVBuffer"]);_0x28fe8d["downloadFile"](_0x4cc0d9,"videoYUV.data"),_0x28fe8d["aVideoYUVBuffer"]["splice"](0,_0x28fe8d["aVideoYUVBuffer"]["length"]),_0x28fe8d["bWriteYUVData"]=!1,_0x28fe8d["iYUV10size"]=0,_0x4cc0d9=null}if(_0x28fe8d["aVideoFrameBuffer"]["push"](_0xcd3ae7),_0xcd3ae7=null,_0x28fe8d["aVideoFrameBuffer"]["length"]>5&&(_0x28fe8d["bOnebyOne"]||_0x28fe8d["aVideoFrameBuffer"]["splice"](0,2)),_0x28fe8d["bOnebyOne"]&&_0x28fe8d["aVideoFrameBuffer"]["length"]>=15){_0x28fe8d["setCallBack"](_0x28fe8d,"OnebyOne",0,0,!1),_0x28fe8d["bIsFirstFrame"]=!0;break}break;case"audioType":if(_0x28fe8d["bPlaySound"]&&!_0x28fe8d["bPlayRateChange"]||_0x1ae5c6["bOnlyPlaySound"]){null!=_0x1ae5c6["PCMCallBackFun"]&&(_0x1ae5c6["DecInfoPCM"]["port"]=0,_0x1ae5c6["DecInfoPCM"]["SampleRate"]=_0x12ee68["frameInfo"]["samplesPerSec"],_0x1ae5c6["DecInfoPCM"]["channel"]=_0x12ee68["frameInfo"]["channels"],_0x1ae5c6["DecInfoPCM"]["bitsPerSample"]=_0x12ee68["frameInfo"]["bitsPerSample"],_0x1ae5c6["DecInfoPCM"]["iDataType"]=101,_0x1ae5c6["DecInfoPCM"]["Data"]=new Uint8Array(_0x12ee68["data"]),_0x1ae5c6["DecInfoPCM"]["isize"]=_0x1ae5c6["DecInfoPCM"]["Data"]["length"],_0x1ae5c6["PCMCallBackFun"](_0x1ae5c6["DecInfoPCM"]));for(_0x4fc76d=new Uint8Array(_0x12ee68["data"]),_0x2da27b=_0x28fe8d["aAudioBuffer"]["length"],_0x3e93f7=0,_0x429c50=_0x4fc76d["length"];_0x3e93f7<_0x429c50;_0x3e93f7++)_0x28fe8d["aAudioBuffer"][_0x2da27b+_0x3e93f7]=_0x4fc76d[_0x3e93f7];if(_0x28fe8d["iAudioBufferSize"]++,_0x4fc76d=null,_0x28fe8d["bWritePCMData"]){for(_0x4fc76d=new Uint8Array(_0x12ee68["data"]),_0x2da27b=_0x28fe8d["aAudioPCMBuffer"]["length"],_0x3e93f7=0,_0x429c50=_0x4fc76d["length"];_0x3e93f7<_0x429c50;_0x3e93f7++)_0x28fe8d["aAudioPCMBuffer"][_0x2da27b+_0x3e93f7]=_0x4fc76d[_0x3e93f7];console["log"]("audio_type num:"+_0x28fe8d["iAudioBuffer500Size"]+", len:"+_0x4fc76d["length"]),_0x28fe8d["iAudioBuffer500Size"]++,_0x4fc76d=null}if(_0x28fe8d["bWritePCMData"]&&_0x28fe8d["iAudioBuffer500Size"]>=100){var _0x2acfd2=new Uint8Array(_0x28fe8d["aAudioPCMBuffer"]);_0x28fe8d["downloadFile"](_0x2acfd2,"audioPCM.data"),_0x28fe8d["aAudioPCMBuffer"]["splice"](0,_0x28fe8d["aAudioPCMBuffer"]["length"]),_0x28fe8d["bWritePCMData"]=!1,_0x28fe8d["iAudioBuffer500Size"]=0,_0x2acfd2=null}_0x28fe8d["iAudioBufferSize"]>=_0x5618e2&&(_0x28fe8d["audioRenderer"]["Play"](_0x28fe8d["aAudioBuffer"],_0x28fe8d["aAudioBuffer"]["length"],_0x12ee68["frameInfo"]),_0x28fe8d["aAudioBuffer"]["splice"](0,_0x28fe8d["aAudioBuffer"]["length"]),_0x28fe8d["aAudioBuffer"]["length"]=0,_0x28fe8d["iAudioBufferSize"]=0)}}break;case"GetRawData":if(_0x5b21aa="GetRawData",_0x28fe8d["bWriteRawData"]){var _0x4d8ba8=new Uint8Array(_0x12ee68["data"]),_0x1ca258=_0x28fe8d["aRawDataBuffer"]["length"];for(_0x3e93f7=0,_0x429c50=_0x4d8ba8["length"];_0x3e93f7<_0x429c50;_0x3e93f7++)_0x28fe8d["aRawDataBuffer"][_0x1ca258+_0x3e93f7]=_0x4d8ba8[_0x3e93f7];_0x28fe8d["iRawDataSize"]++,_0x4d8ba8=null}if(_0x28fe8d["bWriteRawData"]&&_0x28fe8d["iRawDataSize"]>=100){var _0x10042d=new Uint8Array(_0x28fe8d["aRawDataBuffer"]);_0x28fe8d["downloadFile"](_0x10042d,"rawBuffer.data"),_0x28fe8d["aRawDataBuffer"]["splice"](0,_0x28fe8d["aRawDataBuffer"]["length"]),_0x28fe8d["bWriteRawData"]=!1,_0x28fe8d["iRawDataSize"]=0,_0x10042d=null}break;case"PlaySound":_0x5b21aa="PlaySound";break;case"GetJPEG":if(_0x5b21aa="GetJPEG",1!==_0x12ee68["errorCode"])return void console["log"]("GetJPEG ErrorParam");var _0x5eaa23=_0x12ee68["data"];_0x28fe8d["dataCallBackFun"](_0x5eaa23,_0x5eaa23["length"]);break;case"GetBMP":if(_0x5b21aa="GetBMP",1!==_0x12ee68["errorCode"])return void console["log"]("GetBMP ErrorParam");var _0x3c4122=_0x12ee68["data"];_0x28fe8d["dataCallBackFun"](_0x3c4122,_0x3c4122["length"]);break;case"RunTimeInfoCallBack":_0x5b21aa="RunTimeInfoCallBack";var _0xc4bb4f=_0x12ee68["nRunTimeModule"],_0x45c02b=_0x12ee68["nStrVersion"],_0x286cbb=_0x12ee68["nFrameTimeStamp"],_0x397dfd=_0x12ee68["nFrameNum"],_0x4032c6=_0x12ee68["nErrorCode"];null!=_0x28fe8d["runtimeInfoCBFun"]&&_0x28fe8d["runtimeInfoCBFun"](_0xc4bb4f,_0x45c02b,_0x286cbb,_0x397dfd,_0x4032c6)}"GetFrameData"!==_0x5b21aa&&"loaded"!==_0x5b21aa?_0x28fe8d["setCallBack"](_0x28fe8d,_0x5b21aa,0,_0x28fe8d["convertErrorCode"](_0x12ee68["errorCode"]),!0):_0x412818!==_0x12ee68["errorCode"]&&101!==_0x12ee68["errorCode"]&&100!==_0x12ee68["errorCode"]&&48!==_0x12ee68["errorCode"]||_0x28fe8d["setCallBack"](_0x28fe8d,_0x5b21aa,0,_0x28fe8d["convertErrorCode"](_0x12ee68["errorCode"]),!0)}}},this["createWorker"](_0x1ae5c6),this["draw"]=function(){if(_0x1ae5c6["bPlay"]){if(_0x1ae5c6["needFirstFrameCB"]&&null!=_0x1ae5c6["firstFrameCB"]&&(_0x1ae5c6["firstFrameCB"](),_0x1ae5c6["needFirstFrameCB"]=!1),!_0x1ae5c6["bPause"]||_0x1ae5c6["bOnebyOne"]){requestAnimationFrame(_0x1ae5c6["draw"]);var _0x14742b=_0x1ae5c6["aVideoFrameBuffer"]["length"];if(null!=_0x1ae5c6["YUVBufSizeCBFun"]&&_0x1ae5c6["YUVBufSizeCBFun"](_0x14742b),_0x1ae5c6["bOnebyOne"]){if(_0x14742b<=8&&_0x1ae5c6["setCallBack"](_0x1ae5c6,"OnebyOne",0,_0x372d6b,!0),_0x14742b<=_0x1ae5c6["FrameForwardLen"]+1)return void _0x1ae5c6["setCallBack"](_0x1ae5c6,"OnebyOne",0,_0x372d6b,!0);for(var _0x5c6852=_0x1ae5c6["FrameForwardLen"];_0x5c6852>1;){_0x1ae5c6["aVideoFrameBuffer"]["shift"](),_0x5c6852--}_0x1ae5c6["bOnebyOne"]=!1}if(_0x14742b>0){var _0x561af1=_0x1ae5c6["aVideoFrameBuffer"]["shift"](),_0x5cf797={};_0x5cf797["nCropLeft"]=_0x1ae5c6["nSPSCropLeft"],_0x5cf797["nCropRight"]=_0x1ae5c6["nSPSCropRight"],_0x5cf797["nCropTop"]=_0x1ae5c6["nSPSCropTop"],_0x5cf797["nCropBottom"]=_0x1ae5c6["nSPSCropBottom"],_0x5cf797["nCodeWidth"]=_0x561af1["nWidth"],_0x5cf797["nCodeHeight"]=_0x561af1["nHeight"],_0x1ae5c6["aDisplayBuf"]=_0x561af1["data"];var _0x47807d=new Uint8Array(_0x1ae5c6["aDisplayBuf"]);_0x1ae5c6["bVideoCropInfo"]?_0x1ae5c6["oSuperRender"]["DisplayFrame"](_0x47807d,_0x561af1["nWidth"]-_0x1ae5c6["nSPSCropLeft"]-_0x1ae5c6["nSPSCropRight"],_0x561af1["nHeight"]-_0x1ae5c6["nSPSCropTop"]-_0x1ae5c6["nSPSCropBottom"],_0x561af1["timeStamp"],_0x5cf797,null):_0x1ae5c6["oSuperRender"]["DisplayFrame"](_0x47807d,_0x561af1["nWidth"],_0x561af1["nHeight"],_0x561af1["timeStamp"],_0x5cf797,null),null!=_0x1ae5c6["DisplayCallBackFun"]&&(_0x1ae5c6["DisplayInfoYUV"]["height"]=_0x561af1["nHeight"],_0x1ae5c6["DisplayInfoYUV"]["width"]=_0x561af1["nWidth"],_0x1ae5c6["DisplayInfoYUV"]["iSize"]=_0x1ae5c6["DisplayInfoYUV"]["height"]*_0x1ae5c6["DisplayInfoYUV"]["width"]*3/2,_0x1ae5c6["DisplayInfoYUV"]["frameNum"]=_0x561af1["frameNum"],_0x1ae5c6["DisplayInfoYUV"]["timeStamp"]=_0x561af1["timeStamp"],_0x1ae5c6["DisplayInfoYUV"]["yuvData"]=new Uint8Array(_0x47807d),_0x1ae5c6["DisplayCallBackFun"](_0x1ae5c6["DisplayInfoYUV"])),_0x1ae5c6["frameInfoFlag"]&&(_0x1ae5c6["displayFrameInfo"]["codecType"]=0,_0x1ae5c6["displayFrameInfo"]["frameType"]=0,_0x1ae5c6["displayFrameInfo"]["frameSize"]=0,_0x1ae5c6["displayFrameInfo"]["width"]=_0x561af1["nWidth"],_0x1ae5c6["displayFrameInfo"]["height"]=_0x561af1["nHeight"],_0x1ae5c6["displayFrameInfo"]["timeStamp"]=_0x561af1["timeStamp"],_0x1ae5c6["displayFrameInfo"]["frameRate"]=0,_0x1ae5c6["displayFrameInfo"]["frameNum"]=_0x561af1["frameNum"],_0x1ae5c6["displayFrameInfo"]["interlace"]=0,_0x1ae5c6["displayFrameInfo"]["streamEnd"]=0,_0x1ae5c6["displayFrameInfo"]["cropLeft"]=_0x1ae5c6["nSPSCropLeft"],_0x1ae5c6["displayFrameInfo"]["cropRight"]=_0x1ae5c6["nSPSCropRight"],_0x1ae5c6["displayFrameInfo"]["cropTop"]=_0x1ae5c6["nSPSCropTop"],_0x1ae5c6["displayFrameInfo"]["cropBottom"]=_0x1ae5c6["nSPSCropBottom"],_0x1ae5c6["displayFrameInfo"]["year"]=_0x561af1["osdTime"]["year"],_0x1ae5c6["displayFrameInfo"]["month"]=_0x561af1["osdTime"]["month"],_0x1ae5c6["displayFrameInfo"]["week"]=0,_0x1ae5c6["displayFrameInfo"]["day"]=_0x561af1["osdTime"]["day"],_0x1ae5c6["displayFrameInfo"]["hour"]=_0x561af1["osdTime"]["hour"],_0x1ae5c6["displayFrameInfo"]["minute"]=_0x561af1["osdTime"]["minute"],_0x1ae5c6["displayFrameInfo"]["second"]=_0x561af1["osdTime"]["second"],_0x1ae5c6["displayFrameInfo"]["milliseconds"]=_0x561af1["osdTime"]["misecond"]),0==_0x1ae5c6["startTimeStamp"]&&(_0x1ae5c6["startTimeStamp"]=_0x561af1["timeStamp"]),_0x47807d=null;var _0xe7016d=_0x561af1["osdTime"]["year"],_0x57dc23=_0x561af1["osdTime"]["month"],_0xdbfce1=_0x561af1["osdTime"]["day"],_0x226787=_0x561af1["osdTime"]["hour"],_0x194192=_0x561af1["osdTime"]["minute"],_0x40266e=_0x561af1["osdTime"]["second"];_0x1ae5c6["szOSDTime"]=_0xe7016d+"-"+_0x57dc23+"-"+_0xdbfce1+" "+_0x226787+":"+_0x194192+":"+_0x40266e,_0x561af1=null}else _0x1ae5c6["setCallBack"](_0x1ae5c6,"Play",0,_0x372d6b,!0)}}else _0x1ae5c6["bPlay"]||(_0x1ae5c6["aVideoFrameBuffer"]["splice"](0,_0x1ae5c6["aVideoFrameBuffer"]["length"]),_0x1ae5c6["aAudioBuffer"]["splice"](0,_0x1ae5c6["aAudioBuffer"]["length"]))}}return _0x132bfb(_0x3c81d1,[{key:"PlayM4_SetCurrentFrameNum",value:function value(_0x26040a,_0x329697){return _0x412818}},{key:"PlayM4_OpenPlayerSDKPrintLog",value:function value(_0x1dae42){return!0===_0x1dae42?(this["bJSPrintLog"]=!0,this["decodeWorker"]["postMessage"]({command:"printLog",data:_0x1dae42})):(this["bJSPrintLog"]=!1,this["decodeWorker"]["postMessage"]({command:"printLog",data:_0x1dae42})),1}},{key:"PlayM4_DownloadYUVdata",value:function value(){return this["bWriteYUVData"]=!0,1}},{key:"PlayM4_DownloadPCMdata",value:function value(){return this["bWritePCMData"]=!0,1}},{key:"PlayM4_SetDecCallBack",value:function value(_0x3a7a44,_0x18e9b7){return _0x3a7a44?(1==this["decCBStream"]&&(this["DecCallBackFun"]=_0x18e9b7),2==this["decCBStream"]&&(this["PCMCallBackFun"]=_0x18e9b7),3==this["decCBStream"]&&(this["PCMCallBackFun"]=_0x18e9b7,this["DecCallBackFun"]=_0x18e9b7)):(1==this["decCBStream"]&&(this["DecCallBackFun"]=null),2==this["decCBStream"]&&(this["PCMCallBackFun"]=null),3==this["decCBStream"]&&(this["PCMCallBackFun"]=null,this["DecCallBackFun"]=null)),1}},{key:"PlayM4_SetDisplayCallBack",value:function value(_0x44c4d2){return _0x44c4d2&&"function"==typeof _0x44c4d2?(this["DisplayCallBackFun"]=_0x44c4d2,1):0}},{key:"PlayM4_SetPCMCallBack",value:function value(_0x205c30){return _0x205c30&&"function"==typeof _0x205c30?(this["PCMCallBackFun"]=_0x205c30,1):0}},{key:"PlayM4_SetStreamOpenMode",value:function value(_0x901ffe){return null==_0x901ffe||void 0===_0x901ffe||0!==_0x901ffe&&1!==_0x901ffe?0:(this["streamOpenMode"]=_0x901ffe,1)}},{key:"PlayM4_DownloadRTPData",value:function value(_0x4501f8){this["downloadRTP"]=_0x4501f8}},{key:"PlayM4_SetVideoCropInfo",value:function value(_0x99b93d){return null==_0x99b93d||void 0===_0x99b93d||"boolean"!=typeof _0x99b93d?0:(this["bVideoCropInfo"]=_0x99b93d,1)}},{key:"PlayM4_OpenStream",value:function value(_0x13bb16,_0x185782,_0x365995){return this["bJSPrintLog"]&&console["log"](">>>JS PlayM4_OpenStream nSysTime:"+((new Date)["getMonth"]()+1)+"-"+(new Date)["getDate"]()+" "+(new Date)["getHours"]()+":"+(new Date)["getMinutes"]()+":"+(new Date)["getSeconds"]()+"."+(new Date)["getMilliseconds"]()),null==this["decodeWorker"]?2:null==_0x13bb16||_0x185782<=0||_0x365995<=0?0:(this["bPlay"]=!1,this["bPause"]=!1,this["bOnebyOne"]=!1,this["bIsFirstFrame"]=!0,this["bIsGetYUV"]=!1,this["bIsInput"]=!1,4===_0x13bb16[8]&&0===_0x13bb16[9]?this["streamOpenMode"]=0:this["streamOpenMode"]=1,this["decodeWorker"]["postMessage"]({command:"SetStreamOpenMode",data:this["streamOpenMode"]}),this["decodeWorker"]["postMessage"]({command:"OpenStream",data:_0x13bb16,dataSize:_0x185782,bufPoolSize:_0x365995}),this["bOpenStream"]=!0,1)}},{key:"PlayM4_CloseStream",value:function value(){return null===this["decodeWorker"]?1:null===this["decodeWorker"]||!1===this["bOpenStream"]?2:(this["bOnlyPlaySound"]=!1,this["decodeWorker"]["postMessage"]({command:"CloseStream"}),null!==this["oSuperRender"]&&(this["oSuperRender"]["ReleaseDisplay"](),this["oSuperRender"]=null),null!==this["audioRenderer"]&&(this["audioRenderer"]["Stop"](),this["audioRenderer"]=null),this["aAudioBuffer"]["splice"](0,this["aAudioBuffer"]["length"]),this["aVideoFrameBuffer"]["splice"](0,this["aVideoFrameBuffer"]["length"]),this["aInputDataBuffer"]["splice"](0,this["aInputDataBuffer"]["length"]),this["aInputDataLens"]["splice"](0,this["aInputDataLens"]["length"]),this["aVideoYUVBuffer"]["splice"](0,this["aVideoYUVBuffer"]["length"]),this["aAudioPCMBuffer"]["splice"](0,this["aAudioPCMBuffer"]["length"]),this["aRawDataBuffer"]["splice"](0,this["aRawDataBuffer"]["length"]),this["bOpenStream"]=!1,this["iAudioBufferSize"]=0,this["szOSDTime"]=null,this["startTimeStamp"],1)}},{key:"PlayM4_Destroy",value:function value(){return null===this["decodeWorker"]||(this["PlayM4_CloseStream"](),this["decodeWorker"]["terminate"](),this["decodeWorker"]=null),1}},{key:"PlayM4_FreePort",value:function value(){return this["decodeWorker"]["terminate"](),this["decodeWorker"]=null,1}},{key:"PlayM4_InputData",value:function value(_0x5058b4,_0x90d134){var _0x452961=this["aInputDataBuffer"]["length"];if(4===_0x90d134){var _0x170812=new Uint8Array(_0x5058b4["buffer"]);if(1===_0x170812[0]&&2===_0x170812[1]&&3===_0x170812[2]&&4===_0x170812[3])return this["bIsFirstFrame"]||this["bIsGetYUV"]?this["inputDataFun"]():this["bIsInput"]=!0,_0x170812=null,1}if(_0x452961+_0x90d134>this["iInputMaxBufSize"])return console["log"]("input over"),this["bIsGetYUV"]?this["inputDataFun"]():this["bIsInput"]=!0,11;var _0x501f99=null,_0x2edd06=_0x90d134;switch(this["streamOpenMode"]){case 1:_0x501f99=new Uint8Array(_0x5058b4["buffer"]),this["aInputDataLens"]["push"](_0x90d134);break;case 0:_0x2edd06=_0x90d134+4;var _0x13570f=new Uint32Array([_0x90d134]),_0x2d4d25=new Uint8Array(_0x13570f["buffer"]);(_0x501f99=new Uint8Array(_0x2edd06))["set"](_0x2d4d25,0),_0x501f99["set"](_0x5058b4,4),_0x13570f=null,_0x2d4d25=null,this["aInputDataLens"]["push"](_0x90d134+4);break;default:return _0x412818}for(var _0x11bbb8=0;_0x11bbb8<_0x2edd06;_0x11bbb8++)this["aInputDataBuffer"][_0x452961+_0x11bbb8]=_0x501f99[_0x11bbb8];return!this["bPlay"]&&!this["bOnlyPlaySound"]||null===this["decodeWorker"]||!1===this["bOpenStream"]||(_0x501f99=null,this["bOnlyPlaySound"]||this["bIsFirstFrame"]||this["bIsGetYUV"]?this["inputDataFun"]():this["bIsInput"]=!0),1}},{key:"PlayM4_Play",value:function value(_0x2d7669){if(null===this["decodeWorker"])return 2;if(this["bJSPrintLog"]&&console["log"](">>>JS PlayM4_Play canvasID: "+_0x2d7669),null===_0x2d7669)this["bOnlyPlaySound"]=!0,this["decodeWorker"]["postMessage"]({command:"OnlyPlaySound"}),this["sCanvasId"]=null;else{if("string"!=typeof _0x2d7669)return 0;if(this["bOnebyOne"]&&(this["bPlayRateChange"]=!1,this["bOnebyOne"]=!1,this["bPause"]=!1,this["draw"]()),this["bPlay"])return 1;if(null==this["oSuperRender"]&&(this["canvasCnv"]=document["getElementById"](_0x2d7669),this["oSuperRender"]=new _0x57d214,this["oSuperRender"]["InitDisplay"](this["canvasCnv"],"webgl",1),null==this["oSuperRender"]))return 61;this["sCanvasId"]=_0x2d7669,this["bPlay"]=!0,this["bPause"]=!1,this["bOnebyOne"]=!1,this["bPlayRateChange"]=!1,this["bOnlyPlaySound"]=!1,this["draw"]()}return null==this["audioRenderer"]&&(this["audioRenderer"]=new _0x1c463c,null==this["audioRenderer"])?61:(this["decodeWorker"]["postMessage"]({command:"Play"}),1)}},{key:"PlayM4_Stop",value:function value(_0x35bd92){if(!0===this["bJSPrintLog"]&&console["log"](">>>>yff1020>>>>> V1 PlayM4_Stop"),null==this["decodeWorker"]||null==this["oSuperRender"])return 2;if(!this["bPlay"])return 2;this["bPlaySound"]&&(this["PlayM4_StopSound"](),this["bPlaySound"]=!0),this["bPlay"]=!1,this["bOnebyOne"]=!1,this["bPause"]=!1,this["oSuperRender"]["SetDisplayRect"](0,0,this["nWidth"],this["nHeight"]),this["iZoomNum"]=0,this["bDisRect"]=!1;var _0x101428={};_0x101428["nCropLeft"]=this["nSPSCropLeft"],_0x101428["nCropRight"]=this["nSPSCropRight"],_0x101428["nCropTop"]=this["nSPSCropTop"],_0x101428["nCropBottom"]=this["nSPSCropBottom"],_0x101428["nCodeWidth"]=this["nWidth"],_0x101428["nCodeHeight"]=this["nHeight"],this["bVideoCropInfo"]?this["oSuperRender"]["DisplayFrame"](null,this["nWidth"]-this["nSPSCropLeft"]-this["nSPSCropRight"],this["nHeight"]-this["nSPSCropTop"]-this["nSPSCropBottom"],this["timeStamp"],_0x101428,null):this["oSuperRender"]["DisplayFrame"](null,this["nWidth"],this["nHeight"],this["timeStamp"],_0x101428,null);var _0x4a5273=document["getElementById"](this["sCanvasId"]);return _0x4a5273&&(this["clonedCanvas"]=_0x4a5273["cloneNode"](!0),this["clonedCanvasParentNode"]=_0x4a5273["parentNode"],this["clonedCanvasParentNode"]["replaceChild"](this["clonedCanvas"],_0x4a5273)),1}},{key:"PlayM4_PlayRate",value:function value(_0x11635f){return null==this["decodeWorker"]?2:(this["bPlayRateChange"]=1!==_0x11635f,_0x11635f<1&&(_0x11635f=1),this["iInputDataLen"]=_0x11635f*_0x38866e,this["decodeWorker"]["postMessage"]({command:"PlayRate",playRate:_0x11635f}),1)}},{key:"PlayM4_Pause",value:function value(_0x3be321){return null==this["decodeWorker"]||null==this["oSuperRender"]?2:this["bPlay"]?this["bOnebyOne"]||this["bPause"]==_0x3be321?2:(this["bPause"]=_0x3be321,this["bIsFirstFrame"]=!0,_0x3be321?this["bPlaySound"]&&(this["PlayM4_StopSound"](),this["bPlaySound"]=!0):(this["bPlaySound"]&&this["PlayM4_PlaySound"](),this["draw"]()),1):2}},{key:"PlayM4_OneByOne",value:function value(_0x57d188){return null==this["decodeWorker"]||null==this["oSuperRender"]?2:this["bPlay"]?_0x57d188>10||_0x57d188<=0?0:(_0x57d188||(_0x57d188=1),this["iInputDataLen"]=_0x38866e,this["FrameForwardLen"]=_0x57d188,this["bPause"]=!0,this["bOnebyOne"]=!0,this["bIsFirstFrame"]=!0,this["draw"](),1):2}},{key:"PlayM4_PlaySound",value:function value(_0x58448e){return null===this["decodeWorker"]||!1===this["bOpenStream"]?2:_0x58448e<0||_0x58448e>16?0:null==this["audioRenderer"]&&(this["audioRenderer"]=new _0x1c463c,null==this["audioRenderer"])?61:(this["decodeWorker"]["postMessage"]({command:"PlaySound"}),this["audioRenderer"]["SetWndNum"](_0x58448e),0!==this["Volume"]&&this["audioRenderer"]["SetVolume"](this["Volume"]),this["audioRenderer"]["oAudioContext"]["resume"](),this["bPlaySound"]=!0,1)}},{key:"PlayM4_StopSound",value:function value(){return null==this["decodeWorker"]||null==this["audioRenderer"]?2:this["bPlaySound"]?(this["decodeWorker"]["postMessage"]({command:"StopSound"}),this["bPlaySound"]=!1,1):2}},{key:"PlayM4_SetDisplayBuf",value:function value(_0x50b73c){return null==this["decodeWorker"]?2:_0x50b73c<=0?0:(this["YUVBufferSize"]=_0x50b73c,1)}},{key:"PlayM4_SetSecretKey",value:function value(_0x1ce37f,_0x5930a4,_0x4bf5d5){if(null==this["decodeWorker"]||!1===this["bOpenStream"])return 2;if(null==_0x5930a4)return 0;if(1===_0x1ce37f){if(128!==_0x4bf5d5)return 0;if(null==_0x5930a4||void 0===_0x5930a4)return 0}else{if(0!==_0x1ce37f)return 0}return this["decodeWorker"]["postMessage"]({command:"SetSecretKey",data:_0x5930a4,nKeyType:_0x1ce37f,nKeyLen:_0x4bf5d5}),1}},{key:"PlayM4_SetDecodeFrameType",value:function value(_0x245710){return console["log"]("PlayM4_SetDecodeFrameType nFrameType:"+_0x245710),null==this["decodeWorker"]||null==this["oSuperRender"]?2:0!==_0x245710&&1!==_0x245710?0:(this["bJSPrintLog"]&&console["log"](">>>JS PlayM4_SetDecodeFrameType :"+_0x245710),this["nDecFrameType"]=_0x245710,this["decodeWorker"]["postMessage"]({command:"SetDecodeFrameType",data:_0x245710}),1)}},{key:"PlayM4_SetIFrameDecInterval",value:function value(_0x1b86d2){return 1!==this["nDecFrameType"]?2:_0x1b86d2<0?0:(this["decodeWorker"]["postMessage"]({command:"SetIFrameDecInterval",data:_0x1b86d2}),1)}},{key:"PlayM4_SetLostFrameMode",value:function value(_0xfb7758){return _0xfb7758<0||_0xfb7758>1?0:(this["decodeWorker"]["postMessage"]({command:"SetLostFrameMode",data:_0xfb7758}),1)}},{key:"PlayM4_SetDisplayRegion",value:function value(_0xedf08e,_0x2ed835,_0x15da5f){if(!0===this["bJSPrintLog"]&&console["log"](">>>>yff1020>>>>> PlayM4_SetDisplayRegion left:"+_0xedf08e["left"]+",top:"+_0xedf08e["top"]+",right:"+_0xedf08e["right"]+",bottom:"+_0xedf08e["bottom"]),null===this["decodeWorker"]||!1===this["bPlay"]||null===this["oSuperRender"])return 2;if(null===this["canvasId"])return 2;if(!0===_0x2ed835){if(null==_0xedf08e)return 0;if("number"!=typeof _0xedf08e["left"]||"number"!=typeof _0xedf08e["top"]||"number"!=typeof _0xedf08e["right"]||"number"!=typeof _0xedf08e["bottom"])return 0;if(_0xedf08e["right"]<0||_0xedf08e["left"]<0||_0xedf08e["top"]<0||_0xedf08e["bottom"]<0)return 0;var _0x1a4269=_0xedf08e["left"],_0x2e9904=_0xedf08e["right"],_0x51c103=_0xedf08e["top"],_0x3241aa=_0xedf08e["bottom"],_0x394c1b=document["getElementById"](this["sCanvasId"])["getBoundingClientRect"]();if(this["iCanvasWidth"]=_0x394c1b["width"],this["iCanvasHeight"]=_0x394c1b["height"],_0x2e9904-_0x1a4269<16||_0x3241aa-_0x51c103<16||_0x2e9904-_0x1a4269>this["iCanvasWidth"]||_0x3241aa-_0x51c103>this["iCanvasHeight"])return 0;0!==this["iZoomNum"]&&(_0x1a4269=Math["round"](_0x1a4269/this["iRatio_x"])+this["stDisplayRect"]["left"],_0x51c103=Math["round"](_0x51c103/this["iRatio_y"])+this["stDisplayRect"]["top"],_0x2e9904=Math["round"](_0x2e9904/this["iRatio_x"])+this["stDisplayRect"]["left"],_0x3241aa=Math["round"](_0x3241aa/this["iRatio_y"])+this["stDisplayRect"]["top"]),this["stDisplayRect"]={top:_0x51c103,left:_0x1a4269,right:_0x2e9904,bottom:_0x3241aa};var _0x53b7ff=_0x3241aa/this["iCanvasHeight"]*this["nHeight"],_0x300b79=_0x1a4269/this["iCanvasWidth"]*this["nWidth"],_0x5c002f=_0x2e9904/this["iCanvasWidth"]*this["nWidth"],_0x57c2c6=_0x51c103/this["iCanvasHeight"]*this["nHeight"];this["oSuperRender"]["SetDisplayRect"](_0x300b79,_0x57c2c6,_0x5c002f-_0x300b79,_0x53b7ff-_0x57c2c6),this["bDisRect"]=!0;var _0x26037a=_0x2e9904-_0x1a4269,_0x2eefe4=_0x3241aa-_0x51c103;this["iRatio_x"]=this["iCanvasWidth"]/_0x26037a,this["iRatio_y"]=this["iCanvasHeight"]/_0x2eefe4,_0x15da5f&&this["iZoomNum"]++}else this["oSuperRender"]["SetDisplayRect"](0,0,this["nWidth"],this["nHeight"]),this["iZoomNum"]=0,this["bDisRect"]=!1;if(this["bPause"]||this["bOnebyOne"]||this["bPlayRateChange"]){var _0xca87f4={};_0xca87f4["nCropLeft"]=this["nSPSCropLeft"],_0xca87f4["nCropRight"]=this["nSPSCropRight"],_0xca87f4["nCropTop"]=this["nSPSCropTop"],_0xca87f4["nCropBottom"]=this["nSPSCropBottom"],_0xca87f4["nCodeWidth"]=this["nWidth"],_0xca87f4["nCodeHeight"]=this["nHeight"],this["bVideoCropInfo"]?this["oSuperRender"]["DisplayFrame"](new Uint8Array(this["aDisplayBuf"]),this["nWidth"]-this["nSPSCropLeft"]-this["nSPSCropRight"],this["nHeight"]-this["nSPSCropTop"]-this["nSPSCropBottom"],this["timeStamp"],_0xca87f4,null):this["oSuperRender"]["DisplayFrame"](new Uint8Array(this["aDisplayBuf"]),this["nWidth"],this["nHeight"],this["timeStamp"],_0xca87f4,null)}return 1}},{key:"PlayM4_GetBMP",value:function value(_0x33c834){return this["getPic"](_0x33c834,"GetBMP")}},{key:"PlayM4_GetJPEG",value:function value(_0x39dd7a){return this["getPic"](_0x39dd7a,"GetJPEG")}},{key:"PlayM4_SetVolume",value:function value(_0x1832ad){return null==this["decodeWorker"]||null==this["audioRenderer"]?2:_0x1832ad<0||_0x1832ad>100||""===_0x1832ad?0:(this["Volume"]=_0x1832ad,this["audioRenderer"]["SetVolume"](_0x1832ad),1)}},{key:"PlayM4_GetVolume",value:function value(_0x461bf8){if(null==this["decodeWorker"])return 2;if(null==this["audioRenderer"])return 2;if(_0x461bf8&&"function"==typeof _0x461bf8){var _0x7b20d0=this["audioRenderer"]["GetVolume"]();return null===_0x7b20d0?63:(_0x461bf8(_0x7b20d0),1)}return 0}},{key:"PlayM4_GetOSDTime",value:function value(_0x2452ba){return null==this["decodeWorker"]?2:this["bPlay"]?_0x2452ba&&"function"==typeof _0x2452ba?(_0x2452ba(this["szOSDTime"]),1):0:2}},{key:"PlayM4_SetFrameInfoCallBack",value:function value(_0x36a8d4){return this["frameInfoFlag"]=!!_0x36a8d4,1}},{key:"PlayM4_GetFrameInfo",value:function value(){return this["displayFrameInfo"]}},{key:"PlayM4_IsVisible",value:function value(_0x3e0667){return this["bVisibility"]=_0x3e0667,1}},{key:"PlayM4_GetSdkVersion",value:function value(){return"07040006"}},{key:"PlayM4_GetBuildDate",value:function value(){return"20230810"}},{key:"PlayM4_GetInputBufSize",value:function value(){return this["aInputDataBuffer"]["length"]}},{key:"PlayM4_SetInputBufSize",value:function value(_0x2f474c){return _0x2f474c>0?(this["iInputMaxBufSize"]=_0x2f474c,console["log"](">>JSBufferSize SetInputBufSize:"+this["iInputMaxBufSize"]),1):0}},{key:"PlayM4_GetYUVBufSize",value:function value(){return this["aVideoFrameBuffer"]["length"]}},{key:"PlayM4_GetFrameResolution",value:function value(_0x1ddea9){return null==this["decodeWorker"]?2:_0x1ddea9&&"function"==typeof _0x1ddea9?(_0x1ddea9(this["nWidth"],this["nHeight"]),1):0}},{key:"PlayM4_RegisterYUVBufSizeCB",value:function value(_0x3cb37f){return _0x3cb37f&&"function"==typeof _0x3cb37f?(this["YUVBufSizeCBFun"]=_0x3cb37f,1):0}},{key:"PlayM4_UnRegisterYUVBufSizeCB",value:function value(){return null!=this["YUVBufSizeCBFun"]&&(this["YUVBufSizeCBFun"]=null),1}},{key:"PlayM4_ClearCanvas",value:function value(){if(null==this["oSuperRender"])return 2;var _0x24ae28={};return _0x24ae28["nCropLeft"]=this["nSPSCropLeft"],_0x24ae28["nCropRight"]=this["nSPSCropRight"],_0x24ae28["nCropTop"]=this["nSPSCropTop"],_0x24ae28["nCropBottom"]=this["nSPSCropBottom"],_0x24ae28["nCodeWidth"]=this["nWidth"],_0x24ae28["nCodeHeight"]=this["nHeight"],this["bVideoCropInfo"]?this["oSuperRender"]["DisplayFrame"](null,this["nWidth"]-this["nSPSCropLeft"]-this["nSPSCropRight"],this["nHeight"]-this["nSPSCropTop"]-this["nSPSCropBottom"],this["timeStamp"],_0x24ae28,null):this["oSuperRender"]["DisplayFrame"](null,this["nWidth"],this["nHeight"],this["timeStamp"],_0x24ae28,null),1}},{key:"PlayM4_ReleaseInputBuffer",value:function value(){return null===this["aInputDataBuffer"]?2:(this["aInputDataBuffer"]["splice"](0,this["aInputDataBuffer"]["length"]),this["aInputDataLens"]["splice"](0,this["aInputDataLens"]["length"]),1)}},{key:"PlayM4_GetDecodeFrameType",value:function value(){return this["nDecFrameType"]}},{key:"PlayM4_SetRunTimeInfoCallBackEx",value:function value(_0x1d29d9,_0x45760c){return this["runtimeInfoCBFun"]=_0x45760c,null==this["decodeWorker"]?2:(this["decodeWorker"]["postMessage"]({command:"SetRunTimeInfoCB",nModuleType:_0x1d29d9}),1)}},{key:"PlayM4_SetDemuxModel",value:function value(_0x547c5e,_0x409a5b){return null==this["decodeWorker"]?2:(this["decodeWorker"]["postMessage"]({command:"SetDemuxModel",nIdemuxType:_0x547c5e,bTrue:_0x409a5b}),1)}},{key:"PlayM4_SkipErrorData",value:function value(_0x515f27){return null==this["decodeWorker"]?2:(this["decodeWorker"]["postMessage"]({command:"SkipErrorData",bSkip:_0x515f27}),1)}},{key:"PlayM4_SetDecodeERC",value:function value(_0x4e2af3){return null==this["decodeWorker"]?2:(this["decodeWorker"]["postMessage"]({command:"SetDecodeERC",nLevel:_0x4e2af3}),1)}},{key:"PlayM4_SetANRParam",value:function value(_0x1c88e9,_0x5bf669){return null==this["decodeWorker"]?2:(this["decodeWorker"]["postMessage"]({command:"SetANRParam",nEnable:_0x1c88e9,nANRLevel:_0x5bf669}),1)}},{key:"PlayM4_SetResampleValue",value:function value(_0x9eb5e9,_0x516d9d){return null==this["decodeWorker"]?2:(this["decodeWorker"]["postMessage"]({command:"SetResampleValue",nEnable:_0x9eb5e9,resampleValue:_0x516d9d}),1)}},{key:"PlayM4_SetGlobalBaseTime",value:function value(_0x7d0994,_0x330748,_0x2e255f,_0x41e77f,_0x523ba7,_0x3460fa,_0x411981){return null==this["decodeWorker"]?2:_0x7d0994<2e3||_0x7d0994>3e3||_0x330748<1||_0x330748>12||_0x7d0994<0||_0x330748<0||_0x2e255f<0||_0x41e77f<0||_0x523ba7<0||_0x3460fa<0||_0x411981<0?_0x412818:(this["decodeWorker"]["postMessage"]({command:"SetGlobalBaseTime",year:_0x7d0994,month:_0x330748,day:_0x2e255f,hour:_0x41e77f,min:_0x523ba7,sec:_0x3460fa,ms:_0x411981}),1)}},{key:"PlayM4_SetAudioDisplayBuf",value:function value(_0x54629b){return _0x5618e2=_0x54629b,1}},{key:"PlayM4_GetCanvasCapture",value:function value(_0x35882c){return null!=this["oSuperRender"]?this["oSuperRender"]["GetCanvasData"](_0x35882c):1}},{key:"PlayM4_SetFirstFrameCallBack",value:function value(_0x41411a,_0x1dec50){return null!=_0x1dec50&&"function"!=typeof _0x1dec50?0:(_0x41411a&&(this["firstFrameCB"]=_0x1dec50),this["needFirstFrameCB"]=!0,1)}},{key:"PlayM4_SetDecCBStream",value:function value(_0x31e787){return this["decCBStream"]=_0x31e787,1}},{key:"PlayM4_SetCanvasSize",value:function value(_0x27c975,_0xdde06d){return null!=this["oSuperRender"]&&this["oSuperRender"]["SetCanvasSize"](_0x27c975,_0xdde06d)}},{key:"PlayM4_GetCanvasSize",value:function value(){return null!=this["oSuperRender"]&&this["oSuperRender"]["GetCanvasSize"]()}},{key:"PlayM4_GetBufferValue",value:function value(){return this["iInputMaxBufSize"]}},{key:"PlayM4_GetLastError",value:function value(){return this["errorCode"]}},{key:"PlayM4_GetPlayedTimeEx",value:function value(_0xff676d){_0xff676d(this["timeStamp"]-this["startTimeStamp"])}},{key:"PlayM4_SetAntialias",value:function value(_0x3a09a5){return null!=this["oSuperRender"]&&this["oSuperRender"]["SetAntialias"](_0x3a09a5)}},{key:"PlayM4_SetWaterMarkFont",value:function value(_0x446eda){return null!=this["oSuperRender"]&&this["oSuperRender"]["SetWaterMarkFont"](_0x446eda)}},{key:"PlayM4_SetWaterMarkImage",value:function value(_0xae72f6){return null!=this["oSuperRender"]&&this["oSuperRender"]["SetWaterMarkImage"](_0xae72f6)}},{key:"PlayM4_SetD3DPostProcess",value:function value(_0x19aed6,_0x1776c7){return null!=this["oSuperRender"]&&this["oSuperRender"]["SetD3DPostProcess"](_0x19aed6,_0x1776c7)}},{key:"getScriptDirectory",value:function value(){var _0x2371a2=self["location"]["href"];return _0x2371a2["substr"](0,_0x2371a2["lastIndexOf"]("/")+1)}},{key:"downloadFile",value:function value(_0x3e412f,_0x3d29f9){var _0xebb78b=_0x3e412f;_0x3e412f instanceof Blob||_0x3e412f instanceof File||(_0xebb78b=new Blob([_0x3e412f]));var _0x2b31be=window["URL"]["createObjectURL"](_0xebb78b),_0xce0caf=window["document"]["createElement"]("a");_0xce0caf["href"]=_0x2b31be,_0xce0caf["download"]=_0x3d29f9;var _0x14c380=document["createEvent"]("MouseEvents");_0x14c380["initEvent"]("click",!0,!0),_0xce0caf["dispatchEvent"](_0x14c380)}}]),_0x3c81d1}();var _0x57169c=function(){var _ref=_asyncToGenerator(_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",WebAssembly["validate"](new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])));case 1:case"end":return _context2.stop()}},_callee)}));return function _0x57169c(){return _ref.apply(this,arguments)}}();var _0x182035={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0,cmd:null,errorCode:0,status:null},_0xd02664=function(){function _0x54176f(_0x2b26a9,_0x5b6274,_0x278eda){var _0x5a45f=this,_0x5cba41=arguments["length"]>3&&void 0!==arguments[3]?arguments[3]:0,_0x13ea4f=arguments["length"]>4&&void 0!==arguments[4]?arguments[4]:"webgl",_0x325aeb=arguments["length"]>5&&void 0!==arguments[5]?arguments[5]:0,_0x45375b=arguments["length"]>6&&void 0!==arguments[6]?arguments[6]:-1;if(_0x540ab2(this,_0x54176f),console["log"]("%c>>>JSPlayerInterface wasmPathV3:%s, wasmPathV1:%s, chromeVersion:%d","color: red",_0x2b26a9,_0x5b6274,_getFExplore()),this["szBasePathV3"]=_0x2b26a9,this["szBasePathV1"]=_0x5b6274,this["fnCallBack"]=_0x278eda,this["nUser"]=_0x5cba41,this["renderEngine"]=_0x13ea4f,this["hasWebWorker"]=_0x325aeb,this["setHasThread"]=_0x45375b,this["decodeEngine"]=1,this["streamOpenMode"]=0,this["printfFlag"]=!1,this["canvasID"]="",this["FECcanvasIDArray"]=[],this["aTotalBuffer"]=[],this["iFrameNum"]=0,this["bWriteData"]=!0,this["downloadInputDataFlag"]=!1,this["rtpDataNeedAdd4Size"]=!1,this["aInputDataBuffer"]=[],this["iInputMaxBufSize"]=2097152,this["audioDisplayBufSize"]=0,this["decodeFrameType"]=0,this["decInterval"]=-1,this["volume"]=0,this["displayBuf"]=0,this["anrParamLevel"]=0,this["anrParamFlag"]=0,this["resampleRate"]=0,this["resampleFlag"]=0,this["decodeERCLevel"]=0,this["skipErrorData"]=0,this["demuxModelType"]=0,this["demuxModeFlag"]=0,this["needResetBuffer"]=0,this["globalBaseTime"]={},this["globalBaseTime"]["year"]=0,this["inputBufSize"]=0,this["waterFontParam"]=null,this["waterImageParam"]=null,this["needSetFFCB"]=!1,this["FFCBFlag"]=0,this["firstFrameCB"]=null,this["needSetSecretKey"]=!1,this["keyData"]=null,this["runtimeModule"]=0,this["runtimeCBFun"]=null,this["needSetRunTimeInfoCB"]=!1,this["needPlaySound"]=!1,this["CanvasSubPortMap"]=new Map,this["oJSPlayerObj"]=null,this["supportWebCodecs"]=window["_getFSupportWebCodecs"](),this["supportSab"]=!!window["SharedArrayBuffer"],this["offscreen"]=!!window["OffscreenCanvas"],this["supportOffscreen"]=!1,this["offscreen"]){var _0x3f3d41=new OffscreenCanvas(1,1),_0x10b9ec=_0x3f3d41["getContext"]("webgl");_0x10b9ec&&(this["supportOffscreen"]=!0,_0x10b9ec["getExtension"]("WEBGL_lose_context")["loseContext"]()),_0x3f3d41=null,_0x10b9ec=null}this["securityContext"]=!0,"https:"===window["location"]["protocol"]||"localhost"===location["hostname"]?this["securityContext"]=!0:this["securityContext"]=!1,this["supportSIMD"]=!1,this["callBackParameter"]=_0x182035,this["jsplayerVersion"]=3,this["supportWebCodecs"]&&this["securityContext"]?this["jsplayerVersion"]=3:this["supportSab"]&&this["supportOffscreen"]?this["jsplayerVersion"]=2:this["jsplayerVersion"]=1,this["jsplayerVersion"]<3&&(this["callBackParameter"]["bSupHardDecAVC"]=!1,this["callBackParameter"]["bSupHardDecHEVC"]=!1,this["callBackParameter"]["bSupHardOrSoft"]=!1),null===this["szBasePathV3"]&&null!=this["szBasePathV1"]?this["jsplayerVersion"]=1:null!=this["szBasePathV3"]&&null===this["szBasePathV1"]?(console["info"]("%c>>>> szBasePathV1 is null ","color: red"),this["jsplayerVersion"]=3):null===this["szBasePathV3"]&&null===this["szBasePathV1"]&&(console["info"]("%c>>>> szBasePathV3 and szBasePathV1 are null ","color: red"),this["fnCallBack"](this["callBackParameter"])),_0x57169c()["then"](function(_0x538340){_0x538340?(this["supportSIMD"]=!0,console["log"]("%c>>>>your browser protocol is %s, hostname:%s, WebCodecs:%s,Sab:%s,Offscreen:%s,SIMD:%s,jsplayerVersion:%d","color: red",window["location"]["protocol"],location["hostname"],this["supportWebCodecs"],this["supportSab"],this["supportOffscreen"],this["supportSIMD"],this["jsplayerVersion"])):(this["supportSIMD"]=!1,console["log"]("%c>>>>your browser protocol is %s, hostname:%s, WebCodecs:%s,Sab:%s,Offscreen:%s,SIMD:%s,jsplayerVersion:%d","color: red",window["location"]["protocol"],location["hostname"],this["supportWebCodecs"],this["supportSab"],this["supportOffscreen"],this["supportSIMD"],this["jsplayerVersion"]))}["bind"](this)),this["wasmloaded"]=!1,this["jsplayerVersion"]>1?this["oJSPlayerObj"]=new _0x1c57af(this,this["szBasePathV3"],function(_0x37f338){var _0x25dfae=_0x37f338["bSupHardOrSoft"],_0x2515aa=_0x37f338["bSupHardDecAVC"],_0x5bb501=_0x37f338["bSupHardDecHEVC"],_0x5bb548=_0x37f338["cmd"],_0x45c300=_0x37f338["errorCode"],_0x533ad5=_0x37f338["status"];_0x5a45f["callBackParameter"]["bSupHardDecAVC"]=_0x2515aa,_0x5a45f["callBackParameter"]["bSupHardDecHEVC"]=_0x5bb501,_0x5a45f["callBackParameter"]["bSupHardOrSoft"]=_0x25dfae,_0x5a45f["callBackParameter"]["cmd"]=_0x5bb548,_0x5a45f["callBackParameter"]["errorCode"]=_0x45c300,_0x5a45f["callBackParameter"]["status"]=_0x533ad5,_0x5a45f["wasmloaded"]=!0,_0x5a45f["fnCallBack"](_0x5a45f["callBackParameter"])},this["nUser"],this["renderEngine"],this["hasWebWorker"],this["setHasThread"],this["jsplayerVersion"]):this["oJSPlayerObj"]=new _0x233f81(this,this["szBasePathV1"],function(_0x305ccb){_0x305ccb["instance"];var _0x42cacf=_0x305ccb["cmd"],_0x44a76b=_0x305ccb["errorCode"],_0x4a2e15=_0x305ccb["status"];_0x5a45f["callBackParameter"]["bSupHardDecAVC"]=!1,_0x5a45f["callBackParameter"]["bSupHardDecHEVC"]=!1,_0x5a45f["callBackParameter"]["bSupHardOrSoft"]=!1,_0x5a45f["callBackParameter"]["cmd"]=_0x42cacf,_0x5a45f["callBackParameter"]["errorCode"]=_0x44a76b,_0x5a45f["callBackParameter"]["status"]=_0x4a2e15,_0x5a45f["wasmloaded"]=!0,_0x5a45f["fnCallBack"](_0x5a45f["callBackParameter"])},0)}return _0x132bfb(_0x54176f,[{key:"JSPlayM4_SetStreamEnd",value:function value(){return 0}},{key:"JSPlayM4_GetPort",value:function value(){return this["printfFlag"]&&console["log"](">>>>>yff>>> JSPlayM4_GetPort 1"),null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetPort this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1&&this["oJSPlayerObj"]["JSPlayM4_GetPort"](),1)}},{key:"JSPlayM4_SetStreamOpenMode",value:function value(_0x57d8f6){return this["printfFlag"]&&console["log"](">>>>>yff20230817>>>>> JSPlayM4_SetStreamOpenMode 1 mode:"+_0x57d8f6),this["streamOpenMode"]=_0x57d8f6,null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetStreamOpenMode this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetStreamOpenMode"](_0x57d8f6):this["oJSPlayerObj"]["PlayM4_SetStreamOpenMode"](_0x57d8f6),1)}},{key:"JSPlayM4_OpenStream",value:function value(_0x361fb4,_0x4a2e60,_0xba1b17){if(this["printfFlag"]&&console["log"](">>>>>yff20230817>>>>> JSPlayM4_OpenStream 1 :"+_0x361fb4),40!==_0x4a2e60&&console["info"]("%cJSPlayM4_OpenStream nSize is not 40","color: red"),4===_0x361fb4[8]&&0===_0x361fb4[9]&&(this["rtpDataNeedAdd4Size"]=!0),this["downloadInputDataFlag"]){var _0x563266=new Uint8Array(_0x361fb4["buffer"]);this["downloadRTPData"](_0x563266),console["log"]("write 40 hik head")}var _0x1d7fef=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_OpenStream this.oJSPlayerObj is null"),0):(_0x1d7fef=this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_OpenStream"](_0x361fb4,_0x4a2e60,_0xba1b17):this["oJSPlayerObj"]["PlayM4_OpenStream"](_0x361fb4,_0x4a2e60,_0xba1b17),this["HIK40Head"]=_0x361fb4,this["HIKHeadSize"]=_0x4a2e60,this["HIKPoolSize"]=_0xba1b17,16===_0x1d7fef&&this["_switchV3ToV1"](this["streamOpenMode"],_0x361fb4,_0x4a2e60,_0xba1b17,this["needPlay"]),_0x1d7fef)}},{key:"_switchV3ToV1",value:function value(_0x223693,_0x2adccd,_0x40439d,_0x56facc,_0x13135c){var _0x577b01=this;console["log"]("%c5>switch V3 to V1","color: red"),this["jsplayerVersion"]=1,this["oJSPlayerObj"]["JSPlayM4_Stop"](),this["oJSPlayerObj"]["JSPlayM4_CloseStream"](),this["oJSPlayerObj"]["JSPlayM4_FreePort"](),this["oJSPlayerObj"]=null;var _0x2e5b43=new _0x233f81(this,this["szBasePathV1"],function(_0x2f4c40){_0x2f4c40["instance"];var _0x37345e=_0x2f4c40["cmd"],_0x4a7050=_0x2f4c40["errorCode"],_0x28ae3d=_0x2f4c40["status"];if("loaded"===_0x37345e)_0x577b01["oJSPlayerObj"]=_0x2e5b43,_0x577b01["callBackParameter"]["cmd"]=_0x37345e,_0x577b01["callBackParameter"]["errorCode"]=_0x4a7050,_0x577b01["callBackParameter"]["status"]=_0x28ae3d,_0x577b01["JSPlayM4_SetStreamOpenMode"](_0x223693),_0x577b01["JSPlayM4_OpenStream"](_0x2adccd,_0x40439d,_0x56facc),(_0x13135c||_0x577b01["needPlay"])&&_0x577b01["JSPlayM4_Play"](_0x577b01["canvasID"]),_0x577b01["_switchV3ToV1ResetParam"]()},0)}},{key:"_switchV3ToV1ResetParam",value:function value(){return this["needSetSecretKey"]&&this["JSPlayM4_SetSecretKey"](this["keyData"]),this["needSetFFCB"]&&this["JSPlayM4_SetFirstFrameCallBack"](this["FFCBFlag"],this["firstFrameCB"]),this["needSetRunTimeInfoCB"]&&this["JSPlayM4_SetRunTimeInfoCallBackEx"](this["runtimeModule"],this["runtimeCBFun"]),this["needPlaySound"]&&this["JSPlayM4_PlaySound"](),0!=this["skipErrorData"]&&this["oJSPlayerObj"]["PlayM4_SkipErrorData"](this["skipErrorData"]),0!=this["demuxModeFlag"]&&this["oJSPlayerObj"]["PlayM4_SetDemuxModel"](this["demuxModelType"],this["demuxModeFlag"]),0!=this["globalBaseTime"]["year"]&&this["oJSPlayerObj"]["PlayM4_SetGlobalBaseTime"](this["globalBaseTime"]["year"],this["globalBaseTime"]["month"],this["globalBaseTime"]["day"],this["globalBaseTime"]["hour"],this["globalBaseTime"]["min"],this["globalBaseTime"]["sec"],this["globalBaseTime"]["ms"]),-1!=this["decInterval"]&&this["oJSPlayerObj"]["PlayM4_SetIFrameDecInterval"](this["decInterval"]),0!=this["decodeERCLevel"]&&this["oJSPlayerObj"]["PlayM4_SetDecodeERC"](this["decodeERCLevel"]),0!=this["volume"]&&this["JSPlayM4_SetVolume"](this["volume"]),0!=this["anrParamFlag"]&&this["oJSPlayerObj"]["PlayM4_SetANRParam"](this["anrParamFlag"],this["anrParamLevel"]),0!=this["resampleFlag"]&&this["oJSPlayerObj"]["PlayM4_SetResampleValue"](this["resampleFlag"],this["resampleRate"]),0!=this["displayBuf"]&&this["oJSPlayerObj"]["PlayM4_SetDisplayBuf"](this["displayBuf"]),null!=this["waterFontParam"]&&this["oJSPlayerObj"]["PlayM4_SetWaterMarkFont"](this["waterFontParam"]),null!=this["waterImageParam"]&&this["oJSPlayerObj"]["PlayM4_SetWaterMarkImage"](this["waterImageParam"]),0!=this["audioDisplayBufSize"]&&this["oJSPlayerObj"]["PlayM4_SetAudioDisplayBuf"](this["audioDisplayBufSize"]),0!=this["decodeFrameType"]&&this["JSPlayM4_SetDecodeFrameType"](this["decodeFrameType"]),0!=this["needResetBuffer"]&&this["oJSPlayerObj"]["PlayM4_ReleaseInputBuffer"](),0!=this["inputBufSize"]&&this["oJSPlayerObj"]["PlayM4_SetInputBufSize"](this["inputBufSize"]),1}},{key:"JSPlayM4_SetDecodeEngine",value:function value(_0x1af01c){if(this["printfFlag"]&&console["log"](">>>>>yff20230817>>>>> JSPlayM4_SetDecodeEngine 1:"+_0x1af01c),0!=_0x1af01c&&1!=_0x1af01c)return console["log"]("0 is V3softDecode, 1 is V3hardDecoder,decodeEngine:"+_0x1af01c),0;this["decodeEngine"]=_0x1af01c;var _0x46362b=1;if(this["jsplayerVersion"]>1){if(!this["supportSab"])return console["info"]("%c3>JSPlayM4_SetDecodeEngine(0 is soft,1 is hard):%d,SharedArrayBuffer Error , does not support Soft Decdoe!!!!!","color: red",_0x1af01c),0;_0x46362b=this["oJSPlayerObj"]["JSPlayM4_SetDecodeEngine"](this["decodeEngine"])}return _0x46362b}},{key:"JSPlayM4_DownloadData",value:function value(){return this["downloadInputDataFlag"]=!0,1}},{key:"JSPlayM4_SetAudioDisplayBuf",value:function value(_0x15af77){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetAudioDisplayBuf this.oJSPlayerObj is null"),0):(this["audioDisplayBufSize"]=_0x15af77,this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetAudioDisplayBuf"](_0x15af77):this["oJSPlayerObj"]["PlayM4_SetAudioDisplayBuf"](_0x15af77))}},{key:"JSPlayM4_Play",value:function value(){var _0x54e71e=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:null;this["canvasID"]=_0x54e71e;var _0x5d869c=1;return this["printfFlag"]&&console["log"](">>>>>yff20230817>>>>> JSPlayM4_Play 1 this.supportSab:"+this["supportSab"]),null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_Play this.oJSPlayerObj is null"),this["needPlay"]=!0,0):(this["jsplayerVersion"]>1?(_0x5d869c=this["oJSPlayerObj"]["JSPlayM4_Play"](_0x54e71e),0!=this["aInputDataBuffer"]["length"]&&(this["oJSPlayerObj"]["JSPlayM4_InputData"](new Uint8Array(this["aInputDataBuffer"]),this["aInputDataBuffer"]["length"]),this["aInputDataBuffer"]["splice"](0,this["aInputDataBuffer"]["length"]))):(_0x5d869c=this["oJSPlayerObj"]["PlayM4_Play"](_0x54e71e),0!=this["aInputDataBuffer"]["length"]&&(this["oJSPlayerObj"]["PlayM4_InputData"](new Uint8Array(this["aInputDataBuffer"]),this["aInputDataBuffer"]["length"]),this["aInputDataBuffer"]["splice"](0,this["aInputDataBuffer"]["length"]))),_0x5d869c)}},{key:"JSPlayM4_InputData",value:function value(_0x10e007,_0x2a8993){var _0x50630f=1;if(null===this["oJSPlayerObj"]||!this["wasmloaded"]){var _0x2b7a70=this["aInputDataBuffer"]["length"];if(_0x2b7a70+_0x2a8993>this["iInputMaxBufSize"])return console["log"]("WasmPlayer input over"),0;for(var _0xe3634f=0;_0xe3634f<_0x2a8993;_0xe3634f++)this["aInputDataBuffer"][_0x2b7a70+_0xe3634f]=_0x10e007[_0xe3634f];return 0}if(_0x50630f=this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_InputData"](_0x10e007,_0x2a8993):this["oJSPlayerObj"]["PlayM4_InputData"](_0x10e007,_0x2a8993),this["downloadInputDataFlag"]){if(this["rtpDataNeedAdd4Size"]){var _0x420467=null,_0xf203d9=_0x2a8993+4,_0x4030eb=new Uint32Array([_0x2a8993]),_0x3632d2=new Uint8Array(_0x4030eb["buffer"]);(_0x420467=new Uint8Array(_0xf203d9))["set"](_0x3632d2,0),_0x420467["set"](_0x10e007,4),this["downloadRTPData"](_0x420467),_0x4030eb=null,_0x3632d2=null,_0x420467=null}else this["downloadRTPData"](_0x10e007)}return _0x50630f}},{key:"JSPlayM4_Stop",value:function value(){var _0x19a8a9=!(arguments["length"]>0&&void 0!==arguments[0])||arguments[0];if(null===this["oJSPlayerObj"])return console["log"](">>>>>yff>>> JSPlayM4_Stop this.oJSPlayerObj is null"),0;if(this["bWriteData"]&&this["iFrameNum"]>0){console["log"]("download"+this["iFrameNum"]+"Psdata");var _0x72a11f=new Uint8Array(this["aTotalBuffer"]);this["_downloadFile"](_0x72a11f,"RTPRaw.data"),this["aTotalBuffer"]["splice"](0,this["aTotalBuffer"]["length"]),this["bWriteData"]=!1,this["iFrameNum"]=0,_0x72a11f=null}return this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_Stop"](_0x19a8a9):this["oJSPlayerObj"]["PlayM4_Stop"](_0x19a8a9)}},{key:"JSPlayM4_CloseStream",value:function value(){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>>  JSPlayM4_CloseStream this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_CloseStream"]():this["oJSPlayerObj"]["PlayM4_CloseStream"]()}},{key:"JSPlayM4_FreePort",value:function value(){var _0x20d649=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FreePort this.oJSPlayerObj is null"),0):(_0x20d649=this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_FreePort"]():this["oJSPlayerObj"]["PlayM4_FreePort"](),this["oJSPlayerObj"]=null,_0x20d649)}},{key:"JSPlayM4_SetDecodeFrameType",value:function value(_0x4d6640){var _0x4561fa=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetDecodeFrameType this.oJSPlayerObj is null"),0):(this["decodeFrameType"]=_0x4d6640,this["jsplayerVersion"]>1?_0x4561fa=this["oJSPlayerObj"]["JSPlayM4_SetDecodeFrameType"](_0x4d6640):7==_0x4d6640?_0x4561fa=this["oJSPlayerObj"]["PlayM4_SetLostFrameMode"](1):(_0x4561fa=this["oJSPlayerObj"]["PlayM4_SetLostFrameMode"](0),_0x4561fa=this["oJSPlayerObj"]["PlayM4_SetDecodeFrameType"](_0x4d6640)),_0x4561fa)}},{key:"JSPlayM4_PlaySound",value:function value(){return this["needPlaySound"]=!0,null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_PlaySound this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_PlaySound"]():this["oJSPlayerObj"]["PlayM4_PlaySound"](0)}},{key:"JSPlayM4_GetJPEG",value:function value(){var _0x4fdc36=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:null,_0x2c4dd3=!(arguments["length"]>1&&void 0!==arguments[1])||arguments[1];return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetJPEG this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_GetJPEG"](_0x4fdc36,_0x2c4dd3):this["oJSPlayerObj"]["PlayM4_GetJPEG"](_0x4fdc36)}},{key:"JSPlayM4_GetBMP",value:function value(){var _0x2dcc1f=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:null,_0x70ee0f=!(arguments["length"]>1&&void 0!==arguments[1])||arguments[1];return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetBMP this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_GetBMP"](_0x2dcc1f,_0x70ee0f):this["oJSPlayerObj"]["PlayM4_GetBMP"](_0x2dcc1f)}},{key:"JSPlayM4_GetCropJPEG",value:function value(){var _0x239360=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetCropJPEG this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x239360=this["oJSPlayerObj"]["JSPlayM4_GetCropJPEG"]():console["log"]("%c1>JSPlayerV1.X does not support GetCropJPEG","color: red"),_0x239360)}},{key:"JSPlayM4_GetCropBMP",value:function value(){var _0x1bdff7=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetCropBMP this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x1bdff7=this["oJSPlayerObj"]["JSPlayM4_GetCropBMP"]():console["log"]("%c1>JSPlayerV1.X does not support GetCropBMP","color: red"),_0x1bdff7)}},{key:"JSPlayM4_GetCanvasCapture",value:function value(_0x5bb60c){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetCanvasCapture this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_GetCanvasCapture"](_0x5bb60c):this["oJSPlayerObj"]["PlayM4_GetCanvasCapture"](_0x5bb60c)}},{key:"JSPlayM4_StopSound",value:function value(){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_StopSound this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_StopSound"]():this["oJSPlayerObj"]["PlayM4_StopSound"]()}},{key:"JSPlayM4_GetSDKVersion",value:function value(){return"08010001"}},{key:"JSPlayM4_GetBuildDate",value:function value(){return"20231129"}},{key:"JSPlayM4_GetLastError",value:function value(){return null===this["oJSPlayerObj"]?0:this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_GetLastError"]():this["oJSPlayerObj"]["PlayM4_GetLastError"]()}},{key:"JSPlayM4_Fast",value:function value(){var _0xf187a9=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_Fast this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1&&(_0xf187a9=this["oJSPlayerObj"]["JSPlayM4_Fast"]()),_0xf187a9)}},{key:"JSPlayM4_Slow",value:function value(){var _0x57b9ad=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_Slow this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1&&(_0x57b9ad=this["oJSPlayerObj"]["JSPlayM4_Slow"]()),_0x57b9ad)}},{key:"JSPlayM4_SetIFrameDecInterval",value:function value(_0x4069d7){return this["decInterval"]=_0x4069d7,null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetIFrameDecInterval this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetIFrameDecInterval"](_0x4069d7):this["oJSPlayerObj"]["PlayM4_SetIFrameDecInterval"](_0x4069d7)}},{key:"JSPlayM4_Pause",value:function value(_0x8b2bc6){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_Pause this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_Pause"](_0x8b2bc6):this["oJSPlayerObj"]["PlayM4_Pause"](_0x8b2bc6)}},{key:"JSPlayM4_OneByOne",value:function value(){var _0x307a6c=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_OneByOne this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_OneByOne"]():this["oJSPlayerObj"]["PlayM4_OneByOne"](_0x307a6c)}},{key:"JSPlayM4_OneByOneResume",value:function value(){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_OneByOneResume this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_OneByOneResume"]():this["oJSPlayerObj"]["PlayM4_Pause"](!1)}},{key:"JSPlayM4_SetVolume",value:function value(_0x4d5aca){var _0x523acb=1;if(null===this["oJSPlayerObj"])return console["log"](">>>>>yff>>> JSPlayM4_SetVolume this.oJSPlayerObj is null"),0;if(this["volume"]=_0x4d5aca,this["jsplayerVersion"]>1)_0x523acb=this["oJSPlayerObj"]["JSPlayM4_SetVolume"](_0x4d5aca);else{var _0x53ed0a=_0x4d5aca/65535*100;_0x523acb=this["oJSPlayerObj"]["PlayM4_SetVolume"](_0x53ed0a)}return _0x523acb}},{key:"JSPlayM4_GetVolume",value:function value(){var _0x21219f=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:null,_0x556461=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetVolume this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?(_0x556461=this["oJSPlayerObj"]["JSPlayM4_GetVolume"](),null!=_0x21219f&&_0x21219f(_0x556461)):_0x556461=this["oJSPlayerObj"]["PlayM4_GetVolume"](function(_0x2f84bd){null!=_0x21219f&&_0x21219f(_0x2f84bd/100*65535)}),_0x556461)}},{key:"JSPlayM4_SetDisplayRegion",value:function value(_0x21786e,_0x56f3e9,_0x2148cc,_0xe0ef84,_0x113511){var _0x5cd38b=arguments["length"]>5&&void 0!==arguments[5]&&arguments[5],_0x41a441=!(arguments["length"]>6&&void 0!==arguments[6])||arguments[6],_0xf2f322=1;if(null===this["oJSPlayerObj"])return console["log"](">>>>>yff>>> JSPlayM4_SetDisplayRegion this.oJSPlayerObj is null"),0;if(this["jsplayerVersion"]>1)_0xf2f322=this["oJSPlayerObj"]["JSPlayM4_SetDisplayRegion"](_0x21786e,_0x56f3e9,_0x2148cc,_0xe0ef84,_0x113511,_0x5cd38b,_0x41a441);else{var _0x158713={};_0x158713["left"]=_0x56f3e9,_0x158713["right"]=_0x2148cc,_0x158713["top"]=_0xe0ef84,_0x158713["bottom"]=_0x113511,_0xf2f322=this["oJSPlayerObj"]["PlayM4_SetDisplayRegion"](_0x158713,!_0x5cd38b,_0x41a441)}return _0xf2f322}},{key:"JSPlayM4_SetPrintLogFlag",value:function value(_0x2aeae4){return this["printfFlag"]=_0x2aeae4,null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetPrintLogFlag this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetPrintLogFlag"](_0x2aeae4):this["oJSPlayerObj"]["PlayM4_OpenPlayerSDKPrintLog"](_0x2aeae4)}},{key:"JSPlayM4_RenderPrivateData",value:function value(_0x5bca20,_0x159c38){var _0xab4623=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_RenderPrivateData this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0xab4623=this["oJSPlayerObj"]["JSPlayM4_RenderPrivateData"](_0x5bca20,_0x159c38):console["log"]("%c1>JSPlayerV1.X does not support RenderPrivateData","color: red"),_0xab4623)}},{key:"JSPlayM4_RenderPrivateDataEx",value:function value(_0x24d8ed,_0x15aca6,_0x225369){var _0x335145=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_RenderPrivateDataEx this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x335145=this["oJSPlayerObj"]["JSPlayM4_RenderPrivateDataEx"](_0x24d8ed,_0x15aca6,_0x225369):console["log"]("%c1>JSPlayerV1.X does not support RenderPrivateDataEx","color: red"),_0x335145)}},{key:"JSPlayM4_SetCanvasSize",value:function value(_0x25a9a9,_0x4ffd96){var _0x18f85d=arguments["length"]>2&&void 0!==arguments[2]?arguments[2]:0;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetCanvasSize this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetCanvasSize"](_0x25a9a9,_0x4ffd96,_0x18f85d):this["oJSPlayerObj"]["PlayM4_SetCanvasSize"](_0x25a9a9,_0x4ffd96)}},{key:"JSPlayM4_SetDisplayBuf",value:function value(_0x549f06){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetDisplayBuf this.oJSPlayerObj is null"),0):(this["displayBuf"]=_0x549f06,this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetDisplayBuf"](_0x549f06):this["oJSPlayerObj"]["PlayM4_SetDisplayBuf"](_0x549f06))}},{key:"JSPlayM4_GetSourceBufferRemain",value:function value(){return null===this["oJSPlayerObj"]?0:this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_GetSourceBufferRemain"]():this["oJSPlayerObj"]["PlayM4_GetInputBufSize"]()}},{key:"JSPlayM4_GetBufferValue",value:function value(_0x49db26){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetBufferValue this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_GetBufferValue"](_0x49db26):this["oJSPlayerObj"]["PlayM4_GetBufferValue"](_0x49db26)}},{key:"JSPlayM4_ReversePlay",value:function value(){var _0xc8b398=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_ReversePlay this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0xc8b398=this["oJSPlayerObj"]["JSPlayM4_ReversePlay"]():console["log"]("%c1>JSPlayerV1.X does not support ReversePlay","color: red"),_0xc8b398)}},{key:"JSPlayM4_SetDecodeThreadNum",value:function value(_0x32f400){var _0x1ceaa8=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetDecodeThreadNum this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x1ceaa8=this["oJSPlayerObj"]["JSPlayM4_SetDecodeThreadNum"](_0x32f400):console["log"]("%c1>JSPlayerV1.X does not support SetDecodeThreadNum, V1.X decocde only 1 thread","color: red"),_0x1ceaa8)}},{key:"JSPlayM4_GetCanvasSize",value:function value(){var _0x74909a=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:0;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetCanvasSize this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_GetCanvasSize"](_0x74909a):this["oJSPlayerObj"]["PlayM4_GetCanvasSize"]()}},{key:"JSPlayM4_DisplayLostFrames",value:function value(_0x2def38,_0x5a235c,_0xad47e2){var _0x3bebfc=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_DisplayLostFrames this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x3bebfc=this["oJSPlayerObj"]["JSPlayM4_DisplayLostFrames"](_0x2def38,_0x5a235c,_0xad47e2):console["log"]("%c1>JSPlayerV1.X does not support DisplayLostFrames","color: red"),_0x3bebfc)}},{key:"JSPlayM4_SetANRParam",value:function value(_0x402b5c,_0x303d40){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetANRParam this.oJSPlayerObj is null"),0):(this["anrParamLevel"]=_0x303d40,this["anrParamFlag"]=_0x402b5c,this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetANRParam"](_0x402b5c,_0x303d40):this["oJSPlayerObj"]["PlayM4_SetANRParam"](_0x402b5c,_0x303d40))}},{key:"JSPlayM4_SetResampleValue",value:function value(_0x36d019,_0x42331b){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetResampleValue this.oJSPlayerObj is null"),0):(this["resampleRate"]=_0x42331b,this["resampleFlag"]=_0x36d019,this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetResampleValue"](_0x36d019,_0x42331b):this["oJSPlayerObj"]["PlayM4_SetResampleValue"](_0x36d019,_0x42331b))}},{key:"JSPlayM4_SetAntialias",value:function value(_0x51fa1e){var _0x4eb4ca=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetAntialias this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x4eb4ca=this["oJSPlayerObj"]["JSPlayM4_SetAntialias"](_0x51fa1e):console["log"]("%c1>JSPlayerV1.X does not support JSPlayM4_SetAntialias 20230922","color: red"),_0x4eb4ca)}},{key:"JSPlayM4_SyncToAudio",value:function value(_0x51e2db){var _0x1f97fa=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SyncToAudio this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x1f97fa=this["oJSPlayerObj"]["JSPlayM4_SyncToAudio"](_0x51e2db):console["log"]("%c1>JSPlayerV1.X does not support SyncToAudio","color: red"),_0x1f97fa)}},{key:"JSPlayM4_SetAudioThreadModel",value:function value(_0x514264){var _0x1d0aa5=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetAudioThreadModel this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x1d0aa5=this["oJSPlayerObj"]["JSPlayM4_SetAudioThreadModel"](_0x514264):console["log"]("%c1>JSPlayerV1.X does not support SetAudioThreadModel","color: red"),_0x1d0aa5)}},{key:"JSPlayM4_SetDecodeERC",value:function value(_0x4da424){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetDecodeERC this.oJSPlayerObj is null"),0):(this["decodeERCLevel"]=_0x4da424,this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetDecodeERC"](_0x4da424):this["oJSPlayerObj"]["PlayM4_SetDecodeERC"](_0x4da424))}},{key:"JSPlayM4_SkipErrorData",value:function value(_0x17510b){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SkipErrorData this.oJSPlayerObj is null"),0):(this["skipErrorData"]=_0x17510b,this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SkipErrorData"](_0x17510b):this["oJSPlayerObj"]["PlayM4_SkipErrorData"](_0x17510b))}},{key:"JSPlayM4_SetDemuxModel",value:function value(_0x112e12,_0x527841){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetDemuxModel this.oJSPlayerObj is null"),0):(this["demuxModelType"]=_0x112e12,this["demuxModeFlag"]=_0x527841,this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetDemuxModel"](_0x112e12,_0x527841):this["oJSPlayerObj"]["PlayM4_SetDemuxModel"](_0x112e12,_0x527841))}},{key:"JSPlayM4_SetD3DPostProcess",value:function value(_0x394b33,_0x3742b4){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetD3DPostProcess this.oJSPlayerObj is null"),0):"number"!=typeof _0x394b33||"number"!=typeof _0x3742b4?(console["log"](">>>>>yff>>> JSPlayM4_SetD3DPostProcess nPostType or fValue is not number"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetD3DPostProcess"](_0x394b33,_0x3742b4):this["oJSPlayerObj"]["PlayM4_SetD3DPostProcess"](_0x394b33,_0x3742b4)}},{key:"JSPlayM4_SetFirstFrameCallBack",value:function value(_0xcc148e,_0x3f99be){return this["needSetFFCB"]=!0,this["FFCBFlag"]=_0xcc148e,this["firstFrameCB"]=_0x3f99be,null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetFirstFrameCallBack this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetFirstFrameCallBack"](_0xcc148e,_0x3f99be):this["oJSPlayerObj"]["PlayM4_SetFirstFrameCallBack"](_0xcc148e,_0x3f99be)}},{key:"JSPlayM4_SetDecCallBack",value:function value(_0x265e02,_0x3b149c){return null===this["oJSPlayerObj"]||"function"!=typeof _0x3b149c?(console["log"](">>>>>yff>>> JSPlayM4_SetDecCallBack this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetDecCallBack"](_0x265e02,_0x3b149c):this["oJSPlayerObj"]["PlayM4_SetDecCallBack"](_0x265e02,_0x3b149c)}},{key:"JSPlayM4_SetDisplayCallBack",value:function value(_0x549004,_0x1c92f1){return null===this["oJSPlayerObj"]||"function"!=typeof _0x1c92f1?(console["log"](">>>>>yff>>> JSPlayM4_SetDisplayCallBack this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetDisplayCallBack"](_0x549004,_0x1c92f1):this["oJSPlayerObj"]["PlayM4_SetDisplayCallBack"](_0x1c92f1)}},{key:"JSPlayM4_SetFrameInfoCallBack",value:function value(_0x1db5e0){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetFrameInfoCallBack this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetFrameInfoCallBack"](_0x1db5e0):this["oJSPlayerObj"]["PlayM4_SetFrameInfoCallBack"](_0x1db5e0)}},{key:"JSPlayM4_SetDecCBStream",value:function value(_0x304d9e){return null===this["oJSPlayerObj"]||_0x304d9e<1||_0x304d9e>3?(console["log"](">>>>>yff>>> JSPlayM4_SetDecCBStream this.oJSPlayerObj is null stream:"+_0x304d9e),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetDecCBStream"](_0x304d9e):this["oJSPlayerObj"]["PlayM4_SetDecCBStream"](_0x304d9e)}},{key:"JSPlayM4_GetFrameInfo",value:function value(){if(null===this["oJSPlayerObj"])return console["log"](">>>>>yff>>> JSPlayM4_GetFrameInfo this.oJSPlayerObj is null"),0;return this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_GetFrameInfo"]():this["oJSPlayerObj"]["PlayM4_GetFrameInfo"]()}},{key:"JSPlayM4_GetAdditionData",value:function value(){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetAdditionData this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_GetAdditionData"]():(console["log"]("%c1>JSPlayerV1.X does not support GetAdditionData","color: red"),0)}},{key:"JSPlayM4_SetAdditionDataCallBack",value:function value(_0x4bed05,_0x2e5911,_0x13c274){var _0x25e05e=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetAdditionDataCallBack this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x25e05e=this["oJSPlayerObj"]["JSPlayM4_SetAdditionDataCallBack"](_0x4bed05,_0x2e5911,_0x13c274):(console["log"]("%c1>JSPlayerV1.X does not support SetAdditionDataCallBack","color: red"),_0x25e05e=0),_0x25e05e)}},{key:"JSPlayM4_GetPlayedTimeEx",value:function value(_0x2b2c2e){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetPlayedTimeEx this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_GetPlayedTimeEx"](_0x2b2c2e):this["oJSPlayerObj"]["PlayM4_GetPlayedTimeEx"](_0x2b2c2e)}},{key:"JSPlayM4_GetFileTime",value:function value(){var _0x4c0534=0;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetFileTime this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x4c0534=this["oJSPlayerObj"]["JSPlayM4_GetFileTime"]():console["log"]("%c1>JSPlayerV1.X does not support GetPlayedTimeEx","color: red"),1e3*_0x4c0534)}},{key:"JSPlayM4_GetMpOffset",value:function value(_0x5d99f2){var _0x177a9b=-1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetMpOffset this.oJSPlayerObj is null"),-1):(this["jsplayerVersion"]>1?_0x177a9b=this["oJSPlayerObj"]["JSPlayM4_GetMpOffset"](_0x5d99f2):console["log"]("%c1>JSPlayerV1.X does not support GetMpOffset","color: red"),_0x177a9b)}},{key:"JSPlayM4_ResetBuffer",value:function value(_0x379140){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_ResetBuffer this.oJSPlayerObj is null"),0):(this["needResetBuffer"]=!0,this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_ResetBuffer"](_0x379140):this["oJSPlayerObj"]["PlayM4_ReleaseInputBuffer"]())}},{key:"JSPlayM4_SetGlobalBaseTime",value:function value(_0x4d8066,_0x3b695b,_0x1d6bcc,_0x5a4046,_0x383622,_0x2ae72d,_0x131aa9){return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetGlobalBaseTime this.oJSPlayerObj is null"),0):(this["globalBaseTime"]={year:_0x4d8066,month:_0x3b695b,day:_0x1d6bcc,hour:_0x5a4046,min:_0x383622,sec:_0x2ae72d,ms:_0x131aa9},this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetGlobalBaseTime"](_0x4d8066,_0x3b695b,_0x1d6bcc,_0x5a4046,_0x383622,_0x2ae72d,_0x131aa9):this["oJSPlayerObj"]["PlayM4_SetGlobalBaseTime"](_0x4d8066,_0x3b695b,_0x1d6bcc,_0x5a4046,_0x383622,_0x2ae72d,_0x131aa9))}},{key:"JSPlayM4_SetSecretKey",value:function value(_0x27ccd4){return this["needSetSecretKey"]=!0,this["keyData"]=_0x27ccd4,null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetSecretKey this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetSecretKey"](_0x27ccd4):this["oJSPlayerObj"]["PlayM4_SetSecretKey"](1,_0x27ccd4,128)}},{key:"JSPlayM4_SetRunTimeInfoCallBackEx",value:function value(_0x57d4a9,_0x300077){return this["runtimeModule"]=_0x57d4a9,this["runtimeCBFun"]=_0x300077,this["needSetRunTimeInfoCB"]=!0,null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetRunTimeInfoCallBackEx this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetRunTimeInfoCallBackEx"](_0x57d4a9,_0x300077):this["oJSPlayerObj"]["PlayM4_SetRunTimeInfoCallBackEx"](_0x57d4a9,_0x300077)}},{key:"JSPlayM4_SetPlayOrBackSwitchMode",value:function value(_0x33f71d){var _0x44d84d=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetPlayOrBackSwitchMode this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x44d84d=this["oJSPlayerObj"]["JSPlayM4_SetPlayOrBackSwitchMode"](_0x33f71d):console["log"]("%c1>JSPlayerV1.X does not support SetPlayOrBackSwitchMode","color: red"),_0x44d84d)}},{key:"JSPlayM4_SetStretchPlay",value:function value(_0x217c25,_0x375653){var _0x44fa67=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetStretchPlay this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x44fa67=this["oJSPlayerObj"]["JSPlayM4_SetStretchPlay"](_0x217c25,_0x375653):console["log"]("%c1>JSPlayerV1.X does not support SetStretchPlay","color: red"),_0x44fa67)}},{key:"JSPlayM4_SetAutoSmoothPlay",value:function value(_0x3b28c6){var _0x4c78a8=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetAutoSmoothPlay this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x4c78a8=this["oJSPlayerObj"]["JSPlayM4_SetAutoSmoothPlay"](_0x3b28c6):console["log"]("%c1>JSPlayerV1.X does not support SetAutoSmoothPlay","color: red"),_0x4c78a8)}},{key:"JSPlayM4_KeepPlaySpeed",value:function value(_0x14efe0){var _0x31cd2d=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_KeepPlaySpeed this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x31cd2d=this["oJSPlayerObj"]["JSPlayM4_KeepPlaySpeed"](_0x14efe0):console["log"]("%c1>JSPlayerV1.X does not support KeepPlaySpeed","color: red"),_0x31cd2d)}},{key:"JSPlayM4_IgnoreHeaderAudioDefine",value:function value(_0x28d0c7){var _0xdb1c2a=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_IgnoreHeaderAudioDefine this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0xdb1c2a=this["oJSPlayerObj"]["JSPlayM4_IgnoreHeaderAudioDefine"](_0x28d0c7):console["log"]("%c1>JSPlayerV1.X does not support IgnoreHeaderAudioDefine","color: red"),_0xdb1c2a)}},{key:"JSPlayM4_SetSycGroup",value:function value(_0x3a0ed9){var _0x4db1ba=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetSycGroup this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x4db1ba=this["oJSPlayerObj"]["JSPlayM4_SetSycGroup"](_0x3a0ed9):console["log"]("%c1>JSPlayerV1.X does not support SetSycGroup","color: red"),_0x4db1ba)}},{key:"JSPlayM4_FEC_SetCanvasID",value:function value(){var _0xa4d5a7=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:null,_0x36ad96=1;return this["FECcanvasIDArray"]=_0xa4d5a7["split"](","),null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_SetCanvasID this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x36ad96=this["oJSPlayerObj"]["JSPlayM4_FEC_SetCanvasID"](_0xa4d5a7):console["log"]("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),_0x36ad96)}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function value(_0x3592aa,_0x2701c5,_0x4f3f4a){var _0x58c7a3=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_ResetCorrectType this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x58c7a3=this["oJSPlayerObj"]["JSPlayM4_FEC_ResetCorrectType"](_0x3592aa,_0x2701c5,_0x4f3f4a):console["log"]("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),_0x58c7a3)}},{key:"JSPlayM4_FEC_GetPort",value:function value(_0x493520,_0x2e084a){var _0x3b81f0=arguments["length"]>2&&void 0!==arguments[2]?arguments[2]:null;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_GetPort this.oJSPlayerObj is null"),-1):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_FEC_GetPort"](_0x493520,_0x2e084a,_0x3b81f0):-1}},{key:"JSPlayM4_FEC_Enable",value:function value(_0x238a80){var _0x577c11=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_Enable this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x577c11=this["oJSPlayerObj"]["JSPlayM4_FEC_Enable"](_0x238a80):console["log"]("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),_0x577c11)}},{key:"JSPlayM4_FEC_SetParam",value:function value(_0xcec33a,_0x2820e6){var _0x209724=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_SetParam this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x209724=this["oJSPlayerObj"]["JSPlayM4_FEC_SetParam"](_0xcec33a,_0x2820e6):console["log"]("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),_0x209724)}},{key:"JSPlayM4_FEC_GetParam",value:function value(_0x3d5edf){var _0x19e801=arguments["length"]>1&&void 0!==arguments[1]?arguments[1]:null;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_GetParam this.oJSPlayerObj is null"),0):this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_FEC_GetParam"](_0x3d5edf,_0x19e801):(console["log"]("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),1)}},{key:"JSPlayM4_FEC_SetViewParam",value:function value(_0x43ed31,_0x1c4ac6,_0xb6c0fe){var _0x4c64be=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_SetViewParam this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x4c64be=this["oJSPlayerObj"]["JSPlayM4_FEC_SetViewParam"](_0x43ed31,_0x1c4ac6,_0xb6c0fe):console["log"]("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),_0x4c64be)}},{key:"JSPlayM4_FEC_GetViewParam",value:function value(_0x213d16,_0x109225,_0x5b2495){var _0x434db6=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_GetViewParam this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x434db6=this["oJSPlayerObj"]["JSPlayM4_FEC_GetViewParam"](_0x213d16,_0x109225,_0x5b2495):console["log"]("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),_0x434db6)}},{key:"JSPlayM4_FEC_SetWnd",value:function value(_0x2b0323,_0xe4ec92){var _0x1f7d52=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_SetWnd this.oJSPlayerObj is null"),0):(this["CanvasSubPortMap"]["set"](_0x2b0323,_0xe4ec92),this["jsplayerVersion"]>1?_0x1f7d52=this["oJSPlayerObj"]["JSPlayM4_FEC_SetWnd"](_0x2b0323,_0xe4ec92):console["log"]("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),_0x1f7d52)}},{key:"JSPlayM4_FEC_Disable",value:function value(){var _0x2623de=arguments["length"]>0&&void 0!==arguments[0]?arguments[0]:0,_0x4cc6e5=!(arguments["length"]>1&&void 0!==arguments[1])||arguments[1],_0x1b1dcf=arguments["length"]>2&&void 0!==arguments[2]&&arguments[2],_0xa8518d=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_Disable this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0xa8518d=this["oJSPlayerObj"]["JSPlayM4_FEC_Disable"](_0x2623de,_0x4cc6e5,_0x1b1dcf):console["log"]("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),_0xa8518d)}},{key:"JSPlayM4_FEC_DelPort",value:function value(_0x4e7479){var _0x55b164=1;if(null===this["oJSPlayerObj"])return console["log"](">>>>>yff>>> JSPlayM4_FEC_DelPort this.oJSPlayerObj is null"),0;var _0x6abd48=this["CanvasSubPortMap"]["get"](_0x4e7479);this["jsplayerVersion"]>1?_0x55b164=this["oJSPlayerObj"]["JSPlayM4_FEC_DelPort"](_0x4e7479):console["log"]("%c1>JSPlayerV1.X does not support FEC 20230922","color: red");var _0xa766=document["getElementById"](_0x6abd48);if(_0xa766){var _0x49e6c5=_0xa766["cloneNode"](!0);_0xa766["parentNode"]["replaceChild"](_0x49e6c5,_0xa766)}return this["CanvasSubPortMap"]["delete"](_0x4e7479),_0x55b164}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function value(_0x1e62f6){var _0x44a879=arguments["length"]>1&&void 0!==arguments[1]?arguments[1]:0,_0xea5320=arguments["length"]>2&&void 0!==arguments[2]?arguments[2]:0,_0x11ef9f=arguments["length"]>3?arguments[3]:void 0,_0x29385a=arguments["length"]>4&&void 0!==arguments[4]?arguments[4]:null,_0x32adbe=arguments["length"]>5?arguments[5]:void 0,_0x4ceb2a=arguments["length"]>6?arguments[6]:void 0,_0x4307b6=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_SetDisplayRegion this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x4307b6=this["oJSPlayerObj"]["JSPlayM4_FEC_SetDisplayRegion"](_0x1e62f6,_0x44a879,_0xea5320,_0x11ef9f,_0x29385a,_0x32adbe,_0x4ceb2a):console["log"]("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),_0x4307b6)}},{key:"JSPlayM4_FEC_SetBackCilling",value:function value(_0x4ed41b,_0x433f29){var _0x507840=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_SetBackCilling this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x507840=this["oJSPlayerObj"]["JSPlayM4_FEC_SetBackCilling"](_0x4ed41b,_0x433f29):console["log"]("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),_0x507840)}},{key:"JSPlayM4_FEC_GetPTZPort",value:function value(_0x65d340,_0x40a6c8){var _0x5295b0=arguments["length"]>2&&void 0!==arguments[2]?arguments[2]:0,_0x165df6=arguments["length"]>3&&void 0!==arguments[3]?arguments[3]:null,_0x1e0e88=-1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_GetPTZPort this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x1e0e88=this["oJSPlayerObj"]["JSPlayM4_FEC_GetPTZPort"](_0x65d340,_0x40a6c8,_0x5295b0,_0x165df6):console["log"]("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),_0x1e0e88)}},{key:"JSPlayM4_FEC_SetPTZDisplayMode",value:function value(_0x4d36b2){var _0x115822=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_FEC_SetPTZDisplayMode this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?_0x115822=this["oJSPlayerObj"]["JSPlayM4_FEC_SetPTZDisplayMode"](_0x4d36b2):console["log"]("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),_0x115822)}},{key:"JSPlayM4_SetVideoCropInfo",value:function value(_0xae87ac){var _0x35782d=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetVideoCropInfo this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?console["log"]("%c1>JSPlayerV3.X does not support SetVideoCropInfo,","color: red"):_0x35782d=this["oJSPlayerObj"]["PlayM4_SetVideoCropInfo"](_0xae87ac),_0x35782d)}},{key:"JSPlayM4_IsVisible",value:function value(_0x1dedab){var _0x4af027=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_IsVisible this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?console["log"]("%c1>JSPlayerV3.X does not support IsVisible,","color: red"):_0x4af027=this["oJSPlayerObj"]["PlayM4_IsVisible"](_0x1dedab),_0x4af027)}},{key:"JSPlayM4_SetInputBufSize",value:function value(_0x53369a){var _0x582b52=1;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_SetInputBufSize this.oJSPlayerObj is null"),0):(this["inputBufSize"]=_0x53369a,this["jsplayerVersion"]>1?console["log"]("%c1>JSPlayerV3.X does not support SetInputBufSize,","color: red"):_0x582b52=this["oJSPlayerObj"]["PlayM4_SetInputBufSize"](_0x53369a),_0x582b52)}},{key:"JSPlayM4_GetYUVBufSize",value:function value(){var _0xde4170=0;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetYUVBufSize this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?console["log"]("%c1>JSPlayerV3.X does not support GetYUVBufSize,","color: red"):_0xde4170=this["oJSPlayerObj"]["PlayM4_GetYUVBufSize"](),_0xde4170)}},{key:"JSPlayM4_ClearCanvas",value:function value(){var _0xf03728=0;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_ClearCanvas this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?console["log"]("%c1>JSPlayerV3.X does not support ClearCanvas,","color: red"):_0xf03728=this["oJSPlayerObj"]["PlayM4_ClearCanvas"](),_0xf03728)}},{key:"JSPlayM4_ReleaseInputBuffer",value:function value(){var _0x3ae07a=0;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_ReleaseInputBuffer this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?console["log"]("%c1>JSPlayerV3.X does not support ReleaseInputBuffer,","color: red"):_0x3ae07a=this["oJSPlayerObj"]["PlayM4_ReleaseInputBuffer"](),_0x3ae07a)}},{key:"JSPlayM4_GetDecodeFrameType",value:function value(){var _0x38e651=0;return null===this["oJSPlayerObj"]?(console["log"](">>>>>yff>>> JSPlayM4_GetDecodeFrameType this.oJSPlayerObj is null"),0):(this["jsplayerVersion"]>1?console["log"]("%c1>JSPlayerV3.X does not support GetDecodeFrameType,","color: red"):_0x38e651=this["oJSPlayerObj"]["PlayM4_GetDecodeFrameType"](),_0x38e651)}},{key:"JSPlayM4_SetWaterMarkFont",value:function value(_0x7e1f61){if(null===this["oJSPlayerObj"])return console["log"](">>>>>yff>>> JSPlayM4_SetWaterMarkFont this.oJSPlayerObj is null"),0;if(null!=_0x7e1f61){if(void 0===_0x7e1f61["pFontString"]||null==_0x7e1f61["pstStartPos"]||null==_0x7e1f61["pstFontColor"]||null==_0x7e1f61["pstFontSize"]||null==_0x7e1f61["pstFontRotate"]||null==_0x7e1f61["pFontFamily"]||null==_0x7e1f61["pstStartPos"]["fX"]||null==_0x7e1f61["pstStartPos"]["fY"]||null==_0x7e1f61["pstFontColor"]["fR"]||null==_0x7e1f61["pstFontColor"]["fG"]||null==_0x7e1f61["pstFontColor"]["fB"]||null==_0x7e1f61["pstFontColor"]["fA"]||null==_0x7e1f61["pstFontSize"]["nFontWidth"]||null==_0x7e1f61["pstFontSize"]["nFontHeight"]||null==_0x7e1f61["pstFontRotate"]["fRotateAngle"]||null==_0x7e1f61["pstFontRotate"]["fFillFullScreen"]||null==_0x7e1f61["pSpace"])return console["log"](">>>>>yff>>> JSPlayM4_SetWaterMarkFont pFontParam undefined"),0;if(_0x7e1f61["pstStartPos"]["fX"]>1||_0x7e1f61["pstStartPos"]["fX"]<0||_0x7e1f61["pstStartPos"]["fY"]>1||_0x7e1f61["pstStartPos"]["fY"]<0||_0x7e1f61["pstFontColor"]["fR"]>1||_0x7e1f61["pstFontColor"]["fR"]<0||_0x7e1f61["pstFontColor"]["fG"]>1||_0x7e1f61["pstFontColor"]["fG"]<0||_0x7e1f61["pstFontColor"]["fB"]>1||_0x7e1f61["pstFontColor"]["fB"]<0||_0x7e1f61["pstFontColor"]["fA"]>1||_0x7e1f61["pstFontColor"]["fA"]<0)return console["log"](">>>>>yff>>> JSPlayM4_SetWaterMarkFont pFontParam f* is 0~1"),0;if(1!=_0x7e1f61["pstFontRotate"]["fFillFullScreen"]&&0!=_0x7e1f61["pstFontRotate"]["fFillFullScreen"]&&1!=_0x7e1f61["pstFontRotate"]["fFillFullScreen"]&&0!=_0x7e1f61["pstFontRotate"]["fFillFullScreen"])return console["log"](">>>>>yff>>> pFontParam.pstFontRotate.fFillFullScreen is true or false"),0;if(_0x7e1f61["pstFontRotate"]["fFillFullScreen"]&&(_0x7e1f61["pstFontNumber"]["nRowNumber"]<1||_0x7e1f61["pstFontNumber"]["nColNumber"]<1||null==_0x7e1f61["pstFontNumber"]["nRowNumber"]||null==_0x7e1f61["pstFontNumber"]["nColNumber"]))return console["log"](">>>>>yff>>> pFontParam.pstFontNumber error(>0)"),0;if("string"!=typeof _0x7e1f61["pFontFamily"])return console["log"](">>>>>yff>>> pFontParam.pFontFamily is not string"),0;if(!Array["isArray"](_0x7e1f61["pFontString"]))return console["log"](">>>>>yff>>> pFontParam.pFontString is not array"),0;(_0x7e1f61["pstFontSize"]["nFontHeight"]<=0||_0x7e1f61["pstFontSize"]["nFontWidth"]<=0)&&(_0x7e1f61=null),null!=_0x7e1f61["nFontAlign"]&&null!=_0x7e1f61["nFontAlign"]||(_0x7e1f61["nFontAlign"]=0),null!=_0x7e1f61["nColorAdapt"]&&null!=_0x7e1f61["nColorAdapt"]||(_0x7e1f61["nColorAdapt"]=0)}return this["waterFontParam"]=_0x7e1f61,this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetWaterMarkFont"](_0x7e1f61):this["oJSPlayerObj"]["PlayM4_SetWaterMarkFont"](_0x7e1f61)}},{key:"JSPlayM4_SetWaterMarkImage",value:function value(_0x21b6ec){if(null===this["oJSPlayerObj"])return console["log"](">>>>>yff>>> JSPlayM4_SetWaterMarkImage this.oJSPlayerObj is null"),0;if(!("ImageDecoder"in window))return console["log"](">>>>>yff>>> window not support ImageDecoder"),16;if(null!=_0x21b6ec){if(void 0===_0x21b6ec["pImageData"])return console["log"](">>>>>yff>>> JSPlayM4_SetWaterMarkImage pImageParam.pImageData undefined"),0;if(void 0===_0x21b6ec["pImageType"]||"jpg"!=_0x21b6ec["pImageType"]&&"jpeg"!=_0x21b6ec["pImageType"]&&"png"!=_0x21b6ec["pImageType"]&&"gif"!=_0x21b6ec["pImageType"]&&"bmp"!=_0x21b6ec["pImageType"]&&"webp"!=_0x21b6ec["pImageType"]&&"avif"!=_0x21b6ec["pImageType"])return console["log"](">>>>>yff>>> JSPlayM4_SetWaterMarkImage pImageParam.pImageType:"+_0x21b6ec["pImageType"]+" error"),0;(void 0===_0x21b6ec["pstRectPos"]||_0x21b6ec["fLeft"]<0||_0x21b6ec["fLeft"]>1||_0x21b6ec["fRight"]<0||_0x21b6ec["fRight"]>1||_0x21b6ec["fTop"]<0||_0x21b6ec["fTop"]>1||_0x21b6ec["fBottom"]<0||_0x21b6ec["fBottom"]>1)&&(_0x21b6ec["pstRectPos"]={fLeft:0,fRight:.1,fTop:0,fBottom:.1}),(void 0===_0x21b6ec["fAlpha"]||_0x21b6ec["fAlpha"]<0||_0x21b6ec["fAlpha"]>1)&&(_0x21b6ec["fAlpha"]=1)}return this["waterImageParam"]=_0x21b6ec,this["jsplayerVersion"]>1?this["oJSPlayerObj"]["JSPlayM4_SetWaterMarkImage"](_0x21b6ec):this["oJSPlayerObj"]["PlayM4_SetWaterMarkImage"](_0x21b6ec)}},{key:"_downloadFile",value:function value(_0x3f4607,_0xc1c8fb){var _0x5a6011=_0x3f4607;_0x3f4607 instanceof Blob||_0x3f4607 instanceof File||(_0x5a6011=new Blob([_0x3f4607]));var _0x1cf7f4=window["URL"]["createObjectURL"](_0x5a6011),_0x2e6740=window["document"]["createElement"]("a");_0x2e6740["href"]=_0x1cf7f4,_0x2e6740["download"]=_0xc1c8fb;var _0x418df2=document["createEvent"]("MouseEvents");_0x418df2["initEvent"]("click",!0,!0),_0x2e6740["dispatchEvent"](_0x418df2)}},{key:"downloadRTPData",value:function value(_0x2aa12e){if(this["bWriteData"]){var _0x46343d=_0x2aa12e,_0x31553e=this["aTotalBuffer"]["length"];console["log"]("totalLength:"+_0x31553e);for(var _0x3b32cd=0,_0x513876=_0x46343d["length"];_0x3b32cd<_0x513876;_0x3b32cd++)this["aTotalBuffer"][_0x31553e+_0x3b32cd]=_0x46343d[_0x3b32cd];this["iFrameNum"]++,_0x46343d=null,console["log"]("download200RTPdata iFrameNum:"+this["iFrameNum"])}if(this["bWriteData"]&&this["iFrameNum"]>=200){console["log"]("download200RawData");var _0x486c7c=new Uint8Array(this["aTotalBuffer"]);this["_downloadFile"](_0x486c7c,"Raw200.data"),this["aTotalBuffer"]["splice"](0,this["aTotalBuffer"]["length"]),this["bWriteData"]=!1,this["iFrameNum"]=0,_0x486c7c=null}}}]),_0x54176f}();window["_getFExplore"]=function(){var _0x361150,_0x415d59={},_0x38b59d=navigator["userAgent"]["toLowerCase"]();if((_0x361150=_0x38b59d["match"](/rv:([\d.]+)\) like gecko/))||(_0x361150=_0x38b59d["match"](/msie ([\d\.]+)/))?_0x415d59["ie"]=_0x361150[1]:(_0x361150=_0x38b59d["match"](/edge\/([\d\.]+)/))?_0x415d59["edge"]=_0x361150[1]:(_0x361150=_0x38b59d["match"](/firefox\/([\d\.]+)/))?_0x415d59["firefox"]=_0x361150[1]:(_0x361150=_0x38b59d["match"](/(?:opera|opr).([\d\.]+)/))?_0x415d59["opera"]=_0x361150[1]:(_0x361150=_0x38b59d["match"](/chrome\/([\d\.]+)/))?_0x415d59["chrome"]=_0x361150[1]:(_0x361150=_0x38b59d["match"](/version\/([\d\.]+).*safari/))&&(_0x415d59["safari"]=_0x361150[1]),_0x415d59["chrome"]){var _0x11bb6b=_0x415d59["chrome"],_0x1b0a43=_0x11bb6b["indexOf"](".");return Number(_0x11bb6b["substring"](0,_0x1b0a43))}return _0x415d59["ie"]?console["info"]("%c1>your browser is IE ,it does not support play without plugin","color: red"):_0x415d59["safari"]?console["info"]("%c1>your browser is safari","color: red"):_0x415d59["firefox"]?console["info"]("%c1>your browser is Firefox","color: red"):console["info"]("%c1>your browser does not support play without plugin","color: red"),-1},window["_getFSupportWebCodecs"]=function(){return"undefined"!=typeof MediaMetadata&&"undefined"!=typeof MediaRecorder&&"undefined"!=typeof VideoDecoder},window["_getFSupportSIMD"]=function(){return new Promise(function(_0x5299ea,_0x153ae5){_0x57169c()["then"](function(_0x341757){_0x341757?_0x5299ea():_0x153ae5()})})}}(),_0x399207}()})})(wasmplayer_min);var wasmplayer_minExports=wasmplayer_min.exports;var Tool=function(){function Tool(){_classCallCheck$1(this,Tool);this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}_createClass$1(Tool,[{key:"$",value:function $(strExpr){var idExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;var classExpr=/^(?:\s*(<[\w\W]+>)[^>]*|.([\w-]*))$/;if(idExpr.test(strExpr)){var idMatch=idExpr.exec(strExpr);return document.getElementById(idMatch[2])}else if(classExpr.test(strExpr)){var classMatch=classExpr.exec(strExpr);var allElement=document.getElementsByTagName("*");var ClassMatch=[];for(var i=0,l=allElement.length;i<l;i++){if(allElement[i].className.match(new RegExp("(\\s|^)"+classMatch[2]+"(\\s|$)"))){ClassMatch.push(allElement[i])}}return ClassMatch}}},{key:"dateFormat",value:function dateFormat(oDate,fmt){var o={"M+":oDate.getMonth()+1,"d+":oDate.getDate(),"h+":oDate.getHours(),"m+":oDate.getMinutes(),"s+":oDate.getSeconds(),"q+":Math.floor((oDate.getMonth()+3)/3),S:oDate.getMilliseconds()};if(/(y+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,(oDate.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(fmt)){fmt=fmt.replace(RegExp.$1,RegExp.$1.length===1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return fmt}},{key:"downloadFile",value:function downloadFile(oData,szName){var oBlob=oData;if(!(oData instanceof Blob||oData instanceof File)){oBlob=new Blob([oData])}var szFileUrl=window.URL.createObjectURL(oBlob);var oLink=window.document.createElement("a");oLink.href=szFileUrl;oLink.download=szName;var oClick=document.createEvent("MouseEvents");oClick.initEvent("click",true,true);oLink.dispatchEvent(oClick)}},{key:"createxmlDoc",value:function createxmlDoc(){var xmlDoc;var aVersions=["MSXML2.DOMDocument","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","Microsoft.XmlDom"];for(var i=0,len=aVersions.length;i<len;i++){try{xmlDoc=new ActiveXObject(aVersions[i]);break}catch(e){xmlDoc=document.implementation.createDocument("","",null);break}}xmlDoc.async="false";return xmlDoc}},{key:"parseXmlFromStr",value:function parseXmlFromStr(szXml){if(null===szXml||""===szXml){return null}var xmlDoc=this.createxmlDoc();if(navigator.appName==="Netscape"||navigator.appName==="Opera"){var oParser=new DOMParser;xmlDoc=oParser.parseFromString(szXml,"text/xml")}else{xmlDoc.loadXML(szXml)}return xmlDoc}},{key:"encode",value:function encode(input){var output="";var chr1;var chr2;var chr3;var enc1;var enc2;var enc3;var enc4;var i=0;input=this._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4)}return output}},{key:"decode",value:function decode(input){var output="";var chr1;var chr2;var chr3;var enc1;var enc2;var enc3;var enc4;var i=0;input=input.replace(/[^A-Za-z0-9+/=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!==64){output=output+String.fromCharCode(chr2)}if(enc4!==64){output=output+String.fromCharCode(chr3)}}output=this._utf8_decode(output);return output}},{key:"_utf8_encode",value:function _utf8_encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext}},{key:"_utf8_decode",value:function _utf8_decode(utftext){var string="";var i=0;var c=0;var c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else if(c>191&&c<224){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode((c&31)<<6|c2&63);i+=2}else{c2=utftext.charCodeAt(i+1);var c3=utftext.charCodeAt(i+2);string+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63);i+=3}}return string}},{key:"isFirefox",value:function isFirefox(){var bRet=false;var szUserAgent=navigator.userAgent.toLowerCase();var szBrowserVersion="";var iBrowserVersion=-1;if(szUserAgent.match(/firefox\/([\d.]+)/)){szBrowserVersion=szUserAgent.match(/firefox\/([\d.]+)/)[1];iBrowserVersion=parseInt(szBrowserVersion.split(".")[0],10);if(iBrowserVersion>-1){bRet=true}}return bRet}},{key:"isSafari",value:function isSafari(){var bRet=false;var szUserAgent=navigator.userAgent.toLowerCase();var szBrowserVersion="";var iBrowserVersion=-1;if(szUserAgent.match(/version\/([\d.]+).safari./)){szBrowserVersion=szUserAgent.match(/version\/([\d.]+).safari./)[1];iBrowserVersion=parseInt(szBrowserVersion.split(".")[0],10);if(iBrowserVersion>-1){bRet=true}}return bRet}},{key:"isEdge",value:function isEdge(){return navigator.userAgent.toLowerCase().indexOf("edge")>-1}},{key:"isIOS",value:function isIOS(){var u=navigator.userAgent;var bIOS=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return bIOS}}]);return Tool}();var oTool=new Tool;var FEC_CORRECT_PTZ=256;var FEC_CORRECT_180=512;var FEC_CORRECT_360=768;var FEC_CORRECT_CYLINDER=1536;var defaultCoors={port:0,start:{x:0,y:0},total:{x:0,y:0},diff:{x:0,y:0},startPTZPosition:{x:0,y:0},lastCorrdsY:0,param2d:{upDateType:4,fValue:0,fPTZParam:{fPTZPositionX:0,fPTZPositionY:0},fPTZZoom:0}};var JSPluginV3=function(){function JSPluginV3(props){_classCallCheck$1(this,JSPluginV3);this.nWidth=0;this.nHeight=0;this.useHardDev=typeof props.useHardDev!=="undefined"?props.useHardDev:false;this.isSharedArrayBuffer=props.isSharedArrayBuffer||false;this.bGpuSupHardDecHEVC=false;this.oStreamClient=new streamClient1_2_0_minExports.StreamClient;this.oStorageManager=new StorageManager("./transform",{staticPath:"https://open.ys7.com/assets/ezuikit_v4.0"});this.aHead=[];this.pCanvasData=null;this.bPlaySound=-1;this.szStorageUUID="";this.szStreamUUID="";this.g_port=null;this.szId=props.szId;this.iWidth=props.iWidth;this.iHeight=props.iHeight;this.iRate=1;this.decoderVersion="2.0";this.staticPath=props.staticPath||"https://open.ys7.com/assets/ezuikit_v5.0";this.bPause=false;this.bPlay=false;this.bInit=false;this.esCanvas=null;this.b3DZoom=false;this.oJSPlugin=null;this.bPauseDate=null;this.FECSplitIds="";this.canvasFECSubPort=new Map;this.correctType=null;document.getElementById(props.szId).style="display:inline-block;width:".concat(props.iWidth,"px;height:").concat(props.iHeight,"px;background:#000000;background-size:100% 100%;vertical-align:top;");this.JS_Init();this.oStyle=Object.assign({border:"#000000",borderSelect:"#FFCC00",background:"#4C4B4B"},props.oStyle);if(typeof props.szId==="string"){this.oJSPlugin=$("#"+props.szId)}else{this.oJSPlugin=props.szId}this.createWindows();this.esCanvas=new ESCanvas(this.szId+"canvas_draw0");var that=this;this.oJSPlugin.find("."+props.szId+"parent-wnd").eq(0).children().each(function(i){var self=this;$(self).bind("mouseenter",function(e){$("#"+props.szId+"canvas_draw0").css("pointer-events","all");if(that.b3DZoom){console.log("e",e);console.log("id:",props.szId);that.esCanvas=null;$("."+props.szId+"draw-window").unbind();that.esCanvas=new ESCanvas(props.szId+"canvas_draw0");that.esCanvas.setShapeType("Rect");that.esCanvas.setDrawStyle("#ff0000","",0);that.esCanvas.setDrawStatus(true,function(oRECT){that.fCallback&&that.fCallback(oRECT)})}else{$("#"+props.szId+"canvas_draw0").css("pointer-events","none")}});$(self).bind("mouseleave",function(e){$("#"+props.szId+"canvas_draw0").css("pointer-events","none")})})}_createClass$1(JSPluginV3,[{key:"createWindows",value:function createWindows(iWidth,iHeight){var that=this;if(iWidth&&iHeight){that.iWidth=iWidth;that.iHeight=iHeight}var iFixWidth=that.iWidth;var iFixHeight=that.iHeight;var iPerWidth=that.iWidth-iFixWidth-2*2;var iPerHeight=that.iHeight-iFixHeight-2*2;var iWndWidth=that.iWidth-iFixWidth;var iWndHeight=that.iHeight-iFixHeight;var iType=1;if(typeof this.szId==="string"){that.oJSPlugin=$("#"+this.szId)}else{that.oJSPlugin=this.szId}var szHtml='<div class="'+this.szId+'parent-wnd" style="overflow:hidden;width:100%; height:100%; position: relative;">';navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);for(var _i13=0;_i13<1;_i13++){iWidth=iPerWidth+(_i13%iType===iType-1?iFixWidth:0);iHeight=iPerHeight+(_i13+iType>=Math.pow(iType,2)?iFixHeight:0);var iPlayWndWidth=iWndWidth+(_i13%iType===iType-1?iFixWidth:0);var iPlayWndHeight=iWndHeight+(_i13+iType>=Math.pow(iType,2)?iFixHeight:0);szHtml+='<div id="'+this.szId+"-container-"+_i13+'" style="float:left; background-color: '+this.oStyle.background+"; position: relative; width: "+iPlayWndWidth+"px; height: "+iPlayWndHeight+'px;">'+'<canvas id="'+this.szId+"-player"+'" class="'+this.szId+'play-window" wid="'+_i13+'" width="'+iPlayWndWidth+'" height="'+iPlayWndHeight+'"></canvas>'+(_i13===0?'<img style="display:none;" id="playImg'+_i13+'" src="">':"")+'<canvas id="'+this.szId+"canvas_draw"+_i13+'"  class="'+this.szId+'draw-window" style="position:absolute; top:0; left:0;" wid="'+_i13+'" width='+iWidth+" height="+iHeight+"></canvas>"+"</div></div>"}that.oJSPlugin.html(szHtml)}},{key:"JS_Init",value:function JS_Init(){var _this7=this;var that=this;if(that.initIng){return}that.initIng=true;var that=this;if(this.bPlay){return false}var promise=new Promise(function(resolve,reject){if(window["wasmplayer-".concat(_this7.szId)]){that.bInit=true;resolve()}var isNeedScale=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var wasmPathV3="".concat(that.staticPath,"/js/PlayCtrlWasm/playCtrl3/").concat(_this7.isSharedArrayBuffer?"hasWorker/NoSIMD":"noWorker","/Decoder.js");var wasmPathV1="".concat(that.staticPath,"/js/PlayCtrlWasm/playCtrl1/NoSIMD/Decoder.js");var InitWasm=function InitWasm(){var wasmplayer=new wasmplayer_minExports.JSPlayCtrl(isNeedScale?null:wasmPathV3,wasmPathV1,function(_ref2){_ref2.bSupHardOrSoft;_ref2.bSupHardDecAVC;_ref2.bSupHardDecHEVC;var cmd=_ref2.cmd;_ref2.errorCode;_ref2.status;switch(cmd){case"loaded":that.bInit=true;window.JSPlayerModuleLoaded=true;that.initIng=false;break}},0,"webgl");window["wasmplayer-".concat(that.szId)]=wasmplayer;resolve()};window._getFSupportSIMD().then(function(){wasmPathV3="".concat(that.staticPath,"/js/PlayCtrlWasm/playCtrl3/").concat(_this7.isSharedArrayBuffer?"hasWorker/HasSIMD":"noWorker","/Decoder.js");if(!(oTool.isIOS()||oTool.isSafari()||oTool.isEdge())){wasmPathV1="".concat(that.staticPath,"/js/PlayCtrlWasm/playCtrl1/HasSIMD/Decoder.js")}InitWasm()},function(){InitWasm()})});return promise}},{key:"PlayM4_openStream",value:function PlayM4_openStream(fileHead){var wasmplayer=window["wasmplayer-".concat(this.szId)];var that=this;new Uint8Array(fileHead.buffer);var resO=wasmplayer.JSPlayM4_OpenStream(fileHead,40,4*1024*1024);wasmplayer.JSPlayM4_SetFirstFrameCallBack(1,function(){console.log("%cfirst frame display end:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color:blue")});wasmplayer.JSPlayM4_SetRunTimeInfoCallBackEx(1,function(nRunTimeModule,nStrVersion,nFrameTimeStamp,nFrameNum,nErrorCode){if(that.EventCallback&&that.EventCallback.setRunTimeInfoCallBack){that.EventCallback.setRunTimeInfoCallBack(nRunTimeModule,nStrVersion,nFrameTimeStamp,nFrameNum,nErrorCode)}});console.log("3.打开流 resO:"+resO)}},{key:"_doPlay",value:function _doPlay(szUrl,oParams,iWndNum,szStartTime,szStopTime){var _this8=this;var wasmplayer=window["wasmplayer-".concat(this.szId)];this.bPlayIng=true;var _this=this;_this.playURL=oParams.playURL;_this.szUrl=szUrl;if(!document.getElementById(_this.szId+"-player")){var canvasList=document.getElementById(_this.szId+"-container-0");var canvas=document.createElement("canvas");canvasList.appendChild(canvas);if(document.getElementById(_this.szId)){canvas.width=document.getElementById(_this.szId).offsetWidth;canvas.height=document.getElementById(_this.szId).offsetHeight}else{canvas.width=_this.iWidth;canvas.height=_this.iHeight}canvas.id=_this.szId+"-player"}else{var _canvasList=document.getElementById(_this.szId+"-container-0");var oldcanv=document.getElementById(this.szId+"-player");oldcanv.style="position: absolute;";oldcanv.parentNode.removeChild(oldcanv);var _canvas=document.createElement("canvas");if(document.getElementById(_this.szId)){_canvas.width=document.getElementById(_this.szId).offsetWidth;_canvas.height=document.getElementById(_this.szId).offsetHeight}else{_canvas.width=_this.iWidth;_canvas.height=_this.iHeight}_canvas.id=_this.szId+"-player";_canvasList.appendChild(_canvas)}var promise=new Promise(function(resolve,reject){_this8.oStreamClient.stopAll();if(_this.g_port===null){_this.g_port=wasmplayer.JSPlayM4_GetPort();console.log("1.获取播放库端口号 g_port:"+_this.g_port)}if(_this.EventCallback&&_this.EventCallback.openStreamCallback){console.log("开始取流-----v2");_this.EventCallback.openStreamCallback()}_this.oStreamClient.openStream(szUrl,oParams,function(data){_this8.oParams=oParams;if(data.errorCode&&data.errorCode!="1"){if(_this.EventCallback&&_this.EventCallback.pluginErrorHandler){_this.EventCallback.pluginErrorHandler(iWndNum,data.errorCode,data)}}if(data.bHead){if(_this.EventCallback&&_this.EventCallback.getStreamHeaderCallback){console.log("完成取流返回流头");_this.EventCallback.getStreamHeaderCallback()}_this.PlayM4_openStream(data.buf);_this.aHead=new Uint8Array(data.buf);if(!!_this.secretKey){wasmplayer.JSPlayM4_SetSecretKey(_this.secretKey)}try{var getQueryString=function getQueryString(name,url){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)","i");var r=url.match(reg);if(r!=null){return unescape(r[2])}return null};var date=getQueryString("begin",oParams.playURL);var year=parseInt(date.slice(0,4));var month=parseInt(date.slice(4,6));var day=parseInt(date.slice(6,8));var hour=parseInt(date.slice(9,11));var min=parseInt(date.slice(11,13));var second=parseInt(date.slice(13,15))+3;var setRes=wasmplayer.JSPlayM4_SetGlobalBaseTime(year,month,day,hour,min,second,0);console.log("设置OSD时间: ",year+":"+month+":"+day+":"+hour+":"+min+":"+second+":"+0);console.log("设置OSD时间res:",setRes)}catch(error){console.log("JSPlayM4_SetGlobalBaseTime:",error)}_this.bPlay=true;_this.bPlayIng=false;var resFCB=wasmplayer.JSPlayM4_SetFrameInfoCallBack(1);if(resFCB!=1){var resFrameInfoError=wasmplayer.JSPlayM4_GetLastError();console.log("resFrameInfoError:"+resFrameInfoError)}wasmplayer.JSPlayM4_RenderPrivateData(4,1);_this8.firstFlag=true;_this8.firstGetData=true;wasmplayer.JSPlayM4_FEC_SetCanvasID(_this8.FECSplitIds);var resP=wasmplayer.JSPlayM4_Play("".concat(_this.szId,"-player"));_this8.canvasFECSubPort.set("".concat(_this.szId,"-player"),_objectSpread2({},defaultCoors));console.log("4.开始播放 resP:"+resP,"".concat(_this.szId,"-player"));resolve(resP)}else{if(_this8.firstGetData){_this8.firstGetData=false;if(_this.EventCallback&&_this.EventCallback.getVideoStreamCallback){_this.EventCallback.getVideoStreamCallback()}}if(_this8.firstFlag){var oFrameInfo=wasmplayer.JSPlayM4_GetFrameInfo();var nWidth=oFrameInfo.width;var nHeight=oFrameInfo.height;_this8.nWidth=nWidth;_this8.nHeight=nHeight;if(nWidth){if(_this.EventCallback&&_this.EventCallback.appearFirstFrameCallback){console.log("出现首帧画面（播放成功）------多线程");_this.EventCallback.appearFirstFrameCallback()}if(_this.EventCallback&&_this.EventCallback.averageStreamSuccessCallback){_this.EventCallback.averageStreamSuccessCallback()}console.log("首帧展示",nWidth,nHeight);_this8.firstFlag=false}}var aBuffer=new Uint8Array(data.buf);if(data.statusString){if(_this.EventCallback&&_this.EventCallback.pluginErrorHandler){_this.EventCallback.pluginErrorHandler(0,1001,data)}}else if(data.type&&data.type==="exception"){if(_this.EventCallback&&_this.EventCallback.pluginErrorHandler){_this.EventCallback.pluginErrorHandler(0,1002,data)}}wasmplayer.JSPlayM4_InputData(aBuffer,aBuffer.length);aBuffer=null}if(_this.szStorageUUID){_this.oStorageManager.inputData(_this.szStorageUUID,data.buf)}},function(){if(_this.bPlay){if(_this.EventCallback&&_this.EventCallback.pluginErrorHandler){_this.EventCallback.pluginErrorHandler(0,1003)}}_this.bPlayIng=false;reject()}).then(function(id){_this.szStreamUUID=id;_this.oStreamClient.startPlay(id).then(function(){var resSSOM=wasmplayer.JSPlayM4_SetStreamOpenMode(1);console.log("2.设置流模式 resSSOM:"+resSSOM)})["catch"](function(err){console.log("err",err);_this.bPlayIng=false;reject(err.oError)})},function(oError){_this.bPlayIng=false;_this._doRelease();reject(oError)})});return promise}},{key:"JSPlayM4_SetDecodeEngine",value:function JSPlayM4_SetDecodeEngine(useHard){this.useHard=useHard}},{key:"JS_Play",value:function JS_Play(){var _this9=this;var szUrl=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var oParams=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{playURL:""};var iWndNum=arguments.length>2?arguments[2]:undefined;var szStartTime=arguments.length>3?arguments[3]:undefined;var szStopTime=arguments.length>4?arguments[4]:undefined;return new Promise(function(resolve,reject){var loadWasmTimer=setInterval(function(){if(window.JSPlayerModuleLoaded){clearInterval(loadWasmTimer);_this9._doPlay(szUrl,oParams,iWndNum,szStartTime,szStopTime).then(function(data){resolve(data)})["catch"](function(err){reject(err)})}},50)})}},{key:"JS_SetSecretKey",value:function JS_SetSecretKey(iWndNum,secretKey){var wasmplayer=window["wasmplayer-".concat(this.szId)];console.log("secretKey:::",secretKey);this.secretKey=secretKey;var resS=wasmplayer.JSPlayM4_SetSecretKey(secretKey);console.log("resSetSecretKey："+resS)}},{key:"JS_OpenSound",value:function JS_OpenSound(){var wasmplayer=window["wasmplayer-".concat(this.szId)];var resPS=wasmplayer.JSPlayM4_PlaySound();if(resPS===1){this.bPlaySound=1}return resPS}},{key:"JS_CloseSound",value:function JS_CloseSound(){var wasmplayer=window["wasmplayer-".concat(this.szId)];var resPS=wasmplayer.JSPlayM4_StopSound();if(resPS===1){this.bPlaySound=-1}return resPS}},{key:"JS_Enable3DZoom",value:function JS_Enable3DZoom(iWin,fCallback){if(!this.bPlay){return-1}var wasmplayer=window["wasmplayer-".concat(this.szId)];var info=wasmplayer.JSPlayM4_GetFrameInfo();this.JSPlayM4_SetDisplayRegion(0,info.width,0,info.height);$("."+this.szId+"draw-window").unbind();this.fCallback=fCallback;this.esCanvas=new ESCanvas(this.szId+"canvas_draw0");this.esCanvas.setShapeType("Rect");this.esCanvas.setDrawStyle("#ff0000","",0);this.esCanvas.setDrawStatus(true,function(oRECT){fCallback(oRECT)});this.b3DZoom=true;return 0}},{key:"JS_Disable3DZoom",value:function JS_Disable3DZoom(){if(!this.bPlay){return-1}this.esCanvas.setDrawStatus(false);this.b3DZoom=false;return 0}},{key:"JS_StartSave",value:function JS_StartSave(g_port){var _this10=this;var fileName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"".concat((new Date).getTime());var promise=new Promise(function(resolve,reject){_this10.oStorageManager.startRecord("".concat(fileName,".mp4"),_this10.aHead,2,0,{cbEventHandler:function cbEventHandler(iErrorType){console.log("录制错误",iErrorType);reject("录制错误 ".concat(iErrorType,"}"))},iPackage:0}).then(function(szUUID){_this10.szStorageUUID=szUUID;resolve()},function(){reject()})});return promise}},{key:"JS_StopSave",value:function JS_StopSave(){var _this11=this;var promise=new Promise(function(resolve,reject){_this11.oStorageManager.stopRecord(_this11.szStorageUUID).then(function(){_this11.szStorageUUID="";resolve()},function(iError){console.log("iError",iError);reject(iError)})});return promise}},{key:"_JSPlayM4_GetFrameInfo",value:function _JSPlayM4_GetFrameInfo(){var wasmplayer=window["wasmplayer-".concat(this.szId)];var oFrameInfo=wasmplayer.JSPlayM4_GetFrameInfo();var width=oFrameInfo.width;var height=oFrameInfo.height;console.log("width:"+width+",height:"+height);var year=oFrameInfo.year;var month=oFrameInfo.month;var day=oFrameInfo.day;var hour=oFrameInfo.hour;var minute=oFrameInfo.minute;var second=oFrameInfo.second;var milliseconds=oFrameInfo.milliseconds;console.log("OSD时间："+year+"-"+month+"-"+day+"-"+hour+"-"+minute+"-"+second+"-"+milliseconds);return{width:width,height:height,year:year,month:month,day:day,hour:hour,minute:minute,second:second}}},{key:"_JSPlayM4_SetDisplayRegion",value:function _JSPlayM4_SetDisplayRegion(left,right,top,bottom){var _this12=this;var flag=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var isFullScreen=arguments.length>5?arguments[5]:undefined;var that=this;new Promise(function(resolve,reject){var wasmplayer=window["wasmplayer-".concat(_this12.szId)];var resDR;console.log("canvasInfo:",that.iWidth,that.iHeight);console.log("canvasW:"+that.nWidth+",canvasH:"+that.nHeight+",left:"+left+",right:"+right+",top:"+top+",bottom:"+bottom);if(isFullScreen){resDR=wasmplayer.JSPlayM4_SetDisplayRegion("".concat(_this12.szId,"-player"),left*that.iWidth/(that.nHeight*2),right*that.iWidth/(that.nHeight*2),top*that.iHeight/(that.nWidth*2),bottom*that.iHeight/(that.nWidth*2),!flag,false)}else{resDR=wasmplayer.JSPlayM4_SetDisplayRegion("".concat(_this12.szId,"-player"),that.iWidth*left/that.nWidth,that.iWidth*right/that.nWidth,that.iHeight*top/that.nHeight,that.iHeight*bottom/that.nHeight,!flag,false)}resolve({code:0,data:resDR})})}},{key:"JS_SetFrameInfoCallBack",value:function JS_SetFrameInfoCallBack(value){var wasmplayer=window["wasmplayer-".concat(this.szId)];var resFCB=wasmplayer.JSPlayM4_SetFrameInfoCallBack(this.g_port,value);if(resFCB!=1){var resFrameInfoError=wasmplayer.JSPlayM4_GetLastError(this.g_port);console.log("resFrameInfoError:"+resFrameInfoError)}console.log("resFCB:"+resFCB)}},{key:"JS_CapturePicture",value:function JS_CapturePicture(port,fileName,format,callback,flag){var wasmplayer=window["wasmplayer-".concat(this.szId)];var arrayBufferToBase64Img=function arrayBufferToBase64Img(buffer){var arr=new Uint8Array(buffer);var str="";for(var _i14=0;_i14<arr.length;_i14++){str+=String.fromCharCode(arr[_i14])}return"data:image/jpeg;base64,".concat(window.btoa(str))};function doCapturePicture(aJpegData){if(fileName.indexOf(".jpeg")===-1){fileName+=".jpeg"}if(callback){callback({fileName:fileName,fileUint8Array:aJpegData,base64:arrayBufferToBase64Img(aJpegData)})}}if(!this.bPlay&&this.bPause&&this.tmpCapturePictureData){reject({code:-1,msg:"暂停状态下无法截图"})}var oFrameInfo=wasmplayer.JSPlayM4_GetFrameInfo();this.nWidth=oFrameInfo.width;this.nHeight=oFrameInfo.height;var promise=new Promise(function(resolve,reject){var JPEGRes=wasmplayer.JSPlayM4_GetJPEG(function(jpegData,jpegDataSize){if(!!jpegData){var jpegdatabuffer=new Uint8Array(jpegDataSize);jpegdatabuffer.set(jpegData.subarray(0,jpegDataSize));doCapturePicture(jpegData);resolve({code:1,data:{fileName:fileName,fileUint8Array:jpegData,base64:arrayBufferToBase64Img(jpegData)}})}},1);if(JPEGRes!==1){reject({code:-1,msg:"截图失败"})}});return promise}},{key:"JS_GetOSDTime",value:function JS_GetOSDTime(){var wasmplayer=window["wasmplayer-".concat(this.szId)];var promise=new Promise(function(resolve,reject){var oFrameInfo=wasmplayer.JSPlayM4_GetFrameInfo();var year=oFrameInfo.year;var month=oFrameInfo.month;var day=oFrameInfo.day;var hour=oFrameInfo.hour;var minute=oFrameInfo.minute;var second=oFrameInfo.second;var time=new Date(oTool.isIOS()||oTool.isSafari()||oTool.isEdge()?"".concat(year,"/").concat(month,"/").concat(day," ").concat(hour,":").concat(minute,":").concat(second):"".concat(year,"-").concat(month,"-").concat(day," ").concat(hour,":").concat(minute,":").concat(second)).getTime()/1e3;resolve(time)});return promise}},{key:"JS_Resize",value:function JS_Resize(width,height){var wasmplayer=window["wasmplayer-".concat(this.szId)];console.log("width:"+width+",height:"+height);var resSet=wasmplayer.JSPlayM4_SetCanvasSize(width,height);this.iWidth=width;this.iHeight=height;document.getElementById(this.szId).style.height=height+"px";document.getElementById(this.szId).style.width=width+"px";var oldcanv=document.getElementById(this.szId+"-player");if(oldcanv){oldcanv.style.height=height+"px";oldcanv.style.width=width+"px"}var container=document.getElementById(this.szId+"-container-0");if(container){container.style.height=height+"px";container.style.width=width+"px"}var drawer=document.getElementById(this.szId+"-drawer0");if(drawer){drawer.style.height=height+"px";drawer.style.width=width+"px"}console.log("resSet:"+resSet)}},{key:"JS_GetSDKVersion",value:function JS_GetSDKVersion(){var wasmplayer=window["wasmplayer-".concat(this.szId)];var res=wasmplayer.JSPlayM4_GetSDKVersion();return res.toString(16)}},{key:"_doRelease",value:function _doRelease(){var wasmplayer=window["wasmplayer-".concat(this.szId)];wasmplayer.JSPlayM4_CloseStream();console.log("stop end");this.bPlay=false;this.bPlayIng=false}},{key:"JS_Stop",value:function JS_Stop(){var _this13=this;var szStreamUUID=this.szStreamUUID;var wasmplayer=window["wasmplayer-".concat(this.szId)];if(this.szStorageUUID){this.JS_StopSave()}var arrayBufferToBase64Img=function arrayBufferToBase64Img(buffer){var arr=new Uint8Array(buffer);var str="";for(var _i15=0;_i15<arr.length;_i15++){str+=String.fromCharCode(arr[_i15])}return"data:image/jpeg;base64,".concat(window.btoa(str))};var promise=new Promise(function(resolve,reject){try{var JPEGRes=wasmplayer.JSPlayM4_GetJPEG(function(jpegData,jpegDataSize){var canvasList=document.getElementById(_this13.szId+"-container-0");var oldcanv=document.getElementById(_this13.szId+"-player");if(oldcanv){canvasList.removeChild(oldcanv)}var jpegdatabuffer=new Uint8Array(jpegDataSize);jpegdatabuffer.set(jpegData.subarray(0,jpegDataSize));_this13.tmpCapturePictureData=jpegData;if(_this13.correctType===null){canvasList.style.backgroundImage="url(".concat(arrayBufferToBase64Img(jpegData),")")}else{canvasList.style.backgroundImage=""}canvasList.style.backgroundSize="100% 100%"},0)}catch(error){console.log("获取末尾帧失败：",error)}setTimeout(function(){var stopStreamPromise=_this13.oStreamClient.stopAll(szStreamUUID);stopStreamPromise.then(function(data){console.log("防抖 停止取流成功");_this13._colseFECAllSubWnd();var resS=wasmplayer.JSPlayM4_Stop(false);if(resS==1){_this13._doRelease();resolve({resS:resS})}else{var jsPluginErrorCode=wasmplayer.JSPlayM4_GetLastError();if(jsPluginErrorCode==35){var timer10=setInterval(function(){if(!resS){resS=wasmplayer.JSPlayM4_Stop(false);if(resS==1){_this13._doRelease();resolve({resS:resS})}else{jsPluginErrorCode=wasmplayer.JSPlayM4_GetLastError();console.log("stop error ",jsPluginErrorCode)}}else{clearInterval(timer10)}},50)}else{console.log("stop - other error, still resolve",jsPluginErrorCode,resS);_this13._doRelease();resolve({resS:resS,jsPluginErrorCode:jsPluginErrorCode})}}})["catch"](function(err){console.log("停止取流失败_jsPluginErrorCode",err);_this13._doRelease();var jsPluginErrorCode=wasmplayer.JSPlayM4_GetLastError();console.log("停止取流失败_jsPluginErrorCode",jsPluginErrorCode);resolve({jsPluginErrorCode:jsPluginErrorCode})});resolve()},300)});return promise}},{key:"JS_DestroyWorker",value:function JS_DestroyWorker(){var wasmplayer=window["wasmplayer-".concat(this.szId)];this._colseFECAllSubWnd();var canvasList=document.getElementById(this.szId+"-container-0");var oldcanv=document.getElementById(this.szId+"-player");if(oldcanv){canvasList.removeChild(oldcanv)}if(this.pCanvasData!==null){wasmplayer._free(this.pCanvasData);this.pCanvasData=null}this.pCanvasString=null;console.log("stop end")}},{key:"JS_Fast",value:function JS_Fast(iWind,next){var nextRate=this.iRate;var wasmplayer=window["wasmplayer-".concat(this.szId)];if(next){switch(next){case 1:case 2:case 4:nextRate=next;break;case 3:nextRate=.5;break;default:nextRate=this.iRate;break}}else{switch(this.iRate){case 1:nextRate=2;break;case 2:nextRate=4;break;default:nextRate=this.iRate;break}}this.oStreamClient.setPlayRate(this.szStreamUUID,nextRate);this.iRate=nextRate;console.log("开启倍速播放,多线程倍速，全解",nextRate);if(nextRate==4){var SetDecodeThreadNumRes=wasmplayer.JSPlayM4_SetDecodeThreadNum(4);console.log("SetDecodeThreadNumRes",SetDecodeThreadNumRes)}var res=wasmplayer.JSPlayM4_Fast();console.log("res",res)}},{key:"JS_Slow",value:function JS_Slow(){var nextRate=this.iRate;switch(this.iRate){case 2:nextRate=1;break;case 4:nextRate=2;break;default:nextRate=this.iRate;break}this.oStreamClient.setPlayRate(this.szStreamUUID,nextRate);this.iRate=nextRate;console.log("开启倍速播放",nextRate)}},{key:"JS_Speed",value:function JS_Speed(nextRate){var wasmplayer=window["wasmplayer-".concat(this.szId)];this.oStreamClient.setPlayRate(this.szStreamUUID,nextRate!==3?nextRate:.5);if(this.iRate===3){if(nextRate===1){wasmplayer.JSPlayM4_Fast()}if(nextRate===2){wasmplayer.JSPlayM4_Fast();wasmplayer.JSPlayM4_Fast()}if(nextRate===4){wasmplayer.JSPlayM4_Fast();wasmplayer.JSPlayM4_Fast();wasmplayer.JSPlayM4_Fast()}}if(this.iRate===1){if(nextRate===3){wasmplayer.JSPlayM4_Slow()}if(nextRate===2){wasmplayer.JSPlayM4_Fast()}if(nextRate===4){wasmplayer.JSPlayM4_Fast();wasmplayer.JSPlayM4_Fast()}}if(this.iRate===2){if(nextRate===1){wasmplayer.JSPlayM4_Slow()}if(nextRate===3){wasmplayer.JSPlayM4_Slow();wasmplayer.JSPlayM4_Slow()}if(nextRate===4){wasmplayer.JSPlayM4_Fast()}}if(this.iRate===4){if(nextRate===1){wasmplayer.JSPlayM4_Slow();wasmplayer.JSPlayM4_Slow()}if(nextRate===2){wasmplayer.JSPlayM4_Slow()}if(nextRate===3){wasmplayer.JSPlayM4_Slow();wasmplayer.JSPlayM4_Slow();wasmplayer.JSPlayM4_Slow()}}if(nextRate==4){wasmplayer.JSPlayM4_SetDecodeThreadNum(4)}this.iRate=nextRate;console.log("开启倍速播放",nextRate)}},{key:"JS_Seek",value:function JS_Seek(iWndNum,szStartTime,szStopTime){var _this14=this;var oPromise=new Promise(function(resolve,reject){var wasmplayer=window["wasmplayer-".concat(_this14.szId)];var res=wasmplayer.JSPlayM4_ResetBuffer(1);console.log("seek 清理缓存",res);_this14.oStreamClient.seek(_this14.szStreamUUID,szStartTime,szStopTime);resolve()});return oPromise}},{key:"JSPlayM4_SetPrintLogFlag",value:function JSPlayM4_SetPrintLogFlag(){var wasmplayer=window["wasmplayer-".concat(this.szId)];var resDR=wasmplayer.JSPlayM4_SetPrintLogFlag(2);console.log("LogValue:"+2+",resDR:"+resDR)}},{key:"JSPlayM4_SetDisplayRegion",value:function JSPlayM4_SetDisplayRegion(left,right,top,bottom){var _this15=this;new Promise(function(resolve,reject){var wasmplayer=window["wasmplayer-".concat(_this15.szId)];var resDR=wasmplayer.JSPlayM4_SetDisplayRegion("".concat(_this15.szId,"-player"),left,right,top,bottom,false,true);resolve({code:0,data:resDR})})}},{key:"JS_Pause",value:function JS_Pause(iWndNum,date){var _this16=this;if(!this.bPlay){console.log("当前不是播放状态，无法暂停");return new Promise(function(resolve,reject){reject({code:0,msg:"当前不是播放状态，不需要暂停"})})}var that=this;var wasmplayer=window["wasmplayer-".concat(that.szId)];var oFrameInfo=wasmplayer.JSPlayM4_GetFrameInfo();var year=oFrameInfo.year;var month=oFrameInfo.month;var day=oFrameInfo.day;var hour=oFrameInfo.hour;var minute=oFrameInfo.minute;var second=oFrameInfo.second;var time=new Date(oTool.isIOS()||oTool.isSafari()||oTool.isEdge()?"".concat(year,"/").concat(month,"/").concat(day," ").concat(hour,":").concat(minute,":").concat(second):"".concat(year,"-").concat(month,"-").concat(day," ").concat(hour,":").concat(minute,":").concat(second)).getTime()/1e3;var pauseDate=new Date(time*1e3);that.bPauseDate=pauseDate.valueOf();that.bPauseTime="".concat(year)+(month>9?month:"0".concat(month))+(day>9?day:"0".concat(day))+(hour>9?hour:"0".concat(hour))+(minute>9?minute:"0".concat(minute))+(second>9?second:"0".concat(second));console.log("this.bPauseDate:::",that.bPauseDate);console.log("this.bPauseTime:::",that.bPauseTime);var promise=new Promise(function(resolve,reject){if(date){that.JS_Stop().then(function(){that.bPlay=false;that.bPause=true;that.bPauseDate=date.valueOf();resolve({code:1,msg:"暂停成功",pauseDate:pauseDate})})["catch"](function(err){reject({code:0,msg:"暂停失败"});console.log("err",err)})}else{that.oStreamClient.stopAll();var res=wasmplayer.JSPlayM4_Pause(1);if(res){that.bPlay=false;that.bPlayIng=false;that.bPause=true;if(that.szStorageUUID){_this16.JS_StopSave()}resolve({pauseDate:pauseDate})}else{reject()}}});return promise}},{key:"JS_Resume",value:function JS_Resume(resumeTime){var that=this;var wasmplayer=window["wasmplayer-".concat(that.szId)];var rePlay=false;var promise=new Promise(function(resolve,reject){if(resumeTime){if(that.bPauseTime){that.bPauseTime=that.bPauseTime.slice(0,14-resumeTime.length)+resumeTime}else{rePlay=true;that.bPauseTime=resumeTime}}if(that.playURL.indexOf("playback")!==-1){that.playURL=that.playURL.replace(/begin=[0-9]{8}T[0-9]{6}Z/gi,"begin=".concat(that.bPauseTime.slice(0,8),"T").concat(that.bPauseTime.slice(8,14),"Z"))}if(that.playURL.indexOf("cloudplayback")!==-1){that.playURL=that.playURL.replace(/"startTime":[0-9]{13}/gi,'"startTime":'.concat(that.bPauseDate))}if(resumeTime&&!rePlay){that.JS_Play(that.szUrl,{playURL:that.playURL}).then(function(data){resolve(data)})["catch"](function(err){reject(err)})}else{that.oStreamClient.openStream(that.szUrl,{playURL:that.playURL},function(data){if(data.errorCode&&data.errorCode!="1"){if(that.EventCallback&&that.EventCallback.pluginErrorHandler){that.EventCallback.pluginErrorHandler(that.g_port,data.errorCode,data)}reject()}if(data.bHead){if(that.EventCallback&&that.EventCallback.getStreamHeaderCallback){that.EventCallback.getStreamHeaderCallback()}that.aHead=new Uint8Array(data.buf);if(!!that.secretKey){wasmplayer.JSPlayM4_SetSecretKey(that.secretKey)}}else{if(that.firstGetData){that.firstGetData=false;if(that.EventCallback&&that.EventCallback.getVideoStreamCallback){that.EventCallback.getVideoStreamCallback()}}if(that.firstFlag){var oFrameInfo=wasmplayer.JSPlayM4_GetFrameInfo();var nWidth=oFrameInfo.width;var nHeight=oFrameInfo.height;that.nWidth=nWidth;that.nHeight=nHeight;if(nWidth){if(that.EventCallback&&that.EventCallback.appearFirstFrameCallback){that.EventCallback.appearFirstFrameCallback()}if(that.EventCallback&&that.EventCallback.averageStreamSuccessCallback){that.EventCallback.averageStreamSuccessCallback()}that.firstFlag=false}}var aBuffer=new Uint8Array(data.buf);if(data.statusString){if(that.EventCallback&&that.EventCallback.pluginErrorHandler){that.EventCallback.pluginErrorHandler(0,1001,data)}}else if(data.type&&data.type==="exception"){if(that.EventCallback&&that.EventCallback.pluginErrorHandler){that.EventCallback.pluginErrorHandler(0,1002,data)}}wasmplayer.JSPlayM4_InputData(aBuffer,aBuffer.length);aBuffer=null}if(that.szStorageUUID){that.oStorageManager.inputData(that.szStorageUUID,data.buf)}},function(){if(that.bPlay){if(that.EventCallback&&that.EventCallback.pluginErrorHandler){that.EventCallback.pluginErrorHandler(0,1003)}}that.bPlayIng=false;reject()}).then(function(id){that.szStreamUUID=id;that.oStreamClient.startPlay(id).then(function(){var res=wasmplayer.JSPlayM4_Pause(0);if(res){that.bPlay=true;that.bPlayIng=true;that.bPause=false;that.bPauseDate=null;resolve(res)}else{reject()}})["catch"](function(err){that.bPlayIng=false;reject(err.oError)})},function(oError){that.bPlayIng=false;that._doRelease();reject(oError)})}});return promise}},{key:"JS_FECCorrectType",value:function JS_FECCorrectType(type,ids){var _this17=this;this.FECSplitIds=ids;this.correctType=type;return new Promise(function(resolve,reject){var res=_this17._createSplitVideos(type,ids);var hasErr=res.find(function(item){return item.code===-1});if(hasErr||res.length===0){reject(res)}else{resolve(res)}})}},{key:"JS_FECSetParam2D",value:function JS_FECSetParam2D(fishSubPort,param2d){var wasmplayer=window["wasmplayer-".concat(this.szId)];return wasmplayer.JSPlayM4_FEC_SetParam(fishSubPort,param2d)}},{key:"_createSplitVideos",value:function _createSplitVideos(type,ids){var that=this;var mainCanvasID="".concat(that.szId,"-player");ids=mainCanvasID+","+ids;var idsArr=ids?ids.split(","):[];var wasmplayer=window["wasmplayer-".concat(that.szId)];var result=[];if(type.correctList&&type.correctList.length>0){for(var _i16=0;_i16<type.correctList.length;_i16++){if(_i16===0&&type.correctList[_i16].hidden){continue}if(_i16===0){setMainCorrectType(type.correctList[0]);continue}if(!idsArr[_i16]||!document.getElementById(idsArr[_i16])||document.getElementById(idsArr[_i16]).nodeName!=="CANVAS"){return[]}var fishSubPort=wasmplayer.JSPlayM4_FEC_GetPort(type.place,type.correctList[_i16].correctType);var resE=wasmplayer.JSPlayM4_FEC_Enable(fishSubPort);var resFECSW=wasmplayer.JSPlayM4_FEC_SetWnd(fishSubPort,idsArr[_i16]);var param2d={upDateType:that._matchUpDateType(type.correctList[_i16].correctType),fValue:0,fPTZParam:{fPTZPositionX:type.correctList[_i16].x||0,fPTZPositionY:type.correctList[_i16].y||0},fPTZZoom:1e-5};var resParam=that.JS_FECSetParam2D(fishSubPort,param2d);if(resE===0||resFECSW===0||resParam===0){result.push({code:-1,msg:"失败",port:fishSubPort,id:idsArr[_i16]})}else{result.push({code:0,msg:"成功",port:fishSubPort,id:idsArr[_i16]});that.canvasFECSubPort.set(idsArr[_i16],_objectSpread2(_objectSpread2({},defaultCoors),{},{port:fishSubPort,param2d:param2d,startPTZPosition:{x:param2d.fPTZParam.fPTZPositionX,y:param2d.fPTZParam.fPTZPositionY}}));document.getElementById(idsArr[_i16]).setAttribute("data-port",fishSubPort);that._spliceCanvasMouseEvents(idsArr[_i16],type.correctList[_i16])}}}else{setMainCorrectType(type)}function setMainCorrectType(typeItem){var param2d={upDateType:that._matchUpDateType(typeItem.correctType),fValue:0,fPTZParam:{fPTZPositionX:typeItem.x||0,fPTZPositionY:typeItem.y||0},fPTZZoom:1e-5};var _that$canvasFECSubPor=that.canvasFECSubPort.get(mainCanvasID),port=_that$canvasFECSubPor.port;if(port===undefined){console.log("this canvas not display");return result}var mainRes=wasmplayer.JSPlayM4_FEC_ResetCorrectType(port,type.place,typeItem.correctType);if(mainRes===1){result.push({code:0,msg:"成功",port:port,id:mainCanvasID})}else{result.push({code:-1,msg:"失败",port:port,id:mainCanvasID});return}if(typeItem.correctType<=FEC_CORRECT_360)that.JS_FECSetParam2D(port,param2d);else{if(typeItem.viewParam){setTimeout(function(){if(typeof typeItem.viewParam.x==="number"&&typeof typeItem.viewParam.y==="number"){wasmplayer.JSPlayM4_FEC_SetViewParam(port,2,typeItem.viewParam.x);wasmplayer.JSPlayM4_FEC_SetViewParam(port,1,typeItem.viewParam.y)}if(typeof typeItem.viewParam.zoom==="number"){wasmplayer.JSPlayM4_FEC_SetViewParam(port,3,typeItem.viewParam.zoom)}},200)}}that.canvasFECSubPort.set(mainCanvasID,_objectSpread2(_objectSpread2({},defaultCoors),{},{port:port,param2d:param2d,startPTZPosition:{x:param2d.fPTZParam.fPTZPositionX,y:param2d.fPTZParam.fPTZPositionY}}));that._spliceCanvasMouseEvents(mainCanvasID,typeItem)}return result}},{key:"_matchUpDateType",value:function _matchUpDateType(correctType){switch(correctType){case FEC_CORRECT_360:return 4;case FEC_CORRECT_PTZ:return 8}return 2}},{key:"_spliceCanvasMouseEvents",value:function _spliceCanvasMouseEvents(canvasId,type){if(canvasId===undefined){return}var canvas=document.getElementById(canvasId);if(canvas===null){return}var that=this;var wasmplayer=window["wasmplayer-".concat(that.szId)];var canvasID=canvas.getAttribute("id");var coords=that.canvasFECSubPort.get(canvasID);if(coords.port===undefined){return}var canvasWidth=canvas.width;var canvasHeight=canvas.height;function showCoords(e){var arCoords=[e.clientX,e.clientY];coords.diff.y=arCoords[1]-coords.start.y;var inputYValue=(coords.total.y+coords.diff.y)/canvasHeight*2*Math.PI;var moveLenY=(arCoords[1]-coords.lastCorrdsY)/(canvasHeight*2);var alpha=Math.atan2(coords.startPTZPosition.y-.5,coords.startPTZPosition.x-.5);var PTZPositionX1=coords.startPTZPosition.x+moveLenY*Math.cos(alpha);var PTZPositionY1=coords.startPTZPosition.y+moveLenY*Math.sin(alpha);coords.diff.x=arCoords[0]-coords.start.x;var inputXValue=(coords.total.x+coords.diff.x)/canvasWidth*2*Math.PI;var R=Math.sqrt(Math.pow(PTZPositionX1-.5,2)+Math.pow(PTZPositionY1-.5,2));var theta=-inputXValue;var PTZPositionX=.5+R*Math.cos(theta);var PTZPositionY=.5+R*Math.sin(theta);if(type.correctType<=FEC_CORRECT_360){switch(type.correctType){case FEC_CORRECT_360:coords.param2d.upDateType=4;break;case FEC_CORRECT_180:coords.param2d.upDateType=4;break;case FEC_CORRECT_PTZ:coords.param2d.upDateType=8;var len=Math.sqrt(Math.pow(PTZPositionX-.5,2)+Math.pow(PTZPositionY-.5,2));if(len>.4){return}break}coords.param2d.fValue=inputXValue;coords.param2d.fPTZParam.fPTZPositionX=PTZPositionX;coords.param2d.fPTZParam.fPTZPositionY=PTZPositionY;wasmplayer.JSPlayM4_FEC_SetParam(coords.port,coords.param2d)}else if(type.correctType===FEC_CORRECT_CYLINDER){wasmplayer.JSPlayM4_FEC_SetViewParam(coords.port,2,inputXValue);wasmplayer.JSPlayM4_FEC_SetViewParam(coords.port,1,inputYValue)}}var _moveFn=function _moveFn(){};function _canvasMouseDown(event){coords.start.x=event.pageX;coords.start.y=event.pageY;coords.lastCorrdsY=event.pageY;_moveFn=function _moveFn(e){showCoords(e)};canvas.addEventListener("mousemove",_moveFn)}canvas.addEventListener("mousedown",_canvasMouseDown);var removeMoveEvent=function removeMoveEvent(){if(_moveFn!==null){canvas.removeEventListener("mousemove",_moveFn);_moveFn=null;coords.total.x+=coords.diff.x;coords.total.y+=coords.diff.y}};canvas.addEventListener("mouseup",removeMoveEvent);canvas.addEventListener("mouseleave",removeMoveEvent);canvas.addEventListener("mouseout",removeMoveEvent)}},{key:"_colseFECAllSubWnd",value:function _colseFECAllSubWnd(){if(this.FECSplitIds&&this.canvasFECSubPort){var ids=this.FECSplitIds.split(",");var _iterator=_createForOfIteratorHelper(ids),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var id=_step.value;if(id){var canvasFECSubPortItem=this.canvasFECSubPort.get(id);if(canvasFECSubPortItem===undefined||canvasFECSubPortItem.port===undefined){continue}this.canvasFECSubPort["delete"](id);var wasmplayer=window["wasmplayer-".concat(this.szId)];wasmplayer.JSPlayM4_FEC_Disable(canvasFECSubPortItem.port,true);wasmplayer.JSPlayM4_FEC_DelPort(canvasFECSubPortItem.port)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}},{key:"FEC_Set3DViewParam",value:function FEC_Set3DViewParam(param){var wasmplayer=window["wasmplayer-".concat(this.szId)];if(this.FECSplitIds&&this.canvasFECSubPort&&this.correctType){var res=wasmplayer.JSPlayM4_FEC_SetViewParam(param.port,param.upDateType,param.fValue);if(res===1){return Promise.resolve(true)}else{return Promise.reject(false)}}return Promise.reject(undefined)}},{key:"FEC_Get3DViewParam",value:function FEC_Get3DViewParam(param){var _this18=this;var wasmplayer=window["wasmplayer-".concat(this.szId)];return new Promise(function(resolve,reject){var cb=function cb(Param3D){resolve(Param3D)};if(_this18.FECSplitIds&&_this18.canvasFECSubPort&&_this18.correctType){var res=wasmplayer.JSPlayM4_FEC_GetViewParam(param.port,param.upDateType,cb);if(res!==1){return reject(false)}}return reject(undefined)})}},{key:"JS_SetWaterMarkFont",value:function JS_SetWaterMarkFont(params){var wasmplayer=window["wasmplayer-".concat(this.szId)];return new Promise(function(resolve,reject){console.log("水印参数：",params);var res;if(params&&!!params.fontString){res=wasmplayer.JSPlayM4_SetWaterMarkFont({pFontString:params.fontString,pstStartPos:params.startPos,pstFontColor:params.fontColor,pstFontSize:params.fontSize,pstFontRotate:params.fontRotate,pstFontNumber:params.fontNumber,pFontFamily:params.fontFamily,pSpace:params.space})}else{res=wasmplayer.JSPlayM4_SetWaterMarkFont(null)}if(res===1){resolve({code:0,msg:"水印设置成功"})}else{reject({code:-1,msg:res})}})}}]);return JSPluginV3}();window.JSPluginV3=JSPluginV3;return JSPluginV3})})(jsPluginV31_0_0_min);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var __instance=function(){var instance=void 0;return function(newInstance){if(newInstance)instance=newInstance;return instance}}();(function(){function AudioRenderer(){_classCallCheck(this,AudioRenderer);if(__instance())return __instance();if(AudioRenderer.unique!==undefined){return AudioRenderer.unique}AudioRenderer.unique=this;this.oAudioContext=null;this.currentVolume=80;this.bSetVolume=false;this.gainNode=null;this.iWndNum=-1;this.mVolumes=new Map;var AudioContext=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new AudioContext;this.writeString=function(view,offset,string){for(var i=0;i<string.length;i++){view.setUint8(offset+i,string.charCodeAt(i))}};this.setBufferToDataview=function(output,offset,input){for(var i=0;i<input.length;i++,offset++){output.setUint8(offset,input[i])}};__instance(this)}_createClass(AudioRenderer,[{key:"Play",value:function Play(dataBuf,dataLen,audioInfo){var bufferData=new ArrayBuffer(44+dataLen);var viewTalk=new DataView(bufferData);var sampleRates=audioInfo.samplesPerSec;var channels=audioInfo.channels;var bitsPerSample=audioInfo.bitsPerSample;this.writeString(viewTalk,0,"RIFF");viewTalk.setUint32(4,32+dataLen*2,true);this.writeString(viewTalk,8,"WAVE");this.writeString(viewTalk,12,"fmt ");viewTalk.setUint32(16,16,true);viewTalk.setUint16(20,1,true);viewTalk.setUint16(22,channels,true);viewTalk.setUint32(24,sampleRates,true);viewTalk.setUint32(28,sampleRates*2,true);viewTalk.setUint16(32,channels*bitsPerSample/8,true);viewTalk.setUint16(34,bitsPerSample,true);this.writeString(viewTalk,36,"data");viewTalk.setUint32(40,dataLen,true);this.setBufferToDataview(viewTalk,44,dataBuf);var self=this;this.oAudioContext.decodeAudioData(viewTalk.buffer,function(buffer){var bufferSource=self.oAudioContext.createBufferSource();if(bufferSource==null){return-1}bufferSource.buffer=buffer;bufferSource.start(0);if(self.gainNode==null||self.bSetVolume){self.gainNode=self.oAudioContext.createGain();self.bSetVolume=false}self.gainNode.gain.value=self.currentVolume/100;self.gainNode.connect(self.oAudioContext.destination);bufferSource.connect(self.gainNode)},function(e){console.log("decode error");return-1});return 0}},{key:"Stop",value:function Stop(){if(this.gainNode!=null){this.gainNode.disconnect();this.gainNode=null}return true}},{key:"SetVolume",value:function SetVolume(iVolume){this.bSetVolume=true;this.currentVolume=iVolume;this.mVolumes.set(this.iWndNum,this.currentVolume);return true}},{key:"SetWndNum",value:function SetWndNum(iWndNum){this.iWndNum=iWndNum;var iVolume=this.mVolumes.get(iWndNum);if(iVolume==undefined){iVolume=80}this.currentVolume=iVolume;return true}},{key:"GetVolume",value:function GetVolume(){var iVolume=this.mVolumes.get(this.iWndNum);if(iVolume==undefined){iVolume=80}return iVolume}}]);window.AudioRenderer=AudioRenderer;return AudioRenderer})();var vertexYUVShader=["attribute vec4 vertexPos;","attribute vec2 texturePos;","varying vec2 textureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos;","}"].join("\n");var fragmentYUVShader=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","const mat4 YUV2RGB = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","void main(void) {","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u = texture2D(uSampler,  textureCoord).r;","highp float v = texture2D(vSampler,  textureCoord).r;","gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n");(function(root,factory){window.SuperRender=factory()})(undefined,function(){function RenderManager(canvas){this.canvasElement=document.getElementById(canvas);this.initContextGL();if(this.contextGL){this.YUVProgram=this.initProgram(vertexYUVShader,fragmentYUVShader);this.initBuffers();this.initTextures()}}RenderManager.prototype.initContextGL=function(){var canvas=this.canvasElement;var gl=null;try{gl=canvas.getContext("webgl")||canvas.getContext("experimental-webgl")}catch(e){gl=null}if(!gl||typeof gl.getParameter!=="function"){gl=null}this.contextGL=gl;console.log("WebGL1.0")};RenderManager.prototype.initProgram=function(vertexShaderScript,fragmentShaderScript){var gl=this.contextGL;var vertexShader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(vertexShader,vertexShaderScript);gl.compileShader(vertexShader);if(!gl.getShaderParameter(vertexShader,gl.COMPILE_STATUS)){console.log("Vertex shader failed to compile: "+gl.getShaderInfoLog(vertexShader))}var fragmentShader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(fragmentShader,fragmentShaderScript);gl.compileShader(fragmentShader);if(!gl.getShaderParameter(fragmentShader,gl.COMPILE_STATUS)){console.log("Fragment shader failed to compile: "+gl.getShaderInfoLog(fragmentShader))}var program=gl.createProgram();gl.attachShader(program,vertexShader);gl.attachShader(program,fragmentShader);gl.linkProgram(program);if(!gl.getProgramParameter(program,gl.LINK_STATUS)){console.log("Program failed to compile: "+gl.getProgramInfoLog(program))}gl.deleteShader(vertexShader);gl.deleteShader(fragmentShader);return program};RenderManager.prototype.initBuffers=function(){var gl=this.contextGL;var vertexPosBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexPosBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),gl.STATIC_DRAW);gl.bindBuffer(gl.ARRAY_BUFFER,null);var texturePosBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,texturePosBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),gl.DYNAMIC_DRAW);gl.bindBuffer(gl.ARRAY_BUFFER,null);this.vertexPosBuffer=vertexPosBuffer;this.texturePosBuffer=texturePosBuffer};RenderManager.prototype.initTexture=function(){var gl=this.contextGL;var textureRef=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,textureRef);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.bindTexture(gl.TEXTURE_2D,null);return textureRef};RenderManager.prototype.initTextures=function(){var gl=this.contextGL;var program=this.YUVProgram;gl.useProgram(program);var yTextureRef=this.initTexture();var ySamplerRef=gl.getUniformLocation(program,"ySampler");gl.uniform1i(ySamplerRef,0);this.yTextureRef=yTextureRef;var uTextureRef=this.initTexture();var uSamplerRef=gl.getUniformLocation(program,"uSampler");gl.uniform1i(uSamplerRef,1);this.uTextureRef=uTextureRef;var vTextureRef=this.initTexture();var vSamplerRef=gl.getUniformLocation(program,"vSampler");gl.uniform1i(vSamplerRef,2);this.vTextureRef=vTextureRef;gl.useProgram(null)};RenderManager.prototype.SR_DisplayFrameData=function(nWidth,nHeight,pData,dWidth,dHeight){if(nWidth<=0||nHeight<=0){return}var gl=this.contextGL;if(null==pData){gl.clearColor(0,0,0,0);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);return}var canvas=this.canvasElement;this.nWindowWidth=canvas.width;this.nWindowHeight=canvas.height;var nWindowWidth=this.nWindowWidth;var nWindowHeight=this.nWindowHeight;gl.clearColor(.8,.8,1,1);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);gl.viewport(0,0,nWindowWidth,nWindowHeight);this.updateFrameData(nWidth,nHeight,pData,dWidth,dHeight);var program=this.YUVProgram;gl.useProgram(program);var vertexPosBuffer=this.vertexPosBuffer;gl.bindBuffer(gl.ARRAY_BUFFER,vertexPosBuffer);var vertexPosRef=gl.getAttribLocation(program,"vertexPos");gl.enableVertexAttribArray(vertexPosRef);gl.vertexAttribPointer(vertexPosRef,2,gl.FLOAT,false,0,0);gl.bindBuffer(gl.ARRAY_BUFFER,null);var texturePosBuffer=this.texturePosBuffer;gl.bindBuffer(gl.ARRAY_BUFFER,texturePosBuffer);var texturePosRef=gl.getAttribLocation(program,"texturePos");gl.enableVertexAttribArray(texturePosRef);gl.vertexAttribPointer(texturePosRef,2,gl.FLOAT,false,0,0);gl.bindBuffer(gl.ARRAY_BUFFER,null);gl.drawArrays(gl.TRIANGLE_STRIP,0,4);gl.disableVertexAttribArray(vertexPosRef);gl.disableVertexAttribArray(texturePosRef);gl.useProgram(null)};RenderManager.prototype.updateFrameData=function(width,height,data,dWidth,dHeight){var gl=this.contextGL;var yTextureRef=this.yTextureRef;var uTextureRef=this.uTextureRef;var vTextureRef=this.vTextureRef;var i420Data=data;if(width==dWidth&&height==dHeight){var yDataLength=width*height;var yData=i420Data.subarray(0,yDataLength);gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,yTextureRef);gl.texImage2D(gl.TEXTURE_2D,0,gl.LUMINANCE,width,height,0,gl.LUMINANCE,gl.UNSIGNED_BYTE,yData);var cbDataLength=width/2*height/2;var cbData=i420Data.subarray(width*height,width*height+cbDataLength);gl.activeTexture(gl.TEXTURE2);gl.bindTexture(gl.TEXTURE_2D,vTextureRef);gl.texImage2D(gl.TEXTURE_2D,0,gl.LUMINANCE,width/2,height/2,0,gl.LUMINANCE,gl.UNSIGNED_BYTE,cbData);var crDataLength=cbDataLength;var crData=i420Data.subarray(width*height+width*height/4,width*height+width*height/4+crDataLength);gl.activeTexture(gl.TEXTURE1);gl.bindTexture(gl.TEXTURE_2D,uTextureRef);gl.texImage2D(gl.TEXTURE_2D,0,gl.LUMINANCE,width/2,height/2,0,gl.LUMINANCE,gl.UNSIGNED_BYTE,crData)}else{var yDataLength=dWidth*dHeight;var yData=new Uint8Array(yDataLength);for(var i=0;i<dHeight;i++){var ySonData=i420Data.subarray(i*width,i*width+dWidth);for(var j=0;j<dWidth;j++){yData[i*dWidth+j]=ySonData[j]}}gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,yTextureRef);gl.texImage2D(gl.TEXTURE_2D,0,gl.LUMINANCE,dWidth,dHeight,0,gl.LUMINANCE,gl.UNSIGNED_BYTE,yData);yData=null;ySonData=null;var cbDataLength=dWidth/2*dHeight/2;var cbData=new Uint8Array(cbDataLength);for(var i=0;i<dHeight/2;i++){var cbSonData=i420Data.subarray(width*height+i*width/2,width*height+i*width/2+dWidth/2);for(var j=0;j<dWidth/2;j++){cbData[i*dWidth/2+j]=cbSonData[j]}}gl.activeTexture(gl.TEXTURE2);gl.bindTexture(gl.TEXTURE_2D,vTextureRef);gl.texImage2D(gl.TEXTURE_2D,0,gl.LUMINANCE,dWidth/2,dHeight/2,0,gl.LUMINANCE,gl.UNSIGNED_BYTE,cbData);cbData=null;cbSonData=null;var crDataLength=cbDataLength;var crData=new Uint8Array(crDataLength);for(var i=0;i<dHeight/2;i++){var crSonData=i420Data.subarray(width*height*5/4+i*width/2,width*height*5/4+i*width/2+dWidth/2);for(var j=0;j<dWidth/2;j++){crData[i*dWidth/2+j]=crSonData[j]}}gl.activeTexture(gl.TEXTURE1);gl.bindTexture(gl.TEXTURE_2D,uTextureRef);gl.texImage2D(gl.TEXTURE_2D,0,gl.LUMINANCE,dWidth/2,dHeight/2,0,gl.LUMINANCE,gl.UNSIGNED_BYTE,crData);crData=null;crSonData=null}};RenderManager.prototype.SR_SetDisplayRect=function(stDisplayRect){var gl=this.contextGL;var nWindowWidth=this.nWindowWidth;var nWindowHeight=this.nWindowHeight;var texturePosValues=null;if(stDisplayRect&&nWindowWidth>0&&nWindowHeight>0){var fLeft=stDisplayRect.left/nWindowWidth;var fTop=stDisplayRect.top/nWindowHeight;var fRight=stDisplayRect.right/nWindowWidth;var fBottom=stDisplayRect.bottom/nWindowHeight;texturePosValues=new Float32Array([fRight,fTop,fLeft,fTop,fRight,fBottom,fLeft,fBottom])}else{texturePosValues=new Float32Array([1,0,0,0,1,1,0,1])}var texturePosBuffer=this.texturePosBuffer;gl.bindBuffer(gl.ARRAY_BUFFER,texturePosBuffer);gl.bufferSubData(gl.ARRAY_BUFFER,0,texturePosValues);gl.bindBuffer(gl.ARRAY_BUFFER,null)};RenderManager.prototype.SR_Destroy=function(){var gl=this.contextGL;var YUVProgram=this.YUVProgram;gl.deleteProgram(YUVProgram);var vertexPosBuffer=this.vertexPosBuffer;var texturePosBuffer=this.texturePosBuffer;gl.deleteBuffer(vertexPosBuffer);gl.deleteBuffer(texturePosBuffer);var yTextureRef=this.yTextureRef;var uTextureRef=this.uTextureRef;var vTextureRef=this.vTextureRef;gl.deleteTexture(yTextureRef);gl.deleteTexture(uTextureRef);gl.deleteTexture(vTextureRef)};return RenderManager});var uikitStaticDomain="https://openstatic.ys7.com";var uikitStaticPathV3="".concat(uikitStaticDomain,"/ezuikit_js/v1.2.33/ezuikit_static/v65/v3");var matchTemplate=function matchTemplate(templateName,params){var IFRAMETEMPLATE=["theme","standard"];var LOCALTEMPLATE=["pcLive","pcRec","mobileLive","mobileRec","noData","security","voice","simple","mobileCall","miniRec"];if(typeof templateName==="undefined"){if(params.themeData){return{templateType:"themeData",templateId:"themeData"}}return{templateType:"local",templateId:""}}if(typeof templateName==="string"){if(templateName.length===32){return{templateType:"remote",templateId:templateName}}else if(IFRAMETEMPLATE.indexOf(templateName)!==-1){if(templateName==="simple"&&typeof params.header==="undefined"&&typeof params.footer==="undefined"){return{templateType:"local",templateId:""}}return{templateType:"iframe",templateId:templateName}}else if(LOCALTEMPLATE.indexOf(templateName)!==-1){if(params.url.indexOf("rec")!=-1&&params.template!="simple"&&params.id!="miniRec"){return{templateType:"local",templateId:isMobile()?"mobileRec":"pcRec"}}return{templateType:"local",templateId:templateName}}else{if(!!params&&params.isCall){return{templateType:"invalid",templateId:templateName}}}}};var isVersion2Available=function isVersion2Available(){var ua=window.navigator.userAgent.toLowerCase();var info={sa:/version.*safari/.test(ua),ch:/chrome/.test(ua),ff:/gecko/.test(ua)&&!/webkit/.test(ua)};if(isMobile()){return false}else if(info.ch){var getChromeVersion=function getChromeVersion(){var arr=window.navigator.userAgent.split(" ");var chromeVersion="";for(var i=0;i<arr.length;i++){if(/chrome/i.test(arr[i]))chromeVersion=arr[i]}if(chromeVersion){return Number(chromeVersion.split("/")[1].split(".")[0])}else{return false}};return getChromeVersion()>91&&!!window.SharedArrayBuffer}return false};var addTimeZone=function addTimeZone(date,hours){var plusHoursInMilliseconds=hours*60*60*1e3;var newTimestamp=date.getTime()+plusHoursInMilliseconds;return new Date(newTimestamp)};var formatDateString=function formatDateString(dateString){var year=parseInt(dateString.substring(0,4),10);var month=parseInt(dateString.substring(4,6),10)-1;var day=parseInt(dateString.substring(6,8),10);var hour=parseInt(dateString.substring(8,10),10);var minute=parseInt(dateString.substring(10,12),10);var second=parseInt(dateString.substring(12,14),10);return new Date(year,month,day,hour,minute,second)};function formatDateToString(date){if(_typeof(date)!=="object"){date=new Date(date)}var year=date.getFullYear();var month=(date.getMonth()+1).toString().padStart(2,"0");var day=date.getDate().toString().padStart(2,"0");var hour=date.getHours().toString().padStart(2,"0");var minute=date.getMinutes().toString().padStart(2,"0");var second=date.getSeconds().toString().padStart(2,"0");return"".concat(year).concat(month).concat(day).concat(hour).concat(minute).concat(second)}var EZUIKitPlayer=function(){function EZUIKitPlayer(params){var _this=this;_classCallCheck$1(this,EZUIKitPlayer);this.isStoping=false;var _params$autoplay=params.autoplay,autoplay=_params$autoplay===void 0?true:_params$autoplay;if(params.template||params.themeData){autoplay=false}this.params=params;this.autoplay=autoplay;this.talkChannelNo=params.talkChannelNo||null;this.eventEmitter=new EventEmitter;this.timeZone=0;window.EZUIKit[params.id]={state:{EZUIKitPlayer:{init:window.EZUIKit[params.id]&&window.EZUIKit[params.id].state&&window.EZUIKit[params.id].state.EZUIKitPlayer.init||false,themeInit:window.EZUIKit[params.id]&&window.EZUIKit[params.id].state&&window.EZUIKit[params.id].state.EZUIKitPlayer.themeInit||false,talkInit:window.EZUIKit[params.id]&&window.EZUIKit[params.id].state&&window.EZUIKit[params.id].state.EZUIKitPlayer.talkInit||false}}};if(matchTemplate(this.params.template,params).templateType!=="iframe"){this.id=params.id;this.width=params.width;this.height=params.height;this.fullScreenWidth=0;this.fullScreenHeight=0;this.isCall=params.isCall||false;this.isWebConsole=params.isWebConsole||false;this.callTime=params.callTime||null;this.hangUpCallback=params.hangUpCallback||null;this.isNeedBellRing=params.isNeedBellRing===false?false:true;this.url=params.url;this.accessToken=params.accessToken;this.deviceSerial=matchEzopenUrl(params.url).deviceSerial;this.channelNo=matchEzopenUrl(params.url).channelNo;this.themeId=matchTemplate(params.template,params).templateId;this.sourceThemeId=matchTemplate(params.template,params).templateId;this.id=params.id;this.audio=true;this.poster=params.poster;this.speed=1;this.disabledTimeLine=false;this.disabledPTZ=false;this.enableSharedArrayBufferGuide=false;this.capacity=null;this.playTimer=null;this.env={domain:"https://open.ys7.com"};this.isMobile=isMobile();this.support3DZoom=false;this.use3DZoom=false;this.is3DZooming=false;this.useHardDev=typeof params.useHardDev!=="undefined"?params.useHardDev:false;this.host="open.ys7.com";this.waterMark_JSPlugin=false;this.isInspect=params.isInspect||false;this.inspectRecordingDuration=params.inspectRecordingDuration||4*60*60*1e3;this.inspectVideoWidth=params.inspectVideoWidth||290;this.inspectVideoHeight=params.inspectVideoHeight||170;this._FECCorrectType=null;this._FECSplitIds="";if(document.getElementById("".concat(this.id,"-wrap"))){document.getElementById("".concat(this.id,"-wrap")).innerHTML="";document.getElementById("".concat(this.id,"-wrap")).id=this.id}this.staticPath=uikitStaticPathV3;var isV3=!this.useHardDev&&isVersion2Available()||this.useHardDev&&!this._IsSupHardDecAVC()&&!this._IsSupHardDecHEVC()&&isVersion2Available()||this.useHardDev&&(this._IsSupHardDecAVC()||this._IsSupHardDecHEVC()||isVersion2Available());this.isV3=isV3;if(typeof params.staticPath==="string"){if(params.staticPath.startsWith("http")){this.staticPath=params.staticPath}else{this.staticPath=window.location.protocol+"//"+window.location.host+params.staticPath}this.staticPath+="/v3"}if(typeof params.audio!=="undefined"){this.audio=params.audio}if(typeof params.env!=="undefined"){this.env=Object.assign(this.env,params.env)}if(typeof params.host!=="undefined"){this.host=params.host}if(typeof params.isMobile!=="undefined"){this.isMobile=params.isMobile}if(typeof params.disabledTimeLine!=="undefined"){this.disabledTimeLine=params.disabledTimeLine}if(typeof params.disabledPTZ!=="undefined"){this.disabledPTZ=params.disabledPTZ}if(typeof params.enableSharedArrayBufferGuide!=="undefined"){this.enableSharedArrayBufferGuide=params.enableSharedArrayBufferGuide}var doInit=function doInit(){if(isVersion2Available()){console.log("启用多线程解析视频")}else{var getChromeVersion=function getChromeVersion(){var arr=navigator.userAgent.split(" ");var chromeVersion="";for(var i=0;i<arr.length;i++){if(/chrome/i.test(arr[i])){chromeVersion=arr[i]}}if(chromeVersion){return Number(chromeVersion.split("/")[1].split(".")[0])}return false};if(!isMobile&&91<getChromeVersion&&_this.enableSharedArrayBufferGuide){console.log("提示用户开启谷歌实验室特性");var wapDomId="".concat(_this.id,"-wrap");var guideDom=document.createElement("div");var guideSpan=document.createElement("span");guideSpan.innerHTML="您当前浏览器可以开启谷歌实验室多线程特性，获取更好播放体验，避免浏览器卡顿及崩溃,详见";guideDom.appendChild(guideSpan);var guideLink=document.createElement("a");guideLink.href="https://open.ys7.com/help/384";guideLink.setAttribute("target","_blank");guideDom.appendChild(guideLink);guideLink.innerHTML="开启说明";guideDom.id="".concat(_this.id,"-guide");guideDom.style="font-size:12px;color:red;";setTimeout(function(){if(document.getElementById(wapDomId)){document.getElementById(wapDomId).insertBefore(guideDom,document.getElementById(_this.id))}},5e3)}}_this.pluginStatus=new Status(_this,_this.id);_this.videoInitTime=Date.now();_this.videoPlayState=1;window.monitorExtendsInfo={protocol:"ezopen",url:_this.url,serial:_this.deviceSerial,no:_this.channelNo,env:_this.env.domain,type:matchEzopenUrl(_this.url).type};var tmpParams=Object.assign({},params);delete tmpParams.accessToken;delete tmpParams.url;window.ezuikitMonitor.report({action:1,logInfo:{pluginVersion:isV3?"v3":"v1",params:tmpParams}});_this.initTime=(new Date).getTime();if(_this.autoplay){var initEZUIKitPlayerPromise=_this.initEZUIKitPlayer(params);var getRealUrlPromise=_this._getRealUrlPromise(params.accessToken,params.url);Promise.all([initEZUIKitPlayerPromise,getRealUrlPromise]).then(function(values){if(values[1]){_this.playStartTime=(new Date).getTime();_this._pluginPlay(values[1],function(){if(_this.videoPlayState===1||_this.videoPlayState===4){_this.videoPlayState=2;var now=Date.now();window.ezuikitMonitor.report({action:2,logInfo:{pluginVersion:_this.isV3?"v3":"v1",loadTime:now-_this.videoInitTime,loadTimeDesc:{initTime:_this.playStartTime-_this.videoInitTime,stopTime:0,getWsTime:_this.doCreateWsTime-_this.playStartTime,createWsTime:now-_this.doCreateWsTime}}})}console.log("自动播放成功")},function(){console.log("自动播放失败")})}else{console.log("promise of one",values)}window.EZUIKit[params.id].state.EZUIKitPlayer.init=true;if(document.getElementById("".concat(params.id,"canvas_draw0"))){document.getElementById("".concat(params.id,"canvas_draw0")).style.border="none"}})["catch"](function(err){console.log("err",err);if(_this.videoPlayState===1||_this.videoPlayState===4){_this.videoPlayState=3;var now=Date.now();window.ezuikitMonitor.report({action:3,logInfo:{pluginVersion:_this.isV3?"v3":"v1",loadTime:now-_this.videoInitTime,err:err}})}if(_this.Theme){_this.Theme.setDisabled(true)}_this.pluginStatus.loadingClear();if(_this.isInspect){_this.pluginStatus.loadingSetTextWithBtn({mask:true,maskStyle:"url(".concat(_this.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:err&&err.msg,btnName:"重试",type:1});_this.Theme.jSPlugin.Zoom&&_this.Theme.jSPlugin.Zoom.stopZoom();_this.Theme&&_this.Theme.inspect&&_this.Theme.inspect.InspectEvent&&_this.Theme.inspect.InspectEvent.disableEvidenceBtn()}else{_this.pluginStatus.loadingSetText({text:err&&err.msg||"获取播放地址失败",color:"red"})}})}else{var initEZUIKitPlayerPromise=_this.initEZUIKitPlayer(params);initEZUIKitPlayerPromise.then(function(data){console.log("初始化成功",data);window.EZUIKit[params.id].state.EZUIKitPlayer.init=true;if(document.getElementById("".concat(params.id,"canvas_draw0"))){document.getElementById("".concat(params.id,"canvas_draw0")).style.border="none"}_this.initSuccessTime=(new Date).getTime()})}if(params.plugin&&params.plugin.indexOf("talk")!==-1){_this.Talk=new Talk(_this);window.EZUIKit[params.id].state.EZUIKitPlayer.talkInit=true}_this.getDeviceCapacity()};doInit()}else{return new EZUIKitV3$1.EZUIKitPlayer(params)}this.play=debounce(function(options){return _this._play(options)},500,true);this.resume=debounce(function(time){return _this._resume(time)},500,true);this.changePlayUrl=debounce(function(options,callback,reSetTheme){return _this._changePlayUrl(options,callback,reSetTheme)},500);window.addEventListener("beforeunload",function(){console.log("退出页面，停止视频流");_this.stop()})}_createClass$1(EZUIKitPlayer,[{key:"_getExplore",value:function _getExplore(){var Sys={};var ua=navigator.userAgent.toLowerCase();var s;(s=ua.match(/rv:([\d.]+)\) like gecko/))?Sys.ie=s[1]:(s=ua.match(/msie ([\d\.]+)/))?Sys.ie=s[1]:(s=ua.match(/edge\/([\d\.]+)/))?Sys.edge=s[1]:(s=ua.match(/firefox\/([\d\.]+)/))?Sys.firefox=s[1]:(s=ua.match(/(?:opera|opr).([\d\.]+)/))?Sys.opera=s[1]:(s=ua.match(/chrome\/([\d\.]+)/))?Sys.chrome=s[1]:(s=ua.match(/version\/([\d\.]+).*safari/))?Sys.safari=s[1]:0;if(Sys.chrome){var chromeStr=Sys.chrome;var startIndex=chromeStr.indexOf(".");var sn=Number(chromeStr.substring(0,startIndex));return sn}else if(Sys.ie){console.info("%c1>your browser is IE ,it does not support play without plugin","color: red")}else if(Sys.safari){console.info("%c1>your browser is safari ,it does not support softV2.0 or hard decode","color: red")}else if(Sys.firefox){console.info("%c1>your browser is Firefox ,it only support soft decode","color: red")}else{console.info("%c1>your browser does not support play without plugin","color: red")}return-1}},{key:"_IsSupHardDecAVC",value:function _IsSupHardDecAVC(callback){var chromeVersion=this._getExplore();if(chromeVersion>=94){callback&&callback(true);return true}callback&&callback(false);return false}},{key:"_IsSupHardDecHEVC",value:function _IsSupHardDecHEVC(callback){var bSupHardDecHEVC=false;var chromeVersion=this._getExplore();if(chromeVersion>=107){var config={codec:"hvc1.1.6.L123.00",hardwareAcceleration:"prefer-hardware"};if(window.VideoDecoder){VideoDecoder.isConfigSupported(config).then(function(configInfo){if(configInfo.supported){bSupHardDecHEVC=true;callback&&callback({bSupHardDecHEVC:bSupHardDecHEVC})}else{callback&&callback({bSupHardDecHEVC:bSupHardDecHEVC})}})}else{callback&&callback({bSupHardDecHEVC:bSupHardDecHEVC})}}else{callback&&callback({bSupHardDecHEVC:bSupHardDecHEVC})}}},{key:"initEZUIKitPlayer",value:function initEZUIKitPlayer(params){var _this2=this;var id=params.id,_params$width=params.width,width=_params$width===void 0?600:_params$width,_params$height=params.height,height=_params$height===void 0?400:_params$height;if(!params.width||!params.height){var videoDOMBounding=document.getElementById(id).getBoundingClientRect();if(!params.width&&videoDOMBounding.width>0){width=videoDOMBounding.width}if(!params.height&&videoDOMBounding.height>0){height=videoDOMBounding.height}}if(!document.getElementById("".concat(id,"-wrap"))){var wapDom=document.createElement("div");wapDom.id="".concat(id,"-wrap");wapDom.style="display:inline-block;width:".concat(width,"px;position:relative;vertical-align: bottom;");document.getElementById(id).parentNode.insertBefore(wapDom,document.getElementById(id));document.getElementById(id).parentNode.removeChild(document.getElementById(id));if(this.isInspect){wapDom.style.height="".concat(height,"px");this.width-=this.inspectVideoWidth;this.height-=this.inspectVideoHeight;width=this.width;height=this.height}wapDom.innerHTML="<div id=".concat(id,"></div>");document.getElementById(id).style="display:inline-block;width:".concat(width,"px;height:").concat(height,"px;");document.getElementById(id).style.verticalAlign="top"}if(Array.isArray(window.recTimer)){window.recTimer.map(function(item){clearInterval(item)})}if(this.themeId){console.log(this.themeId);if(params.isCall==true){this.Theme=new CallTheme(this,params.id)}else if(params.isInspect==true){this.Theme=new InspectTheme(this)}else{this.Theme=new Theme(this,params.id)}window.EZUIKit[params.id].state.EZUIKitPlayer.themeInit=true;if(typeof this.params.handleThemeChange==="function"){this.handleThemeChange=this.params.handleThemeChange}}var pluginMessage=new Message$1(this,id);this.Message=pluginMessage;var initDecoder=function initDecoder(resolve,reject){console.log("开始初始化decoder：",(new Date).getTime());var that=_this2;_this2.randomNum=Math.random();window.randomNum=_this2.randomNum;var jSPlugin=new window.JSPluginV3({szId:id,iType:2,iWidth:width,iHeight:height,iMaxSplit:1,iCurrentSplit:1,szBasePath:"",useHardDev:_this2.useHardDev,isHardH264:_this2._IsSupHardDecAVC(),isHardH265:_this2._IsSupHardDecHEVC(),isSharedArrayBuffer:isVersion2Available(),staticPath:_this2.staticPath,oStyle:{border:"none",background:"#000000"}});_this2.pluginStatus.loadingStart(id);if(!!_this2.isCall||!!_this2.isInspect){_this2.pluginStatus.loadingSetText({text:"视频加载中"})}else if(_this2.themeId=="miniRec"){_this2.pluginStatus.loadingSetText({text:""})}else{_this2.pluginStatus.loadingSetText({text:"初始化播放器完成"})}var RunTimeInfoFlag=false;jSPlugin.EventCallback={openStreamCallback:function openStreamCallback(){console.log("开启取流---v1");_this2.openStreamTime=(new Date).getTime();RunTimeInfoFlag=false},getStreamHeaderCallback:function getStreamHeaderCallback(){console.log("完成取流返回流头");_this2.getStreamHeaderTime=(new Date).getTime();RunTimeInfoFlag=false},getVideoStreamCallback:function getVideoStreamCallback(){console.log("返回视频流(首次)");_this2.getVideoStreamTime=(new Date).getTime();if(_this2.isCall&&_this2.Theme&&_this2.Theme.decoderState&&_this2.Theme.decoderState.state.rejection){console.log("挂断/拒绝状态------------stop");_this2.stop(function(){_this2.pluginStatus.loadingClear();_this2.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:_this2.isMobile,type:2})})}if(_this2.isInspect&&_this2.Theme.decoderState.state.play){if(_this2.Theme.inspectMode!=="map"&&_this2.Theme.jSPlugin.Zoom){setTimeout(function(){_this2.Theme.jSPlugin.Zoom.startZoom()},1e3)}_this2.Theme&&_this2.Theme.inspect&&_this2.Theme.inspect.InspectEvent&&_this2.Theme.inspect.InspectEvent.enableEvidenceBtn()}},appearFirstFrameCallback:function appearFirstFrameCallback(){console.log("出现首帧画面（播放成功）");_this2.appearFirstFrameTime=(new Date).getTime()},averageStreamSuccessCallback:function averageStreamSuccessCallback(){_this2.Zoom=new Zoom(_this2);_this2.averageStreamSuccessTime=_this2.initSuccessTime-_this2.initTime+(_this2.gotWsUrlTime-_this2.startGetWsUrlTime)+(_this2.appearFirstFrameTime-_this2.openStreamTime);console.log("平均成功取流的出流耗时:",_this2.averageStreamSuccessTime)},loadEventHandler:function loadEventHandler(){},zoomEventResponse:function zoomEventResponse(){},windowEventSelect:function windowEventSelect(iWndIndex){},pluginErrorHandler:function pluginErrorHandler(iWndIndex,iErrorCode,oError){if(_this2.isCall&&_this2.Theme&&_this2.Theme.decoderState&&_this2.Theme.decoderState.state.rejection){return}if(iErrorCode===1003){console.log("断流");if(_this2.Theme){_this2.Theme.setDecoderState({play:false})}_this2.pluginStatus.setPlayStatus({play:false});if(!jSPlugin.bPlay){_this2.pluginStatus.loadingClear();if(_this2.isCall){_this2.pluginStatus.loadingSetTextWithBtn({text:"连接断开，请重试",color:"white",btnName:_this2.isMobile?"重试":"重新加载",isMobile:_this2.isMobile,type:_this2.isCall?1:2})}else if(_this2.isInspect){_this2.pluginStatus.loadingSetTextWithBtn({mask:true,text:"连接断开，请重试",btnName:"重试",type:1});_this2.Theme.jSPlugin.Zoom&&_this2.Theme.jSPlugin.Zoom.stopZoom();_this2.Theme&&_this2.Theme.inspect&&_this2.Theme.inspect.InspectEvent&&_this2.Theme.inspect.InspectEvent.disableEvidenceBtn()}else{_this2.pluginStatus.loadingSetText({text:"连接断开，请重试",color:"red"})}}if(typeof _this2.params.handleError==="function"){_this2.params.handleError({msg:"连接断开，请重试",retcode:1003,id:_this2.params.id,type:"handleError"})}}else{if(oError.errorCode!=1){var now=Date.now();if(_this2.videoPlayState===1||_this2.videoPlayState===4){_this2.videoPlayState=3;window.ezuikitMonitor.report({action:3,logInfo:{pluginVersion:_this2.isV3?"v3":"v1",err:oError,loadTime:now-_this2.videoInitTime}})}else if(_this2.videoPlayState===2){_this2.videoPlayState=5;window.ezuikitMonitor.report({action:5,logInfo:{pluginVersion:_this2.isV3?"v3":"v1",err:oError,loadTime:now-_this2.videoInitTime}})}console.log("errorCode----------",oError.errorCode);var errorInfo=_this2.errorHander.matchErrorInfo(oError.errorCode);var msg="连接断开，请重试";if(errorInfo&&errorInfo.msg){msg=errorInfo.msg}else if(errorInfo&&errorInfo.description){msg=errorInfo.description}if(_this2.Theme){_this2.Theme.setDecoderState({play:false})}_this2.pluginStatus.setPlayStatus({play:false});_this2.pluginStatus.loadingClear();if(_this2.isCall){_this2.pluginStatus.loadingSetTextWithBtn({text:msg,color:"white",btnName:_this2.isMobile?"重试":"重新加载",isMobile:_this2.isMobile})}else if(_this2.isInspect){_this2.Theme.jSPlugin.Zoom&&_this2.Theme.jSPlugin.Zoom.stopZoom();_this2.pluginStatus.loadingSetTextWithBtn({mask:true,text:msg,btnName:"重试",type:1});_this2.Theme&&_this2.Theme.inspect&&_this2.Theme.inspect.InspectEvent&&_this2.Theme.inspect.InspectEvent.disableEvidenceBtn()}else{_this2.pluginStatus.loadingSetText({text:msg,color:"red"})}if(typeof _this2.params.handleError==="function"){_this2.params.handleError({msg:msg,retcode:oError.errorCode,id:_this2.params.id,type:"handleError"})}}else{_this2.pluginStatus.loadingClear();if(_this2.Theme){_this2.Theme.setDisabled(false)}}}},windowEventOver:function windowEventOver(iWndIndex){},windowEventOut:function windowEventOut(iWndIndex){},windowEventUp:function windowEventUp(iWndIndex){},windowFullCcreenChange:function windowFullCcreenChange(bFull){},firstFrameDisplay:function firstFrameDisplay(iWndIndex,iWidth,iHeight){console.log(iWidth,iHeight);jSPlugin.JS_SetCanFullScreen(false)},performanceLack:function performanceLack(){},mouseEvent:function mouseEvent(iMouseEventType,iMouseX,iMouseY){},setRunTimeInfoCallBack:function setRunTimeInfoCallBack(nRunTimeModule,nStrVersion,nFrameTimeStamp,nFrameNum,nErrorCode){if(nErrorCode===5){if(that.isInspect){that.pluginStatus.loadingClear();that.Theme.jSPlugin.Zoom&&that.Theme.jSPlugin.Zoom.stopZoom();that.pluginStatus.loadingSetTextWithBtn({mask:true,maskStyle:"url(".concat(_this2.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:"设备已加密",color:"white",btnName:"重试",type:1})}else{var textElement=document.getElementById("".concat(_this2.id,"-loading-item-txt"));if(_this2.Theme.decoderState.state.play&&(textElement===null||textElement.innerHTML.indexOf("设备已加密")===-1)){that.pluginStatus.loadingClear();that.pluginStatus.loadingSetText({text:"设备已加密",color:"red"})}}}else{that.pluginStatus.loadingClear()}if(typeof _this2.params.handleError==="function"&&!RunTimeInfoFlag){params.handleError({retcode:-1,data:{nRunTimeModule:nRunTimeModule,nStrVersion:nStrVersion,nFrameTimeStamp:nFrameTimeStamp,nFrameNum:nFrameNum,nErrorCode:nErrorCode},id:_this2.params.id,type:"handleRunTimeInfoError"})}RunTimeInfoFlag=true}};if(typeof params.handleTalkSuccess!=="undefined"){_this2.handleTalkSuccess=params.handleTalkSuccess}if(typeof params.handleTalkError!=="undefined"){_this2.handleTalkError=params.handleTalkError}_this2.errorHander=new Code;_this2.jSPlugin=jSPlugin;var checkTimer=setInterval(function(){if(window.JSPlayerModuleLoaded){clearInterval(checkTimer);if(typeof _this2.params.handleInitSuccess==="function"){_this2.params.handleInitSuccess({retcode:0,id:_this2.params.id,type:"handleInitSuccess"})}resolve({meta:{retcode:200,msg:"初始化成功"}})}},50)};var initDecoderPromise=new Promise(initDecoder);return initDecoderPromise}},{key:"_getRealUrlPromise",value:function _getRealUrlPromise(accessToken,url){var _this3=this;console.log("开始获取ws播放地址： url => ".concat(url," ").concat(this.accessToken));var that=this;this.startGetWsTime=Date.now();this.startGetWsUrlTime=(new Date).getTime();var apiDomain=this.env.domain;if(this.env){apiDomain=this.env.domain}var getRealUrlPromise=function getRealUrlPromise(resolve,reject){var realUrl="";var apiUrl=apiDomain+"/api/lapp/live/url/ezopen";var data=new FormData;data.append("ezopen",url);data.append("isFlv","false");data.append("userAgent",window.navigator.userAgent);data.append("isHttp","false");data.append("accessToken",accessToken);if(_this3.params.extraParams&&_this3.params.extraParams.ezopenParams){if(_typeof(_this3.params.extraParams.ezopenParams)==="object"){for(var key in _this3.params.extraParams.ezopenParams){data.append(key,_this3.params.extraParams.ezopenParams[key])}}}fetch(apiUrl,{method:"POST",body:data}).then(function(response){return response.json()}).then(function(data){if(data.code==200||data.retcode==0){var playUrl="";var stream="";if(data.ext&&data.ext.token){realUrl+=data.data;stream=data.ext.token;playUrl=data.data}else if(data.data&&data.data.token){realUrl+=data.data.url;stream=data.data.token;playUrl=data.data.url}var type=url.indexOf("live")!==-1?"live":"playback";if(type==="live"){realUrl=realUrl+"&ssn="+stream+"&auth=1&biz=4&cln=100"}else{realUrl=realUrl+"&ssn="+stream+"&auth=1&cln=100"}var validateCode=getQueryString("checkCode",realUrl);if(validateCode){if(typeof _this3.jSPlugin.decoderVersion!=="undefined"&&_this3.jSPlugin.decoderVersion==="2.0"){_this3.validateCode=validateCode}else{console.log("设置密钥",validateCode);_this3.validateCode=validateCode;_this3.jSPlugin.JS_SetSecretKey(0,validateCode)}}if(_this3.params.extraParams&&_this3.params.extraParams.wsParams){if(typeof _this3.params.extraParams.wsParams==="string"){realUrl+="&"+_this3.params.extraParams.wsParams}else if(_typeof(_this3.params.extraParams.wsParams)==="object"){for(var key in _this3.params.extraParams.wsParams){realUrl+="&"+key+"="+_this3.params.extraParams.wsParams[key]}}}if(realUrl.indexOf("playback")!==-1){var wsBegin=getQueryString("begin",playUrl)||getQueryString("begin",url);var wsEnd=getQueryString("end",playUrl)||getQueryString("end",url);if(getQueryString("timeZone",url)!==""){if(parseInt(getQueryString("timeZone",url))<24&&parseInt(getQueryString("timeZone",url))>-24){that.timeZone=parseInt(getQueryString("timeZone",url))}else{console.warn("timeZone时区参数错误，取值范围为-23~23")}}else{if(url.indexOf("timeZone=")>-1){realUrl=realUrl.replace("timeZone=","timeZone=0")}}var defaultBeginDate;var defaultEndDate;if(!wsBegin){defaultBeginDate=addTimeZone(formatDateString((new Date).Format("yyyyMMdd")+"000000"),that.timeZone).Format("yyyyMMddhhmmss");realUrl=realUrl+"&begin="+(defaultBeginDate.slice(0,8)+"T"+defaultBeginDate.slice(8)+"Z")}else{realUrl=realUrl.replace("&begin="+getQueryString("begin",playUrl),"&begin="+formatRecTime(wsBegin,"000000",that.timeZone));if(!getQueryString("begin",realUrl)){realUrl+="&begin="+formatRecTime(wsBegin,"000000",that.timeZone)}}if(!wsEnd){if(!wsBegin){defaultEndDate=addTimeZone(new Date,that.timeZone);realUrl=realUrl+"&end="+defaultEndDate.Format("yyyyMMdd")+"T235959Z"}else{defaultEndDate=formatRecTime(formatRecTime(wsBegin,"000000",that.timeZone).substr(0,8),"235959");realUrl=realUrl+"&end="+defaultEndDate}}else{realUrl=realUrl.replace("&end="+getQueryString("end",playUrl),"&end="+formatRecTime(wsEnd,"235959",that.timeZone));if(!getQueryString("end",realUrl)){realUrl+="&end="+formatRecTime(wsEnd,"235959",that.timeZone)}}if(!getQueryString("stream",playUrl)){realUrl=realUrl.replace("stream","&stream")}if(url.indexOf(".cloud")!==-1){var recAPISuccess=function recAPISuccess(data){if(data.code==200){var recSliceArr=[];if(data.data&&data.data.files&&data.data.files.length>0){var dataArr=data.data.files;var nextFileTime=(new Date).getTime();var isAll=data.data.isAll;if(isAll){recSliceArr=recSliceArrFun(dataArr);var recSliceArrJSON=JSON.stringify(recSliceArr).replace("\\","");realUrl+="&recSlice="+recSliceArrJSON.replace("\\","")+"&r="+Math.random();resolve(realUrl)}else{var recTransaction=function recTransaction(){function recAPIV2Success(data){if(data.data&&data.data.files&&data.data.files.length>0){if(data.data.isAll==false){if(data.data.files){dataArr=dataArr.concat(data.data.files)}nextFileTime=data.data.nextFileTime>0?data.data.nextFileTime:(new Date).getTime();recTransaction()}else{recSliceArr=recSliceArrFun(dataArr);var recSliceArrJSON=JSON.stringify(recSliceArr).replace("\\","");realUrl+="&recSlice="+recSliceArrJSON.replace("\\","")+"&r="+Math.random();resolve(realUrl)}}else{recSliceArr=recSliceArrFun(dataArr);var recSliceArrJSON=JSON.stringify(recSliceArr).replace("\\","");realUrl+="&recSlice="+recSliceArrJSON.replace("\\","")+"&r="+Math.random();resolve(realUrl)}}recSliceParams.startTime=nextFileTime;request(recSliceUrl,"POST",recSliceParams,"",recAPIV2Success)};recTransaction()}}else{reject({retcode:-1,msg:"未找到录像片段"})}}else{reject({retcode:-1,msg:"未找到录像片段"})}function recSliceArrFun(data){var downloadPathArr=[];data.forEach(function(item,index){if(downloadPathArr.length==0||item.downloadPath!==downloadPathArr[downloadPathArr.length-1].downloadPath){downloadPathArr.push({downloadPath:item.downloadPath,ownerId:item.ownerId,iStorageVersion:item.iStorageVersion,videoType:item.videoType,iPlaySpeed:0,startTime:item.startTime,endTime:item.endTime})}else{downloadPathArr[downloadPathArr.length-1].endTime=item.endTime}});return downloadPathArr}};var recBegin=reRormatRecTime(getQueryString("begin",realUrl));var recEnd=reRormatRecTime(getQueryString("end",realUrl));var deviceSerial=getQueryString("serial",realUrl);var channelNo=getQueryString("chn",realUrl);var recSliceUrl=apiDomain+"/api/lapp/video/by/time";var recSliceParams={accessToken:_this3.accessToken,recType:1,deviceSerial:deviceSerial,channelNo:channelNo,startTime:recBegin,endTime:recEnd,version:"2.0"};request(recSliceUrl,"POST",recSliceParams,"",recAPISuccess)}else{if(url.indexOf("alarmId")!==-1){var _recAPISuccess=function _recAPISuccess(data){if(data.code==200){var recSliceArr=[];if(data.data){recSliceArr=recSliceArrFun([data.data]);var recSliceArrJSON=JSON.stringify(recSliceArr).replace("\\","");realUrl+="&recSlice="+recSliceArrJSON.replace("\\","");console.log("realUrl",realUrl,data.data.recType);if(data.data.recType==1){realUrl=realUrl.replace("/playback","/cloudplayback")}else{realUrl=realUrl.replace("/cloudplayback","/playback")}resolve(realUrl)}}function recSliceArrFun(data){var downloadPathArr=[];data.forEach(function(item,index){if(downloadPathArr.length==0||item.downloadPath!==downloadPathArr[downloadPathArr.length-1].downloadPath){downloadPathArr.push({downloadPath:item.downloadPath,ownerId:item.ownerId,iStorageVersion:item.iStorageVersion,videoType:item.videoType,iPlaySpeed:0,startTime:item.startTime,endTime:item.endTime})}else{downloadPathArr[downloadPathArr.length-1].endTime=item.endTime}});console.log("downloadPathArr",downloadPathArr);return downloadPathArr}};console.log("进入alarmId回放");var alarmId=getQueryString("alarmId",realUrl);var recBegin=reRormatRecTime(getQueryString("begin",realUrl));var recEnd=reRormatRecTime(getQueryString("end",realUrl));var deviceSerial=getQueryString("serial",realUrl);var channelNo=getQueryString("chn",realUrl);var recSliceUrl=apiDomain+"/api/lapp/video/by/id";var recSliceParams={accessToken:_this3.accessToken,deviceSerial:deviceSerial,channelNo:channelNo,alarmId:alarmId};request(recSliceUrl,"POST",recSliceParams,"",_recAPISuccess)}else{resolve(realUrl)}}}else{resolve(realUrl)}}else{if(_this3.Theme){_this3.Theme.setDisabled(true);_this3.Theme.setDecoderState({play:false})}_this3.pluginStatus.setPlayStatus({play:false});_this3.pluginStatus.loadingClear();if(_this3.isInspect){_this3.Theme.jSPlugin.Zoom&&_this3.Theme.jSPlugin.Zoom.stopZoom();_this3.pluginStatus.loadingSetTextWithBtn({mask:true,maskStyle:"url(".concat(_this3.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:data.msg,color:"white",btnName:"重试",type:1});_this3.Theme&&_this3.Theme.inspect&&_this3.Theme.inspect.InspectEvent&&_this3.Theme.inspect.InspectEvent.disableEvidenceBtn()}else{_this3.pluginStatus.loadingSetText({text:data.msg,color:"red"})}if(typeof _this3.params.handleError==="function"){_this3.params.handleError({retcode:data.code,msg:data.msg,id:_this3.params.id,type:"handleError"})}reject(data)}})};return new Promise(function(resolve,reject){return getRealUrlPromise(resolve,reject)});function formatRecTime(time,defaultTime){var timeZone=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var reg=/^[0-9]{8}T[0-9]{6}Z$/;if(reg.test(time)){time=time.replace("T","").replace("Z","")}else if(/[0-9]{8,14}/.test(time)){var start=6-(14-time.length);var end=defaultTime.length;time=time+defaultTime.substring(start,end)}else{throw new Error("回放时间格式有误，请确认")}var date=new Date(parseInt(time.slice(0,4)),parseInt(time.slice(4,6))-1,parseInt(time.slice(6,8)),parseInt(time.slice(8,10)),parseInt(time.slice(10,12)),parseInt(time.slice(12,14)));var plusHoursInMilliseconds=timeZone*60*60*1e3;var newTimestamp=date.getTime()+plusHoursInMilliseconds;var standardTime=formatDateToString(newTimestamp);return standardTime.slice(0,8)+"T"+standardTime.slice(8)+"Z"}function reRormatRecTime(time){var year=time.slice(0,4);var month=time.slice(4,6);var day=time.slice(6,8);var hour=time.slice(9,11);var minute=time.slice(11,13);var second=time.slice(13,15);var date=year+"-"+month+"-"+day+" "+hour+":"+minute+":"+second;return new Date(date.replace(/-/g,"/")).getTime()}}},{key:"_pluginPlay",value:function _pluginPlay(data,successCallback,errorCallback){var _this4=this;console.log("执行播放 _pluginPlay",data);if(!data){return false}function getPlayParams(url){var websocketConnectUrl=url.split("?")[0].replace("/live","").replace("/playback","");var websocketStreamingParam=(url.indexOf("/live")===-1?url.indexOf("cloudplayback")!==-1?"/cloudplayback?":"/playback?":"/live?")+url.split("?")[1];if(websocketStreamingParam.indexOf("/playback")!==-1){websocketStreamingParam=websocketStreamingParam.replace("stream=2","stream=1")}return{websocketConnectUrl:websocketConnectUrl,websocketStreamingParam:websocketStreamingParam}}var wsUrl=getPlayParams(data).websocketConnectUrl;if(this.env&&this.env.wsUrl){wsUrl=this.env.wsUrl}this.doCreateWsTime=Date.now();this.gotWsUrlTime=(new Date).getTime();var wsParams={playURL:getPlayParams(data).websocketStreamingParam};console.log("播放前 stop 阶段 结束");this.isStoping=false;var now=Date.now();console.log("执行播放 ... this.jSPlugin.JS_Play at ",now);this.jSPlugin.JS_Play(wsUrl,wsParams,0).then(function(){console.log("执行播放 ... this.jSPlugin.JS_Play 播放成功",wsUrl,wsParams);console.log("执行播放耗时 ",Date.now()-now);if(_this4.isStoping){console.log("现在在播放前 stop 阶段，此次应为无效播放成功触发。不执行后续回调， 此次耗时无效");return}if(_this4.validateCode&&typeof _this4.jSPlugin.decoderVersion!=="undefined"&&_this4.jSPlugin.decoderVersion==="2.0"){_this4.jSPlugin.JS_SetSecretKey(0,_this4.validateCode)}_this4.pluginStatus.loadingClear();_this4.pluginStatus.setPlayStatus({play:true,loading:false});if(_this4.Theme){_this4.Theme.setDecoderState({play:true});if(!_this4.isCall&&Object.keys(_this4.Theme.themeData).length>0){var isOpenSound=_.findIndex(_this4.Theme.themeData.footer.btnList,function(v){return v.iconId==="sound"&&v.isrender===1&&v.defaultActive===1})>-1}_this4.audio=isOpenSound}if(_this4.audio){setTimeout(function(){_this4.openSound()},100)}if(typeof _this4.params.handleSuccess==="function"){_this4.params.handleSuccess({retcode:0,id:_this4.params.id,type:"handleSuccess"})}successCallback(wsParams)},function(err){console.log("err",err);var msg="播放失败，请检查设备及客户端网络";var retcode=-1;if(_this4.jSPlugin.bPlay){return false}if(err&&err.errorCode){var errorInfo=_this4.errorHander.matchErrorInfo(err.errorCode);if(_this4.Theme){_this4.Theme.setDisabled(true)}if(errorInfo&&errorInfo.msg){msg=errorInfo.msg}else if(errorInfo&&errorInfo.description){msg=errorInfo.description}else{msg="播放失败，请检查设备及客户端网络"}retcode=err.errorCode}if(_this4.isCall){if(_this4.Theme&&_this4.Theme.decoderState&&_this4.Theme.decoderState.state.rejection);else{_this4.pluginStatus.loadingClear();_this4.pluginStatus.loadingSetTextWithBtn({text:msg,color:"white",btnName:_this4.isMobile?"重试":"重新加载",isMobile:_this4.isMobile})}}else{_this4.pluginStatus.loadingClear();if(_this4.isInspect){_this4.Theme.jSPlugin.Zoom&&_this4.Theme.jSPlugin.Zoom.stopZoom();if(retcode===5404){if(!document.getElementById("".concat(_this4.id,"-no - inspect - box"))){_this4.Theme&&_this4.Theme.inspectEnding()}}else{_this4.pluginStatus.loadingSetTextWithBtn({mask:true,text:msg,color:"white",btnName:"重试",type:1})}_this4.Theme&&_this4.Theme.inspect&&_this4.Theme.inspect.InspectEvent&&_this4.Theme.inspect.InspectEvent.disableEvidenceBtn()}else{_this4.pluginStatus.loadingSetText({text:msg,color:"red"})}}if(typeof _this4.params.handleError==="function"){_this4.params.handleError({retcode:retcode,msg:msg,id:_this4.params.id,type:"handleError"})}errorCallback()})}},{key:"_play",value:function _play(options){var _this5=this;console.log("执行播放 play options.url =>",options);this.pluginStatus.setPlayStatus({play:false,loading:true});this.playStartTime=(new Date).getTime();if(options){if(typeof options==="string"){this.url=options}if(typeof options.url==="string"){this.url=options.url}if(typeof options.accessToken==="string"){this.accessToken=options.accessToken}if(typeof matchEzopenUrl(this.url).deviceSerial==="string"){this.deviceSerial=matchEzopenUrl(this.url).deviceSerial}if(typeof matchEzopenUrl(this.url).channelNo==="string"){this.channelNo=matchEzopenUrl(this.url).channelNo}if(this.Theme&&(typeof options.url==="string"||typeof options.accessToken==="string")){this.Theme.getDeviceInfo(function(data){})}}var promise=new Promise(function(resolve,reject){console.log("执行 播放前 stop");_this5.isStoping=true;_this5.jSPlugin.JS_Stop(0).then(function(){_this5.stopTime=Date.now();console.log("播放前 stop 执行成功 this.url => ".concat(_this5.url," ").concat(_this5.accessToken));_this5._getRealUrlPromise(_this5.accessToken,_this5.url).then(function(data){_this5._pluginPlay(data,function(params){console.log("---------------------播放成功回调");console.log("this.videoPlayState",_this5.videoPlayState);if(_this5.eventEmitter){_this5.eventEmitter.emit("play",{eventType:"play",code:0,target:_this5,msg:"播放成功"})}if(_this5.videoPlayState===1||_this5.videoPlayState===4){_this5.videoPlayState=2;var now=Date.now();window.ezuikitMonitor.report({action:2,logInfo:{pluginVersion:_this5.isV3?"v3":"v1",loadTime:now-_this5.videoInitTime,loadTimeDesc:{initTime:_this5.playStartTime-_this5.videoInitTime,stopTime:_this5.stopTime-_this5.playStartTime,getWsTime:_this5.doCreateWsTime-_this5.stopTime,createWsTime:now-_this5.doCreateWsTime}}})}setTimeout(function(){_this5.pluginStatus.loadingClear();if(_this5.isCall&&_this5.Theme&&_this5.Theme.decoderState&&_this5.Theme.decoderState.state.rejection){console.log("挂断/拒绝状态------------stop");_this5.stop(function(){_this5.pluginStatus.loadingClear();_this5.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:_this5.isMobile,type:2})})}},500);if(_this5.jSPlugin&&_this5._FECSplitIds&&_this5._FECCorrectType){_this5.jSPlugin.JS_FECCorrectType(_this5._FECCorrectType,_this5._FECSplitIds)}if(_this5.waterMark_JSPlugin){_this5.setWaterMarkFont(_this5.waterMark_JSPlugin)}resolve(true)},function(){return reject(false)})})["catch"](function(err){var now=Date.now();if(_this5.videoPlayState===1||_this5.videoPlayState===4){_this5.videoPlayState=3;window.ezuikitMonitor.report({action:3,logInfo:{pluginVersion:_this5.isV3?"v3":"v1",err:err,loadTime:now-_this5.videoInitTime}})}else if(_this5.videoPlayState===2){_this5.videoPlayState=5;window.ezuikitMonitor.report({action:5,logInfo:{pluginVersion:_this5.isV3?"v3":"v1",err:err,loadTime:now-_this5.videoInitTime}})}var msg=err.msg?err.msg:"播放失败，请检查设备及客户端网络";if(_this5.Theme){_this5.Theme.setDisabled(true)}if(_this5.isCall){if(_this5.Theme&&_this5.Theme.decoderState&&_this5.Theme.decoderState.state.rejection){if(err&&err.code==20018){_this5.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:_this5.isMobile,type:2})}else{_this5.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:_this5.isMobile,type:2})}}else{if(err&&err.code==20018){_this5.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:_this5.isMobile,type:2});if(!_this5.isWebConsole&&_this5.Theme&&!!_this5.Theme.call){_this5.Theme.call.userNoDevice()}}else{_this5.pluginStatus.loadingSetTextWithBtn({text:msg,color:"white",btnName:_this5.isMobile?"重试":"重新加载",isMobile:_this5.isMobile})}}}else if(_this5.isInspect){_this5.Theme.jSPlugin.Zoom&&_this5.Theme.jSPlugin.Zoom.stopZoom();_this5.pluginStatus.loadingSetTextWithBtn({mask:true,maskStyle:"url(".concat(_this5.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:msg,color:"white",btnName:"重试",type:1});_this5.Theme&&_this5.Theme.inspect&&_this5.Theme.inspect.InspectEvent&&_this5.Theme.inspect.InspectEvent.disableEvidenceBtn()}else{_this5.pluginStatus.loadingSetText({text:msg,color:"red"})}if(typeof _this5.params.handleError==="function"){_this5.params.handleError({retcode:err.oError?err.oError.errorCode:-1,msg:msg,id:_this5.params.id,type:"handleError"})}if(_this5.eventEmitter){_this5.eventEmitter.emit("play",{eventType:"play",code:err.oError?err.oError.errorCode:-1,target:_this5,msg:err.msg?err.msg:"播放失败，请检查设备及客户端网络"})}reject({retcode:err.oError?err.oError.errorCode:-1,msg:msg,id:_this5.params.id,type:"handleError"})})})});return promise}},{key:"stop",value:function stop(){var _this6=this;var callBack=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){};this.pluginStatus.setPlayStatus({loading:true});this.reSetTheme();return this.jSPlugin.JS_Stop(0).then(function(){console.log("停止成功");_this6.pluginStatus.setPlayStatus({play:false,loading:false});if(_this6.Theme){_this6.Theme.setDecoderState({play:false})}if(_this6.eventEmitter){_this6.eventEmitter.emit("stop",{eventType:"stop",code:0,target:_this6,msg:"停止成功"})}callBack()})}},{key:"changeVideoLevel",value:function changeVideoLevel(definition){var initUrl=this.url;var url=initUrl;if(typeof definition==="number"){url=definition===1?initUrl.replace(".live",".hd.live"):initUrl.replace(".hd.live",".live");this.jSPlugin.playURL=definition?this.jSPlugin.playURL.replace("stream=2","stream=1"):this.jSPlugin.playURL.replace("stream=1","stream=2");console.warn("changeVideoLevel","该方法将不在支持传入number类型的参数，建议使用对象类型的参数")}if(_typeof(definition)==="object"){if(typeof definition.streamType==="number"&&["sd","hd"].includes(definition.level)){url=definition.level==="hd"?initUrl.replace(".live",".hd.live"):initUrl.replace(".hd.live",".live")}this.jSPlugin.playURL=definition.streamType===1?this.jSPlugin.playURL.replace("stream=2","stream=1"):this.jSPlugin.playURL.replace("stream=1","stream=2")}this.url=url;var changeRT=this.changePlayUrl({url:url},function(){},false);if(this.eventEmitter){this.eventEmitter.emit("changeVideoLevel",{eventType:"changeVideoLevel",code:0,target:this,data:definition,msg:"切换清晰度"})}if(isPromise(changeRT)){return changeRT}return new Promise(function(resolve){resolve(changeRT)})}},{key:"reSetTheme",value:function reSetTheme(){var resetList=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];if(this.Theme&&this.Theme.Ptz&&this.Theme.decoderState.state.pantile){this.Theme.setDecoderState({pantile:false});this.Theme.Ptz.hide()}if(this.Theme){if(this.Theme.decoderState.state.recordvideo){this.Theme.setDecoderState({recordvideo:false})}}if(resetList.indexOf("zoom")>-1){if(this.use3DZoom){this.is3DZooming=false;this.close3DZoom()}else{if(this.Zoom&&this.Zoom.currentScale>1){this.Zoom.stopZoom()}if(this.Theme){this.Theme.setDecoderState({zoom:false})}}}if(this.Theme&&this.Theme.decoderState.state.talk){this.stopTalk();this.Theme.setDecoderState({talk:false})}if(this.Theme&&this.Theme.Rec&&!this.Theme.isMobile){this.Theme.Rec.datepickerHide()}if(this.Theme&&this.Theme.Rec){this.Theme.changeRecSpeed(1);this.Theme.nextRate=1;this.speed=1;this.Theme.setDecoderState({speed:false})}if(this.eventEmitter){this.eventEmitter.emit("reSetTheme",{eventType:"reSetTheme",code:0,target:this,msg:"重置主题"})}}},{key:"_changePlayUrl",value:function _changePlayUrl(options){var _this7=this;var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};var reSetTheme=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var that=this;if(this.Theme){this.Theme.setDecoderState({play:false});this.Theme.setDisabled(true)}setTimeout(function(){_this7.pluginStatus.loadingClear();_this7.pluginStatus.loadingStart(_this7.id);_this7.pluginStatus.loadingSetText({text:"加载中，请稍后"})},100);this.reSetTheme(["zoom"]);this.getDeviceCapacity({accessToken:options.accessToken||this.accessToken,deviceSerial:options.deviceSerial||this.deviceSerial});var initUrl=this.url;var url=matchUrl(initUrl,options);if(options.accessToken){this.accessToken=options.accessToken;this.deviceSerial=options.deviceSerial;this.channelNo=options.channelNo}this.url=url;this.videoInitTime=Date.now();this.videoPlayState=1;window.monitorExtendsInfo={protocol:"ezopen",url:this.url,serial:this.deviceSerial,no:this.channelNo,env:this.env.domain,type:matchEzopenUrl(this.url).type};var tmpParams=Object.assign({},that.params);delete tmpParams.accessToken;delete tmpParams.url;window.ezuikitMonitor.report({action:4,logInfo:{pluginVersion:this.isV3?"v3":"v1",type:matchEzopenUrl(this.url).type,params:tmpParams}});callback();var promise=new Promise(function(resolve,reject){var changePlayUrlParams={url:url};if(options.accessToken){changePlayUrlParams["accessToken"]=options.accessToken}console.log("切换播放地址 参数 ",changePlayUrlParams);return _this7.play(changePlayUrlParams).then(function(){console.log("切换播放地址 play 执行成功 ",_this7.url,_this7.accessToken);if(reSetTheme){if(options.type){if(_this7.Theme){if(options.type=="rec"||options.type=="cloud.rec"){_this7.Theme.changeTheme(_this7.isMobile?"mobileRec":"pcRec")}else if(options.type=="miniRec"){_this7.Theme.changeTheme("miniRec")}else{_this7.Theme.changeTheme(_this7.isMobile?"mobileLive":"pcLive");if(_this7.Theme.Rec){_this7.Theme.Rec.unSyncTimeLine()}}}}else{if(_this7.Theme){if(_this7.url.indexOf(".rec")>-1){_this7.Theme.changeTheme(_this7.isMobile?"mobileRec":"pcRec")}else{if(_this7.isCall){_this7.Theme.changeTheme(_this7.isMobile?"mobileCall":"webCall")}else{_this7.Theme.changeTheme(_this7.themeId)}if(_this7.Theme.Rec){_this7.Theme.Rec.unSyncTimeLine()}}}}}if(options&&options.begin&&options.deviceSerial&&_this7.Theme){_this7.Theme.Rec.setDatepickerDate(options.begin)}if(_this7.Theme){_this7.Theme.setDisabled(false)}if(_this7.eventEmitter){_this7.eventEmitter.emit("changePlayUrl",{eventType:"changePlayUrl",code:0,target:_this7,msg:"切换播放地址成功"})}resolve(url)})["catch"](function(err){reject(url);if(_this7.eventEmitter){_this7.eventEmitter.emit("changePlayUrl",{eventType:"changePlayUrl",code:-1,target:_this7,msg:err&&err.msg?err.msg:"切换播放地址失败"})}if(err&&err.msg){_this7.pluginStatus.loadingClear();if(_this7.isInspect){_this7.Theme.jSPlugin.Zoom&&_this7.Theme.jSPlugin.Zoom.stopZoom();_this7.pluginStatus.loadingSetTextWithBtn({mask:true,maskStyle:"url(".concat(_this7.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:err.msg,color:"white",btnName:"重试",type:1});_this7.Theme&&_this7.Theme.inspect&&_this7.Theme.inspect.InspectEvent&&_this7.Theme.inspect.InspectEvent.disableEvidenceBtn()}else{_this7.pluginStatus.loadingSetText({text:err.msg,color:"red"})}}})});function matchUrl(matchInitUrl,matchOptions){if(matchOptions.url){return matchOptions.url}console.log("--------------matchInitUrl",matchInitUrl);var type=matchInitUrl.split("/")[4].split(".")[matchInitUrl.split("/")[4].split(".").length-1].split("?")[0];if(type==="rec"&&matchInitUrl.indexOf(".cloud.rec")!==-1){type="cloud.rec"}if(matchOptions.type){type=matchOptions.type=="miniRec"?"rec":matchOptions.type}var deviceSerial=matchInitUrl.split("/")[3];if(matchOptions.deviceSerial){deviceSerial=matchOptions.deviceSerial}var channelNo=matchInitUrl.split("/")[4].split(".")[0];if(matchOptions.channelNo){channelNo=matchOptions.channelNo}var validCode=matchInitUrl.split("/")[2].split("@").length===2?matchInitUrl.split("/")[2].split("@")[0]:"";if(typeof matchOptions.validCode!=="undefined"){validCode=matchOptions.validCode}var hd=typeof matchOptions.hd==="undefined"?matchInitUrl.indexOf(".hd")!==-1:matchOptions.hd;var result="ezopen://".concat(validCode?"".concat(validCode,"@"):"").concat(that.host,"/").concat(deviceSerial,"/").concat(channelNo).concat(hd?".hd":"",".").concat(type);if(getQueryString("timeZone",matchInitUrl)!==""){if(parseInt(getQueryString("timeZone",matchInitUrl))<24&&parseInt(getQueryString("timeZone",matchInitUrl))>-24){that.timeZone=parseInt(getQueryString("timeZone",matchInitUrl))}else{console.warn("timeZone时区参数错误，取值范围为-23~23")}}if(type==="live"){return result}result="ezopen://".concat(validCode?"".concat(validCode,"@"):"").concat(that.host,"/").concat(deviceSerial,"/").concat(channelNo,".").concat(type);if(matchOptions.begin&&matchOptions.end){result+="?begin=".concat(matchOptions.begin,"&end=").concat(matchOptions.end)}else if(matchOptions.begin){result+="?begin=".concat(matchOptions.begin)}else if(getQueryString("begin",matchInitUrl)&&getQueryString("end",matchInitUrl)){result+="?begin=".concat(getQueryString("begin",matchInitUrl),"&end=").concat(getQueryString("end",matchInitUrl))}else if(getQueryString("begin",matchInitUrl)){result+="?begin=".concat(getQueryString("begin",matchInitUrl))}return result}return promise}},{key:"getOSDTime",value:function getOSDTime(){var _this8=this;var promise=new Promise(function(resolve,reject){_this8.jSPlugin.JS_GetOSDTime(0).then(function(data){if(_this8.eventEmitter){_this8.eventEmitter.emit("getOSDTime",{eventType:"getOSDTime",code:0,target:_this8,data:data,msg:"获取OSD时间"})}resolve({code:0,retcode:0,data:data});if(typeof _this8.params.getOSDTimeCallBack==="function"){_this8.params.getOSDTimeCallBack({id:_this8.id,type:"getOSDTime",code:0,data:data})}})["catch"](function(err){if(_this8.eventEmitter){_this8.eventEmitter.emit("getOSDTime",{eventType:"getOSDTime",code:-1,target:_this8,msg:err||"获取OSD时间失败"})}reject({code:-1,retcode:-1,data:err});if(typeof _this8.params.getOSDTimeCallBack==="function"){_this8.params.getOSDTimeCallBack({id:_this8.id,type:"getOSDTime",code:-1,data:-1})}})});return promise}},{key:"capturePicture",value:function capturePicture(name){var _this9=this;var callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var capturePictureRT=this.jSPlugin.JS_CapturePicture(0,name||(new Date).getTime(),"JPEG",callback,!!callback);if(isPromise(capturePictureRT)){return new Promise(function(resolve,reject){capturePictureRT.then(function(res){if(typeof _this9.params.capturePictureCallBack==="function"){_this9.params.capturePictureCallBack({id:_this9.id,type:"capturePicture",code:0})}var result={id:_this9.id,code:0,data:res.data,type:"handleCapturePicture"};if(_this9.eventEmitter){_this9.eventEmitter.emit("capturePicture",{eventType:"capturePicture",code:0,target:_this9,data:res.data,msg:"截图成功"})}if(typeof _this9.params.handleCapturePicture==="function")_this9.params.handleCapturePicture(result);resolve(result)},function(err){if(typeof _this9.params.capturePictureCallBack==="function"){_this9.params.capturePictureCallBack({id:_this9.id,type:"capturePicture",code:-1})}if(_this9.eventEmitter){_this9.eventEmitter.emit("capturePicture",{eventType:"capturePicture",code:-1,target:_this9,msg:err||"截图失败"})}var result=Object.assign({id:_this9.id,type:"handleCapturePicture",code:-1},err);if(typeof _this9.params.handleCapturePicture==="function")_this9.params.handleCapturePicture(result);reject(result)})})}}},{key:"startSave",value:function startSave(name){var startSaveRT=this.jSPlugin.JS_StartSave(0,name);var that=this;if(isPromise(startSaveRT)){startSaveRT.then(function(){if(typeof that.params.startSaveCallBack==="function"){that.params.startSaveCallBack({id:that.id,type:"startSave",code:0})}if(that.eventEmitter){that.eventEmitter.emit("startSave",{eventType:"startSave",code:0,target:that,msg:"开始录像成功"})}})["catch"](function(){if(that.eventEmitter){that.eventEmitter.emit("startSave",{eventType:"startSave",code:-1,target:that,msg:"开始录像失败"})}if(typeof that.params.startSaveCallBack==="function"){that.params.startSaveCallBack({id:that.id,type:"startSave",code:-1})}});return startSaveRT}if(this.Theme){this.Theme.setDecoderState({recordvideo:true})}return new Promise(function(resolve){resolve(startSaveRT)})}},{key:"stopSave",value:function stopSave(){var stopSaveRT=this.jSPlugin.JS_StopSave(0);var that=this;if(isPromise(stopSaveRT)){stopSaveRT.then(function(){if(that.eventEmitter){that.eventEmitter.emit("stopSave",{eventType:"stopSave",code:0,target:that,msg:"停止录像成功"})}if(typeof that.params.stopSaveCallBack==="function"){that.params.stopSaveCallBack({id:that.id,type:"stopSave",code:0})}})["catch"](function(){if(that.eventEmitter){that.eventEmitter.emit("stopSave",{eventType:"stopSave",code:-1,target:that,msg:"停止录像失败"})}if(typeof that.params.stopSaveCallBack==="function"){that.params.stopSaveCallBack({id:that.id,type:"stopSave",code:-1})}});return stopSaveRT}if(this.Theme){this.Theme.setDecoderState({recordvideo:false})}return new Promise(function(resolve){resolve(stopSaveRT)})}},{key:"openSound",value:function openSound(){var openSoundRT=this.jSPlugin.JS_OpenSound(0);console.log("打开声音",openSoundRT);if(this.eventEmitter){this.eventEmitter.emit("openSound",{eventType:"openSound",code:openSoundRT,target:this,msg:"打开声音"})}if(isPromise(openSoundRT)){return openSoundRT}if(this.Theme){this.Theme.setDecoderState({sound:true})}if(typeof this.params.openSoundCallBack==="function"){this.params.openSoundCallBack({id:this.id,type:"openSound",code:openSoundRT})}return new Promise(function(resolve){resolve(openSoundRT)})}},{key:"closeSound",value:function closeSound(){var closeSoundRT=this.jSPlugin.JS_CloseSound(0);if(this.eventEmitter){this.eventEmitter.emit("closeSound",{eventType:"closeSound",code:closeSoundRT,target:this,msg:"关闭声音"})}if(isPromise(closeSoundRT)){return closeSoundRT}if(this.Theme){this.Theme.setDecoderState({sound:false})}if(typeof this.params.closeSoundCallBack==="function"){this.params.closeSoundCallBack({id:this.id,type:"closeSound",code:closeSoundRT})}return new Promise(function(resolve){resolve(closeSoundRT)})}},{key:"enableZoom",value:function enableZoom(){var enableZoomRT=this.jSPlugin.JS_EnableZoom(0);if(this.eventEmitter){this.eventEmitter.emit("startZoom",{eventType:"startZoom",code:enableZoomRT,target:this,msg:"开启电子放大"})}if(isPromise(enableZoomRT)){return enableZoomRT}return new Promise(function(resolve){resolve(enableZoomRT)})}},{key:"closeZoom",value:function closeZoom(){var closeZoomRT=this.jSPlugin.JS_DisableZoom(0);if(this.eventEmitter){this.eventEmitter.emit("closeZoom",{eventType:"closeZoom",code:closeZoomRT,target:this,msg:"关闭电子放大"})}if(isPromise(closeZoomRT)){return closeZoomRT}return new Promise(function(resolve){resolve(closeZoomRT)})}},{key:"zoomAdd",value:function zoomAdd(scale){if(this.eventEmitter){this.eventEmitter.emit("zoomAdd",{eventType:"zoomAdd",code:1,target:this,msg:"执行放大"})}this.Zoom&&this.Zoom.addScale(scale)}},{key:"zoomSub",value:function zoomSub(scale){if(this.eventEmitter){this.eventEmitter.emit("zoomSub",{eventType:"zoomSub",code:1,target:this,msg:"执行缩小"})}this.Zoom&&this.Zoom.subScale(scale)}},{key:"enable3DZoom",value:function enable3DZoom(){var _this10=this;if(!this.use3DZoom){return new Promise(function(resolve,reject){if(this.eventEmitter){this.eventEmitter.emit("enable3DZoom",{eventType:"enable3DZoom",code:-1,target:this,msg:"未启用3D定位功能"})}reject({code:-1,msg:"未启用3D定位功能"})})}function getZoomDirection(rect,isTrans){if(!rect||!rect.startPos||!rect.endPos){return-1}var startX=rect.startPos[0];var startY=rect.startPos[1];var endX=rect.endPos[0];var endY=rect.endPos[1];if(isTrans){if(endX>startX&&endY<startY){return 1}else if(endX<startX&&endY>startY){return 0}else{return-1}}else{if(endX>startX&&endY>startY){return 1}else if(endX<startX&&endY<startY){return 0}else{return-1}}}function getZoomMultiple(width,height,rect){var maxRate=arguments.length>3&&arguments[3]!==undefined?arguments[3]:5;if(!width||!height||!rect||!rect.startPos||!rect.endPos){return-1}var startX=rect.startPos[0];var startY=rect.startPos[1];var endX=rect.endPos[0];var endY=rect.endPos[1];var targetWidth=Math.abs(endX-startX);var targetHeight=Math.abs(endY-startY);var targetCenterX=parseInt((startX+endX)/2);var targetCenterY=parseInt((startY+endY)/2);var zoomRate=Math.round(width*height/(targetWidth*targetHeight));console.log("最大缩放倍数：",maxRate);console.log("计算缩放倍数：",width*height/(targetWidth*targetHeight));console.log("下发缩放倍数：",zoomRate>maxRate?maxRate:zoomRate);return{startPointX:parseInt(startX/width*256),startPointY:parseInt(startY/height*256),endPointX:parseInt(endX/width*256),endPointY:parseInt(endY/height*256),zoomRate:zoomRate>maxRate?maxRate:zoomRate,targetCenterX:targetCenterX,targetCenterY:targetCenterY,targetWidth:targetWidth,targetHeight:targetHeight}}if(!this.is3DZooming){if(!this.isMobile){if(this.Zoom){this.Zoom.stopZoom()}if(this.Theme){this.Theme.setDecoderState({zoom:false})}}if(this.support3DZoom){this.is3DZooming=true;if(this.Theme){this.Theme.setDecoderState({zoom:true})}if(document.getElementById("".concat(this.id,"-zoom-content"))){document.getElementById("".concat(this.id,"-zoom-content")).title="3D定位"}var enable3DZoomRT=this.jSPlugin.JS_Enable3DZoom(0,function(r){var screenWidth=_this10.Theme&&_this10.Theme.decoderState.state.expend&&_this10.isMobile?_this10.fullScreenWidth:_this10.width;var screenHeight=_this10.Theme&&_this10.Theme.decoderState.state.expend&&_this10.isMobile?_this10.fullScreenHeight:_this10.height;var zoomDirection=getZoomDirection(r,_this10.Theme&&_this10.Theme.decoderState.state.expend);if(zoomDirection>-1){try{var param=getZoomMultiple(screenWidth,screenHeight,r,_this10.capacity&&_this10.capacity.support_zoomOut_maxTime?_this10.capacity.support_zoomOut_maxTime:5);var apiUrl=_this10.env.domain+"/api/v3/das/device/3d/zoom?accessToken=".concat(_this10.accessToken,"&deviceSerial=").concat(matchEzopenUrl(_this10.url).deviceSerial,"&channelNo=").concat(matchEzopenUrl(_this10.url).channelNo,"&command=").concat(zoomDirection==0?9:8,"&zoomTimes=").concat(param.zoomRate,"&startPointX=").concat(param.startPointX,"&startPointY=").concat(param.startPointY,"&endPointX=").concat(param.endPointX,"&endPointY=").concat(param.endPointY,"&length=").concat(parseInt(screenHeight),"&width=").concat(parseInt(screenWidth),"&midPointX=").concat(param.targetCenterX,"&midPointY=").concat(param.targetCenterY,"&lengthX=").concat(param.targetWidth,"&lengthY=").concat(param.targetHeight);fetch(apiUrl,{method:"POST"}).then(function(response){return response.json()}).then(function(res){if(res.code!=200){_this10.pluginStatus.loadingSetText({text:res.msg,color:"red",delayClear:2e3})}})["catch"](function(error){_this10.pluginStatus.loadingSetText({text:"3D定位失败，请重试",color:"red",delayClear:2e3})})}catch(error){_this10.pluginStatus.loadingSetText({text:"3D定位失败，请重试",color:"red",delayClear:2e3})}}});this.Zoom=new Zoom(this);if(this.eventEmitter){this.eventEmitter.emit("enable3DZoom",{eventType:"enable3DZoom",code:enable3DZoomRT,target:this,msg:"开启3D定位"})}if(isPromise(enable3DZoomRT)){return enable3DZoomRT}return new Promise(function(resolve){resolve(enable3DZoomRT)})}else{this.is3DZooming=false;if(document.getElementById("".concat(this.id,"-zoom-content"))){document.getElementById("".concat(this.id,"-zoom-content")).title="电子放大"}return new Promise(function(resolve,reject){if(this.eventEmitter){this.eventEmitter.emit("enable3DZoom",{eventType:"enable3DZoom",code:-1,target:this,msg:"当前设备不支持3D定位功能"})}reject({code:-1,msg:"当前设备不支持3D定位功能"})})}}else{return new Promise(function(resolve,reject){if(this.eventEmitter){this.eventEmitter.emit("enable3DZoom",{eventType:"enable3DZoom",code:-1,target:this,msg:"3D定位已处于开启状态"})}reject({code:-1,msg:"3D定位已处于开启状态"})})}}},{key:"close3DZoom",value:function close3DZoom(){var that=this;if(!this.use3DZoom){return new Promise(function(resolve,reject){if(that.eventEmitter){that.eventEmitter.emit("close3DZoom",{eventType:"close3DZoom",code:-1,target:that,msg:"未启用3D定位功能"})}reject({code:-1,msg:"未启用3D定位功能"})})}if(this.is3DZooming){if(this.Theme){this.Theme.setDecoderState({zoom:false})}var close3DZoomRT=this.jSPlugin.JS_Disable3DZoom(0);this.Zoom=new Zoom(this);this.is3DZooming=false;if(this.eventEmitter){this.eventEmitter.emit("close3DZoom",{eventType:"close3DZoom",code:close3DZoomRT,target:this,msg:"关闭3D定位"})}if(isPromise(close3DZoomRT)){return close3DZoomRT}return new Promise(function(resolve){resolve(close3DZoomRT)})}else{return new Promise(function(resolve,reject){if(this.eventEmitter){this.eventEmitter.emit("close3DZoom",{eventType:"close3DZoom",code:-1,target:this,msg:"3D定位已处于关闭状态"})}reject({code:-1,msg:"3D定位已处于关闭状态"})})}}},{key:"changeZoomType",value:function changeZoomType(flag){var _this11=this;if(flag&&this.capacity&&!this.support3DZoom){if(this.eventEmitter){this.eventEmitter.emit("changeZoomType",{eventType:"changeZoomType",code:-1,target:this,msg:"当前设备不支持开启3D定位功能"})}return{code:-1,msg:"当前设备不支持开启3D定位功能"}}if(this.is3DZooming){this.close3DZoom()}else if(this.Theme&&this.Theme.decoderState.state.zoom){this.Zoom&&this.Zoom.stopZoom()}if(this.Theme){this.Theme.setDecoderState({zoom:false})}this.use3DZoom=flag;this.Zoom=new Zoom(this);setTimeout(function(){if(flag){if(document.getElementById("".concat(_this11.id,"-zoom-content"))){document.getElementById("".concat(_this11.id,"-zoom-content")).title="3D定位"}}else{if(document.getElementById("".concat(_this11.id,"-zoom-content"))){document.getElementById("".concat(_this11.id,"-zoom-content")).title="电子放大"}}if(_this11.isMobile&&flag){_this11.enable3DZoom()}if(_this11.eventEmitter){_this11.eventEmitter.emit("changeZoomType",{eventType:"changeZoomType",code:0,target:_this11,msg:"改变缩放模式"})}},500)}},{key:"setPoster",value:function setPoster(url){if(isVersion2Available()){if(document.getElementById("".concat(this.id))){document.getElementById("".concat(this.id)).style.backgroundImage="url(".concat(url,")");document.getElementById("".concat(this.id)).style.backgroundSize="100% 100%"}}else{if(document.getElementById("".concat(this.id,"canvas0"))){document.getElementById("".concat(this.id,"canvas0")).style.backgroundImage="url(".concat(url,")");document.getElementById("".concat(this.id,"canvas0")).style.backgroundSize="cover"}}if(this.eventEmitter){this.eventEmitter.emit("setPoster",{eventType:"setPoster",code:0,target:this,msg:"设置播放器封面"})}}},{key:"reSize",value:function reSize(width,height){var headerHeight=0;var timeLineHeight=0;this.params.height=height;this.params.width=width;if(this.Theme&&this.Theme.isNeedRenderHeader&&document.getElementById("".concat(this.id,"-headControl"))){headerHeight=parseInt(document.getElementById("".concat(this.id,"-headControl")).style.height,10)}if(this.Theme&&this.Theme.isNeedRenderTimeLine&&!this.isMobile){timeLineHeight=48}height=height-headerHeight-timeLineHeight;this.width=width;this.height=height;document.getElementById("".concat(this.id,"-wrap")).style="width:".concat(width,"px;position:relative;display:inline-block;vertical-align: bottom;");document.getElementById("".concat(this.id)).style.width=width+"px";document.getElementById("".concat(this.id)).style.height=height+"px";if(this.jSPlugin&&this.jSPlugin.bPlay){if(this.jSPlugin){this.jSPlugin.iHeight=height;this.jSPlugin.iWidth=width}this.jSPlugin.JS_Resize(width,height)}else{if(document.getElementById("".concat(this.id,"-player"))){document.getElementById("".concat(this.id,"-player")).width=width;document.getElementById("".concat(this.id,"-player")).height=height;document.getElementById("".concat(this.id,"-player")).style.width=width+"px";document.getElementById("".concat(this.id,"-player")).style.height=height+"px";document.getElementById("".concat(this.id,"-container-0")).style.height=height+"px"}var scale=1;if(document.getElementById("".concat(this.id,"canvas0"))){var isNeedScale=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(isNeedScale){scale=2}document.getElementById("".concat(this.id,"canvas0")).style.width=width*scale+"px";document.getElementById("".concat(this.id,"canvas0")).style.height=height*scale+"px";document.getElementById("".concat(this.id,"canvas0")).width=width*scale;document.getElementById("".concat(this.id,"canvas0")).height=height*scale;document.getElementById("".concat(this.id,"canvas0")).parentNode.style.width=width*scale+"px";document.getElementById("".concat(this.id,"canvas0")).parentNode.style.height=height*scale+"px";document.getElementById("".concat(this.id,"canvas_draw0")).height=height*scale}if(this.jSPlugin){this.jSPlugin.iHeight=height*scale;this.jSPlugin.iWidth=width*scale}}if(this.isInspect){document.getElementById("".concat(this.id,"-wrap")).style="width:".concat(width,"px; height:").concat(height,"px;position:relative;display:inline-block;vertical-align: bottom;");this.width-=this.inspectVideoWidth;this.height-=this.inspectVideoHeight;width=this.width;height=this.height;this.width=width;this.height=height;this.Theme.inspect.reSize(width,height)}if(this.eventEmitter){this.eventEmitter.emit("reSize",{eventType:"reSize",code:0,target:this,msg:"调整播放器尺寸"})}}},{key:"fast",value:function fast(next){var _this12=this;var speed=this.speed;if(next){var fastRT=this.jSPlugin.JS_Speed(next);if(this.Theme){this.Theme.changeRecSpeed(next);this.Theme.nextRate=next}}else{if(speed===1){speed=2}else if(speed===2){speed=4}else{console.log("当前已经是最大播放倍数");if(typeof this.params.handleError==="function"){this.params.handleError({msg:"播放速度最大为4倍速度",retcode:1003,id:this.id,type:"handleError"})}return new Promise(function(resolve,reject){_this12.speed=speed;reject({code:-1,data:{speed:speed,result:"播放速度最大为4倍速度"}})})}var fastRT=this.jSPlugin.JS_Speed(speed);if(this.Theme){this.Theme.changeRecSpeed(speed);this.Theme.nextRate=speed}}return new Promise(function(resolve){_this12.speed=speed;if(_this12.eventEmitter){_this12.eventEmitter.emit("fast",{eventType:"fast",code:0,data:speed,target:_this12,msg:"倍速播放"})}resolve({code:0,data:{speed:speed,result:fastRT}})})}},{key:"slow",value:function slow(){var _this13=this;var speed=this.speed;if(speed===4){speed=2}else if(speed===2){speed=1}else{console.log("当前已经是最小播放倍数");if(typeof this.params.handleError==="function"){this.params.handleError({msg:"播放速度最小为1倍速度",retcode:1003,id:this.id,type:"handleError"})}return new Promise(function(resolve,reject){_this13.speed=speed;reject({code:-1,data:{speed:speed,result:"播放速度最小为1倍速度"}})})}var slowRT=this.jSPlugin.JS_Speed(speed);return new Promise(function(resolve){_this13.speed=speed;if(_this13.eventEmitter){_this13.eventEmitter.emit("slow",{eventType:"slow",code:0,data:speed,target:_this13,msg:"倍速播放"})}resolve({code:0,data:{speed:speed,result:slowRT}})})}},{key:"seek",value:function seek(startTime,endTime){var url=this.url;var currentDay=(getQueryString("begin",url)||(new Date).Format("yyyyMMdd")).substr(0,8);endTime=formatRecTime(currentDay,"235959");if(startTime.length===6){startTime=formatRecTime(currentDay,startTime)}else if(startTime.length===16){if(startTime.substr(0,8)!==currentDay){if(typeof this.params.handleError==="function"){if(this.eventEmitter){this.eventEmitter.emit("seek",{eventType:"seek",code:-1,target:this,msg:"seek时间不能跨日期"})}this.params.handleError({msg:"seek时间不能跨日期",retcode:-1,id:this.id,type:"handleError"})}return false}}else{if(typeof this.params.handleError==="function"){if(this.eventEmitter){this.eventEmitter.emit("seek",{eventType:"seek",code:-2,target:this,msg:"seek时间格式错误"})}this.params.handleError({msg:"seek时间格式错误",retcode:-1,id:this.id,type:"handleError"})}return false}function formatRecTime(time,defaultTime){var reg=/^[0-9]{8}T[0-9]{6}Z$/;if(reg.test(time)){return time}else if(/[0-9]{8,14}/.test(time)){var start=6-(14-time.length);var end=defaultTime.length;var standardTime=time+defaultTime.substring(start,end);return standardTime.slice(0,8)+"T"+standardTime.slice(8)+"Z"}throw new Error("回放时间格式有误，请确认")}var seekRT=this.jSPlugin.JS_Seek(0,startTime,endTime);console.log("seekRT",seekRT);if(isPromise(seekRT)){return seekRT}return new Promise(function(resolve){resolve(seekRT)})}},{key:"fullScreen",value:function fullScreen(){var _this14=this;var promise=requestFullScreenPromise(document.getElementById("".concat(this.id)));promise.then(function(data){console.log("全屏promise",window.screen.availWidth);_this14.jSPlugin.JS_Resize(window.screen.availWidth,window.screen.availHeight);if(_this14.eventEmitter){_this14.eventEmitter.emit("fullScreen",{eventType:"fullScreen",code:0,target:_this14,msg:"全局全屏"})}if(typeof _this14.params.fullScreenCallBack==="function"){_this14.params.fullScreenCallBack({id:_this14.id,type:"fullScreen",code:0})}});var fullscreenchange=function fullscreenchange(){var isFullScreen=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(!isFullScreen){_this14.jSPlugin.JS_Resize(_this14.width,_this14.height)}if(typeof _this14.params.fullScreenChangeCallBack==="function"){_this14.params.fullScreenChangeCallBack({id:_this14.id,type:"fullScreen",code:isFullScreen})}};["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach(function(item){window.addEventListener(item,function(data){return fullscreenchange()})})}},{key:"cancelFullScreen",value:function cancelFullScreen(){var _this15=this;var cancelPromise=cancelFullScreenPromise();cancelPromise.then(function(data){console.log("取消全屏",data,_this15.jSPlugin);_this15.jSPlugin.JS_Resize(_this15.width,_this15.height);if(_this15.eventEmitter){_this15.eventEmitter.emit("cancelFullScreen",{eventType:"cancelFullScreen",code:0,target:_this15,msg:"退出全局全屏"})}})}},{key:"startTalk",value:function startTalk(){this.Talk.startTalk()}},{key:"stopTalk",value:function stopTalk(){this.Talk.stopTalk()}},{key:"destroy",value:function destroy(){if(this.Theme){if(this.Theme.decoderState.state.play){this.stop()}this.Theme=null;window.EZUIKit[this.params.id].state.EZUIKitPlayer.themeInit=false}var destroyRT=this.jSPlugin.JS_DestroyWorker(0);if(this.eventEmitter){this.eventEmitter.emit("destroy",{eventType:"destroy",code:0,target:this,msg:"销毁"})}if(isPromise(destroyRT)){return destroyRT}return new Promise(function(resolve){resolve(destroyRT)})}},{key:"getDeviceCapacity",value:function getDeviceCapacity(params){var _this16=this;var apiDomain=this.env.domain;this.capacity={};if(this.env){apiDomain=this.env.domain}var capacityUrl=apiDomain+"/api/lapp/device/capacity";var capacitySuccess=function capacitySuccess(data){_this16.support3DZoom=false;if(document.getElementById("".concat(_this16.id,"-zoom-content"))){document.getElementById("".concat(_this16.id,"-zoom-content")).title="电子放大"}if(data.code==200&&data.data){_this16.capacity=data.data;if(_this16.isMobile&&_this16.isCall){if(!_this16.capacity["support_doorcall_playback"]||_this16.capacity["support_doorcall_playback"]!=1){console.log("小窗口initMiniRec-------------设备能力集失败");if(!!_this16.isWebConsole){return}setTimeout(function(){if(document.getElementById("".concat(_this16.jSPlugin.id,"-wrap"))&&document.getElementById("miniRecbox")){document.getElementById("".concat(_this16.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniClose"));document.getElementById("".concat(_this16.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniRecbox"))}},1500)}}if(_this16.capacity&&_this16.capacity.support_3d_position=="1"&&_this16.url.indexOf(".live")>-1){_this16.support3DZoom=true;if(_this16.params.use3DZoom){_this16.use3DZoom=true;if(document.getElementById("".concat(_this16.id,"-zoom-content"))){document.getElementById("".concat(_this16.id,"-zoom-content")).title="3D定位"}}}if(_this16.eventEmitter){_this16.eventEmitter.emit("getDeviceCapacity",{eventType:"getDeviceCapacity",code:0,data:data,target:_this16,msg:"获取设备能力级"})}}};var capacityParams=params||{accessToken:this.accessToken,deviceSerial:matchEzopenUrl(this.url).deviceSerial};request(capacityUrl,"POST",capacityParams,"",capacitySuccess)}},{key:"pause",value:function pause(date){var _this17=this;return new Promise(function(resolve,reject){_this17.jSPlugin.JS_CloseSound(0);_this17.jSPlugin.JS_Pause(0,date).then(function(data){if(_this17.eventEmitter){_this17.eventEmitter.emit("pause",{eventType:"pause",code:0,target:_this17,msg:"暂停"})}if(_this17.Theme){_this17.Theme.setDecoderState({play:false,pauseDate:data.pauseDate})}resolve()})["catch"](function(err){if(_this17.eventEmitter){_this17.eventEmitter.emit("pause",{eventType:"pause",code:-1,target:_this17,msg:err||"暂停失败"})}console.log(err);reject(err)})})}},{key:"_resume",value:function _resume(time){var _this18=this;return new Promise(function(resolve,reject){_this18.pluginStatus.setPlayStatus({play:false,loading:true});if(_this18.validateCode&&_this18.validateCode!=""){_this18.jSPlugin.JS_SetSecretKey(0,_this18.validateCode)}_this18.jSPlugin.JS_Resume(time).then(function(data){setTimeout(function(){if(_this18.url.indexOf(".rec")!==-1&&_this18.speed!=1){_this18.jSPlugin.JS_Speed(_this18.speed)}},500);if(_this18.Theme){_this18.Theme.setDecoderState({play:true});_this18.fast(_this18.speed);var isOpenSound=_this18.Theme.decoderState.state.sound;if(isOpenSound){setTimeout(function(){_this18.openSound()},500)}}if(_this18.eventEmitter){_this18.eventEmitter.emit("resume",{eventType:"resume",code:0,target:_this18,msg:"恢复播放"})}resolve(data)})["catch"](function(err){console.log("resume err",err);if(_this18.eventEmitter){_this18.eventEmitter.emit("resume",{eventType:"resume",code:-1,target:_this18,msg:err||"恢复播放失败"})}reject(err)})})}},{key:"getDefinitionList",value:function getDefinitionList(){if(this.eventEmitter){this.eventEmitter.emit("getDefinitionList",{eventType:"getDefinitionList",code:0,data:this.Theme?this.Theme.decoderState.state.hdList:[],target:this,msg:"获取设备支持的清晰度列表"})}if(this.Theme){return this.Theme.decoderState.state.hdList}else{return[]}}},{key:"getDefinition",value:function getDefinition(){if(this.eventEmitter){this.eventEmitter.emit("getDefinition",{eventType:"getDefinition",code:0,data:this.Theme?this.Theme.decoderState.state.hd:false,target:this,msg:"获取设备支持的清晰度列表"})}if(this.Theme){return this.Theme.decoderState.state.hd}else{return false}}},{key:"setDefinition",value:function setDefinition(type){var definition=this.getDefinitionList().find(function(item){if(typeof type==="string"){return item.level===type}if(_typeof(type)==="object"){return item.level===type.level}});if(!definition){if(this.eventEmitter){this.eventEmitter.emit("setDefinition",{eventType:"setDefinition",code:-1,target:this,msg:"请输入正确的清晰度"})}console.log("请输入正确的清晰度");return}this.changeVideoLevel(definition);if(this.Theme){this.Theme.setDecoderState({hd:definition});this.Theme.resetMobileZoomStatus()}if(this.Theme&&this.Theme.decoderState.state.recordvideo){this.Theme.setDecoderState({recordvideo:false})}if(this.eventEmitter){this.eventEmitter.emit("setDefinition",{eventType:"setDefinition",code:0,target:this,msg:"切换清晰度"})}}},{key:"getPtzStatus",value:function getPtzStatus(){if(this.Theme){if(this.eventEmitter){this.eventEmitter.emit("getPtzStatus",{eventType:"getPtzStatus",code:0,data:this.Theme?this.Theme.Ptz.showPtz:false,target:this,msg:"获取当前云台状态"})}console.log("当前是否开启云台：",this.Theme.Ptz.showPtz);return this.Theme.Ptz.showPtz}else{if(this.eventEmitter){this.eventEmitter.emit("getPtzStatus",{eventType:"getPtzStatus",code:-1,data:this.Theme?this.Theme.Ptz.showPtz:false,target:this,msg:"未加载Theme模块，无法获取云台状态"})}}}},{key:"openPtz",value:function openPtz(){if(this.Theme){if(this.isMobile&&this.Theme&&!this.Theme.decoderState.state.expend){console.log("移动端，非全屏状态不展示云台");if(this.eventEmitter){this.eventEmitter.emit("openPtz",{eventType:"openPtz",code:-1,target:this,msg:"移动端，非全屏状态不展示云台"})}return false}console.log("显示云台");this.Theme.setDecoderState({pantile:true});this.Theme.Ptz.show()}else{if(this.eventEmitter){this.eventEmitter.emit("openPtz",{eventType:"openPtz",code:-1,target:this,msg:"未加载Theme模块，无法操作云台"})}return{code:-1,msg:"未加载Theme模块，无法操作云台"}}}},{key:"closePtz",value:function closePtz(){if(this.Theme){console.log("隐藏云台");this.Theme.setDecoderState({pantile:false});this.Theme.Ptz.hide()}else{if(this.eventEmitter){this.eventEmitter.emit("closePtz",{eventType:"closePtz",code:-1,target:this,msg:"未加载Theme模块，无法操作云台"})}return{code:-1,msg:"未加载Theme模块，无法操作云台"}}}},{key:"isBrowserFullscreen",value:function isBrowserFullscreen(){if(this.Theme){console.log("当前是否为浏览器全屏状态：",this.Theme.decoderState.state.webExpend);if(this.eventEmitter){this.eventEmitter.emit("isBrowserFullscreen",{eventType:"isBrowserFullscreen",code:0,target:this,data:this.Theme.decoderState.state.webExpend,msg:"获取浏览器网页全屏状态"})}return this.Theme.decoderState.state.webExpend}}},{key:"browserFullscreen",value:function browserFullscreen(){if(this.Theme){this.Theme.webExpend();this.Theme.setDecoderState({webExpend:true});if(this.eventEmitter){this.eventEmitter.emit("browserFullscreen",{eventType:"browserFullscreen",code:0,target:this,msg:"开启网页全屏"})}}}},{key:"exitBrowserFullscreen",value:function exitBrowserFullscreen(width,height){var _this19=this;var cancelPromise=cancelFullScreenPromise();cancelPromise.then(function(data){_this19.jSPlugin.JS_Resize(width?width:_this19.width,height?height:_this19.height);if(_this19.Theme){if(_this19.Theme.Rec){_this19.Theme.Rec.recAutoSize()}_this19.Theme.setDecoderState({webExpend:false})}if(_this19.eventEmitter){_this19.eventEmitter.emit("exitBrowserFullscreen",{eventType:"exitBrowserFullscreen",code:0,target:_this19,msg:"退出网页全屏"})}})}},{key:"getPlayRate",value:function getPlayRate(){console.log("当前播放速度：",this.speed);if(this.eventEmitter){this.eventEmitter.emit("getPlayRate",{eventType:"getPlayRate",code:0,data:this.speed,target:this,msg:"获取当前播放速率"})}return this.speed}},{key:"setMiooroFlip",value:function setMiooroFlip(command){if(typeof command!=="number"){if(this.eventEmitter){this.eventEmitter.emit("setMiooroFlip",{eventType:"setMiooroFlip",code:-1,target:this,msg:"翻转参数类型错误"})}return Promise.reject({code:-1,msg:"翻转参数类型错误"})}if(this.eventEmitter){this.eventEmitter.emit("setMiooroFlip",{eventType:"setMiooroFlip",code:0,target:this,msg:"镜像翻转"})}return postDevicePtzMirror(this.env.domain,this.accessToken,this.deviceSerial,this.channelNo,command)}},{key:"setFECCorrectType",value:function setFECCorrectType(type,ids){var _this20=this;if(!this.capacity||this.capacity&&this.capacity.support_fisheye_mode!=="1"){if(this.eventEmitter){this.eventEmitter.emit("setFECCorrectType",{eventType:"setFECCorrectType",code:-1,target:this,msg:"设备不支持鱼眼模式"})}return Promise.reject({code:-1,msg:"设备不支持鱼眼模式"})}if(!this.jSPlugin.JS_FECCorrectType||(this.jSPlugin.isHardH264||this.jSPlugin.isHardH265)&&this.jSPlugin.useHardDev){if(this.eventEmitter){this.eventEmitter.emit("setFECCorrectType",{eventType:"setFECCorrectType",code:-1,target:this,msg:"现只有V3软解支持鱼眼矫正"})}return Promise.reject({code:-1,msg:"现只有V3软解支持鱼眼矫正"})}var list=type.place===1?FEC_PLACE_WALL_CORRECT_TYPE_LIST:type.place===3?FEC_PLACE_CEILING_CORRECT_TYPE_LIST:[];var correctType=list.find(function(item){return item.type===type.type&&item.place===type.place});if(!correctType){if(this.eventEmitter){this.eventEmitter.emit("setFECCorrectType",{eventType:"setFECCorrectType",code:-1,target:this,msg:"鱼眼矫正类型暂时不支持"})}return Promise.reject({code:-1,msg:"鱼眼矫正类型暂时不支持"})}if(correctType.split>0&&_typeof(ids)===undefined){if(this.eventEmitter){this.eventEmitter.emit("setFECCorrectType",{eventType:"setFECCorrectType",code:-1,target:this,msg:"鱼眼矫正类型需要分屏，但是没有传".concat(correctType.split-1,"个分屏的canvas id")})}return Promise.reject({code:-1,msg:"鱼眼矫正类型需要分屏，但是没有传".concat(correctType.split-1,"个分屏的canvas id")})}this.jSPlugin.FECSplitIds=ids;this.jSPlugin.correctType=correctType;this._FECCorrectType=correctType;this._FECSplitIds=ids;return this.stop().then(function(){return _this20.play().then(function(res){if(!(correctType.place===1&&correctType.correctType===0||correctType.place===3&&correctType.correctType===0)){_this20.Theme.disabledFECBtn()}else{_this20.Theme.resumeFECBtn()}if(_this20.eventEmitter){_this20.eventEmitter.emit("setFECCorrectType",{eventType:"setFECCorrectType",code:0,target:_this20,msg:"切换鱼眼矫正类型"})}return res})})}},{key:"setFEC3DViewParam",value:function setFEC3DViewParam(param){if(!this._FECCorrectType||(this.jSPlugin.isHardH264||this.jSPlugin.isHardH265)&&this.jSPlugin.useHardDev){if(this.eventEmitter){this.eventEmitter.emit("setFEC3DViewParam",{eventType:"setFEC3DViewParam",code:-1,target:this,msg:"现只有V3软解支持鱼眼矫正"})}return Promise.reject({code:-1,msg:"现只有V3软解支持鱼眼矫正"})}if(this.jSPlugin.FEC_Set3DViewParam&&this._FECCorrectType&&(this._FECCorrectType.place===3&&this._FECCorrectType.correctType===FEC_CORRECT_CYLINDER||this._FECCorrectType.place===1&&this._FECCorrectType.correctType===FEC_CORRECT_ARCSPHERE_HORIZONTAL)){if(this.eventEmitter){this.eventEmitter.emit("setFEC3DViewParam",{eventType:"setFEC3DViewParam",code:0,target:this,msg:"设置3D矫正视角参数"})}return this.jSPlugin.FEC_Set3DViewParam(param)}if(this.eventEmitter){this.eventEmitter.emit("setFEC3DViewParam",{eventType:"setFEC3DViewParam",code:-1,target:this,msg:"该矫正类型不能设置3D矫正视角参数"})}return Promise.reject({code:-1,msg:"该矫正类型不能设置3D矫正视角参数"})}},{key:"getFEC3DViewParam",value:function getFEC3DViewParam(param){if(!this._FECCorrectType||(this.jSPlugin.isHardH264||this.jSPlugin.isHardH265)&&this.jSPlugin.useHardDev){if(this.eventEmitter){this.eventEmitter.emit("getFEC3DViewParam",{eventType:"getFEC3DViewParam",code:-1,target:this,msg:"现只有V3软解支持鱼眼矫正获取3D矫正视角参数"})}return Promise.reject({code:-1,msg:"现只有V3软解支持鱼眼矫正获取3D矫正视角参数"})}if(this.jSPlugin.FEC_Set3DViewParam&&this._FECCorrectType&&(this._FECCorrectType.place===3&&this._FECCorrectType.correctType===FEC_CORRECT_CYLINDER||this._FECCorrectType.place===1&&this._FECCorrectType.correctType===FEC_CORRECT_ARCSPHERE_HORIZONTAL)){if(this.eventEmitter){this.eventEmitter.emit("getFEC3DViewParam",{eventType:"getFEC3DViewParam",code:0,target:this,data:this.jSPlugin.FEC_Get3DViewParam(param),msg:"获取3D矫正视角参数"})}return this.jSPlugin.FEC_Get3DViewParam(param)}if(this.eventEmitter){this.eventEmitter.emit("getFEC3DViewParam",{eventType:"getFEC3DViewParam",code:-1,target:this,msg:"该矫正类型不能获取3D矫正视角参数"})}return Promise.reject({code:-1,msg:"该矫正类型不能获取3D矫正视角参数"})}},{key:"setWaterMarkFont",value:function setWaterMarkFont(params){if(this.eventEmitter){this.eventEmitter.emit("setWaterMarkFont",{eventType:"setWaterMarkFont",code:0,target:this,msg:"设置水印"})}this.waterMark_JSPlugin=params;return this.jSPlugin.JS_SetWaterMarkFont(params)}}]);return EZUIKitPlayer}();var oWebControl=null;function WebControlInit(id,cbConnectSuccess,cbConnectError,cbConnectClose){return new WebControl({szPluginContainer:id,iServicePortStart:14510,iServicePortEnd:14519,cbConnectSuccess:cbConnectSuccess,cbConnectError:cbConnectError,cbConnectClose:cbConnectClose})}function WebControlDistory(){if(oWebControl!=null){oWebControl.JS_DestroyWnd().then(function(){console.log("JS_DestroyWnd")},function(){});oWebControl.JS_StopService("window").then(function(){oWebControl.JS_Disconnect().then(function(){console.log("JS_Disconnect")},function(){})})}}function cbIntegrationCallBack(oData){if(oData.responseMsg.eventName==="FireTransFunction");console.log(oData.responseMsg)}function cbConnectSuccess(){oWebControl.JS_SetWindowControlCallback({cbIntegrationCallBack:cbIntegrationCallBack});oWebControl.JS_StartService("window",{dllPath:"./chain/cloudTransform.dll"}).then(function(){oWebControl.JS_CreateWnd("playWnd",900,500).then(function(){console.log("JS_CreateWnd success")})})}function cbConnectError(){console.log("cbConnectError");oWebControl=null;console.error("确认本地进程是否已安装并开启成功！")}function cbConnectClose(bNormalClose){console.log("cbConnectClose");oWebControl=null}window.onscroll=function(){if(oWebControl!=null){oWebControl.JS_Resize(900,500)}};window.onresize=function(){if(oWebControl!=null){oWebControl.JS_Resize(900,500)}};window.onunload=function(){try{oWebControl.JS_HideWnd();WebControlDistory()}catch(error){console.error(error)}};window.onpagehide=function(){try{oWebControl.JS_HideWnd()}catch(error){console.error(error)}};var EZUIKitHD=function(){function EZUIKitHD(params){var _this=this;_classCallCheck$1(this,EZUIKitHD);_defineProperty(this,"changeModel",function(num,playParams){var self=_this;_this.switchVideo=parseInt(num);if(oWebControl){oWebControl.JS_RequestInterface({funcName:"ChangeModel",arguments:encodeURI(JSON.stringify({model:num}))}).then(function(oData){if(num==0){self.play({deviceSerial:playParams.deviceSerial,channelNo:playParams.channelNo,validateCode:playParams.validateCode})}else{self.play({deviceSerial:playParams.deviceSerial,channelNo:playParams.channelNo,validateCode:playParams.validateCode,startTime:playParams.startTime,endTime:playParams.endTime})}})}});_defineProperty(this,"init",function(initParams){var _argumentsPram;var self=_this;if(!initParams.appKey||!initParams.accessToken){self.showTips(false,"请输入appkey和token");return}if(typeof initParams.appKey!=="undefined"){_this.appKey=initParams.appKey}if(typeof initParams.accessToken!=="undefined"){_this.accessToken=initParams.accessToken}if(typeof initParams.platformId!=="undefined"){_this.platformId=initParams.platformId}var argumentsPram=(_argumentsPram={layout:+self.layout,userName:"",waterMark:""},_defineProperty(_argumentsPram,"waterMark","1"),_defineProperty(_argumentsPram,"iWndType",0),_defineProperty(_argumentsPram,"intelligenceEnable",1),_defineProperty(_argumentsPram,"isRecord",1),_defineProperty(_argumentsPram,"isSetPos",1),_defineProperty(_argumentsPram,"motionDetectEnable",0),_defineProperty(_argumentsPram,"playBackAlarmOverlyingEnable",0),_defineProperty(_argumentsPram,"response",{code:0,message:null,data:{appKey:initParams.appKey,ezvizToken:initParams.accessToken,videoLevel:0,logLevel:3,showMainTool:1,showSubTool:1,waterMark:"1",userName:"openteam",platformId:initParams.platformId}}),_argumentsPram);console.log("初始化入参",argumentsPram);window.ezuikitMonitor.report({protocol:"hd",appKey:initParams.appKey,action:1,logInfo:{argumentsPram:argumentsPram}});oWebControl.JS_RequestInterface({funcName:"Init",arguments:encodeURI(JSON.stringify(argumentsPram))}).then(function(oData){console.log(oData.responseMsg);self.showTips(true,"视频初始化成功！")})});_defineProperty(this,"play",function(playParams){var self=_this;if(!playParams.deviceSerial||!playParams.channelNo){return}if(typeof playParams.deviceSerial!=="undefined"){_this.deviceSerial=playParams.deviceSerial}if(typeof playParams.channelNo!=="undefined"){_this.channelNo=playParams.channelNo}if(typeof playParams.startTime!=="undefined"&&playParams.startTime){_this.startTime=playParams.startTime+" 00:00:00"}if(typeof playParams.endTime!=="undefined"&&playParams.endTime){_this.endTime=playParams.endTime+" 23:59:59"}if(typeof playParams.validateCode!=="undefined"&&playParams.validateCode){_this.validateCode=playParams.validateCode}var argumentsPram={response:{code:0,message:null,data:{deviceSerial:playParams.deviceSerial,channelCode:playParams.channelNo,channelNo:+playParams.channelNo,codeIsEncrypt:0,validateCode:playParams.validateCode,deviceClass:self.deviceClass,deviceType:"10222",channelId:"2222222222",channelName:"channelNameTest",storeName:"storeName",storeId:"storeid",startTime:_this.startTime,endTime:_this.endTime}}};if(self.deviceClass==="1"){argumentsPram.response.data.channelCode=self.channelNo;argumentsPram.response.data.platformId=self.platformId}else{argumentsPram.response.data.channelNo=+self.channelNo}if(_this.switchVideo===1){if(_this.startTime)argumentsPram.response.data.startTime=_this.startTime;if(_this.endTime)argumentsPram.response.data.endTime=_this.endTime}console.log("预览/回放入参",argumentsPram);oWebControl.JS_RequestInterface({funcName:_this.switchVideo===0?"StartPreview":"StartPlayback",arguments:encodeURI(JSON.stringify(argumentsPram))}).then(function(oData){console.log(oData.responseMsg);self.showTips(true,"预览/回放成功！")})["catch"](function(res){console.log("开始播放：",res)})});_defineProperty(this,"showCBInfo",function(message){_this.callbackMessage=_this.callbackMessage+JSON.stringify(message)+"\n\n";console.log(_this.callbackMessage)});_defineProperty(this,"showTips",function(status,message){});_defineProperty(this,"hideVideo",function(){oWebControl.JS_HideWnd()});_defineProperty(this,"showVideo",function(){oWebControl.JS_ShowWnd()});_defineProperty(this,"GetLayout",function(){var data=null;oWebControl.JS_RequestInterface({funcName:"GetLayout",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:data}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});_defineProperty(this,"capturePicture",function(wndId){var data=null;oWebControl.JS_RequestInterface({funcName:"CaptureJPGEx",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:data}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});_defineProperty(this,"stop",function(){var wndId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;oWebControl.JS_RequestInterface({funcName:"StopPlay",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(wndId)}}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});_defineProperty(this,"setLayout",function(num){var layout=parseInt(num);if(isNaN(layout)||layout==0||layout>=13){console.log("不支持实际布局大于16的窗口数");return}_this.layout=layout;oWebControl.JS_RequestInterface({funcName:"SetLayout",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{layout:layout}}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});_defineProperty(this,"setSoundVolumn",function(){var wndId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;var num=arguments.length>1?arguments[1]:undefined;oWebControl.JS_RequestInterface({funcName:"SoundVolumn",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(wndId),volumn:parseInt(num)}}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});_defineProperty(this,"testMute",function(){var num=parseInt(prompt("请输入窗口ID"));oWebControl.JS_RequestInterface({funcName:"MuteOnOff",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:num}}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});_defineProperty(this,"testSelectWnd",function(){var num=parseInt(prompt("请输入窗口ID"));oWebControl.JS_RequestInterface({funcName:"SelectPlayWnd",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:num}}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});_defineProperty(this,"setVideoLevel",function(wndId,level){oWebControl.JS_RequestInterface({funcName:"SetVideoLevel",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:_this.switchVideo==1?0:parseInt(wndId),level:parseInt(level,10)}}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});_defineProperty(this,"startTalk",function(wndId){oWebControl.JS_RequestInterface({funcName:"StartTalk",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(wndId)}}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});_defineProperty(this,"stopTalk",function(wndId){oWebControl.JS_RequestInterface({funcName:"StopTalk",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(wndId)}}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});_defineProperty(this,"startSave",function(wndId){oWebControl.JS_RequestInterface({funcName:"StartRecord",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(wndId)}}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});_defineProperty(this,"stopSave",function(wndId){oWebControl.JS_RequestInterface({funcName:"StopRecord",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(wndId)}}}))}).then(function(oData){console.log(JSON.stringify(oData.responseMsg));console.log(oData.responseMsg)})});this.appKey="b9a3ad6e8026410095d8252169fa430a",this.accessToken="at.2vtum8873rrcwbrv431qb6pn94dkbv23-8dw2twn355-1u3x014-wrthellzk",this.deviceSerial="C33368372",this.channelNo="1",this.validateCode="";this.deviceClass="0";this.platformId="";this.startTime="";this.endTime="";this.layout=2;this.switchVideo=0;this.tips="调用成功";this.successTip=false;this.tipsShow=false;oWebControl=WebControlInit("playWnd",cbConnectSuccess,cbConnectError,cbConnectClose)}_createClass$1(EZUIKitHD,[{key:"alarmMsg",value:function alarmMsg(){var res={request:{body:{alarmTypes:[10800,0,0,0,0],channelId:"066dde0465dd4abaab6afe355baf9d0b",endTime:"1621007999000",startTime:"1620921600000"},callBack:"GetAlarmMsgOrders",majorKey:"",method:"POST",storeId:"",url:"/videoplugin/message/getMessageByTypes"},response:{code:0,message:null,data:[{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620921217e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620920678e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620920586e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919513e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919483e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919333e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918913e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918616e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918305e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917858e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917658e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917244e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917064e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916994e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916668e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916529e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916343e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916081e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915825e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915676e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915531e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915394e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915197e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914971e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914644e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914533e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914457e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914376e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914284e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620913973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620913431e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912771e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912354e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912275e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912093e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912024e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091189e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911839e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911807e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091176e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911682e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091127e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911184e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910982e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910851e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910781e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910727e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910677e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910647e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910588e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910544e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910484e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091041e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091035e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910278e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910217e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910124e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909976e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909939e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909847e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909817e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909736e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909664e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909605e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909575e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909346e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909247e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909149e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090912e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909028e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908999e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908969e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908909e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090888e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908835e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090875e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090872e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908652e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908612e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908582e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908552e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908456e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908426e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908299e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908268e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090805e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907918e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907758e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907625e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907386e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907292e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907127e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906864e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906828e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906797e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906747e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906717e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906632e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906368e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906329e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906142e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906013e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905946e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905823e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905697e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905622e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905541e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905511e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905481e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905442e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905382e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905352e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905322e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905262e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905196e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090515e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904994e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904813e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090473e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16209047e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904618e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904286e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904173e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904143e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904053e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904023e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903854e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903789e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903723e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903643e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903612e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903573e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903505e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903383e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903329e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903299e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903268e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16209032e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903149e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090312e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902977e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090286e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090277e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902639e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902609e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902517e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902373e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090232e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902253e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902198e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902132e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090194e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090185e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901789e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901746e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901685e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901638e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090152e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901489e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901424e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901271e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901233e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901157e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900915e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900774e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900744e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090065e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090044e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900409e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900175e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900134e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900069e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900016e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899976e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899908e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899879e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899826e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899756e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899599e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899559e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899467e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899406e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899265e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899211e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089914e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089911e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089905e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898991e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898926e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898785e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898746e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898697e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898666e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898507e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898293e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898248e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898218e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898157e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898088e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089802e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089796e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089785e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897807e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897771e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897719e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089769e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089763e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16208976e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089757e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089754e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897475e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897369e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897339e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897279e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897237e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897207e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897172e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897142e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897024e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896985e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896874e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896843e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896814e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896783e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896736e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896621e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896478e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896447e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896358e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896307e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896277e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896247e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896214e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089604e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895953e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895921e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895868e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089577e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895704e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089559e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895559e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089548e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895442e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895377e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895347e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895293e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895171e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895136e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895017e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894926e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894896e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894864e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894738e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894599e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894539e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894426e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894359e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894297e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894213e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894183e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894051e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893964e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893934e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893843e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893754e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893676e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893606e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089353e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893452e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893423e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893357e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893288e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893143e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893051e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893006e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892904e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892824e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892764e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892541e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892479e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892311e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892281e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892209e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892063e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891991e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089187e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089181e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891708e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891655e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891585e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891531e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891401e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891297e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891257e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891178e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891128e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891033e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089094e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890879e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890794e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890714e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890616e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890586e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890469e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890414e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890346e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890288e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890179e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890108e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890041e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890011e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889937e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889719e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889635e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889481e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889451e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889317e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889227e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889139e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889034e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888902e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888837e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888767e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888737e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888706e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888633e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888413e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888353e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888323e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888249e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888162e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888e6},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887859e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887776e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887734e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887692e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887619e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887355e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088732e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887289e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887126e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887066e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887034e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088697e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886884e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886804e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886728e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886609e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886538e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886478e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886396e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886334e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886246e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886111e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886011e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885956e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885894e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885696e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885514e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885484e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885414e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885383e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885341e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885306e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885276e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885186e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885114e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885037e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885006e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884975e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884945e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884911e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884851e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088478e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884696e3}],success:true}};console.log(res);oWebControl.JS_RequestInterface({funcName:"TransFunctionResult",arguments:encodeURI(JSON.stringify(res))})}}]);return EZUIKitHD}();Janus$1.sessions={};Janus$1.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){return true}if(window.navigator.userAgent.match("Chrome")){var chromever=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10);var maxver=33;if(window.navigator.userAgent.match("Linux"))maxver=35;if(chromever>=26&&chromever<=maxver){return true}return Janus$1.extension.isInstalled()}else{return true}};var defaultExtension={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function isInstalled(){return document.querySelector("#janus-extension-installed")!==null},getScreen:function getScreen(callback){var pending=window.setTimeout(function(){var error=new Error("NavigatorUserMediaError");error.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)';return callback(error)},1e3);this.cache[pending]=callback;window.postMessage({type:"janusGetScreen",id:pending},"*")},init:function init(){var cache={};this.cache=cache;window.addEventListener("message",function(event){if(event.origin!=window.location.origin)return;if(event.data.type=="janusGotScreen"&&cache[event.data.id]){var callback=cache[event.data.id];delete cache[event.data.id];if(event.data.sourceId===""){var error=new Error("NavigatorUserMediaError");error.name="You cancelled the request for permission, giving up...";callback(error)}else{callback(null,event.data.sourceId)}}else if(event.data.type=="janusGetScreenPending"){console.log("clearing ",event.data.id);window.clearTimeout(event.data.id)}})}};Janus$1.useDefaultDependencies=function(deps){var f=deps&&deps.fetch||fetch;var p=deps&&deps.Promise||Promise;var socketCls=deps&&deps.WebSocket||WebSocket;return{newWebSocket:function newWebSocket(server,proto){return new socketCls(server,proto)},extension:deps&&deps.extension||defaultExtension,isArray:function isArray(arr){return Array.isArray(arr)},webRTCAdapter:deps&&deps.adapter||adapter,httpAPICall:function httpAPICall(url,options){var fetchOptions={method:options.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};if(options.verb==="POST"){fetchOptions.headers["Content-Type"]="application/json"}if(options.withCredentials!==undefined){fetchOptions.credentials=options.withCredentials===true?"include":options.withCredentials?options.withCredentials:"omit"}if(options.body!==undefined){fetchOptions.body=JSON.stringify(options.body)}var fetching=f(url,fetchOptions)["catch"](function(error){return p.reject({message:"Probably a network error, is the server down?",error:error})});if(options.timeout!==undefined){var timeout=new p(function(resolve,reject){var timerId=setTimeout(function(){clearTimeout(timerId);return reject({message:"Request timed out",timeout:options.timeout})},options.timeout)});fetching=p.race([fetching,timeout])}fetching.then(function(response){if(response.ok){if(_typeof(options.success)===_typeof(Janus$1.noop)){return response.json().then(function(parsed){options.success(parsed)})["catch"](function(error){return p.reject({message:"Failed to parse response body",error:error,response:response})})}}else{return p.reject({message:"API call failed",response:response})}})["catch"](function(error){if(_typeof(options.error)===_typeof(Janus$1.noop)){options.error(error.message||"<< internal error >>",error)}});return fetching}}};Janus$1.useOldDependencies=function(deps){var jq=deps&&deps.jQuery||jQuery;var socketCls=deps&&deps.WebSocket||WebSocket;return{newWebSocket:function newWebSocket(server,proto){return new socketCls(server,proto)},isArray:function isArray(arr){return jq.isArray(arr)},extension:deps&&deps.extension||defaultExtension,webRTCAdapter:deps&&deps.adapter||adapter,httpAPICall:function httpAPICall(url,options){var payload=options.body!==undefined?{contentType:"application/json",data:JSON.stringify(options.body)}:{};var credentials=options.withCredentials!==undefined?{xhrFields:{withCredentials:options.withCredentials}}:{};return jq.ajax(jq.extend(payload,credentials,{url:url,type:options.verb,cache:false,dataType:"json",async:options.async,timeout:options.timeout,success:function success(result){if(_typeof(options.success)===_typeof(Janus$1.noop)){options.success(result)}},error:function error(xhr,status,err){if(_typeof(options.error)===_typeof(Janus$1.noop)){options.error(status,err)}}}))}}};Janus$1.noop=function(){};Janus$1.dataChanDefaultLabel="JanusDataChannel";Janus$1.endOfCandidates=null;Janus$1.init=function(options){options=options||{};options.callback=typeof options.callback=="function"?options.callback:Janus$1.noop;if(Janus$1.initDone===true){options.callback()}else{if(typeof console=="undefined"||typeof console.log=="undefined")console={log:function log(){}};Janus$1.trace=Janus$1.noop;Janus$1.debug=Janus$1.noop;Janus$1.vdebug=Janus$1.noop;Janus$1.log=Janus$1.noop;Janus$1.warn=Janus$1.noop;Janus$1.error=Janus$1.noop;if(options.debug===true||options.debug==="all"){Janus$1.trace=console.trace.bind(console);Janus$1.debug=console.debug.bind(console);Janus$1.vdebug=console.debug.bind(console);Janus$1.log=console.log.bind(console);Janus$1.warn=console.warn.bind(console);Janus$1.error=console.error.bind(console)}else if(Array.isArray(options.debug)){for(var i in options.debug){var d=options.debug[i];switch(d){case"trace":Janus$1.trace=console.trace.bind(console);break;case"debug":Janus$1.debug=console.debug.bind(console);break;case"vdebug":Janus$1.vdebug=console.debug.bind(console);break;case"log":Janus$1.log=console.log.bind(console);break;case"warn":Janus$1.warn=console.warn.bind(console);break;case"error":Janus$1.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+d+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");break}}}Janus$1.log("Initializing library");var usedDependencies=options.dependencies||Janus$1.useDefaultDependencies();Janus$1.isArray=usedDependencies.isArray;Janus$1.webRTCAdapter=usedDependencies.webRTCAdapter;Janus$1.httpAPICall=usedDependencies.httpAPICall;Janus$1.newWebSocket=usedDependencies.newWebSocket;Janus$1.extension=usedDependencies.extension;Janus$1.extension.init();Janus$1.listDevices=function(callback,config){callback=typeof callback=="function"?callback:Janus$1.noop;if(config==null)config={audio:true,video:true};if(Janus$1.isGetUserMediaAvailable()){navigator.mediaDevices.getUserMedia(config).then(function(stream){navigator.mediaDevices.enumerateDevices().then(function(devices){Janus$1.debug(devices);callback(devices);try{var tracks=stream.getTracks();for(var i in tracks){var mst=tracks[i];if(mst!==null&&mst!==undefined)mst.stop()}}catch(e){}})})["catch"](function(err){Janus$1.error(err);callback([])})}else{Janus$1.warn("navigator.mediaDevices unavailable");callback([])}};Janus$1.attachMediaStream=function(element,stream){if(Janus$1.webRTCAdapter.browserDetails.browser==="chrome"){var chromever=Janus$1.webRTCAdapter.browserDetails.version;if(chromever>=52){element.srcObject=stream}else if(typeof element.src!=="undefined"){element.src=URL.createObjectURL(stream)}else{Janus$1.error("Error attaching stream to element")}}else{element.srcObject=stream}};Janus$1.reattachMediaStream=function(to,from){if(Janus$1.webRTCAdapter.browserDetails.browser==="chrome"){var chromever=Janus$1.webRTCAdapter.browserDetails.version;if(chromever>=52){to.srcObject=from.srcObject}else if(typeof to.src!=="undefined"){to.src=from.src}else{Janus$1.error("Error reattaching stream to element")}}else{to.srcObject=from.srcObject}};var iOS=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0;var eventName=iOS?"pagehide":"beforeunload";var oldOBF=window["on"+eventName];window.addEventListener(eventName,function(event){Janus$1.log("Closing window");for(var s in Janus$1.sessions){if(Janus$1.sessions[s]!==null&&Janus$1.sessions[s]!==undefined&&Janus$1.sessions[s].destroyOnUnload){Janus$1.log("Destroying session "+s);Janus$1.sessions[s].destroy({asyncRequest:false,notifyDestroyed:false})}}if(oldOBF&&typeof oldOBF=="function")oldOBF()});Janus$1.safariVp8=false;if(Janus$1.webRTCAdapter.browserDetails.browser==="safari"&&Janus$1.webRTCAdapter.browserDetails.version>=605){if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var i in RTCRtpSender.getCapabilities("video").codecs){var codec=RTCRtpSender.getCapabilities("video").codecs[i];if(codec&&codec.mimeType&&codec.mimeType.toLowerCase()==="video/vp8"){Janus$1.safariVp8=true;break}}if(Janus$1.safariVp8){Janus$1.log("This version of Safari supports VP8")}else{Janus$1.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, "+"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}}else{var testpc=new RTCPeerConnection({},{});testpc.createOffer({offerToReceiveVideo:true}).then(function(offer){Janus$1.safariVp8=offer.sdp.indexOf("VP8")!==-1;if(Janus$1.safariVp8){Janus$1.log("This version of Safari supports VP8")}else{Janus$1.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, "+"try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}testpc.close();testpc=null})}}Janus$1.unifiedPlan=false;if(Janus$1.webRTCAdapter.browserDetails.browser==="firefox"&&Janus$1.webRTCAdapter.browserDetails.version>=59){Janus$1.unifiedPlan=true}else if(Janus$1.webRTCAdapter.browserDetails.browser==="chrome"&&Janus$1.webRTCAdapter.browserDetails.version<72){Janus$1.unifiedPlan=false}else if(!("currentDirection"in RTCRtpTransceiver.prototype)){Janus$1.unifiedPlan=false}else{var tempPc=new RTCPeerConnection;try{tempPc.addTransceiver("audio");Janus$1.unifiedPlan=true}catch(e){}tempPc.close()}Janus$1.initDone=true;options.callback()}};Janus$1.isWebrtcSupported=function(){return window.RTCPeerConnection!==undefined&&window.RTCPeerConnection!==null};Janus$1.isGetUserMediaAvailable=function(){return navigator.mediaDevices!==undefined&&navigator.mediaDevices!==null&&navigator.mediaDevices.getUserMedia!==undefined&&navigator.mediaDevices.getUserMedia!==null};Janus$1.randomString=function(len){var charSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var randomString="";for(var i=0;i<len;i++){var randomPoz=Math.floor(Math.random()*charSet.length);randomString+=charSet.substring(randomPoz,randomPoz+1)}return randomString};function Janus$1(gatewayCallbacks,requestOpt){if(Janus$1.initDone===undefined){gatewayCallbacks.error("Library not initialized");return{}}if(!Janus$1.isWebrtcSupported()){gatewayCallbacks.error("WebRTC not supported by this browser");return{}}Janus$1.log("Library initialized: "+Janus$1.initDone);gatewayCallbacks=gatewayCallbacks||{};gatewayCallbacks.success=typeof gatewayCallbacks.success=="function"?gatewayCallbacks.success:Janus$1.noop;gatewayCallbacks.error=typeof gatewayCallbacks.error=="function"?gatewayCallbacks.error:Janus$1.noop;gatewayCallbacks.destroyed=typeof gatewayCallbacks.destroyed=="function"?gatewayCallbacks.destroyed:Janus$1.noop;if(gatewayCallbacks.server===null||gatewayCallbacks.server===undefined){gatewayCallbacks.error("Invalid server url");return{}}var websockets=false;var ws=null;var wsHandlers={};var wsKeepaliveTimeoutId=null;var servers=null,serversIndex=0;var server=gatewayCallbacks.server;if(Janus$1.isArray(server)){Janus$1.log("Multiple servers provided ("+server.length+"), will use the first that works");server=null;servers=gatewayCallbacks.server;Janus$1.debug(servers)}else{if(server.indexOf("ws")===0){websockets=true;Janus$1.log("Using WebSockets to contact Janus: "+server)}else{websockets=false;Janus$1.log("Using REST API to contact Janus: "+server)}}var iceServers=gatewayCallbacks.iceServers;if(iceServers===undefined||iceServers===null)iceServers=[{urls:"stun:stun.l.google.com:19302"}];var iceTransportPolicy=gatewayCallbacks.iceTransportPolicy;var bundlePolicy=gatewayCallbacks.bundlePolicy;var ipv6Support=gatewayCallbacks.ipv6;if(ipv6Support===undefined||ipv6Support===null)ipv6Support=false;var withCredentials=false;if(gatewayCallbacks.withCredentials!==undefined&&gatewayCallbacks.withCredentials!==null)withCredentials=gatewayCallbacks.withCredentials===true;var maxev=10;if(gatewayCallbacks.max_poll_events!==undefined&&gatewayCallbacks.max_poll_events!==null)maxev=gatewayCallbacks.max_poll_events;if(maxev<1)maxev=1;var token=null;if(gatewayCallbacks.token!==undefined&&gatewayCallbacks.token!==null)token=gatewayCallbacks.token;var apisecret=null;if(gatewayCallbacks.apisecret!==undefined&&gatewayCallbacks.apisecret!==null)apisecret=gatewayCallbacks.apisecret;this.destroyOnUnload=true;if(gatewayCallbacks.destroyOnUnload!==undefined&&gatewayCallbacks.destroyOnUnload!==null)this.destroyOnUnload=gatewayCallbacks.destroyOnUnload===true;var keepAlivePeriod=25e3;if(gatewayCallbacks.keepAlivePeriod!==undefined&&gatewayCallbacks.keepAlivePeriod!==null)keepAlivePeriod=gatewayCallbacks.keepAlivePeriod;if(isNaN(keepAlivePeriod))keepAlivePeriod=25e3;var longPollTimeout=6e4;if(gatewayCallbacks.longPollTimeout!==undefined&&gatewayCallbacks.longPollTimeout!==null)longPollTimeout=gatewayCallbacks.longPollTimeout;if(isNaN(longPollTimeout))longPollTimeout=6e4;function getMaxBitrates(simulcastMaxBitrates){var maxBitrates={high:9e5,medium:3e5,low:1e5};if(simulcastMaxBitrates!==undefined&&simulcastMaxBitrates!==null){if(simulcastMaxBitrates.high)maxBitrates.high=simulcastMaxBitrates.high;if(simulcastMaxBitrates.medium)maxBitrates.medium=simulcastMaxBitrates.medium;if(simulcastMaxBitrates.low)maxBitrates.low=simulcastMaxBitrates.low}return maxBitrates}var connected=false;var sessionId=null;var pluginHandles={};var that=this;var retries=0;var transactions={};createSession(gatewayCallbacks);this.getServer=function(){return server};this.isConnected=function(){return connected};this.reconnect=function(callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$1.noop;callbacks["reconnect"]=true;createSession(callbacks)};this.getSessionId=function(){return sessionId};this.destroy=function(callbacks){destroySession(callbacks)};this.attach=function(callbacks){createHandle(callbacks)};function eventHandler(){if(sessionId==null)return;Janus$1.debug("Long poll...");if(!connected){Janus$1.warn("Is the server down? (connected=false)");return}var longpoll=server+"/"+sessionId+"?rid="+(new Date).getTime();if(maxev!==undefined&&maxev!==null)longpoll=longpoll+"&maxev="+maxev;if(token!==null&&token!==undefined)longpoll=longpoll+"&token="+encodeURIComponent(token);if(apisecret!==null&&apisecret!==undefined)longpoll=longpoll+"&apisecret="+encodeURIComponent(apisecret);Janus$1.httpAPICall(longpoll,{verb:"GET",withCredentials:withCredentials,success:handleEvent,timeout:longPollTimeout,error:function error(textStatus,errorThrown){Janus$1.error(textStatus+":",errorThrown);retries++;if(retries>3){connected=false;gatewayCallbacks.error("Lost connection to the server (is it down?)");return}eventHandler()}})}function handleEvent(json,skipTimeout){retries=0;if(!websockets&&sessionId!==undefined&&sessionId!==null&&skipTimeout!==true)eventHandler();if(!websockets&&Janus$1.isArray(json)){for(var i=0;i<json.length;i++){handleEvent(json[i],true)}return}if(json["rtcgw"]==="keepalive"){Janus$1.vdebug("Got a keepalive on session "+sessionId);return}else if(json["rtcgw"]==="ack"){Janus$1.debug("Got an ack on session "+sessionId);Janus$1.debug(json);var transaction=json["transaction"];if(transaction!==null&&transaction!==undefined){var reportSuccess=transactions[transaction];if(reportSuccess!==null&&reportSuccess!==undefined){reportSuccess(json)}delete transactions[transaction]}return}else if(json["rtcgw"]==="success"){Janus$1.debug("Got a success on session "+sessionId);Janus$1.debug(json);var transaction=json["transaction"];if(transaction!==null&&transaction!==undefined){var reportSuccess=transactions[transaction];if(reportSuccess!==null&&reportSuccess!==undefined){reportSuccess(json)}delete transactions[transaction]}return}else if(json["rtcgw"]==="trickle"){var sender=json["sender"];if(sender===undefined||sender===null){Janus$1.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$1.debug("This handle is not attached to this session");return}var candidate=json["candidate"];Janus$1.debug("Got a trickled candidate on session "+sessionId);Janus$1.debug(candidate);var config=pluginHandle.webrtcStuff;if(config.pc&&config.remoteSdp){Janus$1.debug("Adding remote candidate:",candidate);if(!candidate||candidate.completed===true){config.pc.addIceCandidate(Janus$1.endOfCandidates)}else{config.pc.addIceCandidate(candidate)}}else{Janus$1.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate");if(!config.candidates)config.candidates=[];config.candidates.push(candidate);Janus$1.debug(config.candidates)}}else if(json["rtcgw"]==="webrtcup"){Janus$1.debug("Got a webrtcup event on session "+sessionId);Janus$1.debug(json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$1.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$1.debug("This handle is not attached to this session");return}pluginHandle.webrtcState(true);return}else if(json["rtcgw"]==="hangup"){Janus$1.debug("Got a hangup event on session "+sessionId);Janus$1.debug(json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$1.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$1.debug("This handle is not attached to this session");return}pluginHandle.webrtcState(false,json["reason"]);pluginHandle.hangup()}else if(json["rtcgw"]==="detached"){Janus$1.debug("Got a detached event on session "+sessionId);Janus$1.debug(json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$1.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){return}pluginHandle.detached=true;pluginHandle.ondetached();pluginHandle.detach()}else if(json["rtcgw"]==="media"){Janus$1.debug("Got a media event on session "+sessionId);Janus$1.debug(json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$1.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$1.debug("This handle is not attached to this session");return}pluginHandle.mediaState(json["type"],json["receiving"])}else if(json["rtcgw"]==="slowlink"){Janus$1.debug("Got a slowlink event on session "+sessionId);Janus$1.debug(json);console.log("json的所有信息打印-----------------------------------------------",json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$1.warn("Missing sender...");return}var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$1.debug("This handle is not attached to this session");return}pluginHandle.slowLink(json["uplink"],json["lost"])}else if(json["rtcgw"]==="error"){Janus$1.error("Ooops: "+json["error"].code+" "+json["error"].reason);Janus$1.debug(json);var transaction=json["transaction"];if(transaction!==null&&transaction!==undefined){var reportSuccess=transactions[transaction];if(reportSuccess!==null&&reportSuccess!==undefined){reportSuccess(json)}delete transactions[transaction]}return}else if(json["rtcgw"]==="event"){Janus$1.debug("Got a plugin event on session "+sessionId);Janus$1.debug(json);var sender=json["sender"];if(sender===undefined||sender===null){Janus$1.warn("Missing sender...");return}var plugindata=json["plugindata"];if(plugindata===undefined||plugindata===null){Janus$1.warn("Missing plugindata...");return}Janus$1.debug("  -- Event is coming from "+sender+" ("+plugindata["plugin"]+")");var data=plugindata["data"];Janus$1.debug(data);var pluginHandle=pluginHandles[sender];if(pluginHandle===undefined||pluginHandle===null){Janus$1.warn("This handle is not attached to this session");return}var jsep=json["jsep"];if(jsep!==undefined&&jsep!==null){Janus$1.debug("Handling SDP as well...");Janus$1.debug(jsep)}var callback=pluginHandle.onmessage;if(callback!==null&&callback!==undefined){Janus$1.debug("Notifying application...");callback(data,jsep)}else{Janus$1.debug("No provided notification callback")}}else if(json["rtcgw"]==="timeout"){Janus$1.error("Timeout on session "+sessionId);Janus$1.debug(json);if(websockets){ws.close(3504,"Gateway timeout")}return}else{Janus$1.warn("Unknown message/event  '"+json["rtcgw"]+"' on session "+sessionId);Janus$1.debug(json)}}function keepAlive(){if(server===null||!websockets||!connected)return;wsKeepaliveTimeoutId=setTimeout(keepAlive,keepAlivePeriod);var request={rtcgw:"keepalive",session_id:sessionId,transaction:Janus$1.randomString(12)};if(token!==null&&token!==undefined)request["token"]=token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;ws.send(JSON.stringify(request))}function createSession(callbacks){var transaction=Janus$1.randomString(12);var request={rtcgw:"create",transaction:transaction,token:"testtoken"};request=Object.assign({},request,requestOpt);if(callbacks["reconnect"]){connected=false;request["rtcgw"]="claim";request["session_id"]=sessionId;if(ws){ws.onopen=null;ws.onerror=null;ws.onclose=null;if(wsKeepaliveTimeoutId){clearTimeout(wsKeepaliveTimeoutId);wsKeepaliveTimeoutId=null}}}if(token!==null&&token!==undefined)request["token"]=token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;if(server===null&&Janus$1.isArray(servers)){server=servers[serversIndex];if(server.indexOf("ws")===0){websockets=true;Janus$1.log("Server #"+(serversIndex+1)+": trying WebSockets to contact Janus ("+server+")")}else{websockets=false;Janus$1.log("Server #"+(serversIndex+1)+": trying REST API to contact Janus ("+server+")")}}if(websockets){ws=Janus$1.newWebSocket(server,"rtcgw-protocol");wsHandlers={error:function error(){Janus$1.error("Error connecting to the Janus WebSockets server... "+server);if(Janus$1.isArray(servers)&&!callbacks["reconnect"]){serversIndex++;if(serversIndex==servers.length){callbacks.error("Error connecting to any of the provided Janus servers: Is the server down?");return}server=null;setTimeout(function(){createSession(callbacks)},200);return}callbacks.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function open(){transactions[transaction]=function(json){Janus$1.debug(json);if(json["rtcgw"]!=="success"){Janus$1.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error(json["error"].reason);return}wsKeepaliveTimeoutId=setTimeout(keepAlive,keepAlivePeriod);connected=true;sessionId=json["session_id"]?json["session_id"]:json.data["id"];if(callbacks["reconnect"]){Janus$1.log("Claimed session: "+sessionId)}else{Janus$1.log("Created session: "+sessionId)}Janus$1.sessions[sessionId]=that;callbacks.success(sessionId)};ws.send(JSON.stringify(request))},message:function message(event){handleEvent(JSON.parse(event.data))}};for(var eventName in wsHandlers){ws.addEventListener(eventName,wsHandlers[eventName])}return}Janus$1.httpAPICall(server,{verb:"POST",withCredentials:withCredentials,body:request,success:function success(json){Janus$1.debug(json);if(json["rtcgw"]!=="success"){Janus$1.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error(json["error"].reason);return}connected=true;sessionId=json["session_id"]?json["session_id"]:json.data["id"];if(callbacks["reconnect"]){Janus$1.log("Claimed session: "+sessionId)}else{Janus$1.log("Created session: "+sessionId)}Janus$1.sessions[sessionId]=that;eventHandler();callbacks.success()},error:function error(textStatus,errorThrown){Janus$1.error(textStatus+":",errorThrown);if(Janus$1.isArray(servers)&&!callbacks["reconnect"]){serversIndex++;if(serversIndex==servers.length){callbacks.error("Error connecting to any of the provided Janus servers: Is the server down?");return}server=null;setTimeout(function(){createSession(callbacks)},200);return}if(errorThrown==="")callbacks.error(textStatus+": Is the server down?");else callbacks.error(textStatus+": "+errorThrown)}})}function destroySession(callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;var asyncRequest=true;if(callbacks.asyncRequest!==undefined&&callbacks.asyncRequest!==null)asyncRequest=callbacks.asyncRequest===true;var notifyDestroyed=true;if(callbacks.notifyDestroyed!==undefined&&callbacks.notifyDestroyed!==null)notifyDestroyed=callbacks.notifyDestroyed===true;var cleanupHandles=false;if(callbacks.cleanupHandles!==undefined&&callbacks.cleanupHandles!==null)cleanupHandles=callbacks.cleanupHandles===true;Janus$1.log("Destroying session "+sessionId+" (async="+asyncRequest+")");if(!connected){Janus$1.warn("Is the server down? (connected=false)");callbacks.success();return}if(sessionId===undefined||sessionId===null){Janus$1.warn("No session to destroy");callbacks.success();if(notifyDestroyed)gatewayCallbacks.destroyed();return}if(cleanupHandles){for(var handleId in pluginHandles)destroyHandle(handleId,{noRequest:true})}var request={rtcgw:"destroy",transaction:Janus$1.randomString(12)};if(token!==null&&token!==undefined)request["token"]=token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;if(websockets){request["session_id"]=sessionId;var unbindWebSocket=function unbindWebSocket(){for(var eventName in wsHandlers){ws.removeEventListener(eventName,wsHandlers[eventName])}ws.removeEventListener("message",onUnbindMessage);ws.removeEventListener("error",onUnbindError);if(wsKeepaliveTimeoutId){clearTimeout(wsKeepaliveTimeoutId)}ws.close()};var onUnbindMessage=function onUnbindMessage(event){var data=JSON.parse(event.data);if(data.session_id==request.session_id&&data.transaction==request.transaction){unbindWebSocket();callbacks.success();if(notifyDestroyed)gatewayCallbacks.destroyed()}};var onUnbindError=function onUnbindError(event){unbindWebSocket();callbacks.error("Failed to destroy the server: Is the server down?");if(notifyDestroyed)gatewayCallbacks.destroyed()};ws.addEventListener("message",onUnbindMessage);ws.addEventListener("error",onUnbindError);ws.send(JSON.stringify(request));return}Janus$1.httpAPICall(server+"/"+sessionId,{verb:"POST",async:asyncRequest,withCredentials:withCredentials,body:request,success:function success(json){Janus$1.log("Destroyed session:");Janus$1.debug(json);sessionId=null;connected=false;if(json["rtcgw"]!=="success"){Janus$1.error("Ooops: "+json["error"].code+" "+json["error"].reason)}callbacks.success();if(notifyDestroyed)gatewayCallbacks.destroyed()},error:function error(textStatus,errorThrown){Janus$1.error(textStatus+":",errorThrown);sessionId=null;connected=false;callbacks.success();if(notifyDestroyed)gatewayCallbacks.destroyed();pluginHandlesp}})}function createHandle(callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$1.noop;callbacks.consentDialog=typeof callbacks.consentDialog=="function"?callbacks.consentDialog:Janus$1.noop;callbacks.iceState=typeof callbacks.iceState=="function"?callbacks.iceState:Janus$1.noop;callbacks.mediaState=typeof callbacks.mediaState=="function"?callbacks.mediaState:Janus$1.noop;callbacks.webrtcState=typeof callbacks.webrtcState=="function"?callbacks.webrtcState:Janus$1.noop;callbacks.slowLink=typeof callbacks.slowLink=="function"?callbacks.slowLink:Janus$1.noop;callbacks.onmessage=typeof callbacks.onmessage=="function"?callbacks.onmessage:Janus$1.noop;callbacks.onlocalstream=typeof callbacks.onlocalstream=="function"?callbacks.onlocalstream:Janus$1.noop;callbacks.onremotestream=typeof callbacks.onremotestream=="function"?callbacks.onremotestream:Janus$1.noop;callbacks.ondata=typeof callbacks.ondata=="function"?callbacks.ondata:Janus$1.noop;callbacks.ondataopen=typeof callbacks.ondataopen=="function"?callbacks.ondataopen:Janus$1.noop;callbacks.oncleanup=typeof callbacks.oncleanup=="function"?callbacks.oncleanup:Janus$1.noop;callbacks.ondetached=typeof callbacks.ondetached=="function"?callbacks.ondetached:Janus$1.noop;if(!connected){Janus$1.warn("Is the server down? (connected=false)");callbacks.error("Is the server down? (connected=false)");return}var plugin=callbacks.plugin;if(plugin===undefined||plugin===null){Janus$1.error("Invalid plugin");callbacks.error("Invalid plugin");return}var opaqueId=callbacks.opaqueId;var handleToken=callbacks.token?callbacks.token:token;var transaction=Janus$1.randomString(12);var request={rtcgw:"attach",plugin:plugin,opaque_id:opaqueId,transaction:transaction};if(handleToken!==null&&handleToken!==undefined)request["token"]=handleToken;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;if(websockets){transactions[transaction]=function(json){Janus$1.debug(json);if(json["rtcgw"]!=="success"){Janus$1.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error("Ooops: "+json["error"].code+" "+json["error"].reason);return}var handleId=json.data["id"];Janus$1.log("Created handle: "+handleId);var pluginHandle={session:that,plugin:plugin,id:handleId,token:handleToken,detached:false,webrtcStuff:{started:false,myStream:null,streamExternal:false,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:true,iceDone:false,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function getId(){return handleId},getPlugin:function getPlugin(){return plugin},getVolume:function getVolume(){return _getVolume(handleId,true)},getRemoteVolume:function getRemoteVolume(){return _getVolume(handleId,true)},getLocalVolume:function getLocalVolume(){return _getVolume(handleId,false)},isAudioMuted:function isAudioMuted(){return isMuted(handleId,false)},muteAudio:function muteAudio(){return mute(handleId,false,true)},unmuteAudio:function unmuteAudio(){return mute(handleId,false,false)},isVideoMuted:function isVideoMuted(){return isMuted(handleId,true)},muteVideo:function muteVideo(){return mute(handleId,true,true)},unmuteVideo:function unmuteVideo(){return mute(handleId,true,false)},getBitrate:function getBitrate(){return _getBitrate(handleId)},getNetworkQuality:function getNetworkQuality(callbacks){_getNetworkQuality(handleId,callbacks)},send:function send(callbacks){sendMessage(handleId,callbacks)},data:function data(callbacks){sendData(handleId,callbacks)},dtmf:function dtmf(callbacks){sendDtmf(handleId,callbacks)},consentDialog:callbacks.consentDialog,iceState:callbacks.iceState,mediaState:callbacks.mediaState,webrtcState:callbacks.webrtcState,slowLink:callbacks.slowLink,onmessage:callbacks.onmessage,createOffer:function createOffer(callbacks){prepareWebrtc(handleId,true,callbacks)},createAnswer:function createAnswer(callbacks){prepareWebrtc(handleId,false,callbacks)},handleRemoteJsep:function handleRemoteJsep(callbacks){prepareWebrtcPeer(handleId,callbacks)},onlocalstream:callbacks.onlocalstream,onremotestream:callbacks.onremotestream,ondata:callbacks.ondata,ondataopen:callbacks.ondataopen,oncleanup:callbacks.oncleanup,ondetached:callbacks.ondetached,hangup:function hangup(sendRequest){cleanupWebrtc(handleId,sendRequest===true)},detach:function detach(callbacks){destroyHandle(handleId,callbacks)}};pluginHandles[handleId]=pluginHandle;callbacks.success(pluginHandle)};request["session_id"]=sessionId;ws.send(JSON.stringify(request));return}Janus$1.httpAPICall(server+"/"+sessionId,{verb:"POST",withCredentials:withCredentials,body:request,success:function success(json){Janus$1.debug(json);if(json["rtcgw"]!=="success"){Janus$1.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error("Ooops: "+json["error"].code+" "+json["error"].reason);return}var handleId=json.data["id"];Janus$1.log("Created handle: "+handleId);var pluginHandle={session:that,plugin:plugin,id:handleId,token:handleToken,detached:false,webrtcStuff:{started:false,myStream:null,streamExternal:false,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:true,iceDone:false,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function getId(){return handleId},getPlugin:function getPlugin(){return plugin},getVolume:function getVolume(){return _getVolume(handleId,true)},getRemoteVolume:function getRemoteVolume(){return _getVolume(handleId,true)},getLocalVolume:function getLocalVolume(){return _getVolume(handleId,false)},isAudioMuted:function isAudioMuted(){return isMuted(handleId,false)},muteAudio:function muteAudio(){return mute(handleId,false,true)},unmuteAudio:function unmuteAudio(){return mute(handleId,false,false)},isVideoMuted:function isVideoMuted(){return isMuted(handleId,true)},muteVideo:function muteVideo(){return mute(handleId,true,true)},unmuteVideo:function unmuteVideo(){return mute(handleId,true,false)},getBitrate:function getBitrate(){return _getBitrate(handleId)},getNetworkQuality:function getNetworkQuality(callbacks){_getNetworkQuality(handleId,callbacks)},send:function send(callbacks){sendMessage(handleId,callbacks)},data:function data(callbacks){sendData(handleId,callbacks)},dtmf:function dtmf(callbacks){sendDtmf(handleId,callbacks)},consentDialog:callbacks.consentDialog,iceState:callbacks.iceState,mediaState:callbacks.mediaState,webrtcState:callbacks.webrtcState,slowLink:callbacks.slowLink,onmessage:callbacks.onmessage,createOffer:function createOffer(callbacks){prepareWebrtc(handleId,true,callbacks)},createAnswer:function createAnswer(callbacks){prepareWebrtc(handleId,false,callbacks)},handleRemoteJsep:function handleRemoteJsep(callbacks){prepareWebrtcPeer(handleId,callbacks)},onlocalstream:callbacks.onlocalstream,onremotestream:callbacks.onremotestream,ondata:callbacks.ondata,ondataopen:callbacks.ondataopen,oncleanup:callbacks.oncleanup,ondetached:callbacks.ondetached,hangup:function hangup(sendRequest){cleanupWebrtc(handleId,sendRequest===true)},detach:function detach(callbacks){destroyHandle(handleId,callbacks)}};pluginHandles[handleId]=pluginHandle;callbacks.success(pluginHandle)},error:function error(textStatus,errorThrown){Janus$1.error(textStatus+":",errorThrown)}})}function sendMessage(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$1.noop;if(!connected){Janus$1.warn("Is the server down? (connected=false)");callbacks.error("Is the server down? (connected=false)");return}var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");callbacks.error("Invalid handle");return}var message=callbacks.message;var jsep=callbacks.jsep;var transaction=Janus$1.randomString(12);var request={rtcgw:"message",body:message,transaction:transaction};if(pluginHandle.token!==null&&pluginHandle.token!==undefined)request["token"]=pluginHandle.token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;if(jsep!==null&&jsep!==undefined)request.jsep=jsep;Janus$1.debug("Sending message to plugin (handle="+handleId+"):");Janus$1.debug(request);if(websockets){request["session_id"]=sessionId;request["handle_id"]=handleId;transactions[transaction]=function(json){Janus$1.debug("Message sent!");Janus$1.debug(json);if(json["rtcgw"]==="success"){var plugindata=json["plugindata"];if(plugindata===undefined||plugindata===null){Janus$1.warn("Request succeeded, but missing plugindata...");callbacks.success();return}Janus$1.log("Synchronous transaction successful ("+plugindata["plugin"]+")");var data=plugindata["data"];Janus$1.debug(data);callbacks.success(data);return}else if(json["rtcgw"]!=="ack"){if(json["error"]!==undefined&&json["error"]!==null){Janus$1.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error(json["error"].code+" "+json["error"].reason)}else{Janus$1.error("Unknown error");callbacks.error("Unknown error")}return}callbacks.success()};ws.send(JSON.stringify(request));return}Janus$1.httpAPICall(server+"/"+sessionId+"/"+handleId,{verb:"POST",withCredentials:withCredentials,body:request,success:function success(json){Janus$1.debug("Message sent!");Janus$1.debug(json);if(json["rtcgw"]==="success"){var plugindata=json["plugindata"];if(plugindata===undefined||plugindata===null){Janus$1.warn("Request succeeded, but missing plugindata...");callbacks.success();return}Janus$1.log("Synchronous transaction successful ("+plugindata["plugin"]+")");var data=plugindata["data"];Janus$1.debug(data);callbacks.success(data);return}else if(json["rtcgw"]!=="ack"){if(json["error"]!==undefined&&json["error"]!==null){Janus$1.error("Ooops: "+json["error"].code+" "+json["error"].reason);callbacks.error(json["error"].code+" "+json["error"].reason)}else{Janus$1.error("Unknown error");callbacks.error("Unknown error")}return}callbacks.success()},error:function error(textStatus,errorThrown){Janus$1.error(textStatus+":",errorThrown);callbacks.error(textStatus+": "+errorThrown)}})}function sendTrickleCandidate(handleId,candidate){if(!connected){Janus$1.warn("Is the server down? (connected=false)");return}var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");return}var request={rtcgw:"trickle",candidate:candidate,transaction:Janus$1.randomString(12)};if(pluginHandle.token!==null&&pluginHandle.token!==undefined)request["token"]=pluginHandle.token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;Janus$1.vdebug("Sending trickle candidate (handle="+handleId+"):");Janus$1.vdebug(request);if(websockets){request["session_id"]=sessionId;request["handle_id"]=handleId;ws.send(JSON.stringify(request));return}Janus$1.httpAPICall(server+"/"+sessionId+"/"+handleId,{verb:"POST",withCredentials:withCredentials,body:request,success:function success(json){Janus$1.vdebug("Candidate sent!");Janus$1.vdebug(json);if(json["rtcgw"]!=="ack"){Janus$1.error("Ooops: "+json["error"].code+" "+json["error"].reason);return}},error:function error(textStatus,errorThrown){Janus$1.error(textStatus+":",errorThrown)}})}function createDataChannel(handleId,dclabel,incoming,pendingText){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");return}var config=pluginHandle.webrtcStuff;var onDataChannelMessage=function onDataChannelMessage(event){Janus$1.log("Received message on data channel:",event);var label=event.target.label;pluginHandle.ondata(event.data,label)};var onDataChannelStateChange=function onDataChannelStateChange(event){Janus$1.log("Received state change on data channel:",event);var label=event.target.label;var dcState=config.dataChannel[label]?config.dataChannel[label].readyState:"null";Janus$1.log("State change on <"+label+"> data channel: "+dcState);if(dcState==="open"){if(config.dataChannel[label].pending&&config.dataChannel[label].pending.length>0){Janus$1.log("Sending pending messages on <"+label+">:",config.dataChannel[label].pending.length);for(var i in config.dataChannel[label].pending){var text=config.dataChannel[label].pending[i];Janus$1.log("Sending string on data channel <"+label+">: "+text);config.dataChannel[label].send(text)}config.dataChannel[label].pending=[]}pluginHandle.ondataopen(label)}};var onDataChannelError=function onDataChannelError(error){Janus$1.error("Got error on data channel:",error)};if(!incoming){config.dataChannel[dclabel]=config.pc.createDataChannel(dclabel,{ordered:false})}else{config.dataChannel[dclabel]=incoming}config.dataChannel[dclabel].onmessage=onDataChannelMessage;config.dataChannel[dclabel].onopen=onDataChannelStateChange;config.dataChannel[dclabel].onclose=onDataChannelStateChange;config.dataChannel[dclabel].onerror=onDataChannelError;config.dataChannel[dclabel].pending=[];if(pendingText)config.dataChannel[dclabel].pending.push(pendingText)}function sendData(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$1.noop;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;var text=callbacks.text;if(text===null||text===undefined){Janus$1.warn("Invalid text");callbacks.error("Invalid text");return}var label=callbacks.label?callbacks.label:Janus$1.dataChanDefaultLabel;if(!config.dataChannel[label]){createDataChannel(handleId,label,false,text);callbacks.success();return}if(config.dataChannel[label].readyState!=="open"){config.dataChannel[label].pending.push(text);callbacks.success();return}Janus$1.log("Sending string on data channel <"+label+">: "+text);config.dataChannel[label].send(text);callbacks.success()}function sendDtmf(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$1.noop;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;if(config.dtmfSender===null||config.dtmfSender===undefined){if(config.pc!==undefined&&config.pc!==null){var senders=config.pc.getSenders();var audioSender=senders.find(function(sender){return sender.track&&sender.track.kind==="audio"});if(!audioSender){Janus$1.warn("Invalid DTMF configuration (no audio track)");callbacks.error("Invalid DTMF configuration (no audio track)");return}config.dtmfSender=audioSender.dtmf;if(config.dtmfSender){Janus$1.log("Created DTMF Sender");config.dtmfSender.ontonechange=function(tone){Janus$1.debug("Sent DTMF tone: "+tone.tone)}}}if(config.dtmfSender===null||config.dtmfSender===undefined){Janus$1.warn("Invalid DTMF configuration");callbacks.error("Invalid DTMF configuration");return}}var dtmf=callbacks.dtmf;if(dtmf===null||dtmf===undefined){Janus$1.warn("Invalid DTMF parameters");callbacks.error("Invalid DTMF parameters");return}var tones=dtmf.tones;if(tones===null||tones===undefined){Janus$1.warn("Invalid DTMF string");callbacks.error("Invalid DTMF string");return}var duration=dtmf.duration;if(duration===null||duration===undefined)duration=500;var gap=dtmf.gap;if(gap===null||gap===undefined)gap=50;Janus$1.debug("Sending DTMF string "+tones+" (duration "+duration+"ms, gap "+gap+"ms)");config.dtmfSender.insertDTMF(tones,duration,gap);callbacks.success()}function destroyHandle(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$1.noop;var asyncRequest=true;if(callbacks.asyncRequest!==undefined&&callbacks.asyncRequest!==null)asyncRequest=callbacks.asyncRequest===true;var noRequest=true;if(callbacks.noRequest!==undefined&&callbacks.noRequest!==null)noRequest=callbacks.noRequest===true;Janus$1.log("Destroying handle "+handleId+" (async="+asyncRequest+")");cleanupWebrtc(handleId);var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.detached){delete pluginHandles[handleId];callbacks.success();return}if(noRequest){delete pluginHandles[handleId];callbacks.success();return}if(!connected){Janus$1.warn("Is the server down? (connected=false)");callbacks.error("Is the server down? (connected=false)");return}var request={rtcgw:"detach",transaction:Janus$1.randomString(12)};if(pluginHandle.token!==null&&pluginHandle.token!==undefined)request["token"]=pluginHandle.token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;if(websockets){request["session_id"]=sessionId;request["handle_id"]=handleId;ws.send(JSON.stringify(request));delete pluginHandles[handleId];callbacks.success();return}Janus$1.httpAPICall(server+"/"+sessionId+"/"+handleId,{verb:"POST",async:asyncRequest,withCredentials:withCredentials,body:request,success:function success(json){Janus$1.log("Destroyed handle:");Janus$1.debug(json);if(json["rtcgw"]!=="success"){Janus$1.error("Ooops: "+json["error"].code+" "+json["error"].reason)}delete pluginHandles[handleId];callbacks.success()},error:function error(textStatus,errorThrown){Janus$1.error(textStatus+":",errorThrown);delete pluginHandles[handleId];callbacks.success()}})}function streamsDone(handleId,jsep,media,callbacks,stream){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;Janus$1.debug("streamsDone:",stream);if(stream){Janus$1.debug("  -- Audio tracks:",stream.getAudioTracks());Janus$1.debug("  -- Video tracks:",stream.getVideoTracks())}var addTracks=false;if(!config.myStream||!media.update||config.streamExternal){config.myStream=stream;addTracks=true}else{if((!media.update&&isAudioSendEnabled(media)||media.update&&(media.addAudio||media.replaceAudio))&&stream.getAudioTracks()&&stream.getAudioTracks().length){config.myStream.addTrack(stream.getAudioTracks()[0]);if(Janus$1.unifiedPlan){Janus$1.log((media.replaceAudio?"Replacing":"Adding")+" audio track:",stream.getAudioTracks()[0]);var audioTransceiver=null;var transceivers=config.pc.getTransceivers();if(transceivers&&transceivers.length>0){for(var i in transceivers){var t=transceivers[i];if(t.sender&&t.sender.track&&t.sender.track.kind==="audio"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="audio"){audioTransceiver=t;break}}}if(audioTransceiver&&audioTransceiver.sender){audioTransceiver.sender.replaceTrack(stream.getAudioTracks()[0])}else{config.pc.addTrack(stream.getAudioTracks()[0],stream)}}else{Janus$1.log((media.replaceAudio?"Replacing":"Adding")+" audio track:",stream.getAudioTracks()[0]);config.pc.addTrack(stream.getAudioTracks()[0],stream)}}if((!media.update&&isVideoSendEnabled(media)||media.update&&(media.addVideo||media.replaceVideo))&&stream.getVideoTracks()&&stream.getVideoTracks().length){config.myStream.addTrack(stream.getVideoTracks()[0]);if(Janus$1.unifiedPlan){Janus$1.log((media.replaceVideo?"Replacing":"Adding")+" video track:",stream.getVideoTracks()[0]);var videoTransceiver=null;var transceivers=config.pc.getTransceivers();if(transceivers&&transceivers.length>0){for(var i in transceivers){var t=transceivers[i];if(t.sender&&t.sender.track&&t.sender.track.kind==="video"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="video"){videoTransceiver=t;break}}}if(videoTransceiver&&videoTransceiver.sender){videoTransceiver.sender.replaceTrack(stream.getVideoTracks()[0])}else{config.pc.addTrack(stream.getVideoTracks()[0],stream)}}else{Janus$1.log((media.replaceVideo?"Replacing":"Adding")+" video track:",stream.getVideoTracks()[0]);config.pc.addTrack(stream.getVideoTracks()[0],stream)}}}if(!config.pc){var pc_config={iceServers:iceServers,iceTransportPolicy:iceTransportPolicy,bundlePolicy:bundlePolicy};if(Janus$1.webRTCAdapter.browserDetails.browser==="chrome"){pc_config["sdpSemantics"]=Janus$1.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan"}var pc_constraints={optional:[{DtlsSrtpKeyAgreement:true}]};if(ipv6Support===true){pc_constraints.optional.push({googIPv6:true})}if(callbacks.rtcConstraints&&_typeof(callbacks.rtcConstraints)==="object"){Janus$1.debug("Adding custom PeerConnection constraints:",callbacks.rtcConstraints);for(var i in callbacks.rtcConstraints){pc_constraints.optional.push(callbacks.rtcConstraints[i])}}if(Janus$1.webRTCAdapter.browserDetails.browser==="edge"){pc_config.bundlePolicy="max-bundle"}Janus$1.log("Creating PeerConnection");Janus$1.debug(pc_constraints);config.pc=new RTCPeerConnection(pc_config,pc_constraints);Janus$1.debug(config.pc);if(config.pc.getStats){config.volume={};config.bitrate.value="0 kbits/sec"}Janus$1.log("Preparing local SDP and gathering candidates (trickle="+config.trickle+")");config.pc.oniceconnectionstatechange=function(e){if(config.pc)pluginHandle.iceState(config.pc.iceConnectionState)};config.pc.onicecandidate=function(event){if(event.candidate==null||Janus$1.webRTCAdapter.browserDetails.browser==="edge"&&event.candidate.candidate.indexOf("endOfCandidates")>0){Janus$1.log("End of candidates.");config.iceDone=true;if(config.trickle===true){sendTrickleCandidate(handleId,{completed:true})}else{sendSDP(handleId,callbacks)}}else{var candidate={candidate:event.candidate.candidate,sdpMid:event.candidate.sdpMid,sdpMLineIndex:event.candidate.sdpMLineIndex};if(config.trickle===true){sendTrickleCandidate(handleId,candidate)}}};config.pc.ontrack=function(event){Janus$1.log("Handling Remote Track");Janus$1.debug(event);if(!event.streams)return;config.remoteStream=event.streams[0];pluginHandle.onremotestream(config.remoteStream);if(event.track.onended)return;Janus$1.log("Adding onended callback to track:",event.track);event.track.onended=function(ev){Janus$1.log("Remote track muted/removed:",ev);if(config.remoteStream){config.remoteStream.removeTrack(ev.target);pluginHandle.onremotestream(config.remoteStream)}};event.track.onmute=event.track.onended;event.track.onunmute=function(ev){Janus$1.log("Remote track flowing again:",ev);try{config.remoteStream.addTrack(ev.target);pluginHandle.onremotestream(config.remoteStream)}catch(e){Janus$1.error(e)}}}}if(addTracks&&stream!==null&&stream!==undefined){Janus$1.log("Adding local stream");console.log("callbacks",callbacks);if(callbacks.media.video=="screen"){var simulcast2=callbacks.simulcast2===true?true:false;stream.getTracks().forEach(function(track){Janus$1.log("Adding local track:",track);track.applyConstraints({frameRate:5});if(!simulcast2){config.pc.addTrack(track,stream)}else{if(track.kind==="audio"){config.pc.addTrack(track,stream)}else{Janus$1.log("Enabling rid-based simulcasting:",track);var maxBitrates=getMaxBitrates(callbacks.simulcastMaxBitrates);config.pc.addTransceiver(track,{direction:"sendrecv",streams:[stream],sendEncodings:[{rid:"h",active:true,maxBitrate:maxBitrates.high},{rid:"m",active:true,maxBitrate:maxBitrates.medium,scaleResolutionDownBy:2},{rid:"l",active:true,maxBitrate:maxBitrates.low,scaleResolutionDownBy:4}]})}}})}else{var simulcast2=callbacks.simulcast2===true?true:false;var tracks=stream.getTracks();var videoTrack=tracks[0];if(videoTrack){var settings=videoTrack.getSettings();console.log("videoTrack",videoTrack);console.log("videosettings",settings)}var audioTracks=stream.getAudioTracks();var audioTrack=audioTracks[0];if(audioTrack){var _settings=audioTrack.getSettings();console.log("audiosettings",_settings)}tracks.forEach(function(track){track.applyConstraints({frameRate:{max:callbacks.frameRate}});Janus$1.log("Adding local track:",track);if(simulcast2){config.pc.addTrack(track,stream);var vsender=null;var senders=config.pc.getSenders();for(var index in senders){var s=senders[index];if(s&&s.track&&s.track.kind==="video"){vsender=s}}var parameters=null;if(vsender){parameters=vsender.getParameters()}if(parameters&&parameters.encodings){parameters.encodings[0].maxBitrate=1e5;vsender.setParameters(parameters).then(function(res){console.log("Successed to set parameters!",parameters)})["catch"](function(err){console.log("err",err);console.error(err)})}}else{if(track.kind==="audio"){config.pc.addTrack(track,stream)}else{Janus$1.log("Enabling rid-based simulcasting:",track);var maxBitrate=callbacks.bitrate||1e5;config.pc.addTransceiver(track,{direction:"sendrecv",streams:[stream],sendEncodings:[{rid:"h",active:true,maxBitrate:maxBitrate}]})}}})}}if(isDataEnabled(media)&&!config.dataChannel[Janus$1.dataChanDefaultLabel]){Janus$1.log("Creating data channel");createDataChannel(handleId,Janus$1.dataChanDefaultLabel,false);config.pc.ondatachannel=function(event){Janus$1.log("Data channel created by Janus:",event);createDataChannel(handleId,event.channel.label,event.channel)}}if(config.myStream)pluginHandle.onlocalstream(config.myStream);if(jsep===null||jsep===undefined){createOffer(handleId,media,callbacks)}else{config.pc.setRemoteDescription(jsep).then(function(){Janus$1.log("Remote description accepted!");config.remoteSdp=jsep.sdp;if(config.candidates&&config.candidates.length>0){for(var i=0;i<config.candidates.length;i++){var candidate=config.candidates[i];Janus$1.debug("Adding remote candidate:",candidate);if(!candidate||candidate.completed===true){config.pc.addIceCandidate(Janus$1.endOfCandidates)}else{config.pc.addIceCandidate(candidate)}}config.candidates=[]}createAnswer(handleId,media,callbacks)},callbacks.error)}}function prepareWebrtc(handleId,offer,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:webrtcError;var jsep=callbacks.jsep;if(offer&&jsep){Janus$1.error("Provided a JSEP to a createOffer");callbacks.error("Provided a JSEP to a createOffer");return}else if(!offer&&(!jsep||!jsep.type||!jsep.sdp)){Janus$1.error("A valid JSEP is required for createAnswer");callbacks.error("A valid JSEP is required for createAnswer");return}callbacks.media=callbacks.media||{audio:true,video:true};var media=callbacks.media;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;config.trickle=isTrickleEnabled(callbacks.trickle);if(config.pc===undefined||config.pc===null){media.update=false;media.keepAudio=false;media.keepVideo=false}else if(config.pc!==undefined&&config.pc!==null){Janus$1.log("Updating existing media session");media.update=true;if(callbacks.stream!==null&&callbacks.stream!==undefined){if(callbacks.stream!==config.myStream){Janus$1.log("Renegotiation involves a new external stream")}}else{if(media.addAudio){media.keepAudio=false;media.replaceAudio=false;media.removeAudio=false;media.audioSend=true;if(config.myStream&&config.myStream.getAudioTracks()&&config.myStream.getAudioTracks().length){Janus$1.error("Can't add audio stream, there already is one");callbacks.error("Can't add audio stream, there already is one");return}}else if(media.removeAudio){media.keepAudio=false;media.replaceAudio=false;media.addAudio=false;media.audioSend=false}else if(media.replaceAudio){media.keepAudio=false;media.addAudio=false;media.removeAudio=false;media.audioSend=true}if(config.myStream===null||config.myStream===undefined){if(media.replaceAudio){media.keepAudio=false;media.replaceAudio=false;media.addAudio=true;media.audioSend=true}if(isAudioSendEnabled(media)){media.keepAudio=false;media.addAudio=true}}else{if(config.myStream.getAudioTracks()===null||config.myStream.getAudioTracks()===undefined||config.myStream.getAudioTracks().length===0){if(media.replaceAudio){media.keepAudio=false;media.replaceAudio=false;media.addAudio=true;media.audioSend=true}if(isAudioSendEnabled(media)){media.keepVideo=false;media.addAudio=true}}else{if(isAudioSendEnabled(media)&&!media.removeAudio&&!media.replaceAudio){media.keepAudio=true}}}if(media.addVideo){media.keepVideo=false;media.replaceVideo=false;media.removeVideo=false;media.videoSend=true;if(config.myStream&&config.myStream.getVideoTracks()&&config.myStream.getVideoTracks().length){Janus$1.error("Can't add video stream, there already is one");callbacks.error("Can't add video stream, there already is one");return}}else if(media.removeVideo){media.keepVideo=false;media.replaceVideo=false;media.addVideo=false;media.videoSend=false}else if(media.replaceVideo){media.keepVideo=false;media.addVideo=false;media.removeVideo=false;media.videoSend=true}if(config.myStream===null||config.myStream===undefined){if(media.replaceVideo){media.keepVideo=false;media.replaceVideo=false;media.addVideo=true;media.videoSend=true}if(isVideoSendEnabled(media)){media.keepVideo=false;media.addVideo=true}}else{if(config.myStream.getVideoTracks()===null||config.myStream.getVideoTracks()===undefined||config.myStream.getVideoTracks().length===0){if(media.replaceVideo){media.keepVideo=false;media.replaceVideo=false;media.addVideo=true;media.videoSend=true}if(isVideoSendEnabled(media)){media.keepVideo=false;media.addVideo=true}}else{if(isVideoSendEnabled(media)&&!media.removeVideo&&!media.replaceVideo){media.keepVideo=true}}}if(media.addData)media.data=true}if(isAudioSendEnabled(media)&&media.keepAudio&&isVideoSendEnabled(media)&&media.keepVideo){pluginHandle.consentDialog(false);streamsDone(handleId,jsep,media,callbacks,config.myStream);return}}if(media.update&&!config.streamExternal){if(media.removeAudio||media.replaceAudio){if(config.myStream&&config.myStream.getAudioTracks()&&config.myStream.getAudioTracks().length){var s=config.myStream.getAudioTracks()[0];Janus$1.log("Removing audio track:",s);config.myStream.removeTrack(s);try{s.stop()}catch(e){}}if(config.pc.getSenders()&&config.pc.getSenders().length){var ra=true;if(media.replaceAudio&&Janus$1.unifiedPlan){ra=false}if(ra){for(var index in config.pc.getSenders()){var s=config.pc.getSenders()[index];if(s&&s.track&&s.track.kind==="audio"){Janus$1.log("Removing audio sender:",s);config.pc.removeTrack(s)}}}}}if(media.removeVideo||media.replaceVideo){if(config.myStream&&config.myStream.getVideoTracks()&&config.myStream.getVideoTracks().length){var s=config.myStream.getVideoTracks()[0];Janus$1.log("Removing video track:",s);config.myStream.removeTrack(s);try{s.stop()}catch(e){}}if(config.pc.getSenders()&&config.pc.getSenders().length){var rv=true;if(media.replaceVideo&&Janus$1.unifiedPlan){rv=false}if(rv){for(var index in config.pc.getSenders()){var s=config.pc.getSenders()[index];if(s&&s.track&&s.track.kind==="video"){Janus$1.log("Removing video sender:",s);config.pc.removeTrack(s)}}}}}}if(callbacks.stream!==null&&callbacks.stream!==undefined){var stream=callbacks.stream;Janus$1.log("MediaStream provided by the application");Janus$1.debug(stream);if(media.update){if(config.myStream&&config.myStream!==callbacks.stream&&!config.streamExternal){try{var tracks=config.myStream.getTracks();for(var i in tracks){var mst=tracks[i];Janus$1.log(mst);if(mst!==null&&mst!==undefined)mst.stop()}}catch(e){}config.myStream=null}}config.streamExternal=true;pluginHandle.consentDialog(false);streamsDone(handleId,jsep,media,callbacks,stream);return}if(isAudioSendEnabled(media)||isVideoSendEnabled(media)){if(!Janus$1.isGetUserMediaAvailable()){callbacks.error("getUserMedia not available");return}var constraints={mandatory:{},optional:[]};pluginHandle.consentDialog(true);var audioSupport=isAudioSendEnabled(media);if(audioSupport===true&&media!=undefined&&media!=null){if(_typeof(media.audio)==="object"){audioSupport=media.audio}}var videoSupport=isVideoSendEnabled(media);if(videoSupport===true&&media!=undefined&&media!=null){var simulcast=callbacks.simulcast===true?true:false;var simulcast2=callbacks.simulcast2===true?true:false;if((simulcast||simulcast2)&&!jsep&&(media.video===undefined||media.video===false))media.video="hires";if(media.video&&media.video!="screen"&&media.video!="window"){if(_typeof(media.video)==="object"){videoSupport=media.video}else{var width=0;var height=0;if(media.video==="lowres"){height=240;width=320}else if(media.video==="lowres-16:9"){height=180;width=320}else if(media.video==="hires"||media.video==="hires-16:9"||media.video==="hdres"){height=720;width=1280}else if(media.video==="fhdres"){height=1080;width=1920}else if(media.video==="4kres"){height=2160;width=3840}else if(media.video==="stdres"){height=480;width=640}else if(media.video==="stdres-16:9"){height=360;width=640}else{Janus$1.log("Default video setting is stdres 4:3");height=480;width=640}Janus$1.log("Adding media constraint:",media.video);videoSupport={height:{ideal:height},width:{ideal:width}};Janus$1.log("Adding video constraint:",videoSupport)}}else if(media.video==="screen"||media.video==="window"){var callbackUserMedia=function callbackUserMedia(error,stream){pluginHandle.consentDialog(false);if(error){callbacks.error(error)}else{streamsDone(handleId,jsep,media,callbacks,stream)}};var getScreenMedia=function getScreenMedia(constraints,gsmCallback,useAudio){Janus$1.log("Adding media constraint (screen capture)");Janus$1.debug(constraints);navigator.mediaDevices.getUserMedia(constraints).then(function(stream){if(useAudio){navigator.mediaDevices.getUserMedia({audio:true,video:false}).then(function(audioStream){stream.addTrack(audioStream.getAudioTracks()[0]);gsmCallback(null,stream)})}else{gsmCallback(null,stream)}})["catch"](function(error){pluginHandle.consentDialog(false);gsmCallback(error)})};if(!media.screenshareFrameRate){media.screenshareFrameRate=3}if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){navigator.mediaDevices.getDisplayMedia({video:true}).then(function(stream){pluginHandle.consentDialog(false);if(isAudioSendEnabled(media)&&!media.keepAudio){navigator.mediaDevices.getUserMedia({audio:true,video:false}).then(function(audioStream){stream.addTrack(audioStream.getAudioTracks()[0]);streamsDone(handleId,jsep,media,callbacks,stream)})}else{streamsDone(handleId,jsep,media,callbacks,stream)}},function(error){pluginHandle.consentDialog(false);callbacks.error(error)});return}if(Janus$1.webRTCAdapter.browserDetails.browser==="chrome"){var chromever=Janus$1.webRTCAdapter.browserDetails.version;var maxver=33;if(window.navigator.userAgent.match("Linux"))maxver=35;if(chromever>=26&&chromever<=maxver){constraints={video:{mandatory:{googLeakyBucket:true,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:media.screenshareFrameRate,maxFrameRate:media.screenshareFrameRate,chromeMediaSource:"screen"}},audio:isAudioSendEnabled(media)&&!media.keepAudio};getScreenMedia(constraints,callbackUserMedia)}else{Janus$1.extension.getScreen(function(error,sourceId){if(error){pluginHandle.consentDialog(false);return callbacks.error(error)}constraints={audio:false,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:media.screenshareFrameRate,maxFrameRate:media.screenshareFrameRate},optional:[{googLeakyBucket:true},{googTemporalLayeredScreencast:true}]}};constraints.video.mandatory.chromeMediaSourceId=sourceId;getScreenMedia(constraints,callbackUserMedia,isAudioSendEnabled(media)&&!media.keepAudio)})}}else if(Janus$1.webRTCAdapter.browserDetails.browser==="firefox"){if(Janus$1.webRTCAdapter.browserDetails.version>=33){constraints={video:{mozMediaSource:media.video,mediaSource:media.video},audio:isAudioSendEnabled(media)&&!media.keepAudio};getScreenMedia(constraints,function(err,stream){callbackUserMedia(err,stream);if(!err){var lastTime=stream.currentTime;var polly=window.setInterval(function(){if(!stream)window.clearInterval(polly);if(stream.currentTime==lastTime){window.clearInterval(polly);if(stream.onended){stream.onended()}}lastTime=stream.currentTime},500)}})}else{var error=new Error("NavigatorUserMediaError");error.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)";pluginHandle.consentDialog(false);callbacks.error(error);return}}return}}if(media===null||media===undefined||media.video!=="screen"){navigator.mediaDevices.enumerateDevices().then(function(devices){var audioExist=devices.some(function(device){return device.kind==="audioinput"}),videoExist=isScreenSendEnabled(media)||devices.some(function(device){return device.kind==="videoinput"});var audioSend=isAudioSendEnabled(media);var videoSend=isVideoSendEnabled(media);var needAudioDevice=isAudioSendRequired(media);var needVideoDevice=isVideoSendRequired(media);if(audioSend||videoSend||needAudioDevice||needVideoDevice){var haveAudioDevice=audioSend?audioExist:false;var haveVideoDevice=videoSend?videoExist:false;if(!haveAudioDevice&&!haveVideoDevice){pluginHandle.consentDialog(false);callbacks.error("No capture device found");return false}else if(!haveAudioDevice&&needAudioDevice){pluginHandle.consentDialog(false);callbacks.error("Audio capture is required, but no capture device found");return false}else if(!haveVideoDevice&&needVideoDevice){pluginHandle.consentDialog(false);callbacks.error("Video capture is required, but no capture device found");return false}}var gumConstraints={audio:audioExist&&!media.keepAudio?audioSupport:false,video:videoExist&&!media.keepVideo?videoSupport:false};if(media.encodings){gumConstraints=media.encodings}Janus$1.debug("getUserMedia constraints",gumConstraints);if(!gumConstraints.audio&&!gumConstraints.video){pluginHandle.consentDialog(false);streamsDone(handleId,jsep,media,callbacks,stream)}else{console.log("gumConstraints_________",gumConstraints,media.encodings);navigator.mediaDevices.getUserMedia(media.encodings?media.encodings:gumConstraints).then(function(stream){pluginHandle.consentDialog(false);streamsDone(handleId,jsep,media,callbacks,stream)})["catch"](function(error){pluginHandle.consentDialog(false);callbacks.error({code:error.code,name:error.name,message:error.message})})}})["catch"](function(error){pluginHandle.consentDialog(false);callbacks.error("enumerateDevices error",error)})}}else{streamsDone(handleId,jsep,media,callbacks)}}function prepareWebrtcPeer(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:webrtcError;var jsep=callbacks.jsep;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;if(jsep!==undefined&&jsep!==null){if(config.pc===null){Janus$1.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep");callbacks.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");return}config.pc.setRemoteDescription(jsep).then(function(){Janus$1.log("Remote description accepted!");config.remoteSdp=jsep.sdp;if(config.candidates&&config.candidates.length>0){for(var i=0;i<config.candidates.length;i++){var candidate=config.candidates[i];Janus$1.debug("Adding remote candidate:",candidate);if(!candidate||candidate.completed===true){config.pc.addIceCandidate(Janus$1.endOfCandidates)}else{config.pc.addIceCandidate(candidate)}}config.candidates=[]}callbacks.success()},callbacks.error)}else{callbacks.error("Invalid JSEP")}}function createOffer(handleId,media,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$1.noop;callbacks.customizeSdp=typeof callbacks.customizeSdp=="function"?callbacks.customizeSdp:Janus$1.noop;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;var simulcast=callbacks.simulcast===true?true:false;if(!simulcast){Janus$1.log("Creating offer (iceDone="+config.iceDone+")")}else{Janus$1.log("Creating offer (iceDone="+config.iceDone+", simulcast="+simulcast+")")}var mediaConstraints={};if(Janus$1.unifiedPlan){var audioTransceiver=null,videoTransceiver=null;var transceivers=config.pc.getTransceivers();if(transceivers&&transceivers.length>0){for(var i in transceivers){var t=transceivers[i];if(t.sender&&t.sender.track&&t.sender.track.kind==="audio"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="audio"){if(!audioTransceiver)audioTransceiver=t;continue}if(t.sender&&t.sender.track&&t.sender.track.kind==="video"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="video"){if(!videoTransceiver)videoTransceiver=t;continue}}}var audioSend=isAudioSendEnabled(media);var audioRecv=isAudioRecvEnabled(media);if(!audioSend&&!audioRecv){if(media.removeAudio&&audioTransceiver){if(audioTransceiver.setDirection){audioTransceiver.setDirection("inactive")}else{audioTransceiver.direction="inactive"}Janus$1.log("Setting audio transceiver to inactive:",audioTransceiver)}}else{if(audioSend&&audioRecv){if(audioTransceiver){if(audioTransceiver.setDirection){audioTransceiver.setDirection("sendrecv")}else{audioTransceiver.direction="sendrecv"}Janus$1.log("Setting audio transceiver to sendrecv:",audioTransceiver)}}else if(audioSend&&!audioRecv){if(audioTransceiver){if(audioTransceiver.setDirection){audioTransceiver.setDirection("sendonly")}else{audioTransceiver.direction="sendonly"}Janus$1.log("Setting audio transceiver to sendonly:",audioTransceiver)}}else if(!audioSend&&audioRecv){if(audioTransceiver){if(audioTransceiver.setDirection){audioTransceiver.setDirection("recvonly")}else{audioTransceiver.direction="recvonly"}Janus$1.log("Setting audio transceiver to recvonly:",audioTransceiver)}else{audioTransceiver=config.pc.addTransceiver("audio",{direction:"recvonly"});Janus$1.log("Adding recvonly audio transceiver:",audioTransceiver)}}}var videoSend=isVideoSendEnabled(media);var videoRecv=isVideoRecvEnabled(media);if(!videoSend&&!videoRecv){if(media.removeVideo&&videoTransceiver){if(videoTransceiver.setDirection){videoTransceiver.setDirection("inactive")}else{videoTransceiver.direction="inactive"}Janus$1.log("Setting video transceiver to inactive:",videoTransceiver)}}else{if(videoSend&&videoRecv){if(videoTransceiver){if(videoTransceiver.setDirection){videoTransceiver.setDirection("sendrecv")}else{videoTransceiver.direction="sendrecv"}Janus$1.log("Setting video transceiver to sendrecv:",videoTransceiver)}}else if(videoSend&&!videoRecv){if(videoTransceiver){if(videoTransceiver.setDirection){videoTransceiver.setDirection("sendonly")}else{videoTransceiver.direction="sendonly"}Janus$1.log("Setting video transceiver to sendonly:",videoTransceiver)}}else if(!videoSend&&videoRecv){if(videoTransceiver){if(videoTransceiver.setDirection){videoTransceiver.setDirection("recvonly")}else{videoTransceiver.direction="recvonly"}Janus$1.log("Setting video transceiver to recvonly:",videoTransceiver)}else{videoTransceiver=config.pc.addTransceiver("video",{direction:"recvonly"});Janus$1.log("Adding recvonly video transceiver:",videoTransceiver)}}}}else{mediaConstraints["offerToReceiveAudio"]=isAudioRecvEnabled(media);mediaConstraints["offerToReceiveVideo"]=isVideoRecvEnabled(media)}var iceRestart=callbacks.iceRestart===true?true:false;if(iceRestart){mediaConstraints["iceRestart"]=true}Janus$1.debug(mediaConstraints);var sendVideo=isVideoSendEnabled(media);if(sendVideo&&simulcast&&Janus$1.webRTCAdapter.browserDetails.browser==="firefox"){Janus$1.log("Enabling Simulcasting for Firefox (RID)");var sender=config.pc.getSenders().find(function(s){return s.track.kind=="video"});if(sender){var parameters=sender.getParameters();if(!parameters)parameters={};var maxBitrates=getMaxBitrates(callbacks.simulcastMaxBitrates);parameters.encodings=[{rid:"h",active:true,maxBitrate:maxBitrates.high},{rid:"m",active:true,maxBitrate:maxBitrates.medium,scaleResolutionDownBy:2},{rid:"l",active:true,maxBitrate:maxBitrates.low,scaleResolutionDownBy:4}];sender.setParameters(parameters)}}config.pc.createOffer(mediaConstraints).then(function(offer){Janus$1.debug(offer);var jsep={type:offer.type,sdp:offer.sdp};callbacks.customizeSdp(jsep);offer.sdp=jsep.sdp;Janus$1.log("Setting local description");if(sendVideo&&simulcast){if(Janus$1.webRTCAdapter.browserDetails.browser==="chrome"||Janus$1.webRTCAdapter.browserDetails.browser==="safari"){Janus$1.log("Enabling Simulcasting for Chrome (SDP munging)");offer.sdp=mungeSdpForSimulcasting(offer.sdp)}else if(Janus$1.webRTCAdapter.browserDetails.browser!=="firefox"){Janus$1.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")}}config.mySdp=offer.sdp;config.pc.setLocalDescription(offer)["catch"](callbacks.error);config.mediaConstraints=mediaConstraints;if(!config.iceDone&&!config.trickle){Janus$1.log("Waiting for all candidates...");return}Janus$1.log("Offer ready");Janus$1.debug(callbacks);callbacks.success(offer)},callbacks.error)}function createAnswer(handleId,media,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$1.noop;callbacks.customizeSdp=typeof callbacks.customizeSdp=="function"?callbacks.customizeSdp:Janus$1.noop;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");callbacks.error("Invalid handle");return}var config=pluginHandle.webrtcStuff;var simulcast=callbacks.simulcast===true?true:false;if(!simulcast){Janus$1.log("Creating answer (iceDone="+config.iceDone+")")}else{Janus$1.log("Creating answer (iceDone="+config.iceDone+", simulcast="+simulcast+")")}var mediaConstraints=null;if(Janus$1.unifiedPlan){mediaConstraints={};var audioTransceiver=null,videoTransceiver=null;var transceivers=config.pc.getTransceivers();if(transceivers&&transceivers.length>0){for(var i in transceivers){var t=transceivers[i];if(t.sender&&t.sender.track&&t.sender.track.kind==="audio"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="audio"){if(!audioTransceiver)audioTransceiver=t;continue}if(t.sender&&t.sender.track&&t.sender.track.kind==="video"||t.receiver&&t.receiver.track&&t.receiver.track.kind==="video"){if(!videoTransceiver)videoTransceiver=t;continue}}}var audioSend=isAudioSendEnabled(media);var audioRecv=isAudioRecvEnabled(media);if(!audioSend&&!audioRecv){if(media.removeAudio&&audioTransceiver){try{if(audioTransceiver.setDirection){audioTransceiver.setDirection("inactive")}else{audioTransceiver.direction="inactive"}Janus$1.log("Setting audio transceiver to inactive:",audioTransceiver)}catch(e){Janus$1.error(e)}}}else{if(audioSend&&audioRecv){if(audioTransceiver){try{if(audioTransceiver.setDirection){audioTransceiver.setDirection("sendrecv")}else{audioTransceiver.direction="sendrecv"}Janus$1.log("Setting audio transceiver to sendrecv:",audioTransceiver)}catch(e){Janus$1.error(e)}}}else if(audioSend&&!audioRecv){try{if(audioTransceiver){if(audioTransceiver.setDirection){audioTransceiver.setDirection("sendonly")}else{audioTransceiver.direction="sendonly"}Janus$1.log("Setting audio transceiver to sendonly:",audioTransceiver)}}catch(e){Janus$1.error(e)}}else if(!audioSend&&audioRecv){if(audioTransceiver){try{if(audioTransceiver.setDirection){audioTransceiver.setDirection("recvonly")}else{audioTransceiver.direction="recvonly"}Janus$1.log("Setting audio transceiver to recvonly:",audioTransceiver)}catch(e){Janus$1.error(e)}}else{audioTransceiver=config.pc.addTransceiver("audio",{direction:"recvonly"});Janus$1.log("Adding recvonly audio transceiver:",audioTransceiver)}}}var videoSend=isVideoSendEnabled(media);var videoRecv=isVideoRecvEnabled(media);if(!videoSend&&!videoRecv){if(media.removeVideo&&videoTransceiver){try{if(videoTransceiver.setDirection){videoTransceiver.setDirection("inactive")}else{videoTransceiver.direction="inactive"}Janus$1.log("Setting video transceiver to inactive:",videoTransceiver)}catch(e){Janus$1.error(e)}}}else{if(videoSend&&videoRecv){if(videoTransceiver){try{if(videoTransceiver.setDirection){videoTransceiver.setDirection("sendrecv")}else{videoTransceiver.direction="sendrecv"}Janus$1.log("Setting video transceiver to sendrecv:",videoTransceiver)}catch(e){Janus$1.error(e)}}}else if(videoSend&&!videoRecv){if(videoTransceiver){try{if(videoTransceiver.setDirection){videoTransceiver.setDirection("sendonly")}else{videoTransceiver.direction="sendonly"}Janus$1.log("Setting video transceiver to sendonly:",videoTransceiver)}catch(e){Janus$1.error(e)}}}else if(!videoSend&&videoRecv){if(videoTransceiver){try{if(videoTransceiver.setDirection){videoTransceiver.setDirection("recvonly")}else{videoTransceiver.direction="recvonly"}Janus$1.log("Setting video transceiver to recvonly:",videoTransceiver)}catch(e){Janus$1.error(e)}}else{videoTransceiver=config.pc.addTransceiver("video",{direction:"recvonly"});Janus$1.log("Adding recvonly video transceiver:",videoTransceiver)}}}}else{if(Janus$1.webRTCAdapter.browserDetails.browser=="firefox"||Janus$1.webRTCAdapter.browserDetails.browser=="edge"){mediaConstraints={offerToReceiveAudio:isAudioRecvEnabled(media),offerToReceiveVideo:isVideoRecvEnabled(media)}}else{mediaConstraints={mandatory:{OfferToReceiveAudio:isAudioRecvEnabled(media),OfferToReceiveVideo:isVideoRecvEnabled(media)}}}}Janus$1.debug(mediaConstraints);var sendVideo=isVideoSendEnabled(media);if(sendVideo&&simulcast&&Janus$1.webRTCAdapter.browserDetails.browser==="firefox"){Janus$1.log("Enabling Simulcasting for Firefox (RID)");var sender=config.pc.getSenders()[1];Janus$1.log(sender);var parameters=sender.getParameters();Janus$1.log(parameters);var maxBitrates=getMaxBitrates(callbacks.simulcastMaxBitrates);sender.setParameters({encodings:[{rid:"high",active:true,priority:"high",maxBitrate:maxBitrates.high},{rid:"medium",active:true,priority:"medium",maxBitrate:maxBitrates.medium},{rid:"low",active:true,priority:"low",maxBitrate:maxBitrates.low}]})}config.pc.createAnswer(mediaConstraints).then(function(answer){Janus$1.debug(answer);var jsep={type:answer.type,sdp:answer.sdp};callbacks.customizeSdp(jsep);answer.sdp=jsep.sdp;Janus$1.log("Setting local description");if(sendVideo&&simulcast){if(Janus$1.webRTCAdapter.browserDetails.browser==="chrome"){Janus$1.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it")}else if(Janus$1.webRTCAdapter.browserDetails.browser!=="firefox"){Janus$1.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")}}config.mySdp=answer.sdp;config.pc.setLocalDescription(answer)["catch"](callbacks.error);config.mediaConstraints=mediaConstraints;if(!config.iceDone&&!config.trickle){Janus$1.log("Waiting for all candidates...");return}callbacks.success(answer)},callbacks.error)}function sendSDP(handleId,callbacks){callbacks=callbacks||{};callbacks.success=typeof callbacks.success=="function"?callbacks.success:Janus$1.noop;callbacks.error=typeof callbacks.error=="function"?callbacks.error:Janus$1.noop;var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle, not sending anything");return}var config=pluginHandle.webrtcStuff;Janus$1.log("Sending offer/answer SDP...");if(config.mySdp===null||config.mySdp===undefined){Janus$1.warn("Local SDP instance is invalid, not sending anything...");return}config.mySdp={type:config.pc.localDescription.type,sdp:config.pc.localDescription.sdp};if(config.trickle===false)config.mySdp["trickle"]=false;Janus$1.debug(callbacks);config.sdpSent=true;callbacks.success(config.mySdp)}function _getVolume(handleId,remote){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");return 0}var stream=remote?"remote":"local";var config=pluginHandle.webrtcStuff;if(!config.volume[stream])config.volume[stream]={value:0};if(config.pc.getStats&&Janus$1.webRTCAdapter.browserDetails.browser==="chrome"){if(remote&&(config.remoteStream===null||config.remoteStream===undefined)){Janus$1.warn("Remote stream unavailable");return 0}else if(!remote&&(config.myStream===null||config.myStream===undefined)){Janus$1.warn("Local stream unavailable");return 0}if(config.volume[stream].timer===null||config.volume[stream].timer===undefined){Janus$1.log("Starting "+stream+" volume monitor");config.volume[stream].timer=setInterval(function(){config.pc.getStats(function(stats){var results=stats.result();for(var i=0;i<results.length;i++){var res=results[i];if(res.type=="ssrc"){if(remote&&res.stat("audioOutputLevel"))config.volume[stream].value=parseInt(res.stat("audioOutputLevel"));else if(!remote&&res.stat("audioInputLevel"))config.volume[stream].value=parseInt(res.stat("audioInputLevel"))}}})},200);return 0}return config.volume[stream].value}else{Janus$1.warn("Getting the "+stream+" volume unsupported by browser");return 0}}function isMuted(handleId,video){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");return true}var config=pluginHandle.webrtcStuff;if(config.pc===null||config.pc===undefined){Janus$1.warn("Invalid PeerConnection");return true}if(config.myStream===undefined||config.myStream===null){Janus$1.warn("Invalid local MediaStream");return true}if(video){if(config.myStream.getVideoTracks()===null||config.myStream.getVideoTracks()===undefined||config.myStream.getVideoTracks().length===0){Janus$1.warn("No video track");return true}return!config.myStream.getVideoTracks()[0].enabled}else{if(config.myStream.getAudioTracks()===null||config.myStream.getAudioTracks()===undefined||config.myStream.getAudioTracks().length===0){Janus$1.warn("No audio track");return true}return!config.myStream.getAudioTracks()[0].enabled}}function mute(handleId,video,mute){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");return false}var config=pluginHandle.webrtcStuff;if(config.pc===null||config.pc===undefined){Janus$1.warn("Invalid PeerConnection");return false}if(config.myStream===undefined||config.myStream===null){Janus$1.warn("Invalid local MediaStream");return false}if(video){if(config.myStream.getVideoTracks()===null||config.myStream.getVideoTracks()===undefined||config.myStream.getVideoTracks().length===0){Janus$1.warn("No video track");return false}config.myStream.getVideoTracks()[0].enabled=mute?false:true;return true}else{if(config.myStream.getAudioTracks()===null||config.myStream.getAudioTracks()===undefined||config.myStream.getAudioTracks().length===0){Janus$1.warn("No audio track");return false}config.myStream.getAudioTracks()[0].enabled=mute?false:true;return true}}function _getNetworkQuality(handleId,callbacks){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");return"Invalid handle"}var config=pluginHandle.webrtcStuff;if(config.pc===null||config.pc===undefined)return"Invalid PeerConnection";if(config.pc.getStats){config.pc.getStats().then(function(stats){stats.forEach(function(res){if(!res)return;var inStats=false;if((res.mediaType==="video"||res.id.toLowerCase().indexOf("video")>-1)&&res.type==="inbound-rtp"&&res.id.indexOf("rtcp")<0){inStats=true}else if(res.type=="ssrc"&&res.bytesReceived&&(res.googCodecName==="VP8"||res.googCodecName==="")){inStats=true}if(inStats){callbacks&&callbacks(res);config.bitrate.bsnow=res.bytesReceived;config.bitrate.tsnow=res.timestamp;if(config.bitrate.bsbefore===null||config.bitrate.tsbefore===null){config.bitrate.bsbefore=config.bitrate.bsnow;config.bitrate.tsbefore=config.bitrate.tsnow}else{var timePassed=config.bitrate.tsnow-config.bitrate.tsbefore;if(Janus$1.webRTCAdapter.browserDetails.browser=="safari")timePassed=timePassed/1e3;var bitRate=Math.round((config.bitrate.bsnow-config.bitrate.bsbefore)*8/timePassed);if(Janus$1.webRTCAdapter.browserDetails.browser==="safari")bitRate=parseInt(bitRate/1e3);config.bitrate.value=bitRate+" kbits/sec";config.bitrate.bsbefore=config.bitrate.bsnow;config.bitrate.tsbefore=config.bitrate.tsnow}}})})}else{Janus$1.warn("Getting the video bitrate unsupported by browser");return"Feature unsupported by browser"}}function _getBitrate(handleId){var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined||pluginHandle.webrtcStuff===null||pluginHandle.webrtcStuff===undefined){Janus$1.warn("Invalid handle");return"Invalid handle"}var config=pluginHandle.webrtcStuff;if(config.pc===null||config.pc===undefined)return"Invalid PeerConnection";if(config.pc.getStats){if(config.bitrate.timer===null||config.bitrate.timer===undefined){Janus$1.log("Starting bitrate timer (via getStats)");config.bitrate.timer=setInterval(function(){config.pc.getStats().then(function(stats){stats.forEach(function(res){if(!res)return;var inStats=false;if((res.mediaType==="video"||res.id.toLowerCase().indexOf("video")>-1)&&res.type==="inbound-rtp"&&res.id.indexOf("rtcp")<0){inStats=true}else if(res.type=="ssrc"&&res.bytesReceived&&(res.googCodecName==="VP8"||res.googCodecName==="")){inStats=true}if(inStats){config.bitrate.bsnow=res.bytesReceived;config.bitrate.tsnow=res.timestamp;if(config.bitrate.bsbefore===null||config.bitrate.tsbefore===null){config.bitrate.bsbefore=config.bitrate.bsnow;config.bitrate.tsbefore=config.bitrate.tsnow}else{var timePassed=config.bitrate.tsnow-config.bitrate.tsbefore;if(Janus$1.webRTCAdapter.browserDetails.browser=="safari")timePassed=timePassed/1e3;var bitRate=Math.round((config.bitrate.bsnow-config.bitrate.bsbefore)*8/timePassed);if(Janus$1.webRTCAdapter.browserDetails.browser==="safari")bitRate=parseInt(bitRate/1e3);config.bitrate.value=bitRate+" kbits/sec";config.bitrate.bsbefore=config.bitrate.bsnow;config.bitrate.tsbefore=config.bitrate.tsnow}}})})},1e3);return"0 kbits/sec"}return config.bitrate.value}else{Janus$1.warn("Getting the video bitrate unsupported by browser");return"Feature unsupported by browser"}}function webrtcError(error){Janus$1.error("WebRTC error:",error)}function cleanupWebrtc(handleId,hangupRequest){Janus$1.log("Cleaning WebRTC stuff");var pluginHandle=pluginHandles[handleId];if(pluginHandle===null||pluginHandle===undefined){return}var config=pluginHandle.webrtcStuff;if(config!==null&&config!==undefined){if(hangupRequest===true){var request={rtcgw:"hangup",transaction:Janus$1.randomString(12)};if(pluginHandle.token!==null&&pluginHandle.token!==undefined)request["token"]=pluginHandle.token;if(apisecret!==null&&apisecret!==undefined)request["apisecret"]=apisecret;Janus$1.debug("Sending hangup request (handle="+handleId+"):");Janus$1.debug(request);if(websockets){request["session_id"]=sessionId;request["handle_id"]=handleId;ws.send(JSON.stringify(request))}else{Janus$1.httpAPICall(server+"/"+sessionId+"/"+handleId,{verb:"POST",withCredentials:withCredentials,body:request})}}config.remoteStream=null;if(config.volume){if(config.volume["local"]&&config.volume["local"].timer)clearInterval(config.volume["local"].timer);if(config.volume["remote"]&&config.volume["remote"].timer)clearInterval(config.volume["remote"].timer)}config.volume={};if(config.bitrate.timer)clearInterval(config.bitrate.timer);config.bitrate.timer=null;config.bitrate.bsnow=null;config.bitrate.bsbefore=null;config.bitrate.tsnow=null;config.bitrate.tsbefore=null;config.bitrate.value=null;try{if(!config.streamExternal&&config.myStream!==null&&config.myStream!==undefined){Janus$1.log("Stopping local stream tracks");var tracks=config.myStream.getTracks();for(var i in tracks){var mst=tracks[i];Janus$1.log(mst);if(mst!==null&&mst!==undefined)mst.stop()}}}catch(e){}config.streamExternal=false;config.myStream=null;try{config.pc.close()}catch(e){}config.pc=null;config.candidates=null;config.mySdp=null;config.remoteSdp=null;config.iceDone=false;config.dataChannel={};config.dtmfSender=null}pluginHandle.oncleanup()}function mungeSdpForSimulcasting(sdp){var lines=sdp.split("\r\n");var video=false;var ssrc=[-1],ssrc_fid=[-1];var cname=null,msid=null,mslabel=null,label=null;var insertAt=-1;for(var i=0;i<lines.length;i++){var mline=lines[i].match(/m=(\w+) */);if(mline){var medium=mline[1];if(medium==="video"){if(ssrc[0]<0){video=true}else{insertAt=i;break}}else{if(ssrc[0]>-1){insertAt=i;break}}continue}if(!video)continue;var fid=lines[i].match(/a=ssrc-group:FID (\d+) (\d+)/);if(fid){ssrc[0]=fid[1];ssrc_fid[0]=fid[2];lines.splice(i,1);i--;continue}if(ssrc[0]){var match=lines[i].match("a=ssrc:"+ssrc[0]+" cname:(.+)");if(match){cname=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" msid:(.+)");if(match){msid=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" mslabel:(.+)");if(match){mslabel=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" label:(.+)");if(match){label=match[1]}if(lines[i].indexOf("a=ssrc:"+ssrc_fid[0])===0){lines.splice(i,1);i--;continue}if(lines[i].indexOf("a=ssrc:"+ssrc[0])===0){lines.splice(i,1);i--;continue}}if(lines[i].length==0){lines.splice(i,1);i--;continue}}if(ssrc[0]<0){insertAt=-1;video=false;for(var i=0;i<lines.length;i++){var mline=lines[i].match(/m=(\w+) */);if(mline){var medium=mline[1];if(medium==="video"){if(ssrc[0]<0){video=true}else{insertAt=i;break}}else{if(ssrc[0]>-1){insertAt=i;break}}continue}if(!video)continue;if(ssrc[0]<0){var value=lines[i].match(/a=ssrc:(\d+)/);if(value){ssrc[0]=value[1];lines.splice(i,1);i--;continue}}else{var match=lines[i].match("a=ssrc:"+ssrc[0]+" cname:(.+)");if(match){cname=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" msid:(.+)");if(match){msid=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" mslabel:(.+)");if(match){mslabel=match[1]}match=lines[i].match("a=ssrc:"+ssrc[0]+" label:(.+)");if(match){label=match[1]}if(lines[i].indexOf("a=ssrc:"+ssrc_fid[0])===0){lines.splice(i,1);i--;continue}if(lines[i].indexOf("a=ssrc:"+ssrc[0])===0){lines.splice(i,1);i--;continue}}if(lines[i].length==0){lines.splice(i,1);i--;continue}}}if(ssrc[0]<0){Janus$1.warn("Couldn't find the video SSRC, simulcasting NOT enabled");return sdp}if(insertAt<0){insertAt=lines.length}ssrc[1]=Math.floor(Math.random()*4294967295);ssrc[2]=Math.floor(Math.random()*4294967295);ssrc_fid[1]=Math.floor(Math.random()*4294967295);ssrc_fid[2]=Math.floor(Math.random()*4294967295);for(var i=0;i<ssrc.length;i++){if(cname){lines.splice(insertAt,0,"a=ssrc:"+ssrc[i]+" cname:"+cname);insertAt++}if(msid){lines.splice(insertAt,0,"a=ssrc:"+ssrc[i]+" msid:"+msid);insertAt++}if(mslabel){lines.splice(insertAt,0,"a=ssrc:"+ssrc[i]+" mslabel:"+mslabel);insertAt++}if(label){lines.splice(insertAt,0,"a=ssrc:"+ssrc[i]+" label:"+label);insertAt++}if(cname){lines.splice(insertAt,0,"a=ssrc:"+ssrc_fid[i]+" cname:"+cname);insertAt++}if(msid){lines.splice(insertAt,0,"a=ssrc:"+ssrc_fid[i]+" msid:"+msid);insertAt++}if(mslabel){lines.splice(insertAt,0,"a=ssrc:"+ssrc_fid[i]+" mslabel:"+mslabel);insertAt++}if(label){lines.splice(insertAt,0,"a=ssrc:"+ssrc_fid[i]+" label:"+label);insertAt++}}lines.splice(insertAt,0,"a=ssrc-group:FID "+ssrc[2]+" "+ssrc_fid[2]);lines.splice(insertAt,0,"a=ssrc-group:FID "+ssrc[1]+" "+ssrc_fid[1]);lines.splice(insertAt,0,"a=ssrc-group:FID "+ssrc[0]+" "+ssrc_fid[0]);lines.splice(insertAt,0,"a=ssrc-group:SIM "+ssrc[0]+" "+ssrc[1]+" "+ssrc[2]);sdp=lines.join("\r\n");if(!sdp.endsWith("\r\n"))sdp+="\r\n";return sdp}function isAudioSendEnabled(media){Janus$1.debug("isAudioSendEnabled:",media);if(media===undefined||media===null)return true;if(media.audio===false)return false;if(media.audioSend===undefined||media.audioSend===null)return true;return media.audioSend===true}function isAudioSendRequired(media){Janus$1.debug("isAudioSendRequired:",media);if(media===undefined||media===null)return false;if(media.audio===false||media.audioSend===false)return false;if(media.failIfNoAudio===undefined||media.failIfNoAudio===null)return false;return media.failIfNoAudio===true}function isAudioRecvEnabled(media){Janus$1.debug("isAudioRecvEnabled:",media);if(media===undefined||media===null)return true;if(media.audio===false)return false;if(media.audioRecv===undefined||media.audioRecv===null)return true;return media.audioRecv===true}function isVideoSendEnabled(media){Janus$1.debug("isVideoSendEnabled:",media);if(media===undefined||media===null)return true;if(media.video===false)return false;if(media.videoSend===undefined||media.videoSend===null)return true;return media.videoSend===true}function isVideoSendRequired(media){Janus$1.debug("isVideoSendRequired:",media);if(media===undefined||media===null)return false;if(media.video===false||media.videoSend===false)return false;if(media.failIfNoVideo===undefined||media.failIfNoVideo===null)return false;return media.failIfNoVideo===true}function isVideoRecvEnabled(media){Janus$1.debug("isVideoRecvEnabled:",media);if(media===undefined||media===null)return true;if(media.video===false)return false;if(media.videoRecv===undefined||media.videoRecv===null)return true;return media.videoRecv===true}function isScreenSendEnabled(media){Janus$1.debug("isScreenSendEnabled:",media);if(media===undefined||media===null)return false;if(_typeof(media.video)!=="object"||_typeof(media.video.mandatory)!=="object")return false;var constraints=media.video.mandatory;if(constraints.chromeMediaSource)return constraints.chromeMediaSource==="desktop"||constraints.chromeMediaSource==="screen";else if(constraints.mozMediaSource)return constraints.mozMediaSource==="window"||constraints.mozMediaSource==="screen";else if(constraints.mediaSource)return constraints.mediaSource==="window"||constraints.mediaSource==="screen";return false}function isDataEnabled(media){Janus$1.debug("isDataEnabled:",media);if(Janus$1.webRTCAdapter.browserDetails.browser=="edge"){Janus$1.warn("Edge doesn't support data channels yet");return false}if(media===undefined||media===null)return false;return media.data===true}function isTrickleEnabled(trickle){Janus$1.debug("isTrickleEnabled:",trickle);if(trickle===undefined||trickle===null)return true;return trickle===true}}window.Janus=Janus$1;var werbrtcInfo={version:"V1.0",apiDomain:"https://open.ys7.com"};var listenList={};var listen=function listen(key,fn){if(!listenList[key]){listenList[key]=[]}listenList[key].push(fn)};var trigger=function trigger(){var key=Array.prototype.shift.call(arguments),fns=listenList[key];if(!fns||fns.length===0)return false;for(var i=0,fn;fn=fns[i];i++){fn.apply(this,arguments)}};function deffer(){var deferred={};deferred.promise=new Promise(function(resolve,reject){deferred.resolve=resolve;deferred.reject=reject});return deferred}var EZWebRtc=function(){function EZWebRtc(_params){_classCallCheck$1(this,EZWebRtc);_defineProperty(this,"subscribe",function(params){var _deffer=deffer();var body={cmdType:"subremote",streamtype:params.type,customId:params.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};var remoteFeed=null;window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function success(pluginHandle){console.log("pluginHandle",pluginHandle);if(params.type==8){window["ezuikit-webrtc"].opt.subscribeScreenHandle=pluginHandle}else{window["ezuikit-webrtc"].opt["".concat(params.clientId)]=pluginHandle;if(params.type==1){window["ezuikit-webrtc"].opt["".concat(params.clientId)].send({message:{cmdType:"unsubremote",streamtype:2,customId:params.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId},success:function success(){},error:function error(_error){}})}}remoteFeed=pluginHandle;remoteFeed.createOffer({media:{videoSend:false,audioSend:false,audioRecv:true,videoRecv:true,audio:true,video:true,data:false},simulcast:false,simulcast2:false,success:function success(jsep){Janus.debug("remoteFeed createOffer Got SDP!");Janus.debug(jsep);remoteFeed.send({message:body,jsep:jsep})},error:function error(_error2){Janus.error("remoteFeed WebRTC error:",_error2);_deffer.reject(_error2)}})},error:function error(_error3){console.error("  -- Error attaching plugin...",_error3);_deffer.reject(_error3)},consentDialog:function consentDialog(on){Janus.debug("Consent dialog should be "+(on?"on":"off")+" now")},iceState:function iceState(state){Janus.log("ICE state changed to "+state);switch(state){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function mediaState(medium,on){Janus.log("Janus "+(on?"started":"stopped")+" receiving our "+medium)},webrtcState:function webrtcState(on){Janus.log("Janus says our WebRTC PeerConnection is "+(on?"up":"down")+" now")},slowLink:function slowLink(uplink,lost){Janus.warn("Janus reports problems "+(uplink?"sending":"receiving")+" packets on this PeerConnection ("+lost+" lost packets)")},onmessage:function onmessage(msg,jsep){Janus.debug(" ::: Got a message :::");Janus.debug(msg);if(jsep!==undefined&&jsep!==null){Janus.debug("Handling SDP as well...");Janus.debug(jsep);remoteFeed.handleRemoteJsep({jsep:jsep})}if(msg["rtcgw"]==="subremoteack"){trigger("subremoteack",msg)}},onlocalstream:function onlocalstream(stream){},onremotestream:function onremotestream(stream){console.log("remoteStream==================================",stream);var msg={clientId:params.clientId,stream:stream,streamType:params.type};_deffer.resolve(msg);trigger("remoteStream",msg)},ondataopen:function ondataopen(data){Janus.log("The DataChannel is available!")},ondata:function ondata(data){Janus.debug("We got data from the DataChannel! "+data)},oncleanup:function oncleanup(){Janus.log(" ::: Got a cleanup notification :::")}});return _deffer.promise});_defineProperty(this,"subscribeStream",function(params){var _deffer=deffer();var body={cmdType:"resumesubremote",streamtype:params.type,customId:params.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};if(window["ezuikit-webrtc"].opt["".concat(params.clientId)]){window["ezuikit-webrtc"].opt["".concat(params.clientId)].send({message:body,success:function success(){_deffer.resolve("success")},error:function error(_error4){_deffer.reject(_error4)}})}return _deffer.promise});_defineProperty(this,"unsubscribe",function(params){var _deffer=deffer();var body={cmdType:"unsubremote",streamtype:params.type,customId:params.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};if(params.type==8){window["ezuikit-webrtc"].opt.subscribeScreenHandle.send({message:body,success:function success(){window["ezuikit-webrtc"].opt.subscribeScreenHandle.detach({noRequest:false,success:function success(){_deffer.resolve("success")}})},error:function error(_error5){_deffer.reject(_error5)}})}else{window["ezuikit-webrtc"].opt["".concat(params.clientId)].send({message:body,success:function success(){if(params.type==3){window["ezuikit-webrtc"].opt["".concat(params.clientId)].detach({noRequest:false,success:function success(){_deffer.resolve("success")}})}else{_deffer.resolve("success")}},error:function error(_error6){_deffer.reject(_error6)}})}return _deffer.promise});_defineProperty(this,"unsubscribeStream",function(params){var _deffer=deffer();var body={cmdType:"pausesubremote",streamtype:params.type,customId:params.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};window["ezuikit-webrtc"].opt["".concat(params.clientId)].send({message:body,success:function success(){_deffer.resolve("success")},error:function error(_error7){_deffer.reject(_error7)}});return _deffer.promise});_defineProperty(this,"listen",function(){return listen.apply(void 0,arguments)});this.initEZWEBPlayer(_params)}_createClass$1(EZWebRtc,[{key:"initEZWEBPlayer",value:function initEZWEBPlayer(params){console.log("params",params);window["ezuikit-webrtc"]={opt:{roomParams:{room:0,userId:params.userId,video:1,internalRoomId:null,roomId:params.roomId,clientId:null,rtctoken:params.rtctoken},janus:null,mainHandle:null,sts:null,screenHandle:null,subscribeScreenHandle:null,opaqueId:"sts-"+Janus.randomString(12),localStreamType:null,server:null,accessToken:params.accessToken,stream:"",screenStream:null,apiDomain:werbrtcInfo.apiDomain,cln:{local:{username:"",client_id:""}}},videoParams:{},audioParams:{},cameraId:null,microphoneId:null,bitrate:1e5,frameRate:15,width:320,height:240};request("".concat(werbrtcInfo.apiDomain,"/api/v3/rtc/wss"),"POST",{appId:params.appId,roomId:params.roomId,customId:params.userId,accessToken:params.accessToken},{"Content-Type":"application/x-www-form-urlencoded",accessToken:params.accessToken},logSuccess);function logSuccess(data){console.log("data",data);if(data.meta.code!=200){params.handleError(data.meta);return}var _data$data=data.data;_data$data.clientId;var domain=_data$data.domain;_data$data.internalRoomId;var wssPath=_data$data.wssPath;window["ezuikit-webrtc"].opt.server="wss://".concat(domain,"/").concat(wssPath);window["ezuikit-webrtc"].opt.roomParams.internalRoomId=data.data.internalRoomId;window["ezuikit-webrtc"].opt.roomParams.clientId=data.data.clientId;var Janusparams={token:"token=".concat(params.rtctoken,"&userId=").concat(params.userId,"&roomId=").concat(params.roomId,"&appId=").concat(params.appId),authtype:23};Janus.init({debug:"all",callback:function callback(){window["ezuikit-webrtc"].opt.janus=new Janus({server:window["ezuikit-webrtc"].opt.server,success:function success(sessionId){if(sessionId){params.onMessage(sessionId)}},error:function error(_error8){params.handleError(_error8)},destroyed:function destroyed(){}},Janusparams)}})}}},{key:"getVersion",value:function getVersion(){var _deffer=deffer();{_deffer.resolve(werbrtcInfo.version)}return _deffer.promise}},{key:"getSupport",value:function getSupport(){var _deffer=deffer();var obj={isWebrtcSupport:true,isH264Support:true};var myVideo=document.createElement("video");if(myVideo.canPlayType){if(myVideo.canPlayType("video/mp4;codecs=“avc1.64001E”")){obj.isH264Support=true}else{obj.isH264Support=false}}if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){obj.isWebrtcSupport=true;_deffer.resolve(obj)}else{obj.isWebrtcSupport=false;_deffer.reject(obj)}return _deffer.promise}},{key:"getMediaList",value:function getMediaList(){var _deffer=deffer();if(navigator.mediaDevices){navigator.mediaDevices.enumerateDevices().then(function(devices){_deffer.resolve(devices)})}else{_deffer.reject("no devices")}return _deffer.promise}},{key:"getCamerasList",value:function getCamerasList(){var _deffer=deffer();if(navigator.mediaDevices){navigator.mediaDevices.enumerateDevices().then(function(devices){var arr=[];devices.map(function(item){if(item.kind=="videoinput"){arr.push(item)}});_deffer.resolve(arr)})}else{_deffer.reject("no devices")}return _deffer.promise}},{key:"getMicrophonesList",value:function getMicrophonesList(){var _deffer=deffer();if(navigator.mediaDevices){navigator.mediaDevices.enumerateDevices().then(function(devices){var arr=[];devices.map(function(item){if(item.kind=="audioinput"){arr.push(item)}});_deffer.resolve(arr)})}else{_deffer.reject("no devices")}return _deffer.promise}},{key:"getSpeakersList",value:function getSpeakersList(){var _deffer=deffer();if(navigator.mediaDevices){navigator.mediaDevices.enumerateDevices().then(function(devices){var arr=[];devices.map(function(item){if(item.kind=="audiooutput"){arr.push(item)}});_deffer.resolve(arr)})}else{_deffer.reject("no devices")}return _deffer.promise}},{key:"play",value:function play(params){var _deffer=deffer();var localVideo=document.getElementById(params.domId);var localStream=window["ezuikit-webrtc"].opt.cln.local.stream;Janus.attachMediaStream(localVideo,localStream);localVideo.play();if(document.getElementById(params.domId)){_deffer.resolve("success")}else{_deffer.reject("no video dom")}return _deffer.promise}},{key:"leaveRoom",value:function leaveRoom(params){var _deffer=deffer();var body={cmdType:"exitRoom",customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};window["ezuikit-webrtc"].opt.mainHandle.send({message:body,success:function success(){window["ezuikit-webrtc"].opt.janus.destroy({success:function success(){}});_deffer.resolve("success")},error:function error(_error9){console.error("  -- Error attaching plugin...",_error9);_deffer.reject(_error9)}});return _deffer.promise}},{key:"setCameraDevice",value:function setCameraDevice(params){var _deffer=deffer();window["ezuikit-webrtc"].cameraId=params.deviceId;if(window["ezuikit-webrtc"].opt.sts){window["ezuikit-webrtc"].opt.sts.createOffer({media:{video:{deviceId:params.deviceId},replaceVideo:true,audio:window["ezuikit-webrtc"].opt.localStreamType==1?false:true},simulcast:false,simulcast2:false,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function success(jsep){console.log("createOffersuccess");Janus.debug("Got SDP!");Janus.debug(jsep);_deffer.resolve("success")},error:function error(_error10){console.log("createOffererror");Janus.error("WebRTC error:",_error10);_deffer.reject(_error10)}})}return _deffer.promise}},{key:"setMicrophoneDevice",value:function setMicrophoneDevice(params){var _deffer=deffer();window["ezuikit-webrtc"].microphoneId=params.deviceId;if(window["ezuikit-webrtc"].opt.sts){window["ezuikit-webrtc"].opt.sts.createOffer({media:{audio:{deviceId:params.deviceId},replaceAudio:true,video:window["ezuikit-webrtc"].opt.localStreamType==2?false:true},simulcast:false,simulcast2:false,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function success(jsep){console.log("createOffersuccess");Janus.debug("Got SDP!");Janus.debug(jsep);_deffer.resolve("success")},error:function error(_error11){console.log("createOffererror");Janus.error("WebRTC error:",_error11);_deffer.reject(_error11)}})}return _deffer.promise}},{key:"setVideoProfile",value:function setVideoProfile(data){var _deffer=deffer();var params={video:{width:data.video.width||360,height:data.video.height||640,frameRate:data.video.frameRate},bitrate:data.video.bitrate||5e5,id:data.id};window["ezuikit-webrtc"].videoParams=params.video;window["ezuikit-webrtc"].bitrate=params.bitrate*1e3;window["ezuikit-webrtc"].frameRate=data.video.frameRate;window["ezuikit-webrtc"].width=data.video.width;window["ezuikit-webrtc"].height=data.video.height;_deffer.resolve("success");return _deffer.promise}},{key:"setAudioProfile",value:function setAudioProfile(data){var params={audio:{deviceId:window["ezuikit-webrtc"].cameraId,sampleRate:data.audio.sampleRate||"32000HZ",sampleSize:data.audio.sampleSize||16,channelCount:data.audio.channelCount||1},id:data.id};window["ezuikit-webrtc"].audioParams=params.audio;console.log("window['ezuikit-webrtc'].videoParams",window["ezuikit-webrtc"])}},{key:"joinRoom",value:function joinRoom(params){var _deffer=deffer();window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function success(pluginHandle){console.log("pluginHandle",pluginHandle);window["ezuikit-webrtc"].opt.mainHandle=pluginHandle;Janus.debug("Trying a createOffer too (audio/video sendrecv)");var body={cmdType:"enterRoom",customId:window["ezuikit-webrtc"].opt.roomParams.userId,clientId:window["ezuikit-webrtc"].opt.roomParams.clientId,strroomId:window["ezuikit-webrtc"].opt.roomParams.roomId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId,authtype:23,authentication:window["ezuikit-webrtc"].opt.roomParams.rtctoken};pluginHandle.send({message:body});_deffer.resolve(pluginHandle.id)},error:function error(_error12){console.error("  -- Error attaching plugin...",_error12);_deffer.reject(_error12)},consentDialog:function consentDialog(on){Janus.debug("Consent dialog should be "+(on?"on":"off")+" now")},iceState:function iceState(state){Janus.log("ICE state changed to "+state);switch(state){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function mediaState(medium,on){Janus.log("Janus "+(on?"started":"stopped")+" receiving our "+medium)},webrtcState:function webrtcState(on){Janus.log("Janus says our WebRTC PeerConnection is "+(on?"up":"down")+" now")},slowLink:function slowLink(uplink,lost){Janus.warn("Janus reports problems "+(uplink?"sending":"receiving")+" packets on this PeerConnection ("+lost+" lost packets)")},onmessage:function onmessage(msg,jsep){Janus.debug(" ::: Got a message :::");Janus.debug(msg);if(jsep!==undefined&&jsep!==null){Janus.debug("Handling SDP as well...");Janus.debug(jsep);window["ezuikit-webrtc"].opt.mainHandle.handleRemoteJsep({jsep:jsep})}var result=msg["result"];if(result!==null&&result!==undefined){if(result==="done"){return}result["status"]}if(msg["rtcgw"]==="enterRoomack"){trigger("enterRoomack",msg)}if(msg["rtcgw"]==="clientJoin"){trigger("clientJoin",msg)}if(msg["rtcgw"]==="clientLeave"){trigger("clientLeave",msg)}if(msg["rtcgw"]==="stream-added"){trigger("steam-added",msg)}if(msg["rtcgw"]==="stream-removed"){trigger("stream-removed",msg)}if(msg["rtcgw"]==="audioleve"){trigger("audioleve",msg)}if(msg["rtcgw"]==="networkquality"){trigger("networkquality",msg)}if(msg["rtcgw"]==="error"){trigger("error",msg)}if(msg["rtcgw"]==="audioleve"){trigger("audioleve",msg)}if(msg["rtcgw"]==="publishlocalstreamack"){trigger("publishlocalstreamack",msg)}if(msg["rtcgw"]==="subremoteack"){trigger("subremoteack",msg)}},onlocalstream:function onlocalstream(stream){console.log("onlocalstream",stream);Janus.debug(" ::: Got a local stream :::");Janus.debug(stream);window["ezuikit-webrtc"].opt.cln.local.stream=stream},onremotestream:function onremotestream(stream){},ondataopen:function ondataopen(data){Janus.log("The DataChannel is available!")},ondata:function ondata(data){Janus.debug("We got data from the DataChannel! "+data)},oncleanup:function oncleanup(){Janus.log(" ::: Got a cleanup notification :::")}});return _deffer.promise}},{key:"getLocalStream",value:function getLocalStream(params){var _deffer=deffer();if(window["ezuikit-webrtc"].opt.cln.local.stream){_deffer.resolve(window["ezuikit-webrtc"].opt.cln.local.stream)}else{_deffer.reject("no stream")}return _deffer.promise}},{key:"getScreenStream",value:function getScreenStream(params){var _deffer=deffer();if(window["ezuikit-webrtc"].opt.screenStream){_deffer.resolve(window["ezuikit-webrtc"].opt.screenStream)}else{_deffer.reject("no stream")}return _deffer.promise}},{key:"suspendStream",value:function suspendStream(params){var that=this;that.controlStream(params,"suspend")}},{key:"controlStream",value:function controlStream(params,controlType){var _deffer=deffer();var body={cmdType:controlType=="resume"?"resumelocalstream":"pauselocalstream",streamtype:params.type,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};if(params.type==2){window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach(function(track){if(track.kind=="audio"){if(controlType=="resume"){track.enabled=true}else{track.enabled=false}}})}if(params.type==1){window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach(function(track){if(track.kind=="video"){if(controlType=="resume"){track.enabled=true}else{track.enabled=false}}})}if(params.type==8){console.log(" window['ezuikit-webrtc'].opt.screenStream.getTracks()",window["ezuikit-webrtc"].opt.screenStream.getTracks());window["ezuikit-webrtc"].opt.screenStream.getTracks().forEach(function(track){if(controlType=="resume"){track.enabled=true}else{track.enabled=false}})}if(params.type==3){window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach(function(track){if(controlType=="resume"){track.enabled=true}else{track.enabled=false}})}if(params.type==8){window["ezuikit-webrtc"].opt.screenHandle.send({message:body,success:function success(){_deffer.resolve("success")},error:function error(_error13){_deffer.reject(_error13)}})}else{window["ezuikit-webrtc"].opt.sts.send({message:body,success:function success(){_deffer.resolve("success")},error:function error(_error14){_deffer.reject(_error14)}})}return _deffer.promise}},{key:"resumeStream",value:function resumeStream(params){var that=this;that.controlStream(params,"resume")}},{key:"publishStream",value:function publishStream(params){var _deffer=deffer();var body={cmdType:"publishlocalstream",streamtype:params.type,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};if(params.type!=8){window["ezuikit-webrtc"].opt.localStreamType=params.type}({audio:true,video:window["ezuikit-webrtc"].videoParams});var media={videoSend:true,audioSend:true,audioRecv:true,videoRecv:true,data:false,video:"stdres",audio:true};switch(params.type){case 1:media={videoSend:true,audioSend:true,audioRecv:true,videoRecv:true,data:false,video:{deviceId:window["ezuikit-webrtc"].cameraId,width:window["ezuikit-webrtc"].width,height:window["ezuikit-webrtc"].height},audio:false};break;case 2:media={videoSend:true,audioSend:true,audioRecv:true,videoRecv:true,data:false,video:false,audio:{deviceId:window["ezuikit-webrtc"].microphoneId}};break;case 3:media={videoSend:true,audioSend:true,audioRecv:true,videoRecv:true,data:false,video:{deviceId:window["ezuikit-webrtc"].cameraId,width:window["ezuikit-webrtc"].width,height:window["ezuikit-webrtc"].height},audio:{deviceId:window["ezuikit-webrtc"].microphoneId}};break;case 8:media={audioRecv:false,videoRecv:true,data:false,audioSend:false,videoSend:true,video:"screen",screenshareFrameRate:3};break}console.log("media-----------",media);console.log("window['ezuikit-webrtc'].bitrate",window["ezuikit-webrtc"].bitrate);console.log("window['ezuikit-webrtc'].opt.sts",window["ezuikit-webrtc"].opt.sts);if(window["ezuikit-webrtc"].opt.sts&&params.type!=8){window["ezuikit-webrtc"].opt.sts.createOffer({media:media,simulcast:false,simulcast2:false,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function success(jsep){console.log("createOffersuccess");Janus.debug("Got SDP!");Janus.debug(jsep);window["ezuikit-webrtc"].opt.sts.send({message:body,jsep:jsep});_deffer.resolve("success")},error:function error(_error15){console.log("createOffererror");Janus.error("WebRTC error:",_error15);_deffer.reject(_error15)}})}else{window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function success(pluginHandle){console.log("pluginHandle",pluginHandle);if(params.type==8){window["ezuikit-webrtc"].opt.screenHandle=pluginHandle}else{window["ezuikit-webrtc"].opt.sts=pluginHandle}Janus.debug("Trying a createOffer too (audio/video sendrecv)");pluginHandle.createOffer({media:media,simulcast:false,simulcast2:false,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function success(jsep){console.log("createOffersuccess");Janus.debug("Got SDP!");Janus.debug(jsep);pluginHandle.send({message:body,jsep:jsep});_deffer.resolve("success")},error:function error(_error16){console.log("createOffererror");Janus.error("WebRTC error:",_error16);_deffer.reject(_error16)}})},error:function error(_error17){console.error("  -- Error attaching plugin...",_error17);_deffer.reject(_error17)},consentDialog:function consentDialog(on){Janus.debug("Consent dialog should be "+(on?"on":"off")+" now")},iceState:function iceState(state){Janus.log("ICE state changed to "+state);switch(state){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function mediaState(medium,on){Janus.log("Janus "+(on?"started":"stopped")+" receiving our "+medium)},webrtcState:function webrtcState(on){Janus.log("Janus says our WebRTC PeerConnection is "+(on?"up":"down")+" now")},slowLink:function slowLink(uplink,lost){Janus.warn("Janus reports problems "+(uplink?"sending":"receiving")+" packets on this PeerConnection ("+lost+" lost packets)")},onmessage:function onmessage(msg,jsep){console.log("消息回调+++++++++++++++++++++++++++++++++++++++++",msg,jsep);Janus.debug(" ::: Got a message :::");Janus.debug(msg);if(jsep!==undefined&&jsep!==null){Janus.debug("Handling SDP as well...");Janus.debug(jsep);if(params.type==8){window["ezuikit-webrtc"].opt.screenHandle.handleRemoteJsep({jsep:jsep})}else{window["ezuikit-webrtc"].opt.sts.handleRemoteJsep({jsep:jsep})}}},onlocalstream:function onlocalstream(stream){console.log("onlocalstream",stream);Janus.debug(" ::: Got a local stream :::");Janus.debug(stream);if(params.type==8){window["ezuikit-webrtc"].opt.screenStream=stream;stream.getVideoTracks()[0].addEventListener("ended",function(){console.log("停止了屏幕共享-----------------------");var screenBody={cmdType:"unpublishlocalstream",streamtype:8,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};if(window["ezuikit-webrtc"].opt.screenHandle){window["ezuikit-webrtc"].opt.screenHandle.send({message:screenBody,success:function success(){window["ezuikit-webrtc"].opt.screenHandle.detach({noRequest:false});window["ezuikit-webrtc"].opt.screenHandle=null},error:function error(_error18){}})}})}else{window["ezuikit-webrtc"].opt.cln.local.stream=stream}},onremotestream:function onremotestream(stream){},ondataopen:function ondataopen(data){Janus.log("The DataChannel is available!")},ondata:function ondata(data){Janus.debug("We got data from the DataChannel! "+data)},oncleanup:function oncleanup(){Janus.log(" ::: Got a cleanup notification :::")}})}return _deffer.promise}},{key:"unpublishStream",value:function unpublishStream(params){var _deffer=deffer();var body={cmdType:"unpublishlocalstream",streamtype:3,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};if(params.type==8){window["ezuikit-webrtc"].opt.screenHandle.send({message:_objectSpread2(_objectSpread2({},body),{},{streamtype:8}),success:function success(){window["ezuikit-webrtc"].opt.screenHandle.detach({noRequest:false});window["ezuikit-webrtc"].opt.screenHandle=null;_deffer.resolve("success")},error:function error(_error19){_deffer.reject(_error19)}})}else{window["ezuikit-webrtc"].opt.sts.send({message:body,success:function success(){window["ezuikit-webrtc"].opt.sts.detach({noRequest:false});window["ezuikit-webrtc"].opt.sts=null;_deffer.resolve("success")},error:function error(_error20){_deffer.reject(_error20)}})}return _deffer.promise}},{key:"ezwebTrigger",value:function ezwebTrigger(params){var localStream=window["ezuikit-webrtc"].opt.cln.local.stream;var event={stream:localStream,clientId:"cliendId-".concat(Math.random()*20)};trigger("steam-added",event)}},{key:"playRemoteSteam",value:function playRemoteSteam(params){var localVideo=document.getElementById(params.domId);Janus.attachMediaStream(localVideo,params.stream);localVideo.load();var playPromise=localVideo.play();if(playPromise!==undefined){playPromise.then(function(){localVideo.play()})["catch"](function(e){})}}},{key:"getQuality",value:function getQuality(params){window["ezuikit-webrtc"].opt["z3"].getNetworkQuality(params.handleId,function(info){console.log("NetworkQuality",info)})}}]);return EZWebRtc}();var name="ezuikit-js";var maintainers=["jzy","npm-ezviz"];var version="7.7.9";var description="ezuikit javascript for npm";var main="ezuikit.js";var scripts={test:'echo "Error: no test specified" && exit 1'};var repository={type:"git",url:"git+https://github.com/Hikvision-Ezviz/EZUIKit-JavaScript-npm.git"};var files=["ezuikit.js","README.md","CHANGELOG.md"];var keywords=["video","ezuikit"];var author="yujianbo";var license="ISC";var bugs={url:"https://github.com/Hikvision-Ezviz/EZUIKit-JavaScript-npm/issues"};var homepage="https://github.com/Hikvision-Ezviz/EZUIKit-JavaScript-npm#readme";var pkg={name:name,maintainers:maintainers,version:version,description:description,main:main,scripts:scripts,repository:repository,files:files,keywords:keywords,author:author,license:license,bugs:bugs,homepage:homepage};class ErrorCategoryEnum{static get JS_ERROR(){return"js_error"}static get RESOURCE_ERROR(){return"resource_error"}static get VUE_ERROR(){return"vue_error"}static get PROMISE_ERROR(){return"promise_error"}static get AJAX_ERROR(){return"ajax_error"}static get CONSOLE_INFO(){return"console_info"}static get CONSOLE_WARN(){return"console_warn"}static get CONSOLE_ERROR(){return"console_error"}static get CROSS_SCRIPT_ERROR(){return"cross_srcipt_error"}static get UNKNOW_ERROR(){return"unknow_error"}static get PERFORMANCE(){return"performance"}static get BUSINESS(){return"business"}}class ErrorLevelEnum{static get ERROR(){return"Error"}static get WARN(){return"Warning"}static get INFO(){return"Info"}}class AjaxLibEnum{static get FETCH(){return"fetch"}static get DEFAULT(){return"default"}}var DeviceInfo=function(){var root=typeof self!=="undefined"?self:this;var _window=root||{};var VariableLibrary={navigator:typeof root.navigator!="undefined"?root.navigator:{},infoMap:{engine:["WebKit","Trident","Gecko","Presto"],browser:["Safari","Chrome","Edge","IE","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","360","360SE","360EE","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","2345Explorer","TheWorld","XiaoMi","Quark","Qiyu","Wechat","Taobao","Alipay","Weibo","Douban","Suning","iQiYi"],os:["Windows","Linux","Mac OS","Android","Ubuntu","FreeBSD","Debian","iOS","Windows Phone","BlackBerry","MeeGo","Symbian","Chrome OS","WebOS"],device:["Mobile","Tablet","iPad"]}};var MethodLibrary=function(){return{getMatchMap:function(u){return{Trident:u.indexOf("Trident")>-1||u.indexOf("NET CLR")>-1,Presto:u.indexOf("Presto")>-1,WebKit:u.indexOf("AppleWebKit")>-1,Gecko:u.indexOf("Gecko/")>-1,Safari:u.indexOf("Safari")>-1,Chrome:u.indexOf("Chrome")>-1||u.indexOf("CriOS")>-1,IE:u.indexOf("MSIE")>-1||u.indexOf("Trident")>-1,Edge:u.indexOf("Edge")>-1,Firefox:u.indexOf("Firefox")>-1||u.indexOf("FxiOS")>-1,"Firefox Focus":u.indexOf("Focus")>-1,Chromium:u.indexOf("Chromium")>-1,Opera:u.indexOf("Opera")>-1||u.indexOf("OPR")>-1,Vivaldi:u.indexOf("Vivaldi")>-1,Yandex:u.indexOf("YaBrowser")>-1,Arora:u.indexOf("Arora")>-1,Lunascape:u.indexOf("Lunascape")>-1,QupZilla:u.indexOf("QupZilla")>-1,"Coc Coc":u.indexOf("coc_coc_browser")>-1,Kindle:u.indexOf("Kindle")>-1||u.indexOf("Silk/")>-1,Iceweasel:u.indexOf("Iceweasel")>-1,Konqueror:u.indexOf("Konqueror")>-1,Iceape:u.indexOf("Iceape")>-1,SeaMonkey:u.indexOf("SeaMonkey")>-1,Epiphany:u.indexOf("Epiphany")>-1,360:u.indexOf("QihooBrowser")>-1||u.indexOf("QHBrowser")>-1,"360EE":u.indexOf("360EE")>-1,"360SE":u.indexOf("360SE")>-1,UC:u.indexOf("UC")>-1||u.indexOf(" UBrowser")>-1,QQBrowser:u.indexOf("QQBrowser")>-1,QQ:u.indexOf("QQ/")>-1,Baidu:u.indexOf("Baidu")>-1||u.indexOf("BIDUBrowser")>-1,Maxthon:u.indexOf("Maxthon")>-1,Sogou:u.indexOf("MetaSr")>-1||u.indexOf("Sogou")>-1,LBBROWSER:u.indexOf("LBBROWSER")>-1,"2345Explorer":u.indexOf("2345Explorer")>-1,TheWorld:u.indexOf("TheWorld")>-1,XiaoMi:u.indexOf("MiuiBrowser")>-1,Quark:u.indexOf("Quark")>-1,Qiyu:u.indexOf("Qiyu")>-1,Wechat:u.indexOf("MicroMessenger")>-1,Taobao:u.indexOf("AliApp(TB")>-1,Alipay:u.indexOf("AliApp(AP")>-1,Weibo:u.indexOf("Weibo")>-1,Douban:u.indexOf("com.douban.frodo")>-1,Suning:u.indexOf("SNEBUY-APP")>-1,iQiYi:u.indexOf("IqiyiApp")>-1,Windows:u.indexOf("Windows")>-1,Linux:u.indexOf("Linux")>-1||u.indexOf("X11")>-1,"Mac OS":u.indexOf("Macintosh")>-1,Android:u.indexOf("Android")>-1||u.indexOf("Adr")>-1,Ubuntu:u.indexOf("Ubuntu")>-1,FreeBSD:u.indexOf("FreeBSD")>-1,Debian:u.indexOf("Debian")>-1,"Windows Phone":u.indexOf("IEMobile")>-1||u.indexOf("Windows Phone")>-1,BlackBerry:u.indexOf("BlackBerry")>-1||u.indexOf("RIM")>-1,MeeGo:u.indexOf("MeeGo")>-1,Symbian:u.indexOf("Symbian")>-1,iOS:u.indexOf("like Mac OS X")>-1,"Chrome OS":u.indexOf("CrOS")>-1,WebOS:u.indexOf("hpwOS")>-1,Mobile:u.indexOf("Mobi")>-1||u.indexOf("iPh")>-1||u.indexOf("480")>-1,Tablet:u.indexOf("Tablet")>-1||u.indexOf("Nexus 7")>-1,iPad:u.indexOf("iPad")>-1}},matchInfoMap:function(_this){var u=VariableLibrary.navigator.userAgent||{};var match=MethodLibrary.getMatchMap(u);for(var s in VariableLibrary.infoMap){for(var i=0;i<VariableLibrary.infoMap[s].length;i++){var value=VariableLibrary.infoMap[s][i];if(match[value]){_this[s]=value}}}},getOS:function(){var _this=this;MethodLibrary.matchInfoMap(_this);return _this.os},getOSVersion:function(){var _this=this;var u=VariableLibrary.navigator.userAgent||{};_this.osVersion="";var osVersion={Windows:function(){var v=u.replace(/^.*Windows NT ([\d.]+);.*$/,"$1");var oldWindowsVersionMap={6.4:"10",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP","5.0":"2000"};return oldWindowsVersionMap[v]||v},Android:function(){return u.replace(/^.*Android ([\d.]+);.*$/,"$1")},iOS:function(){return u.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")},Debian:function(){return u.replace(/^.*Debian\/([\d.]+).*$/,"$1")},"Windows Phone":function(){return u.replace(/^.*Windows Phone( OS)? ([\d.]+);.*$/,"$2")},"Mac OS":function(){return u.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")},WebOS:function(){return u.replace(/^.*hpwOS\/([\d.]+);.*$/,"$1")}};if(osVersion[_this.os]){_this.osVersion=osVersion[_this.os]();if(_this.osVersion==u){_this.osVersion=""}}return _this.osVersion},getOrientationStatu:function(){var orientationStatus="";var orientation=window.matchMedia("(orientation: portrait)");if(orientation.matches){orientationStatus="竖屏"}else{orientationStatus="横屏"}return orientationStatus},getDeviceType:function(){var _this=this;_this.device="PC";MethodLibrary.matchInfoMap(_this);return _this.device},getNetwork:function(){var netWork=navigator&&navigator.connection&&navigator.connection.effectiveType;return netWork},getLanguage:function(){var _this=this;_this.language=function(){var language=VariableLibrary.navigator.browserLanguage||VariableLibrary.navigator.language;var arr=language.split("-");if(arr[1]){arr[1]=arr[1].toUpperCase()}return arr.join("_")}();return _this.language},createFingerprint:function(domain){var fingerprint;function bin2hex(s){var i,l,n,o="";s+="";for(i=0,l=s.length;i<l;i++){n=s.charCodeAt(i).toString(16);o+=n.length<2?"0"+n:n}return o}var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");var txt=domain||window.location.host;ctx.textBaseline="top";ctx.font="14px 'Arial'";ctx.textBaseline="tencent";ctx.fillStyle="#f60";ctx.fillRect(125,1,62,20);ctx.fillStyle="#069";ctx.fillText(txt,2,15);ctx.fillStyle="rgba(102, 204, 0, 0.7)";ctx.fillText(txt,4,17);var b64=canvas.toDataURL().replace("data:image/png;base64,","");var bin=atob(b64);var crc=bin2hex(bin.slice(-16,-12));fingerprint=crc;return fingerprint},getBrowserInfo:function(){var _this=this;MethodLibrary.matchInfoMap(_this);var u=VariableLibrary.navigator.userAgent||{};var _mime=function(option,value){var mimeTypes=VariableLibrary.navigator.mimeTypes;for(var key in mimeTypes){if(mimeTypes[key][option]==value){return true}}return false};var match=MethodLibrary.getMatchMap(u);var is360=false;if(_window.chrome){var chrome_vision=u.replace(/^.*Chrome\/([\d]+).*$/,"$1");if(chrome_vision>36&&_window.showModalDialog){is360=true}else if(chrome_vision>45){is360=_mime("type","application/vnd.chromium.remoting-viewer")}}if(match["Baidu"]&&match["Opera"]){match["Baidu"]=false}if(match["Mobile"]){match["Mobile"]=!(u.indexOf("iPad")>-1)}if(is360){if(_mime("type","application/gameplugin")){match["360SE"]=true}else if(VariableLibrary.navigator&&typeof VariableLibrary.navigator["connection"]["saveData"]=="undefined"){match["360SE"]=true}else{match["360EE"]=true}}if(match["IE"]||match["Edge"]){var navigator_top=window.screenTop-window.screenY;switch(navigator_top){case 71:break;case 74:break;case 99:break;case 102:match["360EE"]=true;break;case 75:break;case 74:break;case 105:break;case 104:match["360SE"]=true;break}}var browerVersionMap={Safari:function(){return u.replace(/^.*Version\/([\d.]+).*$/,"$1")},Chrome:function(){return u.replace(/^.*Chrome\/([\d.]+).*$/,"$1").replace(/^.*CriOS\/([\d.]+).*$/,"$1")},IE:function(){return u.replace(/^.*MSIE ([\d.]+).*$/,"$1").replace(/^.*rv:([\d.]+).*$/,"$1")},Edge:function(){return u.replace(/^.*Edge\/([\d.]+).*$/,"$1")},Firefox:function(){return u.replace(/^.*Firefox\/([\d.]+).*$/,"$1").replace(/^.*FxiOS\/([\d.]+).*$/,"$1")},"Firefox Focus":function(){return u.replace(/^.*Focus\/([\d.]+).*$/,"$1")},Chromium:function(){return u.replace(/^.*Chromium\/([\d.]+).*$/,"$1")},Opera:function(){return u.replace(/^.*Opera\/([\d.]+).*$/,"$1").replace(/^.*OPR\/([\d.]+).*$/,"$1")},Vivaldi:function(){return u.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Yandex:function(){return u.replace(/^.*YaBrowser\/([\d.]+).*$/,"$1")},Arora:function(){return u.replace(/^.*Arora\/([\d.]+).*$/,"$1")},Lunascape:function(){return u.replace(/^.*Lunascape[\/\s]([\d.]+).*$/,"$1")},QupZilla:function(){return u.replace(/^.*QupZilla[\/\s]([\d.]+).*$/,"$1")},"Coc Coc":function(){return u.replace(/^.*coc_coc_browser\/([\d.]+).*$/,"$1")},Kindle:function(){return u.replace(/^.*Version\/([\d.]+).*$/,"$1")},Iceweasel:function(){return u.replace(/^.*Iceweasel\/([\d.]+).*$/,"$1")},Konqueror:function(){return u.replace(/^.*Konqueror\/([\d.]+).*$/,"$1")},Iceape:function(){return u.replace(/^.*Iceape\/([\d.]+).*$/,"$1")},SeaMonkey:function(){return u.replace(/^.*SeaMonkey\/([\d.]+).*$/,"$1")},Epiphany:function(){return u.replace(/^.*Epiphany\/([\d.]+).*$/,"$1")},360:function(){return u.replace(/^.*QihooBrowser\/([\d.]+).*$/,"$1")},"360SE":function(){var hash={63:"10.0",55:"9.1",45:"8.1",42:"8.0",31:"7.0",21:"6.3"};var chrome_vision=u.replace(/^.*Chrome\/([\d]+).*$/,"$1");return hash[chrome_vision]||""},"360EE":function(){var hash={69:"11.0",63:"9.5",55:"9.0",50:"8.7",30:"7.5"};var chrome_vision=u.replace(/^.*Chrome\/([\d]+).*$/,"$1");return hash[chrome_vision]||""},Maxthon:function(){return u.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return u.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return u.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return u.replace(/^.*BIDUBrowser[\s\/]([\d.]+).*$/,"$1")},UC:function(){return u.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},Sogou:function(){return u.replace(/^.*SE ([\d.X]+).*$/,"$1").replace(/^.*SogouMobileBrowser\/([\d.]+).*$/,"$1")},LBBROWSER:function(){var hash={57:"6.5",49:"6.0",46:"5.9",42:"5.3",39:"5.2",34:"5.0",29:"4.5",21:"4.0"};var chrome_vision=navigator.userAgent.replace(/^.*Chrome\/([\d]+).*$/,"$1");return hash[chrome_vision]||""},"2345Explorer":function(){return u.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1")},TheWorld:function(){return u.replace(/^.*TheWorld ([\d.]+).*$/,"$1")},XiaoMi:function(){return u.replace(/^.*MiuiBrowser\/([\d.]+).*$/,"$1")},Quark:function(){return u.replace(/^.*Quark\/([\d.]+).*$/,"$1")},Qiyu:function(){return u.replace(/^.*Qiyu\/([\d.]+).*$/,"$1")},Wechat:function(){return u.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},Taobao:function(){return u.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return u.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return u.replace(/^.*weibo__([\d.]+).*$/,"$1")},Douban:function(){return u.replace(/^.*com.douban.frodo\/([\d.]+).*$/,"$1")},Suning:function(){return u.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return u.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")}};_this.browserVersion="";if(browerVersionMap[_this.browser]){_this.browserVersion=browerVersionMap[_this.browser]();if(_this.browserVersion==u){_this.browserVersion=""}}if(_this.browser=="Edge"){_this.engine="EdgeHTML"}if(_this.browser=="Chrome"&&parseInt(_this.browserVersion)>27){_this.engine="Blink"}if(_this.browser=="Opera"&&parseInt(_this.browserVersion)>12){_this.engine="Blink"}if(_this.browser=="Yandex"){_this.engine="Blink"}return _this.browser+"（版本: "+_this.browserVersion+"&nbsp;&nbsp;内核: "+_this.engine+"）"}}}();var LogicLibrary=function(){return{DeviceInfoObj:function(params){params=params||{domain:""};var info={deviceType:MethodLibrary.getDeviceType(),OS:MethodLibrary.getOS(),OSVersion:MethodLibrary.getOSVersion(),screenHeight:_window.screen.height,screenWidth:_window.screen.width,language:MethodLibrary.getLanguage(),netWork:MethodLibrary.getNetwork(),orientation:MethodLibrary.getOrientationStatu(),browserInfo:MethodLibrary.getBrowserInfo(),fingerprint:MethodLibrary.createFingerprint(params.domain),userAgent:VariableLibrary.navigator.userAgent};if(!params.info||params.info.length==0){return info}var infoTemp={};for(var i in info){params.info.forEach(function(item){if(item.toLowerCase()==i.toLowerCase()){item=i;infoTemp[item]=info[item]}})}return infoTemp}}}();return{getDeviceInfo:function(params){return LogicLibrary.DeviceInfoObj(params)}}}();var utils={type(obj){return Object.prototype.toString.call(obj).replace(/\[object\s|\]/g,"")},isFunction(func){return this.type(func)==="Function"},isArray(list){return this.type(list)==="Array"},isNull(str){return str==undefined||str==""||str==null},objectIsNull(obj){return JSON.stringify(obj)==="{}"},isObject(obj){return this.type(obj)==="Object"}};class ByXHR{toReport(url,data){try{let dataStr=JSON.stringify(data);var xhr=new XMLHttpRequest;xhr.open("POST",url,true);xhr.setRequestHeader("Content-Type","application/json");xhr.send(dataStr)}catch(error){console.log(error)}}}class ByFetch{toReport(url,data){try{let dataStr=JSON.stringify(data);fetch(url,{headers:{"Content-Type":"application/json"},method:"POST",body:dataStr,mode:"same-origin",keepalive:true})}catch(error){(new ByXHR).toReport(url,data);console.log("fetch请求异常",error)}}}class ByImg{toReport(url,data){try{var img=new Image;img.src=url+"?st="+(new Date).getTime()+"&"+this.formatParams(data)}catch(error){console.log(error)}}formatParams(data){var arr=[];for(var name in data){arr.push(encodeURIComponent(name)+"="+encodeURIComponent(data[name]))}return arr.join("&")}}class ByNavigator{toReport(url,data){try{data.st=(new Date).getTime();navigator.sendBeacon&&navigator.sendBeacon(url,this.formatParamsByURLSearchParams(data))}catch(error){console.log(error)}}formatParamsByFormData(data){const form=new FormData;for(var name in data){form.append(name,data[name])}return form}formatParamsByURLSearchParams(data){const form=new URLSearchParams;for(var name in data){if(typeof data[name]==="object"){data[name]=JSON.stringify(data[name])}form.append(name,data[name])}return form}formatParams(data){var arr=[];for(var name in data){arr.push(encodeURIComponent(name)+"="+encodeURIComponent(data[name]))}return arr.join("&")}}class API{constructor(url){this.url=url}report(data,reportWay){let defaultWay={isFetch:false,isXHR:false,isImg:false,isNavigator:false};reportWay=reportWay||defaultWay;if(!this.checkUrl(this.url)){console.log("上报信息url地址格式不正确,url=",this.url);return}this.sendInfo(data,reportWay)}sendInfo(data,reportWay={}){let byFetch=new ByFetch;let byImg=new ByImg;let byXHR=new ByXHR;let byNavigator=new ByNavigator;if(reportWay.isImg){byImg.toReport(this.url,data);return}if(reportWay.isFetch){byFetch.toReport(this.url,data);return}if(reportWay.isXHR){byXHR.toReport(this.url,data);return}if(reportWay.isNavigator){byNavigator.toReport(this.url,data);return}let isDefault=!!(reportWay.isFetch&&reportWay.isImg&&reportWay.isXHR&&reportWay.isNavigator);if(!isDefault){byNavigator.toReport(this.url,data);return}}checkUrl(url){if(!url){return false}var urlRule=/^[hH][tT][tT][pP]([sS]?):\/\//;return urlRule.test(url)}}var TaskQueue={isStop:true,queues:[],add:function(reportUrl,data){this.queues.push({reportUrl:reportUrl,data:data})},fire:function(){if(!this.queues||this.queues.length===0){this.isStop=true;return}this.isStop=false;let item=this.queues[0];item.reportUrl&&new API(item.reportUrl).report(item.data);this.queues.splice(0,1);this.fire()}};class BaseMonitor{constructor(params){this.category=ErrorCategoryEnum.UNKNOW_ERROR;this.level=ErrorLevelEnum.INFO;this.msg="";this.url="";this.line="";this.col="";this.errorObj="";this.reportUrl=params.reportUrl;this.extendsInfo=params.extendsInfo}recordError(){this.handleRecordError();TaskQueue.isStop&&TaskQueue.fire()}handleRecordError(){try{if(!this.msg){return}if(this.reportUrl&&this.url&&this.url.toLowerCase().indexOf(this.reportUrl.toLowerCase())>=0){console.log("统计错误接口异常",this.msg);return}let errorInfo=this.handleErrorInfo();TaskQueue.add(this.reportUrl,errorInfo)}catch(error){console.log(error)}}handleErrorInfo(){let extendsInfo=this.getExtendsInfo();let recordInfo=extendsInfo;let txt="";let action=0;switch(this.category){case ErrorCategoryEnum.BUSINESS:if(this.msg.textKey){txt=JSON.stringify(this.msg);action=1;recordInfo.textKey=this.msg.textKey;if(this.msg.h){recordInfo.h=this.msg.h}if(this.msg.text){recordInfo.text=this.msg.text}}else{recordInfo=Object.assign({},recordInfo,this.msg);recordInfo.l=window.location.href;return recordInfo}break;case ErrorCategoryEnum.PERFORMANCE:txt=JSON.stringify(this.msg);action=1e3;recordInfo.clientInfo=this.getDeviceInfo();break;case ErrorCategoryEnum.AJAX_ERROR:txt=JSON.stringify(this.msg);action=100;break;case ErrorCategoryEnum.RESOURCE_ERROR:const errorInfo={msg:this.msg,url:encodeURIComponent(this.url)};txt=JSON.stringify(errorInfo);action=101;break;case ErrorCategoryEnum.JS_ERROR:txt="错误类别: "+this.category+"\r\n";txt+="日志信息: "+this.msg+"\r\n";txt+="url: "+encodeURIComponent(this.url)+"\r\n";txt+="错误行号: "+this.line+"\r\n";txt+="错误列号: "+this.col+"\r\n";if(this.errorObj&&this.errorObj.stack){txt+="错误栈: "+this.errorObj.stack+"\r\n"}action=102;break;default:txt=this.msg;action=106;break}recordInfo.logInfo=txt;recordInfo.l=window.location.pathname;recordInfo.action=action;return recordInfo}getExtendsInfo(){try{let ret={};let extendsInfo=this.extendsInfo||{};let dynamicParams;if(utils.isFunction(extendsInfo.getDynamic)){dynamicParams=extendsInfo.getDynamic()}if(utils.isObject(dynamicParams)){extendsInfo={...extendsInfo,...dynamicParams}}for(var key in extendsInfo){if(!utils.isFunction(extendsInfo[key])){ret[key]=extendsInfo[key]}}return ret}catch(error){console.log("call getExtendsInfo error",error);return{}}}getDeviceInfo(){try{let deviceInfo=DeviceInfo.getDeviceInfo();return JSON.stringify(deviceInfo)}catch(error){console.log(error);return""}}}function isMatchAjaxDomain(ajaxDomain,url){if(!ajaxDomain||typeof url!=="string"){return true}if(typeof ajaxDomain==="string"){if(url.startsWith("/")){if(window.location.hostname.endsWith(ajaxDomain)){return true}}else{const u=new URL(url);if(u.hostname.endsWith(ajaxDomain)){return true}}return false}if(typeof ajaxDomain==="object"&&ajaxDomain instanceof Array){let isMatch=false;ajaxDomain.forEach(item=>{if(typeof item==="string"){if(url.startsWith("/")){if(window.location.hostname.endsWith(item)){isMatch=true}}else{const u=new URL(url);if(u.hostname.endsWith(item)){isMatch=true}}}});return isMatch}return false}class AjaxError{constructor(params){this.params=params}handleError(type){switch(type){case AjaxLibEnum.FETCH:new FetchError(this.params).handleError();break;case AjaxLibEnum.DEFAULT:new XHRError(this.params).handleError();break;default:new FetchError(this.params).handleError();new XHRError(this.params).handleError();break}}}const isString=obj=>typeof obj==="string";class FetchError extends BaseMonitor{constructor(params){super(params);this.ajaxDomain=params.ajaxDomain}handleError(){if(!window.fetch){return}this.level=ErrorLevelEnum.WARN;this.category=ErrorCategoryEnum.AJAX_ERROR;let _self=this;let _oldFetch=window.fetch;window.fetch=function(){let _arguments=arguments;let _fetchStart=(new Date).getTime();let _status=null;return _oldFetch.apply(this,arguments).then(function(_response){try{const contentType=_response.headers?_response.headers.get("content-type"):"";const canToJson=isString(contentType)&&contentType.includes("application/json");if(canToJson){const response=_response.clone();_status=response.status;let _fetchEnd=(new Date).getTime();let _loadTime=_fetchEnd-_fetchStart;response.json().then(function(data){const requestInfo={fetchStart:_fetchStart,url:_arguments[0],requestOptions:_arguments[1],status:_status,responseBody:data,loadTime:_loadTime};_self.msg=requestInfo;if(isMatchAjaxDomain(_self.ajaxDomain,requestInfo.url)){_self.recordError()}})}else{const response=_response.clone();_status=response.status;let _fetchEnd=(new Date).getTime();let _loadTime=_fetchEnd-_fetchStart;response.text().then(function(data){try{data=JSON.parse(data)}catch(e){console.log("JSON.parse 失败")}const requestInfo={fetchStart:_fetchStart,url:_arguments[0],requestOptions:_arguments[1],status:_status,responseBody:data,loadTime:_loadTime};_self.msg=requestInfo;if(isMatchAjaxDomain(_self.ajaxDomain,requestInfo.url)){_self.recordError()}})}}catch(e){console.log("获取响应数据上报异常");console.log(e)}return _response}).catch(function(error){console.log("获取响应数据上报异常");console.log(error)})}}}class XHRError extends BaseMonitor{constructor(params){super(params);this.ajaxDomain=params.ajaxDomain}handleError(){if(!window.XMLHttpRequest){return}this.level=ErrorLevelEnum.WARN;this.category=ErrorCategoryEnum.AJAX_ERROR;let _self=this;let xhrOpen=XMLHttpRequest.prototype.open;let xhrSend=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(method,url,async){this._url=typeof url==="string"?url:url.href;this._method=method;return xhrOpen.call(this,method,this._url,typeof async==="boolean"?async:true)};XMLHttpRequest.prototype.send=function(){let _fetchStart=(new Date).getTime();if(this.addEventListener){this.addEventListener("readystatechange",function(){if(this.readyState===4){if(this.status>=200&&this.status<300){let _fetchEnd=(new Date).getTime();let _loadTime=_fetchEnd-_fetchStart;const requestOptions={method:this._method};const requestInfo={fetchStart:_fetchStart,url:this._url,requestOptions:requestOptions,responseBody:this.response,status:this.status,loadTime:_loadTime};_self.msg=requestInfo;if(isMatchAjaxDomain(_self.ajaxDomain,requestInfo.url)){_self.recordError()}}else{let _fetchEnd=(new Date).getTime();let _loadTime=_fetchEnd-_fetchStart;const requestOptions={method:this._method};const requestInfo={fetchStart:_fetchStart,url:this._url,requestOptions:requestOptions,status:this.status,loadTime:_loadTime};_self.msg=requestInfo;if(isMatchAjaxDomain(_self.ajaxDomain,requestInfo.url)){_self.recordError()}}}})}return xhrSend.apply(this,arguments)}}}class ConsoleError extends BaseMonitor{constructor(params){super(params)}handleError(){this.registerInfo();this.registerWarn();this.registerError()}registerInfo(){let t=this;console.tInfo=function(){t.handleLog(ErrorLevelEnum.INFO,ErrorCategoryEnum.CONSOLE_INFO,arguments)}}registerWarn(){let t=this;console.tWarn=function(){t.handleLog(ErrorLevelEnum.WARN,ErrorCategoryEnum.CONSOLE_WARN,arguments)}}registerError(){let t=this;console.tError=function(){t.handleLog(ErrorLevelEnum.ERROR,ErrorCategoryEnum.CONSOLE_ERROR,arguments)}}handleLog(level,category,args){try{this.level=level;let params=[...args];this.msg=params.join("\r\n");this.url=location.href;this.category=category;this.recordError()}catch(error){console.log("console统计错误异常",level,error)}}}(function(){if(!window.console){window.console={}}let funcs=["tInfo","tWarn","tError"];funcs.forEach((func,index)=>{if(!console[func]){console[func]=function(){}}})})();class JSError extends BaseMonitor{constructor(params){super(params)}handleError(){window.onerror=(msg,url,line,col,error)=>{console.log("monitor onerror");try{this.level=ErrorLevelEnum.WARN;this.category=ErrorCategoryEnum.JS_ERROR;this.msg=msg;this.url=url;this.line=line;this.col=col;this.errorObj=error;this.recordError()}catch(error){console.log("js错误异常",error)}}}}class PromiseError extends BaseMonitor{constructor(params){super(params)}handleError(){window.addEventListener("unhandledrejection",event=>{try{if(!event||!event.reason){return}if(event.reason.config&&event.reason.config.url){this.url=event.reason.config.url}this.level=ErrorLevelEnum.WARN;this.category=ErrorCategoryEnum.PROMISE_ERROR;this.msg=event.reason;this.recordError()}catch(error){console.log(error)}},true)}}class ResourceError extends BaseMonitor{constructor(params){super(params)}handleError(){window.addEventListener("error",event=>{console.log("monitor addEventListener error");try{if(!event){return}this.category=ErrorCategoryEnum.RESOURCE_ERROR;let target=event.target||event.srcElement;var isElementTarget=target instanceof HTMLScriptElement||target instanceof HTMLLinkElement||target instanceof HTMLImageElement;if(!isElementTarget){return}this.level=target.tagName.toUpperCase()==="IMG"?ErrorLevelEnum.WARN:ErrorLevelEnum.ERROR;this.msg="加载 "+target.tagName+" 资源错误";this.url=target.src||target.href;this.errorObj=target;this.recordError()}catch(error){console.log("资源加载收集异常",error)}},true)}}var e,n,t,r,a=-1,o=function(e){addEventListener("pageshow",function(n){n.persisted&&(a=n.timeStamp,e(n))},!0)},c=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},u=function(){var e=c();return e&&e.activationStart||0},f=function(e,n){var t=c(),r="navigate";a>=0?r="back-forward-cache":t&&(document.prerendering||u()>0?r="prerender":document.wasDiscarded?r="restore":t.type&&(r=t.type.replace(/_/g,"-")));return{name:e,value:void 0===n?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},s=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver(function(e){Promise.resolve().then(function(){n(e.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},t||{})),r}}catch(e){}},d=function(e,n,t,r){var i,a;return function(o){n.value>=0&&(o||r)&&((a=n.value-(i||0))||void 0===i)&&(i=n.value,n.delta=a,n.rating=function(e,n){return e>n[1]?"poor":e>n[0]?"needs-improvement":"good"}(n.value,t),e(n))}},l=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},p=function(e){var n=function(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||e(n)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},v$1=function(e){var n=!1;return function(t){n||(e(t),n=!0)}},m=-1,h=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},g=function(e){"hidden"===document.visibilityState&&m>-1&&(m="visibilitychange"===e.type?e.timeStamp:0,T())},y=function(){addEventListener("visibilitychange",g,!0),addEventListener("prerenderingchange",g,!0)},T=function(){removeEventListener("visibilitychange",g,!0),removeEventListener("prerenderingchange",g,!0)},E=function(){return m<0&&(m=h(),y(),o(function(){setTimeout(function(){m=h(),y()},0)})),{get firstHiddenTime(){return m}}},C=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},L=[1800,3e3],b=function(e,n){n=n||{},C(function(){var t,r=E(),i=f("FCP"),a=s("paint",function(e){e.forEach(function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-u(),0),i.entries.push(e),t(!0)))})});a&&(t=d(e,i,L,n.reportAllChanges),o(function(r){i=f("FCP"),t=d(e,i,L,n.reportAllChanges),l(function(){i.value=performance.now()-r.timeStamp,t(!0)})}))})},w=[.1,.25],S=function(e,n){n=n||{},b(v$1(function(){var t,r=f("CLS",0),i=0,a=[],c=function(e){e.forEach(function(e){if(!e.hadRecentInput){var n=a[0],t=a[a.length-1];i&&e.startTime-t.startTime<1e3&&e.startTime-n.startTime<5e3?(i+=e.value,a.push(e)):(i=e.value,a=[e])}}),i>r.value&&(r.value=i,r.entries=a,t())},u=s("layout-shift",c);u&&(t=d(e,r,w,n.reportAllChanges),p(function(){c(u.takeRecords()),t(!0)}),o(function(){i=0,r=f("CLS",0),t=d(e,r,w,n.reportAllChanges),l(function(){return t()})}),setTimeout(t,0))}))},A={passive:!0,capture:!0},I=new Date,P=function(r,i){e||(e=i,n=r,t=new Date,k(removeEventListener),F())},F=function(){if(n>=0&&n<t-I){var i={entryType:"first-input",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+n};r.forEach(function(e){e(i)}),r=[]}},M=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,n){var t=function(){P(e,n),i()},r=function(){i()},i=function(){removeEventListener("pointerup",t,A),removeEventListener("pointercancel",r,A)};addEventListener("pointerup",t,A),addEventListener("pointercancel",r,A)}(n,e):P(n,e)}},k=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(n){return e(n,M,A)})},D=[100,300],x=function(t,i){i=i||{},C(function(){var a,c=E(),u=f("FID"),l=function(e){e.startTime<c.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),a(!0))},m=function(e){e.forEach(l)},h=s("first-input",m);a=d(t,u,D,i.reportAllChanges),h&&p(v$1(function(){m(h.takeRecords()),h.disconnect()})),h&&o(function(){var o;u=f("FID"),a=d(t,u,D,i.reportAllChanges),r=[],n=-1,e=null,k(addEventListener),o=l,r.push(o),F()})})},U=[2500,4e3],V={},W=function(e,n){n=n||{},C(function(){var t,r=E(),i=f("LCP"),a=function(e){var n=e[e.length-1];n&&n.startTime<r.firstHiddenTime&&(i.value=Math.max(n.startTime-u(),0),i.entries=[n],t())},c=s("largest-contentful-paint",a);if(c){t=d(e,i,U,n.reportAllChanges);var m=v$1(function(){V[i.id]||(a(c.takeRecords()),c.disconnect(),V[i.id]=!0,t(!0))});["keydown","click"].forEach(function(e){addEventListener(e,function(){return setTimeout(m,0)},!0)}),p(m),o(function(r){i=f("LCP"),t=d(e,i,U,n.reportAllChanges),l(function(){i.value=performance.now()-r.timeStamp,V[i.id]=!0,t(!0)})})}})},X=[800,1800],Y=function e(n){document.prerendering?C(function(){return e(n)}):"complete"!==document.readyState?addEventListener("load",function(){return e(n)},!0):setTimeout(n,0)},Z=function(e,n){n=n||{};var t=f("TTFB"),r=d(e,t,X,n.reportAllChanges);Y(function(){var i=c();if(i){var a=i.responseStart;if(a<=0||a>performance.now())return;t.value=Math.max(a-u(),0),t.entries=[i],r(!0),o(function(){t=f("TTFB",0),(r=d(e,t,X,n.reportAllChanges))(!0)})}})};class Performance extends BaseMonitor{constructor(options){super(options||{});this.category=ErrorCategoryEnum.PERFORMANCE;this.reportUrl=options.reportUrl||"";this.performanceData={};this.saveData=this.saveData.bind(this);b(this.saveData);x(this.saveData);W(this.saveData);S(this.saveData);Z(this.saveData)}saveData(data){this.performanceData[data.name]=data.value;if(data.name==="LCP"){this.record(this.performanceData)}}record(data){this.msg=data;this.recordError()}}const ATTRIBUTE_KEY="textkey";const DEFAULT_A_TEXTKEY="common_a";const targetReg=/((<(A|B|BUTTON|DIV|H1|H2|H3|H4|H5|H6|P|IMG|SPAN|TABLE|TD|TEXTAREA|VIDEO)([^<>])*>)([^<>])+(<\/(A|B|BUTTON|DIV|H1|H2|H3|H4|H5|H6|P|IMG|SPAN|TABLE|TD|TEXTAREA|VIDEO)>)|(<(IMG|VIDEO)(.)+>))/i;const MAXLENGTH=20;function matchInnerText(target){var targetName=target.nodeName;var targetText="";if(target.hasAttribute("data-monitor")&&target.getAttribute("data-monitor")){targetText=target.getAttribute("data-monitor");return`${targetText}`.slice(0,MAXLENGTH)}var targetMatch=target.outerHTML.match(targetReg);if(targetMatch&&targetMatch.length>0){switch(targetName){case"IMG":targetText=target.getAttribute("alt");break;default:targetText=targetMatch[0].match(/>[^<>]+<\//)?targetMatch[0].match(/>[^<>]+<\//)[0]:"";targetText=targetText.replace(/[^A-Za-z0-9\u4e00-\u9fa5]/g,"");break}}return`${targetText}`.slice(0,MAXLENGTH)}class Business extends BaseMonitor{constructor(options){super(options||{});this.category=ErrorCategoryEnum.BUSINESS;this.reportUrl=options.reportUrl||"";const keyName=options.keyName||ATTRIBUTE_KEY;const that=this;window.addEventListener("click",function(event){let target=event.target;if(!target){return false}let key=target.getAttribute(keyName);let href=target.getAttribute("link")||target.getAttribute("href");if(key||href){const data={textKey:key||DEFAULT_A_TEXTKEY};if(href){data.h=href}const text=matchInnerText(target);if(text){data.text=text}that.record(data)}else{while(!key&&!href&&target.parentNode){target=target.parentNode;if(target.getAttribute){key=target.getAttribute(keyName);href=target.getAttribute("link")||target.getAttribute("href")}}if(key||href){const data={textKey:key||DEFAULT_A_TEXTKEY};if(href){data.h=href}const text=matchInnerText(target);if(text){data.text=text}that.record(data)}}})}record(data){this.msg=data;this.recordError()}}class Manual extends BaseMonitor{constructor(options){super(options||{});this.category=ErrorCategoryEnum.BUSINESS;this.reportUrl=options.reportUrl||""}record(data){this.msg=data;this.recordError()}}Date.prototype.format=function(fmt){let o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};let week={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};if(/(y+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}if(/(E+)/.test(fmt)){fmt=fmt.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+week[this.getDay()+""])}for(let k in o){if(new RegExp("("+k+")").test(fmt)){fmt=fmt.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return fmt};class EzMonitor{constructor(options){this.jsError=true;this.promiseError=true;this.resourceError=true;this.ajaxError=true;this.ajaxDomain=null;this.isReportHref=false;this.consoleError=false;options=options||{};this.jsError=!(options.jsError===false);this.promiseError=!(options.promiseError===false);this.resourceError=!(options.resourceError===false);this.consoleError=options.consoleError===true;this.ajaxError=!(options.ajaxError===false);this.ajaxDomain=options.ajaxDomain||this.ajaxDomain;this.isReportHref=options.isReportHref||this.isReportHref;this.business=!(options.business===false);this.reportUrl=options.url;this.performace=!(options.performace===false);this.extendsInfo=options.extendsInfo||{};let param={reportUrl:this.reportUrl,extendsInfo:this.extendsInfo};if(this.jsError){new JSError(param).handleError()}if(this.promiseError){new PromiseError(param).handleError()}if(this.resourceError){new ResourceError(param).handleError()}if(this.ajaxError){let ajaxParam=Object.assign({},param,{ajaxDomain:this.ajaxDomain});new AjaxError(ajaxParam).handleError()}if(this.consoleError){new ConsoleError(param).handleError()}if(this.performace){new Performance(param)}if(this.business){new Business(param)}this.manual=new Manual(param)}report(args){if(!typeof args==="object"){console.log("输入参数不正确");return false}this.manual&&this.manual.record(args);return this}}var dclogUrl="https://log.ys7.com/statistics.do/opensdk_ezuikit";window.monitorExtendsInfo={};window.ezuikitMonitor=new EzMonitor({ajaxDomain:["open.ys7.com",".ezvizlife.com"],url:dclogUrl,extendsInfo:{v:pkg.version,getDynamic:function getDynamic(){return window.monitorExtendsInfo}}});var EZUIKit={Core:Core,HLS:HLS,FLV:FLV,EZUIKitPlayer:EZUIKitPlayer,EZUIKitHD:EZUIKitHD,EZWebRtc:EZWebRtc};window.EZUIKit=EZUIKit;return EZUIKit});